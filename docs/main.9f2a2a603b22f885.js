(self.webpackChunkag_grid_angular_cli_example=self.webpackChunkag_grid_angular_cli_example||[]).push([[179],{1569:(ne,ce,A)=>{"use strict";var F={};A.r(F),A.d(F,{attrToBoolean:()=>Mi,attrToNumber:()=>Rd,attrToString:()=>t1,defaultComparator:()=>i1,exists:()=>Ie,jsonEquals:()=>yR,makeNull:()=>fr,missing:()=>gt,missingOrEmpty:()=>us,toStringOrNull:()=>eS,values:()=>ff});var $={};A.r($),A.d($,{cloneObject:()=>SR,deepCloneDefinition:()=>Ad,getAllValuesInObject:()=>fh,getValueUsingField:()=>nn,isNonNullObject:()=>Od,iterateObject:()=>gr,mergeDeep:()=>Lo,removeAllReferences:()=>tS});var Z={};A.r(Z),A.d(Z,{compose:()=>Kw,debounce:()=>ko,doOnce:()=>gh,errorOnce:()=>hs,executeAfter:()=>Fx,executeInAWhile:()=>gf,executeNextVMTurn:()=>$w,getFunctionName:()=>Zm,isFunction:()=>mh,noop:()=>mf,throttle:()=>nS,waitUntil:()=>mr,warnOnce:()=>st});var se={};A.r(se),A.d(se,{areEqual:()=>yc,existsAndNotEmpty:()=>qw,flatten:()=>ER,forEachReverse:()=>nv,includes:()=>Go,insertArrayIntoArray:()=>iv,insertIntoArray:()=>yf,last:()=>Xt,moveInArray:()=>Sf,pushAll:()=>Zw,removeAllFromArray:()=>wR,removeAllFromUnorderedArray:()=>tv,removeFromArray:()=>vr,removeFromUnorderedArray:()=>Cf,removeRepeatsFromArray:()=>Xw,shallowCompare:()=>kx,sortNumerically:()=>_R,toStrings:()=>bf});var X={};A.r(X),A.d(X,{addSafePassiveEventListener:()=>TR,createEventPath:()=>sv,getCtrlForEventTarget:()=>oS,getEventPath:()=>Qw,isElementInEventPath:()=>aS,isEventSupported:()=>Jw,isStopPropagationForAgGrid:()=>yl,stopPropagationForAgGrid:()=>Aa});var ae={};A.r(ae),A.d(ae,{camelCaseToHumanText:()=>cS,camelCaseToHyphenated:()=>eE,capitalise:()=>Vx,escapeString:()=>yn,utf8_encode:()=>c1});var be={};A.r(be),A.d(be,{convertToMap:()=>Sc,keys:()=>Sl,mapById:()=>RR});var pe={};A.r(pe),A.d(pe,{getAriaCheckboxStateName:()=>dE,getAriaLabel:()=>MR,getAriaLevel:()=>zx,getAriaPosInSet:()=>nE,getAriaSortState:()=>iE,removeAriaExpanded:()=>fS,removeAriaSort:()=>IR,setAriaActiveDescendant:()=>oE,setAriaAtomic:()=>pS,setAriaChecked:()=>Yx,setAriaColCount:()=>aE,setAriaColIndex:()=>lE,setAriaColSpan:()=>mS,setAriaControls:()=>cE,setAriaDescribedBy:()=>$x,setAriaDisabled:()=>rE,setAriaExpanded:()=>_c,setAriaHidden:()=>Pd,setAriaLabel:()=>bc,setAriaLabelledBy:()=>hS,setAriaLevel:()=>sE,setAriaLive:()=>lv,setAriaMultiSelectable:()=>Kx,setAriaPosInSet:()=>gS,setAriaRelevant:()=>xR,setAriaRole:()=>In,setAriaRowCount:()=>yh,setAriaRowIndex:()=>dv,setAriaSelected:()=>Ef,setAriaSetSize:()=>cv,setAriaSort:()=>PR});var ee={};A.r(ee),A.d(ee,{browserSupportsPreventScroll:()=>fE,getBodyHeight:()=>_S,getBodyWidth:()=>mE,getMaxDivHeight:()=>gE,getSafariVersion:()=>bS,getScrollbarWidth:()=>vE,getTabIndex:()=>pv,isBrowserChrome:()=>hv,isBrowserFirefox:()=>pE,isBrowserSafari:()=>er,isIOSUserAgent:()=>Vo,isInvisibleScrollbar:()=>Tf,isMacOsUserAgent:()=>FR});var te={};A.r(te),A.d(te,{cleanNumber:()=>CE,createArrayOfNumbers:()=>wS,decToHex:()=>yE,formatNumberCommas:()=>SE,formatNumberTwoDecimalPlacesAndCommas:()=>gv,padStartWidthZeros:()=>Sh,sum:()=>NR});var ie={};A.r(ie),A.d(ie,{dateToFormattedString:()=>bh,parseDateTimeFromString:()=>tr,serialiseDate:()=>Bo});var ve={};A.r(ve),A.d(ve,{FOCUSABLE_EXCLUDE:()=>_E,FOCUSABLE_SELECTOR:()=>Id,addOrRemoveAttribute:()=>Oa,addStylesToElement:()=>GR,bindCellRendererToHtmlElement:()=>AS,clearElement:()=>es,copyNodeList:()=>_l,ensureDomOrder:()=>DE,formatSize:()=>TS,getAbsoluteHeight:()=>ES,getAbsoluteWidth:()=>Rf,getElementRectWithOffset:()=>DS,getElementSize:()=>wc,getInnerHeight:()=>Nd,getInnerWidth:()=>Ec,getScrollLeft:()=>vv,insertWithDomOrder:()=>qx,isElementChildOfClass:()=>wh,isFocusableFormField:()=>wE,isHorizontalScrollShowing:()=>Xx,isInDOM:()=>EE,isNodeOrElement:()=>Dh,isRtlNegativeScroll:()=>Af,isVerticalScrollShowing:()=>Zx,isVisible:()=>Fn,iterateNamedNodeMap:()=>Mf,loadTemplate:()=>ps,nodeListForEach:()=>RS,radioCssClass:()=>mv,removeFromParent:()=>bl,setDisabled:()=>Fd,setDisplayed:()=>si,setDomChildOrder:()=>kR,setElementHeight:()=>Jx,setElementWidth:()=>Of,setFixedHeight:()=>Eh,setFixedWidth:()=>Ho,setScrollLeft:()=>Cv,setVisible:()=>LR});var Ce={};A.r(Ce),A.d(Ce,{fuzzyCheckStrings:()=>Qx,fuzzySuggestions:()=>OS});var fe={};A.r(fe),A.d(fe,{createIcon:()=>Ur,createIconNoSpan:()=>Nn,iconNameClassMap:()=>MS});var _e={};A.r(_e),A.d(_e,{isDeleteKey:()=>Sn,isEventFromPrintableCharacter:()=>Th,isUserSuppressingHeaderKeyboardEvent:()=>PS,isUserSuppressingKeyboardEvent:()=>xS,normaliseQwertyAzerty:()=>HR});var he={};A.r(he),A.d(he,{areEventsNear:()=>TE});var Ke={};A.r(Ke),A.d(Ke,{sortRowNodesByOrder:()=>sP});var We={};A.r(We),A.d(We,{convertToSet:()=>yv});var Oe=A(6895),C=A(3071);class oi extends Oe.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class ki extends oi{static makeCurrent(){(0,Oe.HT)(new ki)}onAndCancel(e,t,i){return e.addEventListener(t,i,!1),()=>{e.removeEventListener(t,i,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function ut(){return Ut=Ut||document.querySelector("base"),Ut?Ut.getAttribute("href"):null}();return null==t?null:function ai(r){_i=_i||document.createElement("a"),_i.setAttribute("href",r);const e=_i.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){Ut=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return(0,Oe.Mx)(document.cookie,e)}}let _i,Ut=null;const je=new C.OlP("TRANSITION_ID"),Ye=[{provide:C.ip1,useFactory:function Et(r,e,t){return()=>{t.get(C.CZH).donePromise.then(()=>{const i=(0,Oe.q)(),n=e.querySelectorAll(`style[ng-transition="${r}"]`);for(let s=0;s<n.length;s++)i.remove(n[s])})}},deps:[je,Oe.K0,C.zs3],multi:!0}];let pt=(()=>{class r{build(){return new XMLHttpRequest}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac}),r})();const Qu=new C.OlP("EventManagerPlugins");let cl=(()=>{class r{constructor(t,i){this._zone=i,this._eventNameToPlugin=new Map,t.forEach(n=>n.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,i,n){return this._findPluginFor(i).addEventListener(t,i,n)}addGlobalEventListener(t,i,n){return this._findPluginFor(i).addGlobalEventListener(t,i,n)}getZone(){return this._zone}_findPluginFor(t){const i=this._eventNameToPlugin.get(t);if(i)return i;const n=this._plugins;for(let s=0;s<n.length;s++){const o=n[s];if(o.supports(t))return this._eventNameToPlugin.set(t,o),o}throw new Error(`No event manager plugin found for event ${t}`)}}return r.\u0275fac=function(t){return new(t||r)(C.LFG(Qu),C.LFG(C.R0b))},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac}),r})();class dl{constructor(e){this._doc=e}addGlobalEventListener(e,t,i){const n=(0,Oe.q)().getGlobalEventTarget(this._doc,e);if(!n)throw new Error(`Unsupported event target ${n} for event ${t}`);return this.addEventListener(n,t,i)}}let Yn=(()=>{class r{constructor(){this._stylesSet=new Set}addStyles(t){const i=new Set;t.forEach(n=>{this._stylesSet.has(n)||(this._stylesSet.add(n),i.add(n))}),this.onStylesAdded(i)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac}),r})(),ul=(()=>{class r extends Yn{constructor(t){super(),this._doc=t,this._hostNodes=new Map,this._hostNodes.set(t.head,[])}_addStylesToHost(t,i,n){t.forEach(s=>{const o=this._doc.createElement("style");o.textContent=s,n.push(i.appendChild(o))})}addHost(t){const i=[];this._addStylesToHost(this._stylesSet,t,i),this._hostNodes.set(t,i)}removeHost(t){const i=this._hostNodes.get(t);i&&i.forEach(Up),this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach((i,n)=>{this._addStylesToHost(t,n,i)})}ngOnDestroy(){this._hostNodes.forEach(t=>t.forEach(Up))}}return r.\u0275fac=function(t){return new(t||r)(C.LFG(Oe.K0))},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac}),r})();function Up(r){(0,Oe.q)().remove(r)}const Ty={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},co=/%COMP%/g;function zp(r,e,t){for(let i=0;i<e.length;i++){let n=e[i];Array.isArray(n)?zp(r,n,t):(n=n.replace(co,r),t.push(n))}return t}function Ry(r){return e=>{if("__ngUnwrap__"===e)return r;!1===r(e)&&(e.preventDefault(),e.returnValue=!1)}}let ii=(()=>{class r{constructor(t,i,n){this.eventManager=t,this.sharedStylesHost=i,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new hc(t)}createRenderer(t,i){if(!t||!i)return this.defaultRenderer;switch(i.encapsulation){case C.ifc.Emulated:{let n=this.rendererByCompId.get(i.id);return n||(n=new Ts(this.eventManager,this.sharedStylesHost,i,this.appId),this.rendererByCompId.set(i.id,n)),n.applyToHost(t),n}case 1:case C.ifc.ShadowDom:return new hl(this.eventManager,this.sharedStylesHost,t,i);default:if(!this.rendererByCompId.has(i.id)){const n=zp(i.id,i.styles,[]);this.sharedStylesHost.addStyles(n),this.rendererByCompId.set(i.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return r.\u0275fac=function(t){return new(t||r)(C.LFG(cl),C.LFG(ul),C.LFG(C.AFp))},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac}),r})();class hc{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(Ty[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(An(e)?e.content:e).appendChild(t)}insertBefore(e,t,i){e&&(An(e)?e.content:e).insertBefore(t,i)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let i="string"==typeof e?document.querySelector(e):e;if(!i)throw new Error(`The selector "${e}" did not match any elements`);return t||(i.textContent=""),i}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,i,n){if(n){t=n+":"+t;const s=Ty[n];s?e.setAttributeNS(s,t,i):e.setAttribute(t,i)}else e.setAttribute(t,i)}removeAttribute(e,t,i){if(i){const n=Ty[i];n?e.removeAttributeNS(n,t):e.removeAttribute(`${i}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,i,n){n&(C.JOm.DashCase|C.JOm.Important)?e.style.setProperty(t,i,n&C.JOm.Important?"important":""):e.style[t]=i}removeStyle(e,t,i){i&C.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,i){e[t]=i}setValue(e,t){e.nodeValue=t}listen(e,t,i){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,Ry(i)):this.eventManager.addEventListener(e,t,Ry(i))}}function An(r){return"TEMPLATE"===r.tagName&&void 0!==r.content}class Ts extends hc{constructor(e,t,i,n){super(e),this.component=i;const s=zp(n+"-"+i.id,i.styles,[]);t.addStyles(s),this.contentAttr=function jp(r){return"_ngcontent-%COMP%".replace(co,r)}(n+"-"+i.id),this.hostAttr=function ZT(r){return"_nghost-%COMP%".replace(co,r)}(n+"-"+i.id)}applyToHost(e){super.setAttribute(e,this.hostAttr,"")}createElement(e,t){const i=super.createElement(e,t);return super.setAttribute(i,this.contentAttr,""),i}}class hl extends hc{constructor(e,t,i,n){super(e),this.sharedStylesHost=t,this.hostEl=i,this.shadowRoot=i.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=zp(n.id,n.styles,[]);for(let o=0;o<s.length;o++){const a=document.createElement("style");a.textContent=s[o],this.shadowRoot.appendChild(a)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,i){return super.insertBefore(this.nodeOrShadowRoot(e),t,i)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}}let ih=(()=>{class r extends dl{constructor(t){super(t)}supports(t){return!0}addEventListener(t,i,n){return t.addEventListener(i,n,!1),()=>this.removeEventListener(t,i,n)}removeEventListener(t,i,n){return t.removeEventListener(i,n)}}return r.\u0275fac=function(t){return new(t||r)(C.LFG(Oe.K0))},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac}),r})();const Ay=["alt","control","meta","shift"],Yp={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Rm={alt:r=>r.altKey,control:r=>r.ctrlKey,meta:r=>r.metaKey,shift:r=>r.shiftKey};let bd=(()=>{class r extends dl{constructor(t){super(t)}supports(t){return null!=r.parseEventName(t)}addEventListener(t,i,n){const s=r.parseEventName(i),o=r.eventCallback(s.fullKey,n,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,Oe.q)().onAndCancel(t,s.domEventName,o))}static parseEventName(t){const i=t.toLowerCase().split("."),n=i.shift();if(0===i.length||"keydown"!==n&&"keyup"!==n)return null;const s=r._normalizeKey(i.pop());let o="",a=i.indexOf("code");if(a>-1&&(i.splice(a,1),o="code."),Ay.forEach(u=>{const p=i.indexOf(u);p>-1&&(i.splice(p,1),o+=u+".")}),o+=s,0!=i.length||0===s.length)return null;const c={};return c.domEventName=n,c.fullKey=o,c}static matchEventFullKeyCode(t,i){let n=Yp[t.key]||t.key,s="";return i.indexOf("code.")>-1&&(n=t.code,s="code."),!(null==n||!n)&&(n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),Ay.forEach(o=>{o!==n&&(0,Rm[o])(t)&&(s+=o+".")}),s+=n,s===i)}static eventCallback(t,i,n){return s=>{r.matchEventFullKeyCode(s,t)&&n.runGuarded(()=>i(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return r.\u0275fac=function(t){return new(t||r)(C.LFG(Oe.K0))},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac}),r})();const qt=(0,C.eFA)(C._c5,"browser",[{provide:C.Lbi,useValue:Oe.bD},{provide:C.g9A,useValue:function Te(){ki.makeCurrent()},multi:!0},{provide:Oe.K0,useFactory:function mi(){return(0,C.RDi)(document),document},deps:[]}]),Qt=new C.OlP(""),Rs=[{provide:C.rWj,useClass:class ct{addToWindow(e){C.dqk.getAngularTestability=(i,n=!0)=>{const s=e.findTestabilityInTree(i,n);if(null==s)throw new Error("Could not find testability for element.");return s},C.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),C.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),C.dqk.frameworkStabilizers||(C.dqk.frameworkStabilizers=[]),C.dqk.frameworkStabilizers.push(i=>{const n=C.dqk.getAllAngularTestabilities();let s=n.length,o=!1;const a=function(c){o=o||c,s--,0==s&&i(o)};n.forEach(function(c){c.whenStable(a)})})}findTestabilityInTree(e,t,i){return null==t?null:e.getTestability(t)??(i?(0,Oe.q)().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:C.lri,useClass:C.dDg,deps:[C.R0b,C.eoX,C.rWj]},{provide:C.dDg,useClass:C.dDg,deps:[C.R0b,C.eoX,C.rWj]}],xt=[{provide:C.zSh,useValue:"root"},{provide:C.qLn,useFactory:function ft(){return new C.qLn},deps:[]},{provide:Qu,useClass:ih,multi:!0,deps:[Oe.K0,C.R0b,C.Lbi]},{provide:Qu,useClass:bd,multi:!0,deps:[Oe.K0]},{provide:ii,useClass:ii,deps:[cl,ul,C.AFp]},{provide:C.FYo,useExisting:ii},{provide:Yn,useExisting:ul},{provide:ul,useClass:ul,deps:[Oe.K0]},{provide:cl,useClass:cl,deps:[Qu,C.R0b]},{provide:Oe.JF,useClass:pt,deps:[]},[]];let Nr=(()=>{class r{constructor(t){}static withServerTransition(t){return{ngModule:r,providers:[{provide:C.AFp,useValue:t.appId},{provide:je,useExisting:C.AFp},Ye]}}}return r.\u0275fac=function(t){return new(t||r)(C.LFG(Qt,12))},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({providers:[...xt,...Rs],imports:[Oe.ez,C.hGG]}),r})();typeof window<"u"&&window;var pl=A(5254),Gi=A(2916),ba=A(6688),As=A(4850),kt=A(7830);function Po(r,e){return new Gi.y(t=>{const i=r.length;if(0===i)return void t.complete();const n=new Array(i);let s=0,o=0;for(let a=0;a<i;a++){const c=(0,pl.D)(r[a]);let u=!1;t.add(c.subscribe({next:p=>{u||(u=!0,o++),n[a]=p},error:p=>t.error(p),complete:()=>{s++,(s===i||!u)&&(o===i&&t.next(e?e.reduce((p,g,m)=>(p[g]=n[m],p),{}):n),t.complete())}}))}})}let Zp=(()=>{class r{constructor(t,i){this._renderer=t,this._elementRef=i,this.onChange=n=>{},this.onTouched=()=>{}}setProperty(t,i){this._renderer.setProperty(this._elementRef.nativeElement,t,i)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return r.\u0275fac=function(t){return new(t||r)(C.Y36(C.Qsj),C.Y36(C.SBq))},r.\u0275dir=C.lG2({type:r}),r})(),Zs=(()=>{class r extends Zp{}return r.\u0275fac=function(){let e;return function(i){return(e||(e=C.n5z(r)))(i||r)}}(),r.\u0275dir=C.lG2({type:r,features:[C.qOj]}),r})();const Oi=new C.OlP("NgValueAccessor"),lh={provide:Oi,useExisting:(0,C.Gpc)(()=>_a),multi:!0};let _a=(()=>{class r extends Zs{writeValue(t){this.setProperty("checked",t)}}return r.\u0275fac=function(){let e;return function(i){return(e||(e=C.n5z(r)))(i||r)}}(),r.\u0275dir=C.lG2({type:r,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(t,i){1&t&&C.NdJ("change",function(s){return i.onChange(s.target.checked)})("blur",function(){return i.onTouched()})},features:[C._Bn([lh]),C.qOj]}),r})();const uo={provide:Oi,useExisting:(0,C.Gpc)(()=>hi),multi:!0},Jp=new C.OlP("CompositionEventMode");let hi=(()=>{class r extends Zp{constructor(t,i,n){super(t,i),this._compositionMode=n,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function gc(){const r=(0,Oe.q)()?(0,Oe.q)().getUserAgent():"";return/android (\d+)/.test(r.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return r.\u0275fac=function(t){return new(t||r)(C.Y36(C.Qsj),C.Y36(C.SBq),C.Y36(Jp,8))},r.\u0275dir=C.lG2({type:r,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,i){1&t&&C.NdJ("input",function(s){return i._handleInput(s.target.value)})("blur",function(){return i.onTouched()})("compositionstart",function(){return i._compositionStart()})("compositionend",function(s){return i._compositionEnd(s.target.value)})},features:[C._Bn([uo]),C.qOj]}),r})();const Cn=new C.OlP("NgValidators"),Gr=new C.OlP("NgAsyncValidators");function hw(r){return null!=r}function Iy(r){return(0,C.QGY)(r)?(0,pl.D)(r):r}function Fy(r){let e={};return r.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function pw(r,e){return e.map(t=>t(r))}function fw(r){return r.map(e=>function eR(r){return!r.validate}(e)?e:t=>e.validate(t))}function Ny(r){return null!=r?function gw(r){if(!r)return null;const e=r.filter(hw);return 0==e.length?null:function(t){return Fy(pw(t,e))}}(fw(r)):null}function Ly(r){return null!=r?function mw(r){if(!r)return null;const e=r.filter(hw);return 0==e.length?null:function(t){return function ah(...r){if(1===r.length){const e=r[0];if((0,ba.k)(e))return Po(e,null);if((0,kt.K)(e)&&Object.getPrototypeOf(e)===Object.prototype){const t=Object.keys(e);return Po(t.map(i=>e[i]),t)}}if("function"==typeof r[r.length-1]){const e=r.pop();return Po(r=1===r.length&&(0,ba.k)(r[0])?r[0]:r,null).pipe((0,As.U)(t=>e(...t)))}return Po(r,null)}(pw(t,e).map(Iy)).pipe((0,As.U)(Fy))}}(fw(r)):null}function ky(r,e){return null===r?[e]:Array.isArray(r)?[...r,e]:[r,e]}function Gy(r){return r?Array.isArray(r)?r:[r]:[]}function uh(r,e){return Array.isArray(r)?r.includes(e):r===e}function Mm(r,e){const t=Gy(e);return Gy(r).forEach(n=>{uh(t,n)||t.push(n)}),t}function yw(r,e){return Gy(e).filter(t=>!uh(r,t))}class Vy{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Ny(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Ly(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class Xn extends Vy{get formDirective(){return null}get path(){return null}}class gl extends Vy{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}let xm=(()=>{class r extends class Sw{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}{constructor(t){super(t)}}return r.\u0275fac=function(t){return new(t||r)(C.Y36(gl,2))},r.\u0275dir=C.lG2({type:r,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,i){2&t&&C.ekj("ng-untouched",i.isUntouched)("ng-touched",i.isTouched)("ng-pristine",i.isPristine)("ng-dirty",i.isDirty)("ng-valid",i.isValid)("ng-invalid",i.isInvalid)("ng-pending",i.isPending)},features:[C.qOj]}),r})();const Zn="VALID",rf="INVALID",vc="PENDING",Io="DISABLED";function Wy(r){return Array.isArray(r)?Ny(r):r||null}function Rw(r){return Array.isArray(r)?Ly(r):r||null}function po(r){return null!=r&&!Array.isArray(r)&&"object"==typeof r}function hh(r,e){(function km(r,e){const t=function vw(r){return r._rawValidators}(r);null!==e.validator?r.setValidators(ky(t,e.validator)):"function"==typeof t&&r.setValidators([t]);const i=function Cw(r){return r._rawAsyncValidators}(r);null!==e.asyncValidator?r.setAsyncValidators(ky(i,e.asyncValidator)):"function"==typeof i&&r.setAsyncValidators([i]);const n=()=>r.updateValueAndValidity();Ve(e._rawValidators,n),Ve(e._rawAsyncValidators,n)})(r,e),e.valueAccessor.writeValue(r.value),r.disabled&&e.valueAccessor.setDisabledState?.(!0),function Mn(r,e){e.valueAccessor.registerOnChange(t=>{r._pendingValue=t,r._pendingChange=!0,r._pendingDirty=!0,"change"===r.updateOn&&Ed(r,e)})}(r,e),function Ea(r,e){const t=(i,n)=>{e.valueAccessor.writeValue(i),n&&e.viewToModelUpdate(i)};r.registerOnChange(t),e._registerOnDestroy(()=>{r._unregisterOnChange(t)})}(r,e),function Ow(r,e){e.valueAccessor.registerOnTouched(()=>{r._pendingTouched=!0,"blur"===r.updateOn&&r._pendingChange&&Ed(r,e),"submit"!==r.updateOn&&r.markAsTouched()})}(r,e),function li(r,e){if(e.valueAccessor.setDisabledState){const t=i=>{e.valueAccessor.setDisabledState(i)};r.registerOnDisabledChange(t),e._registerOnDestroy(()=>{r._unregisterOnDisabledChange(t)})}}(r,e)}function Ve(r,e){r.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function Ed(r,e){r._pendingDirty&&r.markAsDirty(),r.setValue(r._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(r._pendingValue),r._pendingChange=!1}function Bm(r,e){const t=r.indexOf(e);t>-1&&r.splice(t,1)}function Hm(r){return"object"==typeof r&&null!==r&&2===Object.keys(r).length&&"value"in r&&"disabled"in r}const Nw={provide:gl,useExisting:(0,C.Gpc)(()=>Jn)},qy=(()=>Promise.resolve())();let Jn=(()=>{class r extends gl{constructor(t,i,n,s,o){super(),this._changeDetectorRef=o,this.control=new class extends class Rt{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=e,this._rawAsyncValidators=t,this._composedValidatorFn=Wy(this._rawValidators),this._composedAsyncValidatorFn=Rw(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Zn}get invalid(){return this.status===rf}get pending(){return this.status==vc}get disabled(){return this.status===Io}get enabled(){return this.status!==Io}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._rawValidators=e,this._composedValidatorFn=Wy(e)}setAsyncValidators(e){this._rawAsyncValidators=e,this._composedAsyncValidatorFn=Rw(e)}addValidators(e){this.setValidators(Mm(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(Mm(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(yw(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(yw(e,this._rawAsyncValidators))}hasValidator(e){return uh(this._rawValidators,e)}hasAsyncValidator(e){return uh(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=vc,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Io,this.errors=null,this._forEachChild(i=>{i.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=Zn,this._forEachChild(i=>{i.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(i=>i(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Zn||this.status===vc)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Io:Zn}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=vc,this._hasOwnPendingAsyncValidator=!0;const t=Iy(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(i=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(i,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((i,n)=>i&&i._find(n),this)}getError(e,t){const i=t?this.get(t):this;return i&&i.errors?i.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new C.vpe,this.statusChanges=new C.vpe}_calculateStatus(){return this._allControlsDisabled()?Io:this.errors?rf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(vc)?vc:this._anyControlsHaveStatus(rf)?rf:Zn}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){po(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}}{constructor(e=null,t,i){super(function Ms(r){return(po(r)?r.validators:r)||null}(t),function wd(r,e){return(po(e)?e.asyncValidators:r)||null}(i,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),po(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=Hm(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(i=>i(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Bm(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Bm(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){Hm(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},this._registered=!1,this.update=new C.vpe,this._parent=t,this._setValidators(i),this._setAsyncValidators(n),this.valueAccessor=function Da(r,e){if(!e)return null;let t,i,n;return Array.isArray(e),e.forEach(s=>{s.constructor===hi?t=s:function ml(r){return Object.getPrototypeOf(r.constructor)===Zs}(s)?i=s:n=s}),n||i||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const i=t.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function on(r,e){if(!r.hasOwnProperty("model"))return!1;const t=r.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){hh(this.control,this),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){qy.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const i=t.isDisabled.currentValue,n=0!==i&&(0,C.D6c)(i);qy.then(()=>{n&&!this.control.disabled?this.control.disable():!n&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function lf(r,e){return[...e.path,r]}(t,this._parent):[t]}}return r.\u0275fac=function(t){return new(t||r)(C.Y36(Xn,9),C.Y36(Cn,10),C.Y36(Gr,10),C.Y36(Oi,10),C.Y36(C.sBO,8))},r.\u0275dir=C.lG2({type:r,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[C._Bn([Nw]),C.qOj,C.TTD]}),r})(),kw=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({}),r})(),mR=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[kw]}),r})(),jw=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[mR]}),r})();function fr(r){return null==r||""===r?null:r}function Ie(r,e=!1){return null!=r&&(""!==r||e)}function gt(r){return!Ie(r)}function us(r){return null==r||0===r.length}function eS(r){return null!=r&&"function"==typeof r.toString?r.toString():null}function Rd(r){if(void 0===r)return;if(null===r||""===r)return null;if("number"==typeof r)return isNaN(r)?void 0:r;const e=parseInt(r,10);return isNaN(e)?void 0:e}function Mi(r){if(void 0!==r)return null!==r&&""!==r&&("boolean"==typeof r?r:/true/i.test(r))}function t1(r){if(null!=r&&""!==r)return r}function yR(r,e){return(r?JSON.stringify(r):null)===(e?JSON.stringify(e):null)}function i1(r,e,t=!1){const i=null==r,n=null==e;if(r&&r.toNumber&&(r=r.toNumber()),e&&e.toNumber&&(e=e.toNumber()),i&&n)return 0;if(i)return-1;if(n)return 1;function s(o,a){return o>a?1:o<a?-1:0}if("string"!=typeof r||!t)return s(r,e);try{return r.localeCompare(e)}catch{return s(r,e)}}function ff(r){if(r instanceof Set||r instanceof Map){const e=[];return r.forEach(t=>e.push(t)),e}return Object.values(r)}class n1{constructor(){this.existingKeys={}}addExistingKeys(e){for(let t=0;t<e.length;t++)this.existingKeys[e[t]]=!0}getUniqueKey(e,t){e=eS(e);let i=0;for(;;){let n;if(e?(n=e,0!==i&&(n+="_"+i)):t?(n=t,0!==i&&(n+="_"+i)):n=i,!this.existingKeys[n])return this.existingKeys[n]=!0,String(n);i++}}}function gr(r,e){if(null!=r){if(Array.isArray(r)){for(let t=0;t<r.length;t++)e(t.toString(),r[t]);return}for(const[t,i]of Object.entries(r))e(t,i)}}function SR(r){const e={},t=Object.keys(r);for(let i=0;i<t.length;i++){const n=t[i];e[n]=r[n]}return e}function Ad(r,e){if(!r)return;const t=r,i={};return Object.keys(t).forEach(n=>{if(e&&e.indexOf(n)>=0)return;const s=t[n];i[n]=Od(s)&&s.constructor===Object?Ad(s):s}),i}function fh(r){if(!r)return[];const e=Object;if("function"==typeof e.values)return e.values(r);const t=[];for(const i in r)r.hasOwnProperty(i)&&r.propertyIsEnumerable(i)&&t.push(r[i]);return t}function Lo(r,e,t=!0,i=!1){!Ie(e)||gr(e,(n,s)=>{let o=r[n];o!==s&&(i&&null==o&&null!=s&&"object"==typeof s&&s.constructor===Object&&(o={},r[n]=o),Od(s)&&Od(o)&&!Array.isArray(o)?Lo(o,s,t,i):(t||void 0!==s)&&(r[n]=s))})}function nn(r,e,t){if(!e||!r)return;if(!t)return r[e];const i=e.split(".");let n=r;for(let s=0;s<i.length;s++){if(null==n)return;n=n[i[s]]}return n}function tS(r,e=[],t){Object.keys(r).forEach(o=>{"object"==typeof r[o]&&!e.includes(o)&&(r[o]=void 0)});const i=Object.getPrototypeOf(r),n={};Object.getOwnPropertyNames(i).forEach(o=>{if("function"==typeof i[o]&&!e.includes(o)){const c=()=>{console.warn((o=>`AG Grid: Grid API function ${o}() cannot be called as the grid has been destroyed.\n    It is recommended to remove local references to the grid api. Alternatively, check gridApi.isDestroyed() to avoid calling methods against a destroyed grid.\n    To run logic when the grid is about to be destroyed use the gridPreDestroy event. See: ${t}`)(o))};n[o]={value:c,writable:!0}}}),Object.defineProperties(r,n)}function Od(r){return"object"==typeof r&&null!==r}const Ix={};function gh(r,e){Ix[e]||(r(),Ix[e]=!0)}function st(r){gh(()=>console.warn("AG Grid: "+r),r)}function hs(r){gh(()=>console.error("AG Grid: "+r),r)}function Zm(r){if(r.name)return r.name;const e=/function\s+([^\(]+)/.exec(r.toString());return e&&2===e.length?e[1].trim():null}function mh(r){return!!(r&&r.constructor&&r.call&&r.apply)}function gf(r){Fx(r,400)}const iS=[];let zw=!1;function $w(r){iS.push(r),!zw&&(zw=!0,window.setTimeout(()=>{const e=iS.slice();iS.length=0,zw=!1,e.forEach(t=>t())},0))}function Fx(r,e=0){r.length>0&&window.setTimeout(()=>r.forEach(t=>t()),e)}function ko(r,e){let t;return function(...i){const n=this;window.clearTimeout(t),t=window.setTimeout(function(){r.apply(n,i)},e)}}function nS(r,e){let t=0;return function(...i){const s=(new Date).getTime();s-t<e||(t=s,r.apply(this,i))}}function mr(r,e,t=100,i){const n=(new Date).getTime();let s=null,o=!1;const a=()=>{const c=(new Date).getTime()-n>t;(r()||c)&&(e(),o=!0,null!=s&&(window.clearInterval(s),s=null),c&&i&&console.warn(i))};a(),o||(s=window.setInterval(a,10))}function Kw(...r){return e=>r.reduce((t,i)=>i(t),e)}const mf=()=>{};var ze=(()=>{return(r=ze||(ze={})).CommunityCoreModule="@ag-grid-community/core",r.InfiniteRowModelModule="@ag-grid-community/infinite-row-model",r.ClientSideRowModelModule="@ag-grid-community/client-side-row-model",r.CsvExportModule="@ag-grid-community/csv-export",r.EnterpriseCoreModule="@ag-grid-enterprise/core",r.RowGroupingModule="@ag-grid-enterprise/row-grouping",r.ColumnsToolPanelModule="@ag-grid-enterprise/column-tool-panel",r.FiltersToolPanelModule="@ag-grid-enterprise/filter-tool-panel",r.MenuModule="@ag-grid-enterprise/menu",r.SetFilterModule="@ag-grid-enterprise/set-filter",r.MultiFilterModule="@ag-grid-enterprise/multi-filter",r.StatusBarModule="@ag-grid-enterprise/status-bar",r.SideBarModule="@ag-grid-enterprise/side-bar",r.RangeSelectionModule="@ag-grid-enterprise/range-selection",r.MasterDetailModule="@ag-grid-enterprise/master-detail",r.RichSelectModule="@ag-grid-enterprise/rich-select",r.GridChartsModule="@ag-grid-enterprise/charts",r.ViewportRowModelModule="@ag-grid-enterprise/viewport-row-model",r.ServerSideRowModelModule="@ag-grid-enterprise/server-side-row-model",r.ExcelExportModule="@ag-grid-enterprise/excel-export",r.ClipboardModule="@ag-grid-enterprise/clipboard",r.SparklinesModule="@ag-grid-enterprise/sparklines",r.AdvancedFilterModule="@ag-grid-enterprise/advanced-filter",r.AngularModule="@ag-grid-community/angular",r.ReactModule="@ag-grid-community/react",r.VueModule="@ag-grid-community/vue",ze;var r})();let yt=(()=>{class r{static register(t){r.__register(t,!0,void 0)}static registerModules(t){r.__registerModules(t,!0,void 0)}static __register(t,i,n){r.runVersionChecks(t),void 0!==n?(r.areGridScopedModules=!0,void 0===r.gridModulesMap[n]&&(r.gridModulesMap[n]={}),r.gridModulesMap[n][t.moduleName]=t):r.globalModulesMap[t.moduleName]=t,r.setModuleBased(i)}static __unRegisterGridModules(t){delete r.gridModulesMap[t]}static __registerModules(t,i,n){r.setModuleBased(i),t&&t.forEach(s=>r.__register(s,i,n))}static isValidModuleVersion(t){const[i,n]=t.version.split(".")||[],[s,o]=r.currentModuleVersion.split(".")||[];return i===s&&n===o}static runVersionChecks(t){if(r.currentModuleVersion||(r.currentModuleVersion=t.version),t.version?r.isValidModuleVersion(t)||console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${t.moduleName}' is version ${t.version} but the other modules are version ${this.currentModuleVersion}. Please update all modules to the same version.`):console.error(`AG Grid: You are using incompatible versions of AG Grid modules. Major and minor versions should always match across modules. '${t.moduleName}' is incompatible. Please update all modules to the same version.`),t.validate){const i=t.validate();i.isValid||console.error(`AG Grid: ${i.message}`)}}static setModuleBased(t){void 0===r.moduleBased?r.moduleBased=t:r.moduleBased!==t&&gh(()=>{console.warn("AG Grid: You are mixing modules (i.e. @ag-grid-community/core) and packages (ag-grid-community) - you can only use one or the other of these mechanisms."),console.warn("Please see https://www.ag-grid.com/javascript-grid/packages-modules/ for more information.")},"ModulePackageCheck")}static __setIsBundled(){r.isBundled=!0}static __assertRegistered(t,i,n){var s;if(this.__isRegistered(t,n))return!0;const o=i+t;let a;if(r.isBundled)a=`AG Grid: unable to use ${i} as 'ag-grid-enterprise' has not been loaded. Check you are using the Enterprise bundle:\n        \n        <script src="https://cdn.jsdelivr.net/npm/ag-grid-enterprise@AG_GRID_VERSION/dist/ag-grid-enterprise.min.js"><\/script>\n        \nFor more info see: https://ag-grid.com/javascript-data-grid/getting-started/#getting-started-with-ag-grid-enterprise`;else if(r.moduleBased||void 0===r.moduleBased){let c=null===(s=Object.entries(ze).find(([u,p])=>p===t))||void 0===s?void 0:s[0];a=`AG Grid: unable to use ${i} as the ${c} is not registered${r.areGridScopedModules?` for gridId: ${n}`:""}. Check if you have registered the module:\n           \n    import { ModuleRegistry } from '@ag-grid-community/core';\n    import { ${c} } from '${t}';\n    \n    ModuleRegistry.registerModules([ ${c} ]);\n\nFor more info see: https://www.ag-grid.com/javascript-grid/modules/`}else a=`AG Grid: unable to use ${i} as package 'ag-grid-enterprise' has not been imported. Check that you have imported the package:\n            \n    import 'ag-grid-enterprise';\n            \nFor more info see: https://www.ag-grid.com/javascript-grid/packages/`;return gh(()=>{console.warn(a)},o),!1}static __warnEnterpriseChartDisabled(t){const o=`AG Grid: the '${t}' chart type is not supported in AG Charts Community. See https://ag-grid.com/javascript-data-grid/integrated-charts/ for more details.`;gh(()=>{console.warn(o)},"ag-charts-enterprise:"+t)}static __isRegistered(t,i){var n;return!!r.globalModulesMap[t]||!(null===(n=r.gridModulesMap[i])||void 0===n||!n[t])}static __getRegisteredModules(t){return[...ff(r.globalModulesMap),...ff(r.gridModulesMap[t]||{})]}static __getGridRegisteredModules(t){var i;return ff(null!==(i=r.gridModulesMap[t])&&void 0!==i?i:{})||[]}static __isPackageBased(){return!r.moduleBased}}return r.globalModulesMap={},r.gridModulesMap={},r.areGridScopedModules=!1,r})();class Nx{constructor(e,t){if(this.beanWrappers={},this.destroyed=!1,!e||!e.beanClasses)return;this.contextParams=e,this.logger=t,this.logger.log(">> creating ag-Application Context"),this.createBeans();const i=this.getBeanInstances();this.wireBeans(i),this.logger.log(">> ag-Application Context ready - component is alive")}getBeanInstances(){return ff(this.beanWrappers).map(e=>e.beanInstance)}createBean(e,t){if(!e)throw Error("Can't wire to bean since it is null");return this.wireBeans([e],t),e}wireBeans(e,t){this.autoWireBeans(e),this.methodWireBeans(e),this.callLifeCycleMethods(e,"preConstructMethods"),Ie(t)&&e.forEach(t),this.callLifeCycleMethods(e,"postConstructMethods")}createBeans(){this.contextParams.beanClasses.forEach(this.createBeanWrapper.bind(this)),gr(this.beanWrappers,(t,i)=>{let n;i.bean.__agBeanMetaData&&i.bean.__agBeanMetaData.autowireMethods&&i.bean.__agBeanMetaData.autowireMethods.agConstructor&&(n=i.bean.__agBeanMetaData.autowireMethods.agConstructor);const s=this.getBeansForParameters(n,i.bean.name),o=new(i.bean.bind.apply(i.bean,[null,...s]));i.beanInstance=o});const e=Object.keys(this.beanWrappers).join(", ");this.logger.log(`created beans: ${e}`)}createBeanWrapper(e){const t=e.__agBeanMetaData;if(!t){let n;return n=e.prototype.constructor?Zm(e.prototype.constructor):""+e,void console.error(`Context item ${n} is not a bean`)}this.beanWrappers[t.beanName]={bean:e,beanInstance:null,beanName:t.beanName}}autoWireBeans(e){e.forEach(t=>{this.forEachMetaDataInHierarchy(t,(i,n)=>{const s=i.agClassAttributes;!s||s.forEach(o=>{const a=this.lookupBeanInstance(n,o.beanName,o.optional);t[o.attributeName]=a})})})}methodWireBeans(e){e.forEach(t=>{this.forEachMetaDataInHierarchy(t,(i,n)=>{gr(i.autowireMethods,(s,o)=>{if("agConstructor"===s)return;const a=this.getBeansForParameters(o,n);t[s].apply(t,a)})})})}forEachMetaDataInHierarchy(e,t){let i=Object.getPrototypeOf(e);for(;null!=i;){const n=i.constructor;n.hasOwnProperty("__agBeanMetaData")&&t(n.__agBeanMetaData,this.getBeanName(n)),i=Object.getPrototypeOf(i)}}getBeanName(e){if(e.__agBeanMetaData&&e.__agBeanMetaData.beanName)return e.__agBeanMetaData.beanName;const t=e.toString();return t.substring(9,t.indexOf("("))}getBeansForParameters(e,t){const i=[];return e&&gr(e,(n,s)=>{const o=this.lookupBeanInstance(t,s);i[Number(n)]=o}),i}lookupBeanInstance(e,t,i=!1){if(this.destroyed)return this.logger.log(`AG Grid: bean reference ${t} is used after the grid is destroyed!`),null;if("context"===t)return this;if(this.contextParams.providedBeanInstances&&this.contextParams.providedBeanInstances.hasOwnProperty(t))return this.contextParams.providedBeanInstances[t];const n=this.beanWrappers[t];return n?n.beanInstance:(i||console.error(`AG Grid: unable to find bean reference ${t} while initialising ${e}`),null)}callLifeCycleMethods(e,t){e.forEach(i=>this.callLifeCycleMethodsOnBean(i,t))}callLifeCycleMethodsOnBean(e,t,i){const n={};this.forEachMetaDataInHierarchy(e,o=>{const a=o[t];a&&a.forEach(c=>{c!=i&&(n[c]=!0)})}),Object.keys(n).forEach(o=>e[o]())}getBean(e){return this.lookupBeanInstance("getBean",e,!0)}destroy(){if(this.destroyed)return;this.destroyed=!0,this.logger.log(">> Shutting down ag-Application Context");const e=this.getBeanInstances();this.destroyBeans(e),this.contextParams.providedBeanInstances=null,yt.__unRegisterGridModules(this.contextParams.gridId),this.logger.log(">> ag-Application Context shut down - component is dead")}destroyBean(e){!e||this.destroyBeans([e])}destroyBeans(e){return e?(e.forEach(t=>{this.callLifeCycleMethodsOnBean(t,"preDestroyMethods","destroy"),"function"==typeof t.destroy&&t.destroy()}),[]):[]}isDestroyed(){return this.destroyed}getGridId(){return this.contextParams.gridId}}function vf(r,e,t){const i=Ra(r.constructor);i.preConstructMethods||(i.preConstructMethods=[]),i.preConstructMethods.push(e)}function Se(r,e,t){const i=Ra(r.constructor);i.postConstructMethods||(i.postConstructMethods=[]),i.postConstructMethods.push(e)}function Js(r,e,t){const i=Ra(r.constructor);i.preDestroyMethods||(i.preDestroyMethods=[]),i.preDestroyMethods.push(e)}function He(r){return e=>{Ra(e).beanName=r}}function P(r){return(e,t,i)=>{Jm(e,r,!1,0,t,null)}}function Pt(r){return(e,t,i)=>{Jm(e,r,!0,0,t,null)}}function Jm(r,e,t,i,n,s){if(null===e)return void console.error("AG Grid: Autowired name should not be null");if("number"==typeof s)return void console.error("AG Grid: Autowired should be on an attribute");const o=Ra(r.constructor);o.agClassAttributes||(o.agClassAttributes=[]),o.agClassAttributes.push({attributeName:n,beanName:e,optional:t})}function Cl(r){return(e,t,i)=>{const n="function"==typeof e?e:e.constructor;let s;if("number"==typeof i){let o;t?(s=Ra(n),o=t):(s=Ra(n),o="agConstructor"),s.autowireMethods||(s.autowireMethods={}),s.autowireMethods[o]||(s.autowireMethods[o]={}),s.autowireMethods[o][i]=r}}}function Ra(r){return r.hasOwnProperty("__agBeanMetaData")||(r.__agBeanMetaData={}),r.__agBeanMetaData}var sS=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},vh=function(r,e){return function(t,i){e(t,i,r)}};let go=class{constructor(){this.allSyncListeners=new Map,this.allAsyncListeners=new Map,this.globalSyncListeners=new Set,this.globalAsyncListeners=new Set,this.asyncFunctionsQueue=[],this.scheduled=!1,this.firedEvents={}}setBeans(e,t,i=null,n=null){if(this.frameworkOverrides=t,this.gridOptionsService=e,i){const s=e.useAsyncEvents();this.addGlobalListener(i,s)}n&&this.addGlobalListener(n,!1)}setFrameworkOverrides(e){this.frameworkOverrides=e}getListeners(e,t,i){const n=t?this.allAsyncListeners:this.allSyncListeners;let s=n.get(e);return!s&&i&&(s=new Set,n.set(e,s)),s}noRegisteredListenersExist(){return 0===this.allSyncListeners.size&&0===this.allAsyncListeners.size&&0===this.globalSyncListeners.size&&0===this.globalAsyncListeners.size}addEventListener(e,t,i=!1){this.getListeners(e,i,!0).add(t)}removeEventListener(e,t,i=!1){const n=this.getListeners(e,i,!1);!n||(n.delete(t),0===n.size&&(i?this.allAsyncListeners:this.allSyncListeners).delete(e))}addGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).add(e)}removeGlobalListener(e,t=!1){(t?this.globalAsyncListeners:this.globalSyncListeners).delete(e)}dispatchEvent(e){let t=e;this.gridOptionsService&&this.gridOptionsService.addGridCommonParams(t),this.dispatchToListeners(t,!0),this.dispatchToListeners(t,!1),this.firedEvents[t.type]=!0}dispatchEventOnce(e){this.firedEvents[e.type]||this.dispatchEvent(e)}dispatchToListeners(e,t){var i;const n=e.type;if(t&&"event"in e){const u=e.event;u instanceof Event&&(e.eventPath=u.composedPath())}const o=null!==(i=this.getListeners(n,t,!1))&&void 0!==i?i:new Set,a=new Set(o);a.size>0&&((u,p)=>{u.forEach(g=>{if(!p.has(g))return;const m=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>g(e)):()=>g(e);t?this.dispatchAsync(m):m()})})(a,o),new Set(t?this.globalAsyncListeners:this.globalSyncListeners).forEach(u=>{const p=this.frameworkOverrides?()=>this.frameworkOverrides.wrapIncoming(()=>u(n,e)):()=>u(n,e);t?this.dispatchAsync(p):p()})}dispatchAsync(e){this.asyncFunctionsQueue.push(e),this.scheduled||(this.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(this.flushAsyncQueue.bind(this),0)}),this.scheduled=!0)}flushAsyncQueue(){this.scheduled=!1;const e=this.asyncFunctionsQueue.slice();this.asyncFunctionsQueue=[],e.forEach(t=>t())}};sS([vh(0,Cl("gridOptionsService")),vh(1,Cl("frameworkOverrides")),vh(2,Cl("globalEventListener")),vh(3,Cl("globalSyncEventListener"))],go.prototype,"setBeans",null),go=sS([He("eventService")],go);class Yw{constructor(e){this.frameworkOverrides=e,this.wrappedListeners=new Map,this.wrappedGlobalListeners=new Map}wrap(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=i=>{this.frameworkOverrides.wrapOutgoing(()=>e(i))},this.wrappedListeners.set(e,t)),t}wrapGlobal(e){let t=e;return this.frameworkOverrides.shouldWrapOutgoing&&(t=(i,n)=>{this.frameworkOverrides.wrapOutgoing(()=>e(i,n))},this.wrappedGlobalListeners.set(e,t)),t}unwrap(e){var t;return null!==(t=this.wrappedListeners.get(e))&&void 0!==t?t:e}unwrapGlobal(e){var t;return null!==(t=this.wrappedGlobalListeners.get(e))&&void 0!==t?t:e}}var Qm=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const bR={resizable:!0,sortable:!0};let ev=0;function Ch(){return ev++}class ot{constructor(e,t,i,n){this.instanceId=Ch(),this.autoHeaderHeight=null,this.moving=!1,this.menuVisible=!1,this.lastLeftPinned=!1,this.firstRightPinned=!1,this.filterActive=!1,this.eventService=new go,this.tooltipEnabled=!1,this.rowGroupActive=!1,this.pivotActive=!1,this.aggregationActive=!1,this.colDef=e,this.userProvidedColDef=t,this.colId=i,this.primary=n,this.setState(e)}getInstanceId(){return this.instanceId}setState(e){void 0!==e.sort?("asc"===e.sort||"desc"===e.sort)&&(this.sort=e.sort):("asc"===e.initialSort||"desc"===e.initialSort)&&(this.sort=e.initialSort);const t=e.sortIndex,i=e.initialSortIndex;void 0!==t?null!==t&&(this.sortIndex=t):null!==i&&(this.sortIndex=i);const n=e.hide;this.visible=void 0!==n?!n:!e.initialHide,this.setPinned(void 0!==e.pinned?e.pinned:e.initialPinned);const o=e.flex,a=e.initialFlex;void 0!==o?this.flex=o:void 0!==a&&(this.flex=a)}setColDef(e,t,i){this.colDef=e,this.userProvidedColDef=t,this.initMinAndMaxWidths(),this.initDotNotation(),this.initTooltip(),this.eventService.dispatchEvent(this.createColumnEvent("colDefChanged",i))}getUserProvidedColDef(){return this.userProvidedColDef}setParent(e){this.parent=e}getParent(){return this.parent}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}initialise(){this.initMinAndMaxWidths(),this.resetActualWidth("gridInitializing"),this.initDotNotation(),this.initTooltip()}initDotNotation(){const e=this.gridOptionsService.get("suppressFieldDotNotation");this.fieldContainsDots=Ie(this.colDef.field)&&this.colDef.field.indexOf(".")>=0&&!e,this.tooltipFieldContainsDots=Ie(this.colDef.tooltipField)&&this.colDef.tooltipField.indexOf(".")>=0&&!e}initMinAndMaxWidths(){const e=this.colDef;this.minWidth=this.columnUtils.calculateColMinWidth(e),this.maxWidth=this.columnUtils.calculateColMaxWidth(e)}initTooltip(){this.tooltipEnabled=Ie(this.colDef.tooltipField)||Ie(this.colDef.tooltipValueGetter)||Ie(this.colDef.tooltipComponent)}resetActualWidth(e){const t=this.columnUtils.calculateColInitialWidth(this.colDef);this.setActualWidth(t,e,!0)}isEmptyGroup(){return!1}isRowGroupDisplayed(e){return!gt(this.colDef)&&!gt(this.colDef.showRowGroup)&&(!0===this.colDef.showRowGroup||this.colDef.showRowGroup===e)}isPrimary(){return this.primary}isFilterAllowed(){return!!this.colDef.filter}isFieldContainsDots(){return this.fieldContainsDots}isTooltipEnabled(){return this.tooltipEnabled}isTooltipFieldContainsDots(){return this.tooltipFieldContainsDots}addEventListener(e,t){var i,n;this.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.frameworkOverrides),this.frameworkEventListenerService=new Yw(this.frameworkOverrides));const s=null!==(n=null===(i=this.frameworkEventListenerService)||void 0===i?void 0:i.wrap(t))&&void 0!==n?n:t;this.eventService.addEventListener(e,s)}removeEventListener(e,t){var i,n;const s=null!==(n=null===(i=this.frameworkEventListenerService)||void 0===i?void 0:i.unwrap(t))&&void 0!==n?n:t;this.eventService.removeEventListener(e,s)}createColumnFunctionCallbackParams(e){return this.gridOptionsService.addGridCommonParams({node:e,data:e.data,column:this,colDef:this.colDef})}isSuppressNavigable(e){if("boolean"==typeof this.colDef.suppressNavigable)return this.colDef.suppressNavigable;if("function"==typeof this.colDef.suppressNavigable){const t=this.createColumnFunctionCallbackParams(e);return(0,this.colDef.suppressNavigable)(t)}return!1}isCellEditable(e){return!(e.group&&!this.gridOptionsService.get("enableGroupEdit"))&&this.isColumnFunc(e,this.colDef.editable)}isSuppressFillHandle(){return!!this.colDef.suppressFillHandle}isAutoHeight(){return!!this.colDef.autoHeight}isAutoHeaderHeight(){return!!this.colDef.autoHeaderHeight}isRowDrag(e){return this.isColumnFunc(e,this.colDef.rowDrag)}isDndSource(e){return this.isColumnFunc(e,this.colDef.dndSource)}isCellCheckboxSelection(e){return this.isColumnFunc(e,this.colDef.checkboxSelection)}isSuppressPaste(e){return this.isColumnFunc(e,this.colDef?this.colDef.suppressPaste:null)}isResizable(){return!!this.getColDefValue("resizable")}getColDefValue(e){var t;return null!==(t=this.colDef[e])&&void 0!==t?t:bR[e]}isColumnFunc(e,t){return"boolean"==typeof t?t:"function"==typeof t&&t(this.createColumnFunctionCallbackParams(e))}setMoving(e,t){this.moving=e,this.eventService.dispatchEvent(this.createColumnEvent("movingChanged",t))}createColumnEvent(e,t){return this.gridOptionsService.addGridCommonParams({type:e,column:this,columns:[this],source:t})}isMoving(){return this.moving}getSort(){return this.sort}setSort(e,t){this.sort!==e&&(this.sort=e,this.eventService.dispatchEvent(this.createColumnEvent("sortChanged",t))),this.dispatchStateUpdatedEvent("sort")}setMenuVisible(e,t){this.menuVisible!==e&&(this.menuVisible=e,this.eventService.dispatchEvent(this.createColumnEvent("menuVisibleChanged",t)))}isMenuVisible(){return this.menuVisible}isSortable(){return!!this.getColDefValue("sortable")}isSortAscending(){return"asc"===this.sort}isSortDescending(){return"desc"===this.sort}isSortNone(){return gt(this.sort)}isSorting(){return Ie(this.sort)}getSortIndex(){return this.sortIndex}setSortIndex(e){this.sortIndex=e,this.dispatchStateUpdatedEvent("sortIndex")}setAggFunc(e){this.aggFunc=e,this.dispatchStateUpdatedEvent("aggFunc")}getAggFunc(){return this.aggFunc}getLeft(){return this.left}getOldLeft(){return this.oldLeft}getRight(){return this.left+this.actualWidth}setLeft(e,t){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.eventService.dispatchEvent(this.createColumnEvent("leftChanged",t)))}isFilterActive(){return this.filterActive}setFilterActive(e,t,i){this.filterActive!==e&&(this.filterActive=e,this.eventService.dispatchEvent(this.createColumnEvent("filterActiveChanged",t)));const n=this.createColumnEvent("filterChanged",t);i&&Lo(n,i),this.eventService.dispatchEvent(n)}isHovered(){return this.columnHoverService.isHovered(this)}setPinned(e){this.pinned=!0===e||"left"===e?"left":"right"===e?"right":null,this.dispatchStateUpdatedEvent("pinned")}setFirstRightPinned(e,t){this.firstRightPinned!==e&&(this.firstRightPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("firstRightPinnedChanged",t)))}setLastLeftPinned(e,t){this.lastLeftPinned!==e&&(this.lastLeftPinned=e,this.eventService.dispatchEvent(this.createColumnEvent("lastLeftPinnedChanged",t)))}isFirstRightPinned(){return this.firstRightPinned}isLastLeftPinned(){return this.lastLeftPinned}isPinned(){return"left"===this.pinned||"right"===this.pinned}isPinnedLeft(){return"left"===this.pinned}isPinnedRight(){return"right"===this.pinned}getPinned(){return this.pinned}setVisible(e,t){const i=!0===e;this.visible!==i&&(this.visible=i,this.eventService.dispatchEvent(this.createColumnEvent("visibleChanged",t))),this.dispatchStateUpdatedEvent("hide")}isVisible(){return this.visible}isSpanHeaderHeight(){const e=this.getColDef();return!e.suppressSpanHeaderHeight&&!e.autoHeaderHeight}getColumnGroupPaddingInfo(){let e=this.getParent();if(!e||!e.isPadding())return{numberOfParents:0,isSpanningTotal:!1};const t=e.getPaddingLevel()+1;let i=!0;for(;e;){if(!e.isPadding()){i=!1;break}e=e.getParent()}return{numberOfParents:t,isSpanningTotal:i}}getColDef(){return this.colDef}getColumnGroupShow(){return this.colDef.columnGroupShow}getColId(){return this.colId}getId(){return this.colId}getUniqueId(){return this.colId}getDefinition(){return this.colDef}getActualWidth(){return this.actualWidth}getAutoHeaderHeight(){return this.autoHeaderHeight}setAutoHeaderHeight(e){const t=e!==this.autoHeaderHeight;return this.autoHeaderHeight=e,t}createBaseColDefParams(e){return this.gridOptionsService.addGridCommonParams({node:e,data:e.data,colDef:this.colDef,column:this})}getColSpan(e){if(gt(this.colDef.colSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.colSpan(t);return Math.max(i,1)}getRowSpan(e){if(gt(this.colDef.rowSpan))return 1;const t=this.createBaseColDefParams(e),i=this.colDef.rowSpan(t);return Math.max(i,1)}setActualWidth(e,t,i=!1){null!=this.minWidth&&(e=Math.max(e,this.minWidth)),null!=this.maxWidth&&(e=Math.min(e,this.maxWidth)),this.actualWidth!==e&&(this.actualWidth=e,this.flex&&"flex"!==t&&"gridInitializing"!==t&&(this.flex=null),i||this.fireColumnWidthChangedEvent(t)),this.dispatchStateUpdatedEvent("width")}fireColumnWidthChangedEvent(e){this.eventService.dispatchEvent(this.createColumnEvent("widthChanged",e))}isGreaterThanMax(e){return null!=this.maxWidth&&e>this.maxWidth}getMinWidth(){return this.minWidth}getMaxWidth(){return this.maxWidth}getFlex(){return this.flex||0}setFlex(e){this.flex!==e&&(this.flex=e),this.dispatchStateUpdatedEvent("flex")}setMinimum(e){Ie(this.minWidth)&&this.setActualWidth(this.minWidth,e)}setRowGroupActive(e,t){this.rowGroupActive!==e&&(this.rowGroupActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnRowGroupChanged",t))),this.dispatchStateUpdatedEvent("rowGroup")}isRowGroupActive(){return this.rowGroupActive}setPivotActive(e,t){this.pivotActive!==e&&(this.pivotActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnPivotChanged",t))),this.dispatchStateUpdatedEvent("pivot")}isPivotActive(){return this.pivotActive}isAnyFunctionActive(){return this.isPivotActive()||this.isRowGroupActive()||this.isValueActive()}isAnyFunctionAllowed(){return this.isAllowPivot()||this.isAllowRowGroup()||this.isAllowValue()}setValueActive(e,t){this.aggregationActive!==e&&(this.aggregationActive=e,this.eventService.dispatchEvent(this.createColumnEvent("columnValueChanged",t)))}isValueActive(){return this.aggregationActive}isAllowPivot(){return!0===this.colDef.enablePivot}isAllowValue(){return!0===this.colDef.enableValue}isAllowRowGroup(){return!0===this.colDef.enableRowGroup}getMenuTabs(e){st("As of v31.1, 'getMenuTabs' is deprecated. Use 'getColDef().menuTabs ?? defaultValues' instead.");let t=this.getColDef().menuTabs;return null==t&&(t=e),t}dispatchStateUpdatedEvent(e){this.eventService.dispatchEvent({type:ot.EVENT_STATE_UPDATED,key:e})}}ot.EVENT_MOVING_CHANGED="movingChanged",ot.EVENT_LEFT_CHANGED="leftChanged",ot.EVENT_WIDTH_CHANGED="widthChanged",ot.EVENT_LAST_LEFT_PINNED_CHANGED="lastLeftPinnedChanged",ot.EVENT_FIRST_RIGHT_PINNED_CHANGED="firstRightPinnedChanged",ot.EVENT_VISIBLE_CHANGED="visibleChanged",ot.EVENT_FILTER_CHANGED="filterChanged",ot.EVENT_FILTER_ACTIVE_CHANGED="filterActiveChanged",ot.EVENT_SORT_CHANGED="sortChanged",ot.EVENT_COL_DEF_CHANGED="colDefChanged",ot.EVENT_MENU_VISIBLE_CHANGED="menuVisibleChanged",ot.EVENT_ROW_GROUP_CHANGED="columnRowGroupChanged",ot.EVENT_PIVOT_CHANGED="columnPivotChanged",ot.EVENT_VALUE_CHANGED="columnValueChanged",ot.EVENT_STATE_UPDATED="columnStateUpdated",Qm([P("gridOptionsService")],ot.prototype,"gridOptionsService",void 0),Qm([P("columnUtils")],ot.prototype,"columnUtils",void 0),Qm([P("columnHoverService")],ot.prototype,"columnHoverService",void 0),Qm([P("frameworkOverrides")],ot.prototype,"frameworkOverrides",void 0),Qm([Se],ot.prototype,"initialise",null);class Wt{constructor(e,t,i,n){this.localEventService=new go,this.expandable=!1,this.instanceId=Ch(),this.expandableListenerRemoveCallback=null,this.colGroupDef=e,this.groupId=t,this.expanded=!!e&&!!e.openByDefault,this.padding=i,this.level=n}destroy(){this.expandableListenerRemoveCallback&&this.reset(null,void 0)}reset(e,t){this.colGroupDef=e,this.level=t,this.originalParent=null,this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback(),this.children=void 0,this.expandable=void 0}getInstanceId(){return this.instanceId}setOriginalParent(e){this.originalParent=e}getOriginalParent(){return this.originalParent}getLevel(){return this.level}isVisible(){return!!this.children&&this.children.some(e=>e.isVisible())}isPadding(){return this.padding}setExpanded(e){this.expanded=void 0!==e&&e,this.localEventService.dispatchEvent({type:Wt.EVENT_EXPANDED_CHANGED})}isExpandable(){return this.expandable}isExpanded(){return this.expanded}getGroupId(){return this.groupId}getId(){return this.getGroupId()}setChildren(e){this.children=e}getChildren(){return this.children}getColGroupDef(){return this.colGroupDef}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}addLeafColumns(e){!this.children||this.children.forEach(t=>{t instanceof ot?e.push(t):t instanceof Wt&&t.addLeafColumns(e)})}getColumnGroupShow(){const e=this.colGroupDef;if(e)return e.columnGroupShow}setupExpandable(){this.setExpandable(),this.expandableListenerRemoveCallback&&this.expandableListenerRemoveCallback();const e=this.onColumnVisibilityChanged.bind(this);this.getLeafColumns().forEach(t=>t.addEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=()=>{this.getLeafColumns().forEach(t=>t.removeEventListener("visibleChanged",e)),this.expandableListenerRemoveCallback=null}}setExpandable(){if(this.isPadding())return;let e=!1,t=!1,i=!1;const n=this.findChildrenRemovingPadding();for(let o=0,a=n.length;o<a;o++){const c=n[o];if(!c.isVisible())continue;const u=c.getColumnGroupShow();"open"===u?(e=!0,i=!0):"closed"===u?(t=!0,i=!0):(e=!0,t=!0)}const s=e&&t&&i;this.expandable!==s&&(this.expandable=s,this.localEventService.dispatchEvent({type:Wt.EVENT_EXPANDABLE_CHANGED}))}findChildrenRemovingPadding(){const e=[],t=i=>{i.forEach(n=>{n instanceof Wt&&n.isPadding()?t(n.children):e.push(n)})};return t(this.children),e}onColumnVisibilityChanged(){this.setExpandable()}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}}Wt.EVENT_EXPANDED_CHANGED="expandedChanged",Wt.EVENT_EXPANDABLE_CHANGED="expandableChanged",function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Js],Wt.prototype,"destroy",null);const Lx={numericColumn:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"},rightAligned:{headerClass:"ag-right-aligned-header",cellClass:"ag-right-aligned-cell"}};function qw(r){return null!=r&&r.length>0}function Xt(r){if(r&&r.length)return r[r.length-1]}function yc(r,e,t){return null==r&&null==e||null!=r&&null!=e&&r.length===e.length&&r.every((i,n)=>t?t(i,e[n]):e[n]===i)}function kx(r,e){return yc(r,e)}function _R(r){return r.sort((e,t)=>e-t)}function Xw(r,e){if(r)for(let t=r.length-2;t>=0;t--){const n=r[t+1]===e;r[t]===e&&n&&r.splice(t+1,1)}}function Cf(r,e){const t=r.indexOf(e);t>=0&&(r[t]=r[r.length-1],r.pop())}function vr(r,e){const t=r.indexOf(e);t>=0&&r.splice(t,1)}function tv(r,e){for(let t=0;t<e.length;t++)Cf(r,e[t])}function wR(r,e){for(let t=0;t<e.length;t++)vr(r,e[t])}function yf(r,e,t){r.splice(t,0,e)}function iv(r,e,t){if(null!=r&&null!=e)for(let i=e.length-1;i>=0;i--)yf(r,e[i],t)}function Sf(r,e,t){wR(r,e),e.slice().reverse().forEach(i=>yf(r,i,t))}function Go(r,e){return r.indexOf(e)>-1}function ER(r){return[].concat.apply([],r)}function Zw(r,e){null==e||null==r||e.forEach(t=>r.push(t))}function bf(r){return r.map(eS)}function nv(r,e){if(null!=r)for(let t=r.length-1;t>=0;t--)e(r[t],t)}const DR="__ag_Grid_Stop_Propagation",s1=["touchstart","touchend","touchmove","touchcancel","scroll"],rS={};function Aa(r){r[DR]=!0}function yl(r){return!0===r[DR]}const Jw=(()=>{const r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return t=>{if("boolean"==typeof rS[t])return rS[t];const i=document.createElement(r[t]||"div");return rS[t="on"+t]=t in i}})();function oS(r,e,t){let i=e;for(;i;){const n=r.getDomData(i,t);if(n)return n;i=i.parentElement}return null}function aS(r,e){return!(!e||!r)&&Qw(e).indexOf(r)>=0}function sv(r){const e=[];let t=r.target;for(;t;)e.push(t),t=t.parentElement;return e}function Qw(r){const e=r;return e.path?e.path:e.composedPath?e.composedPath():sv(e)}function TR(r,e,t,i){const s=Go(s1,t)?{passive:!0}:void 0;r&&r.addEventListener&&r.addEventListener(e,t,i,s)}var Md=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Ee{constructor(){this.destroyFunctions=[],this.destroyed=!1,this.__v_skip=!0,this.lastChangeSetIdLookup={},this.propertyListenerId=0,this.isAlive=()=>!this.destroyed}getFrameworkOverrides(){return this.frameworkOverrides}getContext(){return this.context}destroy(){this.destroyFunctions.forEach(e=>e()),this.destroyFunctions.length=0,this.destroyed=!0,this.dispatchEvent({type:Ee.EVENT_DESTROYED})}addEventListener(e,t){this.localEventService||(this.localEventService=new go),this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService&&this.localEventService.removeEventListener(e,t)}dispatchEvent(e){this.localEventService&&this.localEventService.dispatchEvent(e)}addManagedListener(e,t,i){if(this.destroyed)return;e instanceof HTMLElement?TR(this.getFrameworkOverrides(),e,t,i):e.addEventListener(t,i);const n=()=>(e.removeEventListener(t,i),this.destroyFunctions=this.destroyFunctions.filter(s=>s!==n),null);return this.destroyFunctions.push(n),n}setupGridOptionListener(e,t){this.gridOptionsService.addEventListener(e,t);const i=()=>(this.gridOptionsService.removeEventListener(e,t),this.destroyFunctions=this.destroyFunctions.filter(n=>n!==i),null);return this.destroyFunctions.push(i),i}addManagedPropertyListener(e,t){return this.destroyed?()=>null:this.setupGridOptionListener(e,t)}addManagedPropertyListeners(e,t){if(this.destroyed)return;const i=e.join("-")+this.propertyListenerId++,n=s=>{if(s.changeSet){if(s.changeSet&&s.changeSet.id===this.lastChangeSetIdLookup[i])return;this.lastChangeSetIdLookup[i]=s.changeSet.id}t({type:"gridPropertyChanged",changeSet:s.changeSet,source:s.source})};e.forEach(s=>this.setupGridOptionListener(s,n))}addDestroyFunc(e){this.isAlive()?this.destroyFunctions.push(e):e()}createManagedBean(e,t){const i=this.createBean(e,t);return this.addDestroyFunc(this.destroyBean.bind(this,e,t)),i}createBean(e,t,i){return(t||this.getContext()).createBean(e,i)}destroyBean(e,t){return(t||this.getContext()).destroyBean(e)}destroyBeans(e,t){return e&&e.forEach(i=>this.destroyBean(i,t)),[]}}Ee.EVENT_DESTROYED="destroyed",Md([P("frameworkOverrides")],Ee.prototype,"frameworkOverrides",void 0),Md([P("context")],Ee.prototype,"context",void 0),Md([P("eventService")],Ee.prototype,"eventService",void 0),Md([P("gridOptionsService")],Ee.prototype,"gridOptionsService",void 0),Md([P("localeService")],Ee.prototype,"localeService",void 0),Md([P("environment")],Ee.prototype,"environment",void 0),Md([Js],Ee.prototype,"destroy",null);var rv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let _f=class extends Ee{setBeans(e){this.logger=e.create("ColumnFactory")}createColumnTree(e,t,i,n){const s=new n1,{existingCols:o,existingGroups:a,existingColKeys:c}=this.extractExistingTreeData(i);s.addExistingKeys(c);const u=this.recursivelyCreateColumns(e,0,t,o,s,a,n),p=this.findMaxDept(u,0);this.logger.log("Number of levels for grouped columns is "+p);const g=this.balanceColumnTree(u,0,p,s);return this.columnUtils.depthFirstOriginalTreeSearch(null,g,(y,b)=>{y instanceof Wt&&y.setupExpandable(),y.setOriginalParent(b)}),{columnTree:g,treeDept:p}}extractExistingTreeData(e){const t=[],i=[],n=[];return e&&this.columnUtils.depthFirstOriginalTreeSearch(null,e,s=>{if(s instanceof Wt)i.push(s);else{const o=s;n.push(o.getId()),t.push(o)}}),{existingCols:t,existingGroups:i,existingColKeys:n}}createForAutoGroups(e,t){return e.map(i=>this.createAutoGroupTreeItem(t,i))}createAutoGroupTreeItem(e,t){const i=this.findDepth(e);let n=t;for(let s=i-1;s>=0;s--){const o=new Wt(null,`FAKE_PATH_${t.getId()}}_${s}`,!0,s);this.createBean(o),o.setChildren([n]),n.setOriginalParent(o),n=o}return 0===i&&t.setOriginalParent(null),n}findDepth(e){let t=0,i=e;for(;i&&i[0]&&i[0]instanceof Wt;)t++,i=i[0].getChildren();return t}balanceColumnTree(e,t,i,n){const s=[];for(let o=0;o<e.length;o++){const a=e[o];if(a instanceof Wt){const c=a,u=this.balanceColumnTree(c.getChildren(),t+1,i,n);c.setChildren(u),s.push(c)}else{let c,u;for(let p=i-1;p>=t;p--){const g=n.getUniqueKey(null,null),m=this.createMergedColGroupDef(null),y=new Wt(m,g,!0,t);this.createBean(y),u&&u.setChildren([y]),u=y,c||(c=u)}if(c&&u){if(s.push(c),e.some(g=>g instanceof Wt)){u.setChildren([a]);continue}u.setChildren(e);break}s.push(a)}}return s}findMaxDept(e,t){let i=t;for(let n=0;n<e.length;n++){const s=e[n];if(s instanceof Wt){const a=this.findMaxDept(s.getChildren(),t+1);i<a&&(i=a)}}return i}recursivelyCreateColumns(e,t,i,n,s,o,a){if(!e)return[];const c=new Array(e.length);for(let u=0;u<c.length;u++){const p=e[u];c[u]=this.isColumnGroup(p)?this.createColumnGroup(i,p,t,n,s,o,a):this.createColumn(i,p,n,s,a)}return c}createColumnGroup(e,t,i,n,s,o,a){const c=this.createMergedColGroupDef(t),u=s.getUniqueKey(c.groupId||null,null),p=new Wt(c,u,!1,i);this.createBean(p);const g=this.findExistingGroup(t,o);g&&o.splice(g.idx,1);let m=g?.group;m&&p.setExpanded(m.isExpanded());const y=this.recursivelyCreateColumns(c.children,i+1,e,n,s,o,a);return p.setChildren(y),p}createMergedColGroupDef(e){const t={};return Object.assign(t,this.gridOptionsService.get("defaultColGroupDef")),Object.assign(t,e),t}createColumn(e,t,i,n,s){const o=this.findExistingColumn(t,i);o&&i?.splice(o.idx,1);let a=o?.column;if(a){const c=this.addColumnDefaultAndTypes(t,a.getColId());a.setColDef(c,t,s),this.applyColumnState(a,c,s)}else{const c=n.getUniqueKey(t.colId,t.field),u=this.addColumnDefaultAndTypes(t,c);a=new ot(u,t,c,e),this.context.createBean(a)}return this.dataTypeService.addColumnListeners(a),a}applyColumnState(e,t,i){const n=Rd(t.flex);if(void 0!==n&&e.setFlex(n),e.getFlex()<=0){const c=Rd(t.width);if(null!=c)e.setActualWidth(c,i);else{const u=e.getActualWidth();e.setActualWidth(u,i)}}void 0!==t.sort&&e.setSort("asc"==t.sort||"desc"==t.sort?t.sort:void 0,i);const o=Rd(t.sortIndex);void 0!==o&&e.setSortIndex(o);const a=Mi(t.hide);void 0!==a&&e.setVisible(!a,i),void 0!==t.pinned&&e.setPinned(t.pinned)}findExistingColumn(e,t){if(t)for(let i=0;i<t.length;i++){const n=t[i].getUserProvidedColDef();if(n)if(null==e.colId){if(null==e.field){if(n===e)return{idx:i,column:t[i]}}else if(n.field===e.field)return{idx:i,column:t[i]}}else if(t[i].getId()===e.colId)return{idx:i,column:t[i]}}}findExistingGroup(e,t){if(null!=e.groupId)for(let n=0;n<t.length;n++){const s=t[n];if(s.getColGroupDef()&&s.getId()===e.groupId)return{idx:n,group:s}}}addColumnDefaultAndTypes(e,t){const i={};Lo(i,this.gridOptionsService.get("defaultColDef"),!1,!0);const s=this.dataTypeService.updateColDefAndGetColumnType(i,e,t);s&&this.assignColumnTypes(s,i),Lo(i,e,!1,!0);const o=this.gridOptionsService.get("autoGroupColumnDef"),a=this.gridOptionsService.isColumnsSortingCoupledToGroup();return e.rowGroup&&o&&a&&Lo(i,{sort:o.sort,initialSort:o.initialSort},!1,!0),this.dataTypeService.validateColDef(i),i}assignColumnTypes(e,t){if(!e.length)return;const i=Object.assign({},Lx);gr(this.gridOptionsService.get("columnTypes")||{},(s,o)=>{s in i?console.warn(`AG Grid: the column type '${s}' is a default column type and cannot be overridden.`):(o.type&&st("Column type definitions 'columnTypes' with a 'type' attribute are not supported because a column type cannot refer to another column type. Only column definitions 'columnDefs' can use the 'type' attribute to refer to a column type."),i[s]=o)}),e.forEach(s=>{const o=i[s.trim()];o?Lo(t,o,!1,!0):console.warn("AG Grid: colDef.type '"+s+"' does not correspond to defined gridOptions.columnTypes")})}isColumnGroup(e){return void 0!==e.children}};var e;rv([P("columnUtils")],_f.prototype,"columnUtils",void 0),rv([P("dataTypeService")],_f.prototype,"dataTypeService",void 0),rv([(0,e=Cl("loggerFactory"),function(t,i){e(t,i,0)})],_f.prototype,"setBeans",null),_f=rv([He("columnFactory")],_f);class di{constructor(e,t,i,n){this.displayedChildren=[],this.localEventService=new go,this.groupId=t,this.partId=i,this.providedColumnGroup=e,this.pinned=n}static createUniqueId(e,t){return e+"_"+t}reset(){this.parent=null,this.children=null,this.displayedChildren=null}getParent(){return this.parent}setParent(e){this.parent=e}getUniqueId(){return di.createUniqueId(this.groupId,this.partId)}isEmptyGroup(){return 0===this.displayedChildren.length}isMoving(){const e=this.getProvidedColumnGroup().getLeafColumns();return!(!e||0===e.length)&&e.every(t=>t.isMoving())}checkLeft(){if(this.displayedChildren.forEach(e=>{e instanceof di&&e.checkLeft()}),this.displayedChildren.length>0)if(this.gridOptionsService.get("enableRtl")){const t=Xt(this.displayedChildren).getLeft();this.setLeft(t)}else{const e=this.displayedChildren[0].getLeft();this.setLeft(e)}else this.setLeft(null)}getLeft(){return this.left}getOldLeft(){return this.oldLeft}setLeft(e){this.oldLeft=this.left,this.left!==e&&(this.left=e,this.localEventService.dispatchEvent(this.createAgEvent(di.EVENT_LEFT_CHANGED)))}getPinned(){return this.pinned}createAgEvent(e){return{type:e}}addEventListener(e,t){this.localEventService.addEventListener(e,t)}removeEventListener(e,t){this.localEventService.removeEventListener(e,t)}getGroupId(){return this.groupId}getPartId(){return this.partId}isChildInThisGroupDeepSearch(e){let t=!1;return this.children.forEach(i=>{e===i&&(t=!0),i instanceof di&&i.isChildInThisGroupDeepSearch(e)&&(t=!0)}),t}getActualWidth(){let e=0;return this.displayedChildren&&this.displayedChildren.forEach(t=>{e+=t.getActualWidth()}),e}isResizable(){if(!this.displayedChildren)return!1;let e=!1;return this.displayedChildren.forEach(t=>{t.isResizable()&&(e=!0)}),e}getMinWidth(){let e=0;return this.displayedChildren.forEach(t=>{e+=t.getMinWidth()||0}),e}addChild(e){this.children||(this.children=[]),this.children.push(e)}getDisplayedChildren(){return this.displayedChildren}getLeafColumns(){const e=[];return this.addLeafColumns(e),e}getDisplayedLeafColumns(){const e=[];return this.addDisplayedLeafColumns(e),e}getDefinition(){return this.providedColumnGroup.getColGroupDef()}getColGroupDef(){return this.providedColumnGroup.getColGroupDef()}isPadding(){return this.providedColumnGroup.isPadding()}isExpandable(){return this.providedColumnGroup.isExpandable()}isExpanded(){return this.providedColumnGroup.isExpanded()}setExpanded(e){this.providedColumnGroup.setExpanded(e)}addDisplayedLeafColumns(e){this.displayedChildren.forEach(t=>{t instanceof ot?e.push(t):t instanceof di&&t.addDisplayedLeafColumns(e)})}addLeafColumns(e){this.children.forEach(t=>{t instanceof ot?e.push(t):t instanceof di&&t.addLeafColumns(e)})}getChildren(){return this.children}getColumnGroupShow(){return this.providedColumnGroup.getColumnGroupShow()}getProvidedColumnGroup(){return this.providedColumnGroup}getPaddingLevel(){const e=this.getParent();return this.isPadding()&&e&&e.isPadding()?1+e.getPaddingLevel():0}calculateDisplayedColumns(){this.displayedChildren=[];let e=this;for(;null!=e&&e.isPadding();)e=e.getParent();if(!e||!e.providedColumnGroup.isExpandable())return this.displayedChildren=this.children,void this.localEventService.dispatchEvent(this.createAgEvent(di.EVENT_DISPLAYED_CHILDREN_CHANGED));this.children.forEach(i=>{if(!(i instanceof di)||i.displayedChildren&&i.displayedChildren.length)switch(i.getColumnGroupShow()){case"open":e.providedColumnGroup.isExpanded()&&this.displayedChildren.push(i);break;case"closed":e.providedColumnGroup.isExpanded()||this.displayedChildren.push(i);break;default:this.displayedChildren.push(i)}}),this.localEventService.dispatchEvent(this.createAgEvent(di.EVENT_DISPLAYED_CHILDREN_CHANGED))}}di.EVENT_LEFT_CHANGED="leftChanged",di.EVENT_DISPLAYED_CHILDREN_CHANGED="displayedChildrenChanged",function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([P("gridOptionsService")],di.prototype,"gridOptionsService",void 0);let G=(()=>{class r{}return r.EVENT_COLUMN_EVERYTHING_CHANGED="columnEverythingChanged",r.EVENT_NEW_COLUMNS_LOADED="newColumnsLoaded",r.EVENT_COLUMN_PIVOT_MODE_CHANGED="columnPivotModeChanged",r.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",r.EVENT_EXPAND_COLLAPSE_ALL="expandOrCollapseAll",r.EVENT_COLUMN_PIVOT_CHANGED="columnPivotChanged",r.EVENT_GRID_COLUMNS_CHANGED="gridColumnsChanged",r.EVENT_COLUMN_VALUE_CHANGED="columnValueChanged",r.EVENT_COLUMN_MOVED="columnMoved",r.EVENT_COLUMN_VISIBLE="columnVisible",r.EVENT_COLUMN_PINNED="columnPinned",r.EVENT_COLUMN_GROUP_OPENED="columnGroupOpened",r.EVENT_COLUMN_RESIZED="columnResized",r.EVENT_DISPLAYED_COLUMNS_CHANGED="displayedColumnsChanged",r.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED="suppressMovableColumns",r.EVENT_SUPPRESS_MENU_HIDE_CHANGED="suppressMenuHide",r.EVENT_SUPPRESS_FIELD_DOT_NOTATION="suppressFieldDotNotation",r.EVENT_VIRTUAL_COLUMNS_CHANGED="virtualColumnsChanged",r.EVENT_COLUMN_HEADER_MOUSE_OVER="columnHeaderMouseOver",r.EVENT_COLUMN_HEADER_MOUSE_LEAVE="columnHeaderMouseLeave",r.EVENT_COLUMN_HEADER_CLICKED="columnHeaderClicked",r.EVENT_COLUMN_HEADER_CONTEXT_MENU="columnHeaderContextMenu",r.EVENT_ASYNC_TRANSACTIONS_FLUSHED="asyncTransactionsFlushed",r.EVENT_ROW_GROUP_OPENED="rowGroupOpened",r.EVENT_ROW_DATA_UPDATED="rowDataUpdated",r.EVENT_PINNED_ROW_DATA_CHANGED="pinnedRowDataChanged",r.EVENT_RANGE_SELECTION_CHANGED="rangeSelectionChanged",r.EVENT_CHART_CREATED="chartCreated",r.EVENT_CHART_RANGE_SELECTION_CHANGED="chartRangeSelectionChanged",r.EVENT_CHART_OPTIONS_CHANGED="chartOptionsChanged",r.EVENT_CHART_DESTROYED="chartDestroyed",r.EVENT_TOOL_PANEL_VISIBLE_CHANGED="toolPanelVisibleChanged",r.EVENT_TOOL_PANEL_SIZE_CHANGED="toolPanelSizeChanged",r.EVENT_COLUMN_PANEL_ITEM_DRAG_START="columnPanelItemDragStart",r.EVENT_COLUMN_PANEL_ITEM_DRAG_END="columnPanelItemDragEnd",r.EVENT_MODEL_UPDATED="modelUpdated",r.EVENT_CUT_START="cutStart",r.EVENT_CUT_END="cutEnd",r.EVENT_PASTE_START="pasteStart",r.EVENT_PASTE_END="pasteEnd",r.EVENT_FILL_START="fillStart",r.EVENT_FILL_END="fillEnd",r.EVENT_RANGE_DELETE_START="rangeDeleteStart",r.EVENT_RANGE_DELETE_END="rangeDeleteEnd",r.EVENT_UNDO_STARTED="undoStarted",r.EVENT_UNDO_ENDED="undoEnded",r.EVENT_REDO_STARTED="redoStarted",r.EVENT_REDO_ENDED="redoEnded",r.EVENT_KEY_SHORTCUT_CHANGED_CELL_START="keyShortcutChangedCellStart",r.EVENT_KEY_SHORTCUT_CHANGED_CELL_END="keyShortcutChangedCellEnd",r.EVENT_CELL_CLICKED="cellClicked",r.EVENT_CELL_DOUBLE_CLICKED="cellDoubleClicked",r.EVENT_CELL_MOUSE_DOWN="cellMouseDown",r.EVENT_CELL_CONTEXT_MENU="cellContextMenu",r.EVENT_CELL_VALUE_CHANGED="cellValueChanged",r.EVENT_CELL_EDIT_REQUEST="cellEditRequest",r.EVENT_ROW_VALUE_CHANGED="rowValueChanged",r.EVENT_CELL_FOCUSED="cellFocused",r.EVENT_CELL_FOCUS_CLEARED="cellFocusCleared",r.EVENT_FULL_WIDTH_ROW_FOCUSED="fullWidthRowFocused",r.EVENT_ROW_SELECTED="rowSelected",r.EVENT_SELECTION_CHANGED="selectionChanged",r.EVENT_TOOLTIP_SHOW="tooltipShow",r.EVENT_TOOLTIP_HIDE="tooltipHide",r.EVENT_CELL_KEY_DOWN="cellKeyDown",r.EVENT_CELL_MOUSE_OVER="cellMouseOver",r.EVENT_CELL_MOUSE_OUT="cellMouseOut",r.EVENT_FILTER_CHANGED="filterChanged",r.EVENT_FILTER_MODIFIED="filterModified",r.EVENT_FILTER_OPENED="filterOpened",r.EVENT_ADVANCED_FILTER_BUILDER_VISIBLE_CHANGED="advancedFilterBuilderVisibleChanged",r.EVENT_SORT_CHANGED="sortChanged",r.EVENT_VIRTUAL_ROW_REMOVED="virtualRowRemoved",r.EVENT_ROW_CLICKED="rowClicked",r.EVENT_ROW_DOUBLE_CLICKED="rowDoubleClicked",r.EVENT_GRID_READY="gridReady",r.EVENT_GRID_PRE_DESTROYED="gridPreDestroyed",r.EVENT_GRID_SIZE_CHANGED="gridSizeChanged",r.EVENT_VIEWPORT_CHANGED="viewportChanged",r.EVENT_SCROLLBAR_WIDTH_CHANGED="scrollbarWidthChanged",r.EVENT_FIRST_DATA_RENDERED="firstDataRendered",r.EVENT_DRAG_STARTED="dragStarted",r.EVENT_DRAG_STOPPED="dragStopped",r.EVENT_CHECKBOX_CHANGED="checkboxChanged",r.EVENT_ROW_EDITING_STARTED="rowEditingStarted",r.EVENT_ROW_EDITING_STOPPED="rowEditingStopped",r.EVENT_CELL_EDITING_STARTED="cellEditingStarted",r.EVENT_CELL_EDITING_STOPPED="cellEditingStopped",r.EVENT_BODY_SCROLL="bodyScroll",r.EVENT_BODY_SCROLL_END="bodyScrollEnd",r.EVENT_HEIGHT_SCALE_CHANGED="heightScaleChanged",r.EVENT_PAGINATION_CHANGED="paginationChanged",r.EVENT_COMPONENT_STATE_CHANGED="componentStateChanged",r.EVENT_STORE_REFRESHED="storeRefreshed",r.EVENT_STATE_UPDATED="stateUpdated",r.EVENT_COLUMN_MENU_VISIBLE_CHANGED="columnMenuVisibleChanged",r.EVENT_BODY_HEIGHT_CHANGED="bodyHeightChanged",r.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED="columnContainerWidthChanged",r.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED="displayedColumnsWidthChanged",r.EVENT_SCROLL_VISIBILITY_CHANGED="scrollVisibilityChanged",r.EVENT_COLUMN_HOVER_CHANGED="columnHoverChanged",r.EVENT_FLASH_CELLS="flashCells",r.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED="paginationPixelOffsetChanged",r.EVENT_DISPLAYED_ROWS_CHANGED="displayedRowsChanged",r.EVENT_LEFT_PINNED_WIDTH_CHANGED="leftPinnedWidthChanged",r.EVENT_RIGHT_PINNED_WIDTH_CHANGED="rightPinnedWidthChanged",r.EVENT_ROW_CONTAINER_HEIGHT_CHANGED="rowContainerHeightChanged",r.EVENT_HEADER_HEIGHT_CHANGED="headerHeightChanged",r.EVENT_COLUMN_HEADER_HEIGHT_CHANGED="columnHeaderHeightChanged",r.EVENT_ROW_DRAG_ENTER="rowDragEnter",r.EVENT_ROW_DRAG_MOVE="rowDragMove",r.EVENT_ROW_DRAG_LEAVE="rowDragLeave",r.EVENT_ROW_DRAG_END="rowDragEnd",r.EVENT_GRID_STYLES_CHANGED="gridStylesChanged",r.EVENT_POPUP_TO_FRONT="popupToFront",r.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST="columnRowGroupChangeRequest",r.EVENT_COLUMN_PIVOT_CHANGE_REQUEST="columnPivotChangeRequest",r.EVENT_COLUMN_VALUE_CHANGE_REQUEST="columnValueChangeRequest",r.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST="columnAggFuncChangeRequest",r.EVENT_STORE_UPDATED="storeUpdated",r.EVENT_FILTER_DESTROYED="filterDestroyed",r.EVENT_ROW_DATA_UPDATE_STARTED="rowDataUpdateStarted",r.EVENT_ROW_COUNT_READY="rowCountReady",r.EVENT_ADVANCED_FILTER_ENABLED_CHANGED="advancedFilterEnabledChanged",r.EVENT_DATA_TYPES_INFERRED="dataTypesInferred",r.EVENT_FIELD_VALUE_CHANGED="fieldValueChanged",r.EVENT_FIELD_PICKER_VALUE_SELECTED="fieldPickerValueSelected",r.EVENT_SIDE_BAR_UPDATED="sideBarUpdated",r})();class o1{constructor(){this.existingIds={}}getInstanceIdForKey(e){const t=this.existingIds[e];let i;return i="number"!=typeof t?0:t+1,this.existingIds[e]=i,i}}var ov=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const wf="ag-Grid-AutoColumn";let lS=class extends Ee{createAutoGroupColumns(e){const t=[],i=this.gridOptionsService.get("treeData");let n=this.gridOptionsService.isGroupMultiAutoColumn();return i&&n&&(console.warn('AG Grid: you cannot mix groupDisplayType = "multipleColumns" with treeData, only one column can be used to display groups when doing tree data'),n=!1),n?e.forEach((s,o)=>{t.push(this.createOneAutoGroupColumn(s,o))}):t.push(this.createOneAutoGroupColumn()),t}updateAutoGroupColumns(e,t){e.forEach((i,n)=>this.updateOneAutoGroupColumn(i,n,t))}createOneAutoGroupColumn(e,t){let i;i=e?`${wf}-${e.getId()}`:wf;const n=this.createAutoGroupColDef(i,e,t);n.colId=i;const s=new ot(n,null,i,!0);return this.context.createBean(s),s}updateOneAutoGroupColumn(e,t,i){const n=e.getColDef(),s="string"==typeof n.showRowGroup?n.showRowGroup:void 0,o=null!=s?this.columnModel.getPrimaryColumn(s):void 0,a=this.createAutoGroupColDef(e.getId(),o??void 0,t);e.setColDef(a,null,i),this.columnFactory.applyColumnState(e,a,i)}createAutoGroupColDef(e,t,i){let n=this.createBaseColDef(t);return Lo(n,this.gridOptionsService.get("autoGroupColumnDef")),n=this.columnFactory.addColumnDefaultAndTypes(n,e),this.gridOptionsService.get("treeData")||gt(n.field)&&gt(n.valueGetter)&&gt(n.filterValueGetter)&&"agGroupColumnFilter"!==n.filter&&(n.filter=!1),i&&i>0&&(n.headerCheckboxSelection=!1),this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!(n.valueGetter||null!=n.field)&&(n.sortIndex=void 0,n.initialSort=void 0),n}createBaseColDef(e){const t=this.gridOptionsService.get("autoGroupColumnDef"),n={headerName:this.localeService.getLocaleTextFunc()("group","Group")};if(t&&(t.cellRenderer||t.cellRendererSelector)||(n.cellRenderer="agGroupCellRenderer"),e){const o=e.getColDef();Object.assign(n,{headerName:this.columnModel.getDisplayNameForColumn(e,"header"),headerValueGetter:o.headerValueGetter}),o.cellRenderer&&Object.assign(n,{cellRendererParams:{innerRenderer:o.cellRenderer,innerRendererParams:o.cellRendererParams}}),n.showRowGroup=e.getColId()}else n.showRowGroup=!0;return n}};ov([P("columnModel")],lS.prototype,"columnModel",void 0),ov([P("columnFactory")],lS.prototype,"columnFactory",void 0),lS=ov([He("autoGroupColService")],lS);const a1=/[&<>"']/g,l1={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function c1(r){const e=String.fromCharCode;function n(g,m){return e(g>>m&63|128)}function s(g){if(g>=0&&g<=31&&10!==g)return`_x${g.toString(16).toUpperCase().padStart(4,"0")}_`;if(0==(4294967168&g))return e(g);let m="";return 0==(4294965248&g)?m=e(g>>6&31|192):0==(4294901760&g)?(function i(g){if(g>=55296&&g<=57343)throw Error("Lone surrogate U+"+g.toString(16).toUpperCase()+" is not a scalar value")}(g),m=e(g>>12&15|224),m+=n(g,6)):0==(4292870144&g)&&(m=e(g>>18&7|240),m+=n(g,12),m+=n(g,6)),m+=e(63&g|128),m}const o=function t(g){const m=[];if(!g)return[];const y=g.length;let _,E,b=0;for(;b<y;)_=g.charCodeAt(b++),_>=55296&&_<=56319&&b<y?(E=g.charCodeAt(b++),56320==(64512&E)?m.push(((1023&_)<<10)+(1023&E)+65536):(m.push(_),b--)):m.push(_);return m}(r),a=o.length;let u,c=-1,p="";for(;++c<a;)u=o[c],p+=s(u);return p}function Vx(r){return r[0].toUpperCase()+r.substring(1).toLowerCase()}function yn(r,e){if(null==r)return null;const t=r.toString().toString();return e?t:t.replace(a1,i=>l1[i])}function cS(r){return r&&null!=r?r.replace(/([a-z])([A-Z])/g,"$1 $2").replace(/([A-Z]+)([A-Z])([a-z])/g,"$1 $2$3").replace(/\./g," ").split(" ").map(n=>n.substring(0,1).toUpperCase()+(n.length>1?n.substring(1,n.length):"")).join(" "):null}function eE(r){return r.replace(/[A-Z]/g,e=>`-${e.toLocaleLowerCase()}`)}function Sc(r){const e=new Map;return r.forEach(t=>e.set(t[0],t[1])),e}function RR(r,e){const t=new Map;return r.forEach(i=>t.set(e(i),i)),t}function Sl(r){const e=[];return r.forEach((t,i)=>e.push(i)),e}var xs=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Pn=class extends Ee{constructor(){super(...arguments),this.primaryHeaderRowCount=0,this.secondaryHeaderRowCount=0,this.gridHeaderRowCount=0,this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.displayedColumnsAndGroupsMap={},this.viewportColumns=[],this.viewportColumnsHash="",this.headerViewportColumns=[],this.viewportColumnsCenter=[],this.headerViewportColumnsCenter=[],this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.autoHeightActiveAtLeastOnce=!1,this.rowGroupColumns=[],this.valueColumns=[],this.pivotColumns=[],this.ready=!1,this.changeEventsDispatching=!1,this.autoGroupsNeedBuilding=!1,this.forceRecreateAutoGroups=!1,this.pivotMode=!1,this.bodyWidth=0,this.leftWidth=0,this.rightWidth=0,this.bodyWidthDirty=!0,this.shouldQueueResizeOperations=!1,this.resizeOperationQueue=[]}init(){this.suppressColumnVirtualisation=this.gridOptionsService.get("suppressColumnVirtualisation");const e=this.gridOptionsService.get("pivotMode");this.isPivotSettingAllowed(e)&&(this.pivotMode=e),this.addManagedPropertyListeners(["groupDisplayType","treeData","treeDataDisplayType","groupHideOpenParents"],t=>this.buildAutoGroupColumns(xd(t.source))),this.addManagedPropertyListener("autoGroupColumnDef",t=>this.onAutoGroupColumnDefChanged(xd(t.source))),this.addManagedPropertyListeners(["defaultColDef","columnTypes","suppressFieldDotNotation"],t=>this.onSharedColDefChanged(xd(t.source))),this.addManagedPropertyListener("pivotMode",t=>this.setPivotMode(this.gridOptionsService.get("pivotMode"),xd(t.source))),this.addManagedListener(this.eventService,G.EVENT_FIRST_DATA_RENDERED,()=>this.onFirstDataRendered())}buildAutoGroupColumns(e){!this.columnDefs||(this.autoGroupsNeedBuilding=!0,this.forceRecreateAutoGroups=!0,this.updateGridColumns(),this.updateDisplayedColumns(e))}onAutoGroupColumnDefChanged(e){this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,e)}onSharedColDefChanged(e){!this.gridColumns||(this.groupAutoColumns&&this.autoGroupColService.updateAutoGroupColumns(this.groupAutoColumns,e),this.createColumnsFromColumnDefs(!0,e))}setColumnDefs(e,t){const i=!!this.columnDefs;this.columnDefs=e,this.createColumnsFromColumnDefs(i,t)}recreateColumnDefs(e){this.onSharedColDefChanged(e)}destroyOldColumns(e,t){const i={};if(!e)return;this.columnUtils.depthFirstOriginalTreeSearch(null,e,s=>{i[s.getInstanceId()]=s}),t&&this.columnUtils.depthFirstOriginalTreeSearch(null,t,s=>{i[s.getInstanceId()]=null});const n=Object.values(i).filter(s=>null!=s);this.destroyBeans(n)}destroyColumns(){this.destroyOldColumns(this.primaryColumnTree),this.destroyOldColumns(this.secondaryBalancedTree),this.destroyOldColumns(this.groupAutoColsBalancedTree)}createColumnsFromColumnDefs(e,t){const i=e?this.compareColumnStatesAndDispatchEvents(t):void 0;this.valueCache.expire(),this.autoGroupsNeedBuilding=!0;const n=this.primaryColumns,o=this.columnFactory.createColumnTree(this.columnDefs,!0,this.primaryColumnTree,t);this.destroyOldColumns(this.primaryColumnTree,o.columnTree),this.primaryColumnTree=o.columnTree,this.primaryHeaderRowCount=o.treeDept+1,this.primaryColumns=this.getColumnsFromTree(this.primaryColumnTree),this.primaryColumnsMap={},this.primaryColumns.forEach(u=>this.primaryColumnsMap[u.getId()]=u),this.extractRowGroupColumns(t,n),this.extractPivotColumns(t,n),this.extractValueColumns(t,n),this.ready=!0,(this.gridColsArePrimary||void 0===this.gridColsArePrimary||this.autoGroupsNeedBuilding)&&(this.updateGridColumns(),e&&this.gridColsArePrimary&&!this.gridOptionsService.get("maintainColumnOrder")&&this.orderGridColumnsLikePrimary(),this.updateDisplayedColumns(t),this.checkViewportColumns()),this.dispatchEverythingChanged(t),this.changeEventsDispatching=!0,i&&i(),this.changeEventsDispatching=!1,this.dispatchNewColumnsLoaded(t)}shouldRowModelIgnoreRefresh(){return this.changeEventsDispatching}dispatchNewColumnsLoaded(e){this.eventService.dispatchEvent({type:G.EVENT_NEW_COLUMNS_LOADED,source:e}),"gridInitializing"===e&&this.onColumnsReady()}dispatchEverythingChanged(e){this.eventService.dispatchEvent({type:G.EVENT_COLUMN_EVERYTHING_CHANGED,source:e})}orderGridColumnsLikePrimary(){const e=this.primaryColumns;if(!e)return;const t=e.filter(n=>this.gridColumns.indexOf(n)>=0),i=this.gridColumns.filter(n=>t.indexOf(n)<0);this.gridColumns=[...i,...t],this.gridColumns=this.placeLockedColumns(this.gridColumns)}getAllDisplayedAutoHeightCols(){return this.displayedAutoHeightCols}setViewport(){this.gridOptionsService.get("enableRtl")?(this.viewportLeft=this.bodyWidth-this.scrollPosition-this.scrollWidth,this.viewportRight=this.bodyWidth-this.scrollPosition):(this.viewportLeft=this.scrollPosition,this.viewportRight=this.scrollWidth+this.scrollPosition)}getDisplayedColumnsStartingAt(e){let t=e;const i=[];for(;null!=t;)i.push(t),t=this.getDisplayedColAfter(t);return i}checkViewportColumns(e=!1){null!=this.displayedColumnsCenter&&this.extractViewport()&&this.eventService.dispatchEvent({type:G.EVENT_VIRTUAL_COLUMNS_CHANGED,afterScroll:e})}setViewportPosition(e,t,i=!1){(e!==this.scrollWidth||t!==this.scrollPosition||this.bodyWidthDirty)&&(this.scrollWidth=e,this.scrollPosition=t,this.bodyWidthDirty=!0,this.setViewport(),this.ready&&this.checkViewportColumns(i))}isPivotMode(){return this.pivotMode}isPivotSettingAllowed(e){return!e||!this.gridOptionsService.get("treeData")||(console.warn("AG Grid: Pivot mode not available in conjunction Tree Data i.e. 'gridOptions.treeData: true'"),!1)}setPivotMode(e,t){e!==this.pivotMode&&this.isPivotSettingAllowed(this.pivotMode)&&(this.pivotMode=e,this.gridColumns)&&(this.autoGroupsNeedBuilding=!0,this.updateGridColumns(),this.updateDisplayedColumns(t),this.eventService.dispatchEvent({type:G.EVENT_COLUMN_PIVOT_MODE_CHANGED}))}getSecondaryPivotColumn(e,t){if(gt(this.secondaryColumns))return null;const i=this.getPrimaryColumn(t);let n=null;return this.secondaryColumns.forEach(s=>{const o=s.getColDef().pivotKeys,a=s.getColDef().pivotValueColumn;yc(o,e)&&a===i&&(n=s)}),n}setBeans(e){this.logger=e.create("columnModel")}setFirstRightAndLastLeftPinned(e){let t,i;this.gridOptionsService.get("enableRtl")?(t=this.displayedColumnsLeft?this.displayedColumnsLeft[0]:null,i=this.displayedColumnsRight?Xt(this.displayedColumnsRight):null):(t=this.displayedColumnsLeft?Xt(this.displayedColumnsLeft):null,i=this.displayedColumnsRight?this.displayedColumnsRight[0]:null),this.gridColumns.forEach(n=>{n.setLastLeftPinned(n===t,e),n.setFirstRightPinned(n===i,e)})}autoSizeColumns(e){if(this.shouldQueueResizeOperations)return void this.resizeOperationQueue.push(()=>this.autoSizeColumns(e));const{columns:t,skipHeader:i,skipHeaderGroups:n,stopAtGroup:s,source:o="api"}=e;this.animationFrameService.flushAllFrames();const a=[];let c=-1;const u=i??this.gridOptionsService.get("skipHeaderOnAutoSize"),p=n??u;for(;0!==c;)c=0,this.actionOnGridColumns(t,g=>{if(a.indexOf(g)>=0)return!1;const m=this.autoWidthCalculator.getPreferredWidthForColumn(g,u);if(m>0){const y=this.normaliseColumnWidth(g,m);g.setActualWidth(y,o),a.push(g),c++}return!0},o);p||this.autoSizeColumnGroupsByColumns(t,o,s),this.dispatchColumnResizedEvent(a,!0,"autosizeColumns")}dispatchColumnResizedEvent(e,t,i,n=null){e&&e.length&&this.eventService.dispatchEvent({type:G.EVENT_COLUMN_RESIZED,columns:e,column:1===e.length?e[0]:null,flexColumns:n,finished:t,source:i})}dispatchColumnChangedEvent(e,t,i){this.eventService.dispatchEvent({type:e,columns:t,column:t&&1==t.length?t[0]:null,source:i})}dispatchColumnMovedEvent(e){const{movedColumns:t,source:i,toIndex:n,finished:s}=e;this.eventService.dispatchEvent({type:G.EVENT_COLUMN_MOVED,columns:t,column:t&&1===t.length?t[0]:null,toIndex:n,finished:s,source:i})}dispatchColumnPinnedEvent(e,t){if(!e.length)return;const i=1===e.length?e[0]:null,n=this.getCommonValue(e,o=>o.getPinned());this.eventService.dispatchEvent({type:G.EVENT_COLUMN_PINNED,pinned:n??null,columns:e,column:i,source:t})}dispatchColumnVisibleEvent(e,t){if(!e.length)return;const i=1===e.length?e[0]:null,n=this.getCommonValue(e,o=>o.isVisible());this.eventService.dispatchEvent({type:G.EVENT_COLUMN_VISIBLE,visible:n,columns:e,column:i,source:t})}autoSizeColumn(e,t,i){e&&this.autoSizeColumns({columns:[e],skipHeader:i,skipHeaderGroups:!0,source:t})}autoSizeColumnGroupsByColumns(e,t,i){const n=new Set;let o;this.getGridColumns(e).forEach(c=>{let u=c.getParent();for(;u&&u!=i;)u.isPadding()||n.add(u),u=u.getParent()});for(const c of n){for(const u of this.ctrlsService.getHeaderRowContainerCtrls())if(o=u.getHeaderCtrlForColumn(c),o)break;o&&o.resizeLeafColumnsToFit(t)}return[]}autoSizeAllColumns(e,t){if(this.shouldQueueResizeOperations)return void this.resizeOperationQueue.push(()=>this.autoSizeAllColumns(e,t));const i=this.getAllDisplayedColumns();this.autoSizeColumns({columns:i,skipHeader:t,source:e})}getColumnsFromTree(e){const t=[],i=n=>{for(let s=0;s<n.length;s++){const o=n[s];o instanceof ot?t.push(o):o instanceof Wt&&i(o.getChildren())}};return i(e),t}getAllDisplayedTrees(){return this.displayedTreeLeft&&this.displayedTreeRight&&this.displayedTreeCentre?this.displayedTreeLeft.concat(this.displayedTreeCentre).concat(this.displayedTreeRight):null}getPrimaryColumnTree(){return this.primaryColumnTree}getHeaderRowCount(){return this.gridHeaderRowCount}getDisplayedTreeLeft(){return this.displayedTreeLeft}getDisplayedTreeRight(){return this.displayedTreeRight}getDisplayedTreeCentre(){return this.displayedTreeCentre}isColumnDisplayed(e){return this.getAllDisplayedColumns().indexOf(e)>=0}getAllDisplayedColumns(){return this.displayedColumns}getViewportColumns(){return this.viewportColumns}getDisplayedLeftColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsLeft):this.displayedColumnsLeft}getDisplayedRightColumnsForRow(e){return this.colSpanActive?this.getDisplayedColumnsForRow(e,this.displayedColumnsRight):this.displayedColumnsRight}isColSpanActive(){return this.colSpanActive}getDisplayedColumnsForRow(e,t,i,n){const s=[];let o=null;for(let a=0;a<t.length;a++){const c=t[a],u=t.length-a,p=Math.min(c.getColSpan(e),u),g=[c];if(p>1){const y=p-1;for(let b=1;b<=y;b++)g.push(t[a+b]);a+=y}let m;i?(m=!1,g.forEach(y=>{i(y)&&(m=!0)})):m=!0,m&&(0===s.length&&o&&!!n&&n(c)&&s.push(o),s.push(c)),o=c}return s}getViewportCenterColumnsForRow(e){if(!this.colSpanActive)return this.viewportColumnsCenter;const i=this.isColumnVirtualisationSuppressed()?null:this.isColumnInRowViewport.bind(this);return this.getDisplayedColumnsForRow(e,this.displayedColumnsCenter,i,n=>{const s=n.getLeft();return Ie(s)&&s>this.viewportLeft})}isColumnAtEdge(e,t){const i=this.getAllDisplayedColumns();if(!i.length)return!1;const n="first"===t;let s;if(e instanceof di){const o=e.getDisplayedLeafColumns();if(!o.length)return!1;s=n?o[0]:Xt(o)}else s=e;return(n?i[0]:Xt(i))===s}getAriaColumnIndex(e){let t;return t=e instanceof di?e.getLeafColumns()[0]:e,this.ariaOrderColumns.indexOf(t)+1}isColumnInHeaderViewport(e){return!!e.isAutoHeaderHeight()||this.isColumnInRowViewport(e)}isColumnInRowViewport(e){if(e.isAutoHeight())return!0;const t=e.getLeft()||0,i=t+e.getActualWidth(),n=this.viewportLeft-200,s=this.viewportRight+200;return!(t<n&&i<n||t>s&&i>s)}getDisplayedColumnsLeftWidth(){return this.getWidthOfColsInList(this.displayedColumnsLeft)}getDisplayedColumnsRightWidth(){return this.getWidthOfColsInList(this.displayedColumnsRight)}updatePrimaryColumnList(e,t,i,n,s,o){if(!e||us(e))return;let a=!1;e.forEach(u=>{if(!u)return;const p=this.getPrimaryColumn(u);if(p){if(i){if(t.indexOf(p)>=0)return;t.push(p)}else{if(t.indexOf(p)<0)return;vr(t,p)}n(p),a=!0}}),a&&(this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(o),this.eventService.dispatchEvent({type:s,columns:t,column:1===t.length?t[0]:null,source:o}))}setRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.setPrimaryColumnList(e,this.rowGroupColumns,G.EVENT_COLUMN_ROW_GROUP_CHANGED,!0,this.setRowGroupActive.bind(this),t)}setRowGroupActive(e,t,i){e!==t.isRowGroupActive()&&(t.setRowGroupActive(e,i),e&&!this.gridOptionsService.get("suppressRowGroupHidesColumns")&&this.setColumnsVisible([t],!1,i),!e&&!this.gridOptionsService.get("suppressMakeColumnVisibleAfterUnGroup")&&this.setColumnsVisible([t],!0,i))}addRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!0,this.setRowGroupActive.bind(this,!0),G.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}removeRowGroupColumns(e,t){this.autoGroupsNeedBuilding=!0,this.updatePrimaryColumnList(e,this.rowGroupColumns,!1,this.setRowGroupActive.bind(this,!1),G.EVENT_COLUMN_ROW_GROUP_CHANGED,t)}addPivotColumns(e,t){this.updatePrimaryColumnList(e,this.pivotColumns,!0,i=>i.setPivotActive(!0,t),G.EVENT_COLUMN_PIVOT_CHANGED,t)}setPivotColumns(e,t){this.setPrimaryColumnList(e,this.pivotColumns,G.EVENT_COLUMN_PIVOT_CHANGED,!0,(i,n)=>{n.setPivotActive(i,t)},t)}removePivotColumns(e,t){this.updatePrimaryColumnList(e,this.pivotColumns,!1,i=>i.setPivotActive(!1,t),G.EVENT_COLUMN_PIVOT_CHANGED,t)}setPrimaryColumnList(e,t,i,n,s,o){if(!this.gridColumns)return;const a=new Map;t.forEach((c,u)=>a.set(c,u)),t.length=0,Ie(e)&&e.forEach(c=>{const u=this.getPrimaryColumn(c);u&&t.push(u)}),t.forEach((c,u)=>{const p=a.get(c);void 0!==p?n&&p!==u||a.delete(c):a.set(c,0)}),(this.primaryColumns||[]).forEach(c=>{const u=t.indexOf(c)>=0;s(u,c)}),this.autoGroupsNeedBuilding&&this.updateGridColumns(),this.updateDisplayedColumns(o),this.dispatchColumnChangedEvent(i,[...a.keys()],o)}setValueColumns(e,t){this.setPrimaryColumnList(e,this.valueColumns,G.EVENT_COLUMN_VALUE_CHANGED,!1,this.setValueActive.bind(this),t)}setValueActive(e,t,i){if(e!==t.isValueActive()&&(t.setValueActive(e,i),e&&!t.getAggFunc())){const n=this.aggFuncService.getDefaultAggFunc(t);t.setAggFunc(n)}}addValueColumns(e,t){this.updatePrimaryColumnList(e,this.valueColumns,!0,this.setValueActive.bind(this,!0),G.EVENT_COLUMN_VALUE_CHANGED,t)}removeValueColumns(e,t){this.updatePrimaryColumnList(e,this.valueColumns,!1,this.setValueActive.bind(this,!1),G.EVENT_COLUMN_VALUE_CHANGED,t)}normaliseColumnWidth(e,t){const i=e.getMinWidth();Ie(i)&&t<i&&(t=i);const n=e.getMaxWidth();return Ie(n)&&e.isGreaterThanMax(t)&&(t=n),t}getPrimaryOrGridColumn(e){return this.getPrimaryColumn(e)||this.getGridColumn(e)}setColumnWidths(e,t,i,n){const s=[];e.forEach(o=>{const a=this.getPrimaryOrGridColumn(o.key);if(a&&(s.push({width:o.newWidth,ratios:[1],columns:[a]}),"shift"===this.gridOptionsService.get("colResizeDefault")&&(t=!t),t)){const u=this.getDisplayedColAfter(a);if(!u)return;const p=a.getActualWidth()-o.newWidth,g=u.getActualWidth()+p;s.push({width:g,ratios:[1],columns:[u]})}}),0!==s.length&&this.resizeColumnSets({resizeSets:s,finished:i,source:n})}checkMinAndMaxWidthsForSet(e){const{columns:t,width:i}=e;let n=0,s=0,o=!0;return t.forEach(u=>{n+=u.getMinWidth()||0;const g=u.getMaxWidth();Ie(g)&&g>0?s+=g:o=!1}),i>=n&&(!o||i<=s)}resizeColumnSets(e){const{resizeSets:t,finished:i,source:n}=e;if(t&&!t.every(g=>this.checkMinAndMaxWidthsForSet(g)))return void(i&&this.dispatchColumnResizedEvent(t&&t.length>0?t[0].columns:null,i,n));const o=[],a=[];t.forEach(g=>{const{width:m,columns:y,ratios:b}=g,_={},E={};y.forEach(O=>a.push(O));let D=!0,R=0;for(;D;){if(R++,R>1e3){console.error("AG Grid: infinite loop in resizeColumnSets");break}D=!1;const O=[];let L=0,k=m;y.forEach((j,q)=>{E[j.getId()]?k-=_[j.getId()]:(O.push(j),L+=b[q])});const U=1/L;O.forEach((j,q)=>{let me;q===O.length-1?me=k:(me=Math.round(b[q]*m*U),k-=me);const ye=j.getMinWidth(),Ae=j.getMaxWidth();Ie(ye)&&me<ye?(me=ye,E[j.getId()]=!0,D=!0):Ie(Ae)&&Ae>0&&me>Ae&&(me=Ae,E[j.getId()]=!0,D=!0),_[j.getId()]=me})}y.forEach(O=>{const L=_[O.getId()];O.getActualWidth()!==L&&(O.setActualWidth(L,n),o.push(O))})});const c=o.length>0;let u=[];c&&(u=this.refreshFlexedColumns({resizingCols:a,skipSetLeft:!0}),this.setLeftValues(n),this.updateBodyWidths(),this.checkViewportColumns());const p=a.concat(u);(c||i)&&this.dispatchColumnResizedEvent(p,i,n,u)}setColumnAggFunc(e,t,i){if(!e)return;const n=this.getPrimaryColumn(e);!n||(n.setAggFunc(t),this.dispatchColumnChangedEvent(G.EVENT_COLUMN_VALUE_CHANGED,[n],i))}moveRowGroupColumn(e,t,i){if(this.isRowGroupEmpty())return;const n=this.rowGroupColumns[e],s=this.rowGroupColumns.slice(e,t);this.rowGroupColumns.splice(e,1),this.rowGroupColumns.splice(t,0,n),this.eventService.dispatchEvent({type:G.EVENT_COLUMN_ROW_GROUP_CHANGED,columns:s,column:1===s.length?s[0]:null,source:i})}moveColumns(e,t,i,n=!0){if(!this.gridColumns)return;if(this.columnAnimationService.start(),t>this.gridColumns.length-e.length)return console.warn("AG Grid: tried to insert columns in invalid location, toIndex = "+t),void console.warn("AG Grid: remember that you should not count the moving columns when calculating the new index");const s=this.getGridColumns(e);!this.doesMovePassRules(s,t)||(Sf(this.gridColumns,s,t),this.updateDisplayedColumns(i),this.dispatchColumnMovedEvent({movedColumns:s,source:i,toIndex:t,finished:n}),this.columnAnimationService.finish())}doesMovePassRules(e,t){const i=this.getProposedColumnOrder(e,t);return this.doesOrderPassRules(i)}doesOrderPassRules(e){return!(!this.doesMovePassMarryChildren(e)||!this.doesMovePassLockedPositions(e))}getProposedColumnOrder(e,t){const i=this.gridColumns.slice();return Sf(i,e,t),i}sortColumnsLikeGridColumns(e){!e||e.length<=1||e.filter(i=>this.gridColumns.indexOf(i)<0).length>0||e.sort((i,n)=>this.gridColumns.indexOf(i)-this.gridColumns.indexOf(n))}doesMovePassLockedPositions(e){let t=0,i=!0;return e.forEach(s=>{const o=(s=>s?!0===s||"left"===s?0:2:1)(s.getColDef().lockPosition);o<t&&(i=!1),t=o}),i}doesMovePassMarryChildren(e){let t=!0;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,i=>{if(!(i instanceof Wt))return;const n=i,s=n.getColGroupDef();if(!s||!s.marryChildren)return;const a=[];n.getLeafColumns().forEach(m=>{const y=e.indexOf(m);a.push(y)}),Math.max.apply(Math,a)-Math.min.apply(Math,a)>n.getLeafColumns().length-1&&(t=!1)}),t}moveColumnByIndex(e,t,i){this.gridColumns&&this.moveColumns([this.gridColumns[e]],t,i)}getColumnDefs(){if(!this.primaryColumns)return;const e=this.primaryColumns.slice();return this.gridColsArePrimary?e.sort((t,i)=>this.gridColumns.indexOf(t)-this.gridColumns.indexOf(i)):this.lastPrimaryOrder&&e.sort((t,i)=>this.lastPrimaryOrder.indexOf(t)-this.lastPrimaryOrder.indexOf(i)),this.columnDefFactory.buildColumnDefs(e,this.rowGroupColumns,this.pivotColumns)}getBodyContainerWidth(){return this.bodyWidth}getContainerWidth(e){switch(e){case"left":return this.leftWidth;case"right":return this.rightWidth;default:return this.bodyWidth}}updateBodyWidths(){const e=this.getWidthOfColsInList(this.displayedColumnsCenter),t=this.getWidthOfColsInList(this.displayedColumnsLeft),i=this.getWidthOfColsInList(this.displayedColumnsRight);this.bodyWidthDirty=this.bodyWidth!==e,(this.bodyWidth!==e||this.leftWidth!==t||this.rightWidth!==i)&&(this.bodyWidth=e,this.leftWidth=t,this.rightWidth=i,this.eventService.dispatchEvent({type:G.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED}),this.eventService.dispatchEvent({type:G.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED}))}getValueColumns(){return this.valueColumns?this.valueColumns:[]}getPivotColumns(){return this.pivotColumns?this.pivotColumns:[]}isPivotActive(){return this.pivotColumns&&this.pivotColumns.length>0&&this.pivotMode}getRowGroupColumns(){return this.rowGroupColumns?this.rowGroupColumns:[]}getDisplayedCenterColumns(){return this.displayedColumnsCenter}getDisplayedLeftColumns(){return this.displayedColumnsLeft}getDisplayedRightColumns(){return this.displayedColumnsRight}getDisplayedColumns(e){switch(e){case"left":return this.getDisplayedLeftColumns();case"right":return this.getDisplayedRightColumns();default:return this.getDisplayedCenterColumns()}}getAllPrimaryColumns(){return this.primaryColumns?this.primaryColumns:null}getSecondaryColumns(){return this.secondaryColumns?this.secondaryColumns:null}getAllColumnsForQuickFilter(){return this.columnsForQuickFilter}getAllGridColumns(){var e;return null!==(e=this.gridColumns)&&void 0!==e?e:[]}isEmpty(){return us(this.gridColumns)}isRowGroupEmpty(){return us(this.rowGroupColumns)}setColumnsVisible(e,t=!1,i){this.applyColumnState({state:e.map(n=>({colId:"string"==typeof n?n:n.getColId(),hide:!t}))},i)}setColumnsPinned(e,t,i){if(!this.gridColumns)return;if(this.gridOptionsService.isDomLayout("print"))return void console.warn("AG Grid: Changing the column pinning status is not allowed with domLayout='print'");let n;this.columnAnimationService.start(),n=!0===t||"left"===t?"left":"right"===t?"right":null,this.actionOnGridColumns(e,s=>s.getPinned()!==n&&(s.setPinned(n),!0),i,()=>({type:G.EVENT_COLUMN_PINNED,pinned:n,column:null,columns:null,source:i})),this.columnAnimationService.finish()}actionOnGridColumns(e,t,i,n){if(us(e))return;const s=[];if(e.forEach(o=>{if(!o)return;const a=this.getGridColumn(o);a&&!1!==t(a)&&s.push(a)}),s.length&&(this.updateDisplayedColumns(i),Ie(n)&&n)){const o=n();o.columns=s,o.column=1===s.length?s[0]:null,this.eventService.dispatchEvent(o)}}getDisplayedColBefore(e){const t=this.getAllDisplayedColumns(),i=t.indexOf(e);return i>0?t[i-1]:null}getDisplayedColAfter(e){const t=this.getAllDisplayedColumns(),i=t.indexOf(e);return i<t.length-1?t[i+1]:null}getDisplayedGroupAfter(e){return this.getDisplayedGroupAtDirection(e,"After")}getDisplayedGroupBefore(e){return this.getDisplayedGroupAtDirection(e,"Before")}getDisplayedGroupAtDirection(e,t){const i=e.getProvidedColumnGroup().getLevel()+e.getPaddingLevel(),n=e.getDisplayedLeafColumns(),s="After"===t?Xt(n):n[0],o=`getDisplayedCol${t}`;for(;;){const a=this[o](s);if(!a)return null;const c=this.getColumnGroupAtLevel(a,i);if(c!==e)return c}}getColumnGroupAtLevel(e,t){let n,s,i=e.getParent();for(;n=i.getProvidedColumnGroup().getLevel(),s=i.getPaddingLevel(),!(n+s<=t);)i=i.getParent();return i}isPinningLeft(){return this.displayedColumnsLeft.length>0}isPinningRight(){return this.displayedColumnsRight.length>0}getPrimaryAndSecondaryAndAutoColumns(){return[].concat(this.primaryColumns||[],this.groupAutoColumns||[],this.secondaryColumns||[])}createStateItemFromColumn(e){const t=e.isRowGroupActive()?this.rowGroupColumns.indexOf(e):null,i=e.isPivotActive()?this.pivotColumns.indexOf(e):null,n=e.isValueActive()?e.getAggFunc():null,s=null!=e.getSort()?e.getSort():null,o=null!=e.getSortIndex()?e.getSortIndex():null,a=null!=e.getFlex()&&e.getFlex()>0?e.getFlex():null;return{colId:e.getColId(),width:e.getActualWidth(),hide:!e.isVisible(),pinned:e.getPinned(),sort:s,sortIndex:o,aggFunc:n,rowGroup:e.isRowGroupActive(),rowGroupIndex:t,pivot:e.isPivotActive(),pivotIndex:i,flex:a}}getColumnState(){if(gt(this.primaryColumns)||!this.isAlive())return[];const t=this.getPrimaryAndSecondaryAndAutoColumns().map(this.createStateItemFromColumn.bind(this));return this.orderColumnStateList(t),t}orderColumnStateList(e){const t=Sc(this.gridColumns.map((i,n)=>[i.getColId(),n]));e.sort((i,n)=>(t.has(i.colId)?t.get(i.colId):-1)-(t.has(n.colId)?t.get(n.colId):-1))}resetColumnState(e){if(us(this.primaryColumns))return;const t=this.getColumnsFromTree(this.primaryColumnTree),i=[];let n=1e3,s=1e3,o=[];this.groupAutoColumns&&(o=o.concat(this.groupAutoColumns)),t&&(o=o.concat(t)),o.forEach(a=>{const c=this.getColumnStateFromColDef(a);gt(c.rowGroupIndex)&&c.rowGroup&&(c.rowGroupIndex=n++),gt(c.pivotIndex)&&c.pivot&&(c.pivotIndex=s++),i.push(c)}),this.applyColumnState({state:i,applyOrder:!0},e)}getColumnStateFromColDef(e){const t=(_,E)=>_??E??null,i=e.getColDef(),n=t(i.sort,i.initialSort),s=t(i.sortIndex,i.initialSortIndex),o=t(i.hide,i.initialHide),a=t(i.pinned,i.initialPinned),c=t(i.width,i.initialWidth),u=t(i.flex,i.initialFlex);let p=t(i.rowGroupIndex,i.initialRowGroupIndex),g=t(i.rowGroup,i.initialRowGroup);null==p&&(null==g||0==g)&&(p=null,g=null);let m=t(i.pivotIndex,i.initialPivotIndex),y=t(i.pivot,i.initialPivot);null==m&&(null==y||0==y)&&(m=null,y=null);const b=t(i.aggFunc,i.initialAggFunc);return{colId:e.getColId(),sort:n,sortIndex:s,hide:o,pinned:a,width:c,flex:u,rowGroup:g,rowGroupIndex:p,pivot:y,pivotIndex:m,aggFunc:b}}applyColumnState(e,t){if(us(this.primaryColumns))return!1;if(e&&e.state&&!e.state.forEach)return console.warn("AG Grid: applyColumnState() - the state attribute should be an array, however an array was not found. Please provide an array of items (one for each col you want to change) for state."),!1;const i=(o,a,c)=>{const u=this.compareColumnStatesAndDispatchEvents(t);this.autoGroupsNeedBuilding=!0;const p=a.slice(),g={},m={},y=[],b=[];let _=0;const E=this.rowGroupColumns.slice(),D=this.pivotColumns.slice();o.forEach(k=>{const U=k.colId||"";if(U.startsWith(wf))return y.push(k),void b.push(k);const q=c(U);q?(this.syncColumnWithStateItem(q,k,e.defaultState,g,m,!1,t),vr(p,q)):(b.push(k),_+=1)});const R=k=>this.syncColumnWithStateItem(k,null,e.defaultState,g,m,!1,t);p.forEach(R);const O=(k,U,j,q)=>{const J=k[j.getId()],me=k[q.getId()],ye=null!=J,Ae=null!=me;if(ye&&Ae)return J-me;if(ye)return-1;if(Ae)return 1;const Pe=U.indexOf(j),Le=U.indexOf(q),Xe=Pe>=0;return Xe&&Le>=0?Pe-Le:Xe?-1:1};this.rowGroupColumns.sort(O.bind(this,g,E)),this.pivotColumns.sort(O.bind(this,m,D)),this.updateGridColumns();const L=this.groupAutoColumns?this.groupAutoColumns.slice():[];return y.forEach(k=>{const U=this.getAutoColumn(k.colId);vr(L,U),this.syncColumnWithStateItem(U,k,e.defaultState,null,null,!0,t)}),L.forEach(R),this.applyOrderAfterApplyState(e),this.updateDisplayedColumns(t),this.dispatchEverythingChanged(t),u(),{unmatchedAndAutoStates:b,unmatchedCount:_}};this.columnAnimationService.start();let{unmatchedAndAutoStates:n,unmatchedCount:s}=i(e.state||[],this.primaryColumns||[],o=>this.getPrimaryColumn(o));return(n.length>0||Ie(e.defaultState))&&(s=i(n,this.secondaryColumns||[],o=>this.getSecondaryColumn(o)).unmatchedCount),this.columnAnimationService.finish(),0===s}applyOrderAfterApplyState(e){if(!e.applyOrder||!e.state)return;let t=[];const i={};e.state.forEach(s=>{if(!s.colId||i[s.colId])return;const o=this.gridColumnsMap[s.colId];o&&(t.push(o),i[s.colId]=!0)});let n=0;this.gridColumns.forEach(s=>{const o=s.getColId();null==i[o]&&(o.startsWith(wf)?yf(t,s,n++):t.push(s))}),t=this.placeLockedColumns(t),this.doesMovePassMarryChildren(t)?this.gridColumns=t:console.warn("AG Grid: Applying column order broke a group where columns should be married together. Applying new order has been discarded.")}compareColumnStatesAndDispatchEvents(e){const t={rowGroupColumns:this.rowGroupColumns.slice(),pivotColumns:this.pivotColumns.slice(),valueColumns:this.valueColumns.slice()},i=this.getColumnState(),n={};return i.forEach(s=>{n[s.colId]=s}),()=>{const s=this.getPrimaryAndSecondaryAndAutoColumns(),o=(E,D,R,O)=>{if(yc(D.map(O),R.map(O)))return;const j=new Set(D);R.forEach(me=>{j.delete(me)||j.add(me)});const q=[...j];this.eventService.dispatchEvent({type:E,columns:q,column:1===q.length?q[0]:null,source:e})},a=E=>{const D=[];return s.forEach(R=>{const O=n[R.getColId()];O&&E(O,R)&&D.push(R)}),D},c=E=>E.getColId();o(G.EVENT_COLUMN_ROW_GROUP_CHANGED,t.rowGroupColumns,this.rowGroupColumns,c),o(G.EVENT_COLUMN_PIVOT_CHANGED,t.pivotColumns,this.pivotColumns,c);const p=a((E,D)=>{const R=null!=E.aggFunc,O=R!=D.isValueActive(),L=R&&E.aggFunc!=D.getAggFunc();return O||L});p.length>0&&this.dispatchColumnChangedEvent(G.EVENT_COLUMN_VALUE_CHANGED,p,e),this.dispatchColumnResizedEvent(a((E,D)=>E.width!=D.getActualWidth()),!0,e),this.dispatchColumnPinnedEvent(a((E,D)=>E.pinned!=D.getPinned()),e),this.dispatchColumnVisibleEvent(a((E,D)=>E.hide==D.isVisible()),e);const _=a((E,D)=>E.sort!=D.getSort()||E.sortIndex!=D.getSortIndex());_.length>0&&this.sortController.dispatchSortChangedEvents(e,_),this.normaliseColumnMovedEventForColumnState(i,e)}}getCommonValue(e,t){if(!e||0==e.length)return;const i=t(e[0]);for(let n=1;n<e.length;n++)if(i!==t(e[n]))return;return i}normaliseColumnMovedEventForColumnState(e,t){const i=this.getColumnState(),n={};i.forEach(u=>n[u.colId]=u);const s={};e.forEach(u=>{n[u.colId]&&(s[u.colId]=!0)});const o=e.filter(u=>s[u.colId]),a=i.filter(u=>s[u.colId]),c=[];a.forEach((u,p)=>{const g=o&&o[p];if(g&&g.colId!==u.colId){const m=this.getGridColumn(g.colId);m&&c.push(m)}}),c.length&&this.dispatchColumnMovedEvent({movedColumns:c,source:t,finished:!0})}syncColumnWithStateItem(e,t,i,n,s,o,a){if(!e)return;const c=(L,k)=>{const U={value1:void 0,value2:void 0};let j=!1;return t&&(void 0!==t[L]&&(U.value1=t[L],j=!0),Ie(k)&&void 0!==t[k]&&(U.value2=t[k],j=!0)),!j&&i&&(void 0!==i[L]&&(U.value1=i[L]),Ie(k)&&void 0!==i[k]&&(U.value2=i[k])),U},u=c("hide").value1;void 0!==u&&e.setVisible(!u,a);const p=c("pinned").value1;void 0!==p&&e.setPinned(p);const g=this.columnUtils.calculateColMinWidth(e.getColDef()),m=c("flex").value1;if(void 0!==m&&e.setFlex(m),null==m){const L=c("width").value1;null!=L&&null!=g&&L>=g&&e.setActualWidth(L,a)}const y=c("sort").value1;void 0!==y&&e.setSort("desc"===y||"asc"===y?y:void 0,a);const b=c("sortIndex").value1;if(void 0!==b&&e.setSortIndex(b),o||!e.isPrimary())return;const _=c("aggFunc").value1;void 0!==_&&("string"==typeof _?(e.setAggFunc(_),e.isValueActive()||(e.setValueActive(!0,a),this.valueColumns.push(e))):(Ie(_)&&console.warn("AG Grid: stateItem.aggFunc must be a string. if using your own aggregation functions, register the functions first before using them in get/set state. This is because it is intended for the column state to be stored and retrieved as simple JSON."),e.isValueActive()&&(e.setValueActive(!1,a),vr(this.valueColumns,e))));const{value1:E,value2:D}=c("rowGroup","rowGroupIndex");(void 0!==E||void 0!==D)&&("number"==typeof D||E?(e.isRowGroupActive()||(e.setRowGroupActive(!0,a),this.rowGroupColumns.push(e)),n&&"number"==typeof D&&(n[e.getId()]=D)):e.isRowGroupActive()&&(e.setRowGroupActive(!1,a),vr(this.rowGroupColumns,e)));const{value1:R,value2:O}=c("pivot","pivotIndex");(void 0!==R||void 0!==O)&&("number"==typeof O||R?(e.isPivotActive()||(e.setPivotActive(!0,a),this.pivotColumns.push(e)),s&&"number"==typeof O&&(s[e.getId()]=O)):e.isPivotActive()&&(e.setPivotActive(!1,a),vr(this.pivotColumns,e)))}getGridColumns(e){return this.getColumns(e,this.getGridColumn.bind(this))}getColumns(e,t){const i=[];return e&&e.forEach(n=>{const s=t(n);s&&i.push(s)}),i}getColumnWithValidation(e){if(null==e)return null;const t=this.getGridColumn(e);return t||console.warn("AG Grid: could not find column "+e),t}getPrimaryColumn(e){return this.primaryColumns?this.getColumn(e,this.primaryColumns,this.primaryColumnsMap):null}getGridColumn(e){return this.getColumn(e,this.gridColumns,this.gridColumnsMap)}lookupGridColumn(e){return this.gridColumnsMap[e]}getSecondaryColumn(e){return this.secondaryColumns?this.getColumn(e,this.secondaryColumns,this.secondaryColumnsMap):null}getColumn(e,t,i){if(!e||!i)return null;if("string"==typeof e&&i[e])return i[e];for(let n=0;n<t.length;n++)if(this.columnsMatch(t[n],e))return t[n];return this.getAutoColumn(e)}getSourceColumnsForGroupColumn(e){const t=e.getColDef().showRowGroup;if(!t)return null;if(!0===t)return this.rowGroupColumns.slice(0);const i=this.getPrimaryColumn(t);return i?[i]:null}getAutoColumn(e){return this.groupAutoColumns&&Ie(this.groupAutoColumns)&&!gt(this.groupAutoColumns)&&this.groupAutoColumns.find(t=>this.columnsMatch(t,e))||null}columnsMatch(e,t){const i=e===t,n=e.getColDef()===t,s=e.getColId()==t;return i||n||s}getDisplayNameForColumn(e,t,i=!1){if(!e)return null;const n=this.getHeaderName(e.getColDef(),e,null,null,t);return i?this.wrapHeaderNameWithAggFunc(e,n):n}getDisplayNameForProvidedColumnGroup(e,t,i){const n=t?t.getColGroupDef():null;return n?this.getHeaderName(n,null,e,t,i):null}getDisplayNameForColumnGroup(e,t){return this.getDisplayNameForProvidedColumnGroup(e,e.getProvidedColumnGroup(),t)}getHeaderName(e,t,i,n,s){const o=e.headerValueGetter;if(o){const a=this.gridOptionsService.addGridCommonParams({colDef:e,column:t,columnGroup:i,providedColumnGroup:n,location:s});return"function"==typeof o?o(a):"string"==typeof o?this.expressionService.evaluate(o,a):(console.warn("AG Grid: headerValueGetter must be a function or a string"),"")}return null!=e.headerName?e.headerName:e.field?cS(e.field):""}wrapHeaderNameWithAggFunc(e,t){if(this.gridOptionsService.get("suppressAggFuncInHeader"))return t;const i=e.getColDef().pivotValueColumn;let o,s=null;if(Ie(i)){const a=this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn")&&1===this.valueColumns.length,c=void 0!==e.getColDef().pivotTotalColumnIds;if(a&&!c)return t;s=i?i.getAggFunc():null,o=!0}else{const a=e.isValueActive(),c=this.pivotMode||!this.isRowGroupEmpty();a&&c?(s=e.getAggFunc(),o=!0):o=!1}if(o){const a="string"==typeof s?s:"func";return`${this.localeService.getLocaleTextFunc()(a,a)}(${t})`}return t}getColumnGroup(e,t){if(!e)return null;if(e instanceof di)return e;const i=this.getAllDisplayedTrees(),n="number"==typeof t;let s=null;return this.columnUtils.depthFirstAllColumnTreeSearch(i,o=>{if(o instanceof di){const a=o;let c;c=n?e===a.getGroupId()&&t===a.getPartId():e===a.getGroupId(),c&&(s=a)}}),s}isReady(){return this.ready}extractValueColumns(e,t){this.valueColumns=this.extractColumns(t,this.valueColumns,(i,n)=>i.setValueActive(n,e),()=>{},()=>{},i=>{const n=i.aggFunc;return null===n||""===n?null:void 0!==n?!!n:void 0},i=>null!=i.initialAggFunc&&""!=i.initialAggFunc),this.valueColumns.forEach(i=>{const n=i.getColDef();null!=n.aggFunc&&""!=n.aggFunc?i.setAggFunc(n.aggFunc):i.getAggFunc()||i.setAggFunc(n.initialAggFunc)})}extractRowGroupColumns(e,t){this.rowGroupColumns=this.extractColumns(t,this.rowGroupColumns,(i,n)=>i.setRowGroupActive(n,e),i=>i.rowGroupIndex,i=>i.initialRowGroupIndex,i=>i.rowGroup,i=>i.initialRowGroup)}extractColumns(e=[],t=[],i,n,s,o,a){const c=[],u=[];(this.primaryColumns||[]).forEach(m=>{const y=e.indexOf(m)<0,b=m.getColDef(),_=Mi(o(b)),E=Mi(a(b)),D=Rd(n(b)),R=Rd(s(b));let O;O=void 0!==_?_:void 0!==D?null!==D&&D>=0:y?void 0!==E?E:void 0!==R&&null!=R&&R>=0:t.indexOf(m)>=0,O&&((y?null!=D||null!=R:null!=D)?c.push(m):u.push(m))});const p=m=>{const y=n(m.getColDef()),b=s(m.getColDef());return y??b};c.sort((m,y)=>{const b=p(m),_=p(y);return b===_?0:b<_?-1:1});const g=[].concat(c);return t.forEach(m=>{u.indexOf(m)>=0&&g.push(m)}),u.forEach(m=>{g.indexOf(m)<0&&g.push(m)}),t.forEach(m=>{g.indexOf(m)<0&&i(m,!1)}),g.forEach(m=>{t.indexOf(m)<0&&i(m,!0)}),g}extractPivotColumns(e,t){this.pivotColumns=this.extractColumns(t,this.pivotColumns,(i,n)=>i.setPivotActive(n,e),i=>i.pivotIndex,i=>i.initialPivotIndex,i=>i.pivot,i=>i.initialPivot)}resetColumnGroupState(e){if(!this.primaryColumnTree)return;const t=[];this.columnUtils.depthFirstOriginalTreeSearch(null,this.primaryColumnTree,i=>{if(i instanceof Wt){const n=i.getColGroupDef(),s={groupId:i.getGroupId(),open:n?n.openByDefault:void 0};t.push(s)}}),this.setColumnGroupState(t,e)}getColumnGroupState(){const e=[];return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,t=>{t instanceof Wt&&e.push({groupId:t.getGroupId(),open:t.isExpanded()})}),e}setColumnGroupState(e,t){if(!this.gridBalancedTree)return;this.columnAnimationService.start();const i=[];e.forEach(n=>{const o=n.open,a=this.getProvidedColumnGroup(n.groupId);!a||a.isExpanded()!==o&&(this.logger.log("columnGroupOpened("+a.getGroupId()+","+o+")"),a.setExpanded(o),i.push(a))}),this.updateGroupsAndDisplayedColumns(t),this.setFirstRightAndLastLeftPinned(t),i.length&&this.eventService.dispatchEvent({type:G.EVENT_COLUMN_GROUP_OPENED,columnGroup:1===Wt.length?i[0]:void 0,columnGroups:i}),this.columnAnimationService.finish()}setColumnGroupOpened(e,t,i){let n;n=e instanceof Wt?e.getId():e||"",this.setColumnGroupState([{groupId:n,open:t}],i)}getProvidedColumnGroup(e){"string"!=typeof e&&console.error("AG Grid: group key must be a string");let t=null;return this.columnUtils.depthFirstOriginalTreeSearch(null,this.gridBalancedTree,i=>{i instanceof Wt&&i.getId()===e&&(t=i)}),t}calculateColumnsForDisplay(){let e;return e=this.pivotMode&&gt(this.secondaryColumns)?this.gridColumns.filter(t=>{const i=this.groupAutoColumns&&Go(this.groupAutoColumns,t),n=this.valueColumns&&Go(this.valueColumns,t);return i||n}):this.gridColumns.filter(t=>this.groupAutoColumns&&Go(this.groupAutoColumns,t)||t.isVisible()),e}checkColSpanActiveInCols(e){let t=!1;return e.forEach(i=>{Ie(i.getColDef().colSpan)&&(t=!0)}),t}calculateColumnsForGroupDisplay(){this.groupDisplayColumns=[],this.groupDisplayColumnsMap={},this.gridColumns.forEach(t=>{const i=t.getColDef(),n=i.showRowGroup;i&&Ie(n)&&(this.groupDisplayColumns.push(t),"string"==typeof n?this.groupDisplayColumnsMap[n]=t:!0===n&&this.getRowGroupColumns().forEach(s=>{this.groupDisplayColumnsMap[s.getId()]=t}))})}getGroupDisplayColumns(){return this.groupDisplayColumns}getGroupDisplayColumnForGroup(e){return this.groupDisplayColumnsMap[e]}updateDisplayedColumns(e){const t=this.calculateColumnsForDisplay();this.buildDisplayedTrees(t),this.updateGroupsAndDisplayedColumns(e),this.setFirstRightAndLastLeftPinned(e)}isSecondaryColumnsPresent(){return Ie(this.secondaryColumns)}setSecondaryColumns(e,t){if(!this.gridColumns)return;const i=e&&e.length>0;if(i||!gt(this.secondaryColumns)){if(i){this.processSecondaryColumnDefinitions(e);const n=this.columnFactory.createColumnTree(e,!1,this.secondaryBalancedTree||this.previousSecondaryColumns||void 0,t);this.destroyOldColumns(this.secondaryBalancedTree,n.columnTree),this.secondaryBalancedTree=n.columnTree,this.secondaryHeaderRowCount=n.treeDept+1,this.secondaryColumns=this.getColumnsFromTree(this.secondaryBalancedTree),this.secondaryColumnsMap={},this.secondaryColumns.forEach(s=>this.secondaryColumnsMap[s.getId()]=s),this.previousSecondaryColumns=null}else this.previousSecondaryColumns=this.secondaryBalancedTree,this.secondaryBalancedTree=null,this.secondaryHeaderRowCount=-1,this.secondaryColumns=null,this.secondaryColumnsMap={};this.updateGridColumns(),this.updateDisplayedColumns(t)}}processSecondaryColumnDefinitions(e){const t=this.gridOptionsService.get("processPivotResultColDef"),i=this.gridOptionsService.get("processPivotResultColGroupDef");if(!t&&!i)return;const n=s=>{s.forEach(o=>{if(Ie(o.children)){const c=o;i&&i(c),n(c.children)}else t&&t(o)})};e&&n(e)}updateGridColumns(){const e=this.gridBalancedTree;if(this.gridColsArePrimary?this.lastPrimaryOrder=this.gridColumns:this.lastSecondaryOrder=this.gridColumns,this.createGroupAutoColumnsIfNeeded()){const n=Sc(this.groupAutoColumns.map(s=>[s,!0]));this.lastPrimaryOrder&&(this.lastPrimaryOrder=this.lastPrimaryOrder.filter(s=>!n.has(s)),this.lastPrimaryOrder=[...this.groupAutoColumns,...this.lastPrimaryOrder]),this.lastSecondaryOrder&&(this.lastSecondaryOrder=this.lastSecondaryOrder.filter(s=>!n.has(s)),this.lastSecondaryOrder=[...this.groupAutoColumns,...this.lastSecondaryOrder])}let i;if(this.secondaryColumns&&this.secondaryBalancedTree){const n=this.secondaryColumns.some(s=>void 0!==this.gridColumnsMap[s.getColId()]);this.gridBalancedTree=this.secondaryBalancedTree.slice(),this.gridHeaderRowCount=this.secondaryHeaderRowCount,this.gridColumns=this.secondaryColumns.slice(),this.gridColsArePrimary=!1,n&&(i=this.lastSecondaryOrder)}else this.primaryColumns&&(this.gridBalancedTree=this.primaryColumnTree.slice(),this.gridHeaderRowCount=this.primaryHeaderRowCount,this.gridColumns=this.primaryColumns.slice(),this.gridColsArePrimary=!0,i=this.lastPrimaryOrder);this.addAutoGroupToGridColumns(),this.orderGridColsLike(i),this.gridColumns=this.placeLockedColumns(this.gridColumns),this.calculateColumnsForGroupDisplay(),this.refreshQuickFilterColumns(),this.clearDisplayedAndViewportColumns(),this.colSpanActive=this.checkColSpanActiveInCols(this.gridColumns),this.gridColumnsMap={},this.gridColumns.forEach(n=>this.gridColumnsMap[n.getId()]=n),this.setAutoHeightActive(),yc(e,this.gridBalancedTree)||this.eventService.dispatchEvent({type:G.EVENT_GRID_COLUMNS_CHANGED})}setAutoHeightActive(){this.autoHeightActive=this.gridColumns.filter(e=>e.isAutoHeight()).length>0,this.autoHeightActive&&(this.autoHeightActiveAtLeastOnce=!0,this.gridOptionsService.isRowModelType("clientSide")||this.gridOptionsService.isRowModelType("serverSide")||st("autoHeight columns only work with Client Side Row Model and Server Side Row Model."))}orderGridColsLike(e){if(gt(e))return;const t=Sc(e.map((u,p)=>[u,p]));let i=!0;if(this.gridColumns.forEach(u=>{t.has(u)&&(i=!1)}),i)return;const n=Sc(this.gridColumns.map(u=>[u,!0])),s=e.filter(u=>n.has(u)),o=Sc(s.map(u=>[u,!0])),a=this.gridColumns.filter(u=>!o.has(u)),c=s.slice();a.forEach(u=>{let p=u.getOriginalParent();if(!p)return void c.push(u);const g=[];for(;!g.length&&p;)p.getLeafColumns().forEach(_=>{const E=c.indexOf(_)>=0,D=g.indexOf(_)<0;E&&D&&g.push(_)}),p=p.getOriginalParent();if(!g.length)return void c.push(u);const m=g.map(b=>c.indexOf(b)),y=Math.max(...m);yf(c,u,y+1)}),this.gridColumns=c}isPrimaryColumnGroupsPresent(){return this.primaryHeaderRowCount>1}refreshQuickFilterColumns(){var e;let t=null!==(e=this.isPivotMode()?this.secondaryColumns:this.primaryColumns)&&void 0!==e?e:[];this.groupAutoColumns&&(t=t.concat(this.groupAutoColumns)),this.columnsForQuickFilter=this.gridOptionsService.get("includeHiddenColumnsInQuickFilter")?t:t.filter(i=>i.isVisible()||i.isRowGroupActive())}placeLockedColumns(e){const t=[],i=[],n=[];return e.forEach(s=>{const o=s.getColDef().lockPosition;"right"===o?n.push(s):"left"===o||!0===o?t.push(s):i.push(s)}),[...t,...i,...n]}addAutoGroupToGridColumns(){if(gt(this.groupAutoColumns))return this.destroyOldColumns(this.groupAutoColsBalancedTree),void(this.groupAutoColsBalancedTree=null);this.gridColumns=this.groupAutoColumns?this.groupAutoColumns.concat(this.gridColumns):this.gridColumns;const e=this.columnFactory.createForAutoGroups(this.groupAutoColumns,this.gridBalancedTree);this.destroyOldColumns(this.groupAutoColsBalancedTree,e),this.groupAutoColsBalancedTree=e,this.gridBalancedTree=e.concat(this.gridBalancedTree)}clearDisplayedAndViewportColumns(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={},this.displayedColumnsLeft=[],this.displayedColumnsRight=[],this.displayedColumnsCenter=[],this.displayedColumns=[],this.ariaOrderColumns=[],this.viewportColumns=[],this.headerViewportColumns=[],this.viewportColumnsHash=""}updateGroupsAndDisplayedColumns(e){this.updateOpenClosedVisibilityInColumnGroups(),this.deriveDisplayedColumns(e),this.refreshFlexedColumns(),this.extractViewport(),this.updateBodyWidths(),this.eventService.dispatchEvent({type:G.EVENT_DISPLAYED_COLUMNS_CHANGED})}deriveDisplayedColumns(e){this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeLeft,this.displayedColumnsLeft),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeCentre,this.displayedColumnsCenter),this.derivedDisplayedColumnsFromDisplayedTree(this.displayedTreeRight,this.displayedColumnsRight),this.joinColumnsAriaOrder(),this.joinDisplayedColumns(),this.setLeftValues(e),this.displayedAutoHeightCols=this.displayedColumns.filter(t=>t.isAutoHeight())}isAutoRowHeightActive(){return this.autoHeightActive}wasAutoRowHeightEverActive(){return this.autoHeightActiveAtLeastOnce}joinColumnsAriaOrder(){const e=this.getAllGridColumns(),t=[],i=[],n=[];for(const s of e){const o=s.getPinned();o?!0===o||"left"===o?t.push(s):n.push(s):i.push(s)}this.ariaOrderColumns=t.concat(i).concat(n)}joinDisplayedColumns(){this.displayedColumns=this.gridOptionsService.get("enableRtl")?this.displayedColumnsRight.concat(this.displayedColumnsCenter).concat(this.displayedColumnsLeft):this.displayedColumnsLeft.concat(this.displayedColumnsCenter).concat(this.displayedColumnsRight)}setLeftValues(e){this.setLeftValuesOfColumns(e),this.setLeftValuesOfGroups()}setLeftValuesOfColumns(e){if(!this.primaryColumns)return;const t=this.getPrimaryAndSecondaryAndAutoColumns().slice(0),i=this.gridOptionsService.get("enableRtl");[this.displayedColumnsLeft,this.displayedColumnsRight,this.displayedColumnsCenter].forEach(n=>{if(i){let s=this.getWidthOfColsInList(n);n.forEach(o=>{s-=o.getActualWidth(),o.setLeft(s,e)})}else{let s=0;n.forEach(o=>{o.setLeft(s,e),s+=o.getActualWidth()})}tv(t,n)}),t.forEach(n=>{n.setLeft(null,e)})}setLeftValuesOfGroups(){[this.displayedTreeLeft,this.displayedTreeRight,this.displayedTreeCentre].forEach(e=>{e.forEach(t=>{t instanceof di&&t.checkLeft()})})}derivedDisplayedColumnsFromDisplayedTree(e,t){t.length=0,this.columnUtils.depthFirstDisplayedColumnTreeSearch(e,i=>{i instanceof ot&&t.push(i)})}isColumnVirtualisationSuppressed(){return this.suppressColumnVirtualisation||0===this.viewportRight}extractViewportColumns(){this.isColumnVirtualisationSuppressed()?(this.viewportColumnsCenter=this.displayedColumnsCenter,this.headerViewportColumnsCenter=this.displayedColumnsCenter):(this.viewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInRowViewport.bind(this)),this.headerViewportColumnsCenter=this.displayedColumnsCenter.filter(this.isColumnInHeaderViewport.bind(this))),this.viewportColumns=this.viewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight),this.headerViewportColumns=this.headerViewportColumnsCenter.concat(this.displayedColumnsLeft).concat(this.displayedColumnsRight)}getVirtualHeaderGroupRow(e,t){let i;switch(e){case"left":i=this.viewportRowLeft[t];break;case"right":i=this.viewportRowRight[t];break;default:i=this.viewportRowCenter[t]}return gt(i)&&(i=[]),i}calculateHeaderRows(){this.viewportRowLeft={},this.viewportRowRight={},this.viewportRowCenter={};const e={};this.headerViewportColumns.forEach(i=>e[i.getId()]=!0);const t=(i,n,s)=>{let o=!1;for(let a=0;a<i.length;a++){const c=i[a];let u=!1;if(c instanceof ot)u=!0===e[c.getId()];else{const g=c.getDisplayedChildren();g&&(u=t(g,n,s+1))}u&&(o=!0,n[s]||(n[s]=[]),n[s].push(c))}return o};t(this.displayedTreeLeft,this.viewportRowLeft,0),t(this.displayedTreeRight,this.viewportRowRight,0),t(this.displayedTreeCentre,this.viewportRowCenter,0)}extractViewport(){this.extractViewportColumns();const t=this.viewportColumns.map(n=>`${n.getId()}-${n.getPinned()||"normal"}`).join("#"),i=this.viewportColumnsHash!==t;return i&&(this.viewportColumnsHash=t,this.calculateHeaderRows()),i}refreshFlexedColumns(e={}){var t;const i=e.source?e.source:"flex";if(null!=e.viewportWidth&&(this.flexViewportWidth=e.viewportWidth),!this.flexViewportWidth)return[];let n=-1;if(e.resizingCols){const y=new Set(e.resizingCols);let b=this.displayedColumnsCenter;for(let _=b.length-1;_>=0;_--)if(y.has(b[_])){n=_;break}}let s=0,o=[],a=0,c=0;for(let y=0;y<this.displayedColumnsCenter.length;y++)this.displayedColumnsCenter[y].getFlex()&&y>n?(o.push(this.displayedColumnsCenter[y]),c+=this.displayedColumnsCenter[y].getFlex(),a+=null!==(t=this.displayedColumnsCenter[y].getMinWidth())&&void 0!==t?t:0):s+=this.displayedColumnsCenter[y].getActualWidth();if(!o.length)return[];let u=[];s+a>this.flexViewportWidth&&(o.forEach(y=>{var b;return y.setActualWidth(null!==(b=y.getMinWidth())&&void 0!==b?b:0,i)}),u=o,o=[]);const p=[];let g;e:for(;;){g=this.flexViewportWidth-s;const y=g/c;for(let b=0;b<o.length;b++){const _=o[b],E=y*_.getFlex();let D=0;const R=_.getMinWidth(),O=_.getMaxWidth();if(Ie(R)&&E<R?D=R:Ie(O)&&E>O&&(D=O),D){_.setActualWidth(D,i),Cf(o,_),c-=_.getFlex(),u.push(_),s+=_.getActualWidth();continue e}p[b]=Math.round(E)}break}let m=g;return o.forEach((y,b)=>{y.setActualWidth(Math.min(p[b],m),i),u.push(y),m-=p[b]}),e.skipSetLeft||this.setLeftValues(i),e.updateBodyWidths&&this.updateBodyWidths(),e.fireResizedEvent&&this.dispatchColumnResizedEvent(u,!0,i,o),o}sizeColumnsToFit(e,t="sizeColumnsToFit",i,n){var s,o,a,c,u;if(this.shouldQueueResizeOperations)return void this.resizeOperationQueue.push(()=>this.sizeColumnsToFit(e,t,i,n));const p={};n&&(null===(s=n?.columnLimits)||void 0===s||s.forEach(R=>{var{key:O}=R,L=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]])}return t}(R,["key"]);p["string"==typeof O?O:O.getColId()]=L}));const g=this.getAllDisplayedColumns(),m=e===this.getWidthOfColsInList(g);if(e<=0||!g.length||m)return;const y=[],b=[];g.forEach(R=>{!0===R.getColDef().suppressSizeToFit?b.push(R):y.push(R)});const _=y.slice(0);let E=!1;const D=R=>{vr(y,R),b.push(R)};for(y.forEach(R=>{var O,L;R.resetActualWidth(t);const k=p?.[R.getId()],U=null!==(O=k?.minWidth)&&void 0!==O?O:n?.defaultMinWidth,j=null!==(L=k?.maxWidth)&&void 0!==L?L:n?.defaultMaxWidth,q=R.getActualWidth();"number"==typeof U&&q<U?R.setActualWidth(U,t,!0):"number"==typeof j&&q>j&&R.setActualWidth(j,t,!0)});!E;){E=!0;const R=e-this.getWidthOfColsInList(b);if(R<=0)y.forEach(O=>{var L,k;const U=null!==(k=null===(L=p?.[O.getId()])||void 0===L?void 0:L.minWidth)&&void 0!==k?k:n?.defaultMinWidth;"number"!=typeof U?O.setMinimum(t):O.setActualWidth(U,t,!0)});else{const O=R/this.getWidthOfColsInList(y);let L=R;for(let k=y.length-1;k>=0;k--){const U=y[k],j=p?.[U.getId()],q=null!==(o=j?.minWidth)&&void 0!==o?o:n?.defaultMinWidth,J=null!==(a=j?.maxWidth)&&void 0!==a?a:n?.defaultMaxWidth,me=null!==(c=U.getMinWidth())&&void 0!==c?c:0,ye=null!==(u=U.getMaxWidth())&&void 0!==u?u:Number.MAX_VALUE,Ae="number"==typeof q&&q>me?q:U.getMinWidth(),Pe="number"==typeof J&&J<ye?J:U.getMaxWidth();let Le=Math.round(U.getActualWidth()*O);Ie(Ae)&&Le<Ae?(Le=Ae,D(U),E=!1):Ie(Pe)&&Le>Pe?(Le=Pe,D(U),E=!1):0===k&&(Le=L),U.setActualWidth(Le,t,!0),L-=Le}}}_.forEach(R=>{R.fireColumnWidthChangedEvent(t)}),this.setLeftValues(t),this.updateBodyWidths(),!i&&this.dispatchColumnResizedEvent(_,!0,t)}buildDisplayedTrees(e){const t=[],i=[],n=[];e.forEach(o=>{switch(o.getPinned()){case"left":t.push(o);break;case"right":i.push(o);break;default:n.push(o)}});const s=new o1;this.displayedTreeLeft=this.displayedGroupCreator.createDisplayedGroups(t,s,"left",this.displayedTreeLeft),this.displayedTreeRight=this.displayedGroupCreator.createDisplayedGroups(i,s,"right",this.displayedTreeRight),this.displayedTreeCentre=this.displayedGroupCreator.createDisplayedGroups(n,s,null,this.displayedTreeCentre),this.updateDisplayedMap()}updateDisplayedMap(){this.displayedColumnsAndGroupsMap={};const e=t=>{this.displayedColumnsAndGroupsMap[t.getUniqueId()]=t};this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeCentre,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeLeft,e),this.columnUtils.depthFirstAllColumnTreeSearch(this.displayedTreeRight,e)}isDisplayed(e){return this.displayedColumnsAndGroupsMap[e.getUniqueId()]===e}updateOpenClosedVisibilityInColumnGroups(){const e=this.getAllDisplayedTrees();this.columnUtils.depthFirstAllColumnTreeSearch(e,t=>{t instanceof di&&t.calculateDisplayedColumns()})}getGroupAutoColumns(){return this.groupAutoColumns}createGroupAutoColumnsIfNeeded(){const e=this.forceRecreateAutoGroups;if(this.forceRecreateAutoGroups=!1,!this.autoGroupsNeedBuilding)return!1;this.autoGroupsNeedBuilding=!1;const t=this.gridOptionsService.isGroupUseEntireRow(this.pivotMode),i=this.pivotMode?this.gridOptionsService.get("pivotSuppressAutoColumn"):this.isGroupSuppressAutoColumn();if(!(this.rowGroupColumns.length>0||this.gridOptionsService.get("treeData"))||i||t)this.groupAutoColumns=null;else{const o=this.autoGroupColService.createAutoGroupColumns(this.rowGroupColumns);if(!this.autoColsEqual(o,this.groupAutoColumns)||e)return this.groupAutoColumns=o,!0}return!1}isGroupSuppressAutoColumn(){return"custom"===this.gridOptionsService.get("groupDisplayType")||"custom"===this.gridOptionsService.get("treeDataDisplayType")}autoColsEqual(e,t){return yc(e,t,(i,n)=>i.getColId()===n.getColId())}getWidthOfColsInList(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getFirstDisplayedColumn(){const e=this.gridOptionsService.get("enableRtl"),t=["getDisplayedLeftColumns","getDisplayedCenterColumns","getDisplayedRightColumns"];e&&t.reverse();for(let i=0;i<t.length;i++){const n=this[t[i]]();if(n.length)return e?Xt(n):n[0]}return null}setColumnHeaderHeight(e,t){e.setAutoHeaderHeight(t)&&this.eventService.dispatchEvent({type:G.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,column:e,columns:[e],source:"autosizeColumnHeaderHeight"})}getColumnGroupHeaderRowHeight(){return this.isPivotMode()?this.getPivotGroupHeaderHeight():this.getGroupHeaderHeight()}getColumnHeaderRowHeight(){const e=this.isPivotMode()?this.getPivotHeaderHeight():this.getHeaderHeight(),t=this.getAllDisplayedColumns().filter(i=>i.isAutoHeaderHeight()).map(i=>i.getAutoHeaderHeight()||0);return Math.max(e,...t)}getHeaderHeight(){var e;return null!==(e=this.gridOptionsService.get("headerHeight"))&&void 0!==e?e:this.environment.getFromTheme(25,"headerHeight")}getFloatingFiltersHeight(){var e;return null!==(e=this.gridOptionsService.get("floatingFiltersHeight"))&&void 0!==e?e:this.getHeaderHeight()}getGroupHeaderHeight(){var e;return null!==(e=this.gridOptionsService.get("groupHeaderHeight"))&&void 0!==e?e:this.getHeaderHeight()}getPivotHeaderHeight(){var e;return null!==(e=this.gridOptionsService.get("pivotHeaderHeight"))&&void 0!==e?e:this.getHeaderHeight()}getPivotGroupHeaderHeight(){var e;return null!==(e=this.gridOptionsService.get("pivotGroupHeaderHeight"))&&void 0!==e?e:this.getGroupHeaderHeight()}queueResizeOperations(){this.shouldQueueResizeOperations=!0}processResizeOperations(){this.shouldQueueResizeOperations=!1,this.resizeOperationQueue.forEach(e=>e()),this.resizeOperationQueue=[]}resetColumnDefIntoColumn(e,t){const i=e.getUserProvidedColDef();if(!i)return!1;const n=this.columnFactory.addColumnDefaultAndTypes(i,e.getColId());return e.setColDef(n,i,t),!0}isColumnGroupingLocked(e){const t=this.gridOptionsService.get("groupLockGroupColumns");return!(!e.isRowGroupActive()||0===t)&&(-1===t||t>this.rowGroupColumns.findIndex(n=>n.getColId()===e.getColId()))}generateColumnStateForRowGroupAndPivotIndexes(e,t){let i={};const n=(s,o,a,c,u,p)=>{if(!o.length||!this.primaryColumns)return[];const g=Object.keys(s),m=new Set(g),y=new Set(g),b=new Set(o.map(U=>{const j=U.getColId();return y.delete(j),j}).concat(g)),_=[],E={};let D=0;for(let U=0;U<this.primaryColumns.length;U++){const j=this.primaryColumns[U].getColId();b.has(j)&&(_.push(j),E[j]=D++)}let R=1e3,O=!1,L=0;const k=U=>{const j=E[U];for(let q=L;q<j;q++){const J=_[q];y.has(J)&&(s[J][u]=R++,y.delete(J))}L=j};o.forEach(U=>{const j=U.getColId();if(m.has(j))k(j),s[j][u]=R++;else{const q=U.getColDef();(null===q[u]||void 0===q[u]&&null==q[p])&&(O||(q[a]||void 0===q[a]&&q[c]?k(j):(y.forEach(ye=>{s[ye][u]=R+E[ye]}),R+=_.length,O=!0)),i[j]||(i[j]={colId:j}),i[j][u]=R++)}})};return n(e,this.rowGroupColumns,"rowGroup","initialRowGroup","rowGroupIndex","initialRowGroupIndex"),n(t,this.pivotColumns,"pivot","initialPivot","pivotIndex","initialPivotIndex"),Object.values(i)}onColumnsReady(){const e=this.gridOptionsService.get("autoSizeStrategy");if(!e)return;const{type:t}=e;setTimeout(()=>{if("fitGridWidth"===t){const{columnLimits:i,defaultMinWidth:n,defaultMaxWidth:s}=e,o=i?.map(({colId:a,minWidth:c,maxWidth:u})=>({key:a,minWidth:c,maxWidth:u}));this.ctrlsService.getGridBodyCtrl().sizeColumnsToFit({defaultMinWidth:n,defaultMaxWidth:s,columnLimits:o})}else"fitProvidedWidth"===t&&this.sizeColumnsToFit(e.width,"sizeColumnsToFit")})}onFirstDataRendered(){const e=this.gridOptionsService.get("autoSizeStrategy");if("fitCellContents"!==e?.type)return;const{colIds:t,skipHeader:i}=e;setTimeout(()=>{t?this.autoSizeColumns({columns:t,skipHeader:i,source:"autosizeColumns"}):this.autoSizeAllColumns("autosizeColumns",i)})}};function xd(r){return"gridOptionsUpdated"===r?"gridOptionsChanged":r}xs([P("expressionService")],Pn.prototype,"expressionService",void 0),xs([P("columnFactory")],Pn.prototype,"columnFactory",void 0),xs([P("displayedGroupCreator")],Pn.prototype,"displayedGroupCreator",void 0),xs([P("ctrlsService")],Pn.prototype,"ctrlsService",void 0),xs([P("autoWidthCalculator")],Pn.prototype,"autoWidthCalculator",void 0),xs([P("columnUtils")],Pn.prototype,"columnUtils",void 0),xs([P("columnAnimationService")],Pn.prototype,"columnAnimationService",void 0),xs([P("autoGroupColService")],Pn.prototype,"autoGroupColService",void 0),xs([Pt("aggFuncService")],Pn.prototype,"aggFuncService",void 0),xs([Pt("valueCache")],Pn.prototype,"valueCache",void 0),xs([Pt("animationFrameService")],Pn.prototype,"animationFrameService",void 0),xs([P("sortController")],Pn.prototype,"sortController",void 0),xs([P("columnDefFactory")],Pn.prototype,"columnDefFactory",void 0),xs([Se],Pn.prototype,"init",null),xs([Js],Pn.prototype,"destroyColumns",null),xs([function(r,e){return function(t,i){e(t,i,0)}}(0,Cl("loggerFactory"))],Pn.prototype,"setBeans",null),Pn=xs([He("columnModel")],Pn);let tE=class extends Ee{calculateColMinWidth(e){return null!=e.minWidth?e.minWidth:this.environment.getMinColWidth()}calculateColMaxWidth(e){return null!=e.maxWidth?e.maxWidth:Number.MAX_SAFE_INTEGER}calculateColInitialWidth(e){const t=this.calculateColMinWidth(e),i=this.calculateColMaxWidth(e);let n;const s=Rd(e.width),o=Rd(e.initialWidth);return n=null!=s?s:null!=o?o:200,Math.max(Math.min(n,i),t)}getOriginalPathForColumn(e,t){const i=[];let n=!1;const s=(o,a)=>{for(let c=0;c<o.length;c++){if(n)return;const u=o[c];u instanceof Wt?(s(u.getChildren(),a+1),i[a]=u):u===e&&(n=!0)}};return s(t,0),n?i:null}depthFirstOriginalTreeSearch(e,t,i){!t||t.forEach(n=>{n instanceof Wt&&this.depthFirstOriginalTreeSearch(n,n.getChildren(),i),i(n,e)})}depthFirstAllColumnTreeSearch(e,t){!e||e.forEach(i=>{i instanceof di&&this.depthFirstAllColumnTreeSearch(i.getChildren(),t),t(i)})}depthFirstDisplayedColumnTreeSearch(e,t){!e||e.forEach(i=>{i instanceof di&&this.depthFirstDisplayedColumnTreeSearch(i.getDisplayedChildren(),t),t(i)})}};tE=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He("columnUtils")],tE);let dS=class extends Ee{createDisplayedGroups(e,t,i,n){const s=this.mapOldGroupsById(n),o=[];let a=e;for(;a.length;){const c=a;a=[];let u=0;const p=g=>{const m=u;u=g;const y=c[m],_=(y instanceof di?y.getProvidedColumnGroup():y).getOriginalParent();if(null==_){for(let D=m;D<g;D++)o.push(c[D]);return}const E=this.createColumnGroup(_,t,s,i);for(let D=m;D<g;D++)E.addChild(c[D]);a.push(E)};for(let g=1;g<c.length;g++){const m=c[g],b=(m instanceof di?m.getProvidedColumnGroup():m).getOriginalParent(),_=c[u];b!==(_ instanceof di?_.getProvidedColumnGroup():_).getOriginalParent()&&p(g)}u<c.length&&p(c.length)}return this.setupParentsIntoColumns(o,null),o}createColumnGroup(e,t,i,n){const s=e.getGroupId(),o=t.getInstanceIdForKey(s);let c=i[di.createUniqueId(s,o)];return c&&c.getProvidedColumnGroup()!==e&&(c=null),Ie(c)?c.reset():(c=new di(e,s,o,n),this.context.createBean(c)),c}mapOldGroupsById(e){const t={},i=n=>{n.forEach(s=>{if(s instanceof di){const o=s;t[s.getUniqueId()]=o,i(o.getChildren())}})};return e&&i(e),t}setupParentsIntoColumns(e,t){e.forEach(i=>{if(i.setParent(t),i instanceof di){const n=i;this.setupParentsIntoColumns(n.getChildren(),n)}})}};dS=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He("displayedGroupCreator")],dS);const jx={enableBrowserTooltips:!0,tooltipTrigger:!0,tooltipMouseTrack:!0,tooltipInteraction:!0,defaultColGroupDef:!0,suppressAutoSize:!0,skipHeaderOnAutoSize:!0,autoSizeStrategy:!0,components:!0,stopEditingWhenCellsLoseFocus:!0,undoRedoCellEditing:!0,undoRedoCellEditingLimit:!0,excelStyles:!0,cacheQuickFilter:!0,excludeHiddenColumnsFromQuickFilter:!0,advancedFilterModel:!0,customChartThemes:!0,chartThemeOverrides:!0,enableChartToolPanelsButton:!0,suppressChartToolPanelsButton:!0,chartToolPanelsDef:!0,loadingCellRendererSelector:!0,localeText:!0,keepDetailRows:!0,keepDetailRowsCount:!0,detailRowHeight:!0,detailRowAutoHeight:!0,tabIndex:!0,valueCache:!0,valueCacheNeverExpires:!0,enableCellExpressions:!0,suppressParentsInRowNodes:!0,suppressTouch:!0,suppressAsyncEvents:!0,suppressBrowserResizeObserver:!0,suppressPropertyNamesCheck:!0,debug:!0,loadingOverlayComponent:!0,suppressLoadingOverlay:!0,noRowsOverlayComponent:!0,paginationPageSizeSelector:!0,paginateChildRows:!0,pivotPanelShow:!0,pivotSuppressAutoColumn:!0,suppressExpandablePivotGroups:!0,aggFuncs:!0,suppressAggFuncInHeader:!0,suppressAggAtRootLevel:!0,removePivotHeaderRowWhenSingleValueColumn:!0,allowShowChangeAfterFilter:!0,ensureDomOrder:!0,enableRtl:!0,suppressColumnVirtualisation:!0,suppressMaxRenderedRowRestriction:!0,suppressRowVirtualisation:!0,rowDragText:!0,suppressGroupMaintainValueType:!0,groupLockGroupColumns:!0,rowGroupPanelSuppressSort:!0,suppressGroupRowsSticky:!0,rowModelType:!0,cacheOverflowSize:!0,infiniteInitialRowCount:!0,serverSideInitialRowCount:!0,suppressServerSideInfiniteScroll:!0,maxBlocksInCache:!0,maxConcurrentDatasourceRequests:!0,blockLoadDebounceMillis:!0,serverSideOnlyRefreshFilteredGroups:!0,serverSidePivotResultFieldSeparator:!0,viewportRowModelPageSize:!0,viewportRowModelBufferSize:!0,debounceVerticalScrollbar:!0,suppressAnimationFrame:!0,suppressPreventDefaultOnMouseWheel:!0,scrollbarWidth:!0,icons:!0,suppressRowTransform:!0,gridId:!0,functionsPassive:!0,enableGroupEdit:!0,initialState:!0,processUnpinnedColumns:!0,createChartContainer:!0,getLocaleText:!0,getRowId:!0,reactiveCustomComponents:!0,columnMenu:!0};class Wi{}var Ps;Wi.STRING_PROPERTIES=["rowSelection","overlayLoadingTemplate","overlayNoRowsTemplate","gridId","quickFilterText","rowModelType","editType","domLayout","clipboardDelimiter","rowGroupPanelShow","multiSortKey","pivotColumnGroupTotals","pivotRowTotals","pivotPanelShow","fillHandleDirection","groupDisplayType","treeDataDisplayType","colResizeDefault","tooltipTrigger","serverSidePivotResultFieldSeparator","columnMenu"],Wi.OBJECT_PROPERTIES=["components","rowStyle","context","autoGroupColumnDef","localeText","icons","datasource","serverSideDatasource","viewportDatasource","groupRowRendererParams","aggFuncs","fullWidthCellRendererParams","defaultColGroupDef","defaultColDef","defaultCsvExportParams","defaultExcelExportParams","columnTypes","rowClassRules","detailCellRendererParams","loadingCellRendererParams","loadingOverlayComponentParams","noRowsOverlayComponentParams","popupParent","statusBar","sideBar","chartThemeOverrides","customChartThemes","chartToolPanelsDef","dataTypeDefinitions","advancedFilterModel","advancedFilterParent","advancedFilterBuilderParams","initialState","autoSizeStrategy"],Wi.ARRAY_PROPERTIES=["sortingOrder","alignedGrids","rowData","columnDefs","excelStyles","pinnedTopRowData","pinnedBottomRowData","chartThemes","rowClass","paginationPageSizeSelector"],Wi.NUMBER_PROPERTIES=["rowHeight","detailRowHeight","rowBuffer","headerHeight","groupHeaderHeight","groupLockGroupColumns","floatingFiltersHeight","pivotHeaderHeight","pivotGroupHeaderHeight","groupDefaultExpanded","pivotDefaultExpanded","viewportRowModelPageSize","viewportRowModelBufferSize","autoSizePadding","maxBlocksInCache","maxConcurrentDatasourceRequests","tooltipShowDelay","tooltipHideDelay","cacheOverflowSize","paginationPageSize","cacheBlockSize","infiniteInitialRowCount","serverSideInitialRowCount","scrollbarWidth","asyncTransactionWaitMillis","blockLoadDebounceMillis","keepDetailRowsCount","undoRedoCellEditingLimit","cellFlashDelay","cellFadeDelay","cellFlashDuration","cellFadeDuration","tabIndex"],Wi.BOOLEAN_PROPERTIES=["suppressMakeColumnVisibleAfterUnGroup","suppressRowClickSelection","suppressCellFocus","suppressHeaderFocus","suppressHorizontalScroll","groupSelectsChildren","alwaysShowHorizontalScroll","alwaysShowVerticalScroll","debug","enableBrowserTooltips","enableCellExpressions","groupIncludeTotalFooter","groupSuppressBlankHeader","suppressMenuHide","suppressRowDeselection","unSortIcon","suppressMultiSort","alwaysMultiSort","singleClickEdit","suppressLoadingOverlay","suppressNoRowsOverlay","suppressAutoSize","skipHeaderOnAutoSize","suppressParentsInRowNodes","suppressColumnMoveAnimation","suppressMovableColumns","suppressFieldDotNotation","enableRangeSelection","enableRangeHandle","enableFillHandle","suppressClearOnFillReduction","deltaSort","suppressTouch","suppressAsyncEvents","allowContextMenuWithControlKey","suppressContextMenu","enableCellChangeFlash","suppressDragLeaveHidesColumns","suppressRowGroupHidesColumns","suppressMiddleClickScrolls","suppressPreventDefaultOnMouseWheel","suppressCopyRowsToClipboard","copyHeadersToClipboard","copyGroupHeadersToClipboard","pivotMode","suppressAggFuncInHeader","suppressColumnVirtualisation","alwaysAggregateAtRootLevel","suppressAggAtRootLevel","suppressFocusAfterRefresh","functionsPassive","functionsReadOnly","animateRows","groupSelectsFiltered","groupRemoveSingleChildren","groupRemoveLowestSingleChildren","enableRtl","suppressClickEdit","rowDragEntireRow","rowDragManaged","suppressRowDrag","suppressMoveWhenRowDragging","rowDragMultiRow","enableGroupEdit","embedFullWidthRows","suppressPaginationPanel","groupHideOpenParents","groupAllowUnbalanced","pagination","paginationAutoPageSize","suppressScrollOnNewData","suppressScrollWhenPopupsAreOpen","purgeClosedRowNodes","cacheQuickFilter","includeHiddenColumnsInQuickFilter","excludeHiddenColumnsFromQuickFilter","ensureDomOrder","accentedSort","suppressChangeDetection","valueCache","valueCacheNeverExpires","aggregateOnlyChangedColumns","suppressAnimationFrame","suppressExcelExport","suppressCsvExport","includeHiddenColumnsInAdvancedFilter","suppressMultiRangeSelection","enterMovesDown","enterMovesDownAfterEdit","enterNavigatesVerticallyAfterEdit","enterNavigatesVertically","suppressPropertyNamesCheck","rowMultiSelectWithClick","suppressRowHoverHighlight","suppressRowTransform","suppressClipboardPaste","suppressLastEmptyLineOnPaste","enableCharts","enableChartToolPanelsButton","suppressChartToolPanelsButton","suppressMaintainUnsortedOrder","enableCellTextSelection","suppressBrowserResizeObserver","suppressMaxRenderedRowRestriction","excludeChildrenWhenTreeDataFiltering","tooltipMouseTrack","tooltipInteraction","keepDetailRows","paginateChildRows","preventDefaultOnContextMenu","undoRedoCellEditing","allowDragFromColumnsToolPanel","pivotSuppressAutoColumn","suppressExpandablePivotGroups","debounceVerticalScrollbar","detailRowAutoHeight","serverSideFilterAllLevels","serverSideSortAllLevels","serverSideEnableClientSideSort","serverSideOnlyRefreshFilteredGroups","serverSideSortOnServer","serverSideFilterOnServer","suppressAggFilteredOnly","showOpenedGroup","suppressClipboardApi","suppressModelUpdateAfterUpdateTransaction","stopEditingWhenCellsLoseFocus","maintainColumnOrder","groupMaintainOrder","columnHoverHighlight","readOnlyEdit","suppressRowVirtualisation","enableCellEditingOnBackspace","resetRowDataOnUpdate","removePivotHeaderRowWhenSingleValueColumn","suppressCopySingleCellRanges","suppressGroupRowsSticky","suppressCutToClipboard","suppressServerSideInfiniteScroll","rowGroupPanelSuppressSort","allowShowChangeAfterFilter","enableAdvancedFilter","masterDetail","treeData","suppressGroupMaintainValueType","reactiveCustomComponents"],Wi.FUNCTIONAL_PROPERTIES=["doesExternalFilterPass","processPivotResultColDef","processPivotResultColGroupDef","getBusinessKeyForNode","isRowSelectable","rowDragText","groupRowRenderer","fullWidthCellRenderer","loadingCellRenderer","loadingOverlayComponent","noRowsOverlayComponent","detailCellRenderer","quickFilterParser","quickFilterMatcher"],Wi.CALLBACK_PROPERTIES=["getLocaleText","isExternalFilterPresent","getRowHeight","getRowClass","getRowStyle","getContextMenuItems","getMainMenuItems","processRowPostCreate","processCellForClipboard","getGroupRowAgg","isFullWidthRow","sendToClipboard","navigateToNextHeader","tabToNextHeader","navigateToNextCell","tabToNextCell","processCellFromClipboard","getDocument","postProcessPopup","getChildCount","getDataPath","isRowMaster","postSortRows","processHeaderForClipboard","processUnpinnedColumns","processGroupHeaderForClipboard","paginationNumberFormatter","processDataFromClipboard","getServerSideGroupKey","isServerSideGroup","createChartContainer","getChartToolbarItems","fillOperation","isApplyServerSideTransaction","getServerSideGroupLevelParams","isServerSideGroupOpenByDefault","isGroupOpenByDefault","initialGroupOrderComparator","groupIncludeFooter","loadingCellRendererSelector","getRowId","groupAggFiltering"],Wi.FUNCTION_PROPERTIES=[...Wi.FUNCTIONAL_PROPERTIES,...Wi.CALLBACK_PROPERTIES],Wi.ALL_PROPERTIES=[...Wi.ARRAY_PROPERTIES,...Wi.OBJECT_PROPERTIES,...Wi.STRING_PROPERTIES,...Wi.NUMBER_PROPERTIES,...Wi.FUNCTION_PROPERTIES,...Wi.BOOLEAN_PROPERTIES];class xi{static getCallbackForEvent(e){return!e||e.length<2?e:"on"+e[0].toUpperCase()+e.substring(1)}static getGridOptionKeys(){return this.ALL_PROPERTIES_AND_CALLBACKS}static combineAttributesAndGridOptions(e,t){"object"!=typeof e&&(e={});const i=Object.assign({},e);return xi.getGridOptionKeys().forEach(s=>{const o=t[s];typeof o<"u"&&o!==xi.VUE_OMITTED_PROPERTY&&(i[s]=o)}),i}static processOnChange(e,t){if(!e)return;const i={};let n=!1;if(Object.keys(e).filter(o=>xi.ALL_PROPERTIES_AND_CALLBACKS_SET.has(o)).forEach(o=>{i[o]=e[o],n=!0}),!n)return;t.__internalUpdateGridOptions(i);const s={type:G.EVENT_COMPONENT_STATE_CHANGED};gr(i,(o,a)=>{s[o]=a}),t.dispatchEvent(s)}}Ps=xi,xi.EVENTS=ff(G),xi.VUE_OMITTED_PROPERTY="AG-VUE-OMITTED-PROPERTY",xi.EXCLUDED_INTERNAL_EVENTS=[G.EVENT_SCROLLBAR_WIDTH_CHANGED,G.EVENT_CHECKBOX_CHANGED,G.EVENT_HEIGHT_SCALE_CHANGED,G.EVENT_BODY_HEIGHT_CHANGED,G.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,G.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,G.EVENT_SCROLL_VISIBILITY_CHANGED,G.EVENT_COLUMN_HOVER_CHANGED,G.EVENT_FLASH_CELLS,G.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,G.EVENT_DISPLAYED_ROWS_CHANGED,G.EVENT_LEFT_PINNED_WIDTH_CHANGED,G.EVENT_RIGHT_PINNED_WIDTH_CHANGED,G.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,G.EVENT_POPUP_TO_FRONT,G.EVENT_STORE_UPDATED,G.EVENT_COLUMN_PANEL_ITEM_DRAG_START,G.EVENT_COLUMN_PANEL_ITEM_DRAG_END,G.EVENT_FILL_START,G.EVENT_FILL_END,G.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,G.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,G.EVENT_FULL_WIDTH_ROW_FOCUSED,G.EVENT_HEADER_HEIGHT_CHANGED,G.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,G.EVENT_CELL_FOCUS_CLEARED,G.EVENT_GRID_STYLES_CHANGED,G.EVENT_FILTER_DESTROYED,G.EVENT_ROW_DATA_UPDATE_STARTED,G.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,G.EVENT_DATA_TYPES_INFERRED,G.EVENT_FIELD_VALUE_CHANGED,G.EVENT_FIELD_PICKER_VALUE_SELECTED,G.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,G.EVENT_SUPPRESS_MENU_HIDE_CHANGED,G.EVENT_SUPPRESS_FIELD_DOT_NOTATION,G.EVENT_ROW_COUNT_READY,G.EVENT_SIDE_BAR_UPDATED],xi.PUBLIC_EVENTS=xi.EVENTS.filter(r=>!Go(xi.EXCLUDED_INTERNAL_EVENTS,r)),xi.EVENT_CALLBACKS=xi.EVENTS.map(r=>xi.getCallbackForEvent(r)),xi.STRING_PROPERTIES=Wi.STRING_PROPERTIES,xi.OBJECT_PROPERTIES=Wi.OBJECT_PROPERTIES,xi.ARRAY_PROPERTIES=Wi.ARRAY_PROPERTIES,xi.NUMBER_PROPERTIES=Wi.NUMBER_PROPERTIES,xi.BOOLEAN_PROPERTIES=Wi.BOOLEAN_PROPERTIES,xi.FUNCTION_PROPERTIES=Wi.FUNCTION_PROPERTIES,xi.ALL_PROPERTIES=Wi.ALL_PROPERTIES,xi.ALL_PROPERTIES_AND_CALLBACKS=[...Ps.ALL_PROPERTIES,...Ps.EVENT_CALLBACKS],xi.ALL_PROPERTIES_AND_CALLBACKS_SET=new Set(xi.ALL_PROPERTIES_AND_CALLBACKS);let vS,Df,CS,uv,uE,hE,yS,SS,av=class extends Ee{constructor(){super(...arguments),this.componentsMappedByName={}}setupComponents(e){e&&e.forEach(t=>this.addComponent(t))}addComponent(e){const i=e.componentName.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase().toUpperCase();this.componentsMappedByName[i]=e.componentClass}getComponentClass(e){return this.componentsMappedByName[e]}};function ji(r,e,t){null==t||"string"==typeof t&&""==t?uS(r,e):Qs(r,e,t)}function Qs(r,e,t){r.setAttribute(OR(e),t.toString())}function uS(r,e){r.removeAttribute(OR(e))}function OR(r){return`aria-${r}`}function In(r,e){e?r.setAttribute("role",e):r.removeAttribute("role")}function iE(r){let e;return e="asc"===r?"ascending":"desc"===r?"descending":"mixed"===r?"other":"none",e}function zx(r){return parseInt(r.getAttribute("aria-level"),10)}function nE(r){return parseInt(r.getAttribute("aria-posinset"),10)}function MR(r){return r.getAttribute("aria-label")}function bc(r,e){ji(r,"label",e)}function hS(r,e){ji(r,"labelledby",e)}function $x(r,e){ji(r,"describedby",e)}function lv(r,e){ji(r,"live",e)}function pS(r,e){ji(r,"atomic",e)}function xR(r,e){ji(r,"relevant",e)}function sE(r,e){ji(r,"level",e)}function rE(r,e){ji(r,"disabled",e)}function Pd(r,e){ji(r,"hidden",e)}function oE(r,e){ji(r,"activedescendant",e)}function _c(r,e){Qs(r,"expanded",e)}function fS(r){uS(r,"expanded")}function cv(r,e){Qs(r,"setsize",e)}function gS(r,e){Qs(r,"posinset",e)}function Kx(r,e){Qs(r,"multiselectable",e)}function yh(r,e){Qs(r,"rowcount",e)}function dv(r,e){Qs(r,"rowindex",e)}function aE(r,e){Qs(r,"colcount",e)}function lE(r,e){Qs(r,"colindex",e)}function mS(r,e){Qs(r,"colspan",e)}function PR(r,e){Qs(r,"sort",e)}function IR(r){uS(r,"sort")}function Ef(r,e){ji(r,"selected",e)}function Yx(r,e){Qs(r,"checked",void 0===e?"mixed":e)}function cE(r,e){ji(r,"controls",e.id),hS(e,r.id)}function dE(r,e){return void 0===e?r("ariaIndeterminate","indeterminate"):!0===e?r("ariaChecked","checked"):r("ariaUnchecked","unchecked")}function er(){return void 0===vS&&(vS=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)),vS}function bS(){if(void 0===Df)if(er()){const r=navigator.userAgent.match(/version\/(\d+)/i);r&&(Df=null!=r[1]?parseFloat(r[1]):0)}else Df=0;return Df}function hv(){if(void 0===CS){const r=window;CS=!!r.chrome&&(!!r.chrome.webstore||!!r.chrome.runtime)||/Chrome/.test(navigator.userAgent)&&/Google Inc/.test(navigator.vendor)}return CS}function pE(){return void 0===uv&&(uv=/(firefox)/i.test(navigator.userAgent)),uv}function FR(){return void 0===uE&&(uE=/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)),uE}function Vo(){return void 0===hE&&(hE=/iPad|iPhone|iPod/.test(navigator.platform)||"MacIntel"===navigator.platform&&navigator.maxTouchPoints>1),hE}function fE(){return!er()||bS()>=15}function pv(r){if(!r)return null;const e=r.tabIndex,t=r.getAttribute("tabIndex");return-1!==e||null!==t&&(""!==t||pE())?e.toString():null}function gE(){if(!document.body)return-1;let r=1e6;const e=navigator.userAgent.toLowerCase().match(/firefox/)?6e6:1e9,t=document.createElement("div");for(document.body.appendChild(t);;){const i=2*r;if(t.style.height=i+"px",i>e||t.clientHeight!==i)break;r=i}return document.body.removeChild(t),r}function mE(){var r,e,t;return null!==(e=null===(r=document.body)||void 0===r?void 0:r.clientWidth)&&void 0!==e?e:window.innerHeight||(null===(t=document.documentElement)||void 0===t?void 0:t.clientWidth)||-1}function _S(){var r,e,t;return null!==(e=null===(r=document.body)||void 0===r?void 0:r.clientHeight)&&void 0!==e?e:window.innerHeight||(null===(t=document.documentElement)||void 0===t?void 0:t.clientHeight)||-1}function vE(){return null==SS&&fv(),SS}function fv(){const r=document.body,e=document.createElement("div");e.style.width=e.style.height="100px",e.style.opacity="0",e.style.overflow="scroll",e.style.msOverflowStyle="scrollbar",e.style.position="absolute",r.appendChild(e);let t=e.offsetWidth-e.clientWidth;0===t&&0===e.clientWidth&&(t=null),e.parentNode&&e.parentNode.removeChild(e),null!=t&&(SS=t,yS=0===t)}function Tf(){return null==yS&&fv(),yS}function Sh(r,e){return r.toString().padStart(e,"0")}function wS(r,e){const t=[];for(let i=r;i<=e;i++)t.push(i);return t}function CE(r){return"string"==typeof r&&(r=parseInt(r,10)),"number"==typeof r?Math.floor(r):null}function yE(r,e){let t="";for(let i=0;i<e;i++)t+=String.fromCharCode(255&r),r>>>=8;return t}function gv(r,e,t){return"number"!=typeof r?"":SE(Math.round(100*r)/100,e,t)}function SE(r,e,t){return"number"!=typeof r?"":r.toString().replace(".",t).replace(/(\d)(?=(\d{3})+(?!\d))/g,`$1${e}`)}function NR(r){return null==r?null:r.reduce((e,t)=>e+t,0)}function Bo(r,e=!0,t="-"){if(!r)return null;let i=[r.getFullYear(),r.getMonth()+1,r.getDate()].map(n=>Sh(n,2)).join(t);return e&&(i+=" "+[r.getHours(),r.getMinutes(),r.getSeconds()].map(n=>Sh(n,2)).join(":")),i}av=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He("agStackComponentsRegistry")],av);const bE=r=>{if(r>3&&r<21)return"th";switch(r%10){case 1:return"st";case 2:return"nd";case 3:return"rd"}return"th"};function bh(r,e="YYYY-MM-DD"){const t=Sh(r.getFullYear(),4),i=["January","February","March","April","May","June","July","August","September","October","November","December"],n=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],s={YYYY:()=>t.slice(t.length-4,t.length),YY:()=>t.slice(t.length-2,t.length),Y:()=>`${r.getFullYear()}`,MMMM:()=>i[r.getMonth()],MMM:()=>i[r.getMonth()].slice(0,3),MM:()=>Sh(r.getMonth()+1,2),Mo:()=>`${r.getMonth()+1}${bE(r.getMonth()+1)}`,M:()=>`${r.getMonth()+1}`,Do:()=>`${r.getDate()}${bE(r.getDate())}`,DD:()=>Sh(r.getDate(),2),D:()=>`${r.getDate()}`,dddd:()=>n[r.getDay()],ddd:()=>n[r.getDay()].slice(0,3),dd:()=>n[r.getDay()].slice(0,2),do:()=>`${r.getDay()}${bE(r.getDay())}`,d:()=>`${r.getDay()}`},o=new RegExp(Object.keys(s).join("|"),"g");return e.replace(o,a=>a in s?s[a]():a)}function tr(r){if(!r)return null;const[e,t]=r.split(" ");if(!e)return null;const i=e.split("-").map(g=>parseInt(g,10));if(3!==i.filter(g=>!isNaN(g)).length)return null;const[n,s,o]=i,a=new Date(n,s-1,o);if(a.getFullYear()!==n||a.getMonth()!==s-1||a.getDate()!==o)return null;if(!t||"00:00:00"===t)return a;const[c,u,p]=t.split(":").map(g=>parseInt(g,10));return c>=0&&c<24&&a.setHours(c),u>=0&&u<60&&a.setMinutes(u),p>=0&&p<60&&a.setSeconds(p),a}let _h;function mv(r,e,t){const i=r.parentElement;let n=i&&i.firstChild;for(;n;)e&&n.classList.toggle(e,n===r),t&&n.classList.toggle(t,n!==r),n=n.nextSibling}const Id="[tabindex], input, select, button, textarea, [href]",_E="[disabled], .ag-disabled:not(.ag-button), .ag-disabled *";function wE(r){const e=Element.prototype.matches||Element.prototype.msMatchesSelector,i=e.call(r,"input, select, button, textarea"),n=e.call(r,_E),s=Fn(r);return i&&!n&&s}function si(r,e,t={}){const{skipAriaHidden:i}=t;r.classList.toggle("ag-hidden",!e),i||Pd(r,!e)}function LR(r,e,t={}){const{skipAriaHidden:i}=t;r.classList.toggle("ag-invisible",!e),i||Pd(r,!e)}function Fd(r,e){const t="disabled",i=e?n=>n.setAttribute(t,""):n=>n.removeAttribute(t);i(r),RS(r.querySelectorAll("input"),n=>i(n))}function wh(r,e,t){let i=0;for(;r;){if(r.classList.contains(e))return!0;if(r=r.parentElement,"number"==typeof t){if(++i>t)break}else if(r===t)break}return!1}function wc(r){const{height:e,width:t,borderTopWidth:i,borderRightWidth:n,borderBottomWidth:s,borderLeftWidth:o,paddingTop:a,paddingRight:c,paddingBottom:u,paddingLeft:p,marginTop:g,marginRight:m,marginBottom:y,marginLeft:b,boxSizing:_}=window.getComputedStyle(r);return{height:parseFloat(e||"0"),width:parseFloat(t||"0"),borderTopWidth:parseFloat(i||"0"),borderRightWidth:parseFloat(n||"0"),borderBottomWidth:parseFloat(s||"0"),borderLeftWidth:parseFloat(o||"0"),paddingTop:parseFloat(a||"0"),paddingRight:parseFloat(c||"0"),paddingBottom:parseFloat(u||"0"),paddingLeft:parseFloat(p||"0"),marginTop:parseFloat(g||"0"),marginRight:parseFloat(m||"0"),marginBottom:parseFloat(y||"0"),marginLeft:parseFloat(b||"0"),boxSizing:_}}function Nd(r){const e=wc(r);return"border-box"===e.boxSizing?e.height-e.paddingTop-e.paddingBottom:e.height}function Ec(r){const e=wc(r);return"border-box"===e.boxSizing?e.width-e.paddingLeft-e.paddingRight:e.width}function ES(r){const e=wc(r);return Math.ceil(r.offsetHeight+(e.marginBottom+e.marginTop))}function Rf(r){const e=wc(r);return Math.ceil(r.offsetWidth+(e.marginLeft+e.marginRight))}function DS(r){const e=r.getBoundingClientRect(),{borderTopWidth:t,borderLeftWidth:i,borderRightWidth:n,borderBottomWidth:s}=wc(r);return{top:e.top+(t||0),left:e.left+(i||0),right:e.right+(n||0),bottom:e.bottom+(s||0)}}function Af(){if("boolean"==typeof _h)return _h;const r=document.createElement("div");return r.style.direction="rtl",r.style.width="1px",r.style.height="1px",r.style.position="fixed",r.style.top="0px",r.style.overflow="hidden",r.dir="rtl",r.innerHTML='<div style="width: 2px">\n            <span style="display: inline-block; width: 1px"></span>\n            <span style="display: inline-block; width: 1px"></span>\n        </div>',document.body.appendChild(r),r.scrollLeft=1,_h=0===Math.floor(r.scrollLeft),document.body.removeChild(r),_h}function vv(r,e){let t=r.scrollLeft;return e&&(t=Math.abs(t),hv()&&!Af()&&(t=r.scrollWidth-r.clientWidth-t)),t}function Cv(r,e,t){t&&(Af()?e*=-1:(er()||hv())&&(e=r.scrollWidth-r.clientWidth-e)),r.scrollLeft=e}function es(r){for(;r&&r.firstChild;)r.removeChild(r.firstChild)}function bl(r){r&&r.parentNode&&r.parentNode.removeChild(r)}function EE(r){return!!r.offsetParent}function Fn(r){return r.checkVisibility?r.checkVisibility({checkVisibilityCSS:!0}):!(!EE(r)||"visible"!==window.getComputedStyle(r).visibility)}function ps(r){const e=document.createElement("div");return e.innerHTML=(r||"").trim(),e.firstChild}function DE(r,e,t){t&&t.nextSibling===e||(t?t.nextSibling?r.insertBefore(e,t.nextSibling):r.appendChild(e):r.firstChild&&r.firstChild!==e&&r.insertAdjacentElement("afterbegin",e))}function kR(r,e){for(let t=0;t<e.length;t++){const i=e[t],n=r.children[t];n!==i&&r.insertBefore(i,n)}}function qx(r,e,t){t?t.insertAdjacentElement("afterend",e):r.firstChild?r.insertAdjacentElement("afterbegin",e):r.appendChild(e)}function GR(r,e){if(e)for(const[t,i]of Object.entries(e)){if(!t||!t.length||null==i)continue;const n=eE(t),s=i.toString(),o=s.replace(/\s*!important/g,"");r.style.setProperty(n,o,o.length!=s.length?"important":void 0)}}function Xx(r){return r.clientWidth<r.scrollWidth}function Zx(r){return r.clientHeight<r.scrollHeight}function Of(r,e){"flex"===e?(r.style.removeProperty("width"),r.style.removeProperty("minWidth"),r.style.removeProperty("maxWidth"),r.style.flex="1 1 auto"):Ho(r,e)}function Ho(r,e){e=TS(e),r.style.width=e.toString(),r.style.maxWidth=e.toString(),r.style.minWidth=e.toString()}function Jx(r,e){"flex"===e?(r.style.removeProperty("height"),r.style.removeProperty("minHeight"),r.style.removeProperty("maxHeight"),r.style.flex="1 1 auto"):Eh(r,e)}function Eh(r,e){e=TS(e),r.style.height=e.toString(),r.style.maxHeight=e.toString(),r.style.minHeight=e.toString()}function TS(r){return"number"==typeof r?`${r}px`:r}function Dh(r){return r instanceof Node||r instanceof HTMLElement}function _l(r){if(null==r)return[];const e=[];return RS(r,t=>e.push(t)),e}function Mf(r,e){if(r)for(let t=0;t<r.length;t++){const i=r[t];e(i.name,i.value)}}function Oa(r,e,t){null==t?r.removeAttribute(e):r.setAttribute(e,t.toString())}function RS(r,e){if(null!=r)for(let t=0;t<r.length;t++)e(r[t])}function AS(r,e){r.then(t=>{const i=t.getGui();null!=i&&("object"==typeof i?e.appendChild(i):e.innerHTML=i)})}function Qx(r,e,t){const i={},n=r.filter(s=>!e.some(o=>o===s));return n.length>0&&n.forEach(s=>i[s]=OS(s,t).values),i}function OS(r,e,t,i){let n=e.map((a,c)=>({value:a,relevance:d1(r.toLowerCase(),a.toLocaleLowerCase()),idx:c}));if(n.sort((a,c)=>c.relevance-a.relevance),t&&(n=n.filter(a=>0!==a.relevance)),n.length>0&&i&&i>0){const c=n[0].relevance*i;n=n.filter(u=>c-u.relevance<0)}const s=[],o=[];for(const a of n)s.push(a.value),o.push(a.idx);return{values:s,indices:o}}function d1(r,e){const t=r.replace(/\s/g,""),i=e.replace(/\s/g,"");let n=0,s=-1;for(let o=0;o<t.length;o++){const a=i.indexOf(t[o],s+1);-1!==a&&(s=a,n+=100-100*s/1e4*100)}return n}const MS={columnGroupOpened:"expanded",columnGroupClosed:"contracted",columnSelectClosed:"tree-closed",columnSelectOpen:"tree-open",columnSelectIndeterminate:"tree-indeterminate",columnMovePin:"pin",columnMoveHide:"eye-slash",columnMoveMove:"arrows",columnMoveLeft:"left",columnMoveRight:"right",columnMoveGroup:"group",columnMoveValue:"aggregation",columnMovePivot:"pivot",dropNotAllowed:"not-allowed",groupContracted:"tree-closed",groupExpanded:"tree-open",setFilterGroupClosed:"tree-closed",setFilterGroupOpen:"tree-open",setFilterGroupIndeterminate:"tree-indeterminate",chart:"chart",close:"cross",cancel:"cancel",check:"tick",first:"first",previous:"previous",next:"next",last:"last",linked:"linked",unlinked:"unlinked",colorPicker:"color-picker",groupLoading:"loading",menu:"menu",menuAlt:"menu-alt",filter:"filter",columns:"columns",maximize:"maximize",minimize:"minimize",menuPin:"pin",menuValue:"aggregation",menuAddRowGroup:"group",menuRemoveRowGroup:"group",clipboardCopy:"copy",clipboardCut:"cut",clipboardPaste:"paste",pivotPanel:"pivot",rowGroupPanel:"group",valuePanel:"aggregation",columnDrag:"grip",rowDrag:"grip",save:"save",csvExport:"csv",excelExport:"excel",smallDown:"small-down",smallLeft:"small-left",smallRight:"small-right",smallUp:"small-up",sortAscending:"asc",sortDescending:"desc",sortUnSort:"none",advancedFilterBuilder:"group",advancedFilterBuilderDrag:"grip",advancedFilterBuilderInvalid:"not-allowed",advancedFilterBuilderMoveUp:"up",advancedFilterBuilderMoveDown:"down",advancedFilterBuilderAdd:"plus",advancedFilterBuilderRemove:"minus"};function Ur(r,e,t){const i=Nn(r,e,t);if(i){const{className:s}=i;if("string"==typeof s&&s.indexOf("ag-icon")>-1||"object"==typeof s&&s["ag-icon"])return i}const n=document.createElement("span");return n.appendChild(i),n}function Nn(r,e,t,i){let n=null;const s=t&&t.getColDef().icons;if(s&&(n=s[r]),e&&!n){const o=e.get("icons");o&&(n=o[r])}if(!n){const o=document.createElement("span");let a=MS[r];return a||(i?a=r:(console.warn(`AG Grid: Did not find icon ${r}`),a="")),o.setAttribute("class",`ag-icon ag-icon-${a}`),o.setAttribute("unselectable","on"),In(o,"presentation"),o}{let o;if("function"==typeof n)o=n();else{if("string"!=typeof n)throw new Error("icon from grid options needs to be a string or a function");o=n}if("string"==typeof o)return ps(o);if(Dh(o))return o;console.warn("AG Grid: iconRenderer should return back a string or a dom object")}}let ge=(()=>{class r{}return r.BACKSPACE="Backspace",r.TAB="Tab",r.ENTER="Enter",r.ESCAPE="Escape",r.SPACE=" ",r.LEFT="ArrowLeft",r.UP="ArrowUp",r.RIGHT="ArrowRight",r.DOWN="ArrowDown",r.DELETE="Delete",r.F2="F2",r.PAGE_UP="PageUp",r.PAGE_DOWN="PageDown",r.PAGE_HOME="Home",r.PAGE_END="End",r.A="KeyA",r.C="KeyC",r.D="KeyD",r.V="KeyV",r.X="KeyX",r.Y="KeyY",r.Z="KeyZ",r})();function Th(r){return!(r.altKey||r.ctrlKey||r.metaKey)&&1===r.key.length}function xS(r,e,t,i,n){const s=i?i.getColDef().suppressKeyboardEvent:void 0;if(!s)return!1;const o=r.addGridCommonParams({event:e,editing:n,column:i,node:t,data:t.data,colDef:i.getColDef()});return!(!s||!s(o))}function PS(r,e,t,i){const n=i.getDefinition(),s=n&&n.suppressHeaderKeyboardEvent;return!!Ie(s)&&!!s(r.addGridCommonParams({colDef:n,column:i,headerRowIndex:t,event:e}))}function HR(r){const{keyCode:e}=r;let t;switch(e){case 65:t=ge.A;break;case 67:t=ge.C;break;case 86:t=ge.V;break;case 68:t=ge.D;break;case 90:t=ge.Z;break;case 89:t=ge.Y;break;default:t=r.code}return t}function Sn(r,e=!1){return r===ge.DELETE||!e&&r===ge.BACKSPACE&&FR()}function TE(r,e,t){if(0===t)return!1;const i=Math.abs(r.clientX-e.clientX),n=Math.abs(r.clientY-e.clientY);return Math.max(i,n)<=t}function sP(r,e){if(!r)return!1;const t=(o,a)=>{const c=e[o.id],u=e[a.id],p=void 0!==c,g=void 0!==u;return p&&g?c-u:p||g?p?1:-1:o.__objectId-a.__objectId};let i,n,s=!1;for(let o=0;o<r.length-1;o++)if(i=r[o],n=r[o+1],t(i,n)>0){s=!0;break}return!!s&&(r.sort(t),!0)}function yv(r){const e=new Set;return r.forEach(t=>e.add(t)),e}const z=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},pe),se),ee),ie),ve),X),Z),Ce),F),fe),_e),be),he),te),$),Ke),We),ae);class RE{constructor(e=0,t=1){this.nextValue=e,this.step=t}next(){const e=this.nextValue;return this.nextValue+=this.step,e}peek(){return this.nextValue}skip(e){this.nextValue+=e}}var Rh=(()=>(function(r){r[r.IN_PROGRESS=0]="IN_PROGRESS",r[r.RESOLVED=1]="RESOLVED"}(Rh||(Rh={})),Rh))();class $t{constructor(e){this.status=Rh.IN_PROGRESS,this.resolution=null,this.waiters=[],e(t=>this.onDone(t),t=>this.onReject(t))}static all(e){return new $t(t=>{let i=e.length;const n=new Array(i);e.forEach((s,o)=>{s.then(a=>{n[o]=a,i--,0===i&&t(n)})})})}static resolve(e=null){return new $t(t=>t(e))}then(e){return new $t(t=>{this.status===Rh.RESOLVED?t(e(this.resolution)):this.waiters.push(i=>t(e(i)))})}resolveNow(e,t){return this.status===Rh.RESOLVED?t(this.resolution):e}onDone(e){this.status=Rh.RESOLVED,this.resolution=e,this.waiters.forEach(t=>t(e))}onReject(e){console.warn("TBI")}}var AE=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ma=(()=>(function(r){r[r.NOTHING=0]="NOTHING",r[r.WAITING_TO_SHOW=1]="WAITING_TO_SHOW",r[r.SHOWING=2]="SHOWING"}(Ma||(Ma={})),Ma))(),wl=(()=>(function(r){r[r.HOVER=0]="HOVER",r[r.FOCUS=1]="FOCUS"}(wl||(wl={})),wl))();class Is extends Ee{constructor(e,t,i){super(),this.parentComp=e,this.tooltipShowDelayOverride=t,this.tooltipHideDelayOverride=i,this.SHOW_QUICK_TOOLTIP_DIFF=1e3,this.FADE_OUT_TOOLTIP_TIMEOUT=1e3,this.INTERACTIVE_HIDE_DELAY=100,this.interactionEnabled=!1,this.isInteractingWithTooltip=!1,this.state=Ma.NOTHING,this.tooltipInstanceCount=0,this.tooltipMouseTrack=!1}postConstruct(){this.gridOptionsService.get("tooltipInteraction")&&(this.interactionEnabled=!0),this.tooltipTrigger=this.getTooltipTrigger(),this.tooltipMouseTrack=this.gridOptionsService.get("tooltipMouseTrack");const e=this.parentComp.getGui();this.tooltipTrigger===wl.HOVER&&(this.addManagedListener(e,"mouseenter",this.onMouseEnter.bind(this)),this.addManagedListener(e,"mouseleave",this.onMouseLeave.bind(this))),this.tooltipTrigger===wl.FOCUS&&(this.addManagedListener(e,"focusin",this.onFocusIn.bind(this)),this.addManagedListener(e,"focusout",this.onFocusOut.bind(this))),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.interactionEnabled||(this.addManagedListener(e,"mousedown",this.onMouseDown.bind(this)),this.addManagedListener(e,"keydown",this.onKeyDown.bind(this)))}getGridOptionsTooltipDelay(e){const t=this.gridOptionsService.get(e);return t<0&&st(`${e} should not be lower than 0`),Math.max(200,t)}getTooltipDelay(e){var t,i;return"show"===e?null!==(t=this.tooltipShowDelayOverride)&&void 0!==t?t:this.getGridOptionsTooltipDelay("tooltipShowDelay"):null!==(i=this.tooltipHideDelayOverride)&&void 0!==i?i:this.getGridOptionsTooltipDelay("tooltipHideDelay")}destroy(){this.setToDoNothing(),super.destroy()}getTooltipTrigger(){const e=this.gridOptionsService.get("tooltipTrigger");return e&&"hover"!==e?wl.FOCUS:wl.HOVER}onMouseEnter(e){this.interactionEnabled&&this.interactiveTooltipTimeoutId&&(this.unlockService(),this.startHideTimeout()),!Vo()&&(Is.isLocked?this.showTooltipTimeoutId=window.setTimeout(()=>{this.prepareToShowTooltip(e)},this.INTERACTIVE_HIDE_DELAY):this.prepareToShowTooltip(e))}onMouseMove(e){this.lastMouseEvent&&(this.lastMouseEvent=e),this.tooltipMouseTrack&&this.state===Ma.SHOWING&&this.tooltipComp&&this.positionTooltip()}onMouseDown(){this.setToDoNothing()}onMouseLeave(){this.interactionEnabled?this.lockService():this.setToDoNothing()}onFocusIn(){this.prepareToShowTooltip()}onFocusOut(e){var t;const i=e.relatedTarget,n=this.parentComp.getGui(),s=null===(t=this.tooltipComp)||void 0===t?void 0:t.getGui();this.isInteractingWithTooltip||n.contains(i)||this.interactionEnabled&&s?.contains(i)||this.setToDoNothing()}onKeyDown(){this.setToDoNothing()}prepareToShowTooltip(e){if(this.state!=Ma.NOTHING||Is.isLocked)return!1;let t=0;return e&&(t=this.isLastTooltipHiddenRecently()?200:this.getTooltipDelay("show")),this.lastMouseEvent=e||null,this.showTooltipTimeoutId=window.setTimeout(this.showTooltip.bind(this),t),this.state=Ma.WAITING_TO_SHOW,!0}isLastTooltipHiddenRecently(){return(new Date).getTime()-Is.lastTooltipHideTime<this.SHOW_QUICK_TOOLTIP_DIFF}setToDoNothing(){this.state===Ma.SHOWING&&this.hideTooltip(),this.onBodyScrollEventCallback&&(this.onBodyScrollEventCallback(),this.onBodyScrollEventCallback=void 0),this.onColumnMovedEventCallback&&(this.onColumnMovedEventCallback(),this.onColumnMovedEventCallback=void 0),this.clearTimeouts(),this.state=Ma.NOTHING,this.lastMouseEvent=null}showTooltip(){const e=Object.assign({},this.parentComp.getTooltipParams());if(!Ie(e.value))return void this.setToDoNothing();this.state=Ma.SHOWING,this.tooltipInstanceCount++;const t=this.newTooltipComponentCallback.bind(this,this.tooltipInstanceCount);this.userComponentFactory.getTooltipCompDetails(e).newAgStackInstance().then(t)}hideTooltip(e){if(!e&&this.isInteractingWithTooltip)return;this.tooltipComp&&(this.destroyTooltipComp(),Is.lastTooltipHideTime=(new Date).getTime());const t={type:G.EVENT_TOOLTIP_HIDE,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(t),this.state=Ma.NOTHING}newTooltipComponentCallback(e,t){if(this.state!==Ma.SHOWING||this.tooltipInstanceCount!==e)return void this.getContext().destroyBean(t);const n=t.getGui();this.tooltipComp=t,n.classList.contains("ag-tooltip")||n.classList.add("ag-tooltip-custom"),this.tooltipTrigger===wl.HOVER&&n.classList.add("ag-tooltip-animate"),this.interactionEnabled&&n.classList.add("ag-tooltip-interactive");const s=this.localeService.getLocaleTextFunc(),o=this.popupService.addPopup({eChild:n,ariaLabel:s("ariaLabelTooltip","Tooltip")});o&&(this.tooltipPopupDestroyFunc=o.hideFunc),this.positionTooltip(),this.tooltipTrigger===wl.FOCUS&&(this.onBodyScrollEventCallback=this.addManagedListener(this.eventService,G.EVENT_BODY_SCROLL,this.setToDoNothing.bind(this)),this.onColumnMovedEventCallback=this.addManagedListener(this.eventService,G.EVENT_COLUMN_MOVED,this.setToDoNothing.bind(this))),this.interactionEnabled&&(this.tooltipTrigger===wl.HOVER?(this.tooltipMouseEnterListener=this.addManagedListener(n,"mouseenter",this.onTooltipMouseEnter.bind(this))||null,this.tooltipMouseLeaveListener=this.addManagedListener(n,"mouseleave",this.onTooltipMouseLeave.bind(this))||null):(this.tooltipFocusInListener=this.addManagedListener(n,"focusin",this.onTooltipFocusIn.bind(this))||null,this.tooltipFocusOutListener=this.addManagedListener(n,"focusout",this.onTooltipFocusOut.bind(this))||null));const a={type:G.EVENT_TOOLTIP_SHOW,tooltipGui:n,parentGui:this.parentComp.getGui()};this.eventService.dispatchEvent(a),this.startHideTimeout()}onTooltipMouseEnter(){this.isInteractingWithTooltip=!0,this.unlockService()}onTooltipMouseLeave(){this.isInteractingWithTooltip=!1,this.lockService()}onTooltipFocusIn(){this.isInteractingWithTooltip=!0}onTooltipFocusOut(e){var t;const i=this.parentComp.getGui(),n=null===(t=this.tooltipComp)||void 0===t?void 0:t.getGui(),s=e.relatedTarget;n?.contains(s)||(this.isInteractingWithTooltip=!1,i.contains(s)?this.startHideTimeout():this.hideTooltip())}positionTooltip(){const e={type:"tooltip",ePopup:this.tooltipComp.getGui(),nudgeY:18,skipObserver:this.tooltipMouseTrack};this.lastMouseEvent?this.popupService.positionPopupUnderMouseEvent(Object.assign(Object.assign({},e),{mouseEvent:this.lastMouseEvent})):this.popupService.positionPopupByComponent(Object.assign(Object.assign({},e),{eventSource:this.parentComp.getGui(),position:"under",keepWithinBounds:!0,nudgeY:5}))}destroyTooltipComp(){this.tooltipComp.getGui().classList.add("ag-tooltip-hiding");const e=this.tooltipPopupDestroyFunc,t=this.tooltipComp;window.setTimeout(()=>{e(),this.getContext().destroyBean(t)},this.tooltipTrigger===wl.HOVER?this.FADE_OUT_TOOLTIP_TIMEOUT:0),this.clearTooltipListeners(),this.tooltipPopupDestroyFunc=void 0,this.tooltipComp=void 0}clearTooltipListeners(){[this.tooltipMouseEnterListener,this.tooltipMouseLeaveListener,this.tooltipFocusInListener,this.tooltipFocusOutListener].forEach(e=>{e&&e()}),this.tooltipMouseEnterListener=this.tooltipMouseLeaveListener=this.tooltipFocusInListener=this.tooltipFocusOutListener=null}lockService(){Is.isLocked=!0,this.interactiveTooltipTimeoutId=window.setTimeout(()=>{this.unlockService(),this.setToDoNothing()},this.INTERACTIVE_HIDE_DELAY)}unlockService(){Is.isLocked=!1,this.clearInteractiveTimeout()}startHideTimeout(){this.clearHideTimeout(),this.hideTooltipTimeoutId=window.setTimeout(this.hideTooltip.bind(this),this.getTooltipDelay("hide"))}clearShowTimeout(){!this.showTooltipTimeoutId||(window.clearTimeout(this.showTooltipTimeoutId),this.showTooltipTimeoutId=void 0)}clearHideTimeout(){!this.hideTooltipTimeoutId||(window.clearTimeout(this.hideTooltipTimeoutId),this.hideTooltipTimeoutId=void 0)}clearInteractiveTimeout(){!this.interactiveTooltipTimeoutId||(window.clearTimeout(this.interactiveTooltipTimeoutId),this.interactiveTooltipTimeoutId=void 0)}clearTimeouts(){this.clearShowTimeout(),this.clearHideTimeout(),this.clearInteractiveTimeout()}}Is.isLocked=!1,AE([P("popupService")],Is.prototype,"popupService",void 0),AE([P("userComponentFactory")],Is.prototype,"userComponentFactory",void 0),AE([Se],Is.prototype,"postConstruct",null);class UR{constructor(e){this.cssClassStates={},this.getGui=e}addCssClass(e){const t=(e||"").split(" ");if(t.length>1)t.forEach(n=>this.addCssClass(n));else if(!0!==this.cssClassStates[e]&&e.length){const n=this.getGui();n&&n.classList.add(e),this.cssClassStates[e]=!0}}removeCssClass(e){const t=(e||"").split(" ");if(t.length>1)t.forEach(n=>this.removeCssClass(n));else if(!1!==this.cssClassStates[e]&&e.length){const n=this.getGui();n&&n.classList.remove(e),this.cssClassStates[e]=!1}}containsCssClass(e){const t=this.getGui();return!!t&&t.classList.contains(e)}addOrRemoveCssClass(e,t){if(e){if(e.indexOf(" ")>=0){const n=(e||"").split(" ");if(n.length>1)return void n.forEach(s=>this.addOrRemoveCssClass(s,t))}if(this.cssClassStates[e]!==t&&e.length){const n=this.getGui();n&&n.classList.toggle(e,t),this.cssClassStates[e]=t}}}}var IS=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const WR=new RE;class Ne extends Ee{constructor(e){super(),this.displayed=!0,this.visible=!0,this.compId=WR.next(),this.cssClassManager=new UR(()=>this.eGui),e&&this.setTemplate(e)}preConstructOnComponent(){this.usingBrowserTooltips=this.gridOptionsService.get("enableBrowserTooltips")}getCompId(){return this.compId}getTooltipParams(){return{value:this.tooltipText,location:"UNKNOWN"}}setTooltip(e,t,i){this.tooltipText!=e&&(this.tooltipText&&(()=>{this.usingBrowserTooltips?this.getGui().removeAttribute("title"):this.tooltipFeature=this.destroyBean(this.tooltipFeature)})(),null!=e&&(this.tooltipText=e,this.tooltipText&&(()=>{this.usingBrowserTooltips?this.getGui().setAttribute("title",this.tooltipText):this.tooltipFeature=this.createBean(new Is(this,t,i))})()))}createChildComponentsFromTags(e,t){_l(e.childNodes).forEach(n=>{if(!(n instanceof HTMLElement))return;const s=this.createComponentFromElement(n,o=>{o.getGui()&&this.copyAttributesFromNode(n,o.getGui())},t);if(s){if(s.addItems&&n.children.length){this.createChildComponentsFromTags(n,t);const o=Array.prototype.slice.call(n.children);s.addItems(o)}this.swapComponentForNode(s,e,n)}else n.childNodes&&this.createChildComponentsFromTags(n,t)})}createComponentFromElement(e,t,i){const n=e.nodeName,s=i?i[e.getAttribute("ref")]:void 0,o=this.agStackComponentsRegistry.getComponentClass(n);if(o){Ne.elementGettingCreated=e;const a=new o(s);return a.setParentComponent(this),this.createBean(a,null,t),a}return null}copyAttributesFromNode(e,t){Mf(e.attributes,(i,n)=>t.setAttribute(i,n))}swapComponentForNode(e,t,i){const n=e.getGui();t.replaceChild(n,i),t.insertBefore(document.createComment(i.nodeName),n),this.addDestroyFunc(this.destroyBean.bind(this,e)),this.swapInComponentForQuerySelectors(e,i)}swapInComponentForQuerySelectors(e,t){const i=this;this.iterateOverQuerySelectors(n=>{i[n.attributeName]===t&&(i[n.attributeName]=e)})}iterateOverQuerySelectors(e){let t=Object.getPrototypeOf(this);for(;null!=t;){const i=t.__agComponentMetaData,n=Zm(t.constructor);i&&i[n]&&i[n].querySelectors&&i[n].querySelectors.forEach(s=>e(s)),t=Object.getPrototypeOf(t)}}activateTabIndex(e){const t=this.gridOptionsService.get("tabIndex");e||(e=[]),e.length||e.push(this.getGui()),e.forEach(i=>i.setAttribute("tabindex",t.toString()))}setTemplate(e,t){const i=ps(e);this.setTemplateFromElement(i,t)}setTemplateFromElement(e,t){this.eGui=e,this.eGui.__agComponent=this,this.wireQuerySelectors(),this.getContext()&&this.createChildComponentsFromTags(this.getGui(),t)}createChildComponentsPreConstruct(){this.getGui()&&this.createChildComponentsFromTags(this.getGui())}wireQuerySelectors(){if(!this.eGui)return;const e=this;this.iterateOverQuerySelectors(t=>{const i=s=>e[t.attributeName]=s;if(t.refSelector&&this.getAttribute("ref")===t.refSelector)i(this.eGui);else{const s=this.eGui.querySelector(t.querySelector);s&&i(s.__agComponent||s)}})}getGui(){return this.eGui}getFocusableElement(){return this.eGui}getAriaElement(){return this.getFocusableElement()}setParentComponent(e){this.parentComponent=e}getParentComponent(){return this.parentComponent}setGui(e){this.eGui=e}queryForHtmlElement(e){return this.eGui.querySelector(e)}queryForHtmlInputElement(e){return this.eGui.querySelector(e)}appendChild(e,t){null!=e&&(t||(t=this.eGui),Dh(e)?t.appendChild(e):t.appendChild(e.getGui()))}isDisplayed(){return this.displayed}setVisible(e,t={}){if(e!==this.visible){this.visible=e;const{skipAriaHidden:i}=t;LR(this.eGui,e,{skipAriaHidden:i})}}setDisplayed(e,t={}){if(e!==this.displayed){this.displayed=e;const{skipAriaHidden:i}=t;si(this.eGui,e,{skipAriaHidden:i}),this.dispatchEvent({type:Ne.EVENT_DISPLAYED_CHANGED,visible:this.displayed})}}destroy(){this.tooltipFeature&&(this.tooltipFeature=this.destroyBean(this.tooltipFeature)),this.parentComponent&&(this.parentComponent=void 0);const e=this.eGui;e&&e.__agComponent&&(e.__agComponent=void 0),super.destroy()}addGuiEventListener(e,t,i){this.eGui.addEventListener(e,t,i),this.addDestroyFunc(()=>this.eGui.removeEventListener(e,t))}addCssClass(e){this.cssClassManager.addCssClass(e)}removeCssClass(e){this.cssClassManager.removeCssClass(e)}containsCssClass(e){return this.cssClassManager.containsCssClass(e)}addOrRemoveCssClass(e,t){this.cssClassManager.addOrRemoveCssClass(e,t)}getAttribute(e){const{eGui:t}=this;return t?t.getAttribute(e):null}getRefElement(e){return this.queryForHtmlElement(`[ref="${e}"]`)}}function re(r){return OE.bind(this,`[ref=${r}]`,r)}function OE(r,e,t,i,n){null!==r?"number"!=typeof n?function ME(r,e,t){const i=function h1(r,e){return r.__agComponentMetaData||(r.__agComponentMetaData={}),r.__agComponentMetaData[e]||(r.__agComponentMetaData[e]={}),r.__agComponentMetaData[e]}(r,Zm(r.constructor));i[e]||(i[e]=[]),i[e].push(t)}(t,"querySelectors",{attributeName:i,querySelector:r,refSelector:e}):console.error("AG Grid: QuerySelector should be on an attribute"):console.error("AG Grid: QuerySelector selector should not be null")}Ne.EVENT_DISPLAYED_CHANGED="displayedChanged",IS([P("agStackComponentsRegistry")],Ne.prototype,"agStackComponentsRegistry",void 0),IS([vf],Ne.prototype,"preConstructOnComponent",null),IS([vf],Ne.prototype,"createChildComponentsPreConstruct",null);var jR=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Sv extends Ne{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>')}destroy(){super.destroy()}init(e){this.params=e;const t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setDisabled(!0).setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParentModelChanged(e){null!=e?this.params.parentFilterInstance(t=>{if(t.getModelAsString){const i=t.getModelAsString(e);this.eFloatingFilterText.setValue(i)}}):this.eFloatingFilterText.setValue("")}onParamsUpdated(e){this.refresh(e)}refresh(e){this.init(e)}}jR([re("eFloatingFilterText")],Sv.prototype,"eFloatingFilterText",void 0),jR([P("columnModel")],Sv.prototype,"columnModel",void 0);class xE{constructor(e,t,i,n){this.alive=!0,this.context=e,this.eParent=n,t.getDateCompDetails(i).newAgStackInstance().then(a=>{this.alive?(this.dateComp=a,a&&(n.appendChild(a.getGui()),a.afterGuiAttached&&a.afterGuiAttached(),this.tempValue&&a.setDate(this.tempValue),null!=this.disabled&&this.setDateCompDisabled(this.disabled))):e.destroyBean(a)})}destroy(){this.alive=!1,this.dateComp=this.context.destroyBean(this.dateComp)}getDate(){return this.dateComp?this.dateComp.getDate():this.tempValue}setDate(e){this.dateComp?this.dateComp.setDate(e):this.tempValue=e}setDisabled(e){this.dateComp?this.setDateCompDisabled(e):this.disabled=e}setDisplayed(e){si(this.eParent,e)}setInputPlaceholder(e){this.dateComp&&this.dateComp.setInputPlaceholder&&this.dateComp.setInputPlaceholder(e)}setInputAriaLabel(e){this.dateComp&&this.dateComp.setInputAriaLabel&&this.dateComp.setInputAriaLabel(e)}afterGuiAttached(e){this.dateComp&&"function"==typeof this.dateComp.afterGuiAttached&&this.dateComp.afterGuiAttached(e)}updateParams(e){var t,i;let n=!1;(null===(t=this.dateComp)||void 0===t?void 0:t.refresh)&&"function"==typeof this.dateComp.refresh&&null!==this.dateComp.refresh(e)&&(n=!0),!n&&(null===(i=this.dateComp)||void 0===i?void 0:i.onParamsUpdated)&&"function"==typeof this.dateComp.onParamsUpdated&&null!==this.dateComp.onParamsUpdated(e)&&st("Custom date component method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")}setDateCompDisabled(e){null!=this.dateComp&&null!=this.dateComp.setDisabled&&this.dateComp.setDisabled(e)}}class PE{constructor(){this.customFilterOptions={}}init(e,t){this.filterOptions=e.filterOptions||t,this.mapCustomOptions(),this.selectDefaultItem(e)}getFilterOptions(){return this.filterOptions}mapCustomOptions(){!this.filterOptions||this.filterOptions.forEach(e=>{"string"!=typeof e&&([["displayKey"],["displayName"],["predicate","test"]].every(n=>!!n.some(s=>null!=e[s])||(console.warn(`AG Grid: ignoring FilterOptionDef as it doesn't contain one of '${n}'`),!1))?this.customFilterOptions[e.displayKey]=e:this.filterOptions=this.filterOptions.filter(n=>n===e)||[])})}selectDefaultItem(e){if(e.defaultOption)this.defaultOption=e.defaultOption;else if(this.filterOptions.length>=1){const t=this.filterOptions[0];"string"==typeof t?this.defaultOption=t:t.displayKey?this.defaultOption=t.displayKey:console.warn("AG Grid: invalid FilterOptionDef supplied as it doesn't contain a 'displayKey'")}else console.warn("AG Grid: no filter options for filter")}getDefaultOption(){return this.defaultOption}getCustomOption(e){return this.customFilterOptions[e]}}const Ld={applyFilter:"Apply",clearFilter:"Clear",resetFilter:"Reset",cancelFilter:"Cancel",textFilter:"Text Filter",numberFilter:"Number Filter",dateFilter:"Date Filter",setFilter:"Set Filter",filterOoo:"Filter...",empty:"Choose one",equals:"Equals",notEqual:"Does not equal",lessThan:"Less than",greaterThan:"Greater than",inRange:"Between",inRangeStart:"From",inRangeEnd:"To",lessThanOrEqual:"Less than or equal to",greaterThanOrEqual:"Greater than or equal to",contains:"Contains",notContains:"Does not contain",startsWith:"Begins with",endsWith:"Ends with",blank:"Blank",notBlank:"Not blank",before:"Before",after:"After",andCondition:"AND",orCondition:"OR",dateFormatOoo:"yyyy-mm-dd"};var zR=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class ir extends Ee{constructor(e,t={}){super(),this.eFocusableElement=e,this.callbacks=t,this.callbacks=Object.assign({shouldStopEventPropagation:()=>!1,onTabKeyDown:i=>{if(i.defaultPrevented)return;const n=this.focusService.findNextFocusableElement(this.eFocusableElement,!1,i.shiftKey);!n||(n.focus(),i.preventDefault())}},t)}postConstruct(){this.eFocusableElement.classList.add(ir.FOCUS_MANAGED_CLASS),this.addKeyDownListeners(this.eFocusableElement),this.callbacks.onFocusIn&&this.addManagedListener(this.eFocusableElement,"focusin",this.callbacks.onFocusIn),this.callbacks.onFocusOut&&this.addManagedListener(this.eFocusableElement,"focusout",this.callbacks.onFocusOut)}addKeyDownListeners(e){this.addManagedListener(e,"keydown",t=>{if(!t.defaultPrevented&&!yl(t)){if(this.callbacks.shouldStopEventPropagation(t))return void Aa(t);t.key===ge.TAB?this.callbacks.onTabKeyDown(t):this.callbacks.handleKeyDown&&this.callbacks.handleKeyDown(t)}})}}ir.FOCUS_MANAGED_CLASS="ag-focus-managed",zR([P("focusService")],ir.prototype,"focusService",void 0),zR([Se],ir.prototype,"postConstruct",null);var xf=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const $R="ag-resizer-wrapper",IE=`<div class="${$R}">\n        <div ref="eTopLeftResizer" class="ag-resizer ag-resizer-topLeft"></div>\n        <div ref="eTopResizer" class="ag-resizer ag-resizer-top"></div>\n        <div ref="eTopRightResizer" class="ag-resizer ag-resizer-topRight"></div>\n        <div ref="eRightResizer" class="ag-resizer ag-resizer-right"></div>\n        <div ref="eBottomRightResizer" class="ag-resizer ag-resizer-bottomRight"></div>\n        <div ref="eBottomResizer" class="ag-resizer ag-resizer-bottom"></div>\n        <div ref="eBottomLeftResizer" class="ag-resizer ag-resizer-bottomLeft"></div>\n        <div ref="eLeftResizer" class="ag-resizer ag-resizer-left"></div>\n    </div>`;class El extends Ee{constructor(e,t){super(),this.element=e,this.dragStartPosition={x:0,y:0},this.position={x:0,y:0},this.lastSize={width:-1,height:-1},this.positioned=!1,this.resizersAdded=!1,this.resizeListeners=[],this.boundaryEl=null,this.isResizing=!1,this.isMoving=!1,this.resizable={},this.movable=!1,this.currentResizer=null,this.config=Object.assign({},{popup:!1},t)}center(){const{clientHeight:e,clientWidth:t}=this.offsetParent,i=t/2-this.getWidth()/2,n=e/2-this.getHeight()/2;this.offsetElement(i,n)}initialisePosition(){if(this.positioned)return;const{centered:e,forcePopupParentAsOffsetParent:t,minWidth:i,width:n,minHeight:s,height:o,x:a,y:c}=this.config;this.offsetParent||this.setOffsetParent();let u=0,p=0;const g=Fn(this.element);if(g){const m=this.findBoundaryElement(),y=window.getComputedStyle(m);if(null!=y.minWidth){const b=m.offsetWidth-this.element.offsetWidth;p=parseInt(y.minWidth,10)-b}if(null!=y.minHeight){const b=m.offsetHeight-this.element.offsetHeight;u=parseInt(y.minHeight,10)-b}}if(this.minHeight=s||u,this.minWidth=i||p,n&&this.setWidth(n),o&&this.setHeight(o),(!n||!o)&&this.refreshSize(),e)this.center();else if(a||c)this.offsetElement(a,c);else if(g&&t){let m=this.boundaryEl,y=!0;if(m||(m=this.findBoundaryElement(),y=!1),m){const b=parseFloat(m.style.top),_=parseFloat(m.style.left);y?this.offsetElement(isNaN(_)?0:_,isNaN(b)?0:b):this.setPosition(_,b)}}this.positioned=!!this.offsetParent}isPositioned(){return this.positioned}getPosition(){return this.position}setMovable(e,t){if(!this.config.popup||e===this.movable)return;this.movable=e;const i=this.moveElementDragListener||{eElement:t,onDragStart:this.onMoveStart.bind(this),onDragging:this.onMove.bind(this),onDragStop:this.onMoveEnd.bind(this)};e?(this.dragService.addDragSource(i),this.moveElementDragListener=i):(this.dragService.removeDragSource(i),this.moveElementDragListener=void 0)}setResizable(e){if(this.clearResizeListeners(),e?this.addResizers():this.removeResizers(),"boolean"==typeof e){if(!1===e)return;e={topLeft:e,top:e,topRight:e,right:e,bottomRight:e,bottom:e,bottomLeft:e,left:e}}Object.keys(e).forEach(t=>{const n=!!e[t],s=this.getResizerElement(t),o={dragStartPixels:0,eElement:s,onDragStart:a=>this.onResizeStart(a,t),onDragging:this.onResize.bind(this),onDragStop:a=>this.onResizeEnd(a,t)};(n||!this.isAlive()&&!n)&&(n?(this.dragService.addDragSource(o),this.resizeListeners.push(o),s.style.pointerEvents="all"):s.style.pointerEvents="none",this.resizable[t]=n)})}removeSizeFromEl(){this.element.style.removeProperty("height"),this.element.style.removeProperty("width"),this.element.style.removeProperty("flex")}restoreLastSize(){this.element.style.flex="0 0 auto";const{height:e,width:t}=this.lastSize;-1!==t&&(this.element.style.width=`${t}px`),-1!==e&&(this.element.style.height=`${e}px`)}getHeight(){return this.element.offsetHeight}setHeight(e){const{popup:t}=this.config,i=this.element;let n=!1;if("string"==typeof e&&-1!==e.indexOf("%"))Eh(i,e),e=ES(i),n=!0;else if(e=Math.max(this.minHeight,e),this.positioned){const s=this.getAvailableHeight();s&&e>s&&(e=s)}this.getHeight()!==e&&(n?(i.style.maxHeight="unset",i.style.minHeight="unset"):t?Eh(i,e):(i.style.height=`${e}px`,i.style.flex="0 0 auto",this.lastSize.height="number"==typeof e?e:parseFloat(e)))}getAvailableHeight(){const{popup:e,forcePopupParentAsOffsetParent:t}=this.config;this.positioned||this.initialisePosition();const{clientHeight:i}=this.offsetParent;if(!i)return null;const n=this.element.getBoundingClientRect(),s=this.offsetParent.getBoundingClientRect(),o=e?this.position.y:n.top,a=e?0:s.top;let c=0;if(t){const p=this.element.parentElement;if(p){const{bottom:g}=p.getBoundingClientRect();c=g-n.bottom}}return i+a-o-c}getWidth(){return this.element.offsetWidth}setWidth(e){const t=this.element,{popup:i}=this.config;let n=!1;if("string"==typeof e&&-1!==e.indexOf("%"))Ho(t,e),e=Rf(t),n=!0;else if(this.positioned){e=Math.max(this.minWidth,e);const{clientWidth:s}=this.offsetParent,o=i?this.position.x:this.element.getBoundingClientRect().left;s&&e+o>s&&(e=s-o)}this.getWidth()!==e&&(n?(t.style.maxWidth="unset",t.style.minWidth="unset"):this.config.popup?Ho(t,e):(t.style.width=`${e}px`,t.style.flex=" unset",this.lastSize.width="number"==typeof e?e:parseFloat(e)))}offsetElement(e=0,t=0){const{forcePopupParentAsOffsetParent:i}=this.config,n=i?this.boundaryEl:this.element;!n||(this.popupService.positionPopup({ePopup:n,keepWithinBounds:!0,skipObserver:this.movable||this.isResizable(),updatePosition:()=>({x:e,y:t})}),this.setPosition(parseFloat(n.style.left),parseFloat(n.style.top)))}constrainSizeToAvailableHeight(e){this.config.forcePopupParentAsOffsetParent&&(e?this.resizeObserverSubscriber=this.resizeObserverService.observeResize(this.popupService.getPopupParent(),()=>{const i=this.getAvailableHeight();this.element.style.setProperty("max-height",`${i}px`)}):(this.element.style.removeProperty("max-height"),this.resizeObserverSubscriber&&(this.resizeObserverSubscriber(),this.resizeObserverSubscriber=void 0)))}setPosition(e,t){this.position.x=e,this.position.y=t}updateDragStartPosition(e,t){this.dragStartPosition={x:e,y:t}}calculateMouseMovement(e){const{e:t,isLeft:i,isTop:n,anywhereWithin:s,topBuffer:o}=e,a=t.clientX-this.dragStartPosition.x,c=t.clientY-this.dragStartPosition.y;return{movementX:this.shouldSkipX(t,!!i,!!s,a)?0:a,movementY:this.shouldSkipY(t,!!n,o,c)?0:c}}shouldSkipX(e,t,i,n){const s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),c=this.config.popup?this.position.x:s.left;let u=c<=0&&o.left>=e.clientX||o.right<=e.clientX&&o.right<=a.right;return!!u||(u=t?n<0&&e.clientX>c+o.left||n>0&&e.clientX<c+o.left:i?n<0&&e.clientX>a.right||n>0&&e.clientX<c+o.left:n<0&&e.clientX>a.right||n>0&&e.clientX<a.right,u)}shouldSkipY(e,t,i=0,n){const s=this.element.getBoundingClientRect(),o=this.offsetParent.getBoundingClientRect(),a=this.boundaryEl.getBoundingClientRect(),c=this.config.popup?this.position.y:s.top;let u=c<=0&&o.top>=e.clientY||o.bottom<=e.clientY&&o.bottom<=a.bottom;return!!u||(u=t?n<0&&e.clientY>c+o.top+i||n>0&&e.clientY<c+o.top:n<0&&e.clientY>a.bottom||n>0&&e.clientY<a.bottom,u)}createResizeMap(){const e=this.element;this.resizerMap={topLeft:{element:e.querySelector("[ref=eTopLeftResizer]")},top:{element:e.querySelector("[ref=eTopResizer]")},topRight:{element:e.querySelector("[ref=eTopRightResizer]")},right:{element:e.querySelector("[ref=eRightResizer]")},bottomRight:{element:e.querySelector("[ref=eBottomRightResizer]")},bottom:{element:e.querySelector("[ref=eBottomResizer]")},bottomLeft:{element:e.querySelector("[ref=eBottomLeftResizer]")},left:{element:e.querySelector("[ref=eLeftResizer]")}}}addResizers(){if(this.resizersAdded)return;const e=this.element;if(!e)return;const i=(new DOMParser).parseFromString(IE,"text/html").body;e.appendChild(i.firstChild),this.createResizeMap(),this.resizersAdded=!0}removeResizers(){this.resizerMap=void 0;const e=this.element.querySelector(`.${$R}`);e&&this.element.removeChild(e),this.resizersAdded=!1}getResizerElement(e){return this.resizerMap[e].element}onResizeStart(e,t){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.currentResizer={isTop:!!t.match(/top/i),isRight:!!t.match(/right/i),isBottom:!!t.match(/bottom/i),isLeft:!!t.match(/left/i)},this.element.classList.add("ag-resizing"),this.resizerMap[t].element.classList.add("ag-active");const{popup:i,forcePopupParentAsOffsetParent:n}=this.config;!i&&!n&&this.applySizeToSiblings(this.currentResizer.isBottom||this.currentResizer.isTop),this.isResizing=!0,this.updateDragStartPosition(e.clientX,e.clientY)}getSiblings(){const t=this.element.parentElement;return t?Array.prototype.slice.call(t.children).filter(i=>!i.classList.contains("ag-hidden")):null}getMinSizeOfSiblings(){const e=this.getSiblings()||[];let t=0,i=0;for(let n=0;n<e.length;n++){const s=e[n],o=!!s.style.flex&&"0 0 auto"!==s.style.flex;if(s===this.element)continue;let a=this.minHeight||0,c=this.minWidth||0;if(o){const u=window.getComputedStyle(s);u.minHeight&&(a=parseInt(u.minHeight,10)),u.minWidth&&(c=parseInt(u.minWidth,10))}else a=s.offsetHeight,c=s.offsetWidth;t+=a,i+=c}return{height:t,width:i}}applySizeToSiblings(e){let t=null;const i=this.getSiblings();if(i){for(let n=0;n<i.length;n++){const s=i[n];s!==t&&(e?s.style.height=`${s.offsetHeight}px`:s.style.width=`${s.offsetWidth}px`,s.style.flex="0 0 auto",s===this.element&&(t=i[n+1]))}t&&(t.style.removeProperty("height"),t.style.removeProperty("min-height"),t.style.removeProperty("max-height"),t.style.flex="1 1 auto")}}isResizable(){return Object.values(this.resizable).some(e=>e)}onResize(e){if(!this.isResizing||!this.currentResizer)return;const{popup:t,forcePopupParentAsOffsetParent:i}=this.config,{isTop:n,isRight:s,isBottom:o,isLeft:a}=this.currentResizer,c=s||a,u=o||n,{movementX:p,movementY:g}=this.calculateMouseMovement({e,isLeft:a,isTop:n}),m=this.position.x,y=this.position.y;let b=0,_=0;if(c&&p){const E=a?-1:1,D=this.getWidth(),R=D+p*E;let O=!1;a&&(b=D-R,(m+b<=0||R<=this.minWidth)&&(O=!0,b=0)),O||this.setWidth(R)}if(u&&g){const E=n?-1:1,D=this.getHeight(),R=D+g*E;let O=!1;n?(_=D-R,(y+_<=0||R<=this.minHeight)&&(O=!0,_=0)):!this.config.popup&&!this.config.forcePopupParentAsOffsetParent&&D<R&&this.getMinSizeOfSiblings().height+R>this.element.parentElement.offsetHeight&&(O=!0),O||this.setHeight(R)}this.updateDragStartPosition(e.clientX,e.clientY),((t||i)&&b||_)&&this.offsetElement(m+b,y+_)}onResizeEnd(e,t){this.isResizing=!1,this.currentResizer=null,this.boundaryEl=null,this.element.classList.remove("ag-resizing"),this.resizerMap[t].element.classList.remove("ag-active"),this.dispatchEvent({type:"resize"})}refreshSize(){const e=this.element;this.config.popup&&(this.config.width||this.setWidth(e.offsetWidth),this.config.height||this.setHeight(e.offsetHeight))}onMoveStart(e){this.boundaryEl=this.findBoundaryElement(),this.positioned||this.initialisePosition(),this.isMoving=!0,this.element.classList.add("ag-moving"),this.updateDragStartPosition(e.clientX,e.clientY)}onMove(e){if(!this.isMoving)return;const{x:t,y:i}=this.position;let n;this.config.calculateTopBuffer&&(n=this.config.calculateTopBuffer());const{movementX:s,movementY:o}=this.calculateMouseMovement({e,isTop:!0,anywhereWithin:!0,topBuffer:n});this.offsetElement(t+s,i+o),this.updateDragStartPosition(e.clientX,e.clientY)}onMoveEnd(){this.isMoving=!1,this.boundaryEl=null,this.element.classList.remove("ag-moving")}setOffsetParent(){this.offsetParent=this.config.forcePopupParentAsOffsetParent?this.popupService.getPopupParent():this.element.offsetParent}findBoundaryElement(){let e=this.element;for(;e;){if("static"!==window.getComputedStyle(e).position)return e;e=e.parentElement}return this.element}clearResizeListeners(){for(;this.resizeListeners.length;){const e=this.resizeListeners.pop();this.dragService.removeDragSource(e)}}destroy(){super.destroy(),this.moveElementDragListener&&this.dragService.removeDragSource(this.moveElementDragListener),this.constrainSizeToAvailableHeight(!1),this.clearResizeListeners(),this.removeResizers()}}xf([P("popupService")],El.prototype,"popupService",void 0),xf([P("resizeObserverService")],El.prototype,"resizeObserverService",void 0),xf([P("dragService")],El.prototype,"dragService",void 0);var kd=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Wr extends Ne{constructor(e){super(),this.filterNameKey=e,this.applyActive=!1,this.hidePopup=null,this.debouncePending=!1,this.appliedModel=null,this.buttonListeners=[]}postConstruct(){this.resetTemplate(),this.createManagedBean(new ir(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.positionableFeature=new El(this.getPositionableElement(),{forcePopupParentAsOffsetParent:!0}),this.createBean(this.positionableFeature)}handleKeyDown(e){}getFilterTitle(){return this.translate(this.filterNameKey)}isFilterActive(){return!!this.appliedModel}resetTemplate(e){let t=this.getGui();t&&t.removeEventListener("submit",this.onFormSubmit);const i=`\n            <form class="ag-filter-wrapper">\n                <div class="ag-filter-body-wrapper ag-${this.getCssIdentifier()}-body-wrapper" ref="eFilterBody">\n                    ${this.createBodyTemplate()}\n                </div>\n            </form>`;this.setTemplate(i,e),t=this.getGui(),t&&t.addEventListener("submit",this.onFormSubmit)}isReadOnly(){return!!this.providedFilterParams.readOnly}init(e){this.setParams(e),this.resetUiToDefaults(!0).then(()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}setParams(e){this.providedFilterParams=e,this.applyActive=Wr.isUseApplyButton(e),this.resetButtonsPanel()}updateParams(e){this.providedFilterParams=e,this.applyActive=Wr.isUseApplyButton(e),this.resetUiToActiveModel(this.getModel(),()=>{this.updateUiVisibility(),this.setupOnBtApplyDebounce()})}resetButtonsPanel(){const{buttons:e}=this.providedFilterParams,t=e&&e.length>0&&!this.isReadOnly();if(this.eButtonsPanel?(es(this.eButtonsPanel),this.buttonListeners.forEach(s=>s?.()),this.buttonListeners=[]):t&&(this.eButtonsPanel=document.createElement("div"),this.eButtonsPanel.classList.add("ag-filter-apply-panel")),!t)return void(this.eButtonsPanel&&bl(this.eButtonsPanel));const i=document.createDocumentFragment(),n=s=>{let o,a;switch(s){case"apply":o=this.translate("applyFilter"),a=p=>this.onBtApply(!1,!1,p);break;case"clear":o=this.translate("clearFilter"),a=()=>this.onBtClear();break;case"reset":o=this.translate("resetFilter"),a=()=>this.onBtReset();break;case"cancel":o=this.translate("cancelFilter"),a=p=>{this.onBtCancel(p)};break;default:return void console.warn("AG Grid: Unknown button type specified")}const u=ps(`<button\n                    type="${"apply"===s?"submit":"button"}"\n                    ref="${s}FilterButton"\n                    class="ag-button ag-standard-button ag-filter-apply-panel-button"\n                >${o}\n                </button>`);this.buttonListeners.push(this.addManagedListener(u,"click",a)),i.append(u)};yv(e).forEach(s=>n(s)),this.eButtonsPanel.append(i),this.getGui().appendChild(this.eButtonsPanel)}getDefaultDebounceMs(){return 0}setupOnBtApplyDebounce(){const e=Wr.getDebounceMs(this.providedFilterParams,this.getDefaultDebounceMs()),t=ko(this.checkApplyDebounce.bind(this),e);this.onBtApplyDebounce=()=>{this.debouncePending=!0,t()}}checkApplyDebounce(){this.debouncePending&&(this.debouncePending=!1,this.onBtApply())}getModel(){return this.appliedModel?this.appliedModel:null}setModel(e){return(null!=e?this.setModelIntoUi(e):this.resetUiToDefaults()).then(()=>{this.updateUiVisibility(),this.applyModel("api")})}onBtCancel(e){this.resetUiToActiveModel(this.getModel(),()=>{this.handleCancelEnd(e)})}handleCancelEnd(e){this.providedFilterParams.closeOnApply&&this.close(e)}resetUiToActiveModel(e,t){const i=()=>{this.onUiChanged(!1,"prevent"),t?.()};null!=e?this.setModelIntoUi(e).then(i):this.resetUiToDefaults().then(i)}onBtClear(){this.resetUiToDefaults().then(()=>this.onUiChanged())}onBtReset(){this.onBtClear(),this.onBtApply()}applyModel(e="api"){const t=this.getModelFromUi();if(!this.isModelValid(t))return!1;const i=this.appliedModel;return this.appliedModel=t,!this.areModelsEqual(i,t)}isModelValid(e){return!0}onFormSubmit(e){e.preventDefault()}onBtApply(e=!1,t=!1,i){i&&i.preventDefault(),this.applyModel(t?"rowDataUpdated":"ui")&&this.providedFilterParams.filterChangedCallback({afterFloatingFilter:e,afterDataChange:t,source:"columnFilter"});const{closeOnApply:n}=this.providedFilterParams;n&&this.applyActive&&!e&&!t&&this.close(i)}onNewRowsLoaded(){}close(e){if(!this.hidePopup)return;const i=e&&e.key;let n;("Enter"===i||"Space"===i)&&(n={keyboardEvent:e}),this.hidePopup(n),this.hidePopup=null}onUiChanged(e=!1,t){if(this.updateUiVisibility(),this.providedFilterParams.filterModifiedCallback(),this.applyActive&&!this.isReadOnly()){const i=this.isModelValid(this.getModelFromUi()),n=this.getRefElement("applyFilterButton");n&&Fd(n,!i)}e&&!t||"immediately"===t?this.onBtApply(e):(!this.applyActive&&!t||"debounce"===t)&&this.onBtApplyDebounce()}afterGuiAttached(e){e&&(this.hidePopup=e.hidePopup),this.refreshFilterResizer(e?.container)}refreshFilterResizer(e){if(!this.positionableFeature||"toolPanel"===e)return;const t="floatingFilter"===e||"columnFilter"===e,{positionableFeature:i,gridOptionsService:n}=this;t?(i.restoreLastSize(),i.setResizable(n.get("enableRtl")?{bottom:!0,bottomLeft:!0,left:!0}:{bottom:!0,bottomRight:!0,right:!0})):(this.positionableFeature.removeSizeFromEl(),this.positionableFeature.setResizable(!1)),this.positionableFeature.constrainSizeToAvailableHeight(!0)}afterGuiDetached(){this.checkApplyDebounce(),this.positionableFeature&&this.positionableFeature.constrainSizeToAvailableHeight(!1)}static getDebounceMs(e,t){return Wr.isUseApplyButton(e)?(null!=e.debounceMs&&console.warn("AG Grid: debounceMs is ignored when apply button is present"),0):null!=e.debounceMs?e.debounceMs:t}static isUseApplyButton(e){return!!e.buttons&&e.buttons.indexOf("apply")>=0}refresh(e){return this.providedFilterParams=e,!0}destroy(){const e=this.getGui();e&&e.removeEventListener("submit",this.onFormSubmit),this.hidePopup=null,this.positionableFeature&&(this.positionableFeature=this.destroyBean(this.positionableFeature)),this.appliedModel=null,super.destroy()}translate(e){return this.localeService.getLocaleTextFunc()(e,Ld[e])}getCellValue(e){return this.providedFilterParams.getValue(e)}getPositionableElement(){return this.eFilterBody}}kd([P("rowModel")],Wr.prototype,"rowModel",void 0),kd([re("eFilterBody")],Wr.prototype,"eFilterBody",void 0),kd([Se],Wr.prototype,"postConstruct",null);class FS extends Ne{constructor(e,t){super(t),this.labelSeparator="",this.labelAlignment="left",this.disabled=!1,this.label="",this.config=e||{}}postConstruct(){this.addCssClass("ag-labeled"),this.eLabel.classList.add("ag-label");const{labelSeparator:e,label:t,labelWidth:i,labelAlignment:n}=this.config;null!=e&&this.setLabelSeparator(e),null!=t&&this.setLabel(t),null!=i&&this.setLabelWidth(i),this.setLabelAlignment(n||this.labelAlignment),this.refreshLabel()}refreshLabel(){es(this.eLabel),"string"==typeof this.label?this.eLabel.innerText=this.label+this.labelSeparator:this.label&&this.eLabel.appendChild(this.label),""===this.label?(si(this.eLabel,!1),In(this.eLabel,"presentation")):(si(this.eLabel,!0),In(this.eLabel,null))}setLabelSeparator(e){return this.labelSeparator===e||(this.labelSeparator=e,null!=this.label&&this.refreshLabel()),this}getLabelId(){return this.eLabel.id=this.eLabel.id||`ag-${this.getCompId()}-label`,this.eLabel.id}getLabel(){return this.label}setLabel(e){return this.label===e||(this.label=e,this.refreshLabel()),this}setLabelAlignment(e){const i=this.getGui().classList;return i.toggle("ag-label-align-left","left"===e),i.toggle("ag-label-align-right","right"===e),i.toggle("ag-label-align-top","top"===e),this}setLabelEllipsis(e){return this.eLabel.classList.toggle("ag-label-ellipsis",e),this}setLabelWidth(e){return null==this.label||Of(this.eLabel,e),this}setDisabled(e){e=!!e;const t=this.getGui();return Fd(t,e),t.classList.toggle("ag-disabled",e),this.disabled=e,this}isDisabled(){return!!this.disabled}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Se],FS.prototype,"postConstruct",null);class KR extends FS{constructor(e,t,i){super(e,t),this.className=i}postConstruct(){super.postConstruct(),this.className&&this.addCssClass(this.className),this.refreshAriaLabelledBy()}refreshAriaLabelledBy(){const e=this.getAriaElement(),t=this.getLabelId();null!==MR(e)?hS(e,""):hS(e,t??"")}setAriaLabel(e){return bc(this.getAriaElement(),e),this.refreshAriaLabelledBy(),this}onValueChange(e){return this.addManagedListener(this,G.EVENT_FIELD_VALUE_CHANGED,()=>e(this.getValue())),this}getWidth(){return this.getGui().clientWidth}setWidth(e){return Ho(this.getGui(),e),this}getPreviousValue(){return this.previousValue}getValue(){return this.value}setValue(e,t){return this.value===e||(this.previousValue=this.value,this.value=e,t||this.dispatchEvent({type:G.EVENT_FIELD_VALUE_CHANGED})),this}}var Pf=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Gd extends KR{constructor(e){if(super(e,e?.template||'\n    <div class="ag-picker-field" role="presentation">\n        <div ref="eLabel"></div>\n            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-picker-collapsed">\n            <div ref="eDisplayField" class="ag-picker-field-display"></div>\n            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n        </div>\n    </div>',e?.className),this.isPickerDisplayed=!1,this.skipClick=!1,this.pickerGap=4,this.hideCurrentPicker=null,this.ariaRole=e?.ariaRole,this.onPickerFocusIn=this.onPickerFocusIn.bind(this),this.onPickerFocusOut=this.onPickerFocusOut.bind(this),!e)return;const{pickerGap:t,maxPickerHeight:i,variableWidth:n,minPickerWidth:s,maxPickerWidth:o}=e;null!=t&&(this.pickerGap=t),this.variableWidth=!!n,null!=i&&this.setPickerMaxHeight(i),null!=s&&this.setPickerMinWidth(s),null!=o&&this.setPickerMaxWidth(o)}postConstruct(){super.postConstruct(),this.setupAria();const e=`ag-${this.getCompId()}-display`;this.eDisplayField.setAttribute("id",e);const t=this.getAriaElement();this.addManagedListener(t,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(this.eLabel,"mousedown",this.onLabelOrWrapperMouseDown.bind(this)),this.addManagedListener(this.eWrapper,"mousedown",this.onLabelOrWrapperMouseDown.bind(this));const{pickerIcon:i}=this.config;if(i){const n=Nn(i,this.gridOptionsService);n&&this.eIcon.appendChild(n)}}setupAria(){const e=this.getAriaElement();e.setAttribute("tabindex",this.gridOptionsService.get("tabIndex").toString()),_c(e,!1),this.ariaRole&&In(e,this.ariaRole)}onLabelOrWrapperMouseDown(e){if(e){const t=this.getFocusableElement();if(t!==this.eWrapper&&e?.target===t)return;e.preventDefault(),this.getFocusableElement().focus()}this.skipClick?this.skipClick=!1:this.isDisabled()||(this.isPickerDisplayed?this.hidePicker():this.showPicker())}onKeyDown(e){switch(e.key){case ge.UP:case ge.DOWN:case ge.ENTER:case ge.SPACE:e.preventDefault(),this.onLabelOrWrapperMouseDown();break;case ge.ESCAPE:this.isPickerDisplayed&&(e.preventDefault(),e.stopPropagation(),this.hideCurrentPicker&&this.hideCurrentPicker())}}showPicker(){this.isPickerDisplayed=!0,this.pickerComponent||(this.pickerComponent=this.createPickerComponent());const e=this.pickerComponent.getGui();e.addEventListener("focusin",this.onPickerFocusIn),e.addEventListener("focusout",this.onPickerFocusOut),this.hideCurrentPicker=this.renderAndPositionPicker(),this.toggleExpandedStyles(!0)}renderAndPositionPicker(){const e=this.gridOptionsService.getDocument(),t=this.pickerComponent.getGui();this.gridOptionsService.get("suppressScrollWhenPopupsAreOpen")||(this.destroyMouseWheelFunc=this.addManagedListener(this.eventService,G.EVENT_BODY_SCROLL,()=>{this.hidePicker()}));const i=this.localeService.getLocaleTextFunc(),{pickerAriaLabelKey:n,pickerAriaLabelValue:s,modalPicker:o=!0}=this.config,a={modal:o,eChild:t,closeOnEsc:!0,closedCallback:()=>{const b=e.activeElement===e.body;this.beforeHidePicker(),b&&this.isAlive()&&this.getFocusableElement().focus()},ariaLabel:i(n,s)},c=this.popupService.addPopup(a),{maxPickerHeight:u,minPickerWidth:p,maxPickerWidth:g,variableWidth:m}=this;m?(p&&(t.style.minWidth=p),t.style.width=TS(Rf(this.eWrapper)),g&&(t.style.maxWidth=g)):Of(t,g??Rf(this.eWrapper));const y=u??`${Nd(this.popupService.getPopupParent())}px`;return t.style.setProperty("max-height",y),t.style.position="absolute",this.alignPickerToComponent(),c.hideFunc}alignPickerToComponent(){if(!this.pickerComponent)return;const{pickerType:e}=this.config,{pickerGap:t}=this,i=this.gridOptionsService.get("enableRtl")?"right":"left";this.popupService.positionPopupByComponent({type:e,eventSource:this.eWrapper,ePopup:this.pickerComponent.getGui(),position:"under",alignSide:i,keepWithinBounds:!0,nudgeY:t})}beforeHidePicker(){this.destroyMouseWheelFunc&&(this.destroyMouseWheelFunc(),this.destroyMouseWheelFunc=void 0),this.toggleExpandedStyles(!1);const e=this.pickerComponent.getGui();e.removeEventListener("focusin",this.onPickerFocusIn),e.removeEventListener("focusout",this.onPickerFocusOut),this.isPickerDisplayed=!1,this.pickerComponent=void 0,this.hideCurrentPicker=null}toggleExpandedStyles(e){this.isAlive()&&(_c(this.getAriaElement(),e),this.eWrapper.classList.toggle("ag-picker-expanded",e),this.eWrapper.classList.toggle("ag-picker-collapsed",!e))}onPickerFocusIn(){this.togglePickerHasFocus(!0)}onPickerFocusOut(e){var t;null!==(t=this.pickerComponent)&&void 0!==t&&t.getGui().contains(e.relatedTarget)||this.togglePickerHasFocus(!1)}togglePickerHasFocus(e){!this.pickerComponent||this.eWrapper.classList.toggle("ag-picker-has-focus",e)}hidePicker(){this.hideCurrentPicker&&this.hideCurrentPicker()}setInputWidth(e){return Of(this.eWrapper,e),this}getFocusableElement(){return this.eWrapper}setPickerGap(e){return this.pickerGap=e,this}setPickerMinWidth(e){return"number"==typeof e&&(e=`${e}px`),this.minPickerWidth=e??void 0,this}setPickerMaxWidth(e){return"number"==typeof e&&(e=`${e}px`),this.maxPickerWidth=e??void 0,this}setPickerMaxHeight(e){return"number"==typeof e&&(e=`${e}px`),this.maxPickerHeight=e??void 0,this}destroy(){this.hidePicker(),super.destroy()}}Pf([P("popupService")],Gd.prototype,"popupService",void 0),Pf([re("eLabel")],Gd.prototype,"eLabel",void 0),Pf([re("eWrapper")],Gd.prototype,"eWrapper",void 0),Pf([re("eDisplayField")],Gd.prototype,"eDisplayField",void 0),Pf([re("eIcon")],Gd.prototype,"eIcon",void 0);class Dc extends Ne{constructor(e="default"){super(`<div class="ag-list ag-${e}-list" role="listbox"></div>`),this.cssIdentifier=e,this.options=[],this.itemEls=[]}init(){this.addManagedListener(this.getGui(),"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){const t=e.key;switch(t){case ge.ENTER:if(this.highlightedEl){const s=this.itemEls.indexOf(this.highlightedEl);this.setValueByIndex(s)}else this.setValue(this.getValue());break;case ge.DOWN:case ge.UP:const i=t===ge.DOWN;let n;if(e.preventDefault(),this.highlightedEl){let o=this.itemEls.indexOf(this.highlightedEl)+(i?1:-1);o=Math.min(Math.max(o,0),this.itemEls.length-1),n=this.itemEls[o]}else n=this.itemEls[i?0:this.itemEls.length-1];this.highlightItem(n)}}addOptions(e){return e.forEach(t=>this.addOption(t)),this}addOption(e){const{value:t,text:i}=e,n=yn(i||t);return this.options.push({value:t,text:n}),this.renderOption(t,n),this.updateIndices(),this}updateIndices(){const e=this.getGui().querySelectorAll(".ag-list-item");e.forEach((t,i)=>{gS(t,i+1),cv(t,e.length)})}renderOption(e,t){const i=document.createElement("div");In(i,"option"),i.classList.add("ag-list-item",`ag-${this.cssIdentifier}-list-item`),i.innerHTML=`<span>${t}</span>`,i.tabIndex=-1,this.itemEls.push(i),this.addManagedListener(i,"mouseover",()=>this.highlightItem(i)),this.addManagedListener(i,"mouseleave",()=>this.clearHighlighted()),this.addManagedListener(i,"click",()=>this.setValue(e)),this.getGui().appendChild(i)}setValue(e,t){if(this.value===e)return this.fireItemSelected(),this;if(null==e)return this.reset(),this;const i=this.options.findIndex(n=>n.value===e);if(-1!==i){const n=this.options[i];this.value=n.value,this.displayValue=null!=n.text?n.text:n.value,this.highlightItem(this.itemEls[i]),t||this.fireChangeEvent()}return this}setValueByIndex(e){return this.setValue(this.options[e].value)}getValue(){return this.value}getDisplayValue(){return this.displayValue}refreshHighlighted(){this.clearHighlighted();const e=this.options.findIndex(t=>t.value===this.value);-1!==e&&this.highlightItem(this.itemEls[e])}reset(){this.value=null,this.displayValue=null,this.clearHighlighted(),this.fireChangeEvent()}highlightItem(e){!Fn(e)||(this.clearHighlighted(),this.highlightedEl=e,this.highlightedEl.classList.add(Dc.ACTIVE_CLASS),Ef(this.highlightedEl,!0),this.highlightedEl.focus())}clearHighlighted(){!this.highlightedEl||!Fn(this.highlightedEl)||(this.highlightedEl.classList.remove(Dc.ACTIVE_CLASS),Ef(this.highlightedEl,!1),this.highlightedEl=null)}fireChangeEvent(){this.dispatchEvent({type:G.EVENT_FIELD_VALUE_CHANGED}),this.fireItemSelected()}fireItemSelected(){this.dispatchEvent({type:Dc.EVENT_ITEM_SELECTED})}}Dc.EVENT_ITEM_SELECTED="selectedItem",Dc.ACTIVE_CLASS="ag-active-item",function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Se],Dc.prototype,"init",null);let Tc=(()=>{class r extends Gd{constructor(t){super(Object.assign({pickerAriaLabelKey:"ariaLabelSelectField",pickerAriaLabelValue:"Select Field",pickerType:"ag-list",className:"ag-select",pickerIcon:"smallDown",ariaRole:"combobox"},t))}postConstruct(){super.postConstruct(),this.createListComponent(),this.eWrapper.tabIndex=this.gridOptionsService.get("tabIndex")}createListComponent(){this.listComponent=this.createBean(new Dc("select")),this.listComponent.setParentComponent(this);const t=this.listComponent.getAriaElement(),i=`ag-select-list-${this.listComponent.getCompId()}`;t.setAttribute("id",i),cE(this.getAriaElement(),t),this.listComponent.addGuiEventListener("keydown",n=>{n.key===ge.TAB&&(n.preventDefault(),n.stopImmediatePropagation(),this.getGui().dispatchEvent(new KeyboardEvent("keydown",{key:n.key,shiftKey:n.shiftKey,ctrlKey:n.ctrlKey,bubbles:!0})))}),this.listComponent.addManagedListener(this.listComponent,Dc.EVENT_ITEM_SELECTED,()=>{this.hidePicker(),this.dispatchEvent({type:r.EVENT_ITEM_SELECTED})}),this.listComponent.addManagedListener(this.listComponent,G.EVENT_FIELD_VALUE_CHANGED,()=>{!this.listComponent||(this.setValue(this.listComponent.getValue(),!1,!0),this.hidePicker())})}createPickerComponent(){return this.listComponent}showPicker(){!this.listComponent||(super.showPicker(),this.listComponent.refreshHighlighted())}addOptions(t){return t.forEach(i=>this.addOption(i)),this}addOption(t){return this.listComponent.addOption(t),this}setValue(t,i,n){return this.value!==t&&this.listComponent?(n||this.listComponent.setValue(t,!0),this.listComponent.getValue()===this.getValue()?this:(this.eDisplayField.innerHTML=this.listComponent.getDisplayValue(),super.setValue(t,i))):this}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),super.destroy()}}return r.EVENT_ITEM_SELECTED="selectedItem",r})();var bv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class xa extends KR{constructor(e,t,i="text",n="input"){super(e,`\n            <div role="presentation">\n                <div ref="eLabel" class="ag-input-field-label"></div>\n                <div ref="eWrapper" class="ag-wrapper ag-input-wrapper" role="presentation">\n                    <${n} ref="eInput" class="ag-input-field-input"></${n}>\n                </div>\n            </div>`,t),this.inputType=i,this.displayFieldTag=n}postConstruct(){super.postConstruct(),this.setInputType(),this.eLabel.classList.add(`${this.className}-label`),this.eWrapper.classList.add(`${this.className}-input-wrapper`),this.eInput.classList.add(`${this.className}-input`),this.addCssClass("ag-input-field"),this.eInput.id=this.eInput.id||`ag-${this.getCompId()}-input`;const{width:e,value:t}=this.config;null!=e&&this.setWidth(e),null!=t&&this.setValue(t),this.addInputListeners(),this.activateTabIndex([this.eInput])}addInputListeners(){this.addManagedListener(this.eInput,"input",e=>this.setValue(e.target.value))}setInputType(){"input"===this.displayFieldTag&&this.eInput.setAttribute("type",this.inputType)}getInputElement(){return this.eInput}setInputWidth(e){return Of(this.eWrapper,e),this}setInputName(e){return this.getInputElement().setAttribute("name",e),this}getFocusableElement(){return this.eInput}setMaxLength(e){return this.eInput.maxLength=e,this}setInputPlaceholder(e){return Oa(this.eInput,"placeholder",e),this}setInputAriaLabel(e){return bc(this.eInput,e),this.refreshAriaLabelledBy(),this}setDisabled(e){return Fd(this.eInput,e),super.setDisabled(e)}setAutoComplete(e){return Oa(this.eInput,"autocomplete",!0===e?null:"string"==typeof e?e:"off"),this}}bv([re("eLabel")],xa.prototype,"eLabel",void 0),bv([re("eWrapper")],xa.prototype,"eWrapper",void 0),bv([re("eInput")],xa.prototype,"eInput",void 0);class Rc extends xa{constructor(e,t="ag-checkbox",i="checkbox"){super(e,t,i),this.labelAlignment="right",this.selected=!1,this.readOnly=!1,this.passive=!1}addInputListeners(){this.addManagedListener(this.eInput,"click",this.onCheckboxClick.bind(this)),this.addManagedListener(this.eLabel,"click",this.toggle.bind(this))}getNextValue(){return void 0===this.selected||!this.selected}setPassive(e){this.passive=e}isReadOnly(){return this.readOnly}setReadOnly(e){this.eWrapper.classList.toggle("ag-disabled",e),this.eInput.disabled=e,this.readOnly=e}setDisabled(e){return this.eWrapper.classList.toggle("ag-disabled",e),super.setDisabled(e)}toggle(){if(this.eInput.disabled)return;const e=this.isSelected(),t=this.getNextValue();this.passive?this.dispatchChange(t,e):this.setValue(t)}getValue(){return this.isSelected()}setValue(e,t){return this.refreshSelectedClass(e),this.setSelected(e,t),this}setName(e){return this.getInputElement().name=e,this}isSelected(){return this.selected}setSelected(e,t){this.isSelected()!==e&&(this.previousValue=this.isSelected(),e=this.selected="boolean"==typeof e?e:void 0,this.eInput.checked=e,this.eInput.indeterminate=void 0===e,t||this.dispatchChange(this.selected,this.previousValue))}dispatchChange(e,t,i){this.dispatchEvent({type:G.EVENT_FIELD_VALUE_CHANGED,selected:e,previousValue:t,event:i});const n=this.getInputElement();this.eventService.dispatchEvent({type:G.EVENT_CHECKBOX_CHANGED,id:n.id,name:n.name,selected:e,previousValue:t})}onCheckboxClick(e){if(this.passive||this.eInput.disabled)return;const t=this.isSelected(),i=this.selected=e.target.checked;this.refreshSelectedClass(i),this.dispatchChange(i,t,e)}refreshSelectedClass(e){this.eWrapper.classList.toggle("ag-checked",!0===e),this.eWrapper.classList.toggle("ag-indeterminate",null==e)}}class NE extends Rc{constructor(e){super(e,"ag-radio-button","radio")}isSelected(){return this.eInput.checked}toggle(){this.eInput.disabled||this.isSelected()||this.setValue(!0)}addInputListeners(){super.addInputListeners(),this.addManagedListener(this.eventService,G.EVENT_CHECKBOX_CHANGED,this.onChange.bind(this))}onChange(e){e.selected&&e.name&&this.eInput.name&&this.eInput.name===e.name&&e.id&&this.eInput.id!==e.id&&this.setValue(!1,!0)}}class NS{constructor(e,t,i){this.localeService=e,this.optionsFactory=t,this.valueFormatter=i}getModelAsString(e){if(!e)return null;const t=null!=e.operator,i=this.localeService.getLocaleTextFunc();if(t){const n=e;let{conditions:s}=n;if(!s){const{condition1:c,condition2:u}=n;s=[c,u]}const o=s.map(c=>this.getModelAsString(c)),a="AND"===n.operator?"andCondition":"orCondition";return o.join(` ${i(a,Ld[a])} `)}if(e.type===an.BLANK||e.type===an.NOT_BLANK)return i(e.type,e.type);{const n=e,s=this.optionsFactory.getCustomOption(n.type),{displayKey:o,displayName:a,numberOfInputs:c}=s||{};return o&&a&&0===c?(i(o,a),a):this.conditionToString(n,s)}}updateParams(e){this.optionsFactory=e.optionsFactory}formatValue(e){var t;return this.valueFormatter?null!==(t=this.valueFormatter(e??null))&&void 0!==t?t:"":String(e)}}let an=(()=>{class r extends Wr{constructor(){super(...arguments),this.eTypes=[],this.eJoinOperatorPanels=[],this.eJoinOperatorsAnd=[],this.eJoinOperatorsOr=[],this.eConditionBodies=[],this.listener=()=>this.onUiChanged(),this.lastUiCompletePosition=null,this.joinOperatorId=0}getNumberOfInputs(t){const i=this.optionsFactory.getCustomOption(t);if(i){const{numberOfInputs:s}=i;return s??1}return t&&[r.EMPTY,r.NOT_BLANK,r.BLANK].indexOf(t)>=0?0:t===r.IN_RANGE?2:1}onFloatingFilterChanged(t,i){this.setTypeFromFloatingFilter(t),this.setValueFromFloatingFilter(i),this.onUiChanged(!0)}setTypeFromFloatingFilter(t){this.eTypes.forEach((i,n)=>{i.setValue(0===n?t:this.optionsFactory.getDefaultOption(),!0)})}getModelFromUi(){const t=this.getUiCompleteConditions();return 0===t.length?null:this.maxNumConditions>1&&t.length>1?{filterType:this.getFilterType(),operator:this.getJoinOperator(),condition1:t[0],condition2:t[1],conditions:t}:t[0]}getConditionTypes(){return this.eTypes.map(t=>t.getValue())}getConditionType(t){return this.eTypes[t].getValue()}getJoinOperator(){return 0===this.eJoinOperatorsOr.length?this.defaultJoinOperator:!0===this.eJoinOperatorsOr[0].getValue()?"OR":"AND"}areModelsEqual(t,i){if(!t&&!i)return!0;if(!t&&i||t&&!i)return!1;const n=!t.operator,s=!i.operator;if(!n&&s||n&&!s)return!1;let a;if(n)a=this.areSimpleModelsEqual(t,i);else{const c=t,u=i;a=c.operator===u.operator&&yc(c.conditions,u.conditions,(p,g)=>this.areSimpleModelsEqual(p,g))}return a}shouldRefresh(t){var i,n,s;const o=this.getModel(),a=o?null!==(i=o.conditions)&&void 0!==i?i:[o]:null,c=null!==(s=null===(n=t.filterOptions)||void 0===n?void 0:n.map(p=>"string"==typeof p?p:p.displayKey))&&void 0!==s?s:this.getDefaultFilterOptions();return!(a&&!a.every(p=>void 0!==c.find(g=>g===p.type))||"number"==typeof t.maxNumConditions&&a&&a.length>t.maxNumConditions)}refresh(t){return!(!this.shouldRefresh(t)||!super.refresh(t)||(this.setParams(t),this.removeConditionsAndOperators(0),this.createOption(),this.setModel(this.getModel()),0))}setModelIntoUi(t){if(t.operator){let n=t;n.conditions||(n.conditions=[n.condition1,n.condition2]);const s=this.validateAndUpdateConditions(n.conditions),o=this.getNumConditions();if(s<o)this.removeConditionsAndOperators(s);else if(s>o)for(let c=o;c<s;c++)this.createJoinOperatorPanel(),this.createOption();const a="OR"===n.operator;this.eJoinOperatorsAnd.forEach(c=>c.setValue(!a,!0)),this.eJoinOperatorsOr.forEach(c=>c.setValue(a,!0)),n.conditions.forEach((c,u)=>{this.eTypes[u].setValue(c.type,!0),this.setConditionIntoUi(c,u)})}else{const n=t;this.getNumConditions()>1&&this.removeConditionsAndOperators(1),this.eTypes[0].setValue(n.type,!0),this.setConditionIntoUi(n,0)}return this.lastUiCompletePosition=this.getNumConditions()-1,this.createMissingConditionsAndOperators(),this.onUiChanged(),$t.resolve()}validateAndUpdateConditions(t){let i=t.length;return i>this.maxNumConditions&&(t.splice(this.maxNumConditions),st('Filter Model contains more conditions than "filterParams.maxNumConditions". Additional conditions have been ignored.'),i=this.maxNumConditions),i}doesFilterPass(t){var i;const n=this.getModel();if(null==n)return!0;const{operator:s}=n,o=[];return s?o.push(...null!==(i=n.conditions)&&void 0!==i?i:[]):o.push(n),o[s&&"OR"===s?"some":"every"](c=>this.individualConditionPasses(t,c))}setParams(t){super.setParams(t),this.setNumConditions(t),this.defaultJoinOperator=this.getDefaultJoinOperator(t.defaultJoinOperator),this.filterPlaceholder=t.filterPlaceholder,this.optionsFactory=new PE,this.optionsFactory.init(t,this.getDefaultFilterOptions()),this.createFilterListOptions(),this.createOption(),this.createMissingConditionsAndOperators(),this.isReadOnly()&&this.eFilterBody.setAttribute("tabindex","-1")}setNumConditions(t){var i,n;null!=t.suppressAndOrCondition&&st('Since v29.2 "filterParams.suppressAndOrCondition" is deprecated. Use "filterParams.maxNumConditions = 1" instead.'),null!=t.alwaysShowBothConditions&&st('Since v29.2 "filterParams.alwaysShowBothConditions" is deprecated. Use "filterParams.numAlwaysVisibleConditions = 2" instead.'),this.maxNumConditions=null!==(i=t.maxNumConditions)&&void 0!==i?i:t.suppressAndOrCondition?1:2,this.maxNumConditions<1&&(st('"filterParams.maxNumConditions" must be greater than or equal to zero.'),this.maxNumConditions=1),this.numAlwaysVisibleConditions=null!==(n=t.numAlwaysVisibleConditions)&&void 0!==n?n:t.alwaysShowBothConditions?2:1,this.numAlwaysVisibleConditions<1&&(st('"filterParams.numAlwaysVisibleConditions" must be greater than or equal to zero.'),this.numAlwaysVisibleConditions=1),this.numAlwaysVisibleConditions>this.maxNumConditions&&(st('"filterParams.numAlwaysVisibleConditions" cannot be greater than "filterParams.maxNumConditions".'),this.numAlwaysVisibleConditions=this.maxNumConditions)}createOption(){const t=this.createManagedBean(new Tc);this.eTypes.push(t),t.addCssClass("ag-filter-select"),this.eFilterBody.appendChild(t.getGui());const i=this.createValueElement();this.eConditionBodies.push(i),this.eFilterBody.appendChild(i),this.putOptionsIntoDropdown(t),this.resetType(t);const n=this.getNumConditions()-1;this.forEachPositionInput(n,s=>this.resetInput(s)),this.addChangedListeners(t,n)}createJoinOperatorPanel(){const t=document.createElement("div");this.eJoinOperatorPanels.push(t),t.classList.add("ag-filter-condition");const i=this.createJoinOperator(this.eJoinOperatorsAnd,t,"and"),n=this.createJoinOperator(this.eJoinOperatorsOr,t,"or");this.eFilterBody.appendChild(t);const s=this.eJoinOperatorPanels.length-1,o=this.joinOperatorId++;this.resetJoinOperatorAnd(i,s,o),this.resetJoinOperatorOr(n,s,o),this.isReadOnly()||(i.onValueChange(this.listener),n.onValueChange(this.listener))}createJoinOperator(t,i,n){const s=this.createManagedBean(new NE);return t.push(s),s.addCssClass("ag-filter-condition-operator"),s.addCssClass(`ag-filter-condition-operator-${n}`),i.appendChild(s.getGui()),s}getDefaultJoinOperator(t){return"AND"===t||"OR"===t?t:"AND"}createFilterListOptions(){const t=this.optionsFactory.getFilterOptions();this.filterListOptions=t.map(i=>"string"==typeof i?this.createBoilerplateListOption(i):this.createCustomListOption(i))}putOptionsIntoDropdown(t){this.filterListOptions.forEach(i=>{t.addOption(i)}),t.setDisabled(this.filterListOptions.length<=1)}createBoilerplateListOption(t){return{value:t,text:this.translate(t)}}createCustomListOption(t){const{displayKey:i}=t,n=this.optionsFactory.getCustomOption(t.displayKey);return{value:i,text:n?this.localeService.getLocaleTextFunc()(n.displayKey,n.displayName):this.translate(i)}}isAllowTwoConditions(){return this.maxNumConditions>=2}createBodyTemplate(){return""}getCssIdentifier(){return"simple-filter"}updateUiVisibility(){const t=this.getJoinOperator();this.updateNumConditions(),this.updateConditionStatusesAndValues(this.lastUiCompletePosition,t)}updateNumConditions(){var t;let i=-1,n=!0;for(let s=0;s<this.getNumConditions();s++)this.isConditionUiComplete(s)?i=s:n=!1;if(this.shouldAddNewConditionAtEnd(n))this.createJoinOperatorPanel(),this.createOption();else{const s=null!==(t=this.lastUiCompletePosition)&&void 0!==t?t:this.getNumConditions()-2;if(i<s){this.removeConditionsAndOperators(s+1);const o=i+1,a=s-o;a>0&&this.removeConditionsAndOperators(o,a),this.createMissingConditionsAndOperators()}}this.lastUiCompletePosition=i}updateConditionStatusesAndValues(t,i){this.eTypes.forEach((s,o)=>{const a=this.isConditionDisabled(o,t);s.setDisabled(a||this.filterListOptions.length<=1),1===o&&(Fd(this.eJoinOperatorPanels[0],a),this.eJoinOperatorsAnd[0].setDisabled(a),this.eJoinOperatorsOr[0].setDisabled(a))}),this.eConditionBodies.forEach((s,o)=>{si(s,this.isConditionBodyVisible(o))});const n="OR"===(i??this.getJoinOperator());this.eJoinOperatorsAnd.forEach((s,o)=>{s.setValue(!n,!0)}),this.eJoinOperatorsOr.forEach((s,o)=>{s.setValue(n,!0)}),this.forEachInput((s,o,a,c)=>{this.setElementDisplayed(s,o<c),this.setElementDisabled(s,this.isConditionDisabled(a,t))}),this.resetPlaceholder()}shouldAddNewConditionAtEnd(t){return t&&this.getNumConditions()<this.maxNumConditions&&!this.isReadOnly()}removeConditionsAndOperators(t,i){if(t>=this.getNumConditions())return;this.removeComponents(this.eTypes,t,i),this.removeElements(this.eConditionBodies,t,i),this.removeValueElements(t,i);const n=Math.max(t-1,0);this.removeElements(this.eJoinOperatorPanels,n,i),this.removeComponents(this.eJoinOperatorsAnd,n,i),this.removeComponents(this.eJoinOperatorsOr,n,i)}removeElements(t,i,n){this.removeItems(t,i,n).forEach(o=>bl(o))}removeComponents(t,i,n){this.removeItems(t,i,n).forEach(o=>{bl(o.getGui()),this.destroyBean(o)})}removeItems(t,i,n){return null==n?t.splice(i):t.splice(i,n)}afterGuiAttached(t){if(super.afterGuiAttached(t),this.resetPlaceholder(),!t?.suppressFocus)if(this.isReadOnly())this.eFilterBody.focus();else{const i=this.getInputs(0)[0];if(!i)return;i instanceof xa&&i.getInputElement().focus()}}afterGuiDetached(){super.afterGuiDetached();const t=this.getModel();this.resetUiToActiveModel(t);let i=-1,n=-1,s=!1;const o=this.getJoinOperator();for(let c=this.getNumConditions()-1;c>=0;c--)if(this.isConditionUiComplete(c))-1===i&&(i=c,n=c);else{const p=c<i;(c>=this.numAlwaysVisibleConditions&&!this.isConditionUiComplete(c-1)||p)&&(this.removeConditionsAndOperators(c,1),s=!0,p&&n--)}let a=!1;this.getNumConditions()<this.numAlwaysVisibleConditions&&(this.createMissingConditionsAndOperators(),a=!0),this.shouldAddNewConditionAtEnd(n===this.getNumConditions()-1)&&(this.createJoinOperatorPanel(),this.createOption(),a=!0),a&&this.updateConditionStatusesAndValues(n,o),s&&this.updateJoinOperatorsDisabled(),this.lastUiCompletePosition=n}getPlaceholderText(t,i){let n=this.translate(t);if(mh(this.filterPlaceholder)){const s=this.filterPlaceholder,o=this.eTypes[i].getValue();n=s({filterOptionKey:o,filterOption:this.translate(o),placeholder:n})}else"string"==typeof this.filterPlaceholder&&(n=this.filterPlaceholder);return n}resetPlaceholder(){const t=this.localeService.getLocaleTextFunc();this.forEachInput((i,n,s,o)=>{if(!(i instanceof xa))return;const a=0===n&&o>1?"inRangeStart":0===n?"filterOoo":"inRangeEnd",c=0===n&&o>1?t("ariaFilterFromValue","Filter from value"):0===n?t("ariaFilterValue","Filter Value"):t("ariaFilterToValue","Filter to Value");i.setInputPlaceholder(this.getPlaceholderText(a,s)),i.setInputAriaLabel(c)})}setElementValue(t,i,n){t instanceof xa&&t.setValue(null!=i?String(i):null,!0)}setElementDisplayed(t,i){t instanceof Ne&&si(t.getGui(),i)}setElementDisabled(t,i){t instanceof Ne&&Fd(t.getGui(),i)}attachElementOnChange(t,i){t instanceof xa&&t.onValueChange(i)}forEachInput(t){this.getConditionTypes().forEach((i,n)=>{this.forEachPositionTypeInput(n,i,t)})}forEachPositionInput(t,i){const n=this.getConditionType(t);this.forEachPositionTypeInput(t,n,i)}forEachPositionTypeInput(t,i,n){const s=this.getNumberOfInputs(i),o=this.getInputs(t);for(let a=0;a<o.length;a++){const c=o[a];null!=c&&n(c,a,t,s)}}isConditionDisabled(t,i){return!!this.isReadOnly()||0!==t&&t>i+1}isConditionBodyVisible(t){const i=this.getConditionType(t);return this.getNumberOfInputs(i)>0}isConditionUiComplete(t){return!(t>=this.getNumConditions()||this.getConditionType(t)===r.EMPTY||this.getValues(t).some(n=>null==n))}getNumConditions(){return this.eTypes.length}getUiCompleteConditions(){const t=[];for(let i=0;i<this.getNumConditions();i++)this.isConditionUiComplete(i)&&t.push(this.createCondition(i));return t}createMissingConditionsAndOperators(){if(!this.isReadOnly())for(let t=this.getNumConditions();t<this.numAlwaysVisibleConditions;t++)this.createJoinOperatorPanel(),this.createOption()}resetUiToDefaults(t){return this.removeConditionsAndOperators(this.isReadOnly()?1:this.numAlwaysVisibleConditions),this.eTypes.forEach(i=>this.resetType(i)),this.eJoinOperatorsAnd.forEach((i,n)=>this.resetJoinOperatorAnd(i,n,this.joinOperatorId+n)),this.eJoinOperatorsOr.forEach((i,n)=>this.resetJoinOperatorOr(i,n,this.joinOperatorId+n)),this.joinOperatorId++,this.forEachInput(i=>this.resetInput(i)),this.resetPlaceholder(),this.createMissingConditionsAndOperators(),this.lastUiCompletePosition=null,t||this.onUiChanged(),$t.resolve()}resetType(t){const n=this.localeService.getLocaleTextFunc()("ariaFilteringOperator","Filtering operator");t.setValue(this.optionsFactory.getDefaultOption(),!0).setAriaLabel(n).setDisabled(this.isReadOnly()||this.filterListOptions.length<=1)}resetJoinOperatorAnd(t,i,n){this.resetJoinOperator(t,i,this.isDefaultOperator("AND"),this.translate("andCondition"),n)}resetJoinOperatorOr(t,i,n){this.resetJoinOperator(t,i,this.isDefaultOperator("OR"),this.translate("orCondition"),n)}resetJoinOperator(t,i,n,s,o){this.updateJoinOperatorDisabled(t.setValue(n,!0).setName(`ag-simple-filter-and-or-${this.getCompId()}-${o}`).setLabel(s),i)}updateJoinOperatorsDisabled(){this.eJoinOperatorsAnd.forEach((t,i)=>this.updateJoinOperatorDisabled(t,i)),this.eJoinOperatorsOr.forEach((t,i)=>this.updateJoinOperatorDisabled(t,i))}updateJoinOperatorDisabled(t,i){t.setDisabled(this.isReadOnly()||i>0)}resetInput(t){this.setElementValue(t,null),this.setElementDisabled(t,this.isReadOnly())}setConditionIntoUi(t,i){const n=this.mapValuesFromModel(t);this.forEachInput((s,o,a,c)=>{a===i&&this.setElementValue(s,null!=n[o]?n[o]:null)})}setValueFromFloatingFilter(t){this.forEachInput((i,n,s,o)=>{this.setElementValue(i,0===n&&0===s?t:null,!0)})}isDefaultOperator(t){return t===this.defaultJoinOperator}addChangedListeners(t,i){this.isReadOnly()||(t.onValueChange(this.listener),this.forEachPositionInput(i,n=>{this.attachElementOnChange(n,this.listener)}))}individualConditionPasses(t,i){const n=this.getCellValue(t.node),s=this.mapValuesFromModel(i),o=this.optionsFactory.getCustomOption(i.type);return this.evaluateCustomFilter(o,s,n)??(null==n?this.evaluateNullValue(i.type):this.evaluateNonNullValue(s,n,i,t))}evaluateCustomFilter(t,i,n){if(null==t)return;const{predicate:s}=t;return null==s||i.some(o=>null==o)?void 0:s(i,n)}isBlank(t){return null==t||"string"==typeof t&&0===t.trim().length}hasInvalidInputs(){return!1}}return r.EMPTY="empty",r.BLANK="blank",r.NOT_BLANK="notBlank",r.EQUALS="equals",r.NOT_EQUAL="notEqual",r.LESS_THAN="lessThan",r.LESS_THAN_OR_EQUAL="lessThanOrEqual",r.GREATER_THAN="greaterThan",r.GREATER_THAN_OR_EQUAL="greaterThanOrEqual",r.IN_RANGE="inRange",r.CONTAINS="contains",r.NOT_CONTAINS="notContains",r.STARTS_WITH="startsWith",r.ENDS_WITH="endsWith",r})();class Zt extends an{setParams(e){super.setParams(e),this.scalarFilterParams=e}evaluateNullValue(e){switch(e){case Zt.EQUALS:case Zt.NOT_EQUAL:if(this.scalarFilterParams.includeBlanksInEquals)return!0;break;case Zt.GREATER_THAN:case Zt.GREATER_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInGreaterThan)return!0;break;case Zt.LESS_THAN:case Zt.LESS_THAN_OR_EQUAL:if(this.scalarFilterParams.includeBlanksInLessThan)return!0;break;case Zt.IN_RANGE:if(this.scalarFilterParams.includeBlanksInRange)return!0;break;case Zt.BLANK:return!0;case Zt.NOT_BLANK:return!1}return!1}evaluateNonNullValue(e,t,i){const n=this.comparator(),s=null!=e[0]?n(e[0],t):0;switch(i.type){case Zt.EQUALS:return 0===s;case Zt.NOT_EQUAL:return 0!==s;case Zt.GREATER_THAN:return s>0;case Zt.GREATER_THAN_OR_EQUAL:return s>=0;case Zt.LESS_THAN:return s<0;case Zt.LESS_THAN_OR_EQUAL:return s<=0;case Zt.IN_RANGE:{const o=n(e[1],t);return this.scalarFilterParams.inRangeInclusive?s>=0&&o<=0:s>0&&o<0}case Zt.BLANK:return this.isBlank(t);case Zt.NOT_BLANK:return!this.isBlank(t);default:return console.warn('AG Grid: Unexpected type of filter "'+i.type+'", it looks like the filter was configured with incorrect Filter Options'),!0}}}class Ff extends NS{constructor(e,t,i){super(t,i),this.dateFilterParams=e}conditionToString(e,t){const{type:i}=e,{numberOfInputs:n}=t||{},s=i==an.IN_RANGE||2===n,o=tr(e.dateFrom),a=tr(e.dateTo),c=this.dateFilterParams.inRangeFloatingFilterDateFormat;return s?`${null!==o?bh(o,c):"null"}-${null!==a?bh(a,c):"null"}`:null!=o?bh(o,c):`${i}`}updateParams(e){super.updateParams(e),this.dateFilterParams=e.dateFilterParams}}class Nf extends Zt{constructor(){super("dateFilter"),this.eConditionPanelsFrom=[],this.eConditionPanelsTo=[],this.dateConditionFromComps=[],this.dateConditionToComps=[],this.minValidYear=1e3,this.maxValidYear=1/0,this.minValidDate=null,this.maxValidDate=null}afterGuiAttached(e){super.afterGuiAttached(e),this.dateConditionFromComps[0].afterGuiAttached(e)}mapValuesFromModel(e){const{dateFrom:t,dateTo:i,type:n}=e||{};return[t&&tr(t)||null,i&&tr(i)||null].slice(0,this.getNumberOfInputs(n))}comparator(){return this.dateFilterParams.comparator?this.dateFilterParams.comparator:this.defaultComparator.bind(this)}defaultComparator(e,t){return null==t||t<e?-1:t>e?1:0}setParams(e){this.dateFilterParams=e,super.setParams(e);const t=(i,n)=>{if(null!=e[i]){if(!isNaN(e[i]))return null==e[i]?n:Number(e[i]);console.warn(`AG Grid: DateFilter ${i} is not a number`)}return n};this.minValidYear=t("minValidYear",1e3),this.maxValidYear=t("maxValidYear",1/0),this.minValidYear>this.maxValidYear&&console.warn("AG Grid: DateFilter minValidYear should be <= maxValidYear"),this.minValidDate=e.minValidDate?e.minValidDate instanceof Date?e.minValidDate:tr(e.minValidDate):null,this.maxValidDate=e.maxValidDate?e.maxValidDate instanceof Date?e.maxValidDate:tr(e.maxValidDate):null,this.minValidDate&&this.maxValidDate&&this.minValidDate>this.maxValidDate&&console.warn("AG Grid: DateFilter minValidDate should be <= maxValidDate"),this.filterModelFormatter=new Ff(this.dateFilterParams,this.localeService,this.optionsFactory)}createDateCompWrapper(e){const t=new xE(this.getContext(),this.userComponentFactory,{onDateChanged:()=>this.onUiChanged(),filterParams:this.dateFilterParams},e);return this.addDestroyFunc(()=>t.destroy()),t}setElementValue(e,t){e.setDate(t)}setElementDisplayed(e,t){e.setDisplayed(t)}setElementDisabled(e,t){e.setDisabled(t)}getDefaultFilterOptions(){return Nf.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),this.createFromToElement(e,this.eConditionPanelsFrom,this.dateConditionFromComps,"from"),this.createFromToElement(e,this.eConditionPanelsTo,this.dateConditionToComps,"to"),e}createFromToElement(e,t,i,n){const s=document.createElement("div");s.classList.add(`ag-filter-${n}`),s.classList.add(`ag-filter-date-${n}`),t.push(s),e.appendChild(s),i.push(this.createDateCompWrapper(s))}removeValueElements(e,t){this.removeDateComps(this.dateConditionFromComps,e,t),this.removeDateComps(this.dateConditionToComps,e,t),this.removeItems(this.eConditionPanelsFrom,e,t),this.removeItems(this.eConditionPanelsTo,e,t)}removeDateComps(e,t,i){this.removeItems(e,t,i).forEach(s=>s.destroy())}isValidDateValue(e){if(null===e)return!1;if(this.minValidDate){if(e<this.minValidDate)return!1}else if(e.getUTCFullYear()<this.minValidYear)return!1;if(this.maxValidDate){if(e>this.maxValidDate)return!1}else if(e.getUTCFullYear()>this.maxValidYear)return!1;return!0}isConditionUiComplete(e){if(!super.isConditionUiComplete(e))return!1;let t=!0;return this.forEachInput((i,n,s,o)=>{s!==e||!t||n>=o||(t=t&&this.isValidDateValue(i.getDate()))}),t}areSimpleModelsEqual(e,t){return e.dateFrom===t.dateFrom&&e.dateTo===t.dateTo&&e.type===t.type}getFilterType(){return"date"}createCondition(e){const t=this.getConditionType(e),i={},n=this.getValues(e);return n.length>0&&(i.dateFrom=Bo(n[0])),n.length>1&&(i.dateTo=Bo(n[1])),Object.assign({dateFrom:null,dateTo:null,filterType:this.getFilterType(),type:t},i)}resetPlaceholder(){const e=this.localeService.getLocaleTextFunc(),t=this.translate("dateFormatOoo"),i=e("ariaFilterValue","Filter Value");this.forEachInput(n=>{n.setInputPlaceholder(t),n.setInputAriaLabel(i)})}getInputs(e){return e>=this.dateConditionFromComps.length?[null,null]:[this.dateConditionFromComps[e],this.dateConditionToComps[e]]}getValues(e){const t=[];return this.forEachPositionInput(e,(i,n,s,o)=>{n<o&&t.push(i.getDate())}),t}translate(e){return super.translate(e===Zt.LESS_THAN?"before":e===Zt.GREATER_THAN?"after":e)}getModelAsString(e){var t;return null!==(t=this.filterModelFormatter.getModelAsString(e))&&void 0!==t?t:""}}Nf.DEFAULT_FILTER_OPTIONS=[Zt.EQUALS,Zt.NOT_EQUAL,Zt.LESS_THAN,Zt.GREATER_THAN,Zt.IN_RANGE,Zt.BLANK,Zt.NOT_BLANK],function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([P("userComponentFactory")],Nf.prototype,"userComponentFactory",void 0);class aP extends Ne{getDefaultDebounceMs(){return 0}destroy(){super.destroy()}isEventFromFloatingFilter(e){return e&&e.afterFloatingFilter}isEventFromDataChange(e){return e?.afterDataChange}getLastType(){return this.lastType}isReadOnly(){return this.readOnly}setLastTypeFromModel(e){if(!e)return void(this.lastType=this.optionsFactory.getDefaultOption());let i;i=e.operator?e.conditions[0]:e,this.lastType=i.type}canWeEditAfterModelFromParentFilter(e){return e?!e.operator&&this.isTypeEditable(e.type):this.isTypeEditable(this.lastType)}init(e){this.setSimpleParams(e,!1)}setSimpleParams(e,t=!0){this.optionsFactory=new PE,this.optionsFactory.init(e.filterParams,this.getDefaultFilterOptions()),t||(this.lastType=this.optionsFactory.getDefaultOption()),this.readOnly=!!e.filterParams.readOnly;const i=this.isTypeEditable(this.optionsFactory.getDefaultOption());this.setEditable(i)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.setSimpleParams(e)}doesFilterHaveSingleInput(e){const t=this.optionsFactory.getCustomOption(e),{numberOfInputs:i}=t||{};return null==i||1==i}isTypeEditable(e){const t=[an.IN_RANGE,an.EMPTY,an.BLANK,an.NOT_BLANK];return!!e&&!this.isReadOnly()&&this.doesFilterHaveSingleInput(e)&&t.indexOf(e)<0}}var LS=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class kS extends aP{constructor(){super('\n            <div class="ag-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eReadOnlyText"></ag-input-text-field>\n                <div ref="eDateWrapper" style="display: flex;"></div>\n            </div>')}getDefaultFilterOptions(){return Nf.DEFAULT_FILTER_OPTIONS}init(e){super.init(e),this.params=e,this.filterParams=e.filterParams,this.createDateComponent(),this.filterModelFormatter=new Ff(this.filterParams,this.localeService,this.optionsFactory);const t=this.localeService.getLocaleTextFunc();this.eReadOnlyText.setDisabled(!0).setInputAriaLabel(t("ariaDateFilterInput","Date Filter Input"))}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.params=e,this.filterParams=e.filterParams,this.updateDateComponent(),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory,dateFilterParams:this.filterParams}),this.updateCompOnModelChange(e.currentParentModel())}updateCompOnModelChange(e){const t=!this.isReadOnly()&&this.canWeEditAfterModelFromParentFilter(e);this.setEditable(t),t?(this.dateComp.setDate(e?tr(e.dateFrom):null),this.eReadOnlyText.setValue("")):(this.eReadOnlyText.setValue(this.filterModelFormatter.getModelAsString(e)),this.dateComp.setDate(null))}setEditable(e){si(this.eDateWrapper,e),si(this.eReadOnlyText.getGui(),!e)}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(super.setLastTypeFromModel(e),this.updateCompOnModelChange(e))}onDateChanged(){const t=Bo(this.dateComp.getDate());this.params.parentFilterInstance(i=>{if(i){const n=tr(t);i.onFloatingFilterChanged(this.getLastType()||null,n)}})}getDateComponentParams(){const e=Wr.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs());return{onDateChanged:ko(this.onDateChanged.bind(this),e),filterParams:this.params.column.getColDef().filterParams}}createDateComponent(){this.dateComp=new xE(this.getContext(),this.userComponentFactory,this.getDateComponentParams(),this.eDateWrapper),this.addDestroyFunc(()=>this.dateComp.destroy())}updateDateComponent(){const e=this.gridOptionsService.addGridCommonParams(this.getDateComponentParams());this.dateComp.updateParams(e)}getFilterModelFormatter(){return this.filterModelFormatter}}LS([P("userComponentFactory")],kS.prototype,"userComponentFactory",void 0),LS([re("eReadOnlyText")],kS.prototype,"eReadOnlyText",void 0),LS([re("eDateWrapper")],kS.prototype,"eDateWrapper",void 0);class qR extends Ne{constructor(){super('\n            <div class="ag-filter-filter">\n                <ag-input-text-field class="ag-date-filter" ref="eDateInput"></ag-input-text-field>\n            </div>')}destroy(){super.destroy()}init(e){this.params=e,this.setParams(e);const t=this.gridOptionsService.getDocument(),i=this.eDateInput.getInputElement();this.addManagedListener(i,"mousedown",()=>{this.eDateInput.isDisabled()||this.usingSafariDatePicker||i.focus()}),this.addManagedListener(i,"input",n=>{n.target===t.activeElement&&(this.eDateInput.isDisabled()||this.params.onDateChanged())})}setParams(e){const t=this.eDateInput.getInputElement(),i=this.shouldUseBrowserDatePicker(e);this.usingSafariDatePicker=i&&er(),t.type=i?"date":"text";const{minValidYear:n,maxValidYear:s,minValidDate:o,maxValidDate:a}=e.filterParams||{};if(o&&n&&st("DateFilter should not have both minValidDate and minValidYear parameters set at the same time! minValidYear will be ignored."),a&&s&&st("DateFilter should not have both maxValidDate and maxValidYear parameters set at the same time! maxValidYear will be ignored."),o&&a){const[c,u]=[o,a].map(p=>p instanceof Date?p:tr(p));c&&u&&c.getTime()>u.getTime()&&st("DateFilter parameter minValidDate should always be lower than or equal to parameter maxValidDate.")}o?t.min=o instanceof Date?bh(o):o:n&&(t.min=`${n}-01-01`),a?t.max=a instanceof Date?bh(a):a:s&&(t.max=`${s}-12-31`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}getDate(){return tr(this.eDateInput.getValue())}setDate(e){this.eDateInput.setValue(Bo(e,!1))}setInputPlaceholder(e){this.eDateInput.setInputPlaceholder(e)}setDisabled(e){this.eDateInput.setDisabled(e)}afterGuiAttached(e){(!e||!e.suppressFocus)&&this.eDateInput.getInputElement().focus()}shouldUseBrowserDatePicker(e){return e.filterParams&&null!=e.filterParams.browserDatePicker?e.filterParams.browserDatePicker:hv()||pE()||er()&&bS()>=14.1}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([re("eDateInput")],qR.prototype,"eDateInput",void 0);class Ac extends xa{constructor(e,t="ag-text-field",i="text"){super(e,t,i)}postConstruct(){super.postConstruct(),this.config.allowedCharPattern&&this.preventDisallowedCharacters()}setValue(e,t){return this.eInput.value!==e&&(this.eInput.value=Ie(e)?e:""),super.setValue(e,t)}setStartValue(e){this.setValue(e,!0)}preventDisallowedCharacters(){const e=new RegExp(`[${this.config.allowedCharPattern}]`);this.addManagedListener(this.eInput,"keydown",i=>{!Th(i)||i.key&&!e.test(i.key)&&i.preventDefault()}),this.addManagedListener(this.eInput,"paste",i=>{var n;const s=null===(n=i.clipboardData)||void 0===n?void 0:n.getData("text");s&&s.split("").some(o=>!e.test(o))&&i.preventDefault()})}}class LE extends Ac{constructor(e){super(e,"ag-number-field","number")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"blur",()=>{const e=parseFloat(this.eInput.value),t=isNaN(e)?"":this.normalizeValue(e.toString());this.value!==t&&this.setValue(t)}),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this)),this.eInput.step="any"}onWheel(e){document.activeElement===this.eInput&&e.preventDefault()}normalizeValue(e){if(""===e)return"";null!=this.precision&&(e=this.adjustPrecision(e));const t=parseFloat(e);return null!=this.min&&t<this.min?e=this.min.toString():null!=this.max&&t>this.max&&(e=this.max.toString()),e}adjustPrecision(e,t){if(null==this.precision)return e;if(t){const n=parseFloat(e).toFixed(this.precision);return parseFloat(n).toString()}const i=String(e).split(".");if(i.length>1){if(i[1].length<=this.precision)return e;if(this.precision>0)return`${i[0]}.${i[1].slice(0,this.precision)}`}return i[0]}setMin(e){return this.min===e||(this.min=e,Oa(this.eInput,"min",e)),this}setMax(e){return this.max===e||(this.max=e,Oa(this.eInput,"max",e)),this}setPrecision(e){return this.precision=e,this}setStep(e){return this.step===e||(this.step=e,Oa(this.eInput,"step",e)),this}setValue(e,t){return this.setValueOrInputValue(i=>super.setValue(i,t),()=>this,e)}setStartValue(e){return this.setValueOrInputValue(t=>super.setValue(t,!0),t=>{this.eInput.value=t},e)}setValueOrInputValue(e,t,i){if(Ie(i)){let n=this.isScientificNotation(i);if(n&&this.eInput.validity.valid)return e(i);if(n||(n=(i=this.adjustPrecision(i))!=this.normalizeValue(i)),n)return t(i)}return e(i)}getValue(){if(!this.eInput.validity.valid)return;const e=this.eInput.value;return this.isScientificNotation(e)?this.adjustPrecision(e,!0):super.getValue()}isScientificNotation(e){return"string"==typeof e&&e.includes("e")}}class GS extends NS{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type==an.IN_RANGE||2===i?`${this.formatValue(e.filter)}-${this.formatValue(e.filterTo)}`:null!=e.filter?this.formatValue(e.filter):`${e.type}`}}function wv(r){const{allowedCharPattern:e}=r??{};return e??null}class Ev extends Zt{constructor(){super("numberFilter"),this.eValuesFrom=[],this.eValuesTo=[]}refresh(e){return this.numberFilterParams.allowedCharPattern===e.allowedCharPattern&&super.refresh(e)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:n}=e||{};return[this.processValue(t),this.processValue(i)].slice(0,this.getNumberOfInputs(n))}getDefaultDebounceMs(){return 500}comparator(){return(e,t)=>e===t?0:e<t?1:-1}setParams(e){this.numberFilterParams=e,super.setParams(e),this.filterModelFormatter=new GS(this.localeService,this.optionsFactory,this.numberFilterParams.numberFormatter)}getDefaultFilterOptions(){return Ev.DEFAULT_FILTER_OPTIONS}setElementValue(e,t,i){const n=!i&&this.numberFilterParams.numberFormatter?this.numberFilterParams.numberFormatter(t??null):t;super.setElementValue(e,n)}createValueElement(){const e=wv(this.numberFilterParams),t=document.createElement("div");return t.classList.add("ag-filter-body"),In(t,"presentation"),this.createFromToElement(t,this.eValuesFrom,"from",e),this.createFromToElement(t,this.eValuesTo,"to",e),t}createFromToElement(e,t,i,n){const s=this.createManagedBean(n?new Ac({allowedCharPattern:n}):new LE);s.addCssClass(`ag-filter-${i}`),s.addCssClass("ag-filter-filter"),t.push(s),e.appendChild(s.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}getValues(e){const t=[];return this.forEachPositionInput(e,(i,n,s,o)=>{n<o&&t.push(this.processValue(this.stringToFloat(i.getValue())))}),t}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getFilterType(){return"number"}processValue(e){return null==e||isNaN(e)?null:e}stringToFloat(e){if("number"==typeof e)return e;let t=fr(e);return null!=t&&""===t.trim()&&(t=null),this.numberFilterParams.numberParser?this.numberFilterParams.numberParser(t):null==t||"-"===t.trim()?null:parseFloat(t)}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},n=this.getValues(e);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getModelAsString(e){var t;return null!==(t=this.filterModelFormatter.getModelAsString(e))&&void 0!==t?t:""}hasInvalidInputs(){let e=!1;return this.forEachInput(t=>{t.getInputElement().validity.valid||(e=!0)}),e}}Ev.DEFAULT_FILTER_OPTIONS=[Zt.EQUALS,Zt.NOT_EQUAL,Zt.GREATER_THAN,Zt.GREATER_THAN_OR_EQUAL,Zt.LESS_THAN,Zt.LESS_THAN_OR_EQUAL,Zt.IN_RANGE,Zt.BLANK,Zt.NOT_BLANK];class VS extends NS{conditionToString(e,t){const{numberOfInputs:i}=t||{};return e.type==an.IN_RANGE||2===i?`${e.filter}-${e.filterTo}`:null!=e.filter?`${e.filter}`:`${e.type}`}}class Ji extends an{constructor(){super("textFilter"),this.eValuesFrom=[],this.eValuesTo=[]}static trimInput(e){const t=e&&e.trim();return""===t?e:t}getDefaultDebounceMs(){return 500}setParams(e){this.textFilterParams=e,super.setParams(e),this.matcher=this.getTextMatcher(),this.formatter=this.textFilterParams.textFormatter||(this.textFilterParams.caseSensitive?Ji.DEFAULT_FORMATTER:Ji.DEFAULT_LOWERCASE_FORMATTER),this.filterModelFormatter=new VS(this.localeService,this.optionsFactory)}getTextMatcher(){const e=this.textFilterParams.textCustomComparator;return e?(z.warnOnce("textCustomComparator is deprecated, use textMatcher instead."),({filterOption:t,value:i,filterText:n})=>e(t,i,n)):this.textFilterParams.textMatcher||Ji.DEFAULT_MATCHER}createCondition(e){const t=this.getConditionType(e),i={filterType:this.getFilterType(),type:t},n=this.getValuesWithSideEffects(e,!0);return n.length>0&&(i.filter=n[0]),n.length>1&&(i.filterTo=n[1]),i}getFilterType(){return"text"}areSimpleModelsEqual(e,t){return e.filter===t.filter&&e.filterTo===t.filterTo&&e.type===t.type}getInputs(e){return e>=this.eValuesFrom.length?[null,null]:[this.eValuesFrom[e],this.eValuesTo[e]]}getValues(e){return this.getValuesWithSideEffects(e,!1)}getValuesWithSideEffects(e,t){const i=[];return this.forEachPositionInput(e,(n,s,o,a)=>{var c;if(s<a){let u=fr(n.getValue());t&&this.textFilterParams.trimInput&&(u=null!==(c=Ji.trimInput(u))&&void 0!==c?c:null,n.setValue(u,!0)),i.push(u)}}),i}getDefaultFilterOptions(){return Ji.DEFAULT_FILTER_OPTIONS}createValueElement(){const e=document.createElement("div");return e.classList.add("ag-filter-body"),In(e,"presentation"),this.createFromToElement(e,this.eValuesFrom,"from"),this.createFromToElement(e,this.eValuesTo,"to"),e}createFromToElement(e,t,i){const n=this.createManagedBean(new Ac);n.addCssClass(`ag-filter-${i}`),n.addCssClass("ag-filter-filter"),t.push(n),e.appendChild(n.getGui())}removeValueElements(e,t){this.removeComponents(this.eValuesFrom,e,t),this.removeComponents(this.eValuesTo,e,t)}mapValuesFromModel(e){const{filter:t,filterTo:i,type:n}=e||{};return[t||null,i||null].slice(0,this.getNumberOfInputs(n))}evaluateNullValue(e){return!!e&&[an.NOT_EQUAL,an.NOT_CONTAINS,an.BLANK].indexOf(e)>=0}evaluateNonNullValue(e,t,i,n){const s=e.map(b=>this.formatter(b))||[],o=this.formatter(t),{api:a,colDef:c,column:u,columnApi:p,context:g,textFormatter:m}=this.textFilterParams;if(i.type===an.BLANK)return this.isBlank(t);if(i.type===an.NOT_BLANK)return!this.isBlank(t);const y={api:a,colDef:c,column:u,columnApi:p,context:g,node:n.node,data:n.data,filterOption:i.type,value:o,textFormatter:m};return s.some(b=>this.matcher(Object.assign(Object.assign({},y),{filterText:b})))}getModelAsString(e){var t;return null!==(t=this.filterModelFormatter.getModelAsString(e))&&void 0!==t?t:""}}Ji.DEFAULT_FILTER_OPTIONS=[an.CONTAINS,an.NOT_CONTAINS,an.EQUALS,an.NOT_EQUAL,an.STARTS_WITH,an.ENDS_WITH,an.BLANK,an.NOT_BLANK],Ji.DEFAULT_FORMATTER=r=>r,Ji.DEFAULT_LOWERCASE_FORMATTER=r=>null==r?null:r.toString().toLowerCase(),Ji.DEFAULT_MATCHER=({filterOption:r,value:e,filterText:t})=>{if(null==t)return!1;switch(r){case Ji.CONTAINS:return e.indexOf(t)>=0;case Ji.NOT_CONTAINS:return e.indexOf(t)<0;case Ji.EQUALS:return e===t;case Ji.NOT_EQUAL:return e!=t;case Ji.STARTS_WITH:return 0===e.indexOf(t);case Ji.ENDS_WITH:const i=e.lastIndexOf(t);return i>=0&&i===e.length-t.length;default:return!1}};var kE=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class XR extends Ee{constructor(e){super(),this.params=e,this.valueChangedListener=()=>{}}setupGui(e){var t;this.eFloatingFilterTextInput=this.createManagedBean(new Ac(null===(t=this.params)||void 0===t?void 0:t.config));const i=this.eFloatingFilterTextInput.getGui();e.appendChild(i),this.addManagedListener(i,"input",n=>this.valueChangedListener(n)),this.addManagedListener(i,"keydown",n=>this.valueChangedListener(n))}setEditable(e){this.eFloatingFilterTextInput.setDisabled(!e)}setAutoComplete(e){this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.eFloatingFilterTextInput.getValue()}setValue(e,t){this.eFloatingFilterTextInput.setValue(e,t)}setValueChangedListener(e){this.valueChangedListener=e}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterTextInput.setInputAriaLabel(e)}}class Dv extends aP{postConstruct(){this.setTemplate('\n            <div class="ag-floating-filter-input" role="presentation" ref="eFloatingFilterInputContainer"></div>\n        ')}getDefaultDebounceMs(){return 500}onParentModelChanged(e,t){this.isEventFromFloatingFilter(t)||this.isEventFromDataChange(t)||(this.setLastTypeFromModel(e),this.setEditable(this.canWeEditAfterModelFromParentFilter(e)),this.floatingFilterInputService.setValue(this.getFilterModelFormatter().getModelAsString(e)))}init(e){this.setupFloatingFilterInputService(e),super.init(e),this.setTextInputParams(e)}setupFloatingFilterInputService(e){this.floatingFilterInputService=this.createFloatingFilterInputService(e),this.floatingFilterInputService.setupGui(this.eFloatingFilterInputContainer)}setTextInputParams(e){var t;this.params=e;const i=null!==(t=e.browserAutoComplete)&&void 0!==t&&t;if(this.floatingFilterInputService.setParams({ariaLabel:this.getAriaLabel(e),autoComplete:i}),this.applyActive=Wr.isUseApplyButton(this.params.filterParams),!this.isReadOnly()){const n=Wr.getDebounceMs(this.params.filterParams,this.getDefaultDebounceMs()),s=ko(this.syncUpWithParentFilter.bind(this),n);this.floatingFilterInputService.setValueChangedListener(s)}}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.setTextInputParams(e)}recreateFloatingFilterInputService(e){const t=this.floatingFilterInputService.getValue();es(this.eFloatingFilterInputContainer),this.destroyBean(this.floatingFilterInputService),this.setupFloatingFilterInputService(e),this.floatingFilterInputService.setValue(t,!0)}getAriaLabel(e){return`${this.columnModel.getDisplayNameForColumn(e.column,"header",!0)} ${this.localeService.getLocaleTextFunc()("ariaFilterInput","Filter Input")}`}syncUpWithParentFilter(e){if(this.applyActive&&e.key!==ge.ENTER)return;let i=this.floatingFilterInputService.getValue();this.params.filterParams.trimInput&&(i=Ji.trimInput(i),this.floatingFilterInputService.setValue(i,!0)),this.params.parentFilterInstance(n=>{n&&n.onFloatingFilterChanged(this.getLastType()||null,i||null)})}setEditable(e){this.floatingFilterInputService.setEditable(e)}}kE([P("columnModel")],Dv.prototype,"columnModel",void 0),kE([re("eFloatingFilterInputContainer")],Dv.prototype,"eFloatingFilterInputContainer",void 0),kE([Se],Dv.prototype,"postConstruct",null);class cP extends Ee{constructor(){super(...arguments),this.valueChangedListener=()=>{},this.numberInputActive=!0}setupGui(e){this.eFloatingFilterNumberInput=this.createManagedBean(new LE),this.eFloatingFilterTextInput=this.createManagedBean(new Ac),this.eFloatingFilterTextInput.setDisabled(!0);const t=this.eFloatingFilterNumberInput.getGui(),i=this.eFloatingFilterTextInput.getGui();e.appendChild(t),e.appendChild(i),this.setupListeners(t,n=>this.valueChangedListener(n)),this.setupListeners(i,n=>this.valueChangedListener(n))}setEditable(e){this.numberInputActive=e,this.eFloatingFilterNumberInput.setDisplayed(this.numberInputActive),this.eFloatingFilterTextInput.setDisplayed(!this.numberInputActive)}setAutoComplete(e){this.eFloatingFilterNumberInput.setAutoComplete(e),this.eFloatingFilterTextInput.setAutoComplete(e)}getValue(){return this.getActiveInputElement().getValue()}setValue(e,t){this.getActiveInputElement().setValue(e,t)}getActiveInputElement(){return this.numberInputActive?this.eFloatingFilterNumberInput:this.eFloatingFilterTextInput}setValueChangedListener(e){this.valueChangedListener=e}setupListeners(e,t){this.addManagedListener(e,"input",t),this.addManagedListener(e,"keydown",t)}setParams(e){this.setAriaLabel(e.ariaLabel),void 0!==e.autoComplete&&this.setAutoComplete(e.autoComplete)}setAriaLabel(e){this.eFloatingFilterNumberInput.setInputAriaLabel(e),this.eFloatingFilterTextInput.setInputAriaLabel(e)}}class dP extends Dv{init(e){var t;super.init(e),this.filterModelFormatter=new GS(this.localeService,this.optionsFactory,null===(t=e.filterParams)||void 0===t?void 0:t.numberFormatter)}onParamsUpdated(e){this.refresh(e)}refresh(e){wv(e.filterParams)!==this.allowedCharPattern&&this.recreateFloatingFilterInputService(e),super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return Ev.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(e){return this.allowedCharPattern=wv(e.filterParams),this.createManagedBean(this.allowedCharPattern?new XR({config:{allowedCharPattern:this.allowedCharPattern}}):new cP)}}class uP extends Dv{init(e){super.init(e),this.filterModelFormatter=new VS(this.localeService,this.optionsFactory)}onParamsUpdated(e){this.refresh(e)}refresh(e){super.refresh(e),this.filterModelFormatter.updateParams({optionsFactory:this.optionsFactory})}getDefaultFilterOptions(){return Ji.DEFAULT_FILTER_OPTIONS}getFilterModelFormatter(){return this.filterModelFormatter}createFloatingFilterInputService(){return this.createManagedBean(new XR)}}let Ln=(()=>{class r{constructor(t,i=!1){this.destroyFuncs=[],this.touching=!1,this.eventService=new go,this.eElement=t,this.preventMouseClick=i;const n=this.onTouchStart.bind(this),s=this.onTouchMove.bind(this),o=this.onTouchEnd.bind(this);this.eElement.addEventListener("touchstart",n,{passive:!0}),this.eElement.addEventListener("touchmove",s,{passive:!0}),this.eElement.addEventListener("touchend",o,{passive:!1}),this.destroyFuncs.push(()=>{this.eElement.removeEventListener("touchstart",n,{passive:!0}),this.eElement.removeEventListener("touchmove",s,{passive:!0}),this.eElement.removeEventListener("touchend",o,{passive:!1})})}getActiveTouch(t){for(let i=0;i<t.length;i++)if(t[i].identifier===this.touchStart.identifier)return t[i];return null}addEventListener(t,i){this.eventService.addEventListener(t,i)}removeEventListener(t,i){this.eventService.removeEventListener(t,i)}onTouchStart(t){if(this.touching)return;this.touchStart=t.touches[0],this.touching=!0,this.moved=!1;const i=this.touchStart;window.setTimeout(()=>{this.touching&&this.touchStart===i&&!this.moved&&(this.moved=!0,this.eventService.dispatchEvent({type:r.EVENT_LONG_TAP,touchStart:this.touchStart,touchEvent:t}))},500)}onTouchMove(t){if(!this.touching)return;const i=this.getActiveTouch(t.touches);i&&!TE(i,this.touchStart,4)&&(this.moved=!0)}onTouchEnd(t){this.touching&&(this.moved||(this.eventService.dispatchEvent({type:r.EVENT_TAP,touchStart:this.touchStart}),this.checkForDoubleTap()),this.preventMouseClick&&t.cancelable&&t.preventDefault(),this.touching=!1)}checkForDoubleTap(){const t=(new Date).getTime();this.lastTapTime&&this.lastTapTime>0&&t-this.lastTapTime>r.DOUBLE_TAP_MILLIS?(this.eventService.dispatchEvent({type:r.EVENT_DOUBLE_TAP,touchStart:this.touchStart}),this.lastTapTime=null):this.lastTapTime=t}destroy(){this.destroyFuncs.forEach(t=>t())}}return r.EVENT_TAP="tap",r.EVENT_DOUBLE_TAP="doubleTap",r.EVENT_LONG_TAP="longTap",r.DOUBLE_TAP_MILLIS=500,r})();var Uo=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class bn extends Ne{constructor(e){super(),e||this.setTemplate(bn.TEMPLATE)}attachCustomElements(e,t,i,n,s){this.eSortOrder=e,this.eSortAsc=t,this.eSortDesc=i,this.eSortMixed=n,this.eSortNone=s}setupSort(e,t=!1){this.column=e,this.suppressOrder=t,this.setupMultiSortIndicator(),this.column.isSortable()&&(this.addInIcon("sortAscending",this.eSortAsc,e),this.addInIcon("sortDescending",this.eSortDesc,e),this.addInIcon("sortUnSort",this.eSortNone,e),this.addManagedPropertyListener("unSortIcon",()=>this.updateIcons()),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,()=>this.updateIcons()),this.addManagedListener(this.eventService,G.EVENT_SORT_CHANGED,()=>this.onSortChanged()),this.addManagedListener(this.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onSortChanged()),this.onSortChanged())}addInIcon(e,t,i){if(null==t)return;const n=Nn(e,this.gridOptionsService,i);n&&t.appendChild(n)}onSortChanged(){this.updateIcons(),this.suppressOrder||this.updateSortOrder()}updateIcons(){const e=this.sortController.getDisplaySortForColumn(this.column);if(this.eSortAsc&&si(this.eSortAsc,"asc"===e,{skipAriaHidden:!0}),this.eSortDesc&&si(this.eSortDesc,"desc"===e,{skipAriaHidden:!0}),this.eSortNone){const t=!this.column.getColDef().unSortIcon&&!this.gridOptionsService.get("unSortIcon"),i=null==e;si(this.eSortNone,!t&&i,{skipAriaHidden:!0})}}setupMultiSortIndicator(){this.addInIcon("sortUnSort",this.eSortMixed,this.column);const e=this.column.getColDef().showRowGroup;this.gridOptionsService.isColumnsSortingCoupledToGroup()&&e&&(this.addManagedListener(this.eventService,G.EVENT_SORT_CHANGED,()=>this.updateMultiSortIndicator()),this.addManagedListener(this.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateMultiSortIndicator()),this.updateMultiSortIndicator())}updateMultiSortIndicator(){if(this.eSortMixed){const e="mixed"===this.sortController.getDisplaySortForColumn(this.column);si(this.eSortMixed,e,{skipAriaHidden:!0})}}updateSortOrder(){var e;if(!this.eSortOrder)return;const t=this.sortController.getColumnsWithSortingOrdered(),i=null!==(e=this.sortController.getDisplaySortIndexForColumn(this.column))&&void 0!==e?e:-1,n=t.some(o=>{var a;return null!==(a=this.sortController.getDisplaySortIndexForColumn(o))&&void 0!==a&&a});si(this.eSortOrder,i>=0&&n,{skipAriaHidden:!0}),i>=0?this.eSortOrder.textContent=(i+1).toString():es(this.eSortOrder)}}bn.TEMPLATE='<span class="ag-sort-indicator-container">\n            <span ref="eSortOrder" class="ag-sort-indicator-icon ag-sort-order ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortAsc" class="ag-sort-indicator-icon ag-sort-ascending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortDesc" class="ag-sort-indicator-icon ag-sort-descending-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortMixed" class="ag-sort-indicator-icon ag-sort-mixed-icon ag-hidden" aria-hidden="true"></span>\n            <span ref="eSortNone" class="ag-sort-indicator-icon ag-sort-none-icon ag-hidden" aria-hidden="true"></span>\n        </span>',Uo([re("eSortOrder")],bn.prototype,"eSortOrder",void 0),Uo([re("eSortAsc")],bn.prototype,"eSortAsc",void 0),Uo([re("eSortDesc")],bn.prototype,"eSortDesc",void 0),Uo([re("eSortMixed")],bn.prototype,"eSortMixed",void 0),Uo([re("eSortNone")],bn.prototype,"eSortNone",void 0),Uo([P("columnModel")],bn.prototype,"columnModel",void 0),Uo([P("sortController")],bn.prototype,"sortController",void 0);var jr=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class kn extends Ne{constructor(){super(...arguments),this.lastMovingChanged=0}destroy(){super.destroy()}refresh(e){return this.params=e,this.workOutTemplate()==this.currentTemplate&&this.workOutShowMenu()==this.currentShowMenu&&this.workOutSort()==this.currentSort&&this.shouldSuppressMenuHide()==this.currentSuppressMenuHide&&(this.setDisplayName(e),!0)}workOutTemplate(){var e;let t=null!==(e=this.params.template)&&void 0!==e?e:kn.TEMPLATE;return t=t&&t.trim?t.trim():t,t}init(e){this.params=e,this.currentTemplate=this.workOutTemplate(),this.setTemplate(this.currentTemplate),this.setupTap(),this.setMenu(),this.setupSort(),this.setupFilterIcon(),this.setupFilterButton(),this.setDisplayName(e)}setDisplayName(e){if(this.currentDisplayName!=e.displayName){this.currentDisplayName=e.displayName;const t=yn(this.currentDisplayName,!0);this.eText&&(this.eText.textContent=t)}}addInIcon(e,t,i){if(null==t)return;const n=Nn(e,this.gridOptionsService,i);n&&t.appendChild(n)}setupTap(){const{gridOptionsService:e}=this;if(e.get("suppressTouch"))return;const t=new Ln(this.getGui(),!0),i=this.shouldSuppressMenuHide(),n=i&&Ie(this.eMenu),s=n?new Ln(this.eMenu,!0):t;if(this.params.enableMenu&&this.addManagedListener(s,Ln[n?"EVENT_TAP":"EVENT_LONG_TAP"],c=>this.params.showColumnMenuAfterMouseClick(c.touchStart)),this.params.enableSorting&&this.addManagedListener(t,Ln.EVENT_TAP,a=>{var c,u;const p=a.touchStart.target;i&&((null===(c=this.eMenu)||void 0===c?void 0:c.contains(p))||(null===(u=this.eFilterButton)||void 0===u?void 0:u.contains(p)))||this.sortController.progressSort(this.params.column,!1,"uiColumnSorted")}),this.params.enableFilterButton){const o=new Ln(this.eFilterButton,!0);this.addManagedListener(o,"tap",()=>this.params.showFilter(this.eFilterButton)),this.addDestroyFunc(()=>o.destroy())}this.addDestroyFunc(()=>t.destroy()),n&&this.addDestroyFunc(()=>s.destroy())}workOutShowMenu(){return this.params.enableMenu&&this.menuService.isHeaderMenuButtonEnabled()}shouldSuppressMenuHide(){return this.menuService.isHeaderMenuButtonAlwaysShowEnabled()}setMenu(){if(!this.eMenu)return;if(this.currentShowMenu=this.workOutShowMenu(),!this.currentShowMenu)return bl(this.eMenu),void(this.eMenu=void 0);const e=this.menuService.isLegacyMenuEnabled();this.addInIcon(e?"menu":"menuAlt",this.eMenu,this.params.column),this.eMenu.classList.toggle("ag-header-menu-icon",!e),this.currentSuppressMenuHide=this.shouldSuppressMenuHide(),this.addManagedListener(this.eMenu,"click",()=>this.params.showColumnMenu(this.eMenu)),this.eMenu.classList.toggle("ag-header-menu-always-show",this.currentSuppressMenuHide)}onMenuKeyboardShortcut(e){var t,i,n,s;const{column:o}=this.params,a=this.menuService.isLegacyMenuEnabled();if(e&&!a){if(this.menuService.isFilterMenuInHeaderEnabled(o))return this.params.showFilter(null!==(i=null!==(t=this.eFilterButton)&&void 0!==t?t:this.eMenu)&&void 0!==i?i:this.getGui()),!0}else if(this.params.enableMenu)return this.params.showColumnMenu(null!==(s=null!==(n=this.eMenu)&&void 0!==n?n:this.eFilterButton)&&void 0!==s?s:this.getGui()),!0;return!1}workOutSort(){return this.params.enableSorting}setupSort(){if(this.currentSort=this.params.enableSorting,this.eSortIndicator||(this.eSortIndicator=this.context.createBean(new bn(!0)),this.eSortIndicator.attachCustomElements(this.eSortOrder,this.eSortAsc,this.eSortDesc,this.eSortMixed,this.eSortNone)),this.eSortIndicator.setupSort(this.params.column),!this.currentSort)return;this.addManagedListener(this.params.column,ot.EVENT_MOVING_CHANGED,()=>{this.lastMovingChanged=(new Date).getTime()}),this.eLabel&&this.addManagedListener(this.eLabel,"click",t=>{const i=this.params.column.isMoving(),s=(new Date).getTime()-this.lastMovingChanged<50;if(!i&&!s){const c="ctrl"===this.gridOptionsService.get("multiSortKey")?t.ctrlKey||t.metaKey:t.shiftKey;this.params.progressSort(c)}});const e=()=>{if(this.addOrRemoveCssClass("ag-header-cell-sorted-asc",this.params.column.isSortAscending()),this.addOrRemoveCssClass("ag-header-cell-sorted-desc",this.params.column.isSortDescending()),this.addOrRemoveCssClass("ag-header-cell-sorted-none",this.params.column.isSortNone()),this.params.column.getColDef().showRowGroup){const n=!this.columnModel.getSourceColumnsForGroupColumn(this.params.column)?.every(s=>this.params.column.getSort()==s.getSort());this.addOrRemoveCssClass("ag-header-cell-sorted-mixed",n)}};this.addManagedListener(this.eventService,G.EVENT_SORT_CHANGED,e),this.addManagedListener(this.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,e)}setupFilterIcon(){!this.eFilter||this.configureFilter(this.params.enableFilterIcon,this.eFilter,this.onFilterChangedIcon.bind(this))}setupFilterButton(){this.eFilterButton&&(this.configureFilter(this.params.enableFilterButton,this.eFilterButton,this.onFilterChangedButton.bind(this))?this.addManagedListener(this.eFilterButton,"click",()=>this.params.showFilter(this.eFilterButton)):this.eFilterButton=void 0)}configureFilter(e,t,i){if(!e)return bl(t),!1;const{column:n}=this.params;return this.addInIcon("filter",t,n),this.addManagedListener(n,ot.EVENT_FILTER_CHANGED,i),i(),!0}onFilterChangedIcon(){const e=this.params.column.isFilterActive();si(this.eFilter,e,{skipAriaHidden:!0})}onFilterChangedButton(){const e=this.params.column.isFilterActive();this.eFilterButton.classList.toggle("ag-filter-active",e)}getAnchorElementForMenu(e){var t,i,n,s;return e?null!==(i=null!==(t=this.eFilterButton)&&void 0!==t?t:this.eMenu)&&void 0!==i?i:this.getGui():null!==(s=null!==(n=this.eMenu)&&void 0!==n?n:this.eFilterButton)&&void 0!==s?s:this.getGui()}}kn.TEMPLATE='<div class="ag-cell-label-container" role="presentation">\n            <span ref="eMenu" class="ag-header-icon ag-header-cell-menu-button" aria-hidden="true"></span>\n            <span ref="eFilterButton" class="ag-header-icon ag-header-cell-filter-button" aria-hidden="true"></span>\n            <div ref="eLabel" class="ag-header-cell-label" role="presentation">\n                <span ref="eText" class="ag-header-cell-text"></span>\n                <span ref="eFilter" class="ag-header-icon ag-header-label-icon ag-filter-icon" aria-hidden="true"></span>\n                <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n            </div>\n        </div>',jr([P("sortController")],kn.prototype,"sortController",void 0),jr([P("menuService")],kn.prototype,"menuService",void 0),jr([P("columnModel")],kn.prototype,"columnModel",void 0),jr([re("eFilter")],kn.prototype,"eFilter",void 0),jr([re("eFilterButton")],kn.prototype,"eFilterButton",void 0),jr([re("eSortIndicator")],kn.prototype,"eSortIndicator",void 0),jr([re("eMenu")],kn.prototype,"eMenu",void 0),jr([re("eLabel")],kn.prototype,"eLabel",void 0),jr([re("eText")],kn.prototype,"eText",void 0),jr([re("eSortOrder")],kn.prototype,"eSortOrder",void 0),jr([re("eSortAsc")],kn.prototype,"eSortAsc",void 0),jr([re("eSortDesc")],kn.prototype,"eSortDesc",void 0),jr([re("eSortMixed")],kn.prototype,"eSortMixed",void 0),jr([re("eSortNone")],kn.prototype,"eSortNone",void 0);var ZR=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Lf extends Ne{constructor(){super(Lf.TEMPLATE)}destroy(){super.destroy()}init(e){this.params=e,this.checkWarnings(),this.setupLabel(),this.addGroupExpandIcon(),this.setupExpandIcons()}checkWarnings(){this.params.template&&st("A template was provided for Header Group Comp - templates are only supported for Header Comps (not groups)")}setupExpandIcons(){this.addInIcon("columnGroupOpened","agOpened"),this.addInIcon("columnGroupClosed","agClosed");const e=n=>{if(yl(n))return;const s=!this.params.columnGroup.isExpanded();this.columnModel.setColumnGroupOpened(this.params.columnGroup.getProvidedColumnGroup(),s,"uiColumnExpanded")};this.addTouchAndClickListeners(this.eCloseIcon,e),this.addTouchAndClickListeners(this.eOpenIcon,e);const t=n=>{Aa(n)};this.addManagedListener(this.eCloseIcon,"dblclick",t),this.addManagedListener(this.eOpenIcon,"dblclick",t),this.addManagedListener(this.getGui(),"dblclick",e),this.updateIconVisibility();const i=this.params.columnGroup.getProvidedColumnGroup();this.addManagedListener(i,Wt.EVENT_EXPANDED_CHANGED,this.updateIconVisibility.bind(this)),this.addManagedListener(i,Wt.EVENT_EXPANDABLE_CHANGED,this.updateIconVisibility.bind(this))}addTouchAndClickListeners(e,t){const i=new Ln(e,!0);this.addManagedListener(i,Ln.EVENT_TAP,t),this.addDestroyFunc(()=>i.destroy()),this.addManagedListener(e,"click",t)}updateIconVisibility(){if(this.params.columnGroup.isExpandable()){const t=this.params.columnGroup.isExpanded();si(this.eOpenIcon,t),si(this.eCloseIcon,!t)}else si(this.eOpenIcon,!1),si(this.eCloseIcon,!1)}addInIcon(e,t){const i=Nn(e,this.gridOptionsService,null);i&&this.getRefElement(t).appendChild(i)}addGroupExpandIcon(){if(!this.params.columnGroup.isExpandable())return si(this.eOpenIcon,!1),void si(this.eCloseIcon,!1)}setupLabel(){var e;const{displayName:t,columnGroup:i}=this.params;if(Ie(t)){const n=yn(t,!0);this.getRefElement("agLabel").textContent=n}this.addOrRemoveCssClass("ag-sticky-label",!(null!==(e=i.getColGroupDef())&&void 0!==e&&e.suppressStickyLabel))}}Lf.TEMPLATE='<div class="ag-header-group-cell-label" ref="agContainer" role="presentation">\n            <span ref="agLabel" class="ag-header-group-text" role="presentation"></span>\n            <span ref="agOpened" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-expanded"></span>\n            <span ref="agClosed" class="ag-header-icon ag-header-expand-icon ag-header-expand-icon-collapsed"></span>\n        </div>',ZR([P("columnModel")],Lf.prototype,"columnModel",void 0),ZR([re("agOpened")],Lf.prototype,"eOpenIcon",void 0),ZR([re("agClosed")],Lf.prototype,"eCloseIcon",void 0);class Vd extends Ne{isPopup(){return!0}setParentComponent(e){e.addCssClass("ag-has-popup"),super.setParentComponent(e)}destroy(){const e=this.parentComponent;e&&e.isAlive()&&e.getGui().classList.remove("ag-has-popup"),super.destroy()}}class kf extends Vd{constructor(){super(kf.TEMPLATE)}init(e){this.params=e,this.focusAfterAttached=e.cellStartedEdit,this.eTextArea.setMaxLength(e.maxLength||200).setCols(e.cols||60).setRows(e.rows||10),Ie(e.value,!0)&&this.eTextArea.setValue(e.value.toString(),!0),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.activateTabIndex()}onKeyDown(e){const t=e.key;(t===ge.LEFT||t===ge.UP||t===ge.RIGHT||t===ge.DOWN||e.shiftKey&&t===ge.ENTER)&&e.stopPropagation()}afterGuiAttached(){const e=this.localeService.getLocaleTextFunc();this.eTextArea.setInputAriaLabel(e("ariaInputEditor","Input Editor")),this.focusAfterAttached&&this.eTextArea.getFocusableElement().focus()}getValue(){const e=this.eTextArea.getValue();return Ie(e)||Ie(this.params.value)?this.params.parseValue(e):this.params.value}}kf.TEMPLATE='<div class="ag-large-text">\n            <ag-input-text-area ref="eTextArea" class="ag-large-text-input"></ag-input-text-area>\n        </div>',function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([re("eTextArea")],kf.prototype,"eTextArea",void 0);var hP=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class BS extends Vd{constructor(){super('<div class="ag-cell-edit-wrapper">\n                <ag-select class="ag-cell-editor" ref="eSelect"></ag-select>\n            </div>'),this.startedByEnter=!1}init(e){this.focusAfterAttached=e.cellStartedEdit;const{eSelect:t,valueFormatterService:i,gridOptionsService:n}=this,{values:s,value:o,eventKey:a}=e;if(gt(s))return void console.warn("AG Grid: no values found for select cellEditor");this.startedByEnter=null!=a&&a===ge.ENTER;let c=!1;s.forEach(m=>{const y={value:m},b=i.formatValue(e.column,null,m);y.text=null!=b?b:m,t.addOption(y),c=c||o===m}),c?t.setValue(e.value,!0):e.values.length&&t.setValue(e.values[0],!0);const{valueListGap:u,valueListMaxWidth:p,valueListMaxHeight:g}=e;null!=u&&t.setPickerGap(u),null!=g&&t.setPickerMaxHeight(g),null!=p&&t.setPickerMaxWidth(p),"fullRow"!==n.get("editType")&&this.addManagedListener(this.eSelect,Tc.EVENT_ITEM_SELECTED,()=>e.stopEditing())}afterGuiAttached(){this.focusAfterAttached&&this.eSelect.getFocusableElement().focus(),this.startedByEnter&&setTimeout(()=>{this.isAlive()&&this.eSelect.showPicker()})}focusIn(){this.eSelect.getFocusableElement().focus()}getValue(){return this.eSelect.getValue()}isPopup(){return!1}}hP([P("valueFormatterService")],BS.prototype,"valueFormatterService",void 0),hP([re("eSelect")],BS.prototype,"eSelect",void 0);class Gf extends Vd{constructor(e){super(`\n            <div class="ag-cell-edit-wrapper">\n                ${e.getTemplate()}\n            </div>`),this.cellEditorInput=e}init(e){this.params=e;const t=this.eInput;let i;if(this.cellEditorInput.init(t,e),e.cellStartedEdit){this.focusAfterAttached=!0;const n=e.eventKey;n===ge.BACKSPACE||e.eventKey===ge.DELETE?i="":n&&1===n.length?i=n:(i=this.cellEditorInput.getStartValue(),n!==ge.F2&&(this.highlightAllOnFocus=!0))}else this.focusAfterAttached=!1,i=this.cellEditorInput.getStartValue();null!=i&&t.setStartValue(i),this.addManagedListener(t.getGui(),"keydown",n=>{const{key:s}=n;(s===ge.PAGE_UP||s===ge.PAGE_DOWN)&&n.preventDefault()})}afterGuiAttached(){var e,t;const i=this.localeService.getLocaleTextFunc(),n=this.eInput;if(n.setInputAriaLabel(i("ariaInputEditor","Input Editor")),!this.focusAfterAttached)return;er()||n.getFocusableElement().focus();const s=n.getInputElement();this.highlightAllOnFocus?s.select():null===(t=(e=this.cellEditorInput).setCaret)||void 0===t||t.call(e)}focusIn(){const e=this.eInput,t=e.getFocusableElement(),i=e.getInputElement();t.focus(),i.select()}getValue(){return this.cellEditorInput.getValue()}isPopup(){return!1}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([re("eInput")],Gf.prototype,"eInput",void 0);class fP{getTemplate(){return'<ag-input-text-field class="ag-cell-editor" ref="eInput"></ag-input-text-field>'}init(e,t){this.eInput=e,this.params=t,null!=t.maxLength&&e.setMaxLength(t.maxLength)}getValue(){const e=this.eInput.getValue();return Ie(e)||Ie(this.params.value)?this.params.parseValue(e):this.params.value}getStartValue(){return this.params.useFormatter||this.params.column.getColDef().refData?this.params.formatValue(this.params.value):this.params.value}setCaret(){const e=this.eInput.getValue(),t=Ie(e)&&e.length||0;t&&this.eInput.getInputElement().setSelectionRange(t,t)}}class JR extends Gf{constructor(){super(new fP)}}class eA extends Ne{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-change-delta");const i=document.createElement("span");i.setAttribute("class","ag-value-change-value"),e.appendChild(t),e.appendChild(i),this.setTemplateFromElement(e)}init(e){this.eValue=this.queryForHtmlElement(".ag-value-change-value"),this.eDelta=this.queryForHtmlElement(".ag-value-change-delta"),this.refresh(e,!0)}showDelta(e,t){const i=Math.abs(t),n=e.formatValue(i),s=Ie(n)?n:i,o=t>=0;this.eDelta.textContent=o?"\u2191"+s:"\u2193"+s,this.eDelta.classList.toggle("ag-value-change-delta-up",o),this.eDelta.classList.toggle("ag-value-change-delta-down",!o)}setTimerToRemoveDelta(){this.refreshCount++;const e=this.refreshCount;this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.hideDeltaValue()},2e3)})}hideDeltaValue(){this.eValue.classList.remove("ag-value-change-value-highlight"),es(this.eDelta)}refresh(e,t=!1){const i=e.value;return i!==this.lastValue&&(Ie(e.valueFormatted)?this.eValue.textContent=e.valueFormatted:Ie(e.value)?this.eValue.textContent=i:es(this.eValue),!this.filterManager.isSuppressFlashingCellsBecauseFiltering())&&("number"==typeof i&&"number"==typeof this.lastValue&&this.showDelta(e,i-this.lastValue),this.lastValue&&this.eValue.classList.add("ag-value-change-value-highlight"),t||this.setTimerToRemoveDelta(),this.lastValue=i,!0)}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([P("filterManager")],eA.prototype,"filterManager",void 0);class tA extends Ne{constructor(){super(),this.refreshCount=0;const e=document.createElement("span"),t=document.createElement("span");t.setAttribute("class","ag-value-slide-current"),e.appendChild(t),this.setTemplateFromElement(e),this.eCurrent=this.queryForHtmlElement(".ag-value-slide-current")}init(e){this.refresh(e,!0)}addSlideAnimation(){this.refreshCount++;const e=this.refreshCount;this.ePrevious&&this.getGui().removeChild(this.ePrevious);const t=document.createElement("span");t.setAttribute("class","ag-value-slide-previous ag-value-slide-out"),this.ePrevious=t,this.ePrevious.textContent=this.eCurrent.textContent,this.getGui().insertBefore(this.ePrevious,this.eCurrent),this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>{e===this.refreshCount&&this.ePrevious.classList.add("ag-value-slide-out-end")},50),window.setTimeout(()=>{e===this.refreshCount&&(this.getGui().removeChild(this.ePrevious),this.ePrevious=null)},3e3)})}refresh(e,t=!1){let i=e.value;return gt(i)&&(i=""),i!==this.lastValue&&!this.filterManager.isSuppressFlashingCellsBecauseFiltering()&&(t||this.addSlideAnimation(),this.lastValue=i,Ie(e.valueFormatted)?this.eCurrent.textContent=e.valueFormatted:Ie(e.value)?this.eCurrent.textContent=i:es(this.eCurrent),!0)}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([P("filterManager")],tA.prototype,"filterManager",void 0);let Gt=(()=>{class r{constructor(t){this.rowIndex=null,this.key=null,this.childrenMapped={},this.displayed=!1,this.rowTop=null,this.oldRowTop=null,this.selectable=!0,this.__objectId=r.OBJECT_ID_SEQUENCE++,this.__autoHeights={},this.alreadyRendered=!1,this.highlighted=null,this.hovered=!1,this.selected=!1,this.beans=t}setData(t){this.setDataCommon(t,!1)}updateData(t){this.setDataCommon(t,!0)}setDataCommon(t,i){const n=this.data;this.data=t,this.beans.valueCache.onDataChanged(),this.updateDataOnDetailNode(),this.checkRowSelectable(),this.resetQuickFilterAggregateText();const s=this.createDataChangedEvent(t,n,i);this.dispatchLocalEvent(s)}updateDataOnDetailNode(){this.detailNode&&(this.detailNode.data=this.data)}createDataChangedEvent(t,i,n){return{type:r.EVENT_DATA_CHANGED,node:this,oldData:i,newData:t,update:n}}createLocalRowEvent(t){return{type:t,node:this}}getRowIndexString(){return"top"===this.rowPinned?"t-"+this.rowIndex:"bottom"===this.rowPinned?"b-"+this.rowIndex:this.rowIndex.toString()}createDaemonNode(){const t=new r(this.beans);return t.id=this.id,t.data=this.data,t.__daemon=!0,t.selected=this.selected,t.level=this.level,t}setDataAndId(t,i){const n=Ie(this.id)?this.createDaemonNode():null,s=this.data;this.data=t,this.updateDataOnDetailNode(),this.setId(i),this.checkRowSelectable(),this.beans.selectionService.syncInRowNode(this,n);const o=this.createDataChangedEvent(t,s,!1);this.dispatchLocalEvent(o)}checkRowSelectable(){const t=this.beans.gridOptionsService.get("isRowSelectable");this.setRowSelectable(!t||t(this))}setRowSelectable(t,i){if(this.selectable!==t){if(this.selectable=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_SELECTABLE_CHANGED)),i)return;if(this.beans.gridOptionsService.get("groupSelectsChildren")){const s=this.calculateSelectedFromChildren();return void this.setSelectedParams({newValue:s??!1,source:"selectableChanged"})}this.isSelected()&&!this.selectable&&this.setSelectedParams({newValue:!1,source:"selectableChanged"})}}setId(t){const i=this.beans.gridOptionsService.getCallback("getRowId");if(i)if(this.data){const n=this.getGroupKeys(!0);this.id=i({data:this.data,parentKeys:n.length>0?n:void 0,level:this.level}),null!==this.id&&"string"==typeof this.id&&this.id.startsWith(r.ID_PREFIX_ROW_GROUP)&&console.error(`AG Grid: Row IDs cannot start with ${r.ID_PREFIX_ROW_GROUP}, this is a reserved prefix for AG Grid's row grouping feature.`),null!==this.id&&"string"!=typeof this.id&&(this.id=""+this.id)}else this.id=void 0;else this.id=t}getGroupKeys(t=!1){const i=[];let n=this;for(t&&(n=n.parent);n&&n.level>=0;)i.push(n.key),n=n.parent;return i.reverse(),i}isPixelInRange(t){return!(!Ie(this.rowTop)||!Ie(this.rowHeight))&&t>=this.rowTop&&t<this.rowTop+this.rowHeight}setFirstChild(t){this.firstChild!==t&&(this.firstChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_FIRST_CHILD_CHANGED)))}setLastChild(t){this.lastChild!==t&&(this.lastChild=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_LAST_CHILD_CHANGED)))}setChildIndex(t){this.childIndex!==t&&(this.childIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_CHILD_INDEX_CHANGED)))}setRowTop(t){this.oldRowTop=this.rowTop,this.rowTop!==t&&(this.rowTop=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_TOP_CHANGED)),this.setDisplayed(null!==t))}clearRowTopAndRowIndex(){this.oldRowTop=null,this.setRowTop(null),this.setRowIndex(null)}setDisplayed(t){this.displayed!==t&&(this.displayed=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_DISPLAYED_CHANGED)))}setDragging(t){this.dragging!==t&&(this.dragging=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_DRAGGING_CHANGED)))}setHighlighted(t){t!==this.highlighted&&(this.highlighted=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HIGHLIGHT_CHANGED)))}setHovered(t){this.hovered!==t&&(this.hovered=t)}isHovered(){return this.hovered}setAllChildrenCount(t){this.allChildrenCount!==t&&(this.allChildrenCount=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_ALL_CHILDREN_COUNT_CHANGED)))}setMaster(t){this.master!==t&&(this.master&&!t&&(this.expanded=!1),this.master=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_MASTER_CHANGED)))}setGroup(t){this.group!==t&&(this.group&&!t&&(this.expanded=!1),this.group=t,this.updateHasChildren(),this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_GROUP_CHANGED)))}setRowHeight(t,i=!1){this.rowHeight=t,this.rowHeightEstimated=i,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HEIGHT_CHANGED))}setRowAutoHeight(t,i){this.__autoHeights||(this.__autoHeights={}),this.__autoHeights[i.getId()]=t,null!=t&&(null==this.checkAutoHeightsDebounced&&(this.checkAutoHeightsDebounced=ko(this.checkAutoHeights.bind(this),1)),this.checkAutoHeightsDebounced())}checkAutoHeights(){let t=!1,i=!0,n=0;const s=this.__autoHeights;if(null==s||(this.beans.columnModel.getAllDisplayedAutoHeightCols().forEach(c=>{let u=s[c.getId()];if(null==u){if(!this.beans.columnModel.isColSpanActive())return void(t=!0);{let p=[];switch(c.getPinned()){case"left":p=this.beans.columnModel.getDisplayedLeftColumnsForRow(this);break;case"right":p=this.beans.columnModel.getDisplayedRightColumnsForRow(this);break;case null:p=this.beans.columnModel.getViewportCenterColumnsForRow(this)}if(p.includes(c))return void(t=!0);u=-1}}else i=!1;u>n&&(n=u)}),t)||((i||n<10)&&(n=this.beans.gridOptionsService.getRowHeightForNode(this).height),n==this.rowHeight))return;this.setRowHeight(n);const a=this.beans.rowModel;a.onRowHeightChangedDebounced&&a.onRowHeightChangedDebounced()}setRowIndex(t){this.rowIndex!==t&&(this.rowIndex=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_ROW_INDEX_CHANGED)))}setUiLevel(t){this.uiLevel!==t&&(this.uiLevel=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_UI_LEVEL_CHANGED)))}setExpanded(t,i){if(this.expanded===t)return;this.expanded=t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_EXPANDED_CHANGED));const n=Object.assign({},this.createGlobalRowEvent(G.EVENT_ROW_GROUP_OPENED),{expanded:t,event:i||null});this.beans.rowNodeEventThrottle.dispatchExpanded(n),this.sibling&&this.beans.rowRenderer.refreshCells({rowNodes:[this]})}createGlobalRowEvent(t){return this.beans.gridOptionsService.addGridCommonParams({type:t,node:this,data:this.data,rowIndex:this.rowIndex,rowPinned:this.rowPinned})}dispatchLocalEvent(t){this.eventService&&this.eventService.dispatchEvent(t)}setDataValue(t,i,n){const o=(()=>{var u;return"string"!=typeof t?t:null!==(u=this.beans.columnModel.getGridColumn(t))&&void 0!==u?u:this.beans.columnModel.getPrimaryColumn(t)})(),a=this.getValueFromValueService(o);if(this.beans.gridOptionsService.get("readOnlyEdit"))return this.dispatchEventForSaveValueReadOnly(o,a,i,n),!1;const c=this.beans.valueService.setValue(this,o,i,n);return this.dispatchCellChangedEvent(o,i,a),this.checkRowSelectable(),c}getValueFromValueService(t){const i=this.leafGroup&&this.beans.columnModel.isPivotMode(),n=this.group&&this.expanded&&!this.footer&&!i,o=this.beans.gridOptionsService.getGroupIncludeFooter()({node:this}),a=this.beans.gridOptionsService.get("groupSuppressBlankHeader");return this.beans.valueService.getValue(t,this,!1,n&&o&&!a)}dispatchEventForSaveValueReadOnly(t,i,n,s){const o=this.beans.gridOptionsService.addGridCommonParams({type:G.EVENT_CELL_EDIT_REQUEST,event:null,rowIndex:this.rowIndex,rowPinned:this.rowPinned,column:t,colDef:t.getColDef(),data:this.data,node:this,oldValue:i,newValue:n,value:n,source:s});this.beans.eventService.dispatchEvent(o)}setGroupValue(t,i){const n=this.beans.columnModel.getGridColumn(t);gt(this.groupData)&&(this.groupData={});const s=n.getColId(),o=this.groupData[s];o!==i&&(this.groupData[s]=i,this.dispatchCellChangedEvent(n,i,o))}setAggData(t){const i=this.aggData;if(this.aggData=t,this.eventService){const n=s=>{const o=this.aggData?this.aggData[s]:void 0,a=i?i[s]:void 0;if(o===a)return;const c=this.beans.columnModel.lookupGridColumn(s);!c||this.dispatchCellChangedEvent(c,o,a)};for(const s in this.aggData)n(s);for(const s in t)s in this.aggData||n(s)}}updateHasChildren(){let t=this.group&&!this.footer||this.childrenAfterGroup&&this.childrenAfterGroup.length>0;if(this.beans.gridOptionsService.isRowModelType("serverSide")){const n=this.beans.gridOptionsService.get("treeData"),s=this.beans.gridOptionsService.get("isServerSideGroup");t=!this.stub&&!this.footer&&(n?!!s&&s(this.data):!!this.group)}t!==this.__hasChildren&&(this.__hasChildren=!!t,this.eventService&&this.eventService.dispatchEvent(this.createLocalRowEvent(r.EVENT_HAS_CHILDREN_CHANGED)))}hasChildren(){return null==this.__hasChildren&&this.updateHasChildren(),this.__hasChildren}isEmptyRowGroupNode(){return this.group&&us(this.childrenAfterGroup)}dispatchCellChangedEvent(t,i,n){this.dispatchLocalEvent({type:r.EVENT_CELL_CHANGED,node:this,column:t,newValue:i,oldValue:n})}resetQuickFilterAggregateText(){this.quickFilterAggregateText=null}isExpandable(){return!this.footer&&(this.beans.columnModel.isPivotMode()?this.hasChildren()&&!this.leafGroup:this.hasChildren()||!!this.master)}isSelected(){return this.footer?this.sibling.isSelected():this.selected}depthFirstSearch(t){this.childrenAfterGroup&&this.childrenAfterGroup.forEach(i=>i.depthFirstSearch(t)),t(this)}calculateSelectedFromChildren(){var t;let i=!1,n=!1,s=!1;if(null===(t=this.childrenAfterGroup)||void 0===t||!t.length)return this.selectable?this.selected:null;for(let o=0;o<this.childrenAfterGroup.length;o++){const a=this.childrenAfterGroup[o];let c=a.isSelected();if(!a.selectable){const u=a.calculateSelectedFromChildren();if(null===u)continue;c=u}switch(c){case!0:i=!0;break;case!1:n=!0;break;default:s=!0}}return s||i&&n?void 0:!!i||!n&&(this.selectable?this.selected:null)}setSelectedInitialValue(t){this.selected=t}selectThisNode(t,i,n="api"){if(!this.selectable&&t||this.selected===t)return!1;if(this.selected=t,this.eventService){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_ROW_SELECTED));const c=this.sibling;c&&c.footer&&c.dispatchLocalEvent(c.createLocalRowEvent(r.EVENT_ROW_SELECTED))}const a=Object.assign(Object.assign({},this.createGlobalRowEvent(G.EVENT_ROW_SELECTED)),{event:i||null,source:n});return this.beans.eventService.dispatchEvent(a),!0}setSelected(t,i=!1,n="api"){"boolean"!=typeof n?this.setSelectedParams({newValue:t,clearSelection:i,rangeSelect:!1,source:n}):console.warn("AG Grid: since version v30, rowNode.setSelected() property `suppressFinishActions` has been removed, please use `gridApi.setNodesSelected()` for bulk actions, and the event `source` property for ignoring events instead.")}setSelectedParams(t){return this.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),0):void 0===this.id?(console.warn("AG Grid: cannot select node until id for node is known"),0):this.beans.selectionService.setNodesSelected(Object.assign(Object.assign({},t),{nodes:[this.footer?this.sibling:this]}))}isRowPinned(){return"top"===this.rowPinned||"bottom"===this.rowPinned}isParentOfNode(t){let i=this.parent;for(;i;){if(i===t)return!0;i=i.parent}return!1}addEventListener(t,i){var n,s;this.eventService||(this.eventService=new go),this.beans.frameworkOverrides.shouldWrapOutgoing&&!this.frameworkEventListenerService&&(this.eventService.setFrameworkOverrides(this.beans.frameworkOverrides),this.frameworkEventListenerService=new Yw(this.beans.frameworkOverrides));const o=null!==(s=null===(n=this.frameworkEventListenerService)||void 0===n?void 0:n.wrap(i))&&void 0!==s?s:i;this.eventService.addEventListener(t,o)}removeEventListener(t,i){var n,s;if(!this.eventService)return;const o=null!==(s=null===(n=this.frameworkEventListenerService)||void 0===n?void 0:n.unwrap(i))&&void 0!==s?s:i;this.eventService.removeEventListener(t,o),this.eventService.noRegisteredListenersExist()&&(this.eventService=null)}onMouseEnter(){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_MOUSE_ENTER))}onMouseLeave(){this.dispatchLocalEvent(this.createLocalRowEvent(r.EVENT_MOUSE_LEAVE))}getFirstChildOfFirstChild(t){let i=this,n=!0,s=!1,o=null;for(;n&&!s;){const a=i.parent;Ie(a)&&i.firstChild?a.rowGroupColumn===t&&(s=!0,o=a):n=!1,i=a}return s?o:null}isFullWidthCell(){if(this.detail)return!0;const t=this.beans.gridOptionsService.getCallback("isFullWidthRow");return!!t&&t({rowNode:this})}getRoute(){if(null==this.key)return;const t=[];let i=this;for(;null!=i.key;)t.push(i.key),i=i.parent;return t.reverse()}createFooter(){if(this.sibling)return;const t=new Set(["eventService","__objectId","sticky"]),i=new r(this.beans);Object.keys(this).forEach(n=>{t.has(n)||(i[n]=this[n])}),i.footer=!0,i.setRowTop(null),i.setRowIndex(null),i.oldRowTop=null,i.id="rowGroupFooter_"+this.id,i.sibling=this,this.sibling=i}destroyFooter(){!this.sibling||(this.sibling.setRowTop(null),this.sibling.setRowIndex(null),this.sibling=void 0)}}return r.ID_PREFIX_ROW_GROUP="row-group-",r.ID_PREFIX_TOP_PINNED="t-",r.ID_PREFIX_BOTTOM_PINNED="b-",r.OBJECT_ID_SEQUENCE=0,r.EVENT_ROW_SELECTED="rowSelected",r.EVENT_DATA_CHANGED="dataChanged",r.EVENT_CELL_CHANGED="cellChanged",r.EVENT_ALL_CHILDREN_COUNT_CHANGED="allChildrenCountChanged",r.EVENT_MASTER_CHANGED="masterChanged",r.EVENT_GROUP_CHANGED="groupChanged",r.EVENT_MOUSE_ENTER="mouseEnter",r.EVENT_MOUSE_LEAVE="mouseLeave",r.EVENT_HEIGHT_CHANGED="heightChanged",r.EVENT_TOP_CHANGED="topChanged",r.EVENT_DISPLAYED_CHANGED="displayedChanged",r.EVENT_FIRST_CHILD_CHANGED="firstChildChanged",r.EVENT_LAST_CHILD_CHANGED="lastChildChanged",r.EVENT_CHILD_INDEX_CHANGED="childIndexChanged",r.EVENT_ROW_INDEX_CHANGED="rowIndexChanged",r.EVENT_EXPANDED_CHANGED="expandedChanged",r.EVENT_HAS_CHILDREN_CHANGED="hasChildrenChanged",r.EVENT_SELECTABLE_CHANGED="selectableChanged",r.EVENT_UI_LEVEL_CHANGED="uiLevelChanged",r.EVENT_HIGHLIGHT_CHANGED="rowHighlightChanged",r.EVENT_DRAGGING_CHANGED="draggingChanged",r})();var GE=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class HS extends Ne{constructor(){super('\n            <div class="ag-selection-checkbox" role="presentation">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')}postConstruct(){this.eCheckbox.setPassive(!0)}getCheckboxId(){return this.eCheckbox.getInputElement().id}onDataChanged(){this.onSelectionChanged()}onSelectableChanged(){this.showOrHideSelect()}onSelectionChanged(){const e=this.rowNode.isSelected();this.eCheckbox.setValue(e,!0)}onClicked(e,t,i){return this.rowNode.setSelectedParams({newValue:e,rangeSelect:i.shiftKey,groupSelectsFiltered:t,event:i,source:"checkboxSelected"})}init(e){if(this.rowNode=e.rowNode,this.column=e.column,this.overrides=e.overrides,this.onSelectionChanged(),this.addManagedListener(this.eCheckbox.getInputElement(),"dblclick",n=>{Aa(n)}),this.addManagedListener(this.eCheckbox.getInputElement(),"click",n=>{Aa(n);const s=this.gridOptionsService.get("groupSelectsFiltered"),o=this.eCheckbox.getValue();this.shouldHandleIndeterminateState(o,s)?0===this.onClicked(!0,s,n||{})&&this.onClicked(!1,s,n):o?this.onClicked(!1,s,n):this.onClicked(!0,s,n||{})}),this.addManagedListener(this.rowNode,Gt.EVENT_ROW_SELECTED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_DATA_CHANGED,this.onDataChanged.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_SELECTABLE_CHANGED,this.onSelectableChanged.bind(this)),this.gridOptionsService.get("isRowSelectable")||"function"==typeof this.getIsVisible()){const n=this.showOrHideSelect.bind(this);this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,n),this.addManagedListener(this.rowNode,Gt.EVENT_DATA_CHANGED,n),this.addManagedListener(this.rowNode,Gt.EVENT_CELL_CHANGED,n),this.showOrHideSelect()}this.eCheckbox.getInputElement().setAttribute("tabindex","-1")}shouldHandleIndeterminateState(e,t){return t&&(void 0===this.eCheckbox.getPreviousValue()||void 0===e)&&this.gridOptionsService.isRowModelType("clientSide")}showOrHideSelect(){var e,t,i,n;let s=this.rowNode.selectable;const o=this.getIsVisible();if(s)if("function"==typeof o){const c=null===(e=this.overrides)||void 0===e?void 0:e.callbackParams,u=null===(t=this.column)||void 0===t?void 0:t.createColumnFunctionCallbackParams(this.rowNode);s=!!u&&o(Object.assign(Object.assign({},c),u))}else s=o??!1;if(null===(i=this.column)||void 0===i?void 0:i.getColDef().showDisabledCheckboxes)return this.eCheckbox.setDisabled(!s),this.setVisible(!0),void this.setDisplayed(!0);null!==(n=this.overrides)&&void 0!==n&&n.removeHidden?this.setDisplayed(s):this.setVisible(s)}getIsVisible(){var e,t;return this.overrides?this.overrides.isVisible:null===(t=null===(e=this.column)||void 0===e?void 0:e.getColDef())||void 0===t?void 0:t.checkboxSelection}}GE([re("eCheckbox")],HS.prototype,"eCheckbox",void 0),GE([Se],HS.prototype,"postConstruct",null);var $r,Oh=(()=>(function(r){r[r.Up=0]="Up",r[r.Down=1]="Down"}(Oh||(Oh={})),Oh))(),zr=(()=>(function(r){r[r.Left=0]="Left",r[r.Right=1]="Right"}(zr||(zr={})),zr))(),Tt=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},sn=(()=>(function(r){r[r.ToolPanel=0]="ToolPanel",r[r.HeaderCell=1]="HeaderCell",r[r.RowDrag=2]="RowDrag",r[r.ChartPanel=3]="ChartPanel",r[r.AdvancedFilterBuilder=4]="AdvancedFilterBuilder"}(sn||(sn={})),sn))();let St=$r=class extends Ee{constructor(){super(...arguments),this.dragSourceAndParamsList=[],this.dropTargets=[]}init(){this.ePinnedIcon=Ur("columnMovePin",this.gridOptionsService,null),this.eHideIcon=Ur("columnMoveHide",this.gridOptionsService,null),this.eMoveIcon=Ur("columnMoveMove",this.gridOptionsService,null),this.eLeftIcon=Ur("columnMoveLeft",this.gridOptionsService,null),this.eRightIcon=Ur("columnMoveRight",this.gridOptionsService,null),this.eGroupIcon=Ur("columnMoveGroup",this.gridOptionsService,null),this.eAggregateIcon=Ur("columnMoveValue",this.gridOptionsService,null),this.ePivotIcon=Ur("columnMovePivot",this.gridOptionsService,null),this.eDropNotAllowedIcon=Ur("dropNotAllowed",this.gridOptionsService,null)}addDragSource(e,t=!1){const i={eElement:e.eElement,dragStartPixels:e.dragStartPixels,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this),onDragging:this.onDragging.bind(this),includeTouch:t};this.dragSourceAndParamsList.push({params:i,dragSource:e}),this.dragService.addDragSource(i)}removeDragSource(e){const t=this.dragSourceAndParamsList.find(i=>i.dragSource===e);t&&(this.dragService.removeDragSource(t.params),vr(this.dragSourceAndParamsList,t))}clearDragSourceParamsList(){this.dragSourceAndParamsList.forEach(e=>this.dragService.removeDragSource(e.params)),this.dragSourceAndParamsList.length=0,this.dropTargets.length=0}nudge(){this.dragging&&this.onDragging(this.eventLastTime,!0)}onDragStart(e,t){this.dragging=!0,this.dragSource=e,this.eventLastTime=t,this.dragItem=this.dragSource.getDragItem(),this.dragSource.onDragStarted&&this.dragSource.onDragStarted(),this.createGhost()}onDragStop(e){if(this.eventLastTime=null,this.dragging=!1,this.dragSource.onDragStopped&&this.dragSource.onDragStopped(),this.lastDropTarget&&this.lastDropTarget.onDragStop){const t=this.createDropTargetEvent(this.lastDropTarget,e,null,null,!1);this.lastDropTarget.onDragStop(t)}this.lastDropTarget=null,this.dragItem=null,this.removeGhost()}onDragging(e,t){var i,n,s,o;const a=this.getHorizontalDirection(e),c=this.getVerticalDirection(e);this.eventLastTime=e,this.positionGhost(e);const u=this.dropTargets.filter(g=>this.isMouseOnDropTarget(e,g)),p=this.findCurrentDropTarget(e,u);if(p!==this.lastDropTarget)this.leaveLastTargetIfExists(e,a,c,t),null!==this.lastDropTarget&&null===p&&(null===(n=(i=this.dragSource).onGridExit)||void 0===n||n.call(i,this.dragItem)),null===this.lastDropTarget&&null!==p&&(null===(o=(s=this.dragSource).onGridEnter)||void 0===o||o.call(s,this.dragItem)),this.enterDragTargetIfExists(p,e,a,c,t),this.lastDropTarget=p;else if(p&&p.onDragging){const g=this.createDropTargetEvent(p,e,a,c,t);p.onDragging(g)}}getAllContainersFromDropTarget(e){const t=e.getSecondaryContainers?e.getSecondaryContainers():null,i=[[e.getContainer()]];return t?i.concat(t):i}allContainersIntersect(e,t){for(const i of t){const n=i.getBoundingClientRect();if(0===n.width||0===n.height)return!1;const o=e.clientY>=n.top&&e.clientY<n.bottom;if(!(e.clientX>=n.left&&e.clientX<n.right&&o))return!1}return!0}isMouseOnDropTarget(e,t){const i=this.getAllContainersFromDropTarget(t);let n=!1;for(const s of i)if(this.allContainersIntersect(e,s)){n=!0;break}return!(t.targetContainsSource&&!t.getContainer().contains(this.dragSource.eElement))&&n&&t.isInterestedIn(this.dragSource.type,this.dragSource.eElement)}findCurrentDropTarget(e,t){const i=t.length;if(0===i)return null;if(1===i)return t[0];const s=this.gridOptionsService.getRootNode().elementsFromPoint(e.clientX,e.clientY);for(const o of s)for(const a of t)if(-1!==ER(this.getAllContainersFromDropTarget(a)).indexOf(o))return a;return null}enterDragTargetIfExists(e,t,i,n,s){if(e){if(e.onDragEnter){const o=this.createDropTargetEvent(e,t,i,n,s);e.onDragEnter(o)}this.setGhostIcon(e.getIconName?e.getIconName():null)}}leaveLastTargetIfExists(e,t,i,n){if(this.lastDropTarget){if(this.lastDropTarget.onDragLeave){const s=this.createDropTargetEvent(this.lastDropTarget,e,t,i,n);this.lastDropTarget.onDragLeave(s)}this.setGhostIcon(null)}}addDropTarget(e){this.dropTargets.push(e)}removeDropTarget(e){this.dropTargets=this.dropTargets.filter(t=>t.getContainer()!==e.getContainer())}hasExternalDropZones(){return this.dropTargets.some(e=>e.external)}findExternalZone(e){return this.dropTargets.filter(i=>i.external).find(i=>i.getContainer()===e.getContainer())||null}getHorizontalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientX,i=e.clientX;return t===i?null:t>i?zr.Left:zr.Right}getVerticalDirection(e){const t=this.eventLastTime&&this.eventLastTime.clientY,i=e.clientY;return t===i?null:t>i?Oh.Up:Oh.Down}createDropTargetEvent(e,t,i,n,s){const o=e.getContainer(),a=o.getBoundingClientRect(),{gridApi:c,columnApi:u,dragItem:p,dragSource:g}=this;return{event:t,x:t.clientX-a.left,y:t.clientY-a.top,vDirection:n,hDirection:i,dragSource:g,fromNudge:s,dragItem:p,api:c,columnApi:u,dropZoneTarget:o}}positionGhost(e){const t=this.eGhost;if(!t)return;const n=t.getBoundingClientRect().height,s=mE()-2,o=_S()-2,a=DS(t.offsetParent),{clientY:c,clientX:u}=e;let p=c-a.top-n/2,g=u-a.left-10;const m=this.gridOptionsService.getDocument(),y=m.defaultView||window,b=y.pageYOffset||m.documentElement.scrollTop,_=y.pageXOffset||m.documentElement.scrollLeft;s>0&&g+t.clientWidth>s+_&&(g=s+_-t.clientWidth),g<0&&(g=0),o>0&&p+t.clientHeight>o+b&&(p=o+b-t.clientHeight),p<0&&(p=0),t.style.left=`${g}px`,t.style.top=`${p}px`}removeGhost(){this.eGhost&&this.eGhostParent&&this.eGhostParent.removeChild(this.eGhost),this.eGhost=null}createGhost(){this.eGhost=ps($r.GHOST_TEMPLATE),this.mouseEventService.stampTopLevelGridCompWithGridInstance(this.eGhost);const{theme:e}=this.environment.getTheme();e&&this.eGhost.classList.add(e),this.eGhostIcon=this.eGhost.querySelector(".ag-dnd-ghost-icon"),this.setGhostIcon(null);const t=this.eGhost.querySelector(".ag-dnd-ghost-label");let i=this.dragSource.dragItemName;mh(i)&&(i=i()),t.innerHTML=yn(i)||"",this.eGhost.style.height="25px",this.eGhost.style.top="20px",this.eGhost.style.left="20px";const n=this.gridOptionsService.getDocument();let s=null,o=null;try{s=n.fullscreenElement}catch{}finally{s||(s=this.gridOptionsService.getRootNode());o=s.querySelector("body")||(s instanceof ShadowRoot?s:s instanceof Document?s?.documentElement:s)}this.eGhostParent=o,this.eGhostParent?this.eGhostParent.appendChild(this.eGhost):console.warn("AG Grid: could not find document body, it is needed for dragging columns")}setGhostIcon(e,t=!1){es(this.eGhostIcon);let i=null;switch(e||(e=this.dragSource.getDefaultIconName?this.dragSource.getDefaultIconName():$r.ICON_NOT_ALLOWED),e){case $r.ICON_PINNED:i=this.ePinnedIcon;break;case $r.ICON_MOVE:i=this.eMoveIcon;break;case $r.ICON_LEFT:i=this.eLeftIcon;break;case $r.ICON_RIGHT:i=this.eRightIcon;break;case $r.ICON_GROUP:i=this.eGroupIcon;break;case $r.ICON_AGGREGATE:i=this.eAggregateIcon;break;case $r.ICON_PIVOT:i=this.ePivotIcon;break;case $r.ICON_NOT_ALLOWED:i=this.eDropNotAllowedIcon;break;case $r.ICON_HIDE:i=this.eHideIcon}this.eGhostIcon.classList.toggle("ag-shake-left-to-right",t),(i!==this.eHideIcon||!this.gridOptionsService.get("suppressDragLeaveHidesColumns"))&&i&&this.eGhostIcon.appendChild(i)}};St.ICON_PINNED="pinned",St.ICON_MOVE="move",St.ICON_LEFT="left",St.ICON_RIGHT="right",St.ICON_GROUP="group",St.ICON_AGGREGATE="aggregate",St.ICON_PIVOT="pivot",St.ICON_NOT_ALLOWED="notAllowed",St.ICON_HIDE="hide",St.GHOST_TEMPLATE='<div class="ag-dnd-ghost ag-unselectable">\n            <span class="ag-dnd-ghost-icon ag-shake-left-to-right"></span>\n            <div class="ag-dnd-ghost-label"></div>\n        </div>',Tt([P("dragService")],St.prototype,"dragService",void 0),Tt([P("mouseEventService")],St.prototype,"mouseEventService",void 0),Tt([P("columnApi")],St.prototype,"columnApi",void 0),Tt([P("gridApi")],St.prototype,"gridApi",void 0),Tt([Se],St.prototype,"init",null),Tt([Js],St.prototype,"clearDragSourceParamsList",null),St=$r=Tt([He("dragAndDropService")],St);var Tv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Mh extends Ne{constructor(e,t,i,n,s,o){super(),this.cellValueFn=e,this.rowNode=t,this.column=i,this.customGui=n,this.dragStartPixels=s,this.suppressVisibilityChange=o,this.dragSource=null}isCustomGui(){return null!=this.customGui}postConstruct(){if(this.customGui?this.setDragElement(this.customGui,this.dragStartPixels):(this.setTemplate('<div class="ag-drag-handle ag-row-drag" aria-hidden="true"></div>'),this.getGui().appendChild(Nn("rowDrag",this.gridOptionsService,null)),this.addDragSource()),this.checkCompatibility(),!this.suppressVisibilityChange){const e=this.gridOptionsService.get("rowDragManaged")?new BE(this,this.beans,this.rowNode,this.column):new iA(this,this.beans,this.rowNode,this.column);this.createManagedBean(e,this.beans.context)}}setDragElement(e,t){this.setTemplateFromElement(e),this.addDragSource(t)}getSelectedNodes(){if(!this.gridOptionsService.get("rowDragMultiRow"))return[this.rowNode];const t=this.beans.selectionService.getSelectedNodes();return-1!==t.indexOf(this.rowNode)?t:[this.rowNode]}checkCompatibility(){const e=this.gridOptionsService.get("rowDragManaged");this.gridOptionsService.get("treeData")&&e&&st("If using row drag with tree data, you cannot have rowDragManaged=true")}getDragItem(){return{rowNode:this.rowNode,rowNodes:this.getSelectedNodes(),columns:this.column?[this.column]:void 0,defaultTextValue:this.cellValueFn()}}getRowDragText(e){if(e){const t=e.getColDef();if(t.rowDragText)return t.rowDragText}return this.gridOptionsService.get("rowDragText")}addDragSource(e=4){this.dragSource&&this.removeDragSource();const t=this.localeService.getLocaleTextFunc();this.dragSource={type:sn.RowDrag,eElement:this.getGui(),dragItemName:()=>{var i;const n=this.getDragItem(),s=(null===(i=n.rowNodes)||void 0===i?void 0:i.length)||1,o=this.getRowDragText(this.column);return o?o(n,s):1===s?this.cellValueFn():`${s} ${t("rowDragRows","rows")}`},getDragItem:()=>this.getDragItem(),dragStartPixels:e,dragSourceDomDataKey:this.gridOptionsService.getDomDataKey()},this.beans.dragAndDropService.addDragSource(this.dragSource,!0)}removeDragSource(){this.dragSource&&this.beans.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null}}Tv([P("beans")],Mh.prototype,"beans",void 0),Tv([Se],Mh.prototype,"postConstruct",null),Tv([Js],Mh.prototype,"removeDragSource",null);class VE extends Ee{constructor(e,t,i){super(),this.parent=e,this.rowNode=t,this.column=i}setDisplayedOrVisible(e){const t={skipAriaHidden:!0};if(e)this.parent.setDisplayed(!1,t);else{let i=!0,n=!1;this.column&&(i=this.column.isRowDrag(this.rowNode)||this.parent.isCustomGui(),n=mh(this.column.getColDef().rowDrag)),n?(this.parent.setDisplayed(!0,t),this.parent.setVisible(i,t)):(this.parent.setDisplayed(i,t),this.parent.setVisible(!0,t))}}}class iA extends VE{constructor(e,t,i,n){super(e,i,n),this.beans=t}postConstruct(){this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,G.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const e=this.gridOptionsService.get("suppressRowDrag");this.setDisplayedOrVisible(e)}}Tv([Se],iA.prototype,"postConstruct",null);class BE extends VE{constructor(e,t,i,n){super(e,i,n),this.beans=t}postConstruct(){this.addManagedListener(this.beans.eventService,G.EVENT_SORT_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,G.EVENT_FILTER_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.beans.eventService,G.EVENT_NEW_COLUMNS_LOADED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_DATA_CHANGED,this.workOutVisibility.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_CELL_CHANGED,this.workOutVisibility.bind(this)),this.addManagedPropertyListener("suppressRowDrag",this.onSuppressRowDrag.bind(this)),this.workOutVisibility()}onSuppressRowDrag(){this.workOutVisibility()}workOutVisibility(){const t=this.beans.ctrlsService.getGridBodyCtrl().getRowDragFeature(),i=t&&t.shouldPreventRowMove(),n=this.gridOptionsService.get("suppressRowDrag"),s=this.beans.dragAndDropService.hasExternalDropZones();this.setDisplayedOrVisible(i&&!s||n)}}Tv([Se],BE.prototype,"postConstruct",null);var Rv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Vf extends Ee{init(e,t,i,n,s,o,a){var c,u,p,g;this.params=a,this.eGui=t,this.eCheckbox=i,this.eExpanded=n,this.eContracted=s,this.comp=e,this.compClass=o;const{node:m,colDef:b}=a,_=this.isTopLevelFooter();if(!_){if(this.isEmbeddedRowMismatch())return;if(m.footer&&this.gridOptionsService.get("groupHideOpenParents")&&(b&&b.showRowGroup)!==(m.rowGroupColumn&&m.rowGroupColumn.getColId()))return}if(this.setupShowingValueForOpenedParent(),this.findDisplayedGroupNode(),!_){const E=a.node.footer&&a.node.rowGroupIndex===this.columnModel.getRowGroupColumns().findIndex(j=>{var q;return j.getColId()===(null===(q=a.colDef)||void 0===q?void 0:q.showRowGroup)}),R="multipleColumns"!=this.gridOptionsService.get("groupDisplayType")||this.gridOptionsService.get("treeData")||this.gridOptionsService.get("showOpenedGroup")&&!a.node.footer&&(!a.node.group||null!=a.node.rowGroupIndex&&a.node.rowGroupIndex>this.columnModel.getRowGroupColumns().findIndex(j=>{var q;return j.getColId()===(null===(q=a.colDef)||void 0===q?void 0:q.showRowGroup)})),O=!m.group&&((null===(c=this.params.colDef)||void 0===c?void 0:c.field)||(null===(u=this.params.colDef)||void 0===u?void 0:u.valueGetter)),L=this.isExpandable(),k=this.columnModel.isPivotMode()&&m.leafGroup&&(null===(p=m.rowGroupColumn)||void 0===p?void 0:p.getColId())===(null===(g=a.column)||void 0===g?void 0:g.getColDef().showRowGroup);if(!(this.showingValueForOpenedParent||L||O||R||E||k))return}this.addExpandAndContract(),this.addFullWidthRowDraggerIfNeeded(),this.addCheckboxIfNeeded(),this.addValueElement(),this.setupIndent(),this.refreshAriaExpanded()}getCellAriaRole(){var e,t;const i=null===(e=this.params.colDef)||void 0===e?void 0:e.cellAriaRole,n=null===(t=this.params.column)||void 0===t?void 0:t.getColDef().cellAriaRole;return i||n||"gridcell"}destroy(){super.destroy(),this.expandListener=null}refreshAriaExpanded(){const{node:e,eGridCell:t}=this.params;if(this.expandListener&&(this.expandListener=this.expandListener()),!this.isExpandable())return void fS(t);const i=()=>{_c(t,!!e.expanded)};this.expandListener=this.addManagedListener(e,Gt.EVENT_EXPANDED_CHANGED,i)||null,i()}isTopLevelFooter(){if(!this.gridOptionsService.get("groupIncludeTotalFooter")||null!=this.params.value||-1!=this.params.node.level)return!1;const e=this.params.colDef;if(null==e||!0===e.showRowGroup)return!0;const i=this.columnModel.getRowGroupColumns();return!i||0===i.length||i[0].getId()===e.showRowGroup}isEmbeddedRowMismatch(){if(!this.params.fullWidth||!this.gridOptionsService.get("embedFullWidthRows"))return!1;const e="left"===this.params.pinned,t="right"===this.params.pinned,i=!e&&!t;return this.gridOptionsService.get("enableRtl")?this.columnModel.isPinningLeft()?!t:!i:this.columnModel.isPinningLeft()?!e:!i}findDisplayedGroupNode(){const e=this.params.column,t=this.params.node;if(this.showingValueForOpenedParent){let i=t.parent;for(;null!=i;){if(i.rowGroupColumn&&e.isRowGroupDisplayed(i.rowGroupColumn.getId())){this.displayedGroupNode=i;break}i=i.parent}}gt(this.displayedGroupNode)&&(this.displayedGroupNode=t)}setupShowingValueForOpenedParent(){const e=this.params.node,t=this.params.column;if(!this.gridOptionsService.get("groupHideOpenParents"))return void(this.showingValueForOpenedParent=!1);if(!e.groupData)return void(this.showingValueForOpenedParent=!1);if(null!=e.rowGroupColumn){const s=e.rowGroupColumn.getId();if(t.isRowGroupDisplayed(s))return void(this.showingValueForOpenedParent=!1)}const n=null!=e.groupData[t.getId()];this.showingValueForOpenedParent=n}addValueElement(){this.displayedGroupNode.footer?this.addFooterValue():(this.addGroupValue(),this.addChildCount())}addGroupValue(){var e;const t=this.adjustParamsWithDetailsFromRelatedColumn(),i=this.getInnerCompDetails(t),{valueFormatted:n,value:s}=t;let o=n;if(null==o){const a=this.displayedGroupNode.rowGroupColumn&&(null===(e=this.params.column)||void 0===e?void 0:e.isRowGroupDisplayed(this.displayedGroupNode.rowGroupColumn.getId()));o=""===this.displayedGroupNode.key&&this.displayedGroupNode.group&&a?this.localeService.getLocaleTextFunc()("blanks","(Blanks)"):s??null}this.comp.setInnerRenderer(i,o)}adjustParamsWithDetailsFromRelatedColumn(){const e=this.displayedGroupNode.rowGroupColumn,t=this.params.column;if(!e)return this.params;if(null!=t&&!t.isRowGroupDisplayed(e.getId()))return this.params;const n=this.params,{value:s,node:o}=this.params,a=this.valueFormatterService.formatValue(e,o,s);return Object.assign(Object.assign({},n),{valueFormatted:a})}addFooterValue(){const e=this.params.footerValueGetter;let t="";if(e){const n=SR(this.params);n.value=this.params.value,"function"==typeof e?t=e(n):"string"==typeof e?t=this.expressionService.evaluate(e,n):console.warn("AG Grid: footerValueGetter should be either a function or a string (expression)")}else t=this.localeService.getLocaleTextFunc()("footerTotal","Total")+" "+(null!=this.params.value?this.params.value:"");const i=this.getInnerCompDetails(this.params);this.comp.setInnerRenderer(i,t)}getInnerCompDetails(e){if(e.fullWidth)return this.userComponentFactory.getFullWidthGroupRowInnerCellRenderer(this.gridOptionsService.get("groupRowRendererParams"),e);const t=this.userComponentFactory.getInnerRendererDetails(e,e),i=a=>a&&a.componentClass==this.compClass;if(t&&!i(t))return t;const n=this.displayedGroupNode.rowGroupColumn,s=n?n.getColDef():void 0;if(!s)return;const o=this.userComponentFactory.getCellRendererDetails(s,e);return o&&!i(o)?o:i(o)&&s.cellRendererParams&&s.cellRendererParams.innerRenderer?this.userComponentFactory.getInnerRendererDetails(s.cellRendererParams,e):void 0}addChildCount(){this.params.suppressCount||(this.addManagedListener(this.displayedGroupNode,Gt.EVENT_ALL_CHILDREN_COUNT_CHANGED,this.updateChildCount.bind(this)),this.updateChildCount())}updateChildCount(){const e=this.displayedGroupNode.allChildrenCount,n=this.isShowRowGroupForThisRow()&&null!=e&&e>=0?`(${e})`:"";this.comp.setChildCount(n)}isShowRowGroupForThisRow(){if(this.gridOptionsService.get("treeData"))return!0;const e=this.displayedGroupNode.rowGroupColumn;if(!e)return!1;const t=this.params.column;return null==t||t.isRowGroupDisplayed(e.getId())}addExpandAndContract(){var e;const t=this.params,i=Nn("groupExpanded",this.gridOptionsService,null),n=Nn("groupContracted",this.gridOptionsService,null);i&&this.eExpanded.appendChild(i),n&&this.eContracted.appendChild(n);const s=t.eGridCell;!((null===(e=this.params.column)||void 0===e?void 0:e.isCellEditable(t.node))&&this.gridOptionsService.get("enableGroupEdit"))&&this.isExpandable()&&!t.suppressDoubleClickExpand&&this.addManagedListener(s,"dblclick",this.onCellDblClicked.bind(this)),this.addManagedListener(this.eExpanded,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eContracted,"click",this.onExpandClicked.bind(this)),this.addManagedListener(s,"keydown",this.onKeyDown.bind(this)),this.addManagedListener(t.node,Gt.EVENT_EXPANDED_CHANGED,this.showExpandAndContractIcons.bind(this)),this.showExpandAndContractIcons();const a=this.onRowNodeIsExpandableChanged.bind(this);this.addManagedListener(this.displayedGroupNode,Gt.EVENT_ALL_CHILDREN_COUNT_CHANGED,a),this.addManagedListener(this.displayedGroupNode,Gt.EVENT_MASTER_CHANGED,a),this.addManagedListener(this.displayedGroupNode,Gt.EVENT_GROUP_CHANGED,a),this.addManagedListener(this.displayedGroupNode,Gt.EVENT_HAS_CHILDREN_CHANGED,a)}onExpandClicked(e){yl(e)||(Aa(e),this.onExpandOrContract(e))}onExpandOrContract(e){const t=this.displayedGroupNode,i=!t.expanded;!i&&t.sticky&&this.scrollToStickyNode(t),t.setExpanded(i,e)}scrollToStickyNode(e){this.ctrlsService.getGridBodyCtrl().getScrollFeature().setVerticalScrollPosition(e.rowTop-e.stickyRowTop)}isExpandable(){if(this.showingValueForOpenedParent)return!0;const e=this.displayedGroupNode,t=this.columnModel.isPivotMode()&&e.leafGroup;if(!e.isExpandable()||e.footer||t)return!1;const n=this.params.column;return null==n||"string"!=typeof n.getColDef().showRowGroup||this.isShowRowGroupForThisRow()}showExpandAndContractIcons(){const{params:e,displayedGroupNode:t,columnModel:i}=this,{node:n}=e,s=this.isExpandable();if(s){const p=!!this.showingValueForOpenedParent||n.expanded;this.comp.setExpandedDisplayed(p),this.comp.setContractedDisplayed(!p)}else this.comp.setExpandedDisplayed(!1),this.comp.setContractedDisplayed(!1);const o=i.isPivotMode(),a=o&&t.leafGroup,c=s&&!a,u=n.footer&&-1===n.level;this.comp.addOrRemoveCssClass("ag-cell-expandable",c),this.comp.addOrRemoveCssClass("ag-row-group",c),o?this.comp.addOrRemoveCssClass("ag-pivot-leaf-group",a):u||this.comp.addOrRemoveCssClass("ag-row-group-leaf-indent",!c)}onRowNodeIsExpandableChanged(){this.showExpandAndContractIcons(),this.setIndent(),this.refreshAriaExpanded()}setupIndent(){this.params.suppressPadding||(this.addManagedListener(this.params.node,Gt.EVENT_UI_LEVEL_CHANGED,this.setIndent.bind(this)),this.setIndent())}setIndent(){if(this.gridOptionsService.get("groupHideOpenParents"))return;const e=this.params,t=e.node,i=!!e.colDef,n=this.gridOptionsService.get("treeData"),o=!i||n||!0===e.colDef.showRowGroup?t.uiLevel:0;this.indentClass&&this.comp.addOrRemoveCssClass(this.indentClass,!1),this.indentClass="ag-row-group-indent-"+o,this.comp.addOrRemoveCssClass(this.indentClass,!0)}addFullWidthRowDraggerIfNeeded(){if(!this.params.fullWidth||!this.params.rowDrag)return;const e=new Mh(()=>this.params.value,this.params.node);this.createManagedBean(e,this.context),this.eGui.insertAdjacentElement("afterbegin",e.getGui())}isUserWantsSelected(){const e=this.params.checkbox;return"function"==typeof e||!0===e}addCheckboxIfNeeded(){const e=this.displayedGroupNode,t=this.isUserWantsSelected()&&!e.footer&&!e.rowPinned&&!e.detail;if(t){const i=new HS;this.getContext().createBean(i),i.init({rowNode:this.params.node,column:this.params.column,overrides:{isVisible:this.params.checkbox,callbackParams:this.params,removeHidden:!0}}),this.eCheckbox.appendChild(i.getGui()),this.addDestroyFunc(()=>this.getContext().destroyBean(i))}this.comp.setCheckboxVisible(t)}onKeyDown(e){e.key!==ge.ENTER||this.params.suppressEnterExpand||this.params.column&&this.params.column.isCellEditable(this.params.node)||this.onExpandOrContract(e)}onCellDblClicked(e){yl(e)||aS(this.eExpanded,e)||aS(this.eContracted,e)||this.onExpandOrContract(e)}}Rv([P("expressionService")],Vf.prototype,"expressionService",void 0),Rv([P("valueFormatterService")],Vf.prototype,"valueFormatterService",void 0),Rv([P("columnModel")],Vf.prototype,"columnModel",void 0),Rv([P("userComponentFactory")],Vf.prototype,"userComponentFactory",void 0),Rv([P("ctrlsService")],Vf.prototype,"ctrlsService",void 0);var US=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Ia extends Ne{constructor(){super(Ia.TEMPLATE)}init(e){const t={setInnerRenderer:(o,a)=>this.setRenderDetails(o,a),setChildCount:o=>this.eChildCount.textContent=o,addOrRemoveCssClass:(o,a)=>this.addOrRemoveCssClass(o,a),setContractedDisplayed:o=>si(this.eContracted,o),setExpandedDisplayed:o=>si(this.eExpanded,o),setCheckboxVisible:o=>this.eCheckbox.classList.toggle("ag-invisible",!o)},i=this.createManagedBean(new Vf),n=!e.colDef,s=this.getGui();i.init(t,s,this.eCheckbox,this.eExpanded,this.eContracted,this.constructor,e),n&&In(s,i.getCellAriaRole())}setRenderDetails(e,t){if(e){const i=e.newAgStackInstance();if(!i)return;i.then(n=>{if(!n)return;const s=()=>this.context.destroyBean(n);this.isAlive()?(this.eValue.appendChild(n.getGui()),this.addDestroyFunc(s)):s()})}else this.eValue.innerText=t}destroy(){this.getContext().destroyBean(this.innerCellRenderer),super.destroy()}refresh(){return!1}}Ia.TEMPLATE='<span class="ag-cell-wrapper">\n            <span class="ag-group-expanded" ref="eExpanded"></span>\n            <span class="ag-group-contracted" ref="eContracted"></span>\n            <span class="ag-group-checkbox ag-invisible" ref="eCheckbox"></span>\n            <span class="ag-group-value" ref="eValue"></span>\n            <span class="ag-group-child-count" ref="eChildCount"></span>\n        </span>',US([re("eExpanded")],Ia.prototype,"eExpanded",void 0),US([re("eContracted")],Ia.prototype,"eContracted",void 0),US([re("eCheckbox")],Ia.prototype,"eCheckbox",void 0),US([re("eValue")],Ia.prototype,"eValue",void 0),US([re("eChildCount")],Ia.prototype,"eChildCount",void 0);var HE=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Wo extends Ne{constructor(){super(Wo.TEMPLATE)}init(e){e.node.failedLoad?this.setupFailed():this.setupLoading()}setupFailed(){const e=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=e("loadingError","ERR")}setupLoading(){const e=Nn("groupLoading",this.gridOptionsService,null);e&&this.eLoadingIcon.appendChild(e);const t=this.localeService.getLocaleTextFunc();this.eLoadingText.innerText=t("loadingOoo","Loading")}refresh(e){return!1}destroy(){super.destroy()}}Wo.TEMPLATE='<div class="ag-loading">\n            <span class="ag-loading-icon" ref="eLoadingIcon"></span>\n            <span class="ag-loading-text" ref="eLoadingText"></span>\n        </div>',HE([re("eLoadingIcon")],Wo.prototype,"eLoadingIcon",void 0),HE([re("eLoadingText")],Wo.prototype,"eLoadingText",void 0);let vP=(()=>{class r extends Ne{constructor(){super()}destroy(){super.destroy()}init(t){const i=this.gridOptionsService.get("overlayLoadingTemplate");if(this.setTemplate(i??r.DEFAULT_LOADING_OVERLAY_TEMPLATE),!i){const n=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=n("loadingOoo","Loading...")})}}}return r.DEFAULT_LOADING_OVERLAY_TEMPLATE='<span aria-live="polite" aria-atomic="true" class="ag-overlay-loading-center"></span>',r})(),UE=(()=>{class r extends Ne{constructor(){super()}destroy(){super.destroy()}init(t){const i=this.gridOptionsService.get("overlayNoRowsTemplate");if(this.setTemplate(i??r.DEFAULT_NO_ROWS_TEMPLATE),!i){const n=this.localeService.getLocaleTextFunc();setTimeout(()=>{this.getGui().textContent=n("noRowsToShow","No Rows To Show")})}}}return r.DEFAULT_NO_ROWS_TEMPLATE='<span class="ag-overlay-no-rows-center"></span>',r})();class WE extends Vd{constructor(){super('<div class="ag-tooltip"></div>')}init(e){const{value:t}=e;this.getGui().textContent=yn(t,!0)}}class CP{getTemplate(){return'<ag-input-number-field class="ag-cell-editor" ref="eInput"></ag-input-number-field>'}init(e,t){this.eInput=e,this.params=t,null!=t.max&&e.setMax(t.max),null!=t.min&&e.setMin(t.min),null!=t.precision&&e.setPrecision(t.precision),null!=t.step&&e.setStep(t.step);const i=e.getInputElement();t.preventStepping?e.addManagedListener(i,"keydown",this.preventStepping):t.showStepperButtons&&i.classList.add("ag-number-field-input-stepper")}preventStepping(e){(e.key===ge.UP||e.key===ge.DOWN)&&e.preventDefault()}getValue(){const e=this.eInput.getValue();if(!Ie(e)&&!Ie(this.params.value))return this.params.value;let t=this.params.parseValue(e);if(null==t)return t;if("string"==typeof t){if(""===t)return null;t=Number(t)}return isNaN(t)?null:t}getStartValue(){return this.params.value}}class f1 extends Gf{constructor(){super(new CP)}}class g1{getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,t){this.eInput=e,this.params=t,null!=t.min&&e.setMin(t.min),null!=t.max&&e.setMax(t.max),null!=t.step&&e.setStep(t.step)}getValue(){const e=this.eInput.getDate();return Ie(e)||Ie(this.params.value)?e??null:this.params.value}getStartValue(){const{value:e}=this.params;if(e instanceof Date)return Bo(e,!1)}}class m1 extends Gf{constructor(){super(new g1)}}class nA{constructor(e){this.getDataTypeService=e}getTemplate(){return'<ag-input-date-field class="ag-cell-editor" ref="eInput"></ag-input-date-field>'}init(e,t){this.eInput=e,this.params=t,null!=t.min&&e.setMin(t.min),null!=t.max&&e.setMax(t.max),null!=t.step&&e.setStep(t.step)}getValue(){const e=this.formatDate(this.eInput.getDate());return Ie(e)||Ie(this.params.value)?this.params.parseValue(e??""):this.params.value}getStartValue(){var e,t;return Bo(null!==(t=this.parseDate(null!==(e=this.params.value)&&void 0!==e?e:void 0))&&void 0!==t?t:null,!1)}parseDate(e){return this.getDataTypeService().getDateParserFunction(this.params.column)(e)}formatDate(e){return this.getDataTypeService().getDateFormatterFunction(this.params.column)(e)}}class SP extends Gf{constructor(){super(new nA(()=>this.dataTypeService))}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([P("dataTypeService")],SP.prototype,"dataTypeService",void 0);class Dl extends Ne{constructor(){super(Dl.TEMPLATE)}init(e){this.params=e,this.updateCheckbox(e);const t=this.eCheckbox.getInputElement();t.setAttribute("tabindex","-1"),lv(t,"polite"),this.addManagedListener(t,"click",n=>{if(Aa(n),this.eCheckbox.isDisabled())return;const s=this.eCheckbox.getValue();this.onCheckboxChanged(s)}),this.addManagedListener(t,"dblclick",n=>{Aa(n)});const i=this.gridOptionsService.getDocument();this.addManagedListener(this.params.eGridCell,"keydown",n=>{if(n.key===ge.SPACE&&!this.eCheckbox.isDisabled()){this.params.eGridCell===i.activeElement&&this.eCheckbox.toggle();const s=this.eCheckbox.getValue();this.onCheckboxChanged(s),n.preventDefault()}})}refresh(e){return this.params=e,this.updateCheckbox(e),!0}updateCheckbox(e){var t,i,n;let s,o=!0;if(e.node.group&&e.column){const g=e.column.getColId();g.startsWith(wf)?s=null==e.value||""===e.value?void 0:"true"===e.value:e.node.aggData&&void 0!==e.node.aggData[g]?s=null!==(t=e.value)&&void 0!==t?t:void 0:o=!1}else s=null!==(i=e.value)&&void 0!==i?i:void 0;if(!o)return void this.eCheckbox.setDisplayed(!1);this.eCheckbox.setValue(s);const a=null!=e.disabled?e.disabled:!(null!==(n=e.column)&&void 0!==n&&n.isCellEditable(e.node));this.eCheckbox.setDisabled(a);const c=this.localeService.getLocaleTextFunc(),u=dE(c,s),p=a?u:`${c("ariaToggleCellValue","Press SPACE to toggle cell value")} (${u})`;this.eCheckbox.setInputAriaLabel(p)}onCheckboxChanged(e){const{column:t,node:i,rowIndex:n,value:s}=this.params,o={type:G.EVENT_CELL_EDITING_STARTED,column:t,colDef:t?.getColDef(),data:i.data,node:i,rowIndex:n,rowPinned:i.rowPinned,value:s};this.eventService.dispatchEvent(o);const a=this.params.node.setDataValue(this.params.column,e,"edit"),c={type:G.EVENT_CELL_EDITING_STOPPED,column:t,colDef:t?.getColDef(),data:i.data,node:i,rowIndex:n,rowPinned:i.rowPinned,value:s,oldValue:s,newValue:e,valueChanged:a};this.eventService.dispatchEvent(c)}}Dl.TEMPLATE='\n        <div class="ag-cell-wrapper ag-checkbox-cell" role="presentation">\n            <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n        </div>',function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([re("eCheckbox")],Dl.prototype,"eCheckbox",void 0);class jE extends Vd{constructor(){super('\n            <div class="ag-cell-wrapper ag-cell-edit-wrapper ag-checkbox-edit">\n                <ag-checkbox role="presentation" ref="eCheckbox"></ag-checkbox>\n            </div>')}init(e){var t;this.params=e;const i=null!==(t=e.value)&&void 0!==t?t:void 0;this.eCheckbox.setValue(i),this.eCheckbox.getInputElement().setAttribute("tabindex","-1"),this.setAriaLabel(i),this.addManagedListener(this.eCheckbox,G.EVENT_FIELD_VALUE_CHANGED,s=>this.setAriaLabel(s.selected))}getValue(){return this.eCheckbox.getValue()}focusIn(){this.eCheckbox.getFocusableElement().focus()}afterGuiAttached(){this.params.cellStartedEdit&&this.focusIn()}isPopup(){return!1}setAriaLabel(e){const t=this.localeService.getLocaleTextFunc(),i=dE(t,e),n=t("ariaToggleCellValue","Press SPACE to toggle cell value");this.eCheckbox.setInputAriaLabel(`${n} (${i})`)}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([re("eCheckbox")],jE.prototype,"eCheckbox",void 0);class WS extends Ne{constructor(){super(),this.setTemplate("<div></div>")}init(e){var t;this.params=e,this.cssClassPrefix=null!==(t=this.params.cssClassPrefix)&&void 0!==t?t:"ag-menu-option",this.addIcon(),this.addName(),this.addShortcut(),this.addSubMenu()}configureDefaults(){return!0}addIcon(){if(this.params.isCompact)return;const e=ps(`<span ref="eIcon" class="${this.getClassName("part")} ${this.getClassName("icon")}" role="presentation"></span>`);this.params.checked?e.appendChild(Nn("check",this.gridOptionsService)):this.params.icon&&(Dh(this.params.icon)?e.appendChild(this.params.icon):"string"==typeof this.params.icon?e.innerHTML=this.params.icon:console.warn("AG Grid: menu item icon must be DOM node or string")),this.getGui().appendChild(e)}addName(){const e=ps(`<span ref="eName" class="${this.getClassName("part")} ${this.getClassName("text")}">${this.params.name||""}</span>`);this.getGui().appendChild(e)}addShortcut(){if(this.params.isCompact)return;const e=ps(`<span ref="eShortcut" class="${this.getClassName("part")} ${this.getClassName("shortcut")}">${this.params.shortcut||""}</span>`);this.getGui().appendChild(e)}addSubMenu(){const e=ps(`<span ref="ePopupPointer" class="${this.getClassName("part")} ${this.getClassName("popup-pointer")}"></span>`),t=this.getGui();if(this.params.subMenu){const i=this.gridOptionsService.get("enableRtl")?"smallLeft":"smallRight";_c(t,!1),e.appendChild(Nn(i,this.gridOptionsService))}t.appendChild(e)}getClassName(e){return`${this.cssClassPrefix}-${e}`}destroy(){super.destroy()}}var zE=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Bf=class extends Ee{constructor(){super(...arguments),this.agGridDefaults={agDateInput:qR,agColumnHeader:kn,agColumnGroupHeader:Lf,agSortIndicator:bn,agTextColumnFloatingFilter:uP,agNumberColumnFloatingFilter:dP,agDateColumnFloatingFilter:kS,agReadOnlyFloatingFilter:Sv,agAnimateShowChangeCellRenderer:eA,agAnimateSlideCellRenderer:tA,agGroupCellRenderer:Ia,agGroupRowRenderer:Ia,agLoadingCellRenderer:Wo,agCheckboxCellRenderer:Dl,agCellEditor:JR,agTextCellEditor:JR,agNumberCellEditor:f1,agDateCellEditor:m1,agDateStringCellEditor:SP,agSelectCellEditor:BS,agLargeTextCellEditor:kf,agCheckboxCellEditor:jE,agTextColumnFilter:Ji,agNumberColumnFilter:Ev,agDateColumnFilter:Nf,agLoadingOverlay:vP,agNoRowsOverlay:UE,agTooltipComponent:WE,agMenuItem:WS},this.enterpriseAgDefaultCompsModule={agSetColumnFilter:ze.SetFilterModule,agSetColumnFloatingFilter:ze.SetFilterModule,agMultiColumnFilter:ze.MultiFilterModule,agMultiColumnFloatingFilter:ze.MultiFilterModule,agGroupColumnFilter:ze.RowGroupingModule,agGroupColumnFloatingFilter:ze.RowGroupingModule,agRichSelect:ze.RichSelectModule,agRichSelectCellEditor:ze.RichSelectModule,agDetailCellRenderer:ze.MasterDetailModule,agSparklineCellRenderer:ze.SparklinesModule},this.jsComps={}}init(){null!=this.gridOptions.components&&gr(this.gridOptions.components,(e,t)=>this.registerJsComponent(e,t))}registerDefaultComponent(e,t){this.agGridDefaults[e]?console.error("Trying to overwrite a default component. You should call registerComponent"):this.agGridDefaults[e]=t}registerJsComponent(e,t){this.jsComps[e]=t}retrieve(e,t){const i=(c,u)=>({componentFromFramework:u,component:c}),n=this.getFrameworkOverrides().frameworkComponent(t,this.gridOptions.components);if(null!=n)return i(n,!0);const s=this.jsComps[t];if(s)return i(s,this.getFrameworkOverrides().isFrameworkComponent(s));const o=this.agGridDefaults[t];if(o)return i(o,!1);const a=this.enterpriseAgDefaultCompsModule[t];return a?yt.__assertRegistered(a,`AG Grid '${e}' component: ${t}`,this.context.getGridId()):gh(()=>{this.warnAboutMissingComponent(e,t)},"MissingComp"+t),null}warnAboutMissingComponent(e,t){const n=OS(t,[...Object.keys(this.agGridDefaults).filter(s=>!["agCellEditor","agGroupRowRenderer","agSortIndicator"].includes(s)),...Object.keys(this.jsComps)],!0,.8).values;console.warn(`AG Grid: Could not find '${t}' component. It was configured as "${e}: '${t}'" but it wasn't found in the list of registered components.`),n.length>0&&console.warn(`         Did you mean: [${n.slice(0,3)}]?`),console.warn(`If using a custom component check it has been registered as described in: ${this.getFrameworkOverrides().getDocLink("components/")}`)}};zE([P("gridOptions")],Bf.prototype,"gridOptions",void 0),zE([Se],Bf.prototype,"init",null),Bf=zE([He("userComponentRegistry")],Bf);const wP={propertyName:"dateComponent",cellRenderer:!1},EP={propertyName:"headerComponent",cellRenderer:!1},DP={propertyName:"headerGroupComponent",cellRenderer:!1},sA={propertyName:"cellRenderer",cellRenderer:!0},TP={propertyName:"cellEditor",cellRenderer:!1},$E={propertyName:"innerRenderer",cellRenderer:!0},RP={propertyName:"loadingOverlayComponent",cellRenderer:!1},rA={propertyName:"noRowsOverlayComponent",cellRenderer:!1},oA={propertyName:"tooltipComponent",cellRenderer:!1},Av={propertyName:"filter",cellRenderer:!1},v1={propertyName:"floatingFilterComponent",cellRenderer:!1},KE={propertyName:"toolPanel",cellRenderer:!1},AP={propertyName:"statusPanel",cellRenderer:!1},C1={propertyName:"fullWidthCellRenderer",cellRenderer:!0},Hf={propertyName:"loadingCellRenderer",cellRenderer:!0},OP={propertyName:"groupRowRenderer",cellRenderer:!0},aA={propertyName:"detailCellRenderer",cellRenderer:!0},jS={propertyName:"menuItem",cellRenderer:!1};let Fa=(()=>{class r{static getFloatingFilterType(t){return this.filterToFloatingFilterMapping[t]}}return r.filterToFloatingFilterMapping={set:"agSetColumnFloatingFilter",agSetColumnFilter:"agSetColumnFloatingFilter",multi:"agMultiColumnFloatingFilter",agMultiColumnFilter:"agMultiColumnFloatingFilter",group:"agGroupColumnFloatingFilter",agGroupColumnFilter:"agGroupColumnFloatingFilter",number:"agNumberColumnFloatingFilter",agNumberColumnFilter:"agNumberColumnFloatingFilter",date:"agDateColumnFloatingFilter",agDateColumnFilter:"agDateColumnFloatingFilter",text:"agTextColumnFloatingFilter",agTextColumnFilter:"agTextColumnFloatingFilter"},r})();var xh=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Bd=class extends Ee{getHeaderCompDetails(e,t){return this.getCompDetails(e,EP,"agColumnHeader",t)}getHeaderGroupCompDetails(e){const t=e.columnGroup.getColGroupDef();return this.getCompDetails(t,DP,"agColumnGroupHeader",e)}getFullWidthCellRendererDetails(e){return this.getCompDetails(this.gridOptions,C1,null,e,!0)}getFullWidthLoadingCellRendererDetails(e){return this.getCompDetails(this.gridOptions,Hf,"agLoadingCellRenderer",e,!0)}getFullWidthGroupCellRendererDetails(e){return this.getCompDetails(this.gridOptions,OP,"agGroupRowRenderer",e,!0)}getFullWidthDetailCellRendererDetails(e){return this.getCompDetails(this.gridOptions,aA,"agDetailCellRenderer",e,!0)}getInnerRendererDetails(e,t){return this.getCompDetails(e,$E,null,t)}getFullWidthGroupRowInnerCellRenderer(e,t){return this.getCompDetails(e,$E,null,t)}getCellRendererDetails(e,t){return this.getCompDetails(e,sA,null,t)}getCellEditorDetails(e,t){return this.getCompDetails(e,TP,"agCellEditor",t,!0)}getFilterDetails(e,t,i){return this.getCompDetails(e,Av,i,t,!0)}getDateCompDetails(e){return this.getCompDetails(this.gridOptions,wP,"agDateInput",e,!0)}getLoadingOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,RP,"agLoadingOverlay",e,!0)}getNoRowsOverlayCompDetails(e){return this.getCompDetails(this.gridOptions,rA,"agNoRowsOverlay",e,!0)}getTooltipCompDetails(e){return this.getCompDetails(e.colDef,oA,"agTooltipComponent",e,!0)}getSetFilterCellRendererDetails(e,t){return this.getCompDetails(e,sA,null,t)}getFloatingFilterCompDetails(e,t,i){return this.getCompDetails(e,v1,i,t)}getToolPanelCompDetails(e,t){return this.getCompDetails(e,KE,null,t,!0)}getStatusPanelCompDetails(e,t){return this.getCompDetails(e,AP,null,t,!0)}getMenuItemCompDetails(e,t){return this.getCompDetails(e,jS,"agMenuItem",t,!0)}getCompDetails(e,t,i,n,s=!1){const{propertyName:o,cellRenderer:a}=t;let{compName:c,jsComp:u,fwComp:p,paramsFromSelector:g,popupFromSelector:m,popupPositionFromSelector:y}=this.getCompKeys(e,t,n);const b=R=>{const O=this.userComponentRegistry.retrieve(o,R);O&&(u=O.componentFromFramework?void 0:O.component,p=O.componentFromFramework?O.component:void 0)};if(null!=c&&b(c),null==u&&null==p&&null!=i&&b(i),u&&a&&!this.agComponentUtils.doesImplementIComponent(u)&&(u=this.agComponentUtils.adaptFunction(o,u)),!u&&!p)return void(s&&console.error(`AG Grid: Could not find component ${c}, did you forget to configure this component?`));const _=this.mergeParamsWithApplicationProvidedParams(e,t,n,g),E=null==u,D=u||p;return{componentFromFramework:E,componentClass:D,params:_,type:t,popupFromSelector:m,popupPositionFromSelector:y,newAgStackInstance:()=>this.newAgStackInstance(D,E,_,t)}}getCompKeys(e,t,i){const{propertyName:n}=t;let s,o,a,c,u,p;if(e){const g=e,m=g[n+"Selector"],y=m?m(i):null,b=_=>{"string"==typeof _?s=_:null!=_&&!0!==_&&(this.getFrameworkOverrides().isFrameworkComponent(_)?a=_:o=_)};y?(b(y.component),c=y.params,u=y.popup,p=y.popupPosition):b(g[n])}return{compName:s,jsComp:o,fwComp:a,paramsFromSelector:c,popupFromSelector:u,popupPositionFromSelector:p}}newAgStackInstance(e,t,i,n){let a;if(t){const u=this.componentMetadataProvider.retrieve(n.propertyName);a=this.frameworkComponentWrapper.wrap(e,u.mandatoryMethodList,u.optionalMethodList,n)}else a=new e;const c=this.initComponent(a,i);return null==c?$t.resolve(a):c.then(()=>a)}mergeParamsWithApplicationProvidedParams(e,t,i,n=null){const s=this.gridOptionsService.getGridCommonParams();Lo(s,i);const a=e&&e[t.propertyName+"Params"];return"function"==typeof a?Lo(s,a(i)):"object"==typeof a&&Lo(s,a),Lo(s,n),s}initComponent(e,t){if(this.context.createBean(e),null!=e.init)return e.init(t)}getDefaultFloatingFilterType(e,t){if(null==e)return null;let i=null,{compName:n,jsComp:s,fwComp:o}=this.getCompKeys(e,Av);return n?i=Fa.getFloatingFilterType(n):null==s&&null==o&&!0===e.filter&&(i=t()),i}};xh([P("gridOptions")],Bd.prototype,"gridOptions",void 0),xh([P("agComponentUtils")],Bd.prototype,"agComponentUtils",void 0),xh([P("componentMetadataProvider")],Bd.prototype,"componentMetadataProvider",void 0),xh([P("userComponentRegistry")],Bd.prototype,"userComponentRegistry",void 0),xh([Pt("frameworkComponentWrapper")],Bd.prototype,"frameworkComponentWrapper",void 0),Bd=xh([He("userComponentFactory")],Bd);class Uf{}Uf.ColDefPropertyMap={headerName:void 0,columnGroupShow:void 0,headerClass:void 0,toolPanelClass:void 0,headerValueGetter:void 0,pivotKeys:void 0,groupId:void 0,colId:void 0,sort:void 0,initialSort:void 0,field:void 0,type:void 0,cellDataType:void 0,tooltipComponent:void 0,tooltipField:void 0,headerTooltip:void 0,cellClass:void 0,showRowGroup:void 0,filter:void 0,initialAggFunc:void 0,defaultAggFunc:void 0,aggFunc:void 0,pinned:void 0,initialPinned:void 0,chartDataType:void 0,cellAriaRole:void 0,cellEditorPopupPosition:void 0,headerGroupComponent:void 0,headerGroupComponentParams:void 0,cellStyle:void 0,cellRenderer:void 0,cellRendererParams:void 0,cellEditor:void 0,cellEditorParams:void 0,filterParams:void 0,pivotValueColumn:void 0,headerComponent:void 0,headerComponentParams:void 0,floatingFilterComponent:void 0,floatingFilterComponentParams:void 0,tooltipComponentParams:void 0,refData:void 0,columnsMenuParams:void 0,columnChooserParams:void 0,children:void 0,sortingOrder:void 0,allowedAggFuncs:void 0,menuTabs:void 0,pivotTotalColumnIds:void 0,cellClassRules:void 0,icons:void 0,sortIndex:void 0,initialSortIndex:void 0,flex:void 0,initialFlex:void 0,width:void 0,initialWidth:void 0,minWidth:void 0,maxWidth:void 0,rowGroupIndex:void 0,initialRowGroupIndex:void 0,pivotIndex:void 0,initialPivotIndex:void 0,suppressCellFlash:void 0,suppressColumnsToolPanel:void 0,suppressFiltersToolPanel:void 0,openByDefault:void 0,marryChildren:void 0,suppressStickyLabel:void 0,hide:void 0,initialHide:void 0,rowGroup:void 0,initialRowGroup:void 0,pivot:void 0,initialPivot:void 0,checkboxSelection:void 0,showDisabledCheckboxes:void 0,headerCheckboxSelection:void 0,headerCheckboxSelectionFilteredOnly:void 0,headerCheckboxSelectionCurrentPageOnly:void 0,suppressMenu:void 0,suppressHeaderMenuButton:void 0,suppressMovable:void 0,lockPosition:void 0,lockVisible:void 0,lockPinned:void 0,unSortIcon:void 0,suppressSizeToFit:void 0,suppressAutoSize:void 0,enableRowGroup:void 0,enablePivot:void 0,enableValue:void 0,editable:void 0,suppressPaste:void 0,suppressNavigable:void 0,enableCellChangeFlash:void 0,rowDrag:void 0,dndSource:void 0,autoHeight:void 0,wrapText:void 0,sortable:void 0,resizable:void 0,singleClickEdit:void 0,floatingFilter:void 0,cellEditorPopup:void 0,suppressFillHandle:void 0,wrapHeaderText:void 0,autoHeaderHeight:void 0,dndSourceOnRowDrag:void 0,valueGetter:void 0,valueSetter:void 0,filterValueGetter:void 0,keyCreator:void 0,valueFormatter:void 0,valueParser:void 0,comparator:void 0,equals:void 0,pivotComparator:void 0,suppressKeyboardEvent:void 0,suppressHeaderKeyboardEvent:void 0,colSpan:void 0,rowSpan:void 0,getQuickFilterText:void 0,onCellValueChanged:void 0,onCellClicked:void 0,onCellDoubleClicked:void 0,onCellContextMenu:void 0,rowDragText:void 0,tooltipValueGetter:void 0,cellRendererSelector:void 0,cellEditorSelector:void 0,suppressSpanHeaderHeight:void 0,useValueFormatterForExport:void 0,useValueParserForImport:void 0,mainMenuItems:void 0,contextMenuItems:void 0,suppressFloatingFilterButton:void 0,suppressHeaderFilterButton:void 0,suppressHeaderContextMenu:void 0},Uf.ALL_PROPERTIES=Object.keys(Uf.ColDefPropertyMap);var Na=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Ph=class extends Ee{constructor(){super(...arguments),this.dragEndFunctions=[],this.dragSources=[]}removeAllListeners(){this.dragSources.forEach(this.removeListener.bind(this)),this.dragSources.length=0}removeListener(e){const t=e.dragSource.eElement;t.removeEventListener("mousedown",e.mouseDownListener),e.touchEnabled&&t.removeEventListener("touchstart",e.touchStartListener,{passive:!0})}removeDragSource(e){const t=this.dragSources.find(i=>i.dragSource===e);!t||(this.removeListener(t),vr(this.dragSources,t))}isDragging(){return this.dragging}addDragSource(e){const t=this.onMouseDown.bind(this,e),{eElement:i,includeTouch:n,stopPropagationForTouch:s}=e;i.addEventListener("mousedown",t);let o=null;const a=this.gridOptionsService.get("suppressTouch");n&&!a&&(o=c=>{wE(c.target)||(c.cancelable&&(c.preventDefault(),s&&c.stopPropagation()),this.onTouchStart(e,c))},i.addEventListener("touchstart",o,{passive:!1})),this.dragSources.push({dragSource:e,mouseDownListener:t,touchStartListener:o,touchEnabled:!!n})}getStartTarget(){return this.startTarget}onTouchStart(e,t){this.currentDragParams=e,this.dragging=!1;const i=t.touches[0];this.touchLastTime=i,this.touchStart=i;const s=u=>this.onTouchUp(u,e.eElement),a=t.target,c=[{target:this.gridOptionsService.getRootNode(),type:"touchmove",listener:u=>{u.cancelable&&u.preventDefault()},options:{passive:!1}},{target:a,type:"touchmove",listener:u=>this.onTouchMove(u,e.eElement),options:{passive:!0}},{target:a,type:"touchend",listener:s,options:{passive:!0}},{target:a,type:"touchcancel",listener:s,options:{passive:!0}}];this.addTemporaryEvents(c),0===e.dragStartPixels&&this.onCommonMove(i,this.touchStart,e.eElement)}onMouseDown(e,t){const i=t;if(e.skipMouseEvent&&e.skipMouseEvent(t)||i._alreadyProcessedByDragService||(i._alreadyProcessedByDragService=!0,0!==t.button))return;this.shouldPreventMouseEvent(t)&&t.preventDefault(),this.currentDragParams=e,this.dragging=!1,this.mouseStartEvent=t,this.startTarget=t.target;const a=this.gridOptionsService.getRootNode();this.addTemporaryEvents([{target:a,type:"mousemove",listener:u=>this.onMouseMove(u,e.eElement)},{target:a,type:"mouseup",listener:u=>this.onMouseUp(u,e.eElement)},{target:a,type:"contextmenu",listener:u=>u.preventDefault()}]),0===e.dragStartPixels&&this.onMouseMove(t,e.eElement)}addTemporaryEvents(e){e.forEach(t=>{const{target:i,type:n,listener:s,options:o}=t;i.addEventListener(n,s,o)}),this.dragEndFunctions.push(()=>{e.forEach(t=>{const{target:i,type:n,listener:s,options:o}=t;i.removeEventListener(n,s,o)})})}isEventNearStartEvent(e,t){const{dragStartPixels:i}=this.currentDragParams;return TE(e,t,Ie(i)?i:4)}getFirstActiveTouch(e){for(let t=0;t<e.length;t++)if(e[t].identifier===this.touchStart.identifier)return e[t];return null}onCommonMove(e,t,i){if(!this.dragging){if(!this.dragging&&this.isEventNearStartEvent(e,t))return;this.dragging=!0,this.eventService.dispatchEvent({type:G.EVENT_DRAG_STARTED,target:i}),this.currentDragParams.onDragStart(t),this.currentDragParams.onDragging(t)}this.currentDragParams.onDragging(e)}onTouchMove(e,t){const i=this.getFirstActiveTouch(e.touches);!i||this.onCommonMove(i,this.touchStart,t)}onMouseMove(e,t){var i;er()&&(null===(i=this.gridOptionsService.getDocument().getSelection())||void 0===i||i.removeAllRanges()),this.shouldPreventMouseEvent(e)&&e.preventDefault(),this.onCommonMove(e,this.mouseStartEvent,t)}shouldPreventMouseEvent(e){return this.gridOptionsService.get("enableCellTextSelection")&&"mousemove"===e.type&&e.cancelable&&this.mouseEventService.isEventFromThisGrid(e)&&!this.isOverFormFieldElement(e)}isOverFormFieldElement(e){const i=e.target?.tagName.toLocaleLowerCase();return!!i?.match("^a$|textarea|input|select|button")}onTouchUp(e,t){let i=this.getFirstActiveTouch(e.changedTouches);i||(i=this.touchLastTime),this.onUpCommon(i,t)}onMouseUp(e,t){this.onUpCommon(e,t)}onUpCommon(e,t){this.dragging&&(this.dragging=!1,this.currentDragParams.onDragStop(e),this.eventService.dispatchEvent({type:G.EVENT_DRAG_STOPPED,target:t})),this.mouseStartEvent=null,this.startTarget=null,this.touchStart=null,this.touchLastTime=null,this.currentDragParams=null,this.dragEndFunctions.forEach(i=>i()),this.dragEndFunctions.length=0}};Na([P("mouseEventService")],Ph.prototype,"mouseEventService",void 0),Na([Js],Ph.prototype,"removeAllListeners",null),Ph=Na([He("dragService")],Ph);class Ov{constructor(e){this.tickingInterval=null,this.onScrollCallback=null,this.scrollContainer=e.scrollContainer,this.scrollHorizontally=-1!==e.scrollAxis.indexOf("x"),this.scrollVertically=-1!==e.scrollAxis.indexOf("y"),this.scrollByTick=null!=e.scrollByTick?e.scrollByTick:20,e.onScrollCallback&&(this.onScrollCallback=e.onScrollCallback),this.scrollVertically&&(this.getVerticalPosition=e.getVerticalPosition,this.setVerticalPosition=e.setVerticalPosition),this.scrollHorizontally&&(this.getHorizontalPosition=e.getHorizontalPosition,this.setHorizontalPosition=e.setHorizontalPosition),this.shouldSkipVerticalScroll=e.shouldSkipVerticalScroll||(()=>!1),this.shouldSkipHorizontalScroll=e.shouldSkipHorizontalScroll||(()=>!1)}check(e,t=!1){const i=t||this.shouldSkipVerticalScroll();if(i&&this.shouldSkipHorizontalScroll())return;const n=this.scrollContainer.getBoundingClientRect(),s=this.scrollByTick;this.tickLeft=e.clientX<n.left+s,this.tickRight=e.clientX>n.right-s,this.tickUp=e.clientY<n.top+s&&!i,this.tickDown=e.clientY>n.bottom-s&&!i,this.tickLeft||this.tickRight||this.tickUp||this.tickDown?this.ensureTickingStarted():this.ensureCleared()}ensureTickingStarted(){null===this.tickingInterval&&(this.tickingInterval=window.setInterval(this.doTick.bind(this),100),this.tickCount=0)}doTick(){let e;if(this.tickCount++,e=this.tickCount>20?200:this.tickCount>10?80:40,this.scrollVertically){const t=this.getVerticalPosition();this.tickUp&&this.setVerticalPosition(t-e),this.tickDown&&this.setVerticalPosition(t+e)}if(this.scrollHorizontally){const t=this.getHorizontalPosition();this.tickLeft&&this.setHorizontalPosition(t-e),this.tickRight&&this.setHorizontalPosition(t+e)}this.onScrollCallback&&this.onScrollCallback()}ensureCleared(){this.tickingInterval&&(window.clearInterval(this.tickingInterval),this.tickingInterval=null)}}var zS=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const lA="ag-list-item-hovered";class $S extends Ee{constructor(e,t,i){super(),this.comp=e,this.virtualList=t,this.params=i,this.currentDragValue=null,this.lastHoveredListItem=null}postConstruct(){this.addManagedListener(this.params.eventSource,this.params.listItemDragStartEvent,this.listItemDragStart.bind(this)),this.addManagedListener(this.params.eventSource,this.params.listItemDragEndEvent,this.listItemDragEnd.bind(this)),this.createDropTarget(),this.createAutoScrollService()}listItemDragStart(e){this.currentDragValue=this.params.getCurrentDragValue(e),this.moveBlocked=this.params.isMoveBlocked(this.currentDragValue)}listItemDragEnd(){window.setTimeout(()=>{this.currentDragValue=null,this.moveBlocked=!1},10)}createDropTarget(){this.dragAndDropService.addDropTarget({isInterestedIn:t=>t===this.params.dragSourceType,getIconName:()=>this.moveBlocked?St.ICON_PINNED:St.ICON_MOVE,getContainer:()=>this.comp.getGui(),onDragging:t=>this.onDragging(t),onDragStop:()=>this.onDragStop(),onDragLeave:()=>this.onDragLeave()})}createAutoScrollService(){const e=this.virtualList.getGui();this.autoScrollService=new Ov({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}onDragging(e){if(!this.currentDragValue||this.moveBlocked)return;const t=this.getListDragItem(e),i=this.virtualList.getComponentAt(t.rowIndex);if(!i)return;const n=i.getGui().parentElement;this.lastHoveredListItem&&this.lastHoveredListItem.rowIndex===t.rowIndex&&this.lastHoveredListItem.position===t.position||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredListItem=t,mv(n,lA),mv(n,`ag-item-highlight-${t.position}`))}getListDragItem(e){const t=this.virtualList.getGui(),i=parseFloat(window.getComputedStyle(t).paddingTop),n=this.virtualList.getRowHeight(),s=this.virtualList.getScrollTop(),o=Math.max(0,(e.y-i+s)/n),a=this.params.getNumRows(this.comp)-1,c=0|Math.min(a,o);return{rowIndex:c,position:Math.round(o)>o||o>a?"bottom":"top",component:this.virtualList.getComponentAt(c)}}onDragStop(){this.moveBlocked||(this.params.moveItem(this.currentDragValue,this.lastHoveredListItem),this.clearHoveredItems(),this.autoScrollService.ensureCleared())}onDragLeave(){this.clearHoveredItems(),this.autoScrollService.ensureCleared()}clearHoveredItems(){this.virtualList.getGui().querySelectorAll(`.${lA}`).forEach(t=>{[lA,"ag-item-highlight-top","ag-item-highlight-bottom"].forEach(i=>{t.classList.remove(i)})}),this.lastHoveredListItem=null}}zS([P("dragAndDropService")],$S.prototype,"dragAndDropService",void 0),zS([Se],$S.prototype,"postConstruct",null);var Oc=(()=>(function(r){r[r.Above=0]="Above",r[r.Below=1]="Below"}(Oc||(Oc={})),Oc))(),Hd=(()=>(function(r){r[r.SINGLE_SHEET=0]="SINGLE_SHEET",r[r.MULTI_SHEET=1]="MULTI_SHEET"}(Hd||(Hd={})),Hd))(),zt=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};function Mc(r){return null!=r&&null!=r.getFrameworkComponentInstance?r.getFrameworkComponentInstance():r}let Vt=class{constructor(){this.detailGridInfoMap={},this.destroyCalled=!1}init(){switch(this.rowModel.getType()){case"clientSide":this.clientSideRowModel=this.rowModel;break;case"infinite":this.infiniteRowModel=this.rowModel;break;case"serverSide":this.serverSideRowModel=this.rowModel}this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl()})}__getAlignedGridService(){return this.alignedGridsService}__getContext(){return this.context}__getModel(){return this.rowModel}getGridId(){return this.context.getGridId()}addDetailGridInfo(e,t){this.detailGridInfoMap[e]=t}removeDetailGridInfo(e){this.detailGridInfoMap[e]=void 0}getDetailGridInfo(e){return this.detailGridInfoMap[e]}forEachDetailGridInfo(e){let t=0;gr(this.detailGridInfoMap,(i,n)=>{Ie(n)&&(e(n,t),t++)})}getDataAsCsv(e){if(yt.__assertRegistered(ze.CsvExportModule,"api.getDataAsCsv",this.context.getGridId()))return this.csvCreator.getDataAsCsv(e)}exportDataAsCsv(e){yt.__assertRegistered(ze.CsvExportModule,"api.exportDataAsCSv",this.context.getGridId())&&this.csvCreator.exportDataAsCsv(e)}assertNotExcelMultiSheet(e,t){return!(!yt.__assertRegistered(ze.ExcelExportModule,"api."+e,this.context.getGridId())||this.excelCreator.getFactoryMode()===Hd.MULTI_SHEET&&(console.warn("AG Grid: The Excel Exporter is currently on Multi Sheet mode. End that operation by calling 'api.getMultipleSheetAsExcel()' or 'api.exportMultipleSheetsAsExcel()'"),1))}getDataAsExcel(e){if(this.assertNotExcelMultiSheet("getDataAsExcel",e))return this.excelCreator.getDataAsExcel(e)}exportDataAsExcel(e){this.assertNotExcelMultiSheet("exportDataAsExcel",e)&&this.excelCreator.exportDataAsExcel(e)}getSheetDataForExcel(e){if(yt.__assertRegistered(ze.ExcelExportModule,"api.getSheetDataForExcel",this.context.getGridId()))return this.excelCreator.setFactoryMode(Hd.MULTI_SHEET),this.excelCreator.getSheetDataForExcel(e)}getMultipleSheetsAsExcel(e){if(yt.__assertRegistered(ze.ExcelExportModule,"api.getMultipleSheetsAsExcel",this.context.getGridId()))return this.excelCreator.getMultipleSheetsAsExcel(e)}exportMultipleSheetsAsExcel(e){yt.__assertRegistered(ze.ExcelExportModule,"api.exportMultipleSheetsAsExcel",this.context.getGridId())&&this.excelCreator.exportMultipleSheetsAsExcel(e)}setGridAriaProperty(e,t){if(!e)return;const i=this.ctrlsService.getGridBodyCtrl().getGui(),n=`aria-${e}`;null===t?i.removeAttribute(n):i.setAttribute(n,t)}logMissingRowModel(e,...t){console.error(`AG Grid: api.${e} can only be called when gridOptions.rowModelType is ${t.join(" or ")}`)}logDeprecation(e,t,i,n){st(`Since ${e} api.${t} is deprecated. Please use ${i} instead. ${n}`)}getPinnedTopRowCount(){return this.pinnedRowModel.getPinnedTopRowCount()}getPinnedBottomRowCount(){return this.pinnedRowModel.getPinnedBottomRowCount()}getPinnedTopRow(e){return this.pinnedRowModel.getPinnedTopRow(e)}getPinnedBottomRow(e){return this.pinnedRowModel.getPinnedBottomRow(e)}expireValueCache(){this.valueCache.expire()}getVerticalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getVScrollPosition()}getHorizontalPixelRange(){return this.gridBodyCtrl.getScrollFeature().getHScrollPosition()}refreshCells(e={}){this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.refreshCells(e))}flashCells(e={}){const t=i=>st(`Since v31.1 api.flashCells parameter '${i}Delay' is deprecated. Please use '${i}Duration' instead.`);Ie(e.fadeDelay)&&t("fade"),Ie(e.flashDelay)&&t("flash"),this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.flashCells(e))}redrawRows(e={}){const t=e?e.rowNodes:void 0;this.frameworkOverrides.wrapIncoming(()=>this.rowRenderer.redrawRows(t))}refreshHeader(){this.frameworkOverrides.wrapIncoming(()=>this.ctrlsService.getHeaderRowContainerCtrls().forEach(e=>e.refresh()))}isAnyFilterPresent(){return this.filterManager.isAnyFilterPresent()}isColumnFilterPresent(){return this.filterManager.isColumnFilterPresent()||this.filterManager.isAggregateFilterPresent()}isQuickFilterPresent(){return this.filterManager.isQuickFilterPresent()}getModel(){return st("Since v31.1 getModel() is deprecated. Please use the appropriate grid API methods instead."),this.rowModel}setRowNodeExpanded(e,t,i){this.expansionService.setRowNodeExpanded(e,t,i)}onGroupExpandedOrCollapsed(){gt(this.clientSideRowModel)?this.logMissingRowModel("onGroupExpandedOrCollapsed","clientSide"):this.expansionService.onGroupExpandedOrCollapsed()}refreshClientSideRowModel(e){gt(this.clientSideRowModel)?this.logMissingRowModel("refreshClientSideRowModel","clientSide"):this.clientSideRowModel.refreshModel(e)}isAnimationFrameQueueEmpty(){return this.animationFrameService.isQueueEmpty()}flushAllAnimationFrames(){this.animationFrameService.flushAllFrames()}getRowNode(e){return this.rowModel.getRowNode(e)}getSizesForCurrentTheme(){return{rowHeight:this.gos.getRowHeightAsNumber(),headerHeight:this.columnModel.getHeaderHeight()}}expandAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!0):this.logMissingRowModel("expandAll","clientSide","serverSide")}collapseAll(){this.clientSideRowModel||this.serverSideRowModel?this.expansionService.expandAll(!1):this.logMissingRowModel("collapseAll","clientSide","serverSide")}addRenderedRowListener(e,t,i){this.rowRenderer.addRenderedRowListener(e,t,i)}getQuickFilter(){return this.gos.get("quickFilterText")}getAdvancedFilterModel(){return yt.__assertRegistered(ze.AdvancedFilterModule,"api.getAdvancedFilterModel",this.context.getGridId())?this.filterManager.getAdvancedFilterModel():null}setAdvancedFilterModel(e){this.filterManager.setAdvancedFilterModel(e)}showAdvancedFilterBuilder(){yt.__assertRegistered(ze.AdvancedFilterModule,"api.setAdvancedFilterModel",this.context.getGridId())&&this.filterManager.showAdvancedFilterBuilder("api")}setNodesSelected(e){if(!e.nodes.every(a=>a.rowPinned?(console.warn("AG Grid: cannot select pinned rows"),!1):void 0!==a.id||(console.warn("AG Grid: cannot select node until id for node is known"),!1)))return;const{nodes:i,source:n,newValue:s}=e;this.selectionService.setNodesSelected({nodes:i,source:n??"api",newValue:s})}selectAll(e="apiSelectAll"){this.selectionService.selectAllRowNodes({source:e})}deselectAll(e="apiSelectAll"){this.selectionService.deselectAllRowNodes({source:e})}selectAllFiltered(e="apiSelectAllFiltered"){this.selectionService.selectAllRowNodes({source:e,justFiltered:!0})}deselectAllFiltered(e="apiSelectAllFiltered"){this.selectionService.deselectAllRowNodes({source:e,justFiltered:!0})}getServerSideSelectionState(){return gt(this.serverSideRowModel)?(this.logMissingRowModel("getServerSideSelectionState","serverSide"),null):this.selectionService.getSelectionState()}setServerSideSelectionState(e){gt(this.serverSideRowModel)?this.logMissingRowModel("setServerSideSelectionState","serverSide"):this.selectionService.setSelectionState(e,"api")}selectAllOnCurrentPage(e="apiSelectAllCurrentPage"){this.selectionService.selectAllRowNodes({source:e,justCurrentPage:!0})}deselectAllOnCurrentPage(e="apiSelectAllCurrentPage"){this.selectionService.deselectAllRowNodes({source:e,justCurrentPage:!0})}showLoadingOverlay(){this.overlayService.showLoadingOverlay()}showNoRowsOverlay(){this.overlayService.showNoRowsOverlay()}hideOverlay(){this.overlayService.hideOverlay()}getSelectedNodes(){return this.selectionService.getSelectedNodes()}getSelectedRows(){return this.selectionService.getSelectedRows()}getBestCostNodeSelection(){if(!gt(this.clientSideRowModel))return this.selectionService.getBestCostNodeSelection();this.logMissingRowModel("getBestCostNodeSelection","clientSide")}getRenderedNodes(){return this.rowRenderer.getRenderedNodes()}ensureColumnVisible(e,t="auto"){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureColumnVisible(e,t),"ensureVisible")}ensureIndexVisible(e,t){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureIndexVisible(e,t),"ensureVisible")}ensureNodeVisible(e,t=null){this.frameworkOverrides.wrapIncoming(()=>this.gridBodyCtrl.getScrollFeature().ensureNodeVisible(e,t),"ensureVisible")}forEachLeafNode(e){gt(this.clientSideRowModel)?this.logMissingRowModel("forEachLeafNode","clientSide"):this.clientSideRowModel.forEachLeafNode(e)}forEachNode(e,t){this.rowModel.forEachNode(e,t)}forEachNodeAfterFilter(e){gt(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilter","clientSide"):this.clientSideRowModel.forEachNodeAfterFilter(e)}forEachNodeAfterFilterAndSort(e){gt(this.clientSideRowModel)?this.logMissingRowModel("forEachNodeAfterFilterAndSort","clientSide"):this.clientSideRowModel.forEachNodeAfterFilterAndSort(e)}getFilterInstance(e,t){return st("'getFilterInstance' is deprecated. To get/set individual filter models, use 'getColumnFilterModel' or 'setColumnFilterModel' instead. To get hold of the filter instance, use 'getColumnFilterInstance' which returns the instance asynchronously."),this.filterManager.getFilterInstance(e,t)}getColumnFilterInstance(e){return this.filterManager.getColumnFilterInstance(e)}destroyFilter(e){const t=this.columnModel.getPrimaryColumn(e);if(t)return this.filterManager.destroyFilter(t,"api")}getStatusPanel(e){if(yt.__assertRegistered(ze.StatusBarModule,"api.getStatusPanel",this.context.getGridId()))return Mc(this.statusBarService.getStatusPanel(e))}getColumnDef(e){const t=this.columnModel.getPrimaryColumn(e);return t?t.getColDef():null}getColumnDefs(){return this.columnModel.getColumnDefs()}onFilterChanged(e="api"){this.filterManager.onFilterChanged({source:e})}onSortChanged(){this.sortController.onSortChanged("api")}setFilterModel(e){this.frameworkOverrides.wrapIncoming(()=>this.filterManager.setFilterModel(e))}getFilterModel(){return this.filterManager.getFilterModel()}getColumnFilterModel(e){return this.filterManager.getColumnFilterModel(e)}setColumnFilterModel(e,t){return this.filterManager.setColumnFilterModel(e,t)}getFocusedCell(){return this.focusService.getFocusedCell()}clearFocusedCell(){return this.focusService.clearFocusedCell()}setFocusedCell(e,t,i){this.focusService.setFocusedCell({rowIndex:e,column:t,rowPinned:i,forceBrowserFocus:!0})}addRowDropZone(e){this.gridBodyCtrl.getRowDragFeature().addRowDropZone(e)}removeRowDropZone(e){const t=this.dragAndDropService.findExternalZone(e);t&&this.dragAndDropService.removeDropTarget(t)}getRowDropZoneParams(e){return this.gridBodyCtrl.getRowDragFeature().getRowDropZone(e)}assertSideBarLoaded(e){return yt.__assertRegistered(ze.SideBarModule,"api."+e,this.context.getGridId())}isSideBarVisible(){return this.assertSideBarLoaded("isSideBarVisible")&&this.sideBarService.getSideBarComp().isDisplayed()}setSideBarVisible(e){this.assertSideBarLoaded("setSideBarVisible")&&this.sideBarService.getSideBarComp().setDisplayed(e)}setSideBarPosition(e){this.assertSideBarLoaded("setSideBarPosition")&&this.sideBarService.getSideBarComp().setSideBarPosition(e)}openToolPanel(e){this.assertSideBarLoaded("openToolPanel")&&this.sideBarService.getSideBarComp().openToolPanel(e,"api")}closeToolPanel(){this.assertSideBarLoaded("closeToolPanel")&&this.sideBarService.getSideBarComp().close("api")}getOpenedToolPanel(){return this.assertSideBarLoaded("getOpenedToolPanel")?this.sideBarService.getSideBarComp().openedItem():null}refreshToolPanel(){this.assertSideBarLoaded("refreshToolPanel")&&this.sideBarService.getSideBarComp().refresh()}isToolPanelShowing(){return this.assertSideBarLoaded("isToolPanelShowing")&&this.sideBarService.getSideBarComp().isToolPanelShowing()}getToolPanelInstance(e){if(this.assertSideBarLoaded("getToolPanelInstance"))return Mc(this.sideBarService.getSideBarComp().getToolPanelInstance(e))}getSideBar(){if(this.assertSideBarLoaded("getSideBar"))return this.sideBarService.getSideBarComp().getDef()}resetRowHeights(){if(Ie(this.clientSideRowModel)){if(this.columnModel.isAutoRowHeightActive())return void console.warn("AG Grid: calling gridApi.resetRowHeights() makes no sense when using Auto Row Height.");this.clientSideRowModel.resetRowHeights()}}setRowCount(e,t){if(this.serverSideRowModel)return this.columnModel.isRowGroupEmpty()?void this.serverSideRowModel.setRowCount(e,t):void console.error("AG Grid: setRowCount cannot be used while using row grouping.");this.infiniteRowModel?this.infiniteRowModel.setRowCount(e,t):this.logMissingRowModel("setRowCount","infinite","serverSide")}onRowHeightChanged(){this.clientSideRowModel?this.clientSideRowModel.onRowHeightChanged():this.serverSideRowModel&&this.serverSideRowModel.onRowHeightChanged()}getValue(e,t){let i=this.columnModel.getPrimaryColumn(e);return gt(i)&&(i=this.columnModel.getGridColumn(e)),gt(i)?null:this.valueService.getValue(i,t)}addEventListener(e,t){this.apiEventService.addEventListener(e,t)}addGlobalListener(e){this.apiEventService.addGlobalListener(e)}removeEventListener(e,t){this.apiEventService.removeEventListener(e,t)}removeGlobalListener(e){this.apiEventService.removeGlobalListener(e)}dispatchEvent(e){this.eventService.dispatchEvent(e)}destroy(){const e=`See ${this.frameworkOverrides.getDocLink("grid-lifecycle/#grid-pre-destroyed")}`;if(this.destroyCalled)return;const t={type:G.EVENT_GRID_PRE_DESTROYED,state:this.getState()};this.dispatchEvent(t),this.destroyCalled=!0;const i=this.ctrlsService.getGridCtrl();i&&i.destroyGridUi(),this.context.destroy(),tS(this,["isDestroyed"],e)}isDestroyed(){return this.destroyCalled}resetQuickFilter(){this.filterManager.resetQuickFilterCache()}getCellRanges(){return this.rangeService?this.rangeService.getCellRanges():(yt.__assertRegistered(ze.RangeSelectionModule,"api.getCellRanges",this.context.getGridId()),null)}addCellRange(e){this.rangeService?this.rangeService.addCellRange(e):yt.__assertRegistered(ze.RangeSelectionModule,"api.addCellRange",this.context.getGridId())}clearRangeSelection(){this.rangeService&&this.rangeService.removeAllCellRanges(),yt.__assertRegistered(ze.RangeSelectionModule,"gridApi.clearRangeSelection",this.context.getGridId())}undoCellEditing(){this.undoRedoService.undo("api")}redoCellEditing(){this.undoRedoService.redo("api")}getCurrentUndoSize(){return this.undoRedoService.getCurrentUndoStackSize()}getCurrentRedoSize(){return this.undoRedoService.getCurrentRedoStackSize()}assertChart(e,t){if(yt.__assertRegistered(ze.GridChartsModule,"api."+e,this.context.getGridId()))return this.frameworkOverrides.wrapIncoming(()=>t())}getChartModels(){return this.assertChart("getChartModels",()=>this.chartService.getChartModels())}getChartRef(e){return this.assertChart("getChartRef",()=>this.chartService.getChartRef(e))}getChartImageDataURL(e){return this.assertChart("getChartImageDataURL",()=>this.chartService.getChartImageDataURL(e))}downloadChart(e){return this.assertChart("downloadChart",()=>this.chartService.downloadChart(e))}openChartToolPanel(e){return this.assertChart("openChartToolPanel",()=>this.chartService.openChartToolPanel(e))}closeChartToolPanel(e){return this.assertChart("closeChartToolPanel",()=>this.chartService.closeChartToolPanel(e.chartId))}createRangeChart(e){return this.assertChart("createRangeChart",()=>this.chartService.createRangeChart(e))}createPivotChart(e){return this.assertChart("createPivotChart",()=>this.chartService.createPivotChart(e))}createCrossFilterChart(e){return this.assertChart("createCrossFilterChart",()=>this.chartService.createCrossFilterChart(e))}updateChart(e){return this.assertChart("updateChart",()=>this.chartService.updateChart(e))}restoreChart(e,t){return this.assertChart("restoreChart",()=>this.chartService.restoreChart(e,t))}assertClipboard(e,t){yt.__assertRegistered(ze.ClipboardModule,"api"+e,this.context.getGridId())&&t()}copyToClipboard(e){this.assertClipboard("copyToClipboard",()=>this.clipboardService.copyToClipboard(e))}cutToClipboard(e){this.assertClipboard("cutToClipboard",()=>this.clipboardService.cutToClipboard(e))}copySelectedRowsToClipboard(e){this.assertClipboard("copySelectedRowsToClipboard",()=>this.clipboardService.copySelectedRowsToClipboard(e))}copySelectedRangeToClipboard(e){this.assertClipboard("copySelectedRangeToClipboard",()=>this.clipboardService.copySelectedRangeToClipboard(e))}copySelectedRangeDown(){this.assertClipboard("copySelectedRangeDown",()=>this.clipboardService.copyRangeDown())}pasteFromClipboard(){this.assertClipboard("pasteFromClipboard",()=>this.clipboardService.pasteFromClipboard())}showColumnMenuAfterButtonClick(e,t){st("'showColumnMenuAfterButtonClick' is deprecated. Use 'IHeaderParams.showColumnMenu' within a header component, or 'api.showColumnMenu' elsewhere.");const i=this.columnModel.getGridColumn(e);this.menuService.showColumnMenu({column:i,buttonElement:t,positionBy:"button"})}showColumnMenuAfterMouseClick(e,t){st("'showColumnMenuAfterMouseClick' is deprecated. Use 'IHeaderParams.showColumnMenuAfterMouseClick' within a header component, or 'api.showColumnMenu' elsewhere.");let i=this.columnModel.getGridColumn(e);i||(i=this.columnModel.getPrimaryColumn(e)),i?this.menuService.showColumnMenu({column:i,mouseEvent:t,positionBy:"mouse"}):console.error(`AG Grid: column '${e}' not found`)}showColumnChooser(e){this.menuService.showColumnChooser({chooserParams:e})}showColumnFilter(e){const t=this.columnModel.getGridColumn(e);t?this.menuService.showFilterMenu({column:t,containerType:"columnFilter",positionBy:"auto"}):console.error(`AG Grid: column '${e}' not found`)}showColumnMenu(e){const t=this.columnModel.getGridColumn(e);t?this.menuService.showColumnMenu({column:t,positionBy:"auto"}):console.error(`AG Grid: column '${e}' not found`)}hidePopupMenu(){this.menuService.hidePopupMenu()}hideColumnChooser(){this.menuService.hideColumnChooser()}tabToNextCell(e){return this.navigationService.tabToNextCell(!1,e)}tabToPreviousCell(e){return this.navigationService.tabToNextCell(!0,e)}getCellRendererInstances(e={}){return this.rowRenderer.getCellRendererInstances(e).map(Mc)}getCellEditorInstances(e={}){return this.rowRenderer.getCellEditorInstances(e).map(Mc)}getEditingCells(){return this.rowRenderer.getEditingCells()}stopEditing(e=!1){this.rowRenderer.stopEditing(e)}startEditingCell(e){const t=this.columnModel.getGridColumn(e.colKey);if(!t)return void console.warn(`AG Grid: no column found for ${e.colKey}`);const i={rowIndex:e.rowIndex,rowPinned:e.rowPinned||null,column:t};null==e.rowPinned&&this.ensureIndexVisible(e.rowIndex),this.ensureColumnVisible(e.colKey);const s=this.navigationService.getCellByPosition(i);!s||(this.focusService.isCellFocused(i)||this.focusService.setFocusedCell(i),s.startRowOrCellEdit(e.key))}addAggFunc(e,t){this.logDeprecation("v31.1","addAggFunc(key, func)","addAggFuncs({ key: func })"),this.aggFuncService&&this.aggFuncService.addAggFuncs({key:t})}addAggFuncs(e){this.aggFuncService&&this.aggFuncService.addAggFuncs(e)}clearAggFuncs(){this.aggFuncService&&this.aggFuncService.clear()}applyServerSideTransaction(e){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransaction(e);this.logMissingRowModel("applyServerSideTransaction","serverSide")}applyServerSideTransactionAsync(e,t){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.applyTransactionAsync(e,t);this.logMissingRowModel("applyServerSideTransactionAsync","serverSide")}applyServerSideRowData(e){var t,i;const n=null!==(t=e.startRow)&&void 0!==t?t:0,s=null!==(i=e.route)&&void 0!==i?i:[];n<0?console.warn(`AG Grid: invalid value ${e.startRow} for startRow, the value should be >= 0`):this.serverSideRowModel?this.serverSideRowModel.applyRowData(e.successParams,n,s):this.logMissingRowModel("setServerSideDatasource","serverSide")}retryServerSideLoads(){this.serverSideRowModel?this.serverSideRowModel.retryLoads():this.logMissingRowModel("retryServerSideLoads","serverSide")}flushServerSideAsyncTransactions(){if(this.serverSideTransactionManager)return this.serverSideTransactionManager.flushAsyncTransactions();this.logMissingRowModel("flushServerSideAsyncTransactions","serverSide")}applyTransaction(e){if(this.clientSideRowModel)return this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.updateRowData(e));this.logMissingRowModel("applyTransaction","clientSide")}applyTransactionAsync(e,t){this.clientSideRowModel?this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.batchUpdateRowData(e,t)):this.logMissingRowModel("applyTransactionAsync","clientSide")}flushAsyncTransactions(){this.clientSideRowModel?this.frameworkOverrides.wrapIncoming(()=>this.clientSideRowModel.flushAsyncTransactions()):this.logMissingRowModel("flushAsyncTransactions","clientSide")}refreshInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.refreshCache():this.logMissingRowModel("refreshInfiniteCache","infinite")}purgeInfiniteCache(){this.infiniteRowModel?this.infiniteRowModel.purgeCache():this.logMissingRowModel("purgeInfiniteCache","infinite")}refreshServerSide(e){this.serverSideRowModel?this.serverSideRowModel.refreshStore(e):this.logMissingRowModel("refreshServerSide","serverSide")}getServerSideGroupLevelState(){return this.serverSideRowModel?this.serverSideRowModel.getStoreState():(this.logMissingRowModel("getServerSideGroupLevelState","serverSide"),[])}getInfiniteRowCount(){if(this.infiniteRowModel)return this.infiniteRowModel.getRowCount();this.logMissingRowModel("getInfiniteRowCount","infinite")}isLastRowIndexKnown(){if(this.infiniteRowModel)return this.infiniteRowModel.isLastRowIndexKnown();this.logMissingRowModel("isLastRowIndexKnown","infinite")}getCacheBlockState(){return this.rowNodeBlockLoader.getBlockState()}getFirstDisplayedRow(){return this.logDeprecation("v31.1","getFirstDisplayedRow","getFirstDisplayedRowIndex"),this.getFirstDisplayedRowIndex()}getFirstDisplayedRowIndex(){return this.rowRenderer.getFirstVirtualRenderedRow()}getLastDisplayedRow(){return this.logDeprecation("v31.1","getLastDisplayedRow","getLastDisplayedRowIndex"),this.getLastDisplayedRowIndex()}getLastDisplayedRowIndex(){return this.rowRenderer.getLastVirtualRenderedRow()}getDisplayedRowAtIndex(e){return this.rowModel.getRow(e)}getDisplayedRowCount(){return this.rowModel.getRowCount()}paginationIsLastPageFound(){return this.paginationProxy.isLastPageFound()}paginationGetPageSize(){return this.paginationProxy.getPageSize()}paginationGetCurrentPage(){return this.paginationProxy.getCurrentPage()}paginationGetTotalPages(){return this.paginationProxy.getTotalPages()}paginationGetRowCount(){return this.paginationProxy.getMasterRowCount()}paginationGoToNextPage(){this.paginationProxy.goToNextPage()}paginationGoToPreviousPage(){this.paginationProxy.goToPreviousPage()}paginationGoToFirstPage(){this.paginationProxy.goToFirstPage()}paginationGoToLastPage(){this.paginationProxy.goToLastPage()}paginationGoToPage(e){this.paginationProxy.goToPage(e)}sizeColumnsToFit(e){"number"==typeof e?this.columnModel.sizeColumnsToFit(e,"api"):this.gridBodyCtrl.sizeColumnsToFit(e)}setColumnGroupOpened(e,t){this.columnModel.setColumnGroupOpened(e,t,"api")}getColumnGroup(e,t){return this.columnModel.getColumnGroup(e,t)}getProvidedColumnGroup(e){return this.columnModel.getProvidedColumnGroup(e)}getDisplayNameForColumn(e,t){return this.columnModel.getDisplayNameForColumn(e,t)||""}getDisplayNameForColumnGroup(e,t){return this.columnModel.getDisplayNameForColumnGroup(e,t)||""}getColumn(e){return this.columnModel.getPrimaryColumn(e)}getColumns(){return this.columnModel.getAllPrimaryColumns()}applyColumnState(e){return this.columnModel.applyColumnState(e,"api")}getColumnState(){return this.columnModel.getColumnState()}resetColumnState(){this.columnModel.resetColumnState("api")}getColumnGroupState(){return this.columnModel.getColumnGroupState()}setColumnGroupState(e){this.columnModel.setColumnGroupState(e,"api")}resetColumnGroupState(){this.columnModel.resetColumnGroupState("api")}isPinning(){return this.columnModel.isPinningLeft()||this.columnModel.isPinningRight()}isPinningLeft(){return this.columnModel.isPinningLeft()}isPinningRight(){return this.columnModel.isPinningRight()}getDisplayedColAfter(e){return this.columnModel.getDisplayedColAfter(e)}getDisplayedColBefore(e){return this.columnModel.getDisplayedColBefore(e)}setColumnVisible(e,t){this.logDeprecation("v31.1","setColumnVisible(key,visible)","setColumnsVisible([key],visible)"),this.columnModel.setColumnsVisible([e],t,"api")}setColumnsVisible(e,t){this.columnModel.setColumnsVisible(e,t,"api")}setColumnPinned(e,t){this.logDeprecation("v31.1","setColumnPinned(key,pinned)","setColumnsPinned([key],pinned)"),this.columnModel.setColumnsPinned([e],t,"api")}setColumnsPinned(e,t){this.columnModel.setColumnsPinned(e,t,"api")}getAllGridColumns(){return this.columnModel.getAllGridColumns()}getDisplayedLeftColumns(){return this.columnModel.getDisplayedLeftColumns()}getDisplayedCenterColumns(){return this.columnModel.getDisplayedCenterColumns()}getDisplayedRightColumns(){return this.columnModel.getDisplayedRightColumns()}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getAllDisplayedVirtualColumns(){return this.columnModel.getViewportColumns()}moveColumn(e,t){this.logDeprecation("v31.1","moveColumn(key, toIndex)","moveColumns([key], toIndex)"),this.columnModel.moveColumns([e],t,"api")}moveColumnByIndex(e,t){this.columnModel.moveColumnByIndex(e,t,"api")}moveColumns(e,t){this.columnModel.moveColumns(e,t,"api")}moveRowGroupColumn(e,t){this.columnModel.moveRowGroupColumn(e,t,"api")}setColumnAggFunc(e,t){this.columnModel.setColumnAggFunc(e,t,"api")}setColumnWidth(e,t,i=!0,n="api"){this.logDeprecation("v31.1","setColumnWidth(col, width)","setColumnWidths([{key: col, newWidth: width}])"),this.columnModel.setColumnWidths([{key:e,newWidth:t}],!1,i,n)}setColumnWidths(e,t=!0,i="api"){this.columnModel.setColumnWidths(e,!1,t,i)}isPivotMode(){return this.columnModel.isPivotMode()}getPivotResultColumn(e,t){return this.columnModel.getSecondaryPivotColumn(e,t)}setValueColumns(e){this.columnModel.setValueColumns(e,"api")}getValueColumns(){return this.columnModel.getValueColumns()}removeValueColumn(e){this.logDeprecation("v31.1","removeValueColumn(colKey)","removeValueColumns([colKey])"),this.columnModel.removeValueColumns([e],"api")}removeValueColumns(e){this.columnModel.removeValueColumns(e,"api")}addValueColumn(e){this.logDeprecation("v31.1","addValueColumn(colKey)","addValueColumns([colKey])"),this.columnModel.addValueColumns([e],"api")}addValueColumns(e){this.columnModel.addValueColumns(e,"api")}setRowGroupColumns(e){this.columnModel.setRowGroupColumns(e,"api")}removeRowGroupColumn(e){this.logDeprecation("v31.1","removeRowGroupColumn(colKey)","removeRowGroupColumns([colKey])"),this.columnModel.removeRowGroupColumns([e],"api")}removeRowGroupColumns(e){this.columnModel.removeRowGroupColumns(e,"api")}addRowGroupColumn(e){this.logDeprecation("v31.1","addRowGroupColumn(colKey)","addRowGroupColumns([colKey])"),this.columnModel.addRowGroupColumns([e],"api")}addRowGroupColumns(e){this.columnModel.addRowGroupColumns(e,"api")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}setPivotColumns(e){this.columnModel.setPivotColumns(e,"api")}removePivotColumn(e){this.logDeprecation("v31.1","removePivotColumn(colKey)","removePivotColumns([colKey])"),this.columnModel.removePivotColumns([e],"api")}removePivotColumns(e){this.columnModel.removePivotColumns(e,"api")}addPivotColumn(e){this.logDeprecation("v31.1","addPivotColumn(colKey)","addPivotColumns([colKey])"),this.columnModel.addPivotColumns([e],"api")}addPivotColumns(e){this.columnModel.addPivotColumns(e,"api")}getPivotColumns(){return this.columnModel.getPivotColumns()}getLeftDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeLeft()}getCenterDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeCentre()}getRightDisplayedColumnGroups(){return this.columnModel.getDisplayedTreeRight()}getAllDisplayedColumnGroups(){return this.columnModel.getAllDisplayedTrees()}autoSizeColumn(e,t){return this.logDeprecation("v31.1","autoSizeColumn(key, skipHeader)","autoSizeColumns([key], skipHeader)"),this.columnModel.autoSizeColumns({columns:[e],skipHeader:t,source:"api"})}autoSizeColumns(e,t){this.columnModel.autoSizeColumns({columns:e,skipHeader:t,source:"api"})}autoSizeAllColumns(e){this.columnModel.autoSizeAllColumns("api",e)}setPivotResultColumns(e){this.columnModel.setSecondaryColumns(e,"api")}getPivotResultColumns(){return this.columnModel.getSecondaryColumns()}getState(){return this.stateService.getState()}getGridOption(e){return this.gos.get(e)}setGridOption(e,t){this.updateGridOptions({[e]:t})}updateGridOptions(e){this.gos.updateGridOptions({options:e})}__internalUpdateGridOptions(e){this.gos.updateGridOptions({options:e,source:"gridOptionsUpdated"})}deprecatedUpdateGridOption(e,t){st(`set${e.charAt(0).toUpperCase()}${e.slice(1,e.length)} is deprecated. Please use 'api.setGridOption('${e}', newValue)' or 'api.updateGridOptions({ ${e}: newValue })' instead.`),this.setGridOption(e,t)}setPivotMode(e){this.deprecatedUpdateGridOption("pivotMode",e)}setPinnedTopRowData(e){this.deprecatedUpdateGridOption("pinnedTopRowData",e)}setPinnedBottomRowData(e){this.deprecatedUpdateGridOption("pinnedBottomRowData",e)}setPopupParent(e){this.deprecatedUpdateGridOption("popupParent",e)}setSuppressModelUpdateAfterUpdateTransaction(e){this.deprecatedUpdateGridOption("suppressModelUpdateAfterUpdateTransaction",e)}setDataTypeDefinitions(e){this.deprecatedUpdateGridOption("dataTypeDefinitions",e)}setPagination(e){this.deprecatedUpdateGridOption("pagination",e)}paginationSetPageSize(e){this.deprecatedUpdateGridOption("paginationPageSize",e)}setSideBar(e){this.deprecatedUpdateGridOption("sideBar",e)}setSuppressClipboardPaste(e){this.deprecatedUpdateGridOption("suppressClipboardPaste",e)}setGroupRemoveSingleChildren(e){this.deprecatedUpdateGridOption("groupRemoveSingleChildren",e)}setGroupRemoveLowestSingleChildren(e){this.deprecatedUpdateGridOption("groupRemoveLowestSingleChildren",e)}setGroupDisplayType(e){this.deprecatedUpdateGridOption("groupDisplayType",e)}setGroupIncludeFooter(e){this.deprecatedUpdateGridOption("groupIncludeFooter",e)}setGroupIncludeTotalFooter(e){this.deprecatedUpdateGridOption("groupIncludeTotalFooter",e)}setRowClass(e){this.deprecatedUpdateGridOption("rowClass",e)}setDeltaSort(e){this.deprecatedUpdateGridOption("deltaSort",e)}setSuppressRowDrag(e){this.deprecatedUpdateGridOption("suppressRowDrag",e)}setSuppressMoveWhenRowDragging(e){this.deprecatedUpdateGridOption("suppressMoveWhenRowDragging",e)}setSuppressRowClickSelection(e){this.deprecatedUpdateGridOption("suppressRowClickSelection",e)}setEnableAdvancedFilter(e){this.deprecatedUpdateGridOption("enableAdvancedFilter",e)}setIncludeHiddenColumnsInAdvancedFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInAdvancedFilter",e)}setAdvancedFilterParent(e){this.deprecatedUpdateGridOption("advancedFilterParent",e)}setAdvancedFilterBuilderParams(e){this.deprecatedUpdateGridOption("advancedFilterBuilderParams",e)}setQuickFilter(e){st("setQuickFilter is deprecated. Please use 'api.setGridOption('quickFilterText', newValue)' or 'api.updateGridOptions({ quickFilterText: newValue })' instead."),this.gos.updateGridOptions({options:{quickFilterText:e}})}setExcludeHiddenColumnsFromQuickFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",!e)}setIncludeHiddenColumnsInQuickFilter(e){this.deprecatedUpdateGridOption("includeHiddenColumnsInQuickFilter",e)}setQuickFilterParser(e){this.deprecatedUpdateGridOption("quickFilterParser",e)}setQuickFilterMatcher(e){this.deprecatedUpdateGridOption("quickFilterMatcher",e)}setAlwaysShowHorizontalScroll(e){this.deprecatedUpdateGridOption("alwaysShowHorizontalScroll",e)}setAlwaysShowVerticalScroll(e){this.deprecatedUpdateGridOption("alwaysShowVerticalScroll",e)}setFunctionsReadOnly(e){this.deprecatedUpdateGridOption("functionsReadOnly",e)}setColumnDefs(e,t="api"){st("setColumnDefs is deprecated. Please use 'api.setGridOption('columnDefs', newValue)' or 'api.updateGridOptions({ columnDefs: newValue })' instead."),this.gos.updateGridOptions({options:{columnDefs:e},source:t})}setAutoGroupColumnDef(e,t="api"){st("setAutoGroupColumnDef is deprecated. Please use 'api.setGridOption('autoGroupColumnDef', newValue)' or 'api.updateGridOptions({ autoGroupColumnDef: newValue })' instead."),this.gos.updateGridOptions({options:{autoGroupColumnDef:e},source:t})}setDefaultColDef(e,t="api"){st("setDefaultColDef is deprecated. Please use 'api.setGridOption('defaultColDef', newValue)' or 'api.updateGridOptions({ defaultColDef: newValue })' instead."),this.gos.updateGridOptions({options:{defaultColDef:e},source:t})}setColumnTypes(e,t="api"){st("setColumnTypes is deprecated. Please use 'api.setGridOption('columnTypes', newValue)' or 'api.updateGridOptions({ columnTypes: newValue })' instead."),this.gos.updateGridOptions({options:{columnTypes:e},source:t})}setTreeData(e){this.deprecatedUpdateGridOption("treeData",e)}setServerSideDatasource(e){this.deprecatedUpdateGridOption("serverSideDatasource",e)}setCacheBlockSize(e){this.deprecatedUpdateGridOption("cacheBlockSize",e)}setDatasource(e){this.deprecatedUpdateGridOption("datasource",e)}setViewportDatasource(e){this.deprecatedUpdateGridOption("viewportDatasource",e)}setRowData(e){this.deprecatedUpdateGridOption("rowData",e)}setEnableCellTextSelection(e){this.deprecatedUpdateGridOption("enableCellTextSelection",e)}setHeaderHeight(e){this.deprecatedUpdateGridOption("headerHeight",e)}setDomLayout(e){this.deprecatedUpdateGridOption("domLayout",e)}setFillHandleDirection(e){this.deprecatedUpdateGridOption("fillHandleDirection",e)}setGroupHeaderHeight(e){this.deprecatedUpdateGridOption("groupHeaderHeight",e)}setFloatingFiltersHeight(e){this.deprecatedUpdateGridOption("floatingFiltersHeight",e)}setPivotHeaderHeight(e){this.deprecatedUpdateGridOption("pivotHeaderHeight",e)}setPivotGroupHeaderHeight(e){this.deprecatedUpdateGridOption("pivotGroupHeaderHeight",e)}setAnimateRows(e){this.deprecatedUpdateGridOption("animateRows",e)}setIsExternalFilterPresent(e){this.deprecatedUpdateGridOption("isExternalFilterPresent",e)}setDoesExternalFilterPass(e){this.deprecatedUpdateGridOption("doesExternalFilterPass",e)}setNavigateToNextCell(e){this.deprecatedUpdateGridOption("navigateToNextCell",e)}setTabToNextCell(e){this.deprecatedUpdateGridOption("tabToNextCell",e)}setTabToNextHeader(e){this.deprecatedUpdateGridOption("tabToNextHeader",e)}setNavigateToNextHeader(e){this.deprecatedUpdateGridOption("navigateToNextHeader",e)}setRowGroupPanelShow(e){this.deprecatedUpdateGridOption("rowGroupPanelShow",e)}setGetGroupRowAgg(e){this.deprecatedUpdateGridOption("getGroupRowAgg",e)}setGetBusinessKeyForNode(e){this.deprecatedUpdateGridOption("getBusinessKeyForNode",e)}setGetChildCount(e){this.deprecatedUpdateGridOption("getChildCount",e)}setProcessRowPostCreate(e){this.deprecatedUpdateGridOption("processRowPostCreate",e)}setGetRowId(e){st("getRowId is a static property and can no longer be updated.")}setGetRowClass(e){this.deprecatedUpdateGridOption("getRowClass",e)}setIsFullWidthRow(e){this.deprecatedUpdateGridOption("isFullWidthRow",e)}setIsRowSelectable(e){this.deprecatedUpdateGridOption("isRowSelectable",e)}setIsRowMaster(e){this.deprecatedUpdateGridOption("isRowMaster",e)}setPostSortRows(e){this.deprecatedUpdateGridOption("postSortRows",e)}setGetDocument(e){this.deprecatedUpdateGridOption("getDocument",e)}setGetContextMenuItems(e){this.deprecatedUpdateGridOption("getContextMenuItems",e)}setGetMainMenuItems(e){this.deprecatedUpdateGridOption("getMainMenuItems",e)}setProcessCellForClipboard(e){this.deprecatedUpdateGridOption("processCellForClipboard",e)}setSendToClipboard(e){this.deprecatedUpdateGridOption("sendToClipboard",e)}setProcessCellFromClipboard(e){this.deprecatedUpdateGridOption("processCellFromClipboard",e)}setProcessPivotResultColDef(e){this.deprecatedUpdateGridOption("processPivotResultColDef",e)}setProcessPivotResultColGroupDef(e){this.deprecatedUpdateGridOption("processPivotResultColGroupDef",e)}setPostProcessPopup(e){this.deprecatedUpdateGridOption("postProcessPopup",e)}setInitialGroupOrderComparator(e){this.deprecatedUpdateGridOption("initialGroupOrderComparator",e)}setGetChartToolbarItems(e){this.deprecatedUpdateGridOption("getChartToolbarItems",e)}setPaginationNumberFormatter(e){this.deprecatedUpdateGridOption("paginationNumberFormatter",e)}setGetServerSideGroupLevelParams(e){this.deprecatedUpdateGridOption("getServerSideGroupLevelParams",e)}setIsServerSideGroupOpenByDefault(e){this.deprecatedUpdateGridOption("isServerSideGroupOpenByDefault",e)}setIsApplyServerSideTransaction(e){this.deprecatedUpdateGridOption("isApplyServerSideTransaction",e)}setIsServerSideGroup(e){this.deprecatedUpdateGridOption("isServerSideGroup",e)}setGetServerSideGroupKey(e){this.deprecatedUpdateGridOption("getServerSideGroupKey",e)}setGetRowStyle(e){this.deprecatedUpdateGridOption("getRowStyle",e)}setGetRowHeight(e){this.deprecatedUpdateGridOption("getRowHeight",e)}};zt([Pt("csvCreator")],Vt.prototype,"csvCreator",void 0),zt([Pt("excelCreator")],Vt.prototype,"excelCreator",void 0),zt([P("rowRenderer")],Vt.prototype,"rowRenderer",void 0),zt([P("navigationService")],Vt.prototype,"navigationService",void 0),zt([P("filterManager")],Vt.prototype,"filterManager",void 0),zt([P("columnModel")],Vt.prototype,"columnModel",void 0),zt([P("selectionService")],Vt.prototype,"selectionService",void 0),zt([P("gridOptionsService")],Vt.prototype,"gos",void 0),zt([P("valueService")],Vt.prototype,"valueService",void 0),zt([P("alignedGridsService")],Vt.prototype,"alignedGridsService",void 0),zt([P("eventService")],Vt.prototype,"eventService",void 0),zt([P("pinnedRowModel")],Vt.prototype,"pinnedRowModel",void 0),zt([P("context")],Vt.prototype,"context",void 0),zt([P("rowModel")],Vt.prototype,"rowModel",void 0),zt([P("sortController")],Vt.prototype,"sortController",void 0),zt([P("paginationProxy")],Vt.prototype,"paginationProxy",void 0),zt([P("focusService")],Vt.prototype,"focusService",void 0),zt([P("dragAndDropService")],Vt.prototype,"dragAndDropService",void 0),zt([Pt("rangeService")],Vt.prototype,"rangeService",void 0),zt([Pt("clipboardService")],Vt.prototype,"clipboardService",void 0),zt([Pt("aggFuncService")],Vt.prototype,"aggFuncService",void 0),zt([P("menuService")],Vt.prototype,"menuService",void 0),zt([P("valueCache")],Vt.prototype,"valueCache",void 0),zt([P("animationFrameService")],Vt.prototype,"animationFrameService",void 0),zt([Pt("statusBarService")],Vt.prototype,"statusBarService",void 0),zt([Pt("chartService")],Vt.prototype,"chartService",void 0),zt([Pt("undoRedoService")],Vt.prototype,"undoRedoService",void 0),zt([Pt("rowNodeBlockLoader")],Vt.prototype,"rowNodeBlockLoader",void 0),zt([Pt("ssrmTransactionManager")],Vt.prototype,"serverSideTransactionManager",void 0),zt([P("ctrlsService")],Vt.prototype,"ctrlsService",void 0),zt([P("overlayService")],Vt.prototype,"overlayService",void 0),zt([Pt("sideBarService")],Vt.prototype,"sideBarService",void 0),zt([P("stateService")],Vt.prototype,"stateService",void 0),zt([P("expansionService")],Vt.prototype,"expansionService",void 0),zt([P("apiEventService")],Vt.prototype,"apiEventService",void 0),zt([P("frameworkOverrides")],Vt.prototype,"frameworkOverrides",void 0),zt([Se],Vt.prototype,"init",null),Vt=zt([He("gridApi")],Vt);var Mv,Ih=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Tl=Mv=class extends Ee{constructor(){super(...arguments),this.quickFilter=null,this.quickFilterParts=null}postConstruct(){this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.resetQuickFilterCache()),this.addManagedListener(this.eventService,G.EVENT_COLUMN_VISIBLE,()=>{this.gridOptionsService.get("includeHiddenColumnsInQuickFilter")||this.resetQuickFilterCache()}),this.addManagedPropertyListener("quickFilterText",e=>this.setQuickFilter(e.currentValue)),this.addManagedPropertyListener("includeHiddenColumnsInQuickFilter",()=>this.onIncludeHiddenColumnsInQuickFilterChanged()),this.quickFilter=this.parseQuickFilter(this.gridOptionsService.get("quickFilterText")),this.parser=this.gridOptionsService.get("quickFilterParser"),this.matcher=this.gridOptionsService.get("quickFilterMatcher"),this.setQuickFilterParts(),this.addManagedPropertyListeners(["quickFilterMatcher","quickFilterParser"],()=>this.setQuickFilterParserAndMatcher())}isQuickFilterPresent(){return null!==this.quickFilter}doesRowPassQuickFilter(e){const t=this.gridOptionsService.get("cacheQuickFilter");return this.matcher?this.doesRowPassQuickFilterMatcher(t,e):this.quickFilterParts.every(i=>t?this.doesRowPassQuickFilterCache(e,i):this.doesRowPassQuickFilterNoCache(e,i))}resetQuickFilterCache(){this.rowModel.forEachNode(e=>e.quickFilterAggregateText=null)}setQuickFilterParts(){const{quickFilter:e,parser:t}=this;this.quickFilterParts=e?t?t(e):e.split(" "):null}parseQuickFilter(e){return Ie(e)?this.gridOptionsService.isRowModelType("clientSide")?e.toUpperCase():(console.warn("AG Grid - Quick filtering only works with the Client-Side Row Model"),null):null}setQuickFilter(e){if(null!=e&&"string"!=typeof e)return void console.warn("AG Grid - Grid option quickFilterText only supports string inputs, received: "+typeof e);const t=this.parseQuickFilter(e);this.quickFilter!==t&&(this.quickFilter=t,this.setQuickFilterParts(),this.dispatchEvent({type:Mv.EVENT_QUICK_FILTER_CHANGED}))}setQuickFilterParserAndMatcher(){const e=this.gridOptionsService.get("quickFilterParser"),t=this.gridOptionsService.get("quickFilterMatcher"),i=e!==this.parser||t!==this.matcher;this.parser=e,this.matcher=t,i&&(this.setQuickFilterParts(),this.dispatchEvent({type:Mv.EVENT_QUICK_FILTER_CHANGED}))}onIncludeHiddenColumnsInQuickFilterChanged(){this.columnModel.refreshQuickFilterColumns(),this.resetQuickFilterCache(),this.isQuickFilterPresent()&&this.dispatchEvent({type:Mv.EVENT_QUICK_FILTER_CHANGED})}doesRowPassQuickFilterNoCache(e,t){return this.columnModel.getAllColumnsForQuickFilter().some(n=>{const s=this.getQuickFilterTextForColumn(n,e);return Ie(s)&&s.indexOf(t)>=0})}doesRowPassQuickFilterCache(e,t){return this.checkGenerateQuickFilterAggregateText(e),e.quickFilterAggregateText.indexOf(t)>=0}doesRowPassQuickFilterMatcher(e,t){let i;e?(this.checkGenerateQuickFilterAggregateText(t),i=t.quickFilterAggregateText):i=this.getQuickFilterAggregateText(t);const{quickFilterParts:n,matcher:s}=this;return s(n,i)}checkGenerateQuickFilterAggregateText(e){e.quickFilterAggregateText||(e.quickFilterAggregateText=this.getQuickFilterAggregateText(e))}getQuickFilterTextForColumn(e,t){let i=this.valueService.getValue(e,t,!0);const n=e.getColDef();if(n.getQuickFilterText){const s=this.gridOptionsService.addGridCommonParams({value:i,node:t,data:t.data,column:e,colDef:n});i=n.getQuickFilterText(s)}return Ie(i)?i.toString().toUpperCase():null}getQuickFilterAggregateText(e){const t=[];return this.columnModel.getAllColumnsForQuickFilter().forEach(n=>{const s=this.getQuickFilterTextForColumn(n,e);Ie(s)&&t.push(s)}),t.join(Mv.QUICK_FILTER_SEPARATOR)}};Tl.EVENT_QUICK_FILTER_CHANGED="quickFilterChanged",Tl.QUICK_FILTER_SEPARATOR="\n",Ih([P("valueService")],Tl.prototype,"valueService",void 0),Ih([P("columnModel")],Tl.prototype,"columnModel",void 0),Ih([P("rowModel")],Tl.prototype,"rowModel",void 0),Ih([Se],Tl.prototype,"postConstruct",null),Tl=Mv=Ih([He("quickFilterService")],Tl);var Rl=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let jo=class extends Ee{constructor(){super(...arguments),this.allColumnFilters=new Map,this.allColumnListeners=new Map,this.activeAggregateFilters=[],this.activeColumnFilters=[],this.processingFilterChange=!1,this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue=[]}init(){var e,t,i;this.addManagedListener(this.eventService,G.EVENT_GRID_COLUMNS_CHANGED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,G.EVENT_COLUMN_VALUE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.refreshFiltersForAggregations()),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,G.EVENT_COLUMN_VISIBLE,()=>this.updateAdvancedFilterColumns()),this.addManagedListener(this.eventService,G.EVENT_ROW_DATA_UPDATED,()=>this.onNewRowsLoaded("rowDataUpdated")),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.addManagedPropertyListeners(["isExternalFilterPresent","doesExternalFilterPass"],()=>{this.onFilterChanged({source:"api"})}),this.updateAggFiltering(),this.addManagedPropertyListener("groupAggFiltering",()=>{this.updateAggFiltering(),this.onFilterChanged()}),this.addManagedPropertyListener("advancedFilterModel",n=>this.setAdvancedFilterModel(n.currentValue)),this.addManagedListener(this.eventService,G.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,({enabled:n})=>this.onAdvancedFilterEnabledChanged(n)),this.addManagedListener(this.eventService,G.EVENT_DATA_TYPES_INFERRED,()=>this.processFilterModelUpdateQueue()),this.addManagedListener(this.quickFilterService,Tl.EVENT_QUICK_FILTER_CHANGED,()=>this.onFilterChanged({source:"quickFilter"})),this.initialFilterModel=Object.assign({},null!==(i=null===(t=null===(e=this.gridOptionsService.get("initialState"))||void 0===e?void 0:e.filter)||void 0===t?void 0:t.filterModel)&&void 0!==i?i:{})}isExternalFilterPresentCallback(){const e=this.gridOptionsService.getCallback("isExternalFilterPresent");return"function"==typeof e&&e({})}doesExternalFilterPass(e){const t=this.gridOptionsService.get("doesExternalFilterPass");return"function"==typeof t&&t(e)}setFilterModel(e,t="api"){if(this.isAdvancedFilterEnabled())return void this.warnAdvancedFilters();if(this.dataTypeService.isPendingInference())return void this.filterModelUpdateQueue.push({model:e,source:t});const i=[],n=this.getFilterModel();if(e){const s=yv(Object.keys(e));this.allColumnFilters.forEach((o,a)=>{i.push(this.setModelOnFilterWrapper(o.filterPromise,e[a])),s.delete(a)}),s.forEach(o=>{const a=this.columnModel.getPrimaryColumn(o)||this.columnModel.getGridColumn(o);if(!a)return void console.warn("AG Grid: setFilterModel() - no column found for colId: "+o);if(!a.isFilterAllowed())return void console.warn("AG Grid: setFilterModel() - unable to fully apply model, filtering disabled for colId: "+o);const c=this.getOrCreateFilterWrapper(a,"NO_UI");c?i.push(this.setModelOnFilterWrapper(c.filterPromise,e[o])):console.warn("AG-Grid: setFilterModel() - unable to fully apply model, unable to create filter for colId: "+o)})}else this.allColumnFilters.forEach(s=>{i.push(this.setModelOnFilterWrapper(s.filterPromise,null))});$t.all(i).then(()=>{const s=this.getFilterModel(),o=[];this.allColumnFilters.forEach((a,c)=>{z.jsonEquals(n?n[c]:null,s?s[c]:null)||o.push(a.column)}),o.length>0&&this.onFilterChanged({columns:o,source:t})})}setModelOnFilterWrapper(e,t){return new $t(i=>{e.then(n=>{"function"!=typeof n.setModel&&(console.warn("AG Grid: filter missing setModel method, which is needed for setFilterModel"),i()),(n.setModel(t)||$t.resolve()).then(()=>i())})})}getFilterModel(){const e={};return this.allColumnFilters.forEach((t,i)=>{const n=this.getModelFromFilterWrapper(t);Ie(n)&&(e[i]=n)}),e}getModelFromFilterWrapper(e){var t;const n=e.filterPromise.resolveNow(null,s=>s);return null==n?null!==(t=this.initialFilterModel[e.column.getColId()])&&void 0!==t?t:null:"function"!=typeof n.getModel?(console.warn("AG Grid: filter API missing getModel method, which is needed for getFilterModel"),null):n.getModel()}isColumnFilterPresent(){return this.activeColumnFilters.length>0}isAggregateFilterPresent(){return!!this.activeAggregateFilters.length}isExternalFilterPresent(){return this.externalFilterPresent}isChildFilterPresent(){return this.isColumnFilterPresent()||this.isQuickFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}isAdvancedFilterPresent(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isFilterPresent()}onAdvancedFilterEnabledChanged(e){var t;e?this.allColumnFilters.size&&(this.allColumnFilters.forEach(i=>this.disposeFilterWrapper(i,"advancedFilterEnabled")),this.onFilterChanged({source:"advancedFilter"})):null!==(t=this.advancedFilterService)&&void 0!==t&&t.isFilterPresent()&&(this.advancedFilterService.setModel(null),this.onFilterChanged({source:"advancedFilter"}))}isAdvancedFilterEnabled(){var e;return null===(e=this.advancedFilterService)||void 0===e?void 0:e.isEnabled()}isAdvancedFilterHeaderActive(){return this.isAdvancedFilterEnabled()&&this.advancedFilterService.isHeaderActive()}doAggregateFiltersPass(e,t){return this.doColumnFiltersPass(e,t,!0)}updateActiveFilters(){this.activeColumnFilters.length=0,this.activeAggregateFilters.length=0;const e=n=>!!n&&(n.isFilterActive?n.isFilterActive():(console.warn("AG Grid: Filter is missing isFilterActive() method"),!1)),t=!!this.gridOptionsService.getGroupAggFiltering(),i=n=>{if(!n.isPrimary())return!0;const o=!this.columnModel.isPivotActive();return!(!n.isValueActive()||!o)&&(!!this.columnModel.isPivotMode()||t)};this.allColumnFilters.forEach(n=>{if(n.filterPromise.resolveNow(!1,e)){const s=n.filterPromise.resolveNow(null,o=>o);i(n.column)?this.activeAggregateFilters.push(s):this.activeColumnFilters.push(s)}})}updateFilterFlagInColumns(e,t){this.allColumnFilters.forEach(i=>{const n=i.filterPromise.resolveNow(!1,s=>s.isFilterActive());i.column.setFilterActive(n,e,t)})}isAnyFilterPresent(){return this.isQuickFilterPresent()||this.isColumnFilterPresent()||this.isAggregateFilterPresent()||this.isExternalFilterPresent()||this.isAdvancedFilterPresent()}doColumnFiltersPass(e,t,i){const{data:n,aggData:s}=e,o=i?this.activeAggregateFilters:this.activeColumnFilters,a=i?s:n;for(let c=0;c<o.length;c++){const u=o[c];if(null!=u&&u!==t){if("function"!=typeof u.doesFilterPass)throw new Error("Filter is missing method doesFilterPass");if(!u.doesFilterPass({node:e,data:a}))return!1}}return!0}resetQuickFilterCache(){this.quickFilterService.resetQuickFilterCache()}refreshFiltersForAggregations(){this.gridOptionsService.getGroupAggFiltering()&&this.onFilterChanged()}callOnFilterChangedOutsideRenderCycle(e){const t=()=>this.onFilterChanged(e);this.rowRenderer.isRefreshInProgress()?setTimeout(t,0):t()}onFilterChanged(e={}){const{source:t,filterInstance:i,additionalEventAttributes:n,columns:s}=e;this.updateDependantFilters(),this.updateActiveFilters(),this.updateFilterFlagInColumns("filterChanged",n),this.externalFilterPresent=this.isExternalFilterPresentCallback(),this.allColumnFilters.forEach(a=>{!a.filterPromise||a.filterPromise.then(c=>{c&&c!==i&&c.onAnyFilterChanged&&c.onAnyFilterChanged()})});const o={source:t,type:G.EVENT_FILTER_CHANGED,columns:s||[]};n&&Lo(o,n),this.processingFilterChange=!0,this.eventService.dispatchEvent(o),this.processingFilterChange=!1}isSuppressFlashingCellsBecauseFiltering(){var e;return!(null!==(e=this.gridOptionsService.get("allowShowChangeAfterFilter"))&&void 0!==e&&e)&&this.processingFilterChange}isQuickFilterPresent(){return this.quickFilterService.isQuickFilterPresent()}updateAggFiltering(){this.aggFiltering=!!this.gridOptionsService.getGroupAggFiltering()}isAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&(this.aggFiltering||this.columnModel.isPivotMode())}isNonAggregateQuickFilterPresent(){return this.isQuickFilterPresent()&&!(this.aggFiltering||this.columnModel.isPivotMode())}doesRowPassOtherFilters(e,t){return this.doesRowPassFilter({rowNode:t,filterInstanceToSkip:e})}doesRowPassAggregateFilters(e){return!(this.isAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isAggregateFilterPresent()&&!this.doAggregateFiltersPass(e.rowNode,e.filterInstanceToSkip))}doesRowPassFilter(e){return!(this.isNonAggregateQuickFilterPresent()&&!this.quickFilterService.doesRowPassQuickFilter(e.rowNode)||this.isExternalFilterPresent()&&!this.doesExternalFilterPass(e.rowNode)||this.isColumnFilterPresent()&&!this.doColumnFiltersPass(e.rowNode,e.filterInstanceToSkip)||this.isAdvancedFilterPresent()&&!this.advancedFilterService.doesFilterPass(e.rowNode))}onNewRowsLoaded(e){this.allColumnFilters.forEach(t=>{t.filterPromise.then(i=>{i.onNewRowsLoaded&&i.onNewRowsLoaded()})}),this.updateFilterFlagInColumns(e,{afterDataChange:!0}),this.updateActiveFilters()}createValueGetter(e){return({node:t})=>this.valueService.getValue(e,t,!0)}createGetValue(e){return(t,i)=>{const n=i?this.columnModel.getGridColumn(i):e;return n?this.valueService.getValue(n,t,!0):void 0}}getFilterComponent(e,t,i=!0){var n;if(i)return(null===(n=this.getOrCreateFilterWrapper(e,t))||void 0===n?void 0:n.filterPromise)||null;const s=this.cachedFilter(e);return s?s.filterPromise:null}isFilterActive(e){const t=this.cachedFilter(e);return!!t&&t.filterPromise.resolveNow(!1,i=>i.isFilterActive())}getOrCreateFilterWrapper(e,t){if(!e.isFilterAllowed())return null;let i=this.cachedFilter(e);return i?"NO_UI"!==t&&this.putIntoGui(i,t):(i=this.createFilterWrapper(e,t),this.setColumnFilterWrapper(e,i)),i}cachedFilter(e){return this.allColumnFilters.get(e.getColId())}getDefaultFilter(e){let t;if(yt.__isRegistered(ze.SetFilterModule,this.context.getGridId()))t="agSetColumnFilter";else{const i=this.dataTypeService.getBaseDataType(e);t="number"===i?"agNumberColumnFilter":"date"===i||"dateString"===i?"agDateColumnFilter":"agTextColumnFilter"}return t}getDefaultFloatingFilter(e){let t;if(yt.__isRegistered(ze.SetFilterModule,this.context.getGridId()))t="agSetColumnFloatingFilter";else{const i=this.dataTypeService.getBaseDataType(e);t="number"===i?"agNumberColumnFloatingFilter":"date"===i||"dateString"===i?"agDateColumnFloatingFilter":"agTextColumnFloatingFilter"}return t}createFilterInstance(e){const t=this.getDefaultFilter(e),i=e.getColDef();let n;const s=Object.assign(Object.assign({},this.createFilterParams(e,i)),{filterModifiedCallback:()=>this.filterModifiedCallbackFactory(n,e)(),filterChangedCallback:a=>this.filterChangedCallbackFactory(n,e)(a),doesRowPassOtherFilter:a=>this.doesRowPassOtherFilters(n,a)}),o=this.userComponentFactory.getFilterDetails(i,s,t);return o?{filterPromise:()=>{const a=o.newAgStackInstance();return a&&a.then(c=>n=c),a},compDetails:o}:{filterPromise:null,compDetails:null}}createFilterParams(e,t){return this.gridOptionsService.addGridCommonParams({column:e,colDef:SR(t),rowModel:this.rowModel,filterChangedCallback:()=>{},filterModifiedCallback:()=>{},valueGetter:this.createValueGetter(e),getValue:this.createGetValue(e),doesRowPassOtherFilter:()=>!0})}createFilterWrapper(e,t){var i;const n={column:e,filterPromise:null,compiledElement:null,guiPromise:$t.resolve(null),compDetails:null},{filterPromise:s,compDetails:o}=this.createFilterInstance(e);return n.filterPromise=null!==(i=s?.())&&void 0!==i?i:null,n.compDetails=o,s&&this.putIntoGui(n,t),n}putIntoGui(e,t){const i=document.createElement("div");i.className="ag-filter",e.guiPromise=new $t(n=>{e.filterPromise.then(s=>{let o=s.getGui();Ie(o)||console.warn(`AG Grid: getGui method from filter returned ${o}, it should be a DOM element or an HTML template string.`),"string"==typeof o&&(o=ps(o)),i.appendChild(o),n(i),this.eventService.dispatchEvent({type:G.EVENT_FILTER_OPENED,column:e.column,source:t,eGui:i})})})}onColumnsChanged(){const e=[];this.allColumnFilters.forEach((t,i)=>{let n;n=t.column.isPrimary()?this.columnModel.getPrimaryColumn(i):this.columnModel.getGridColumn(i),!n&&(e.push(t.column),this.disposeFilterWrapper(t,"columnChanged"),this.disposeColumnListener(i))}),e.length>0?this.onFilterChanged({columns:e,source:"api"}):this.updateDependantFilters()}updateDependantFilters(){this.columnModel.getGroupAutoColumns()?.forEach(t=>{"agGroupColumnFilter"===t.getColDef().filter&&this.getOrCreateFilterWrapper(t,"NO_UI")})}isFilterAllowed(e){var t,i;return!(this.isAdvancedFilterEnabled()||!e.isFilterAllowed())&&(null===(i=null===(t=this.allColumnFilters.get(e.getColId())?.filterPromise)||void 0===t?void 0:t.resolveNow(!0,o=>"function"!=typeof o?.isFilterAllowed||o?.isFilterAllowed()))||void 0===i||i)}getFloatingFilterCompDetails(e,t){const i=u=>{this.getFilterComponent(e,"NO_UI")?.then(g=>{u(Mc(g))})},n=e.getColDef(),s=Object.assign(Object.assign({},this.createFilterParams(e,n)),{filterChangedCallback:()=>i(u=>this.filterChangedCallbackFactory(u,e)())}),o=this.userComponentFactory.mergeParamsWithApplicationProvidedParams(n,Av,s);let a=this.userComponentFactory.getDefaultFloatingFilterType(n,()=>this.getDefaultFloatingFilter(e));return null==a&&(a="agReadOnlyFloatingFilter"),this.userComponentFactory.getFloatingFilterCompDetails(n,{column:e,filterParams:o,currentParentModel:()=>this.getCurrentFloatingFilterParentModel(e),parentFilterInstance:i,showParentFilter:t,suppressFilterButton:!1},a)}getCurrentFloatingFilterParentModel(e){const t=this.getFilterComponent(e,"NO_UI",!1);return t?t.resolveNow(null,i=>i&&i.getModel()):null}destroyFilter(e,t="api"){const i=e.getColId(),n=this.allColumnFilters.get(i);this.disposeColumnListener(i),delete this.initialFilterModel[i],n&&(this.disposeFilterWrapper(n,t),this.onFilterChanged({columns:[e],source:"api"}))}disposeColumnListener(e){const t=this.allColumnListeners.get(e);t&&(this.allColumnListeners.delete(e),t())}disposeFilterWrapper(e,t){e.filterPromise.then(i=>{this.getContext().destroyBean(i),e.column.setFilterActive(!1,"filterDestroyed"),this.allColumnFilters.delete(e.column.getColId()),this.eventService.dispatchEvent({type:G.EVENT_FILTER_DESTROYED,source:t,column:e.column})})}filterModifiedCallbackFactory(e,t){return()=>{this.eventService.dispatchEvent({type:G.EVENT_FILTER_MODIFIED,column:t,filterInstance:e})}}filterChangedCallbackFactory(e,t){return i=>{var n;const s=null!==(n=i?.source)&&void 0!==n?n:"api";this.callOnFilterChangedOutsideRenderCycle({filter:e,additionalEventAttributes:i,columns:[t],source:s})}}checkDestroyFilter(e){const t=this.allColumnFilters.get(e);if(!t)return;const i=t.column,{compDetails:n}=i.isFilterAllowed()?this.createFilterInstance(i):{compDetails:null};if(this.areFilterCompsDifferent(t.compDetails,n))return void this.destroyFilter(i,"paramsUpdated");const s=i.getColDef().filterParams;t.filterPromise?t.filterPromise.then(o=>{!1===(!o?.refresh||o.refresh(Object.assign(Object.assign(Object.assign({},this.createFilterParams(i,i.getColDef())),{filterModifiedCallback:this.filterModifiedCallbackFactory(o,i),filterChangedCallback:this.filterChangedCallbackFactory(o,i),doesRowPassOtherFilter:c=>this.doesRowPassOtherFilters(o,c)}),s)))&&this.destroyFilter(i,"paramsUpdated")}):this.destroyFilter(i,"paramsUpdated")}setColumnFilterWrapper(e,t){const i=e.getColId();this.allColumnFilters.set(i,t),this.allColumnListeners.set(i,this.addManagedListener(e,ot.EVENT_COL_DEF_CHANGED,()=>this.checkDestroyFilter(i)))}areFilterCompsDifferent(e,t){if(!t||!e)return!0;const{componentClass:i}=e,{componentClass:n}=t;return!(i===n||i?.render&&n?.render&&i.render===n.render)}getAdvancedFilterModel(){return this.isAdvancedFilterEnabled()?this.advancedFilterService.getModel():null}setAdvancedFilterModel(e){if(this.isAdvancedFilterEnabled()){if(this.dataTypeService.isPendingInference())return void this.advancedFilterModelUpdateQueue.push(e);this.advancedFilterService.setModel(e??null),this.onFilterChanged({source:"advancedFilter"})}}showAdvancedFilterBuilder(e){!this.isAdvancedFilterEnabled()||this.advancedFilterService.getCtrl().toggleFilterBuilder(e,!0)}updateAdvancedFilterColumns(){!this.isAdvancedFilterEnabled()||this.advancedFilterService.updateValidity()&&this.onFilterChanged({source:"advancedFilter"})}hasFloatingFilters(){return!this.isAdvancedFilterEnabled()&&this.columnModel.getAllGridColumns().some(t=>t.getColDef().floatingFilter)}getFilterInstance(e,t){if(this.isAdvancedFilterEnabled())return void this.warnAdvancedFilters();const i=this.getFilterInstanceImpl(e,s=>{if(!t)return;const o=Mc(s);t(o)});return Mc(i)}getColumnFilterInstance(e){return new Promise(t=>{this.getFilterInstance(e,i=>{t(i)})})}getFilterInstanceImpl(e,t){const i=this.columnModel.getPrimaryColumn(e);if(!i)return;const n=this.getFilterComponent(i,"NO_UI"),s=n&&n.resolveNow(null,o=>o);return s?setTimeout(t,0,s):n&&n.then(o=>{t(o)}),s}warnAdvancedFilters(){st("Column Filter API methods have been disabled as Advanced Filters are enabled.")}setupAdvancedFilterHeaderComp(e){var t;null===(t=this.advancedFilterService)||void 0===t||t.getCtrl().setupHeaderComp(e)}getHeaderRowCount(){return this.isAdvancedFilterHeaderActive()?1:0}getHeaderHeight(){return this.isAdvancedFilterHeaderActive()?this.advancedFilterService.getCtrl().getHeaderHeight():0}processFilterModelUpdateQueue(){this.filterModelUpdateQueue.forEach(({model:e,source:t})=>this.setFilterModel(e,t)),this.filterModelUpdateQueue=[],this.columnFilterModelUpdateQueue.forEach(({key:e,model:t,resolve:i})=>{this.setColumnFilterModel(e,t).then(()=>i())}),this.columnFilterModelUpdateQueue=[],this.advancedFilterModelUpdateQueue.forEach(e=>this.setAdvancedFilterModel(e)),this.advancedFilterModelUpdateQueue=[]}getColumnFilterModel(e){const t=this.getFilterWrapper(e);return t?this.getModelFromFilterWrapper(t):null}setColumnFilterModel(e,t){if(this.isAdvancedFilterEnabled())return this.warnAdvancedFilters(),Promise.resolve();if(this.dataTypeService.isPendingInference()){let o=()=>{};const a=new Promise(c=>{o=c});return this.columnFilterModelUpdateQueue.push({key:e,model:t,resolve:o}),a}const i=this.columnModel.getPrimaryColumn(e),n=i?this.getOrCreateFilterWrapper(i,"NO_UI"):null;return n?(o=this.setModelOnFilterWrapper(n.filterPromise,t),new Promise(a=>{o.then(c=>a(c))})):Promise.resolve();var o}getFilterWrapper(e){var t;const i=this.columnModel.getPrimaryColumn(e);return i&&null!==(t=this.cachedFilter(i))&&void 0!==t?t:null}destroy(){super.destroy(),this.allColumnFilters.forEach(e=>this.disposeFilterWrapper(e,"gridDestroyed")),this.allColumnListeners.clear()}};Rl([P("valueService")],jo.prototype,"valueService",void 0),Rl([P("columnModel")],jo.prototype,"columnModel",void 0),Rl([P("rowModel")],jo.prototype,"rowModel",void 0),Rl([P("userComponentFactory")],jo.prototype,"userComponentFactory",void 0),Rl([P("rowRenderer")],jo.prototype,"rowRenderer",void 0),Rl([P("dataTypeService")],jo.prototype,"dataTypeService",void 0),Rl([P("quickFilterService")],jo.prototype,"quickFilterService",void 0),Rl([Pt("advancedFilterService")],jo.prototype,"advancedFilterService",void 0),Rl([Se],jo.prototype,"init",null),jo=Rl([He("filterManager")],jo);class YE extends Ne{constructor(e,t){super(e),this.ctrl=t}getCtrl(){return this.ctrl}}var Wf=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Ud extends YE{constructor(e){super(Ud.TEMPLATE,e)}postConstruct(){const e=this.getGui();this.ctrl.setComp({addOrRemoveCssClass:(i,n)=>this.addOrRemoveCssClass(i,n),addOrRemoveBodyCssClass:(i,n)=>this.eFloatingFilterBody.classList.toggle(i,n),setButtonWrapperDisplayed:i=>si(this.eButtonWrapper,i),setCompDetails:i=>this.setCompDetails(i),getFloatingFilterComp:()=>this.compPromise,setWidth:i=>e.style.width=i,setMenuIcon:i=>this.eButtonShowMainFilter.appendChild(i)},e,this.eButtonShowMainFilter,this.eFloatingFilterBody)}setCompDetails(e){if(!e)return this.destroyFloatingFilterComp(),void(this.compPromise=null);this.compPromise=e.newAgStackInstance(),this.compPromise.then(t=>this.afterCompCreated(t))}destroyFloatingFilterComp(){this.floatingFilterComp&&(this.eFloatingFilterBody.removeChild(this.floatingFilterComp.getGui()),this.floatingFilterComp=this.destroyBean(this.floatingFilterComp))}afterCompCreated(e){if(e){if(!this.isAlive())return void this.destroyBean(e);this.destroyFloatingFilterComp(),this.floatingFilterComp=e,this.eFloatingFilterBody.appendChild(e.getGui()),e.afterGuiAttached&&e.afterGuiAttached()}}}Ud.TEMPLATE='<div class="ag-header-cell ag-floating-filter" role="gridcell">\n            <div ref="eFloatingFilterBody" role="presentation"></div>\n            <div class="ag-floating-filter-button ag-hidden" ref="eButtonWrapper" role="presentation">\n                <button type="button" class="ag-button ag-floating-filter-button-button" ref="eButtonShowMainFilter" tabindex="-1"></button>\n            </div>\n        </div>',Wf([re("eFloatingFilterBody")],Ud.prototype,"eFloatingFilterBody",void 0),Wf([re("eButtonWrapper")],Ud.prototype,"eButtonWrapper",void 0),Wf([re("eButtonShowMainFilter")],Ud.prototype,"eButtonShowMainFilter",void 0),Wf([Se],Ud.prototype,"postConstruct",null),Wf([Js],Ud.prototype,"destroyFloatingFilterComp",null);var Gn=(()=>(function(r){r.AUTO_HEIGHT="ag-layout-auto-height",r.NORMAL="ag-layout-normal",r.PRINT="ag-layout-print"}(Gn||(Gn={})),Gn))();class xv extends Ee{constructor(e){super(),this.view=e}postConstruct(){this.addManagedPropertyListener("domLayout",this.updateLayoutClasses.bind(this)),this.updateLayoutClasses()}updateLayoutClasses(){const e=this.getDomLayout(),t={autoHeight:"autoHeight"===e,normal:"normal"===e,print:"print"===e};this.view.updateLayoutClasses(t.autoHeight?Gn.AUTO_HEIGHT:t.print?Gn.PRINT:Gn.NORMAL,t)}getDomLayout(){var e;const t=null!==(e=this.gridOptionsService.get("domLayout"))&&void 0!==e?e:"normal";return-1===["normal","print","autoHeight"].indexOf(t)?(st(`${t} is not valid for DOM Layout, valid values are 'normal', 'autoHeight', 'print'.`),"normal"):t}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Se],xv.prototype,"postConstruct",null);var xc=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Fs=(()=>(function(r){r[r.Vertical=0]="Vertical",r[r.Horizontal=1]="Horizontal"}(Fs||(Fs={})),Fs))(),fs=(()=>(function(r){r[r.Container=0]="Container",r[r.FakeContainer=1]="FakeContainer"}(fs||(fs={})),fs))();class Wd extends Ee{constructor(e){super(),this.lastScrollSource=[null,null],this.scrollLeft=-1,this.nextScrollTop=-1,this.scrollTop=-1,this.lastOffsetHeight=-1,this.lastScrollTop=-1,this.eBodyViewport=e,this.resetLastHScrollDebounced=ko(()=>this.lastScrollSource[Fs.Horizontal]=null,500),this.resetLastVScrollDebounced=ko(()=>this.lastScrollSource[Fs.Vertical]=null,500)}postConstruct(){this.enableRtl=this.gridOptionsService.get("enableRtl"),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this)),this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.centerRowContainerCtrl,this.onDisplayedColumnsWidthChanged(),this.addScrollListener()})}addScrollListener(){const e=this.ctrlsService.getFakeHScrollComp(),t=this.ctrlsService.getFakeVScrollComp();this.addManagedListener(this.centerRowContainerCtrl.getViewportElement(),"scroll",this.onHScroll.bind(this)),e.onScrollCallback(this.onFakeHScroll.bind(this));const i=this.gridOptionsService.get("debounceVerticalScrollbar"),n=i?ko(this.onVScroll.bind(this),100):this.onVScroll.bind(this),s=i?ko(this.onFakeVScroll.bind(this),100):this.onFakeVScroll.bind(this);this.addManagedListener(this.eBodyViewport,"scroll",n),t.onScrollCallback(s)}onDisplayedColumnsWidthChanged(){this.enableRtl&&this.horizontallyScrollHeaderCenterAndFloatingCenter()}horizontallyScrollHeaderCenterAndFloatingCenter(e){if(null==this.centerRowContainerCtrl)return;void 0===e&&(e=this.centerRowContainerCtrl.getCenterViewportScrollLeft());const i=this.enableRtl?e:-e,n=this.ctrlsService.getTopCenterRowContainerCtrl(),s=this.ctrlsService.getStickyTopCenterRowContainerCtrl(),o=this.ctrlsService.getBottomCenterRowContainerCtrl(),a=this.ctrlsService.getFakeHScrollComp();this.ctrlsService.getHeaderRowContainerCtrl().setHorizontalScroll(-i),o.setContainerTranslateX(i),n.setContainerTranslateX(i),s.setContainerTranslateX(i);const u=this.centerRowContainerCtrl.getViewportElement(),p=this.lastScrollSource[Fs.Horizontal]===fs.Container;e=Math.abs(e),p?a.setScrollPosition(e):Cv(u,e,this.enableRtl)}isControllingScroll(e,t){return null==this.lastScrollSource[t]?(this.lastScrollSource[t]=e,!0):this.lastScrollSource[t]===e}onFakeHScroll(){!this.isControllingScroll(fs.FakeContainer,Fs.Horizontal)||this.onHScrollCommon(fs.FakeContainer)}onHScroll(){!this.isControllingScroll(fs.Container,Fs.Horizontal)||this.onHScrollCommon(fs.Container)}onHScrollCommon(e){const t=this.centerRowContainerCtrl.getViewportElement(),{scrollLeft:i}=t;if(this.shouldBlockScrollUpdate(Fs.Horizontal,i,!0))return;let n;n=e===fs.Container?vv(t,this.enableRtl):this.ctrlsService.getFakeHScrollComp().getScrollPosition(),this.doHorizontalScroll(Math.round(n)),this.resetLastHScrollDebounced()}onFakeVScroll(){!this.isControllingScroll(fs.FakeContainer,Fs.Vertical)||this.onVScrollCommon(fs.FakeContainer)}onVScroll(){!this.isControllingScroll(fs.Container,Fs.Vertical)||this.onVScrollCommon(fs.Container)}onVScrollCommon(e){let t;t=e===fs.Container?this.eBodyViewport.scrollTop:this.ctrlsService.getFakeVScrollComp().getScrollPosition(),!this.shouldBlockScrollUpdate(Fs.Vertical,t,!0)&&(this.animationFrameService.setScrollTop(t),this.nextScrollTop=t,e===fs.Container?this.ctrlsService.getFakeVScrollComp().setScrollPosition(t):this.eBodyViewport.scrollTop=t,this.gridOptionsService.get("suppressAnimationFrame")?this.scrollGridIfNeeded():this.animationFrameService.schedule(),this.resetLastVScrollDebounced())}doHorizontalScroll(e){const t=this.ctrlsService.getFakeHScrollComp().getScrollPosition();this.scrollLeft===e&&e===t||(this.scrollLeft=e,this.fireScrollEvent(Fs.Horizontal),this.horizontallyScrollHeaderCenterAndFloatingCenter(e),this.centerRowContainerCtrl.onHorizontalViewportChanged(!0))}fireScrollEvent(e){const t={type:G.EVENT_BODY_SCROLL,direction:e===Fs.Horizontal?"horizontal":"vertical",left:this.scrollLeft,top:this.scrollTop};this.eventService.dispatchEvent(t),window.clearTimeout(this.scrollTimer),this.scrollTimer=void 0,this.scrollTimer=window.setTimeout(()=>{const i=Object.assign(Object.assign({},t),{type:G.EVENT_BODY_SCROLL_END});this.eventService.dispatchEvent(i)},100)}shouldBlockScrollUpdate(e,t,i=!1){return!(i&&!Vo())&&(e===Fs.Vertical?this.shouldBlockVerticalScroll(t):this.shouldBlockHorizontalScroll(t))}shouldBlockVerticalScroll(e){const t=Nd(this.eBodyViewport),{scrollHeight:i}=this.eBodyViewport;return e<0||e+t>i}shouldBlockHorizontalScroll(e){const t=this.centerRowContainerCtrl.getCenterWidth(),{scrollWidth:i}=this.centerRowContainerCtrl.getViewportElement();if(this.enableRtl&&Af()){if(e>0)return!0}else if(e<0)return!0;return Math.abs(e)+t>i}redrawRowsAfterScroll(){this.fireScrollEvent(Fs.Vertical)}checkScrollLeft(){this.scrollLeft!==this.centerRowContainerCtrl.getCenterViewportScrollLeft()&&this.onHScrollCommon(fs.Container)}scrollGridIfNeeded(){const e=this.scrollTop!=this.nextScrollTop;return e&&(this.scrollTop=this.nextScrollTop,this.redrawRowsAfterScroll()),e}setHorizontalScrollPosition(e,t=!1){const n=this.centerRowContainerCtrl.getViewportElement().scrollWidth-this.centerRowContainerCtrl.getCenterWidth();!t&&this.shouldBlockScrollUpdate(Fs.Horizontal,e)&&(e=this.enableRtl&&Af()?e>0?0:n:Math.min(Math.max(e,0),n)),Cv(this.centerRowContainerCtrl.getViewportElement(),Math.abs(e),this.enableRtl),this.doHorizontalScroll(e)}setVerticalScrollPosition(e){this.eBodyViewport.scrollTop=e}getVScrollPosition(){return this.lastScrollTop=this.eBodyViewport.scrollTop,this.lastOffsetHeight=this.eBodyViewport.offsetHeight,{top:this.lastScrollTop,bottom:this.lastScrollTop+this.lastOffsetHeight}}getApproximateVScollPosition(){return this.lastScrollTop>=0&&this.lastOffsetHeight>=0?{top:this.scrollTop,bottom:this.scrollTop+this.lastOffsetHeight}:this.getVScrollPosition()}getHScrollPosition(){return this.centerRowContainerCtrl.getHScrollPosition()}isHorizontalScrollShowing(){return this.centerRowContainerCtrl.isHorizontalScrollShowing()}scrollHorizontally(e){const t=this.centerRowContainerCtrl.getViewportElement().scrollLeft;return this.setHorizontalScrollPosition(t+e),this.centerRowContainerCtrl.getViewportElement().scrollLeft-t}scrollToTop(){this.eBodyViewport.scrollTop=0}ensureNodeVisible(e,t=null){const i=this.rowModel.getRowCount();let n=-1;for(let s=0;s<i;s++){const o=this.rowModel.getRow(s);if("function"==typeof e){if(o&&e(o)){n=s;break}}else if(e===o||e===o.data){n=s;break}}n>=0&&this.ensureIndexVisible(n,t)}ensureIndexVisible(e,t){if(this.gridOptionsService.isDomLayout("print"))return;const i=this.paginationProxy.getRowCount();if("number"!=typeof e||e<0||e>=i)return void console.warn("AG Grid: Invalid row index for ensureIndexVisible: "+e);const s=this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel");this.getFrameworkOverrides().wrapIncoming(()=>{s||this.paginationProxy.goToPageWithIndex(e);const a=this.ctrlsService.getGridBodyCtrl().getStickyTopHeight(),c=this.paginationProxy.getRow(e);let u;do{const p=c.rowTop,g=c.rowHeight,m=this.paginationProxy.getPixelOffset(),y=c.rowTop-m,b=y+c.rowHeight,_=this.getVScrollPosition(),E=this.heightScaler.getDivStretchOffset(),D=_.top+E,R=_.bottom+E,O=R-D,L=this.heightScaler.getScrollPositionForPixel(y),k=this.heightScaler.getScrollPositionForPixel(b-O),U=Math.min((L+k)/2,y),j=D+a>y,q=R<b;let J=null;"top"===t?J=L:"bottom"===t?J=k:"middle"===t?J=U:j?J=L-a:q&&(J=k),null!==J&&(this.setVerticalScrollPosition(J),this.rowRenderer.redraw({afterScroll:!0})),u=p!==c.rowTop||g!==c.rowHeight}while(u);this.animationFrameService.flushAllFrames()})}ensureColumnVisible(e,t="auto"){const i=this.columnModel.getGridColumn(e);if(!i||i.isPinned()||!this.columnModel.isColumnDisplayed(i))return;const n=this.getPositionedHorizontalScroll(i,t);this.getFrameworkOverrides().wrapIncoming(()=>{null!==n&&this.centerRowContainerCtrl.setCenterViewportScrollLeft(n),this.centerRowContainerCtrl.onHorizontalViewportChanged(),this.animationFrameService.flushAllFrames()})}setScrollPosition(e,t){this.getFrameworkOverrides().wrapIncoming(()=>{this.centerRowContainerCtrl.setCenterViewportScrollLeft(t),this.setVerticalScrollPosition(e),this.rowRenderer.redraw({afterScroll:!0}),this.animationFrameService.flushAllFrames()})}getPositionedHorizontalScroll(e,t){const{columnBeforeStart:i,columnAfterEnd:n}=this.isColumnOutsideViewport(e),s=this.centerRowContainerCtrl.getCenterWidth()<e.getActualWidth(),o=this.centerRowContainerCtrl.getCenterWidth(),a=this.enableRtl;let c=(a?i:n)||s,u=a?n:i;"auto"!==t&&(c="start"===t,u="end"===t);const p="middle"===t;if(c||u||p){const{colLeft:g,colMiddle:m,colRight:y}=this.getColumnBounds(e);return p?m-o/2:c?a?y:g:a?g-o:y-o}return null}isColumnOutsideViewport(e){const{start:t,end:i}=this.getViewportBounds(),{colLeft:n,colRight:s}=this.getColumnBounds(e),o=this.enableRtl;return{columnBeforeStart:o?t>s:i<s,columnAfterEnd:o?i<n:t>n}}getColumnBounds(e){const t=this.enableRtl,i=this.columnModel.getBodyContainerWidth(),n=e.getActualWidth(),s=e.getLeft(),o=t?-1:1,a=t?i-s:s;return{colLeft:a,colMiddle:a+n/2*o,colRight:a+n*o}}getViewportBounds(){const e=this.centerRowContainerCtrl.getCenterWidth(),t=this.centerRowContainerCtrl.getCenterViewportScrollLeft();return{start:t,end:e+t,width:e}}}xc([P("ctrlsService")],Wd.prototype,"ctrlsService",void 0),xc([P("animationFrameService")],Wd.prototype,"animationFrameService",void 0),xc([P("paginationProxy")],Wd.prototype,"paginationProxy",void 0),xc([P("rowModel")],Wd.prototype,"rowModel",void 0),xc([P("rowContainerHeightService")],Wd.prototype,"heightScaler",void 0),xc([P("rowRenderer")],Wd.prototype,"rowRenderer",void 0),xc([P("columnModel")],Wd.prototype,"columnModel",void 0),xc([Se],Wd.prototype,"postConstruct",null);var La=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class zo extends Ee{constructor(e){super(),this.isMultiRowDrag=!1,this.eContainer=e}postConstruct(){this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.ctrlsService.whenReady(()=>{const e=this.ctrlsService.getGridBodyCtrl();this.autoScrollService=new Ov({scrollContainer:e.getBodyViewportElement(),scrollAxis:"y",getVerticalPosition:()=>e.getScrollFeature().getVScrollPosition().top,setVerticalPosition:t=>e.getScrollFeature().setVerticalScrollPosition(t),onScrollCallback:()=>{this.onDragging(this.lastDraggingEvent)}})})}getContainer(){return this.eContainer}isInterestedIn(e){return e===sn.RowDrag}getIconName(){return this.gridOptionsService.get("rowDragManaged")&&this.shouldPreventRowMove()?St.ICON_NOT_ALLOWED:St.ICON_MOVE}shouldPreventRowMove(){return!!(this.columnModel.getRowGroupColumns().length||this.filterManager.isAnyFilterPresent()||this.sortController.isSortActive())}getRowNodes(e){if(!this.isFromThisGrid(e))return e.dragItem.rowNodes||[];const t=this.gridOptionsService.get("rowDragMultiRow"),i=[...this.selectionService.getSelectedNodes()].sort((s,o)=>null==s.rowIndex||null==o.rowIndex?0:this.getRowIndexNumber(s)-this.getRowIndexNumber(o)),n=e.dragItem.rowNode;return t&&-1!==i.indexOf(n)?(this.isMultiRowDrag=!0,i):(this.isMultiRowDrag=!1,[n])}onDragEnter(e){e.dragItem.rowNodes=this.getRowNodes(e),this.dispatchGridEvent(G.EVENT_ROW_DRAG_ENTER,e),this.getRowNodes(e).forEach(t=>{t.setDragging(!0)}),this.onEnterOrDragging(e)}onDragging(e){this.onEnterOrDragging(e)}isFromThisGrid(e){const{dragSourceDomDataKey:t}=e.dragSource;return t===this.gridOptionsService.getDomDataKey()}isDropZoneWithinThisGrid(e){const i=this.ctrlsService.getGridBodyCtrl().getGui(),{dropZoneTarget:n}=e;return!i.contains(n)}onEnterOrDragging(e){this.dispatchGridEvent(G.EVENT_ROW_DRAG_MOVE,e),this.lastDraggingEvent=e;const t=this.mouseEventService.getNormalisedPosition(e).y;this.gridOptionsService.get("rowDragManaged")&&this.doManagedDrag(e,t),this.autoScrollService.check(e.event)}doManagedDrag(e,t){const i=this.isFromThisGrid(e),n=this.gridOptionsService.get("rowDragManaged"),s=e.dragItem.rowNodes;n&&this.shouldPreventRowMove()||(this.gridOptionsService.get("suppressMoveWhenRowDragging")||!i?this.isDropZoneWithinThisGrid(e)||this.clientSideRowModel.highlightRowAtPixel(s[0],t):this.moveRows(s,t))}getRowIndexNumber(e){return parseInt(Xt(e.getRowIndexString().split("-")),10)}moveRowAndClearHighlight(e){const t=this.clientSideRowModel.getLastHighlightedRowNode(),i=t&&t.highlighted===Oc.Below,n=this.mouseEventService.getNormalisedPosition(e).y,s=e.dragItem.rowNodes;let o=i?1:0;if(this.isFromThisGrid(e))s.forEach(a=>{a.rowTop<n&&(o-=1)}),this.moveRows(s,n,o);else{const a=this.gridOptionsService.getCallback("getRowId");let c=this.clientSideRowModel.getRowIndexAtPixel(n)+1;this.clientSideRowModel.getHighlightPosition(n)===Oc.Above&&c--,this.clientSideRowModel.updateRowData({add:s.map(u=>u.data).filter(u=>!this.clientSideRowModel.getRowNode(a?a({data:u,level:0}):u.id)),addIndex:c})}this.clearRowHighlight()}clearRowHighlight(){this.clientSideRowModel.highlightRowAtPixel(null)}moveRows(e,t,i=0){this.clientSideRowModel.ensureRowsAtPixel(e,t,i)&&(this.focusService.clearFocusedCell(),this.rangeService&&this.rangeService.removeAllCellRanges())}addRowDropZone(e){if(!e.getContainer())return void st("addRowDropZone - A container target needs to be provided");if(this.dragAndDropService.findExternalZone(e))return void console.warn("AG Grid: addRowDropZone - target already exists in the list of DropZones. Use `removeRowDropZone` before adding it again.");let t={getContainer:e.getContainer};e.fromGrid?(e.fromGrid=void 0,t=e):(e.onDragEnter&&(t.onDragEnter=i=>{e.onDragEnter(this.draggingToRowDragEvent(G.EVENT_ROW_DRAG_ENTER,i))}),e.onDragLeave&&(t.onDragLeave=i=>{e.onDragLeave(this.draggingToRowDragEvent(G.EVENT_ROW_DRAG_LEAVE,i))}),e.onDragging&&(t.onDragging=i=>{e.onDragging(this.draggingToRowDragEvent(G.EVENT_ROW_DRAG_MOVE,i))}),e.onDragStop&&(t.onDragStop=i=>{e.onDragStop(this.draggingToRowDragEvent(G.EVENT_ROW_DRAG_END,i))})),this.dragAndDropService.addDropTarget(Object.assign({isInterestedIn:i=>i===sn.RowDrag,getIconName:()=>St.ICON_MOVE,external:!0},t))}getRowDropZone(e){const t=this.getContainer.bind(this),i=this.onDragEnter.bind(this),n=this.onDragLeave.bind(this),s=this.onDragging.bind(this),o=this.onDragStop.bind(this);return e?{getContainer:t,onDragEnter:e.onDragEnter?a=>{i(a),e.onDragEnter(this.draggingToRowDragEvent(G.EVENT_ROW_DRAG_ENTER,a))}:i,onDragLeave:e.onDragLeave?a=>{n(a),e.onDragLeave(this.draggingToRowDragEvent(G.EVENT_ROW_DRAG_LEAVE,a))}:n,onDragging:e.onDragging?a=>{s(a),e.onDragging(this.draggingToRowDragEvent(G.EVENT_ROW_DRAG_MOVE,a))}:s,onDragStop:e.onDragStop?a=>{o(a),e.onDragStop(this.draggingToRowDragEvent(G.EVENT_ROW_DRAG_END,a))}:o,fromGrid:!0}:{getContainer:t,onDragEnter:i,onDragLeave:n,onDragging:s,onDragStop:o,fromGrid:!0}}draggingToRowDragEvent(e,t){const i=this.mouseEventService.getNormalisedPosition(t).y;let o,a,s=-1;switch(i>this.paginationProxy.getCurrentPageHeight()||(s=this.rowModel.getRowIndexAtPixel(i),o=this.rowModel.getRow(s)),t.vDirection){case Oh.Down:a="down";break;case Oh.Up:a="up";break;default:a=null}return this.gridOptionsService.addGridCommonParams({type:e,event:t.event,node:t.dragItem.rowNode,nodes:t.dragItem.rowNodes,overIndex:s,overNode:o,y:i,vDirection:a})}dispatchGridEvent(e,t){const i=this.draggingToRowDragEvent(e,t);this.eventService.dispatchEvent(i)}onDragLeave(e){this.dispatchGridEvent(G.EVENT_ROW_DRAG_LEAVE,e),this.stopDragging(e),this.gridOptionsService.get("rowDragManaged")&&this.clearRowHighlight(),this.isFromThisGrid(e)&&(this.isMultiRowDrag=!1)}onDragStop(e){this.dispatchGridEvent(G.EVENT_ROW_DRAG_END,e),this.stopDragging(e),this.gridOptionsService.get("rowDragManaged")&&(this.gridOptionsService.get("suppressMoveWhenRowDragging")||!this.isFromThisGrid(e))&&!this.isDropZoneWithinThisGrid(e)&&this.moveRowAndClearHighlight(e)}stopDragging(e){this.autoScrollService.ensureCleared(),this.getRowNodes(e).forEach(t=>{t.setDragging(!1)})}}La([P("dragAndDropService")],zo.prototype,"dragAndDropService",void 0),La([P("rowModel")],zo.prototype,"rowModel",void 0),La([P("paginationProxy")],zo.prototype,"paginationProxy",void 0),La([P("columnModel")],zo.prototype,"columnModel",void 0),La([P("focusService")],zo.prototype,"focusService",void 0),La([P("sortController")],zo.prototype,"sortController",void 0),La([P("filterManager")],zo.prototype,"filterManager",void 0),La([P("selectionService")],zo.prototype,"selectionService",void 0),La([P("mouseEventService")],zo.prototype,"mouseEventService",void 0),La([P("ctrlsService")],zo.prototype,"ctrlsService",void 0),La([Pt("rangeService")],zo.prototype,"rangeService",void 0),La([Se],zo.prototype,"postConstruct",null);var mo=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},jf=(()=>(function(r){r.ANIMATION_ON="ag-row-animation",r.ANIMATION_OFF="ag-row-no-animation"}(jf||(jf={})),jf))();const xP="ag-force-vertical-scroll";class Kr extends Ee{constructor(){super(...arguments),this.stickyTopHeight=0}getScrollFeature(){return this.bodyScrollFeature}getBodyViewportElement(){return this.eBodyViewport}setComp(e,t,i,n,s,o){this.comp=e,this.eGridBody=t,this.eBodyViewport=i,this.eTop=n,this.eBottom=s,this.eStickyTop=o,this.setCellTextSelection(this.gridOptionsService.get("enableCellTextSelection")),this.addManagedPropertyListener("enableCellTextSelection",a=>this.setCellTextSelection(a.currentValue)),this.createManagedBean(new xv(this.comp)),this.bodyScrollFeature=this.createManagedBean(new Wd(this.eBodyViewport)),this.addRowDragListener(),this.setupRowAnimationCssClass(),this.addEventListeners(),this.addFocusListeners([n,i,s,o]),this.onGridColumnsChanged(),this.addBodyViewportListener(),this.setFloatingHeights(),this.disableBrowserDragging(),this.addStopEditingWhenGridLosesFocus(),this.filterManager.setupAdvancedFilterHeaderComp(n),this.ctrlsService.registerGridBodyCtrl(this)}getComp(){return this.comp}addEventListeners(){this.addManagedListener(this.eventService,G.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}addFocusListeners(e){e.forEach(t=>{this.addManagedListener(t,"focusin",i=>{const{target:n}=i,s=wh(n,"ag-root",t);t.classList.toggle("ag-has-focus",!s)}),this.addManagedListener(t,"focusout",i=>{const{target:n,relatedTarget:s}=i,o=t.contains(s),a=wh(s,"ag-root",t);wh(n,"ag-root",t)||(!o||a)&&t.classList.remove("ag-has-focus")})})}setColumnMovingCss(e){this.comp.setColumnMovingCss("ag-column-moving",e)}setCellTextSelection(e=!1){this.comp.setCellSelectableCss("ag-selectable",e)}onScrollVisibilityChanged(){const e=this.scrollVisibleService.isVerticalScrollShowing();this.setVerticalScrollPaddingVisible(e),this.setStickyTopWidth(e);const n=`calc(100% + ${(e&&this.gridOptionsService.getScrollbarWidth()||0)+(Tf()?16:0)}px)`;this.animationFrameService.requestAnimationFrame(()=>this.comp.setBodyViewportWidth(n))}onGridColumnsChanged(){const e=this.columnModel.getAllGridColumns();this.comp.setColumnCount(e.length)}disableBrowserDragging(){this.addManagedListener(this.eGridBody,"dragstart",e=>{if(e.target instanceof HTMLImageElement)return e.preventDefault(),!1})}addStopEditingWhenGridLosesFocus(){if(!this.gridOptionsService.get("stopEditingWhenCellsLoseFocus"))return;const e=i=>{const n=i.relatedTarget;if(null===pv(n))return void this.rowRenderer.stopEditing();let s=t.some(o=>o.contains(n))&&this.mouseEventService.isElementInThisGrid(n);if(!s){const o=this.popupService;s=o.getActivePopups().some(a=>a.contains(n))||o.isElementWithinCustomPopup(n)}s||this.rowRenderer.stopEditing()},t=[this.eBodyViewport,this.eBottom,this.eTop,this.eStickyTop];t.forEach(i=>this.addManagedListener(i,"focusout",e))}updateRowCount(){const e=this.headerNavigationService.getHeaderRowCount()+this.filterManager.getHeaderRowCount(),t=this.rowModel.isLastRowIndexKnown()?this.rowModel.getRowCount():-1;this.comp.setRowCount(-1===t?-1:e+t)}registerBodyViewportResizeListener(e){this.comp.registerBodyViewportResizeListener(e)}setVerticalScrollPaddingVisible(e){this.comp.setPinnedTopBottomOverflowY(e?"scroll":"hidden")}isVerticalScrollShowing(){const e=this.gridOptionsService.get("alwaysShowVerticalScroll"),t=e?xP:null,i=this.gridOptionsService.isDomLayout("normal");return this.comp.setAlwaysVerticalScrollClass(t,e),e||i&&Zx(this.eBodyViewport)}setupRowAnimationCssClass(){const e=()=>{const t=this.gridOptionsService.isAnimateRows()&&!this.rowContainerHeightService.isStretching();this.comp.setRowAnimationCssOnBodyViewport(t?jf.ANIMATION_ON:jf.ANIMATION_OFF,t)};e(),this.addManagedListener(this.eventService,G.EVENT_HEIGHT_SCALE_CHANGED,e),this.addManagedPropertyListener("animateRows",e)}getGridBodyElement(){return this.eGridBody}addBodyViewportListener(){const e=this.onBodyViewportContextMenu.bind(this);this.addManagedListener(this.eBodyViewport,"contextmenu",e),this.mockContextMenuForIPad(e),this.addManagedListener(this.eBodyViewport,"wheel",this.onBodyViewportWheel.bind(this)),this.addManagedListener(this.eStickyTop,"wheel",this.onStickyTopWheel.bind(this)),this.addFullWidthContainerWheelListener()}addFullWidthContainerWheelListener(){const e=this.eBodyViewport.querySelector(".ag-full-width-container"),t=this.eBodyViewport.querySelector(".ag-center-cols-viewport");e&&t&&this.addManagedListener(e,"wheel",i=>this.onFullWidthContainerWheel(i,t))}onFullWidthContainerWheel(e,t){!e.deltaX||Math.abs(e.deltaY)>Math.abs(e.deltaX)||!this.mouseEventService.isEventFromThisGrid(e)||(e.preventDefault(),t.scrollBy({left:e.deltaX}))}onBodyViewportContextMenu(e,t,i){if(!e&&!i)return;this.gridOptionsService.get("preventDefaultOnContextMenu")&&(e||i).preventDefault();const{target:n}=e||t;(n===this.eBodyViewport||n===this.ctrlsService.getCenterRowContainerCtrl().getViewportElement())&&this.menuService.showContextMenu({mouseEvent:e,touchEvent:i,value:null,anchorToElement:this.eGridBody})}mockContextMenuForIPad(e){if(!Vo())return;const t=new Ln(this.eBodyViewport);this.addManagedListener(t,Ln.EVENT_LONG_TAP,n=>{e(void 0,n.touchStart,n.touchEvent)}),this.addDestroyFunc(()=>t.destroy())}onBodyViewportWheel(e){!this.gridOptionsService.get("suppressScrollWhenPopupsAreOpen")||this.popupService.hasAnchoredPopup()&&e.preventDefault()}onStickyTopWheel(e){e.preventDefault(),e.offsetY&&this.scrollVertically(e.deltaY)}getGui(){return this.eGridBody}scrollVertically(e){const t=this.eBodyViewport.scrollTop;return this.bodyScrollFeature.setVerticalScrollPosition(t+e),this.eBodyViewport.scrollTop-t}addRowDragListener(){this.rowDragFeature=this.createManagedBean(new zo(this.eBodyViewport)),this.dragAndDropService.addDropTarget(this.rowDragFeature)}getRowDragFeature(){return this.rowDragFeature}onPinnedRowDataChanged(){this.setFloatingHeights()}setFloatingHeights(){const{pinnedRowModel:e}=this;let t=e.getPinnedTopTotalHeight(),i=e.getPinnedBottomTotalHeight();this.comp.setTopHeight(t),this.comp.setBottomHeight(i),this.comp.setTopDisplay(t?"inherit":"none"),this.comp.setBottomDisplay(i?"inherit":"none"),this.setStickyTopOffsetTop()}setStickyTopHeight(e=0){this.comp.setStickyTopHeight(`${e}px`),this.stickyTopHeight=e}getStickyTopHeight(){return this.stickyTopHeight}setStickyTopWidth(e){if(e){const t=this.gridOptionsService.getScrollbarWidth();this.comp.setStickyTopWidth(`calc(100% - ${t}px)`)}else this.comp.setStickyTopWidth("100%")}onHeaderHeightChanged(){this.setStickyTopOffsetTop()}setStickyTopOffsetTop(){const t=this.ctrlsService.getGridHeaderCtrl().getHeaderHeight()+this.filterManager.getHeaderHeight(),i=this.pinnedRowModel.getPinnedTopTotalHeight();let n=0;t>0&&(n+=t+1),i>0&&(n+=i+1),this.comp.setStickyTopTop(`${n}px`)}sizeColumnsToFit(e,t){const n=this.isVerticalScrollShowing()?this.gridOptionsService.getScrollbarWidth():0,o=Ec(this.eGridBody)-n;o>0?this.columnModel.sizeColumnsToFit(o,"sizeColumnsToFit",!1,e):void 0===t?window.setTimeout(()=>{this.sizeColumnsToFit(e,100)},0):100===t?window.setTimeout(()=>{this.sizeColumnsToFit(e,500)},100):500===t?window.setTimeout(()=>{this.sizeColumnsToFit(e,-1)},500):console.warn("AG Grid: tried to call sizeColumnsToFit() but the grid is coming back with zero width, maybe the grid is not visible yet on the screen?")}addScrollEventListener(e){this.eBodyViewport.addEventListener("scroll",e,{passive:!0})}removeScrollEventListener(e){this.eBodyViewport.removeEventListener("scroll",e)}}mo([P("animationFrameService")],Kr.prototype,"animationFrameService",void 0),mo([P("rowContainerHeightService")],Kr.prototype,"rowContainerHeightService",void 0),mo([P("ctrlsService")],Kr.prototype,"ctrlsService",void 0),mo([P("columnModel")],Kr.prototype,"columnModel",void 0),mo([P("scrollVisibleService")],Kr.prototype,"scrollVisibleService",void 0),mo([P("menuService")],Kr.prototype,"menuService",void 0),mo([P("headerNavigationService")],Kr.prototype,"headerNavigationService",void 0),mo([P("dragAndDropService")],Kr.prototype,"dragAndDropService",void 0),mo([P("pinnedRowModel")],Kr.prototype,"pinnedRowModel",void 0),mo([P("rowRenderer")],Kr.prototype,"rowRenderer",void 0),mo([P("popupService")],Kr.prototype,"popupService",void 0),mo([P("mouseEventService")],Kr.prototype,"mouseEventService",void 0),mo([P("rowModel")],Kr.prototype,"rowModel",void 0),mo([P("filterManager")],Kr.prototype,"filterManager",void 0);var jd=(()=>(function(r){r[r.FILL=0]="FILL",r[r.RANGE=1]="RANGE"}(jd||(jd={})),jd))(),_n=(()=>(function(r){r[r.VALUE=0]="VALUE",r[r.DIMENSION=1]="DIMENSION"}(_n||(_n={})),_n))();const Fh="ag-cell-range-selected";class FP{constructor(e,t){this.beans=e,this.cellCtrl=t}setComp(e,t){this.cellComp=e,this.eGui=t,this.onRangeSelectionChanged()}onRangeSelectionChanged(){!this.cellComp||(this.rangeCount=this.beans.rangeService.getCellRangeCount(this.cellCtrl.getCellPosition()),this.hasChartRange=this.getHasChartRange(),this.cellComp.addOrRemoveCssClass(Fh,0!==this.rangeCount),this.cellComp.addOrRemoveCssClass(`${Fh}-1`,1===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${Fh}-2`,2===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${Fh}-3`,3===this.rangeCount),this.cellComp.addOrRemoveCssClass(`${Fh}-4`,this.rangeCount>=4),this.cellComp.addOrRemoveCssClass("ag-cell-range-chart",this.hasChartRange),Ef(this.eGui,this.rangeCount>0||void 0),this.cellComp.addOrRemoveCssClass("ag-cell-range-single-cell",this.isSingleCell()),this.updateRangeBorders(),this.refreshHandle())}updateRangeBorders(){const e=this.getRangeBorders(),t=this.isSingleCell(),n=!t&&e.right,s=!t&&e.bottom,o=!t&&e.left;this.cellComp.addOrRemoveCssClass("ag-cell-range-top",!t&&e.top),this.cellComp.addOrRemoveCssClass("ag-cell-range-right",n),this.cellComp.addOrRemoveCssClass("ag-cell-range-bottom",s),this.cellComp.addOrRemoveCssClass("ag-cell-range-left",o)}isSingleCell(){const{rangeService:e}=this.beans;return 1===this.rangeCount&&e&&!e.isMoreThanOneCell()}getHasChartRange(){const{rangeService:e}=this.beans;if(!this.rangeCount||!e)return!1;const t=e.getCellRanges();return t.length>0&&t.every(i=>Go([_n.DIMENSION,_n.VALUE],i.type))}updateRangeBordersIfRangeCount(){this.rangeCount>0&&(this.updateRangeBorders(),this.refreshHandle())}getRangeBorders(){const e=this.beans.gridOptionsService.get("enableRtl");let t=!1,i=!1,n=!1,s=!1;const o=this.cellCtrl.getCellPosition().column,{rangeService:a,columnModel:c}=this.beans;let u,p;e?(u=c.getDisplayedColAfter(o),p=c.getDisplayedColBefore(o)):(u=c.getDisplayedColBefore(o),p=c.getDisplayedColAfter(o));const g=a.getCellRanges().filter(m=>a.isCellInSpecificRange(this.cellCtrl.getCellPosition(),m));u||(s=!0),p||(i=!0);for(let m=0;m<g.length&&!(t&&i&&n&&s);m++){const y=g[m],b=a.getRangeStartRow(y),_=a.getRangeEndRow(y);!t&&this.beans.rowPositionUtils.sameRow(b,this.cellCtrl.getCellPosition())&&(t=!0),!n&&this.beans.rowPositionUtils.sameRow(_,this.cellCtrl.getCellPosition())&&(n=!0),!s&&u&&y.columns.indexOf(u)<0&&(s=!0),!i&&p&&y.columns.indexOf(p)<0&&(i=!0)}return{top:t,right:i,bottom:n,left:s}}refreshHandle(){if(!this.beans.rangeService||this.beans.context.isDestroyed())return;const e=this.shouldHaveSelectionHandle();this.selectionHandle&&!e&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),e&&this.addSelectionHandle(),this.cellComp.addOrRemoveCssClass("ag-cell-range-handle",!!this.selectionHandle)}shouldHaveSelectionHandle(){const{gridOptionsService:e,rangeService:t}=this.beans,i=t.getCellRanges(),n=i.length;if(this.rangeCount<1||n<1)return!1;const s=Xt(i),o=this.cellCtrl.getCellPosition(),a=e.get("enableFillHandle")&&!this.cellCtrl.isSuppressFillHandle(),c=e.get("enableRangeHandle");let u=1===n&&!this.cellCtrl.isEditing()&&(a||c);if(this.hasChartRange){const g=i[0].type===_n.DIMENSION&&t.isCellInSpecificRange(o,i[0]);this.cellComp.addOrRemoveCssClass("ag-cell-range-chart-category",g),u=s.type===_n.VALUE}return u&&null!=s.endRow&&t.isContiguousRange(s)&&t.isBottomRightCell(s,o)}addSelectionHandle(){const{gridOptionsService:e,rangeService:t}=this.beans,i=Xt(t.getCellRanges()).type,s=e.get("enableFillHandle")&&gt(i)?jd.FILL:jd.RANGE;this.selectionHandle&&this.selectionHandle.getType()!==s&&(this.selectionHandle=this.beans.context.destroyBean(this.selectionHandle)),this.selectionHandle||(this.selectionHandle=this.beans.selectionHandleFactory.createSelectionHandle(s)),this.selectionHandle.refresh(this.cellCtrl)}destroy(){this.beans.context.destroyBean(this.selectionHandle)}}class NP extends Ee{constructor(e,t){super(),this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode(),this.setupColSpan(),this.setupRowSpan()}setupRowSpan(){this.rowSpan=this.column.getRowSpan(this.rowNode),this.addManagedListener(this.beans.eventService,G.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}setComp(e){this.eGui=e,this.onLeftChanged(),this.onWidthChanged(),this.applyRowSpan()}onNewColumnsLoaded(){const e=this.column.getRowSpan(this.rowNode);this.rowSpan!==e&&(this.rowSpan=e,this.applyRowSpan(!0))}onDisplayColumnsChanged(){const e=this.getColSpanningList();yc(this.colsSpanning,e)||(this.colsSpanning=e,this.onWidthChanged(),this.onLeftChanged())}setupColSpan(){null!=this.column.getColDef().colSpan&&(this.colsSpanning=this.getColSpanningList(),this.addManagedListener(this.beans.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayColumnsChanged.bind(this)),this.addManagedListener(this.beans.eventService,G.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onWidthChanged.bind(this)))}onWidthChanged(){if(!this.eGui)return;const e=this.getCellWidth();this.eGui.style.width=`${e}px`}getCellWidth(){return this.colsSpanning?this.colsSpanning.reduce((e,t)=>e+t.getActualWidth(),0):this.column.getActualWidth()}getColSpanningList(){const e=this.column.getColSpan(this.rowNode),t=[];if(1===e)t.push(this.column);else{let i=this.column;const n=this.column.getPinned();for(let s=0;i&&s<e&&(t.push(i),i=this.beans.columnModel.getDisplayedColAfter(i),i&&!gt(i)&&n===i.getPinned());s++);}return t}onLeftChanged(){if(!this.eGui)return;const e=this.modifyLeftForPrintLayout(this.getCellLeft());this.eGui.style.left=e+"px"}getCellLeft(){let e;return e=this.beans.gridOptionsService.get("enableRtl")&&this.colsSpanning?Xt(this.colsSpanning):this.column,e.getLeft()}modifyLeftForPrintLayout(e){if(!this.cellCtrl.isPrintLayout()||"left"===this.column.getPinned())return e;const t=this.beans.columnModel.getDisplayedColumnsLeftWidth();return"right"===this.column.getPinned()?t+this.beans.columnModel.getBodyContainerWidth()+(e||0):t+(e||0)}applyRowSpan(e){if(1===this.rowSpan&&!e)return;const i=this.beans.gridOptionsService.getRowHeightAsNumber()*this.rowSpan;this.eGui.style.height=`${i}px`,this.eGui.style.zIndex="1"}destroy(){super.destroy()}}class hA extends Ee{constructor(e,t){super(),this.staticClasses=[],this.cellCtrl=e,this.beans=t,this.column=e.getColumn(),this.rowNode=e.getRowNode()}setComp(e){this.cellComp=e,this.applyUserStyles(),this.applyCellClassRules(),this.applyClassesFromColDef()}applyCellClassRules(){const e=this.column.getColDef(),{cellClassRules:t}=e,i=this.beans.gridOptionsService.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,colDef:e,column:this.column,rowIndex:this.rowNode.rowIndex});this.beans.stylingService.processClassRules(t===this.cellClassRules?void 0:this.cellClassRules,t,i,n=>this.cellComp.addOrRemoveCssClass(n,!0),n=>this.cellComp.addOrRemoveCssClass(n,!1)),this.cellClassRules=t}applyUserStyles(){const e=this.column.getColDef();if(!e.cellStyle)return;let t;if("function"==typeof e.cellStyle){const i=this.beans.gridOptionsService.addGridCommonParams({column:this.column,value:this.cellCtrl.getValue(),colDef:e,data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex});t=(0,e.cellStyle)(i)}else t=e.cellStyle;t&&this.cellComp.setUserStyles(t)}applyClassesFromColDef(){const e=this.column.getColDef(),t=this.beans.gridOptionsService.addGridCommonParams({value:this.cellCtrl.getValue(),data:this.rowNode.data,node:this.rowNode,column:this.column,colDef:e,rowIndex:this.rowNode.rowIndex});this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!1)),this.staticClasses=this.beans.stylingService.getStaticCellClasses(e,t),this.staticClasses.length&&this.staticClasses.forEach(i=>this.cellComp.addOrRemoveCssClass(i,!0))}destroy(){super.destroy()}}class KS extends Ee{constructor(e,t){super(),this.ctrl=e,this.beans=t}setComp(e){this.eGui=e,this.setupTooltip()}setBrowserTooltip(e){const t="title";null!=e&&""!=e?this.eGui.setAttribute(t,e):this.eGui.removeAttribute(t)}setupTooltip(){this.browserTooltips=this.beans.gridOptionsService.get("enableBrowserTooltips"),this.updateTooltipText(),this.browserTooltips?this.setBrowserTooltip(this.tooltip):this.createTooltipFeatureIfNeeded()}updateTooltipText(){this.tooltip=this.ctrl.getTooltipValue()}createTooltipFeatureIfNeeded(){var e,t,i,n;null==this.genericTooltipFeature&&(this.genericTooltipFeature=this.createManagedBean(new Is({getTooltipParams:()=>this.getTooltipParams(),getGui:()=>this.ctrl.getGui()},null===(t=(e=this.ctrl).getTooltipShowDelayOverride)||void 0===t?void 0:t.call(e),null===(n=(i=this.ctrl).getTooltipHideDelayOverride)||void 0===n?void 0:n.call(i)),this.beans.context))}refreshToolTip(){this.updateTooltipText(),this.browserTooltips&&this.setBrowserTooltip(this.tooltip)}getTooltipParams(){const e=this.ctrl,t=e.getColumn?e.getColumn():void 0,i=e.getColDef?e.getColDef():void 0,n=e.getRowNode?e.getRowNode():void 0;return{location:e.getLocation(),colDef:i,column:t,rowIndex:e.getRowIndex?e.getRowIndex():void 0,node:n,data:n?n.data:void 0,value:this.getTooltipText(),valueFormatted:e.getValueFormatted?e.getValueFormatted():void 0,hideTooltipCallback:()=>this.genericTooltipFeature.hideTooltip(!0)}}getTooltipText(){return this.tooltip}destroy(){super.destroy()}}var At=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let bt=class{postConstruct(){this.gridOptionsService.isRowModelType("clientSide")&&(this.clientSideRowModel=this.rowModel),this.gridOptionsService.isRowModelType("serverSide")&&(this.serverSideRowModel=this.rowModel)}};At([P("resizeObserverService")],bt.prototype,"resizeObserverService",void 0),At([P("paginationProxy")],bt.prototype,"paginationProxy",void 0),At([P("context")],bt.prototype,"context",void 0),At([P("columnApi")],bt.prototype,"columnApi",void 0),At([P("gridApi")],bt.prototype,"gridApi",void 0),At([P("gridOptionsService")],bt.prototype,"gridOptionsService",void 0),At([P("expressionService")],bt.prototype,"expressionService",void 0),At([P("environment")],bt.prototype,"environment",void 0),At([P("rowRenderer")],bt.prototype,"rowRenderer",void 0),At([P("templateService")],bt.prototype,"templateService",void 0),At([P("valueService")],bt.prototype,"valueService",void 0),At([P("eventService")],bt.prototype,"eventService",void 0),At([P("columnModel")],bt.prototype,"columnModel",void 0),At([P("headerNavigationService")],bt.prototype,"headerNavigationService",void 0),At([P("navigationService")],bt.prototype,"navigationService",void 0),At([P("columnAnimationService")],bt.prototype,"columnAnimationService",void 0),At([Pt("rangeService")],bt.prototype,"rangeService",void 0),At([P("focusService")],bt.prototype,"focusService",void 0),At([P("popupService")],bt.prototype,"popupService",void 0),At([P("valueFormatterService")],bt.prototype,"valueFormatterService",void 0),At([P("stylingService")],bt.prototype,"stylingService",void 0),At([P("columnHoverService")],bt.prototype,"columnHoverService",void 0),At([P("userComponentFactory")],bt.prototype,"userComponentFactory",void 0),At([P("userComponentRegistry")],bt.prototype,"userComponentRegistry",void 0),At([P("animationFrameService")],bt.prototype,"animationFrameService",void 0),At([P("dragService")],bt.prototype,"dragService",void 0),At([P("dragAndDropService")],bt.prototype,"dragAndDropService",void 0),At([P("sortController")],bt.prototype,"sortController",void 0),At([P("filterManager")],bt.prototype,"filterManager",void 0),At([P("rowContainerHeightService")],bt.prototype,"rowContainerHeightService",void 0),At([P("frameworkOverrides")],bt.prototype,"frameworkOverrides",void 0),At([P("cellPositionUtils")],bt.prototype,"cellPositionUtils",void 0),At([P("rowPositionUtils")],bt.prototype,"rowPositionUtils",void 0),At([P("selectionService")],bt.prototype,"selectionService",void 0),At([Pt("selectionHandleFactory")],bt.prototype,"selectionHandleFactory",void 0),At([P("rowCssClassCalculator")],bt.prototype,"rowCssClassCalculator",void 0),At([P("rowModel")],bt.prototype,"rowModel",void 0),At([P("ctrlsService")],bt.prototype,"ctrlsService",void 0),At([P("ctrlsFactory")],bt.prototype,"ctrlsFactory",void 0),At([P("agStackComponentsRegistry")],bt.prototype,"agStackComponentsRegistry",void 0),At([P("valueCache")],bt.prototype,"valueCache",void 0),At([P("rowNodeEventThrottle")],bt.prototype,"rowNodeEventThrottle",void 0),At([P("localeService")],bt.prototype,"localeService",void 0),At([P("valueParserService")],bt.prototype,"valueParserService",void 0),At([P("syncService")],bt.prototype,"syncService",void 0),At([P("ariaAnnouncementService")],bt.prototype,"ariaAnnouncementService",void 0),At([Se],bt.prototype,"postConstruct",null),bt=At([He("beans")],bt);class zf extends bt{constructor(e,t,i){super(),this.cellCtrl=e,this.beans=t,this.column=i}onMouseEvent(e,t){if(!yl(t))switch(e){case"click":this.onCellClicked(t);break;case"mousedown":case"touchstart":this.onMouseDown(t);break;case"dblclick":this.onCellDoubleClicked(t);break;case"mouseout":this.onMouseOut(t);break;case"mouseover":this.onMouseOver(t)}}onCellClicked(e){if(this.isDoubleClickOnIPad())return this.onCellDoubleClicked(e),void e.preventDefault();const{eventService:t,rangeService:i,gridOptionsService:n}=this.beans;i&&(e.ctrlKey||e.metaKey)&&i.getCellRangeCount(this.cellCtrl.getCellPosition())>1&&i.intersectLastRange(!0);const o=this.cellCtrl.createEvent(e,G.EVENT_CELL_CLICKED);t.dispatchEvent(o);const a=this.column.getColDef();a.onCellClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{a.onCellClicked(o)})},0),(n.get("singleClickEdit")||a.singleClickEdit)&&!n.get("suppressClickEdit")&&(!e.shiftKey||0==i?.getCellRanges().length)&&this.cellCtrl.startRowOrCellEdit()}isDoubleClickOnIPad(){if(!Vo()||Jw("dblclick"))return!1;const e=(new Date).getTime(),t=e-this.lastIPadMouseClickEvent<200;return this.lastIPadMouseClickEvent=e,t}onCellDoubleClicked(e){const t=this.column.getColDef(),i=this.cellCtrl.createEvent(e,G.EVENT_CELL_DOUBLE_CLICKED);this.beans.eventService.dispatchEvent(i),"function"==typeof t.onCellDoubleClicked&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{t.onCellDoubleClicked(i)})},0),!this.beans.gridOptionsService.get("singleClickEdit")&&!this.beans.gridOptionsService.get("suppressClickEdit")&&this.cellCtrl.startRowOrCellEdit(null,e)}onMouseDown(e){const{ctrlKey:t,metaKey:i,shiftKey:n}=e,s=e.target,{cellCtrl:o,beans:a}=this,{eventService:c,rangeService:u,focusService:p}=a;if(this.isRightClickInExistingRange(e))return;const g=u&&0!=u.getCellRanges().length;if(!n||!g){const m=er()&&!o.isEditing()&&!wE(s);o.focusCell(m)}if(n&&g&&!p.isCellFocused(o.getCellPosition())){e.preventDefault();const m=p.getFocusedCell();if(m){const{column:y,rowIndex:b,rowPinned:_}=m,D=a.rowRenderer.getRowByPosition({rowIndex:b,rowPinned:_})?.getCellCtrl(y);D?.isEditing()&&D.stopEditing(),p.setFocusedCell({column:y,rowIndex:b,rowPinned:_,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}}if(!this.containsWidget(s)){if(u){const m=this.cellCtrl.getCellPosition();n?u.extendLatestRangeToCell(m):u.setRangeToCell(m,t||i)}c.dispatchEvent(this.cellCtrl.createEvent(e,G.EVENT_CELL_MOUSE_DOWN))}}isRightClickInExistingRange(e){const{rangeService:t}=this.beans;if(t){const i=t.isCellInAnyRange(this.cellCtrl.getCellPosition()),n=2===e.button||e.ctrlKey&&this.beans.gridOptionsService.get("allowContextMenuWithControlKey");if(i&&n)return!0}return!1}containsWidget(e){return wh(e,"ag-selection-checkbox",3)}onMouseOut(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,G.EVENT_CELL_MOUSE_OUT);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.clearMouseOver()}onMouseOver(e){if(this.mouseStayingInsideCell(e))return;const t=this.cellCtrl.createEvent(e,G.EVENT_CELL_MOUSE_OVER);this.beans.eventService.dispatchEvent(t),this.beans.columnHoverService.setMouseOver([this.column])}mouseStayingInsideCell(e){if(!e.target||!e.relatedTarget)return!1;const t=this.cellCtrl.getGui(),i=t.contains(e.target),n=t.contains(e.relatedTarget);return i&&n}destroy(){}}class ZE extends Ee{constructor(e,t,i,n,s){super(),this.cellCtrl=e,this.beans=t,this.rowNode=n,this.rowCtrl=s}setComp(e){this.eGui=e}onKeyDown(e){const t=e.key;switch(t){case ge.ENTER:this.onEnterKeyDown(e);break;case ge.F2:this.onF2KeyDown(e);break;case ge.ESCAPE:this.onEscapeKeyDown(e);break;case ge.TAB:this.onTabKeyDown(e);break;case ge.BACKSPACE:case ge.DELETE:this.onBackspaceOrDeleteKeyDown(t,e);break;case ge.DOWN:case ge.UP:case ge.RIGHT:case ge.LEFT:this.onNavigationKeyDown(e,t)}}onNavigationKeyDown(e,t){this.cellCtrl.isEditing()||(e.shiftKey&&this.cellCtrl.isRangeSelectionEnabled()?this.onShiftRangeSelect(e):this.beans.navigationService.navigateToNextCell(e,t,this.cellCtrl.getCellPosition(),!0),e.preventDefault())}onShiftRangeSelect(e){if(!this.beans.rangeService)return;const t=this.beans.rangeService.extendLatestRangeInDirection(e);t&&this.beans.navigationService.ensureCellVisible(t)}onTabKeyDown(e){this.beans.navigationService.onTabKeyDown(this.cellCtrl,e)}onBackspaceOrDeleteKeyDown(e,t){const{cellCtrl:i,beans:n,rowNode:s}=this,{gridOptionsService:o,rangeService:a,eventService:c}=n;i.isEditing()||(c.dispatchEvent({type:G.EVENT_KEY_SHORTCUT_CHANGED_CELL_START}),Sn(e,o.get("enableCellEditingOnBackspace"))?a&&o.get("enableRangeSelection")?a.clearCellRangeCellValues({dispatchWrapperEvents:!0,wrapperEventSource:"deleteKey"}):i.isCellEditable()&&s.setDataValue(i.getColumn(),null,"cellClear"):i.startRowOrCellEdit(e,t),c.dispatchEvent({type:G.EVENT_KEY_SHORTCUT_CHANGED_CELL_END}))}onEnterKeyDown(e){this.cellCtrl.isEditing()||this.rowCtrl.isEditing()?this.cellCtrl.stopEditingAndFocus(!1,e.shiftKey):this.beans.gridOptionsService.get("enterNavigatesVertically")?this.beans.navigationService.navigateToNextCell(null,e.shiftKey?ge.UP:ge.DOWN,this.cellCtrl.getCellPosition(),!1):(this.cellCtrl.startRowOrCellEdit(ge.ENTER,e),this.cellCtrl.isEditing()&&e.preventDefault())}onF2KeyDown(e){this.cellCtrl.isEditing()||this.cellCtrl.startRowOrCellEdit(ge.F2,e)}onEscapeKeyDown(e){this.cellCtrl.isEditing()&&(this.cellCtrl.stopRowOrCellEdit(!0),this.cellCtrl.focusCell(!0))}processCharacter(e){if(e.target!==this.eGui||this.cellCtrl.isEditing())return;const n=e.key;" "===n?this.onSpaceKeyDown(e):(this.cellCtrl.startRowOrCellEdit(n,e),e.preventDefault())}onSpaceKeyDown(e){const{gridOptionsService:t}=this.beans;if(!this.cellCtrl.isEditing()&&t.isRowSelection()){const i=this.rowNode.isSelected(),n=!i;if(n||!t.get("suppressRowDeselection")){const s=this.beans.gridOptionsService.get("groupSelectsFiltered"),o=this.rowNode.setSelectedParams({newValue:n,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"});void 0===i&&0===o&&this.rowNode.setSelectedParams({newValue:!1,rangeSelect:e.shiftKey,groupSelectsFiltered:s,event:e,source:"spaceKey"})}}e.preventDefault()}destroy(){super.destroy()}}class YS extends Ne{constructor(e,t,i){super('<div class="ag-drag-handle ag-row-drag" draggable="true"></div>'),this.rowNode=e,this.column=t,this.eCell=i}postConstruct(){this.getGui().appendChild(Nn("rowDrag",this.gridOptionsService,null)),this.addGuiEventListener("mousedown",t=>{t.stopPropagation()}),this.addDragSource(),this.checkVisibility()}addDragSource(){this.addGuiEventListener("dragstart",this.onDragStart.bind(this))}onDragStart(e){const t=this.column.getColDef().dndSourceOnRowDrag;e.dataTransfer.setDragImage(this.eCell,0,0),t?t(this.gridOptionsService.addGridCommonParams({rowNode:this.rowNode,dragEvent:e})):(()=>{try{const n=JSON.stringify(this.rowNode.data);e.dataTransfer.setData("application/json",n),e.dataTransfer.setData("text/plain",n)}catch{}})()}checkVisibility(){const e=this.column.isDndSource(this.rowNode);this.setDisplayed(e)}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Se],YS.prototype,"postConstruct",null);class Nh{static getHeaderClassesFromColDef(e,t,i,n){return gt(e)?[]:this.getColumnClassesFromCollDef(e.headerClass,e,t,i,n)}static getToolPanelClassesFromColDef(e,t,i,n){return gt(e)?[]:this.getColumnClassesFromCollDef(e.toolPanelClass,e,t,i,n)}static refreshFirstAndLastStyles(e,t,i){e.addOrRemoveCssClass("ag-column-first",i.isColumnAtEdge(t,"first")),e.addOrRemoveCssClass("ag-column-last",i.isColumnAtEdge(t,"last"))}static getClassParams(e,t,i,n){return t.addGridCommonParams({colDef:e,column:i,columnGroup:n})}static getColumnClassesFromCollDef(e,t,i,n,s){if(gt(e))return[];let o;return o="function"==typeof e?e(this.getClassParams(t,i,n,s)):e,"string"==typeof o?[o]:Array.isArray(o)?[...o]:[]}}let mA=0,Pc=(()=>{class r extends Ee{constructor(t,i,n,s){super(),this.cellRangeFeature=null,this.cellPositionFeature=null,this.cellCustomStyleFeature=null,this.tooltipFeature=null,this.cellMouseListenerFeature=null,this.cellKeyboardListenerFeature=null,this.suppressRefreshCell=!1,this.onCellCompAttachedFuncs=[],this.column=t,this.rowNode=i,this.beans=n,this.rowCtrl=s,this.instanceId=t.getId()+"-"+mA++,this.colIdSanitised=yn(this.column.getId()),n.gridOptionsService.get("suppressCellFocus")||(this.tabIndex=-1),this.createCellPosition(),this.addFeatures(),this.updateAndFormatValue(!1)}shouldRestoreFocus(){return this.beans.focusService.shouldRestoreFocus(this.cellPosition)}addFeatures(){this.cellPositionFeature=new NP(this,this.beans),this.addDestroyFunc(()=>{var i;null===(i=this.cellPositionFeature)||void 0===i||i.destroy(),this.cellPositionFeature=null}),this.cellCustomStyleFeature=new hA(this,this.beans),this.addDestroyFunc(()=>{var i;null===(i=this.cellCustomStyleFeature)||void 0===i||i.destroy(),this.cellCustomStyleFeature=null}),this.cellMouseListenerFeature=new zf(this,this.beans,this.column),this.addDestroyFunc(()=>{var i;null===(i=this.cellMouseListenerFeature)||void 0===i||i.destroy(),this.cellMouseListenerFeature=null}),this.cellKeyboardListenerFeature=new ZE(this,this.beans,this.column,this.rowNode,this.rowCtrl),this.addDestroyFunc(()=>{var i;null===(i=this.cellKeyboardListenerFeature)||void 0===i||i.destroy(),this.cellKeyboardListenerFeature=null}),this.column.isTooltipEnabled()&&(this.enableTooltipFeature(),this.addDestroyFunc(()=>{this.disableTooltipFeature()})),this.beans.rangeService&&this.beans.gridOptionsService.get("enableRangeSelection")&&(this.cellRangeFeature=new FP(this.beans,this),this.addDestroyFunc(()=>{var i;null===(i=this.cellRangeFeature)||void 0===i||i.destroy(),this.cellRangeFeature=null}))}enableTooltipFeature(){this.tooltipFeature=new KS({getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getRowIndex:()=>this.cellPosition.rowIndex,getRowNode:()=>this.rowNode,getGui:()=>this.getGui(),getLocation:()=>"cell",getTooltipValue:()=>{const n=this.column.getColDef(),s=this.rowNode.data;if(n.tooltipField&&Ie(s))return nn(s,n.tooltipField,this.column.isTooltipFieldContainsDots());const o=n.tooltipValueGetter;return o?o(this.beans.gridOptionsService.addGridCommonParams({location:"cell",colDef:this.column.getColDef(),column:this.column,rowIndex:this.cellPosition.rowIndex,node:this.rowNode,data:this.rowNode.data,value:this.value,valueFormatted:this.valueFormatted})):null},getValueFormatted:()=>this.valueFormatted},this.beans)}disableTooltipFeature(){!this.tooltipFeature||(this.tooltipFeature.destroy(),this.tooltipFeature=null)}setComp(t,i,n,s,o){var a,c,u,p;this.cellComp=t,this.eGui=i,this.printLayout=s,this.addDomData(),this.onCellFocused(this.focusEventToRestore),this.applyStaticCssClasses(),this.setWrapText(),this.onFirstRightPinnedChanged(),this.onLastLeftPinnedChanged(),this.onColumnHover(),this.setupControlComps(),this.setupAutoHeight(n),this.refreshFirstAndLastStyles(),this.refreshAriaColIndex(),null===(a=this.cellPositionFeature)||void 0===a||a.setComp(i),null===(c=this.cellCustomStyleFeature)||void 0===c||c.setComp(t),null===(u=this.tooltipFeature)||void 0===u||u.setComp(i),null===(p=this.cellKeyboardListenerFeature)||void 0===p||p.setComp(this.eGui),this.cellRangeFeature&&this.cellRangeFeature.setComp(t,i),o&&this.isCellEditable()?this.startEditing():this.showValue(),this.onCellCompAttachedFuncs.length&&(this.onCellCompAttachedFuncs.forEach(g=>g()),this.onCellCompAttachedFuncs=[])}setupAutoHeight(t){if(this.isAutoHeight=this.column.isAutoHeight(),!this.isAutoHeight||!t)return;const i=t.parentElement,n=this.beans.gridOptionsService.getRowHeightForNode(this.rowNode).height,s=c=>{if(this.editing||!this.isAlive())return;const{paddingTop:u,paddingBottom:p,borderBottomWidth:g,borderTopWidth:m}=wc(i),_=t.offsetHeight+(u+p+g+m);if(c<5){const D=this.beans.gridOptionsService.getDocument(),O=0==_;if(!D||!D.contains(t)||O)return void window.setTimeout(()=>s(c+1),0)}const E=Math.max(_,n);this.rowNode.setRowAutoHeight(E,this.column)},o=()=>s(0);o();const a=this.beans.resizeObserverService.observeResize(t,o);this.addDestroyFunc(()=>{a(),this.rowNode.setRowAutoHeight(void 0,this.column)})}getCellAriaRole(){var t;return null!==(t=this.column.getColDef().cellAriaRole)&&void 0!==t?t:"gridcell"}getInstanceId(){return this.instanceId}getIncludeSelection(){return this.includeSelection}getIncludeRowDrag(){return this.includeRowDrag}getIncludeDndSource(){return this.includeDndSource}getColumnIdSanitised(){return this.colIdSanitised}getTabIndex(){return this.tabIndex}isCellRenderer(){const t=this.column.getColDef();return null!=t.cellRenderer||null!=t.cellRendererSelector}getValueToDisplay(){return null!=this.valueFormatted?this.valueFormatted:this.value}showValue(t=!1){const i=this.getValueToDisplay();let n;if(this.isCellRenderer()){const s=this.createCellRendererParams();n=this.beans.userComponentFactory.getCellRendererDetails(this.column.getColDef(),s)}this.cellComp.setRenderDetails(n,i,t),this.refreshHandle()}setupControlComps(){const t=this.column.getColDef();this.includeSelection=this.isIncludeControl(t.checkboxSelection),this.includeRowDrag=this.isIncludeControl(t.rowDrag),this.includeDndSource=this.isIncludeControl(t.dndSource),this.cellComp.setIncludeSelection(this.includeSelection),this.cellComp.setIncludeDndSource(this.includeDndSource),this.cellComp.setIncludeRowDrag(this.includeRowDrag)}isForceWrapper(){return this.beans.gridOptionsService.get("enableCellTextSelection")||this.column.isAutoHeight()}isIncludeControl(t){return null==this.rowNode.rowPinned&&("function"==typeof t||!0===t)}refreshShouldDestroy(){const t=this.column.getColDef(),i=this.includeSelection!=this.isIncludeControl(t.checkboxSelection),n=this.includeRowDrag!=this.isIncludeControl(t.rowDrag),s=this.includeDndSource!=this.isIncludeControl(t.dndSource);return i||n||s}startEditing(t=null,i=!1,n=null){if(!this.isCellEditable()||this.editing)return;if(!this.cellComp)return void this.onCellCompAttachedFuncs.push(()=>{this.startEditing(t,i,n)});const s=this.createCellEditorParams(t,i),o=this.column.getColDef(),a=this.beans.userComponentFactory.getCellEditorDetails(o,s);this.editCompDetails=a;const c=null!=a?.popupFromSelector?a.popupFromSelector:!!o.cellEditorPopup,u=null!=a?.popupPositionFromSelector?a.popupPositionFromSelector:o.cellEditorPopupPosition;this.setEditing(!0),this.cellComp.setEditDetails(a,c,u,this.beans.gridOptionsService.get("reactiveCustomComponents"));const p=this.createEvent(n,G.EVENT_CELL_EDITING_STARTED);this.beans.eventService.dispatchEvent(p)}setEditing(t){this.editing!==t&&(this.editing=t,this.refreshHandle())}stopRowOrCellEdit(t=!1){"fullRow"===this.beans.gridOptionsService.get("editType")?this.rowCtrl.stopEditing(t):this.stopEditing(t)}onPopupEditorClosed(){!this.isEditing()||this.stopEditingAndFocus()}takeValueFromCellEditor(t){const i={newValueExists:!1};if(t)return i;const n=this.cellComp.getCellEditor();return!n||n.isCancelAfterEnd&&n.isCancelAfterEnd()?i:{newValue:n.getValue(),newValueExists:!0}}saveNewValue(t,i){if(i===t)return!1;this.suppressRefreshCell=!0;const n=this.rowNode.setDataValue(this.column,i,"edit");return this.suppressRefreshCell=!1,n}stopEditing(t=!1){if(!this.editing)return!1;const{newValue:i,newValueExists:n}=this.takeValueFromCellEditor(t),s=this.rowNode.getValueFromValueService(this.column);let o=!1;return n&&(o=this.saveNewValue(s,i)),this.setEditing(!1),this.cellComp.setEditDetails(),this.editCompDetails=void 0,this.updateAndFormatValue(!1),this.refreshCell({forceRefresh:!0,suppressFlash:!0}),this.dispatchEditingStoppedEvent(s,i,!t&&!!o),o}dispatchEditingStoppedEvent(t,i,n){const s=Object.assign(Object.assign({},this.createEvent(null,G.EVENT_CELL_EDITING_STOPPED)),{oldValue:t,newValue:i,valueChanged:n});this.beans.eventService.dispatchEvent(s)}createCellEditorParams(t,i){return this.beans.gridOptionsService.addGridCommonParams({value:this.rowNode.getValueFromValueService(this.column),eventKey:t,column:this.column,colDef:this.column.getColDef(),rowIndex:this.getCellPosition().rowIndex,node:this.rowNode,data:this.rowNode.data,cellStartedEdit:i,onKeyDown:this.onKeyDown.bind(this),stopEditing:this.stopEditingAndFocus.bind(this),eGridCell:this.getGui(),parseValue:this.parseValue.bind(this),formatValue:this.formatValue.bind(this)})}createCellRendererParams(){return this.beans.gridOptionsService.addGridCommonParams({value:this.value,valueFormatted:this.valueFormatted,getValue:()=>this.rowNode.getValueFromValueService(this.column),setValue:i=>this.beans.valueService.setValue(this.rowNode,this.column,i),formatValue:this.formatValue.bind(this),data:this.rowNode.data,node:this.rowNode,pinned:this.column.getPinned(),colDef:this.column.getColDef(),column:this.column,rowIndex:this.getCellPosition().rowIndex,refreshCell:this.refreshCell.bind(this),eGridCell:this.getGui(),eParentOfValue:this.cellComp.getParentOfValue(),registerRowDragger:(i,n,s,o)=>this.registerRowDragger(i,n,o)})}parseValue(t){return this.beans.valueParserService.parseValue(this.column,this.rowNode,t,this.getValue())}setFocusOutOnEditor(){if(!this.editing)return;const t=this.cellComp.getCellEditor();t&&t.focusOut&&t.focusOut()}setFocusInOnEditor(){if(!this.editing)return;const t=this.cellComp.getCellEditor();t&&t.focusIn?t.focusIn():this.focusCell(!0)}onCellChanged(t){t.column===this.column&&this.refreshCell({})}refreshOrDestroyCell(t){var i;this.refreshShouldDestroy()?null===(i=this.rowCtrl)||void 0===i||i.refreshCell(this):this.refreshCell(t)}refreshCell(t){var i,n,s;if(this.suppressRefreshCell||this.editing)return;const o=this.column.getColDef(),a=null!=t&&!!t.newData,c=null!=t&&!!t.suppressFlash||!!o.suppressCellFlash,p=t&&t.forceRefresh||null==o.field&&null==o.valueGetter&&null==o.showRowGroup||a,g=!!this.cellComp,m=this.updateAndFormatValue(g);if(g){if(p||m){this.showValue(a);const b=this.beans.filterManager.isSuppressFlashingCellsBecauseFiltering();!c&&!b&&(this.beans.gridOptionsService.get("enableCellChangeFlash")||o.enableCellChangeFlash)&&this.flashCell(),null===(i=this.cellCustomStyleFeature)||void 0===i||i.applyUserStyles(),null===(n=this.cellCustomStyleFeature)||void 0===n||n.applyClassesFromColDef()}this.refreshToolTip(),null===(s=this.cellCustomStyleFeature)||void 0===s||s.applyCellClassRules()}}stopEditingAndFocus(t=!1,i=!1){this.stopRowOrCellEdit(),this.focusCell(!0),t||this.navigateAfterEdit(i)}navigateAfterEdit(t){this.beans.gridOptionsService.get("enterNavigatesVerticallyAfterEdit")&&this.beans.navigationService.navigateToNextCell(null,t?ge.UP:ge.DOWN,this.getCellPosition(),!1)}flashCell(t){var i,n;const s=null!==(i=t?.flashDuration)&&void 0!==i?i:t?.flashDelay,o=null!==(n=t?.fadeDuration)&&void 0!==n?n:t?.fadeDelay;this.animateCell("data-changed",s,o)}animateCell(t,i,n){if(!this.cellComp)return;const s=`ag-cell-${t}`,o=`ag-cell-${t}-animation`,{gridOptionsService:a}=this.beans;i||(i=a.get("cellFlashDuration")),Ie(n)||(n=a.get("cellFadeDuration")),this.cellComp.addOrRemoveCssClass(s,!0),this.cellComp.addOrRemoveCssClass(o,!1),this.beans.frameworkOverrides.wrapIncoming(()=>{window.setTimeout(()=>{!this.isAlive()||(this.cellComp.addOrRemoveCssClass(s,!1),this.cellComp.addOrRemoveCssClass(o,!0),this.eGui.style.transition=`background-color ${n}ms`,window.setTimeout(()=>{!this.isAlive()||(this.cellComp.addOrRemoveCssClass(o,!1),this.eGui.style.transition="")},n))},i)})}onFlashCells(t){if(!this.cellComp)return;const i=this.beans.cellPositionUtils.createId(this.getCellPosition());t.cells[i]&&this.animateCell("highlight")}isCellEditable(){return this.column.isCellEditable(this.rowNode)}isSuppressFillHandle(){return this.column.isSuppressFillHandle()}formatValue(t){var i;return null!==(i=this.callValueFormatter(t))&&void 0!==i?i:t}callValueFormatter(t){return this.beans.valueFormatterService.formatValue(this.column,this.rowNode,t)}updateAndFormatValue(t){const i=this.value,n=this.valueFormatted;return this.value=this.rowNode.getValueFromValueService(this.column),this.valueFormatted=this.callValueFormatter(this.value),!t||!this.valuesAreEqual(i,this.value)||this.valueFormatted!=n}valuesAreEqual(t,i){const n=this.column.getColDef();return n.equals?n.equals(t,i):t===i}getComp(){return this.cellComp}getValue(){return this.value}getValueFormatted(){return this.valueFormatted}addDomData(){const t=this.getGui();this.beans.gridOptionsService.setDomData(t,r.DOM_DATA_KEY_CELL_CTRL,this),this.addDestroyFunc(()=>this.beans.gridOptionsService.setDomData(t,r.DOM_DATA_KEY_CELL_CTRL,null))}createEvent(t,i){return this.beans.gridOptionsService.addGridCommonParams({type:i,node:this.rowNode,data:this.rowNode.data,value:this.value,column:this.column,colDef:this.column.getColDef(),rowPinned:this.rowNode.rowPinned,event:t,rowIndex:this.rowNode.rowIndex})}processCharacter(t){var i;null===(i=this.cellKeyboardListenerFeature)||void 0===i||i.processCharacter(t)}onKeyDown(t){var i;null===(i=this.cellKeyboardListenerFeature)||void 0===i||i.onKeyDown(t)}onMouseEvent(t,i){var n;null===(n=this.cellMouseListenerFeature)||void 0===n||n.onMouseEvent(t,i)}getGui(){return this.eGui}refreshToolTip(){var t;null===(t=this.tooltipFeature)||void 0===t||t.refreshToolTip()}getColSpanningList(){return this.cellPositionFeature.getColSpanningList()}onLeftChanged(){var t;!this.cellComp||null===(t=this.cellPositionFeature)||void 0===t||t.onLeftChanged()}onDisplayedColumnsChanged(){!this.eGui||(this.refreshAriaColIndex(),this.refreshFirstAndLastStyles())}refreshFirstAndLastStyles(){const{cellComp:t,column:i,beans:n}=this;Nh.refreshFirstAndLastStyles(t,i,n.columnModel)}refreshAriaColIndex(){const t=this.beans.columnModel.getAriaColumnIndex(this.column);lE(this.getGui(),t)}isSuppressNavigable(){return this.column.isSuppressNavigable(this.rowNode)}onWidthChanged(){var t;return null===(t=this.cellPositionFeature)||void 0===t?void 0:t.onWidthChanged()}getColumn(){return this.column}getRowNode(){return this.rowNode}getBeans(){return this.beans}isPrintLayout(){return this.printLayout}appendChild(t){this.eGui.appendChild(t)}refreshHandle(){this.cellRangeFeature&&this.cellRangeFeature.refreshHandle()}getCellPosition(){return this.cellPosition}isEditing(){return this.editing}startRowOrCellEdit(t,i=null){this.cellComp?"fullRow"===this.beans.gridOptionsService.get("editType")?this.rowCtrl.startRowEditing(t,this):this.startEditing(t,!0,i):this.onCellCompAttachedFuncs.push(()=>{this.startRowOrCellEdit(t,i)})}getRowCtrl(){return this.rowCtrl}getRowPosition(){return{rowIndex:this.cellPosition.rowIndex,rowPinned:this.cellPosition.rowPinned}}updateRangeBordersIfRangeCount(){!this.cellComp||this.cellRangeFeature&&this.cellRangeFeature.updateRangeBordersIfRangeCount()}onRangeSelectionChanged(){!this.cellComp||this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}isRangeSelectionEnabled(){return null!=this.cellRangeFeature}focusCell(t=!1){this.beans.focusService.setFocusedCell({rowIndex:this.getCellPosition().rowIndex,column:this.column,rowPinned:this.rowNode.rowPinned,forceBrowserFocus:t})}onRowIndexChanged(){this.createCellPosition(),this.onCellFocused(),this.cellRangeFeature&&this.cellRangeFeature.onRangeSelectionChanged()}onFirstRightPinnedChanged(){if(!this.cellComp)return;const t=this.column.isFirstRightPinned();this.cellComp.addOrRemoveCssClass("ag-cell-first-right-pinned",t)}onLastLeftPinnedChanged(){if(!this.cellComp)return;const t=this.column.isLastLeftPinned();this.cellComp.addOrRemoveCssClass("ag-cell-last-left-pinned",t)}onCellFocused(t){if(this.beans.gridOptionsService.get("suppressCellFocus"))return;const i=this.beans.focusService.isCellFocused(this.cellPosition);if(!this.cellComp)return void(i&&t?.forceBrowserFocus&&(this.focusEventToRestore=t));this.focusEventToRestore=void 0,this.cellComp.addOrRemoveCssClass("ag-cell-focus",i),i&&t&&t.forceBrowserFocus&&this.cellComp.getFocusableElement().focus({preventScroll:!!t.preventScrollOnBrowserFocus});const n="fullRow"===this.beans.gridOptionsService.get("editType");!i&&!n&&this.editing&&this.stopRowOrCellEdit(),i&&this.rowCtrl.announceDescription()}createCellPosition(){this.cellPosition={rowIndex:this.rowNode.rowIndex,rowPinned:fr(this.rowNode.rowPinned),column:this.column}}applyStaticCssClasses(){this.cellComp.addOrRemoveCssClass("ag-cell",!0),this.cellComp.addOrRemoveCssClass("ag-cell-not-inline-editing",!0);const t=1==this.column.isAutoHeight();this.cellComp.addOrRemoveCssClass("ag-cell-auto-height",t),this.cellComp.addOrRemoveCssClass("ag-cell-normal-height",!t)}onColumnHover(){if(!this.cellComp||!this.beans.gridOptionsService.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.cellComp.addOrRemoveCssClass("ag-column-hover",t)}onColDefChanged(){var t,i;if(this.cellComp)if(this.column.isAutoHeight()!==this.isAutoHeight&&(null===(t=this.rowCtrl)||void 0===t||t.refreshCell(this)),this.column.isTooltipEnabled()?(this.disableTooltipFeature(),this.enableTooltipFeature(),null===(i=this.tooltipFeature)||void 0===i||i.setComp(this.eGui)):this.disableTooltipFeature(),this.setWrapText(),this.editing){const o=this.getCellEditor();if(o?.refresh){const{eventKey:a,cellStartedEdit:c}=this.editCompDetails.params,u=this.createCellEditorParams(a,c),p=this.column.getColDef(),g=this.beans.userComponentFactory.getCellEditorDetails(p,u);o.refresh(g.params)}}else this.refreshOrDestroyCell({forceRefresh:!0,suppressFlash:!0})}setWrapText(){const t=1==this.column.getColDef().wrapText;this.cellComp.addOrRemoveCssClass("ag-cell-wrap-text",t)}dispatchCellContextMenuEvent(t){const i=this.column.getColDef(),n=this.createEvent(t,G.EVENT_CELL_CONTEXT_MENU);this.beans.eventService.dispatchEvent(n),i.onCellContextMenu&&window.setTimeout(()=>{this.beans.frameworkOverrides.wrapOutgoing(()=>{i.onCellContextMenu(n)})},0)}getCellRenderer(){return this.cellComp?this.cellComp.getCellRenderer():null}getCellEditor(){return this.cellComp?this.cellComp.getCellEditor():null}destroy(){this.onCellCompAttachedFuncs=[],super.destroy()}createSelectionCheckbox(){const t=new HS;return this.beans.context.createBean(t),t.init({rowNode:this.rowNode,column:this.column}),t}createDndSource(){const t=new YS(this.rowNode,this.column,this.eGui);return this.beans.context.createBean(t),t}registerRowDragger(t,i,n){if(this.customRowDragComp)return void this.customRowDragComp.setDragElement(t,i);const s=this.createRowDragComp(t,i,n);s&&(this.customRowDragComp=s,this.addDestroyFunc(()=>{this.beans.context.destroyBean(s),this.customRowDragComp=null}))}createRowDragComp(t,i,n){const s=this.beans.gridOptionsService.get("pagination"),o=this.beans.gridOptionsService.get("rowDragManaged"),a=this.beans.gridOptionsService.isRowModelType("clientSide");if(o){if(!a)return void st("managed row dragging is only allowed in the Client Side Row Model");if(s)return void st("managed row dragging is not possible when doing pagination")}const c=new Mh(()=>this.value,this.rowNode,this.column,t,i,n);return this.beans.context.createBean(c),c}}return r.DOM_DATA_KEY_CELL_CTRL="cellCtrl",r})();var Cr=(()=>(function(r){r.Normal="Normal",r.FullWidth="FullWidth",r.FullWidthLoading="FullWidthLoading",r.FullWidthGroup="FullWidthGroup",r.FullWidthDetail="FullWidthDetail"}(Cr||(Cr={})),Cr))();let vo=0,$d=(()=>{class r extends Ee{constructor(t,i,n,s,o){super(),this.allRowGuis=[],this.active=!0,this.centerCellCtrls={list:[],map:{}},this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}},this.slideInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.fadeInAnimation={left:!1,center:!1,right:!1,fullWidth:!1},this.rowDragComps=[],this.lastMouseDownOnDragger=!1,this.emptyStyle={},this.updateColumnListsPending=!1,this.rowId=null,this.businessKeySanitised=null,this.beans=i,this.gridOptionsService=i.gridOptionsService,this.rowNode=t,this.paginationPage=i.paginationProxy.getCurrentPage(),this.useAnimationFrameForCreate=s,this.printLayout=o,this.suppressRowTransform=this.gridOptionsService.get("suppressRowTransform"),this.instanceId=t.id+"-"+vo++,this.rowId=yn(t.id),this.initRowBusinessKey(),this.rowFocused=i.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned),this.rowLevel=i.rowCssClassCalculator.calculateRowLevel(this.rowNode),this.setRowType(),this.setAnimateFlags(n),this.rowStyles=this.processStylesFromGridOptions(),this.isFullWidth()&&!this.gridOptionsService.get("suppressCellFocus")&&(this.tabIndex=-1),this.addListeners()}initRowBusinessKey(){this.businessKeyForNodeFunc=this.gridOptionsService.get("getBusinessKeyForNode"),this.updateRowBusinessKey()}updateRowBusinessKey(){if("function"!=typeof this.businessKeyForNodeFunc)return;const t=this.businessKeyForNodeFunc(this.rowNode);this.businessKeySanitised=yn(t)}getRowId(){return this.rowId}getRowStyles(){return this.rowStyles}getTabIndex(){return this.tabIndex}isSticky(){return this.rowNode.sticky}getBeans(){return this.beans}getInstanceId(){return this.instanceId}setComp(t,i,n){const s={rowComp:t,element:i,containerType:n};this.allRowGuis.push(s),n===Ii.LEFT?this.leftGui=s:n===Ii.RIGHT?this.rightGui=s:n===Ii.FULL_WIDTH?this.fullWidthGui=s:this.centerGui=s,this.initialiseRowComp(s),"FullWidthLoading"!==this.rowType&&!this.rowNode.rowPinned&&this.beans.rowRenderer.dispatchFirstDataRenderedEvent()}unsetComp(t){switch(this.allRowGuis=this.allRowGuis.filter(i=>i.containerType!==t),t){case Ii.LEFT:this.leftGui=void 0;break;case Ii.RIGHT:this.rightGui=void 0;break;case Ii.FULL_WIDTH:this.fullWidthGui=void 0;break;case Ii.CENTER:this.centerGui=void 0}}isCacheable(){return this.rowType===Cr.FullWidthDetail&&this.gridOptionsService.get("keepDetailRows")}setCached(t){const i=t?"none":"";this.allRowGuis.forEach(n=>n.element.style.display=i)}initialiseRowComp(t){const i=this.gridOptionsService;this.listenOnDomOrder(t),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights(),this.onRowHeightChanged(t),this.updateRowIndexes(t),this.setFocusedClasses(t),this.setStylesFromGridOptions(!1,t),i.isRowSelection()&&this.rowNode.selectable&&this.onRowSelected(t),this.updateColumnLists(!this.useAnimationFrameForCreate);const n=t.rowComp;this.getInitialRowClasses(t.containerType).forEach(o=>n.addOrRemoveCssClass(o,!0)),this.executeSlideAndFadeAnimations(t),this.rowNode.group&&_c(t.element,1==this.rowNode.expanded),this.setRowCompRowId(n),this.setRowCompRowBusinessKey(n),i.setDomData(t.element,r.DOM_DATA_KEY_ROW_CTRL,this),this.addDestroyFunc(()=>i.setDomData(t.element,r.DOM_DATA_KEY_ROW_CTRL,null)),this.useAnimationFrameForCreate?this.beans.animationFrameService.createTask(this.addHoverFunctionality.bind(this,t.element),this.rowNode.rowIndex,"createTasksP2"):this.addHoverFunctionality(t.element),this.isFullWidth()&&this.setupFullWidth(t),i.get("rowDragEntireRow")&&this.addRowDraggerToRow(t),this.useAnimationFrameForCreate&&this.beans.animationFrameService.addDestroyTask(()=>{!this.isAlive()||t.rowComp.addOrRemoveCssClass("ag-after-created",!0)}),this.executeProcessRowPostCreateFunc()}setRowCompRowBusinessKey(t){null!=this.businessKeySanitised&&t.setRowBusinessKey(this.businessKeySanitised)}getBusinessKey(){return this.businessKeySanitised}setRowCompRowId(t){this.rowId=yn(this.rowNode.id),null!=this.rowId&&t.setRowId(this.rowId)}executeSlideAndFadeAnimations(t){const{containerType:i}=t;this.slideInAnimation[i]&&($w(()=>{this.onTopChanged()}),this.slideInAnimation[i]=!1),this.fadeInAnimation[i]&&($w(()=>{t.rowComp.addOrRemoveCssClass("ag-opacity-zero",!1)}),this.fadeInAnimation[i]=!1)}addRowDraggerToRow(t){if(this.gridOptionsService.get("enableRangeSelection"))return void st("Setting `rowDragEntireRow: true` in the gridOptions doesn't work with `enableRangeSelection: true`");const i=this.beans.localeService.getLocaleTextFunc(),n=new Mh(()=>`1 ${i("rowDragRow","row")}`,this.rowNode,void 0,t.element,void 0,!0),s=this.createBean(n,this.beans.context);this.rowDragComps.push(s)}setupFullWidth(t){const i=this.getPinnedForContainer(t.containerType),n=this.createFullWidthParams(t.element,i);if(this.rowType==Cr.FullWidthDetail&&!yt.__assertRegistered(ze.MasterDetailModule,"cell renderer 'agDetailCellRenderer' (for master detail)",this.beans.context.getGridId()))return;let s;switch(this.rowType){case Cr.FullWidthDetail:s=this.beans.userComponentFactory.getFullWidthDetailCellRendererDetails(n);break;case Cr.FullWidthGroup:s=this.beans.userComponentFactory.getFullWidthGroupCellRendererDetails(n);break;case Cr.FullWidthLoading:s=this.beans.userComponentFactory.getFullWidthLoadingCellRendererDetails(n);break;default:s=this.beans.userComponentFactory.getFullWidthCellRendererDetails(n)}t.rowComp.showFullWidth(s)}isPrintLayout(){return this.printLayout}getFullWidthCellRenderers(){var t,i;return this.gridOptionsService.get("embedFullWidthRows")?this.allRowGuis.map(n=>{var s;return null===(s=n?.rowComp)||void 0===s?void 0:s.getFullWidthCellRenderer()}):[null===(i=null===(t=this.fullWidthGui)||void 0===t?void 0:t.rowComp)||void 0===i?void 0:i.getFullWidthCellRenderer()]}getCellElement(t){const i=this.getCellCtrl(t);return i?i.getGui():null}executeProcessRowPostCreateFunc(){const t=this.gridOptionsService.getCallback("processRowPostCreate");t&&this.areAllContainersReady()&&t({eRow:this.centerGui.element,ePinnedLeftRow:this.leftGui?this.leftGui.element:void 0,ePinnedRightRow:this.rightGui?this.rightGui.element:void 0,node:this.rowNode,rowIndex:this.rowNode.rowIndex,addRenderedRowListener:this.addEventListener.bind(this)})}areAllContainersReady(){const t=!!this.leftGui||!this.beans.columnModel.isPinningLeft(),i=!!this.centerGui,n=!!this.rightGui||!this.beans.columnModel.isPinningRight();return t&&i&&n}setRowType(){const t=this.rowNode.stub,i=this.rowNode.isFullWidthCell(),n=this.gridOptionsService.get("masterDetail")&&this.rowNode.detail,s=this.beans.columnModel.isPivotMode(),a=!!this.rowNode.group&&!this.rowNode.footer&&this.gridOptionsService.isGroupUseEntireRow(s);this.rowType=t?Cr.FullWidthLoading:n?Cr.FullWidthDetail:i?Cr.FullWidth:a?Cr.FullWidthGroup:Cr.Normal}updateColumnLists(t=!1,i=!1){this.isFullWidth()||(t||this.gridOptionsService.get("suppressAnimationFrame")||this.printLayout?this.updateColumnListsImpl(i):this.updateColumnListsPending||(this.beans.animationFrameService.createTask(()=>{!this.active||this.updateColumnListsImpl(!0)},this.rowNode.rowIndex,"createTasksP1"),this.updateColumnListsPending=!0))}createCellCtrls(t,i,n=null){const s={list:[],map:{}},o=(a,c)=>{s.list.push(c),s.map[a]=c};return i.forEach(a=>{const c=a.getInstanceId();let u=t.map[c];u||(u=new Pc(a,this.rowNode,this.beans,this)),o(c,u)}),t.list.forEach(a=>{null==s.map[a.getColumn().getInstanceId()]&&(this.isCellEligibleToBeRemoved(a,n)?a.destroy():o(a.getColumn().getInstanceId(),a))}),s}updateColumnListsImpl(t){this.updateColumnListsPending=!1,this.createAllCellCtrls(),this.setCellCtrls(t)}setCellCtrls(t){this.allRowGuis.forEach(i=>{const n=this.getCellCtrlsForContainer(i.containerType);i.rowComp.setCellCtrls(n,t)})}getCellCtrlsForContainer(t){switch(t){case Ii.LEFT:return this.leftCellCtrls.list;case Ii.RIGHT:return this.rightCellCtrls.list;case Ii.FULL_WIDTH:return[];case Ii.CENTER:return this.centerCellCtrls.list;default:throw new Error(`Unhandled case: ${t}`)}}createAllCellCtrls(){const t=this.beans.columnModel;if(this.printLayout)this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,t.getAllDisplayedColumns()),this.leftCellCtrls={list:[],map:{}},this.rightCellCtrls={list:[],map:{}};else{const i=t.getViewportCenterColumnsForRow(this.rowNode);this.centerCellCtrls=this.createCellCtrls(this.centerCellCtrls,i);const n=t.getDisplayedLeftColumnsForRow(this.rowNode);this.leftCellCtrls=this.createCellCtrls(this.leftCellCtrls,n,"left");const s=t.getDisplayedRightColumnsForRow(this.rowNode);this.rightCellCtrls=this.createCellCtrls(this.rightCellCtrls,s,"right")}}isCellEligibleToBeRemoved(t,i){if(t.getColumn().getPinned()!=i)return!0;const a=t.isEditing(),c=this.beans.focusService.isCellFocused(t.getCellPosition());if(a||c){const p=t.getColumn();return!(this.beans.columnModel.getAllDisplayedColumns().indexOf(p)>=0)}return!0}getDomOrder(){return this.gridOptionsService.get("ensureDomOrder")||this.gridOptionsService.isDomLayout("print")}listenOnDomOrder(t){const i=()=>{t.rowComp.setDomOrder(this.getDomOrder())};this.addManagedPropertyListener("domLayout",i),this.addManagedPropertyListener("ensureDomOrder",i)}setAnimateFlags(t){if(this.isSticky()||!t)return;const i=Ie(this.rowNode.oldRowTop),n=this.beans.columnModel.isPinningLeft(),s=this.beans.columnModel.isPinningRight();if(i){if(this.isFullWidth()&&!this.gridOptionsService.get("embedFullWidthRows"))return void(this.slideInAnimation.fullWidth=!0);this.slideInAnimation.center=!0,this.slideInAnimation.left=n,this.slideInAnimation.right=s}else{if(this.isFullWidth()&&!this.gridOptionsService.get("embedFullWidthRows"))return void(this.fadeInAnimation.fullWidth=!0);this.fadeInAnimation.center=!0,this.fadeInAnimation.left=n,this.fadeInAnimation.right=s}}isEditing(){return this.editingRow}isFullWidth(){return this.rowType!==Cr.Normal}getRowType(){return this.rowType}refreshFullWidth(){const t=(c,u)=>!c||c.rowComp.refreshFullWidth(()=>this.createFullWidthParams(c.element,u)),i=t(this.fullWidthGui,null),n=t(this.centerGui,null),s=t(this.leftGui,"left"),o=t(this.rightGui,"right");return i&&n&&s&&o}addListeners(){this.addManagedListener(this.rowNode,Gt.EVENT_HEIGHT_CHANGED,()=>this.onRowHeightChanged()),this.addManagedListener(this.rowNode,Gt.EVENT_ROW_SELECTED,()=>this.onRowSelected()),this.addManagedListener(this.rowNode,Gt.EVENT_ROW_INDEX_CHANGED,this.onRowIndexChanged.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_TOP_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_EXPANDED_CHANGED,this.updateExpandedCss.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_HAS_CHILDREN_CHANGED,this.updateExpandedCss.bind(this)),this.rowNode.detail&&this.addManagedListener(this.rowNode.parent,Gt.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_DATA_CHANGED,this.onRowNodeDataChanged.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_CELL_CHANGED,this.postProcessCss.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_HIGHLIGHT_CHANGED,this.onRowNodeHighlightChanged.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_DRAGGING_CHANGED,this.postProcessRowDragging.bind(this)),this.addManagedListener(this.rowNode,Gt.EVENT_UI_LEVEL_CHANGED,this.onUiLevelChanged.bind(this));const t=this.beans.eventService;this.addManagedListener(t,G.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED,this.onPaginationPixelOffsetChanged.bind(this)),this.addManagedListener(t,G.EVENT_HEIGHT_SCALE_CHANGED,this.onTopChanged.bind(this)),this.addManagedListener(t,G.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(t,G.EVENT_VIRTUAL_COLUMNS_CHANGED,this.onVirtualColumnsChanged.bind(this)),this.addManagedListener(t,G.EVENT_CELL_FOCUSED,this.onCellFocusChanged.bind(this)),this.addManagedListener(t,G.EVENT_CELL_FOCUS_CLEARED,this.onCellFocusChanged.bind(this)),this.addManagedListener(t,G.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),this.addManagedListener(t,G.EVENT_MODEL_UPDATED,this.refreshFirstAndLastRowStyles.bind(this)),this.addManagedListener(t,G.EVENT_COLUMN_MOVED,this.updateColumnLists.bind(this)),this.addDestroyFunc(()=>{this.destroyBeans(this.rowDragComps,this.beans.context)}),this.addManagedPropertyListeners(["rowDragEntireRow"],()=>{this.gridOptionsService.get("rowDragEntireRow")?this.allRowGuis.forEach(n=>{this.addRowDraggerToRow(n)}):(this.destroyBeans(this.rowDragComps,this.beans.context),this.rowDragComps=[])}),this.addListenersForCellComps()}addListenersForCellComps(){this.addManagedListener(this.rowNode,Gt.EVENT_ROW_INDEX_CHANGED,()=>{this.getAllCellCtrls().forEach(t=>t.onRowIndexChanged())}),this.addManagedListener(this.rowNode,Gt.EVENT_CELL_CHANGED,t=>{this.getAllCellCtrls().forEach(i=>i.onCellChanged(t))})}onRowNodeDataChanged(t){this.isFullWidth()===!!this.rowNode.isFullWidthCell()?this.isFullWidth()?this.refreshFullWidth()||this.beans.rowRenderer.redrawRow(this.rowNode):(this.getAllCellCtrls().forEach(n=>n.refreshCell({suppressFlash:!t.update,newData:!t.update})),this.allRowGuis.forEach(n=>{this.setRowCompRowId(n.rowComp),this.updateRowBusinessKey(),this.setRowCompRowBusinessKey(n.rowComp)}),this.onRowSelected(),this.postProcessCss()):this.beans.rowRenderer.redrawRow(this.rowNode)}postProcessCss(){this.setStylesFromGridOptions(!0),this.postProcessClassesFromGridOptions(),this.postProcessRowClassRules(),this.postProcessRowDragging()}onRowNodeHighlightChanged(){const t=this.rowNode.highlighted;this.allRowGuis.forEach(i=>{const s=t===Oc.Below;i.rowComp.addOrRemoveCssClass("ag-row-highlight-above",t===Oc.Above),i.rowComp.addOrRemoveCssClass("ag-row-highlight-below",s)})}postProcessRowDragging(){const t=this.rowNode.dragging;this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass("ag-row-dragging",t))}updateExpandedCss(){const t=this.rowNode.isExpandable(),i=1==this.rowNode.expanded;this.allRowGuis.forEach(n=>{n.rowComp.addOrRemoveCssClass("ag-row-group",t),n.rowComp.addOrRemoveCssClass("ag-row-group-expanded",t&&i),n.rowComp.addOrRemoveCssClass("ag-row-group-contracted",t&&!i),_c(n.element,t&&i)})}onDisplayedColumnsChanged(){this.updateColumnLists(!0),this.beans.columnModel.wasAutoRowHeightEverActive()&&this.rowNode.checkAutoHeights()}onVirtualColumnsChanged(){this.updateColumnLists(!1,!0)}getRowPosition(){return{rowPinned:fr(this.rowNode.rowPinned),rowIndex:this.rowNode.rowIndex}}onKeyboardNavigate(t){const i=this.allRowGuis.find(u=>u.element.contains(t.target));if((i?i.element:null)!==t.target)return;const o=this.rowNode,a=this.beans.focusService.getFocusedCell();this.beans.navigationService.navigateToNextCell(t,t.key,{rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:a&&a.column},!0),t.preventDefault()}onTabKeyDown(t){if(t.defaultPrevented||yl(t))return;const i=this.allRowGuis.find(a=>a.element.contains(t.target)),n=i?i.element:null,s=n===t.target;let o=null;s||(o=this.beans.focusService.findNextFocusableElement(n,!1,t.shiftKey)),(this.isFullWidth()&&s||!o)&&this.beans.navigationService.onTabKeyDown(this,t)}onFullWidthRowFocused(t){var i;const n=this.rowNode,s=!!t&&this.isFullWidth()&&t.rowIndex===n.rowIndex&&t.rowPinned==n.rowPinned,o=this.fullWidthGui?this.fullWidthGui.element:null===(i=this.centerGui)||void 0===i?void 0:i.element;!o||(o.classList.toggle("ag-full-width-focus",s),s&&o.focus({preventScroll:!0}))}refreshCell(t){this.centerCellCtrls=this.removeCellCtrl(this.centerCellCtrls,t),this.leftCellCtrls=this.removeCellCtrl(this.leftCellCtrls,t),this.rightCellCtrls=this.removeCellCtrl(this.rightCellCtrls,t),this.updateColumnLists()}removeCellCtrl(t,i){const n={list:[],map:{}};return t.list.forEach(s=>{s!==i&&(n.list.push(s),n.map[s.getInstanceId()]=s)}),n}onMouseEvent(t,i){switch(t){case"dblclick":this.onRowDblClick(i);break;case"click":this.onRowClick(i);break;case"touchstart":case"mousedown":this.onRowMouseDown(i)}}createRowEvent(t,i){return this.gridOptionsService.addGridCommonParams({type:t,node:this.rowNode,data:this.rowNode.data,rowIndex:this.rowNode.rowIndex,rowPinned:this.rowNode.rowPinned,event:i})}createRowEventWithSource(t,i){const n=this.createRowEvent(t,i);return n.source=this,n}onRowDblClick(t){if(yl(t))return;const i=this.createRowEventWithSource(G.EVENT_ROW_DOUBLE_CLICKED,t);this.beans.eventService.dispatchEvent(i)}onRowMouseDown(t){if(this.lastMouseDownOnDragger=wh(t.target,"ag-row-drag",3),!this.isFullWidth())return;const i=this.rowNode,n=this.beans.columnModel;this.beans.rangeService&&this.beans.rangeService.removeAllCellRanges(),this.beans.focusService.setFocusedCell({rowIndex:i.rowIndex,column:n.getAllDisplayedColumns()[0],rowPinned:i.rowPinned,forceBrowserFocus:!0})}onRowClick(t){if(yl(t)||this.lastMouseDownOnDragger)return;const n=this.createRowEventWithSource(G.EVENT_ROW_CLICKED,t);this.beans.eventService.dispatchEvent(n);const s=t.ctrlKey||t.metaKey,o=t.shiftKey;if(this.gridOptionsService.get("groupSelectsChildren")&&this.rowNode.group||this.isRowSelectionBlocked()||this.gridOptionsService.get("suppressRowClickSelection"))return;const c=this.gridOptionsService.get("rowMultiSelectWithClick"),u=!this.gridOptionsService.get("suppressRowDeselection"),p="rowClicked";this.rowNode.isSelected()?c?this.rowNode.setSelectedParams({newValue:!1,event:t,source:p}):s?u&&this.rowNode.setSelectedParams({newValue:!1,event:t,source:p}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!o,rangeSelect:o,event:t,source:p}):this.rowNode.setSelectedParams({newValue:!0,clearSelection:!c&&!s,rangeSelect:o,event:t,source:p})}isRowSelectionBlocked(){return!this.rowNode.selectable||!!this.rowNode.rowPinned||!this.gridOptionsService.isRowSelection()}setupDetailRowAutoHeight(t){if(this.rowType!==Cr.FullWidthDetail||!this.gridOptionsService.get("detailRowAutoHeight"))return;const i=()=>{const s=t.clientHeight;null!=s&&s>0&&window.setTimeout(()=>{this.rowNode.setRowHeight(s),this.beans.clientSideRowModel?this.beans.clientSideRowModel.onRowHeightChanged():this.beans.serverSideRowModel&&this.beans.serverSideRowModel.onRowHeightChanged()},0)},n=this.beans.resizeObserverService.observeResize(t,i);this.addDestroyFunc(n),i()}createFullWidthParams(t,i){return this.gridOptionsService.addGridCommonParams({fullWidth:!0,data:this.rowNode.data,node:this.rowNode,value:this.rowNode.key,valueFormatted:this.rowNode.key,rowIndex:this.rowNode.rowIndex,eGridCell:t,eParentOfValue:t,pinned:i,addRenderedRowListener:this.addEventListener.bind(this),registerRowDragger:(s,o,a,c)=>this.addFullWidthRowDragging(s,o,a,c)})}addFullWidthRowDragging(t,i,n="",s){if(!this.isFullWidth())return;const o=new Mh(()=>n,this.rowNode,void 0,t,i,s);this.createManagedBean(o,this.beans.context)}onUiLevelChanged(){const t=this.beans.rowCssClassCalculator.calculateRowLevel(this.rowNode);if(this.rowLevel!=t){const i="ag-row-level-"+t,n="ag-row-level-"+this.rowLevel;this.allRowGuis.forEach(s=>{s.rowComp.addOrRemoveCssClass(i,!0),s.rowComp.addOrRemoveCssClass(n,!1)})}this.rowLevel=t}isFirstRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageFirstRow()}isLastRowOnPage(){return this.rowNode.rowIndex===this.beans.paginationProxy.getPageLastRow()}refreshFirstAndLastRowStyles(){const t=this.isFirstRowOnPage(),i=this.isLastRowOnPage();this.firstRowOnPage!==t&&(this.firstRowOnPage=t,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-first",t))),this.lastRowOnPage!==i&&(this.lastRowOnPage=i,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-last",i)))}stopEditing(t=!1){if(this.stoppingRowEdit)return;const i=this.getAllCellCtrls(),n=this.editingRow;this.stoppingRowEdit=!0;let s=!1;for(const o of i){const a=o.stopEditing(t);n&&!t&&!s&&a&&(s=!0)}if(s){const o=this.createRowEvent(G.EVENT_ROW_VALUE_CHANGED);this.beans.eventService.dispatchEvent(o)}n&&this.setEditingRow(!1),this.stoppingRowEdit=!1}setInlineEditingCss(t){this.allRowGuis.forEach(i=>{i.rowComp.addOrRemoveCssClass("ag-row-inline-editing",t),i.rowComp.addOrRemoveCssClass("ag-row-not-inline-editing",!t)})}setEditingRow(t){this.editingRow=t,this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass("ag-row-editing",t));const i=this.createRowEvent(t?G.EVENT_ROW_EDITING_STARTED:G.EVENT_ROW_EDITING_STOPPED);this.beans.eventService.dispatchEvent(i)}startRowEditing(t=null,i=null,n=null){this.editingRow||this.getAllCellCtrls().reduce((o,a)=>{const c=a===i;return a.startEditing(c?t:null,c,n),!!o||a.isEditing()},!1)&&this.setEditingRow(!0)}getAllCellCtrls(){return 0===this.leftCellCtrls.list.length&&0===this.rightCellCtrls.list.length?this.centerCellCtrls.list:[...this.centerCellCtrls.list,...this.leftCellCtrls.list,...this.rightCellCtrls.list]}postProcessClassesFromGridOptions(){const t=this.beans.rowCssClassCalculator.processClassesFromGridOptions(this.rowNode);!t||!t.length||t.forEach(i=>{this.allRowGuis.forEach(n=>n.rowComp.addOrRemoveCssClass(i,!0))})}postProcessRowClassRules(){this.beans.rowCssClassCalculator.processRowClassRules(this.rowNode,t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!0))},t=>{this.allRowGuis.forEach(i=>i.rowComp.addOrRemoveCssClass(t,!1))})}setStylesFromGridOptions(t,i){t&&(this.rowStyles=this.processStylesFromGridOptions()),this.forEachGui(i,n=>n.rowComp.setUserStyles(this.rowStyles))}getPinnedForContainer(t){return t===Ii.LEFT?"left":t===Ii.RIGHT?"right":null}getInitialRowClasses(t){const i=this.getPinnedForContainer(t),n={rowNode:this.rowNode,rowFocused:this.rowFocused,fadeRowIn:this.fadeInAnimation[t],rowIsEven:this.rowNode.rowIndex%2==0,rowLevel:this.rowLevel,fullWidthRow:this.isFullWidth(),firstRowOnPage:this.isFirstRowOnPage(),lastRowOnPage:this.isLastRowOnPage(),printLayout:this.printLayout,expandable:this.rowNode.isExpandable(),pinned:i};return this.beans.rowCssClassCalculator.getInitialRowClasses(n)}processStylesFromGridOptions(){const t=this.gridOptionsService.get("rowStyle");if(t&&"function"==typeof t)return void console.warn("AG Grid: rowStyle should be an object of key/value styles, not be a function, use getRowStyle() instead");const i=this.gridOptionsService.getCallback("getRowStyle");let n;return i&&(n=i({data:this.rowNode.data,node:this.rowNode,rowIndex:this.rowNode.rowIndex})),n||t?Object.assign({},t,n):this.emptyStyle}onRowSelected(t){const i=this.beans.gridOptionsService.getDocument(),n=!!this.rowNode.isSelected();this.forEachGui(t,s=>{s.rowComp.addOrRemoveCssClass("ag-row-selected",n),Ef(s.element,n),s.element.contains(i.activeElement)&&(s===this.centerGui||s===this.fullWidthGui)&&this.announceDescription()})}announceDescription(){if(this.isRowSelectionBlocked())return;const t=this.rowNode.isSelected();if(t&&this.beans.gridOptionsService.get("suppressRowDeselection"))return;const n=this.beans.localeService.getLocaleTextFunc()(t?"ariaRowDeselect":"ariaRowSelect",`Press SPACE to ${t?"deselect":"select"} this row.`);this.beans.ariaAnnouncementService.announceValue(n)}isUseAnimationFrameForCreate(){return this.useAnimationFrameForCreate}addHoverFunctionality(t){!this.active||(this.addManagedListener(t,"mouseenter",()=>this.rowNode.onMouseEnter()),this.addManagedListener(t,"mouseleave",()=>this.rowNode.onMouseLeave()),this.addManagedListener(this.rowNode,Gt.EVENT_MOUSE_ENTER,()=>{!this.beans.dragService.isDragging()&&!this.gridOptionsService.get("suppressRowHoverHighlight")&&(t.classList.add("ag-row-hover"),this.rowNode.setHovered(!0))}),this.addManagedListener(this.rowNode,Gt.EVENT_MOUSE_LEAVE,()=>{t.classList.remove("ag-row-hover"),this.rowNode.setHovered(!1)}))}roundRowTopToBounds(t){const i=this.beans.ctrlsService.getGridBodyCtrl().getScrollFeature().getApproximateVScollPosition(),n=this.applyPaginationOffset(i.top,!0)-100,s=this.applyPaginationOffset(i.bottom,!0)+100;return Math.min(Math.max(n,t),s)}getFrameworkOverrides(){return this.beans.frameworkOverrides}forEachGui(t,i){t?i(t):this.allRowGuis.forEach(i)}onRowHeightChanged(t){if(null==this.rowNode.rowHeight)return;const i=this.rowNode.rowHeight,n=this.beans.environment.getDefaultRowHeight(),o=this.gridOptionsService.isGetRowHeightFunction()?this.gridOptionsService.getRowHeightForNode(this.rowNode).height:void 0,a=o?Math.min(n,o)-2+"px":void 0;this.forEachGui(t,c=>{c.element.style.height=`${i}px`,a&&c.element.style.setProperty("--ag-line-height",a)})}addEventListener(t,i){super.addEventListener(t,i)}removeEventListener(t,i){super.removeEventListener(t,i)}destroyFirstPass(t=!1){if(this.active=!1,!t&&this.gridOptionsService.isAnimateRows()&&!this.isSticky())if(null!=this.rowNode.rowTop){const s=this.roundRowTopToBounds(this.rowNode.rowTop);this.setRowTop(s)}else this.allRowGuis.forEach(s=>s.rowComp.addOrRemoveCssClass("ag-opacity-zero",!0));this.rowNode.setHovered(!1);const i=this.createRowEvent(G.EVENT_VIRTUAL_ROW_REMOVED);this.dispatchEvent(i),this.beans.eventService.dispatchEvent(i),super.destroy()}destroySecondPass(){this.allRowGuis.length=0,this.stopEditing();const t=i=>(i.list.forEach(n=>n.destroy()),{list:[],map:{}});this.centerCellCtrls=t(this.centerCellCtrls),this.leftCellCtrls=t(this.leftCellCtrls),this.rightCellCtrls=t(this.rightCellCtrls)}setFocusedClasses(t){this.forEachGui(t,i=>{i.rowComp.addOrRemoveCssClass("ag-row-focus",this.rowFocused),i.rowComp.addOrRemoveCssClass("ag-row-no-focus",!this.rowFocused)})}onCellFocusChanged(){const t=this.beans.focusService.isRowFocused(this.rowNode.rowIndex,this.rowNode.rowPinned);t!==this.rowFocused&&(this.rowFocused=t,this.setFocusedClasses()),!t&&this.editingRow&&this.stopEditing(!1)}onPaginationChanged(){const t=this.beans.paginationProxy.getCurrentPage();this.paginationPage!==t&&(this.paginationPage=t,this.onTopChanged()),this.refreshFirstAndLastRowStyles()}onTopChanged(){this.setRowTop(this.rowNode.rowTop)}onPaginationPixelOffsetChanged(){this.onTopChanged()}applyPaginationOffset(t,i=!1){return this.rowNode.isRowPinned()||this.rowNode.sticky?t:t+this.beans.paginationProxy.getPixelOffset()*(i?1:-1)}setRowTop(t){if(!this.printLayout&&Ie(t)){const i=this.applyPaginationOffset(t),o=`${this.rowNode.isRowPinned()||this.rowNode.sticky?i:this.beans.rowContainerHeightService.getRealPixelPosition(i)}px`;this.setRowTopStyle(o)}}getInitialRowTop(t){return this.suppressRowTransform?this.getInitialRowTopShared(t):void 0}getInitialTransform(t){return this.suppressRowTransform?void 0:`translateY(${this.getInitialRowTopShared(t)})`}getInitialRowTopShared(t){if(this.printLayout)return"";let i;if(this.isSticky())i=this.rowNode.stickyRowTop;else{const n=this.slideInAnimation[t]?this.roundRowTopToBounds(this.rowNode.oldRowTop):this.rowNode.rowTop,s=this.applyPaginationOffset(n);i=this.rowNode.isRowPinned()?s:this.beans.rowContainerHeightService.getRealPixelPosition(s)}return i+"px"}setRowTopStyle(t){this.allRowGuis.forEach(i=>this.suppressRowTransform?i.rowComp.setTop(t):i.rowComp.setTransform(`translateY(${t})`))}getRowNode(){return this.rowNode}getCellCtrl(t){let i=null;return this.getAllCellCtrls().forEach(n=>{n.getColumn()==t&&(i=n)}),null!=i||this.getAllCellCtrls().forEach(n=>{n.getColSpanningList().indexOf(t)>=0&&(i=n)}),i}onRowIndexChanged(){null!=this.rowNode.rowIndex&&(this.onCellFocusChanged(),this.updateRowIndexes(),this.postProcessCss())}getRowIndex(){return this.rowNode.getRowIndexString()}updateRowIndexes(t){const i=this.rowNode.getRowIndexString(),n=this.beans.headerNavigationService.getHeaderRowCount()+this.beans.filterManager.getHeaderRowCount(),s=this.rowNode.rowIndex%2==0,o=n+this.rowNode.rowIndex+1;this.forEachGui(t,a=>{a.rowComp.setRowIndex(i),a.rowComp.addOrRemoveCssClass("ag-row-even",s),a.rowComp.addOrRemoveCssClass("ag-row-odd",!s),dv(a.element,o)})}}return r.DOM_DATA_KEY_ROW_CTRL="renderedRow",r})();var Co=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class yo extends Ee{constructor(e){super(),this.element=e}postConstruct(){this.addKeyboardListeners(),this.addMouseListeners(),this.mockContextMenuForIPad()}addKeyboardListeners(){const e="keydown",t=this.processKeyboardEvent.bind(this,e);this.addManagedListener(this.element,e,t)}addMouseListeners(){["dblclick","contextmenu","mouseover","mouseout","click",Jw("touchstart")?"touchstart":"mousedown"].forEach(i=>{const n=this.processMouseEvent.bind(this,i);this.addManagedListener(this.element,i,n)})}processMouseEvent(e,t){if(!this.mouseEventService.isEventFromThisGrid(t)||yl(t))return;const i=this.getRowForEvent(t),n=this.mouseEventService.getRenderedCellForEvent(t);"contextmenu"===e?this.handleContextMenuMouseEvent(t,void 0,i,n):(n&&n.onMouseEvent(e,t),i&&i.onMouseEvent(e,t))}mockContextMenuForIPad(){if(!Vo())return;const e=new Ln(this.element);this.addManagedListener(e,Ln.EVENT_LONG_TAP,i=>{const n=this.getRowForEvent(i.touchEvent),s=this.mouseEventService.getRenderedCellForEvent(i.touchEvent);this.handleContextMenuMouseEvent(void 0,i.touchEvent,n,s)}),this.addDestroyFunc(()=>e.destroy())}getRowForEvent(e){let t=e.target;for(;t;){const i=this.gridOptionsService.getDomData(t,$d.DOM_DATA_KEY_ROW_CTRL);if(i)return i;t=t.parentElement}return null}handleContextMenuMouseEvent(e,t,i,n){const s=i?i.getRowNode():null,o=n?n.getColumn():null;let a=null;o&&(n.dispatchCellContextMenuEvent((e||t)??null),a=this.valueService.getValue(o,s));const c=this.ctrlsService.getGridBodyCtrl(),u=n?n.getGui():c.getGridBodyElement();this.menuService.showContextMenu({mouseEvent:e,touchEvent:t,rowNode:s,column:o,value:a,anchorToElement:u})}getControlsForEventTarget(e){return{cellCtrl:oS(this.gridOptionsService,e,Pc.DOM_DATA_KEY_CELL_CTRL),rowCtrl:oS(this.gridOptionsService,e,$d.DOM_DATA_KEY_ROW_CTRL)}}processKeyboardEvent(e,t){const{cellCtrl:i,rowCtrl:n}=this.getControlsForEventTarget(t.target);t.defaultPrevented||(i?this.processCellKeyboardEvent(i,e,t):n&&n.isFullWidth()&&this.processFullWidthRowKeyboardEvent(n,e,t))}processCellKeyboardEvent(e,t,i){const n=e.getRowNode(),s=e.getColumn(),o=e.isEditing();if(!xS(this.gridOptionsService,i,n,s,o)&&"keydown"===t&&(!o&&this.navigationService.handlePageScrollingKey(i)||e.onKeyDown(i),this.doGridOperations(i,e.isEditing()),Th(i)&&e.processCharacter(i)),"keydown"===t){const c=e.createEvent(i,G.EVENT_CELL_KEY_DOWN);this.eventService.dispatchEvent(c)}}processFullWidthRowKeyboardEvent(e,t,i){const n=e.getRowNode(),s=this.focusService.getFocusedCell();if(!xS(this.gridOptionsService,i,n,s&&s.column,!1)){const c=i.key;if("keydown"===t)switch(c){case ge.PAGE_HOME:case ge.PAGE_END:case ge.PAGE_UP:case ge.PAGE_DOWN:this.navigationService.handlePageScrollingKey(i,!0);break;case ge.UP:case ge.DOWN:e.onKeyboardNavigate(i);break;case ge.TAB:e.onTabKeyDown(i)}}if("keydown"===t){const c=e.createRowEvent(G.EVENT_CELL_KEY_DOWN,i);this.eventService.dispatchEvent(c)}}doGridOperations(e,t){if(!e.ctrlKey&&!e.metaKey||t||!this.mouseEventService.isEventFromThisGrid(e))return;const i=HR(e);return i===ge.A?this.onCtrlAndA(e):i===ge.C?this.onCtrlAndC(e):i===ge.D?this.onCtrlAndD(e):i===ge.V?this.onCtrlAndV(e):i===ge.X?this.onCtrlAndX(e):i===ge.Y?this.onCtrlAndY():i===ge.Z?this.onCtrlAndZ(e):void 0}onCtrlAndA(e){const{pinnedRowModel:t,paginationProxy:i,rangeService:n}=this;if(n&&i.isRowsToRender()){const[s,o]=[t.isEmpty("top"),t.isEmpty("bottom")],a=s?null:"top";let c,u;o?(c=null,u=this.paginationProxy.getRowCount()-1):(c="bottom",u=t.getPinnedBottomRowData().length-1);const p=this.columnModel.getAllDisplayedColumns();if(us(p))return;n.setCellRange({rowStartIndex:0,rowStartPinned:a,rowEndIndex:u,rowEndPinned:c,columnStart:p[0],columnEnd:Xt(p)})}e.preventDefault()}onCtrlAndC(e){if(!this.clipboardService||this.gridOptionsService.get("enableCellTextSelection"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.copyToClipboard())}onCtrlAndX(e){if(!this.clipboardService||this.gridOptionsService.get("enableCellTextSelection")||this.gridOptionsService.get("suppressCutToClipboard"))return;const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||(e.preventDefault(),this.clipboardService.cutToClipboard(void 0,"ui"))}onCtrlAndV(e){const{cellCtrl:t,rowCtrl:i}=this.getControlsForEventTarget(e.target);t?.isEditing()||i?.isEditing()||this.clipboardService&&!this.gridOptionsService.get("suppressClipboardPaste")&&this.clipboardService.pasteFromClipboard()}onCtrlAndD(e){this.clipboardService&&!this.gridOptionsService.get("suppressClipboardPaste")&&this.clipboardService.copyRangeDown(),e.preventDefault()}onCtrlAndZ(e){!this.gridOptionsService.get("undoRedoCellEditing")||(e.preventDefault(),e.shiftKey?this.undoRedoService.redo("ui"):this.undoRedoService.undo("ui"))}onCtrlAndY(){this.undoRedoService.redo("ui")}}Co([P("mouseEventService")],yo.prototype,"mouseEventService",void 0),Co([P("valueService")],yo.prototype,"valueService",void 0),Co([P("menuService")],yo.prototype,"menuService",void 0),Co([P("ctrlsService")],yo.prototype,"ctrlsService",void 0),Co([P("navigationService")],yo.prototype,"navigationService",void 0),Co([P("focusService")],yo.prototype,"focusService",void 0),Co([P("undoRedoService")],yo.prototype,"undoRedoService",void 0),Co([P("columnModel")],yo.prototype,"columnModel",void 0),Co([P("paginationProxy")],yo.prototype,"paginationProxy",void 0),Co([P("pinnedRowModel")],yo.prototype,"pinnedRowModel",void 0),Co([Pt("rangeService")],yo.prototype,"rangeService",void 0),Co([Pt("clipboardService")],yo.prototype,"clipboardService",void 0),Co([Se],yo.prototype,"postConstruct",null);var Pv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Kd extends Ee{constructor(e){super(),this.centerContainerCtrl=e}postConstruct(){this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),this.listenForResize()}),this.addManagedListener(this.eventService,G.EVENT_SCROLLBAR_WIDTH_CHANGED,this.onScrollbarWidthChanged.bind(this)),this.addManagedPropertyListeners(["alwaysShowHorizontalScroll","alwaysShowVerticalScroll"],()=>{this.checkViewportAndScrolls()})}listenForResize(){const e=()=>this.onCenterViewportResized();this.centerContainerCtrl.registerViewportResizeListener(e),this.gridBodyCtrl.registerBodyViewportResizeListener(e)}onScrollbarWidthChanged(){this.checkViewportAndScrolls()}onCenterViewportResized(){if(this.centerContainerCtrl.isViewportInTheDOMTree()){this.keepPinnedColumnsNarrowerThanViewport(),this.checkViewportAndScrolls();const e=this.centerContainerCtrl.getCenterWidth();e!==this.centerWidth&&(this.centerWidth=e,this.columnModel.refreshFlexedColumns({viewportWidth:this.centerWidth,updateBodyWidths:!0,fireResizedEvent:!0}))}else this.bodyHeight=0}keepPinnedColumnsNarrowerThanViewport(){const t=Ec(this.gridBodyCtrl.getBodyViewportElement());if(t<=50)return;let i=this.getPinnedColumnsOverflowingViewport(t-50);const n=this.gridOptionsService.getCallback("processUnpinnedColumns");!i.length||(n&&(i=n({columns:i,viewportWidth:t})),this.columnModel.setColumnsPinned(i,null,"viewportSizeFeature"))}getPinnedColumnsOverflowingViewport(e){const n=this.pinnedWidthService.getPinnedRightWidth()+this.pinnedWidthService.getPinnedLeftWidth();if(n<e)return[];const s=[...this.columnModel.getDisplayedLeftColumns()],o=[...this.columnModel.getDisplayedRightColumns()];let a=0,c=0;const p=[];let g=n-0-e;for(;(c<s.length||a<o.length)&&g>0;){if(a<o.length){const m=o[a++];g-=m.getActualWidth(),p.push(m)}if(c<s.length&&g>0){const m=s[c++];g-=m.getActualWidth(),p.push(m)}}return p}checkViewportAndScrolls(){this.updateScrollVisibleService(),this.checkBodyHeight(),this.onHorizontalViewportChanged(),this.gridBodyCtrl.getScrollFeature().checkScrollLeft()}getBodyHeight(){return this.bodyHeight}checkBodyHeight(){const t=Nd(this.gridBodyCtrl.getBodyViewportElement());this.bodyHeight!==t&&(this.bodyHeight=t,this.eventService.dispatchEvent({type:G.EVENT_BODY_HEIGHT_CHANGED}))}updateScrollVisibleService(){this.updateScrollVisibleServiceImpl(),setTimeout(this.updateScrollVisibleServiceImpl.bind(this),500)}updateScrollVisibleServiceImpl(){const e={horizontalScrollShowing:this.isHorizontalScrollShowing(),verticalScrollShowing:this.gridBodyCtrl.isVerticalScrollShowing()};this.scrollVisibleService.setScrollsVisible(e)}isHorizontalScrollShowing(){return this.centerContainerCtrl.isHorizontalScrollShowing()}onHorizontalViewportChanged(){const e=this.centerContainerCtrl.getCenterWidth(),t=this.centerContainerCtrl.getViewportScrollLeft();this.columnModel.setViewportPosition(e,t)}}Pv([P("ctrlsService")],Kd.prototype,"ctrlsService",void 0),Pv([P("pinnedWidthService")],Kd.prototype,"pinnedWidthService",void 0),Pv([P("columnModel")],Kd.prototype,"columnModel",void 0),Pv([P("scrollVisibleService")],Kd.prototype,"scrollVisibleService",void 0),Pv([Se],Kd.prototype,"postConstruct",null);var t0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class n0 extends Ee{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,G.EVENT_LEFT_PINNED_WIDTH_CHANGED,this.onPinnedLeftWidthChanged.bind(this))}onPinnedLeftWidthChanged(){const e=this.pinnedWidthService.getPinnedLeftWidth();si(this.element,e>0),Ho(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedLeftWidth()}}t0([P("pinnedWidthService")],n0.prototype,"pinnedWidthService",void 0),t0([Se],n0.prototype,"postConstruct",null);var vA=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class s0 extends Ee{constructor(e){super(),this.element=e}postConstruct(){this.addManagedListener(this.eventService,G.EVENT_RIGHT_PINNED_WIDTH_CHANGED,this.onPinnedRightWidthChanged.bind(this))}onPinnedRightWidthChanged(){const e=this.pinnedWidthService.getPinnedRightWidth();si(this.element,e>0),Ho(this.element,e)}getWidth(){return this.pinnedWidthService.getPinnedRightWidth()}}vA([P("pinnedWidthService")],s0.prototype,"pinnedWidthService",void 0),vA([Se],s0.prototype,"postConstruct",null);var r0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class XS extends Ee{constructor(e,t){super(),this.eContainer=e,this.eViewport=t}postConstruct(){this.addManagedListener(this.eventService,G.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onHeightChanged.bind(this))}onHeightChanged(){const e=this.maxDivHeightScaler.getUiContainerHeight(),t=null!=e?`${e}px`:"";this.eContainer.style.height=t,this.eViewport&&(this.eViewport.style.height=t)}}r0([P("rowContainerHeightService")],XS.prototype,"maxDivHeightScaler",void 0),r0([Se],XS.prototype,"postConstruct",null);var ZS=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class JS extends Ee{constructor(e){super(),this.eContainer=e}postConstruct(){gt(this.rangeService)||(this.params={eElement:this.eContainer,onDragStart:this.rangeService.onDragStart.bind(this.rangeService),onDragStop:this.rangeService.onDragStop.bind(this.rangeService),onDragging:this.rangeService.onDragging.bind(this.rangeService)},this.addManagedPropertyListener("enableRangeSelection",t=>{t.currentValue?this.enableFeature():this.disableFeature()}),this.addDestroyFunc(()=>this.disableFeature()),this.gridOptionsService.get("enableRangeSelection")&&this.enableFeature())}enableFeature(){this.dragService.addDragSource(this.params)}disableFeature(){this.dragService.removeDragSource(this.params)}}ZS([Pt("rangeService")],JS.prototype,"rangeService",void 0),ZS([P("dragService")],JS.prototype,"dragService",void 0),ZS([Se],JS.prototype,"postConstruct",null);var o0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Lh extends Ee{constructor(e,t=!1){super(),this.callback=e,this.addSpacer=t}postConstruct(){const e=this.setWidth.bind(this);this.addManagedPropertyListener("domLayout",e),this.addManagedListener(this.eventService,G.EVENT_COLUMN_CONTAINER_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,G.EVENT_LEFT_PINNED_WIDTH_CHANGED,e),this.addSpacer&&(this.addManagedListener(this.eventService,G.EVENT_RIGHT_PINNED_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,G.EVENT_SCROLL_VISIBILITY_CHANGED,e),this.addManagedListener(this.eventService,G.EVENT_SCROLLBAR_WIDTH_CHANGED,e)),this.setWidth()}setWidth(){const{columnModel:e}=this,t=this.gridOptionsService.isDomLayout("print"),i=e.getBodyContainerWidth(),n=e.getDisplayedColumnsLeftWidth(),s=e.getDisplayedColumnsRightWidth();let o;t?o=i+n+s:(o=i,this.addSpacer&&0===(this.gridOptionsService.get("enableRtl")?n:s)&&this.scrollVisibleService.isVerticalScrollShowing()&&(o+=this.gridOptionsService.getScrollbarWidth())),this.callback(o)}}o0([P("columnModel")],Lh.prototype,"columnModel",void 0),o0([P("scrollVisibleService")],Lh.prototype,"scrollVisibleService",void 0),o0([Se],Lh.prototype,"postConstruct",null);var kh=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Me=(()=>(function(r){r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.FULL_WIDTH="fullWidth",r.TOP_LEFT="topLeft",r.TOP_RIGHT="topRight",r.TOP_CENTER="topCenter",r.TOP_FULL_WIDTH="topFullWidth",r.STICKY_TOP_LEFT="stickyTopLeft",r.STICKY_TOP_RIGHT="stickyTopRight",r.STICKY_TOP_CENTER="stickyTopCenter",r.STICKY_TOP_FULL_WIDTH="stickyTopFullWidth",r.BOTTOM_LEFT="bottomLeft",r.BOTTOM_RIGHT="bottomRight",r.BOTTOM_CENTER="bottomCenter",r.BOTTOM_FULL_WIDTH="bottomFullWidth"}(Me||(Me={})),Me))(),Ii=(()=>(function(r){r.LEFT="left",r.RIGHT="right",r.CENTER="center",r.FULL_WIDTH="fullWidth"}(Ii||(Ii={})),Ii))();const VP=Sc([[Me.CENTER,"ag-center-cols-container"],[Me.LEFT,"ag-pinned-left-cols-container"],[Me.RIGHT,"ag-pinned-right-cols-container"],[Me.FULL_WIDTH,"ag-full-width-container"],[Me.TOP_CENTER,"ag-floating-top-container"],[Me.TOP_LEFT,"ag-pinned-left-floating-top"],[Me.TOP_RIGHT,"ag-pinned-right-floating-top"],[Me.TOP_FULL_WIDTH,"ag-floating-top-full-width-container"],[Me.STICKY_TOP_CENTER,"ag-sticky-top-container"],[Me.STICKY_TOP_LEFT,"ag-pinned-left-sticky-top"],[Me.STICKY_TOP_RIGHT,"ag-pinned-right-sticky-top"],[Me.STICKY_TOP_FULL_WIDTH,"ag-sticky-top-full-width-container"],[Me.BOTTOM_CENTER,"ag-floating-bottom-container"],[Me.BOTTOM_LEFT,"ag-pinned-left-floating-bottom"],[Me.BOTTOM_RIGHT,"ag-pinned-right-floating-bottom"],[Me.BOTTOM_FULL_WIDTH,"ag-floating-bottom-full-width-container"]]),BP=Sc([[Me.CENTER,"ag-center-cols-viewport"],[Me.TOP_CENTER,"ag-floating-top-viewport"],[Me.STICKY_TOP_CENTER,"ag-sticky-top-viewport"],[Me.BOTTOM_CENTER,"ag-floating-bottom-viewport"]]);class Ic extends Ee{constructor(e){super(),this.visible=!0,this.EMPTY_CTRLS=[],this.name=e,this.isFullWithContainer=this.name===Me.TOP_FULL_WIDTH||this.name===Me.STICKY_TOP_FULL_WIDTH||this.name===Me.BOTTOM_FULL_WIDTH||this.name===Me.FULL_WIDTH}static getRowContainerCssClasses(e){return{container:VP.get(e),viewport:BP.get(e)}}static getPinned(e){switch(e){case Me.BOTTOM_LEFT:case Me.TOP_LEFT:case Me.STICKY_TOP_LEFT:case Me.LEFT:return"left";case Me.BOTTOM_RIGHT:case Me.TOP_RIGHT:case Me.STICKY_TOP_RIGHT:case Me.RIGHT:return"right";default:return null}}postConstruct(){this.enableRtl=this.gridOptionsService.get("enableRtl"),this.forContainers([Me.CENTER],()=>this.viewportSizeFeature=this.createManagedBean(new Kd(this)))}registerWithCtrlsService(){switch(this.name){case Me.CENTER:this.ctrlsService.registerCenterRowContainerCtrl(this);break;case Me.LEFT:this.ctrlsService.registerLeftRowContainerCtrl(this);break;case Me.RIGHT:this.ctrlsService.registerRightRowContainerCtrl(this);break;case Me.TOP_CENTER:this.ctrlsService.registerTopCenterRowContainerCtrl(this);break;case Me.TOP_LEFT:this.ctrlsService.registerTopLeftRowContainerCon(this);break;case Me.TOP_RIGHT:this.ctrlsService.registerTopRightRowContainerCtrl(this);break;case Me.STICKY_TOP_CENTER:this.ctrlsService.registerStickyTopCenterRowContainerCtrl(this);break;case Me.STICKY_TOP_LEFT:this.ctrlsService.registerStickyTopLeftRowContainerCon(this);break;case Me.STICKY_TOP_RIGHT:this.ctrlsService.registerStickyTopRightRowContainerCtrl(this);break;case Me.BOTTOM_CENTER:this.ctrlsService.registerBottomCenterRowContainerCtrl(this);break;case Me.BOTTOM_LEFT:this.ctrlsService.registerBottomLeftRowContainerCtrl(this);break;case Me.BOTTOM_RIGHT:this.ctrlsService.registerBottomRightRowContainerCtrl(this)}}forContainers(e,t){e.indexOf(this.name)>=0&&t()}getContainerElement(){return this.eContainer}getViewportSizeFeature(){return this.viewportSizeFeature}setComp(e,t,i){this.comp=e,this.eContainer=t,this.eViewport=i,this.createManagedBean(new yo(this.eContainer)),this.addPreventScrollWhileDragging(),this.listenOnDomOrder(),this.stopHScrollOnPinnedRows();const c=[Me.TOP_CENTER,Me.TOP_LEFT,Me.TOP_RIGHT,Me.BOTTOM_CENTER,Me.BOTTOM_LEFT,Me.BOTTOM_RIGHT,Me.CENTER,Me.LEFT,Me.RIGHT,Me.STICKY_TOP_CENTER,Me.STICKY_TOP_LEFT,Me.STICKY_TOP_RIGHT],u=[Me.CENTER,Me.LEFT,Me.RIGHT,Me.FULL_WIDTH],p=[Me.CENTER,Me.TOP_CENTER,Me.STICKY_TOP_CENTER,Me.BOTTOM_CENTER],m=[Me.RIGHT,Me.BOTTOM_RIGHT,Me.TOP_RIGHT,Me.STICKY_TOP_RIGHT];this.forContainers([Me.LEFT,Me.BOTTOM_LEFT,Me.TOP_LEFT,Me.STICKY_TOP_LEFT],()=>{this.pinnedWidthFeature=this.createManagedBean(new n0(this.eContainer)),this.addManagedListener(this.eventService,G.EVENT_LEFT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(m,()=>{this.pinnedWidthFeature=this.createManagedBean(new s0(this.eContainer)),this.addManagedListener(this.eventService,G.EVENT_RIGHT_PINNED_WIDTH_CHANGED,()=>this.onPinnedWidthChanged())}),this.forContainers(u,()=>this.createManagedBean(new XS(this.eContainer,this.name===Me.CENTER?i:void 0))),this.forContainers(c,()=>this.createManagedBean(new JS(this.eContainer))),this.forContainers(p,()=>this.createManagedBean(new Lh(y=>this.comp.setContainerWidth(`${y}px`)))),this.addListeners(),this.registerWithCtrlsService()}addListeners(){this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>this.onDisplayedColumnsChanged()),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>this.onDisplayedColumnsWidthChanged()),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_ROWS_CHANGED,e=>this.onDisplayedRowsChanged(e.afterScroll)),this.onDisplayedColumnsChanged(),this.onDisplayedColumnsWidthChanged(),this.onDisplayedRowsChanged()}listenOnDomOrder(){if([Me.STICKY_TOP_CENTER,Me.STICKY_TOP_LEFT,Me.STICKY_TOP_RIGHT,Me.STICKY_TOP_FULL_WIDTH].indexOf(this.name)>=0)return void this.comp.setDomOrder(!0);const i=()=>{const n=this.gridOptionsService.get("ensureDomOrder"),s=this.gridOptionsService.isDomLayout("print");this.comp.setDomOrder(n||s)};this.addManagedPropertyListener("domLayout",i),i()}stopHScrollOnPinnedRows(){this.forContainers([Me.TOP_CENTER,Me.STICKY_TOP_CENTER,Me.BOTTOM_CENTER],()=>{this.addManagedListener(this.eViewport,"scroll",()=>this.eViewport.scrollLeft=0)})}onDisplayedColumnsChanged(){this.forContainers([Me.CENTER],()=>this.onHorizontalViewportChanged())}onDisplayedColumnsWidthChanged(){this.forContainers([Me.CENTER],()=>this.onHorizontalViewportChanged())}addPreventScrollWhileDragging(){const e=t=>{this.dragService.isDragging()&&t.cancelable&&t.preventDefault()};this.eContainer.addEventListener("touchmove",e,{passive:!1}),this.addDestroyFunc(()=>this.eContainer.removeEventListener("touchmove",e))}onHorizontalViewportChanged(e=!1){const t=this.getCenterWidth(),i=this.getCenterViewportScrollLeft();this.columnModel.setViewportPosition(t,i,e)}getCenterWidth(){return Ec(this.eViewport)}getCenterViewportScrollLeft(){return vv(this.eViewport,this.enableRtl)}registerViewportResizeListener(e){const t=this.resizeObserverService.observeResize(this.eViewport,e);this.addDestroyFunc(()=>t())}isViewportInTheDOMTree(){return EE(this.eViewport)}getViewportScrollLeft(){return vv(this.eViewport,this.enableRtl)}isHorizontalScrollShowing(){return this.gridOptionsService.get("alwaysShowHorizontalScroll")||Xx(this.eViewport)}getViewportElement(){return this.eViewport}setContainerTranslateX(e){this.eContainer.style.transform=`translateX(${e}px)`}getHScrollPosition(){return{left:this.eViewport.scrollLeft,right:this.eViewport.scrollLeft+this.eViewport.offsetWidth}}setCenterViewportScrollLeft(e){Cv(this.eViewport,e,this.enableRtl)}isContainerVisible(){return!Ic.getPinned(this.name)||!!this.pinnedWidthFeature&&this.pinnedWidthFeature.getWidth()>0}onPinnedWidthChanged(){const e=this.isContainerVisible();this.visible!=e&&(this.visible=e,this.onDisplayedRowsChanged())}onDisplayedRowsChanged(e=!1){if(!this.visible)return void this.comp.setRowCtrls({rowCtrls:this.EMPTY_CTRLS});const t=this.gridOptionsService.isDomLayout("print"),n=this.gridOptionsService.get("embedFullWidthRows")||t,s=this.getRowCtrls().filter(o=>{const a=o.isFullWidth();return this.isFullWithContainer?!n&&a:n||!a});this.comp.setRowCtrls({rowCtrls:s,useFlushSync:e})}getRowCtrls(){switch(this.name){case Me.TOP_CENTER:case Me.TOP_LEFT:case Me.TOP_RIGHT:case Me.TOP_FULL_WIDTH:return this.rowRenderer.getTopRowCtrls();case Me.STICKY_TOP_CENTER:case Me.STICKY_TOP_LEFT:case Me.STICKY_TOP_RIGHT:case Me.STICKY_TOP_FULL_WIDTH:return this.rowRenderer.getStickyTopRowCtrls();case Me.BOTTOM_CENTER:case Me.BOTTOM_LEFT:case Me.BOTTOM_RIGHT:case Me.BOTTOM_FULL_WIDTH:return this.rowRenderer.getBottomRowCtrls();default:return this.rowRenderer.getCentreRowCtrls()}}}kh([P("dragService")],Ic.prototype,"dragService",void 0),kh([P("ctrlsService")],Ic.prototype,"ctrlsService",void 0),kh([P("columnModel")],Ic.prototype,"columnModel",void 0),kh([P("resizeObserverService")],Ic.prototype,"resizeObserverService",void 0),kh([P("rowRenderer")],Ic.prototype,"rowRenderer",void 0),kh([Se],Ic.prototype,"postConstruct",null);var Al=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const HP=`<div class="ag-root ag-unselectable" role="treegrid">\n        <ag-header-root ref="gridHeader"></ag-header-root>\n        <div class="ag-floating-top" ref="eTop" role="presentation">\n            <ag-row-container ref="topLeftContainer" name="${Me.TOP_LEFT}"></ag-row-container>\n            <ag-row-container ref="topCenterContainer" name="${Me.TOP_CENTER}"></ag-row-container>\n            <ag-row-container ref="topRightContainer" name="${Me.TOP_RIGHT}"></ag-row-container>\n            <ag-row-container ref="topFullWidthContainer" name="${Me.TOP_FULL_WIDTH}"></ag-row-container>\n        </div>\n        <div class="ag-body" ref="eBody" role="presentation">\n            <div class="ag-body-viewport" ref="eBodyViewport" role="presentation">\n                <ag-row-container ref="leftContainer" name="${Me.LEFT}"></ag-row-container>\n                <ag-row-container ref="centerContainer" name="${Me.CENTER}"></ag-row-container>\n                <ag-row-container ref="rightContainer" name="${Me.RIGHT}"></ag-row-container>\n                <ag-row-container ref="fullWidthContainer" name="${Me.FULL_WIDTH}"></ag-row-container>\n            </div>\n            <ag-fake-vertical-scroll></ag-fake-vertical-scroll>\n        </div>\n        <div class="ag-sticky-top" ref="eStickyTop" role="presentation">\n            <ag-row-container ref="stickyTopLeftContainer" name="${Me.STICKY_TOP_LEFT}"></ag-row-container>\n            <ag-row-container ref="stickyTopCenterContainer" name="${Me.STICKY_TOP_CENTER}"></ag-row-container>\n            <ag-row-container ref="stickyTopRightContainer" name="${Me.STICKY_TOP_RIGHT}"></ag-row-container>\n            <ag-row-container ref="stickyTopFullWidthContainer" name="${Me.STICKY_TOP_FULL_WIDTH}"></ag-row-container>\n        </div>\n        <div class="ag-floating-bottom" ref="eBottom" role="presentation">\n            <ag-row-container ref="bottomLeftContainer" name="${Me.BOTTOM_LEFT}"></ag-row-container>\n            <ag-row-container ref="bottomCenterContainer" name="${Me.BOTTOM_CENTER}"></ag-row-container>\n            <ag-row-container ref="bottomRightContainer" name="${Me.BOTTOM_RIGHT}"></ag-row-container>\n            <ag-row-container ref="bottomFullWidthContainer" name="${Me.BOTTOM_FULL_WIDTH}"></ag-row-container>\n        </div>\n        <ag-fake-horizontal-scroll></ag-fake-horizontal-scroll>\n        <ag-overlay-wrapper></ag-overlay-wrapper>\n    </div>`;class Ol extends Ne{constructor(){super(HP)}init(){const e=(i,n)=>{const s=`${i}px`;n.style.minHeight=s,n.style.height=s},t={setRowAnimationCssOnBodyViewport:(i,n)=>this.setRowAnimationCssOnBodyViewport(i,n),setColumnCount:i=>aE(this.getGui(),i),setRowCount:i=>yh(this.getGui(),i),setTopHeight:i=>e(i,this.eTop),setBottomHeight:i=>e(i,this.eBottom),setTopDisplay:i=>this.eTop.style.display=i,setBottomDisplay:i=>this.eBottom.style.display=i,setStickyTopHeight:i=>this.eStickyTop.style.height=i,setStickyTopTop:i=>this.eStickyTop.style.top=i,setStickyTopWidth:i=>this.eStickyTop.style.width=i,setColumnMovingCss:(i,n)=>this.addOrRemoveCssClass(i,n),updateLayoutClasses:(i,n)=>{[this.eBodyViewport.classList,this.eBody.classList].forEach(o=>{o.toggle(Gn.AUTO_HEIGHT,n.autoHeight),o.toggle(Gn.NORMAL,n.normal),o.toggle(Gn.PRINT,n.print)}),this.addOrRemoveCssClass(Gn.AUTO_HEIGHT,n.autoHeight),this.addOrRemoveCssClass(Gn.NORMAL,n.normal),this.addOrRemoveCssClass(Gn.PRINT,n.print)},setAlwaysVerticalScrollClass:(i,n)=>this.eBodyViewport.classList.toggle(xP,n),registerBodyViewportResizeListener:i=>{const n=this.resizeObserverService.observeResize(this.eBodyViewport,i);this.addDestroyFunc(()=>n())},setPinnedTopBottomOverflowY:i=>this.eTop.style.overflowY=this.eBottom.style.overflowY=i,setCellSelectableCss:(i,n)=>{[this.eTop,this.eBodyViewport,this.eBottom].forEach(s=>s.classList.toggle(i,n))},setBodyViewportWidth:i=>this.eBodyViewport.style.width=i};this.ctrl=this.createManagedBean(new Kr),this.ctrl.setComp(t,this.getGui(),this.eBodyViewport,this.eTop,this.eBottom,this.eStickyTop),(this.rangeService&&this.gridOptionsService.get("enableRangeSelection")||"multiple"===this.gridOptionsService.get("rowSelection"))&&Kx(this.getGui(),!0)}setRowAnimationCssOnBodyViewport(e,t){const i=this.eBodyViewport.classList;i.toggle(jf.ANIMATION_ON,t),i.toggle(jf.ANIMATION_OFF,!t)}getFloatingTopBottom(){return[this.eTop,this.eBottom]}}Al([P("resizeObserverService")],Ol.prototype,"resizeObserverService",void 0),Al([Pt("rangeService")],Ol.prototype,"rangeService",void 0),Al([re("eBodyViewport")],Ol.prototype,"eBodyViewport",void 0),Al([re("eStickyTop")],Ol.prototype,"eStickyTop",void 0),Al([re("eTop")],Ol.prototype,"eTop",void 0),Al([re("eBottom")],Ol.prototype,"eBottom",void 0),Al([re("gridHeader")],Ol.prototype,"headerRootComp",void 0),Al([re("eBody")],Ol.prototype,"eBody",void 0),Al([Se],Ol.prototype,"init",null);var QS=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Yd=class extends Ee{postConstruct(){this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onDisplayedColumnsWidthChanged.bind(this))}onDisplayedColumnsChanged(){this.update()}onDisplayedColumnsWidthChanged(){this.update()}update(){this.columnAnimationService.isActive()?this.columnAnimationService.executeLaterVMTurn(()=>{this.columnAnimationService.executeLaterVMTurn(()=>this.updateImpl())}):this.updateImpl()}updateImpl(){const e=this.ctrlsService.getCenterRowContainerCtrl();if(!e||this.columnAnimationService.isActive())return;const t={horizontalScrollShowing:e.isHorizontalScrollShowing(),verticalScrollShowing:this.isVerticalScrollShowing()};this.setScrollsVisible(t)}setScrollsVisible(e){this.horizontalScrollShowing===e.horizontalScrollShowing&&this.verticalScrollShowing===e.verticalScrollShowing||(this.horizontalScrollShowing=e.horizontalScrollShowing,this.verticalScrollShowing=e.verticalScrollShowing,this.eventService.dispatchEvent({type:G.EVENT_SCROLL_VISIBILITY_CHANGED}))}isHorizontalScrollShowing(){return this.horizontalScrollShowing}isVerticalScrollShowing(){return this.verticalScrollShowing}};QS([P("ctrlsService")],Yd.prototype,"ctrlsService",void 0),QS([P("columnAnimationService")],Yd.prototype,"columnAnimationService",void 0),QS([Se],Yd.prototype,"postConstruct",null),Yd=QS([He("scrollVisibleService")],Yd);var Iv,CA=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Fc=Iv=class extends Ee{constructor(){super(...arguments),this.gridInstanceId=Iv.gridInstanceSequence.next()}stampTopLevelGridCompWithGridInstance(e){e[Iv.GRID_DOM_KEY]=this.gridInstanceId}getRenderedCellForEvent(e){return oS(this.gridOptionsService,e.target,Pc.DOM_DATA_KEY_CELL_CTRL)}isEventFromThisGrid(e){return this.isElementInThisGrid(e.target)}isElementInThisGrid(e){let t=e;for(;t;){const i=t[Iv.GRID_DOM_KEY];if(Ie(i))return i===this.gridInstanceId;t=t.parentElement}return!1}getCellPositionForEvent(e){const t=this.getRenderedCellForEvent(e);return t?t.getCellPosition():null}getNormalisedPosition(e){const t=this.gridOptionsService.isDomLayout("normal");let n,s;if(null!=e.clientX||null!=e.clientY?(n=e.clientX,s=e.clientY):(n=e.x,s=e.y),t){const o=this.ctrlsService.getGridBodyCtrl(),a=o.getScrollFeature().getVScrollPosition();n+=o.getScrollFeature().getHScrollPosition().left,s+=a.top}return{x:n,y:s}}};Fc.gridInstanceSequence=new RE,Fc.GRID_DOM_KEY="__ag_grid_instance",CA([P("ctrlsService")],Fc.prototype,"ctrlsService",void 0),Fc=Iv=CA([He("mouseEventService")],Fc);var nr=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let ts=class extends Ee{constructor(){super(),this.onPageDown=nS(this.onPageDown,100),this.onPageUp=nS(this.onPageUp,100)}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridBodyCon=e.gridBodyCtrl})}handlePageScrollingKey(e,t=!1){const i=e.key,n=e.altKey,s=e.ctrlKey||e.metaKey,o=!!this.rangeService&&e.shiftKey,a=this.mouseEventService.getCellPositionForEvent(e);let c=!1;switch(i){case ge.PAGE_HOME:case ge.PAGE_END:!s&&!n&&(this.onHomeOrEndKey(i),c=!0);break;case ge.LEFT:case ge.RIGHT:case ge.UP:case ge.DOWN:if(!a)return!1;s&&!n&&!o&&(this.onCtrlUpDownLeftRight(i,a),c=!0);break;case ge.PAGE_DOWN:case ge.PAGE_UP:!s&&!n&&(c=this.handlePageUpDown(i,a,t))}return c&&e.preventDefault(),c}handlePageUpDown(e,t,i){return i&&(t=this.focusService.getFocusedCell()),!!t&&(e===ge.PAGE_UP?this.onPageUp(t):this.onPageDown(t),!0)}navigateTo(e){const{scrollIndex:t,scrollType:i,scrollColumn:n,focusIndex:s,focusColumn:o}=e;Ie(n)&&!n.isPinned()&&this.gridBodyCon.getScrollFeature().ensureColumnVisible(n),Ie(t)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(t,i),e.isAsync||this.gridBodyCon.getScrollFeature().ensureIndexVisible(s),this.focusService.setFocusedCell({rowIndex:s,column:o,rowPinned:null,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell({rowIndex:s,rowPinned:null,column:o})}onPageDown(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.getViewportHeight(),s=this.paginationProxy.getPixelOffset(),a=this.paginationProxy.getRowIndexAtPixel(i.top+n+s);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,a):this.navigateToNextPage(e,a)}onPageUp(e){const i=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),n=this.paginationProxy.getPixelOffset(),o=this.paginationProxy.getRowIndexAtPixel(i.top+n);this.columnModel.isAutoRowHeightActive()?this.navigateToNextPageWithAutoHeight(e,o,!0):this.navigateToNextPage(e,o,!0)}navigateToNextPage(e,t,i=!1){const n=this.getViewportHeight(),s=this.paginationProxy.getPageFirstRow(),o=this.paginationProxy.getPageLastRow(),a=this.paginationProxy.getPixelOffset(),c=this.paginationProxy.getRow(e.rowIndex);let m,g=this.paginationProxy.getRowIndexAtPixel(c?.rowTop+(i?c?.rowHeight-n-a:n-a)+a);g===e.rowIndex&&(t=g=e.rowIndex+(i?-1:1)),i?(m="bottom",g<s&&(g=s),t<s&&(t=s)):(m="top",g>o&&(g=o),t>o&&(t=o)),this.isRowTallerThanView(g)&&(t=g,m="top"),this.navigateTo({scrollIndex:t,scrollType:m,scrollColumn:null,focusIndex:g,focusColumn:e.column})}navigateToNextPageWithAutoHeight(e,t,i=!1){this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:t,focusColumn:e.column}),setTimeout(()=>{const n=this.getNextFocusIndexForAutoHeight(e,i);this.navigateTo({scrollIndex:t,scrollType:i?"bottom":"top",scrollColumn:null,focusIndex:n,focusColumn:e.column,isAsync:!0})},50)}getNextFocusIndexForAutoHeight(e,t=!1){var i;const n=t?-1:1,s=this.getViewportHeight(),o=this.paginationProxy.getPageLastRow();let a=0,c=e.rowIndex;for(;c>=0&&c<=o;){const u=this.paginationProxy.getRow(c);if(u){const p=null!==(i=u.rowHeight)&&void 0!==i?i:0;if(a+p>s)break;a+=p}c+=n}return Math.max(0,Math.min(c,o))}getViewportHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition(),i=this.gridOptionsService.getScrollbarWidth();let n=t.bottom-t.top;return this.ctrlsService.getCenterRowContainerCtrl().isHorizontalScrollShowing()&&(n-=i),n}isRowTallerThanView(e){const t=this.paginationProxy.getRow(e);if(!t)return!1;const i=t.rowHeight;return"number"==typeof i&&i>this.getViewportHeight()}onCtrlUpDownLeftRight(e,t){const i=this.cellNavigationService.getNextCellToFocus(e,t,!0),{rowIndex:n,column:s}=i;this.navigateTo({scrollIndex:n,scrollType:null,scrollColumn:s,focusIndex:n,focusColumn:s})}onHomeOrEndKey(e){const t=e===ge.PAGE_HOME,i=this.columnModel.getAllDisplayedColumns(),n=t?i[0]:Xt(i),s=t?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow();this.navigateTo({scrollIndex:s,scrollType:null,scrollColumn:n,focusIndex:s,focusColumn:n})}onTabKeyDown(e,t){const i=t.shiftKey;if(this.tabToNextCellCommon(e,i,t))t.preventDefault();else if(i){const{rowIndex:s,rowPinned:o}=e.getRowPosition();(o?0===s:s===this.paginationProxy.getPageFirstRow())&&(0===this.gridOptionsService.get("headerHeight")||this.gridOptionsService.get("suppressHeaderFocus")?this.focusService.focusNextGridCoreContainer(!0,!0):(t.preventDefault(),this.focusService.focusPreviousFromFirstCell(t)))}else e instanceof Pc&&e.focusCell(!0),this.focusService.focusNextGridCoreContainer(i)&&t.preventDefault()}tabToNextCell(e,t){const i=this.focusService.getFocusedCell();if(!i)return!1;let n=this.getCellByPosition(i);return!!(n||(n=this.rowRenderer.getRowByPosition(i),n&&n.isFullWidth()))&&this.tabToNextCellCommon(n,e,t)}tabToNextCellCommon(e,t,i){let s,n=e.isEditing();if(!n&&e instanceof Pc){const a=e.getRowCtrl();a&&(n=a.isEditing())}return s=n?"fullRow"===this.gridOptionsService.get("editType")?this.moveToNextEditingRow(e,t,i):this.moveToNextEditingCell(e,t,i):this.moveToNextCellNotEditing(e,t),s||!!this.focusService.getFocusedHeader()}moveToNextEditingCell(e,t,i=null){const n=e.getCellPosition();e.getGui().focus(),e.stopEditing();const s=this.findNextCellToFocusOn(n,t,!0);return null!=s&&(s.startEditing(null,!0,i),s.focusCell(!1),!0)}moveToNextEditingRow(e,t,i=null){const n=e.getCellPosition(),s=this.findNextCellToFocusOn(n,t,!0);if(null==s)return!1;const o=s.getCellPosition(),a=this.isCellEditable(n),c=this.isCellEditable(o),u=o&&n.rowIndex===o.rowIndex&&n.rowPinned===o.rowPinned;return a&&e.setFocusOutOnEditor(),u||(e.getRowCtrl().stopEditing(),s.getRowCtrl().startRowEditing(void 0,void 0,i)),c?(s.setFocusInOnEditor(),s.focusCell()):s.focusCell(!0),!0}moveToNextCellNotEditing(e,t){const i=this.columnModel.getAllDisplayedColumns();let n;n=e instanceof $d?Object.assign(Object.assign({},e.getRowPosition()),{column:t?i[0]:Xt(i)}):e.getCellPosition();const s=this.findNextCellToFocusOn(n,t,!1);if(s instanceof Pc)s.focusCell(!0);else if(s)return this.tryToFocusFullWidthRow(s.getRowPosition(),t);return Ie(s)}findNextCellToFocusOn(e,t,i){let n=e;for(;;){e!==n&&(e=n),t||(n=this.getLastCellOfColSpan(n)),n=this.cellNavigationService.getNextTabbedCell(n,t);const s=this.gridOptionsService.getCallback("tabToNextCell");if(Ie(s)){const u=s({backwards:t,editing:i,previousCellPosition:e,nextCellPosition:n||null});Ie(u)?(u.floating&&(st("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),u.rowPinned=u.floating),n={rowIndex:u.rowIndex,column:u.column,rowPinned:u.rowPinned}):n=null}if(!n)return null;if(n.rowIndex<0){const c=this.headerNavigationService.getHeaderRowCount();return this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:c+n.rowIndex,column:n.column},fromCell:!0}),null}const o="fullRow"===this.gridOptionsService.get("editType");if(i&&!o&&!this.isCellEditable(n))continue;this.ensureCellVisible(n);const a=this.getCellByPosition(n);if(!a){const c=this.rowRenderer.getRowByPosition(n);if(!c||!c.isFullWidth()||i)continue;return c}if(!a.isSuppressNavigable())return this.rangeService&&this.rangeService.setRangeToCell(n),a}}isCellEditable(e){const t=this.lookupRowNodeForCell(e);return!!t&&e.column.isCellEditable(t)}getCellByPosition(e){const t=this.rowRenderer.getRowByPosition(e);return t?t.getCellCtrl(e.column):null}lookupRowNodeForCell(e){return"top"===e.rowPinned?this.pinnedRowModel.getPinnedTopRow(e.rowIndex):"bottom"===e.rowPinned?this.pinnedRowModel.getPinnedBottomRow(e.rowIndex):this.paginationProxy.getRow(e.rowIndex)}navigateToNextCell(e,t,i,n){let s=i,o=!1;for(;s&&(s===i||!this.isValidNavigateCell(s));)this.gridOptionsService.get("enableRtl")?t===ge.LEFT&&(s=this.getLastCellOfColSpan(s)):t===ge.RIGHT&&(s=this.getLastCellOfColSpan(s)),s=this.cellNavigationService.getNextCellToFocus(t,s),o=gt(s);if(o&&e&&e.key===ge.UP&&(s={rowIndex:-1,rowPinned:null,column:i.column}),n){const c=this.gridOptionsService.getCallback("navigateToNextCell");if(Ie(c)){const p=c({key:t,previousCellPosition:i,nextCellPosition:s||null,event:e});Ie(p)?(p.floating&&(st("tabToNextCellFunc return type should have attributes: rowIndex, rowPinned, column. However you had 'floating', maybe you meant 'rowPinned'?"),p.rowPinned=p.floating),s={rowPinned:p.rowPinned,rowIndex:p.rowIndex,column:p.column}):s=null}}if(!s)return;if(s.rowIndex<0){const c=this.headerNavigationService.getHeaderRowCount();return void this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:c+s.rowIndex,column:i.column},event:e||void 0,fromCell:!0})}const a=this.getNormalisedPosition(s);a?this.focusPosition(a):this.tryToFocusFullWidthRow(s)}getNormalisedPosition(e){this.ensureCellVisible(e);const t=this.getCellByPosition(e);return t?(e=t.getCellPosition(),this.ensureCellVisible(e),e):null}tryToFocusFullWidthRow(e,t=!1){const i=this.columnModel.getAllDisplayedColumns(),n=this.rowRenderer.getRowByPosition(e);if(!n||!n.isFullWidth())return!1;const s=this.focusService.getFocusedCell(),o={rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:e.column||(t?Xt(i):i[0])};this.focusPosition(o);const a=null!=s&&this.rowPositionUtils.before(o,s);return this.eventService.dispatchEvent({type:G.EVENT_FULL_WIDTH_ROW_FOCUSED,rowIndex:o.rowIndex,rowPinned:o.rowPinned,column:o.column,isFullWidthCell:!0,floating:o.rowPinned,fromBelow:a}),!0}focusPosition(e){this.focusService.setFocusedCell({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell(e)}isValidNavigateCell(e){return!!this.rowPositionUtils.getRowNode(e)}getLastCellOfColSpan(e){const t=this.getCellByPosition(e);if(!t)return e;const i=t.getColSpanningList();return 1===i.length?e:{rowIndex:e.rowIndex,column:Xt(i),rowPinned:e.rowPinned}}ensureCellVisible(e){const t=this.gridOptionsService.isGroupRowsSticky(),i=this.rowModel.getRow(e.rowIndex);!(t&&i?.sticky)&&gt(e.rowPinned)&&this.gridBodyCon.getScrollFeature().ensureIndexVisible(e.rowIndex),e.column.isPinned()||this.gridBodyCon.getScrollFeature().ensureColumnVisible(e.column)}};nr([P("mouseEventService")],ts.prototype,"mouseEventService",void 0),nr([P("paginationProxy")],ts.prototype,"paginationProxy",void 0),nr([P("focusService")],ts.prototype,"focusService",void 0),nr([Pt("rangeService")],ts.prototype,"rangeService",void 0),nr([P("columnModel")],ts.prototype,"columnModel",void 0),nr([P("rowModel")],ts.prototype,"rowModel",void 0),nr([P("ctrlsService")],ts.prototype,"ctrlsService",void 0),nr([P("rowRenderer")],ts.prototype,"rowRenderer",void 0),nr([P("headerNavigationService")],ts.prototype,"headerNavigationService",void 0),nr([P("rowPositionUtils")],ts.prototype,"rowPositionUtils",void 0),nr([P("cellNavigationService")],ts.prototype,"cellNavigationService",void 0),nr([P("pinnedRowModel")],ts.prototype,"pinnedRowModel",void 0),nr([Se],ts.prototype,"postConstruct",null),ts=nr([He("navigationService")],ts);class Gh extends Vd{constructor(e){super('<div class="ag-popup-editor" tabindex="-1"/>'),this.params=e}postConstruct(){this.gridOptionsService.setDomData(this.getGui(),Gh.DOM_KEY_POPUP_EDITOR_WRAPPER,!0),this.addKeyDownListener()}addKeyDownListener(){const e=this.getGui(),t=this.params;this.addManagedListener(e,"keydown",n=>{xS(this.gridOptionsService,n,t.node,t.column,!0)||t.onKeyDown(n)})}}Gh.DOM_KEY_POPUP_EDITOR_WRAPPER="popupEditorWrapper",function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Se],Gh.prototype,"postConstruct",null);class w1 extends Ne{constructor(e,t,i,n,s){super(),this.rendererVersion=0,this.editorVersion=0,this.beans=e,this.column=t.getColumn(),this.rowNode=t.getRowNode(),this.rowCtrl=t.getRowCtrl(),this.eRow=n,this.cellCtrl=t;const o=document.createElement("div");o.setAttribute("comp-id",`${this.getCompId()}`),this.setTemplateFromElement(o);const a=this.getGui();this.forceWrapper=t.isForceWrapper(),this.refreshWrapper(!1);const c=(g,m)=>{null!=m&&""!=m?a.setAttribute(g,m):a.removeAttribute(g)};In(a,t.getCellAriaRole()),c("col-id",t.getColumnIdSanitised());const u=t.getTabIndex();void 0!==u&&c("tabindex",u.toString()),t.setComp({addOrRemoveCssClass:(g,m)=>this.addOrRemoveCssClass(g,m),setUserStyles:g=>GR(a,g),getFocusableElement:()=>this.getFocusableElement(),setIncludeSelection:g=>this.includeSelection=g,setIncludeRowDrag:g=>this.includeRowDrag=g,setIncludeDndSource:g=>this.includeDndSource=g,setRenderDetails:(g,m,y)=>this.setRenderDetails(g,m,y),setEditDetails:(g,m,y)=>this.setEditDetails(g,m,y),getCellEditor:()=>this.cellEditor||null,getCellRenderer:()=>this.cellRenderer||null,getParentOfValue:()=>this.getParentOfValue()},this.getGui(),this.eCellWrapper,i,s)}getParentOfValue(){return this.eCellValue?this.eCellValue:this.eCellWrapper?this.eCellWrapper:this.getGui()}setRenderDetails(e,t,i){if(this.cellEditor&&!this.cellEditorPopupWrapper)return;this.firstRender=null==this.firstRender;const s=this.refreshWrapper(!1);this.refreshEditStyles(!1),e?!i&&!s&&this.refreshCellRenderer(e)||(this.destroyRenderer(),this.createCellRendererInstance(e)):(this.destroyRenderer(),this.insertValueWithoutCellRenderer(t))}setEditDetails(e,t,i){e?this.createCellEditorInstance(e,t,i):this.destroyEditor()}removeControls(){this.checkboxSelectionComp=this.beans.context.destroyBean(this.checkboxSelectionComp),this.dndSourceComp=this.beans.context.destroyBean(this.dndSourceComp),this.rowDraggingComp=this.beans.context.destroyBean(this.rowDraggingComp)}refreshWrapper(e){const t=this.includeRowDrag||this.includeDndSource||this.includeSelection,i=t||this.forceWrapper,n=i&&null==this.eCellWrapper;if(n){const p=document.createElement("div");p.setAttribute("role","presentation"),p.setAttribute("class","ag-cell-wrapper"),this.eCellWrapper=p,this.getGui().appendChild(this.eCellWrapper)}const s=!i&&null!=this.eCellWrapper;s&&(bl(this.eCellWrapper),this.eCellWrapper=void 0),this.addOrRemoveCssClass("ag-cell-value",!i);const o=!e&&i,a=o&&null==this.eCellValue;if(a){const p=document.createElement("span");p.setAttribute("role","presentation"),p.setAttribute("class","ag-cell-value"),this.eCellValue=p,this.eCellWrapper.appendChild(this.eCellValue)}const c=!o&&null!=this.eCellValue;c&&(bl(this.eCellValue),this.eCellValue=void 0);const u=n||s||a||c;return u&&this.removeControls(),e||t&&this.addControls(),u}addControls(){this.includeRowDrag&&null==this.rowDraggingComp&&(this.rowDraggingComp=this.cellCtrl.createRowDragComp(),this.rowDraggingComp&&this.eCellWrapper.insertBefore(this.rowDraggingComp.getGui(),this.eCellValue)),this.includeDndSource&&null==this.dndSourceComp&&(this.dndSourceComp=this.cellCtrl.createDndSource(),this.eCellWrapper.insertBefore(this.dndSourceComp.getGui(),this.eCellValue)),this.includeSelection&&null==this.checkboxSelectionComp&&(this.checkboxSelectionComp=this.cellCtrl.createSelectionCheckbox(),this.eCellWrapper.insertBefore(this.checkboxSelectionComp.getGui(),this.eCellValue))}createCellEditorInstance(e,t,i){const n=this.editorVersion,s=e.newAgStackInstance();if(!s)return;const{params:o}=e;s.then(c=>this.afterCellEditorCreated(n,c,o,t,i)),gt(this.cellEditor)&&o.cellStartedEdit&&this.cellCtrl.focusCell(!0)}insertValueWithoutCellRenderer(e){const t=this.getParentOfValue();es(t);const i=null!=e?yn(e,!0):null;null!=i&&(t.textContent=i)}destroyEditorAndRenderer(){this.destroyRenderer(),this.destroyEditor()}destroyRenderer(){const{context:e}=this.beans;this.cellRenderer=e.destroyBean(this.cellRenderer),bl(this.cellRendererGui),this.cellRendererGui=null,this.rendererVersion++}destroyEditor(){const{context:e}=this.beans;this.hideEditorPopup&&this.hideEditorPopup(),this.hideEditorPopup=void 0,this.cellEditor=e.destroyBean(this.cellEditor),this.cellEditorPopupWrapper=e.destroyBean(this.cellEditorPopupWrapper),bl(this.cellEditorGui),this.cellEditorGui=null,this.editorVersion++}refreshCellRenderer(e){if(null==this.cellRenderer||null==this.cellRenderer.refresh||this.cellRendererClass!==e.componentClass)return!1;const t=this.cellRenderer.refresh(e.params);return!0===t||void 0===t}createCellRendererInstance(e){const i=!this.beans.gridOptionsService.get("suppressAnimationFrame"),n=this.rendererVersion,{componentClass:s}=e,o=()=>{if(this.rendererVersion!==n||!this.isAlive())return;const c=e.newAgStackInstance(),u=this.afterCellRendererCreated.bind(this,n,s);c&&c.then(u)};i&&this.firstRender?this.beans.animationFrameService.createTask(o,this.rowNode.rowIndex,"createTasksP2"):o()}getCtrl(){return this.cellCtrl}getRowCtrl(){return this.rowCtrl}getCellRenderer(){return this.cellRenderer}getCellEditor(){return this.cellEditor}afterCellRendererCreated(e,t,i){if(this.isAlive()&&e===this.rendererVersion){if(this.cellRenderer=i,this.cellRendererClass=t,this.cellRendererGui=this.cellRenderer.getGui(),null!=this.cellRendererGui){const s=this.getParentOfValue();es(s),s.appendChild(this.cellRendererGui)}}else this.beans.context.destroyBean(i)}afterCellEditorCreated(e,t,i,n,s){if(e!==this.editorVersion)return void this.beans.context.destroyBean(t);if(t.isCancelBeforeStart&&t.isCancelBeforeStart())return this.beans.context.destroyBean(t),void this.cellCtrl.stopEditing(!0);if(!t.getGui)return console.warn(`AG Grid: cellEditor for column ${this.column.getId()} is missing getGui() method`),void this.beans.context.destroyBean(t);this.cellEditor=t,this.cellEditorGui=t.getGui();const c=n||void 0!==t.isPopup&&t.isPopup();c?this.addPopupCellEditor(i,s):this.addInCellEditor(),this.refreshEditStyles(!0,c),t.afterGuiAttached&&t.afterGuiAttached()}refreshEditStyles(e,t){var i;this.addOrRemoveCssClass("ag-cell-inline-editing",e&&!t),this.addOrRemoveCssClass("ag-cell-popup-editing",e&&!!t),this.addOrRemoveCssClass("ag-cell-not-inline-editing",!e||!!t),null===(i=this.rowCtrl)||void 0===i||i.setInlineEditingCss(e)}addInCellEditor(){const e=this.getGui(),t=this.beans.gridOptionsService.getDocument();e.contains(t.activeElement)&&e.focus(),this.destroyRenderer(),this.refreshWrapper(!0),this.clearParentOfValue(),this.cellEditorGui&&this.getParentOfValue().appendChild(this.cellEditorGui)}addPopupCellEditor(e,t){"fullRow"===this.beans.gridOptionsService.get("editType")&&console.warn("AG Grid: popup cellEditor does not work with fullRowEdit - you cannot use them both - either turn off fullRowEdit, or stop using popup editors.");const i=this.cellEditor;this.cellEditorPopupWrapper=this.beans.context.createBean(new Gh(e));const n=this.cellEditorPopupWrapper.getGui();this.cellEditorGui&&n.appendChild(this.cellEditorGui);const s=this.beans.popupService,o=this.beans.gridOptionsService.get("stopEditingWhenCellsLoseFocus"),a=t??(i.getPopupPosition?i.getPopupPosition():"over"),c=this.beans.gridOptionsService.get("enableRtl"),u={ePopup:n,column:this.column,rowNode:this.rowNode,type:"popupCellEditor",eventSource:this.getGui(),position:a,alignSide:c?"right":"left",keepWithinBounds:!0},p=s.positionPopupByComponent.bind(s,u),g=this.beans.localeService.getLocaleTextFunc(),m=s.addPopup({modal:o,eChild:n,closeOnEsc:!0,closedCallback:()=>{this.cellCtrl.onPopupEditorClosed()},anchorToElement:this.getGui(),positionCallback:p,ariaLabel:g("ariaLabelCellEditor","Cell Editor")});m&&(this.hideEditorPopup=m.hideFunc)}detach(){this.eRow.removeChild(this.getGui())}destroy(){this.cellCtrl.stopEditing(),this.destroyEditorAndRenderer(),this.removeControls(),super.destroy()}clearParentOfValue(){const e=this.getGui(),t=this.beans.gridOptionsService.getDocument();e.contains(t.activeElement)&&fE()&&e.focus({preventScroll:!0}),es(this.getParentOfValue())}}class yA extends Ne{constructor(e,t,i){super(),this.cellComps={},this.beans=t,this.rowCtrl=e;const n=document.createElement("div");n.setAttribute("comp-id",`${this.getCompId()}`),n.setAttribute("style",this.getInitialStyle(i)),this.setTemplateFromElement(n);const s=this.getGui(),o=s.style;this.domOrder=this.rowCtrl.getDomOrder(),In(s,"row");const a=this.rowCtrl.getTabIndex();null!=a&&s.setAttribute("tabindex",a.toString()),e.setComp({setDomOrder:u=>this.domOrder=u,setCellCtrls:u=>this.setCellCtrls(u),showFullWidth:u=>this.showFullWidth(u),getFullWidthCellRenderer:()=>this.getFullWidthCellRenderer(),addOrRemoveCssClass:(u,p)=>this.addOrRemoveCssClass(u,p),setUserStyles:u=>GR(s,u),setTop:u=>o.top=u,setTransform:u=>o.transform=u,setRowIndex:u=>s.setAttribute("row-index",u),setRowId:u=>s.setAttribute("row-id",u),setRowBusinessKey:u=>s.setAttribute("row-business-key",u),refreshFullWidth:u=>this.refreshFullWidth(u)},this.getGui(),i),this.addDestroyFunc(()=>{e.unsetComp(i)})}getInitialStyle(e){const t=this.rowCtrl.getInitialTransform(e);return t?`transform: ${t}`:`top: ${this.rowCtrl.getInitialRowTop(e)}`}showFullWidth(e){const i=e.newAgStackInstance();!i||i.then(n=>{if(this.isAlive()){const s=n.getGui();this.getGui().appendChild(s),this.rowCtrl.setupDetailRowAutoHeight(s),this.setFullWidthRowComp(n)}else this.beans.context.destroyBean(n)})}setCellCtrls(e){const t=Object.assign({},this.cellComps);e.forEach(n=>{const s=n.getInstanceId();null==this.cellComps[s]?this.newCellComp(n):t[s]=null});const i=fh(t).filter(n=>null!=n);this.destroyCells(i),this.ensureDomOrder(e)}ensureDomOrder(e){if(!this.domOrder)return;const t=[];e.forEach(i=>{const n=this.cellComps[i.getInstanceId()];n&&t.push(n.getGui())}),kR(this.getGui(),t)}newCellComp(e){const t=new w1(this.beans,e,this.rowCtrl.isPrintLayout(),this.getGui(),this.rowCtrl.isEditing());this.cellComps[e.getInstanceId()]=t,this.getGui().appendChild(t.getGui())}destroy(){super.destroy(),this.destroyAllCells()}destroyAllCells(){const e=fh(this.cellComps).filter(t=>null!=t);this.destroyCells(e)}setFullWidthRowComp(e){this.fullWidthCellRenderer&&console.error("AG Grid - should not be setting fullWidthRowComponent twice"),this.fullWidthCellRenderer=e,this.addDestroyFunc(()=>{this.fullWidthCellRenderer=this.beans.context.destroyBean(this.fullWidthCellRenderer)})}getFullWidthCellRenderer(){return this.fullWidthCellRenderer}destroyCells(e){e.forEach(t=>{if(!t)return;const i=t.getCtrl().getInstanceId();this.cellComps[i]===t&&(t.detach(),t.destroy(),this.cellComps[i]=null)})}refreshFullWidth(e){const{fullWidthCellRenderer:t}=this;if(!t||!t.refresh)return!1;const i=e();return t.refresh(i)}}var Kf=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Vh extends Ne{constructor(){super(function SA(){const r=Ne.elementGettingCreated.getAttribute("name"),e=Ic.getRowContainerCssClasses(r);let t;return t=r===Me.CENTER||r===Me.TOP_CENTER||r===Me.STICKY_TOP_CENTER||r===Me.BOTTOM_CENTER?`<div class="${e.viewport}" ref="eViewport" role="presentation">\n                <div class="${e.container}" ref="eContainer"></div>\n            </div>`:`<div class="${e.container}" ref="eContainer"></div>`,t}()),this.rowComps={},this.name=Ne.elementGettingCreated.getAttribute("name"),this.type=function a0(r){switch(r){case Me.CENTER:case Me.TOP_CENTER:case Me.STICKY_TOP_CENTER:case Me.BOTTOM_CENTER:return Ii.CENTER;case Me.LEFT:case Me.TOP_LEFT:case Me.STICKY_TOP_LEFT:case Me.BOTTOM_LEFT:return Ii.LEFT;case Me.RIGHT:case Me.TOP_RIGHT:case Me.STICKY_TOP_RIGHT:case Me.BOTTOM_RIGHT:return Ii.RIGHT;case Me.FULL_WIDTH:case Me.TOP_FULL_WIDTH:case Me.STICKY_TOP_FULL_WIDTH:case Me.BOTTOM_FULL_WIDTH:return Ii.FULL_WIDTH;default:throw Error("Invalid Row Container Type")}}(this.name)}postConstruct(){const e={setViewportHeight:i=>this.eViewport.style.height=i,setRowCtrls:({rowCtrls:i})=>this.setRowCtrls(i),setDomOrder:i=>{this.domOrder=i},setContainerWidth:i=>this.eContainer.style.width=i};this.createManagedBean(new Ic(this.name)).setComp(e,this.eContainer,this.eViewport)}preDestroy(){this.setRowCtrls([])}setRowCtrls(e){const t=Object.assign({},this.rowComps);this.rowComps={},this.lastPlacedElement=null,e.forEach(n=>{const s=n.getInstanceId(),o=t[s];if(o)this.rowComps[s]=o,delete t[s],this.ensureDomOrder(o.getGui());else{if(!n.getRowNode().displayed)return;const a=new yA(n,this.beans,this.type);this.rowComps[s]=a,this.appendRow(a.getGui())}}),fh(t).forEach(n=>{this.eContainer.removeChild(n.getGui()),n.destroy()}),In(this.eContainer,"rowgroup")}appendRow(e){this.domOrder?qx(this.eContainer,e,this.lastPlacedElement):this.eContainer.appendChild(e),this.lastPlacedElement=e}ensureDomOrder(e){this.domOrder&&(DE(this.eContainer,e,this.lastPlacedElement),this.lastPlacedElement=e)}}Kf([P("beans")],Vh.prototype,"beans",void 0),Kf([re("eViewport")],Vh.prototype,"eViewport",void 0),Kf([re("eContainer")],Vh.prototype,"eContainer",void 0),Kf([Se],Vh.prototype,"postConstruct",null),Kf([Js],Vh.prototype,"preDestroy",null);var eb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class ka{constructor(e){this.columnsToAggregate=[],this.columnsToGroup=[],this.columnsToPivot=[],this.pinned=e}onDragEnter(e){if(this.clearColumnsList(),this.gridOptionsService.get("functionsReadOnly"))return;const t=e.dragItem.columns;!t||t.forEach(i=>{!i.isPrimary()||i.isAnyFunctionActive()||(i.isAllowValue()?this.columnsToAggregate.push(i):i.isAllowRowGroup()?this.columnsToGroup.push(i):i.isAllowPivot()&&this.columnsToPivot.push(i))})}getIconName(){return this.columnsToAggregate.length+this.columnsToGroup.length+this.columnsToPivot.length>0?this.pinned?St.ICON_PINNED:St.ICON_MOVE:null}onDragLeave(e){this.clearColumnsList()}clearColumnsList(){this.columnsToAggregate.length=0,this.columnsToGroup.length=0,this.columnsToPivot.length=0}onDragging(e){}onDragStop(e){this.columnsToAggregate.length>0&&this.columnModel.addValueColumns(this.columnsToAggregate,"toolPanelDragAndDrop"),this.columnsToGroup.length>0&&this.columnModel.addRowGroupColumns(this.columnsToGroup,"toolPanelDragAndDrop"),this.columnsToPivot.length>0&&this.columnModel.addPivotColumns(this.columnsToPivot,"toolPanelDragAndDrop")}}eb([P("columnModel")],ka.prototype,"columnModel",void 0),eb([P("gridOptionsService")],ka.prototype,"gridOptionsService",void 0);class Ml{static attemptMoveColumns(e){const{isFromHeader:t,hDirection:i,xPosition:n,fromEnter:s,fakeEvent:o,pinned:a,gridOptionsService:c,columnModel:u}=e,p=i===zr.Left,g=i===zr.Right;let{allMovingColumns:m}=e;if(t){let k=[];m.forEach(U=>{var j;let q=null,J=U.getParent();for(;null!=J&&1===J.getDisplayedLeafColumns().length;)q=J,J=J.getParent();null!=q?(null!==(j=q.getColGroupDef())&&void 0!==j&&j.marryChildren?q.getProvidedColumnGroup().getLeafColumns():q.getLeafColumns()).forEach(Ae=>{k.includes(Ae)||k.push(Ae)}):k.includes(U)||k.push(U)}),m=k}const y=m.slice();u.sortColumnsLikeGridColumns(y);const b=this.calculateValidMoves({movingCols:y,draggingRight:g,xPosition:n,pinned:a,gridOptionsService:c,columnModel:u}),_=this.calculateOldIndex(y,u);if(0===b.length)return;const E=b[0];let D=null!==_&&!s;if(t&&(D=null!==_),D&&!o&&(p&&E>=_||g&&E<=_))return;const R=u.getAllDisplayedColumns();let O=[],L=null;for(let k=0;k<b.length;k++){const U=b[k],j=u.getProposedColumnOrder(y,U);if(!u.doesOrderPassRules(j))continue;const q=j.filter(me=>R.includes(me));if(null===L)L=q;else if(!yc(q,L))break;const J=this.groupFragCount(j);O.push({move:U,fragCount:J})}return 0!==O.length?(O.sort((k,U)=>k.fragCount-U.fragCount),this.moveColumns(m,O[0].move,"uiColumnMoved",!1,u)):void 0}static moveColumns(e,t,i,n,s){return s.moveColumns(e,t,i,n),n?null:{columns:e,toIndex:t}}static calculateOldIndex(e,t){const i=t.getAllGridColumns(),n=_R(e.map(u=>i.indexOf(u))),s=n[0];return Xt(n)-s!=n.length-1?null:s}static groupFragCount(e){function t(n){let s=[],o=n.getOriginalParent();for(;null!=o;)s.push(o),o=o.getOriginalParent();return s}let i=0;for(let n=0;n<e.length-1;n++){let s=t(e[n]),o=t(e[n+1]);[s,o]=s.length>o.length?[s,o]:[o,s],s.forEach(a=>{-1===o.indexOf(a)&&i++})}return i}static calculateValidMoves(e){const{movingCols:t,draggingRight:i,xPosition:n,pinned:s,gridOptionsService:o,columnModel:a}=e;if(o.get("suppressMovableColumns")||t.some(O=>O.getColDef().suppressMovable))return[];const u=a.getDisplayedColumns(s),p=a.getAllGridColumns(),g=u.filter(O=>Go(t,O)),m=u.filter(O=>!Go(t,O)),y=p.filter(O=>!Go(t,O));let E,b=0,_=n;if(i){let O=0;g.forEach(L=>O+=L.getActualWidth()),_-=O}if(_>0){for(let O=0;O<m.length&&(_-=m[O].getActualWidth(),!(_<0));O++)b++;i&&b++}b>0?E=y.indexOf(m[b-1])+1:(E=y.indexOf(m[0]),-1===E&&(E=0));const D=[E],R=(O,L)=>O-L;if(i){let O=E+1;const L=p.length-1;for(;O<=L;)D.push(O),O++;D.sort(R)}else{let O=E;const L=p.length-1;let k=p[O];for(;O<=L&&u.indexOf(k)<0;)O++,D.push(O),k=p[O];O=E-1;const U=0;for(;O>=U;)D.push(O),O--;D.sort(R).reverse()}return D}static normaliseX(e,t,i,n,s){const o=s.getHeaderRowContainerCtrl(t).getViewport();return i&&(e-=o.getBoundingClientRect().left),n.get("enableRtl")&&(e=o.clientWidth-e),null==t&&(e+=s.getCenterRowContainerCtrl().getCenterViewportScrollLeft()),e}}var qd=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class xl{constructor(e,t){this.needToMoveLeft=!1,this.needToMoveRight=!1,this.lastMovedInfo=null,this.pinned=e,this.eContainer=t,this.centerContainer=!Ie(e)}init(){this.ctrlsService.whenReady(()=>{this.gridBodyCon=this.ctrlsService.getGridBodyCtrl()})}getIconName(){return this.pinned?St.ICON_PINNED:St.ICON_MOVE}onDragEnter(e){const t=e.dragItem.columns;if(e.dragSource.type===sn.ToolPanel)this.setColumnsVisible(t,!0,"uiColumnDragged");else{const n=e.dragItem.visibleState,s=(t||[]).filter(o=>n[o.getId()]);this.setColumnsVisible(s,!0,"uiColumnDragged")}this.setColumnsPinned(t,this.pinned,"uiColumnDragged"),this.onDragging(e,!0,!0)}onDragLeave(){this.ensureIntervalCleared(),this.lastMovedInfo=null}setColumnsVisible(e,t,i){if(e){const n=e.filter(s=>!s.getColDef().lockVisible);this.columnModel.setColumnsVisible(n,t,i)}}setColumnsPinned(e,t,i){if(e){const n=e.filter(s=>!s.getColDef().lockPinned);this.columnModel.setColumnsPinned(n,t,i)}}onDragStop(){this.onDragging(this.lastDraggingEvent,!1,!0,!0),this.ensureIntervalCleared(),this.lastMovedInfo=null}checkCenterForScrolling(e){if(this.centerContainer){const t=this.ctrlsService.getCenterRowContainerCtrl().getCenterViewportScrollLeft(),i=t+this.ctrlsService.getCenterRowContainerCtrl().getCenterWidth();this.gridOptionsService.get("enableRtl")?(this.needToMoveRight=e<t+50,this.needToMoveLeft=e>i-50):(this.needToMoveLeft=e<t+50,this.needToMoveRight=e>i-50),this.needToMoveLeft||this.needToMoveRight?this.ensureIntervalStarted():this.ensureIntervalCleared()}}onDragging(e=this.lastDraggingEvent,t=!1,i=!1,n=!1){var s;if(n){if(this.lastMovedInfo){const{columns:g,toIndex:m}=this.lastMovedInfo;Ml.moveColumns(g,m,"uiColumnMoved",!0,this.columnModel)}return}if(this.lastDraggingEvent=e,gt(e.hDirection))return;const o=Ml.normaliseX(e.x,this.pinned,!1,this.gridOptionsService,this.ctrlsService);t||this.checkCenterForScrolling(o);const a=this.normaliseDirection(e.hDirection),c=e.dragSource.type,u=(null===(s=e.dragSource.getDragItem().columns)||void 0===s?void 0:s.filter(g=>!g.getColDef().lockPinned||g.getPinned()==this.pinned))||[],p=Ml.attemptMoveColumns({allMovingColumns:u,isFromHeader:c===sn.HeaderCell,hDirection:a,xPosition:o,pinned:this.pinned,fromEnter:t,fakeEvent:i,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel});p&&(this.lastMovedInfo=p)}normaliseDirection(e){if(!this.gridOptionsService.get("enableRtl"))return e;switch(e){case zr.Left:return zr.Right;case zr.Right:return zr.Left;default:console.error(`AG Grid: Unknown direction ${e}`)}}ensureIntervalStarted(){this.movingIntervalId||(this.intervalCount=0,this.failedMoveAttempts=0,this.movingIntervalId=window.setInterval(this.moveInterval.bind(this),100),this.dragAndDropService.setGhostIcon(this.needToMoveLeft?St.ICON_LEFT:St.ICON_RIGHT,!0))}ensureIntervalCleared(){this.movingIntervalId&&(window.clearInterval(this.movingIntervalId),this.movingIntervalId=null,this.dragAndDropService.setGhostIcon(St.ICON_MOVE))}moveInterval(){let e;this.intervalCount++,e=10+5*this.intervalCount,e>100&&(e=100);let t=null;const i=this.gridBodyCon.getScrollFeature();if(this.needToMoveLeft?t=i.scrollHorizontally(-e):this.needToMoveRight&&(t=i.scrollHorizontally(e)),0!==t)this.onDragging(this.lastDraggingEvent),this.failedMoveAttempts=0;else{this.failedMoveAttempts++;const s=this.lastDraggingEvent.dragItem.columns.filter(o=>!o.getColDef().lockPinned);s.length>0&&(this.dragAndDropService.setGhostIcon(St.ICON_PINNED),this.failedMoveAttempts>7)&&(this.setColumnsPinned(s,this.needToMoveLeft?"left":"right","uiColumnDragged"),this.dragAndDropService.nudge())}}}qd([P("columnModel")],xl.prototype,"columnModel",void 0),qd([P("dragAndDropService")],xl.prototype,"dragAndDropService",void 0),qd([P("gridOptionsService")],xl.prototype,"gridOptionsService",void 0),qd([P("ctrlsService")],xl.prototype,"ctrlsService",void 0),qd([Se],xl.prototype,"init",null);var Fv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Xd extends Ee{constructor(e,t){super(),this.pinned=e,this.eContainer=t}postConstruct(){this.ctrlsService.whenReady(e=>{switch(this.pinned){case"left":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.leftRowContainerCtrl.getContainerElement()],[e.bottomLeftRowContainerCtrl.getContainerElement()],[e.topLeftRowContainerCtrl.getContainerElement()]];break;case"right":this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.rightRowContainerCtrl.getContainerElement()],[e.bottomRightRowContainerCtrl.getContainerElement()],[e.topRightRowContainerCtrl.getContainerElement()]];break;default:this.eSecondaryContainers=[[e.gridBodyCtrl.getBodyViewportElement(),e.centerRowContainerCtrl.getViewportElement()],[e.bottomCenterRowContainerCtrl.getViewportElement()],[e.topCenterRowContainerCtrl.getViewportElement()]]}})}isInterestedIn(e){return e===sn.HeaderCell||e===sn.ToolPanel&&this.gridOptionsService.get("allowDragFromColumnsToolPanel")}getSecondaryContainers(){return this.eSecondaryContainers}getContainer(){return this.eContainer}init(){this.moveColumnFeature=this.createManagedBean(new xl(this.pinned,this.eContainer)),this.bodyDropPivotTarget=this.createManagedBean(new ka(this.pinned)),this.dragAndDropService.addDropTarget(this)}getIconName(){return this.currentDropListener.getIconName()}isDropColumnInPivotMode(e){return this.columnModel.isPivotMode()&&e.dragSource.type===sn.ToolPanel}onDragEnter(e){this.currentDropListener=this.isDropColumnInPivotMode(e)?this.bodyDropPivotTarget:this.moveColumnFeature,this.currentDropListener.onDragEnter(e)}onDragLeave(e){this.currentDropListener.onDragLeave(e)}onDragging(e){this.currentDropListener.onDragging(e)}onDragStop(e){this.currentDropListener.onDragStop(e)}}Fv([P("dragAndDropService")],Xd.prototype,"dragAndDropService",void 0),Fv([P("columnModel")],Xd.prototype,"columnModel",void 0),Fv([P("ctrlsService")],Xd.prototype,"ctrlsService",void 0),Fv([Se],Xd.prototype,"postConstruct",null),Fv([Se],Xd.prototype,"init",null);var Nv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Zd extends YE{constructor(e){super(Zd.TEMPLATE,e),this.headerCompVersion=0,this.column=e.getColumnGroupChild(),this.pinned=e.getPinned()}postConstruct(){const e=this.getGui();var s,o;s="col-id",null!=(o=this.column.getColId())&&""!=o?e.setAttribute(s,o):e.removeAttribute(s);const i={setWidth:s=>e.style.width=s,addOrRemoveCssClass:(s,o)=>this.addOrRemoveCssClass(s,o),setAriaSort:s=>s?PR(e,s):IR(e),setUserCompDetails:s=>this.setUserCompDetails(s),getUserCompInstance:()=>this.headerComp};this.ctrl.setComp(i,this.getGui(),this.eResize,this.eHeaderCompWrapper);const n=this.ctrl.getSelectAllGui();this.eResize.insertAdjacentElement("afterend",n)}destroyHeaderComp(){this.headerComp&&(this.eHeaderCompWrapper.removeChild(this.headerCompGui),this.headerComp=this.destroyBean(this.headerComp),this.headerCompGui=void 0)}setUserCompDetails(e){this.headerCompVersion++;const t=this.headerCompVersion;e.newAgStackInstance().then(i=>this.afterCompCreated(t,i))}afterCompCreated(e,t){e==this.headerCompVersion&&this.isAlive()?(this.destroyHeaderComp(),this.headerComp=t,this.headerCompGui=t.getGui(),this.eHeaderCompWrapper.appendChild(this.headerCompGui),this.ctrl.setDragSource(this.getGui())):this.destroyBean(t)}}Zd.TEMPLATE='<div class="ag-header-cell" role="columnheader">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n            <div ref="eHeaderCompWrapper" class="ag-header-cell-comp-wrapper" role="presentation"></div>\n        </div>',Nv([re("eResize")],Zd.prototype,"eResize",void 0),Nv([re("eHeaderCompWrapper")],Zd.prototype,"eHeaderCompWrapper",void 0),Nv([Se],Zd.prototype,"postConstruct",null),Nv([Js],Zd.prototype,"destroyHeaderComp",null);var bA=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Pl extends YE{constructor(e){super(Pl.TEMPLATE,e)}postConstruct(){const e=this.getGui();e.setAttribute("col-id",this.ctrl.getColId()),this.ctrl.setComp({addOrRemoveCssClass:(n,s)=>this.addOrRemoveCssClass(n,s),setResizableDisplayed:n=>si(this.eResize,n),setWidth:n=>e.style.width=n,setAriaExpanded:n=>((n,s)=>null!=s?e.setAttribute(n,s):e.removeAttribute(n))("aria-expanded",n),setUserCompDetails:n=>this.setUserCompDetails(n),getUserCompInstance:()=>this.headerGroupComp},e,this.eResize)}setUserCompDetails(e){e.newAgStackInstance().then(t=>this.afterHeaderCompCreated(t))}afterHeaderCompCreated(e){const t=()=>this.destroyBean(e);if(!this.isAlive())return void t();const i=this.getGui(),n=e.getGui();i.appendChild(n),this.addDestroyFunc(t),this.headerGroupComp=e,this.ctrl.setDragSource(i)}}Pl.TEMPLATE='<div class="ag-header-group-cell" role="columnheader">\n            <div ref="eResize" class="ag-header-cell-resize" role="presentation"></div>\n        </div>',bA([re("eResize")],Pl.prototype,"eResize",void 0),bA([Se],Pl.prototype,"postConstruct",null);var _A=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ns=(()=>(function(r){r.COLUMN_GROUP="group",r.COLUMN="column",r.FLOATING_FILTER="filter"}(Ns||(Ns={})),Ns))();class l0 extends Ne{constructor(e){super(),this.headerComps={},this.ctrl=e,this.setTemplate(`<div class="${this.ctrl.getHeaderRowClass()}" role="row"></div>`)}init(){dv(this.getGui(),this.ctrl.getAriaRowIndex()),this.ctrl.setComp({setHeight:t=>this.getGui().style.height=t,setTop:t=>this.getGui().style.top=t,setHeaderCtrls:(t,i)=>this.setHeaderCtrls(t,i),setWidth:t=>this.getGui().style.width=t})}destroyHeaderCtrls(){this.setHeaderCtrls([],!1)}setHeaderCtrls(e,t){if(!this.isAlive())return;const i=this.headerComps;if(this.headerComps={},e.forEach(n=>{const s=n.getInstanceId();let o=i[s];delete i[s],null==o&&(o=this.createHeaderComp(n),this.getGui().appendChild(o.getGui())),this.headerComps[s]=o}),gr(i,(n,s)=>{this.getGui().removeChild(s.getGui()),this.destroyBean(s)}),t){const n=fh(this.headerComps);n.sort((o,a)=>o.getCtrl().getColumnGroupChild().getLeft()-a.getCtrl().getColumnGroupChild().getLeft());const s=n.map(o=>o.getGui());kR(this.getGui(),s)}}createHeaderComp(e){let t;switch(this.ctrl.getType()){case Ns.COLUMN_GROUP:t=new Pl(e);break;case Ns.FLOATING_FILTER:t=new Ud(e);break;default:t=new Zd(e)}return this.createBean(t),t.setParentComponent(this),t}}_A([Se],l0.prototype,"init",null),_A([Js],l0.prototype,"destroyHeaderCtrls",null);var Yf=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let UP=0;class Yr extends Ee{constructor(e,t,i){super(),this.resizeToggleTimeout=0,this.resizeMultiplier=1,this.resizeFeature=null,this.lastFocusEvent=null,this.dragSource=null,this.columnGroupChild=e,this.parentRowCtrl=i,this.beans=t,this.instanceId=e.getUniqueId()+"-"+UP++}postConstruct(){this.addManagedPropertyListeners(["suppressHeaderFocus"],()=>this.refreshTabIndex())}shouldStopEventPropagation(e){const{headerRowIndex:t,column:i}=this.focusService.getFocusedHeader();return PS(this.gridOptionsService,e,t,i)}getWrapperHasFocus(){return this.gridOptionsService.getDocument().activeElement===this.eGui}setGui(e){this.eGui=e,this.addDomData(),this.addManagedListener(this.beans.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onDisplayedColumnsChanged(),this.refreshTabIndex()}onDisplayedColumnsChanged(){!this.comp||!this.column||(this.refreshFirstAndLastStyles(),this.refreshAriaColIndex())}refreshFirstAndLastStyles(){const{comp:e,column:t,beans:i}=this;Nh.refreshFirstAndLastStyles(e,t,i.columnModel)}refreshAriaColIndex(){const{beans:e,column:t}=this,i=e.columnModel.getAriaColumnIndex(t);lE(this.eGui,i)}addResizeAndMoveKeyboardListeners(){!this.resizeFeature||(this.addManagedListener(this.eGui,"keydown",this.onGuiKeyDown.bind(this)),this.addManagedListener(this.eGui,"keyup",this.onGuiKeyUp.bind(this)))}refreshTabIndex(){this.gridOptionsService.get("suppressHeaderFocus")?this.eGui.removeAttribute("tabindex"):this.eGui.setAttribute("tabindex","-1")}onGuiKeyDown(e){var t;const n=this.gridOptionsService.getDocument().activeElement,s=e.key===ge.LEFT||e.key===ge.RIGHT;if(this.isResizing&&(e.preventDefault(),e.stopImmediatePropagation()),n!==this.eGui||!e.shiftKey&&!e.altKey||((this.isResizing||s)&&(e.preventDefault(),e.stopImmediatePropagation()),!s))return;const o=e.key===ge.LEFT!==this.gridOptionsService.get("enableRtl"),a=zr[o?"Left":"Right"];if(e.altKey){this.isResizing=!0,this.resizeMultiplier+=1;const c=this.getViewportAdjustedResizeDiff(e);this.resizeHeader(c,e.shiftKey),null===(t=this.resizeFeature)||void 0===t||t.toggleColumnResizing(!0)}else this.moveHeader(a)}getViewportAdjustedResizeDiff(e){let t=this.getResizeDiff(e);if(this.column.getPinned()){const n=this.pinnedWidthService.getPinnedLeftWidth(),s=this.pinnedWidthService.getPinnedRightWidth(),o=Ec(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50;if(n+s+t>o){if(!(o>n+s))return 0;t=o-n-s}}return t}getResizeDiff(e){let t=e.key===ge.LEFT!==this.gridOptionsService.get("enableRtl");const i=this.column.getPinned(),n=this.gridOptionsService.get("enableRtl");return i&&n!==("right"===i)&&(t=!t),(t?-1:1)*this.resizeMultiplier}onGuiKeyUp(){!this.isResizing||(this.resizeToggleTimeout&&(window.clearTimeout(this.resizeToggleTimeout),this.resizeToggleTimeout=0),this.isResizing=!1,this.resizeMultiplier=1,this.resizeToggleTimeout=setTimeout(()=>{var e;null===(e=this.resizeFeature)||void 0===e||e.toggleColumnResizing(!1)},150))}handleKeyDown(e){const t=this.getWrapperHasFocus();switch(e.key){case ge.PAGE_DOWN:case ge.PAGE_UP:case ge.PAGE_HOME:case ge.PAGE_END:t&&e.preventDefault()}}addDomData(){const e=Yr.DOM_DATA_KEY_HEADER_CTRL;this.gridOptionsService.setDomData(this.eGui,e,this),this.addDestroyFunc(()=>this.gridOptionsService.setDomData(this.eGui,e,null))}getGui(){return this.eGui}focus(e){return!!this.eGui&&(this.lastFocusEvent=e||null,this.eGui.focus(),!0)}getRowIndex(){return this.parentRowCtrl.getRowIndex()}getParentRowCtrl(){return this.parentRowCtrl}getPinned(){return this.parentRowCtrl.getPinned()}getInstanceId(){return this.instanceId}getColumnGroupChild(){return this.columnGroupChild}removeDragSource(){this.dragSource&&(this.dragAndDropService.removeDragSource(this.dragSource),this.dragSource=null)}handleContextMenuMouseEvent(e,t,i){const n=e??t;this.gridOptionsService.get("preventDefaultOnContextMenu")&&n.preventDefault();const s=i instanceof ot?i:void 0;this.menuService.isHeaderContextMenuEnabled(s)&&this.menuService.showHeaderContextMenu(s,e,t),this.dispatchColumnMouseEvent(G.EVENT_COLUMN_HEADER_CONTEXT_MENU,i)}dispatchColumnMouseEvent(e,t){this.eventService.dispatchEvent({type:e,column:t})}destroy(){super.destroy(),this.removeDragSource(),this.comp=null,this.column=null,this.resizeFeature=null,this.lastFocusEvent=null,this.columnGroupChild=null,this.parentRowCtrl=null,this.eGui=null}}Yr.DOM_DATA_KEY_HEADER_CTRL="headerCtrl",Yf([P("pinnedWidthService")],Yr.prototype,"pinnedWidthService",void 0),Yf([P("focusService")],Yr.prototype,"focusService",void 0),Yf([P("userComponentFactory")],Yr.prototype,"userComponentFactory",void 0),Yf([P("ctrlsService")],Yr.prototype,"ctrlsService",void 0),Yf([P("dragAndDropService")],Yr.prototype,"dragAndDropService",void 0),Yf([P("menuService")],Yr.prototype,"menuService",void 0),Yf([Se],Yr.prototype,"postConstruct",null);class Lv extends Ee{constructor(e,t,i,n){super(),this.columnOrGroup=e,this.eCell=t,this.ariaEl=this.eCell.querySelector("[role=columnheader]")||this.eCell,this.colsSpanning=n,this.beans=i}setColsSpanning(e){this.colsSpanning=e,this.onLeftChanged()}getColumnOrGroup(){return this.beans.gridOptionsService.get("enableRtl")&&this.colsSpanning?Xt(this.colsSpanning):this.columnOrGroup}postConstruct(){this.addManagedListener(this.columnOrGroup,ot.EVENT_LEFT_CHANGED,this.onLeftChanged.bind(this)),this.setLeftFirstTime(),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,this.onLeftChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onLeftChanged.bind(this))}setLeftFirstTime(){const e=this.beans.gridOptionsService.get("suppressColumnMoveAnimation"),t=Ie(this.columnOrGroup.getOldLeft());this.beans.columnAnimationService.isActive()&&t&&!e?this.animateInLeft():this.onLeftChanged()}animateInLeft(){const e=this.getColumnOrGroup(),t=e.getLeft(),i=e.getOldLeft(),n=this.modifyLeftForPrintLayout(e,i),s=this.modifyLeftForPrintLayout(e,t);this.setLeft(n),this.actualLeft=s,this.beans.columnAnimationService.executeNextVMTurn(()=>{this.actualLeft===s&&this.setLeft(s)})}onLeftChanged(){const e=this.getColumnOrGroup(),t=e.getLeft();this.actualLeft=this.modifyLeftForPrintLayout(e,t),this.setLeft(this.actualLeft)}modifyLeftForPrintLayout(e,t){if(!this.beans.gridOptionsService.isDomLayout("print")||"left"===e.getPinned())return t;const n=this.beans.columnModel.getDisplayedColumnsLeftWidth();return"right"===e.getPinned()?n+this.beans.columnModel.getBodyContainerWidth()+t:n+t}setLeft(e){let t;if(Ie(e)&&(this.eCell.style.left=`${e}px`),this.columnOrGroup instanceof ot)t=this.columnOrGroup;else{const n=this.columnOrGroup.getLeafColumns();if(!n.length)return;n.length>1&&mS(this.ariaEl,n.length),t=n[0]}}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Se],Lv.prototype,"postConstruct",null);var tb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class kv extends Ee{constructor(e,t){super(),this.columns=e,this.element=t}postConstruct(){this.gridOptionsService.get("columnHoverHighlight")&&this.addMouseHoverListeners()}addMouseHoverListeners(){this.addManagedListener(this.element,"mouseout",this.onMouseOut.bind(this)),this.addManagedListener(this.element,"mouseover",this.onMouseOver.bind(this))}onMouseOut(){this.columnHoverService.clearMouseOver()}onMouseOver(){this.columnHoverService.setMouseOver(this.columns)}}tb([P("columnHoverService")],kv.prototype,"columnHoverService",void 0),tb([Se],kv.prototype,"postConstruct",null);class c0 extends Yr{constructor(e,t,i){super(e,t,i),this.iconCreated=!1,this.column=e}setComp(e,t,i,n){this.comp=e,this.eButtonShowMainFilter=i,this.eFloatingFilterBody=n,this.setGui(t),this.setupActive(),this.setupWidth(),this.setupLeft(),this.setupHover(),this.setupFocus(),this.setupAria(),this.setupFilterButton(),this.setupUserComp(),this.setupSyncWithFilter(),this.setupUi(),this.addManagedListener(this.eButtonShowMainFilter,"click",this.showParentFilter.bind(this)),this.setupFilterChangedListener(),this.addManagedListener(this.column,ot.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))}resizeHeader(){}moveHeader(){}setupActive(){const e=this.column.getColDef();this.active=!!e.filter&&!!e.floatingFilter}setupUi(){if(this.comp.setButtonWrapperDisplayed(!this.suppressFilterButton&&this.active),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-full-body",this.suppressFilterButton),this.comp.addOrRemoveBodyCssClass("ag-floating-filter-body",!this.suppressFilterButton),!this.active||this.iconCreated)return;const e=Nn("filter",this.gridOptionsService,this.column);e&&(this.iconCreated=!0,this.eButtonShowMainFilter.appendChild(e))}setupFocus(){this.createManagedBean(new ir(this.eGui,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)}))}setupAria(){const e=this.localeService.getLocaleTextFunc();bc(this.eButtonShowMainFilter,e("ariaFilterMenuOpen","Open Filter Menu"))}onTabKeyDown(e){if(this.gridOptionsService.getDocument().activeElement===this.eGui)return;const s=this.focusService.findNextFocusableElement(this.eGui,null,e.shiftKey);if(s)return this.beans.headerNavigationService.scrollToColumn(this.column),e.preventDefault(),void s.focus();const o=this.findNextColumnWithFloatingFilter(e.shiftKey);!o||this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:this.getParentRowCtrl().getRowIndex(),column:o},event:e})&&e.preventDefault()}findNextColumnWithFloatingFilter(e){const t=this.beans.columnModel;let i=this.column;do{if(i=e?t.getDisplayedColBefore(i):t.getDisplayedColAfter(i),!i)break}while(!i.getColDef().filter||!i.getColDef().floatingFilter);return i}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();switch(e.key){case ge.UP:case ge.DOWN:t||e.preventDefault();case ge.LEFT:case ge.RIGHT:if(t)return;e.stopPropagation();case ge.ENTER:t&&this.focusService.focusInto(this.eGui)&&e.preventDefault();break;case ge.ESCAPE:t||this.eGui.focus()}}onFocusIn(e){if(this.eGui.contains(e.relatedTarget))return;const i=!!e.relatedTarget&&!e.relatedTarget.classList.contains("ag-floating-filter"),n=!!e.relatedTarget&&wh(e.relatedTarget,"ag-floating-filter");if(i&&n&&e.target===this.eGui){const o=this.lastFocusEvent,a=!(!o||o.key!==ge.TAB);o&&a&&this.focusService.focusInto(this.eGui,o.shiftKey)}const s=this.getRowIndex();this.beans.focusService.setFocusedHeader(s,this.column)}setupHover(){this.createManagedBean(new kv([this.column],this.eGui));const e=()=>{if(!this.gridOptionsService.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedListener(this.eventService,G.EVENT_COLUMN_HOVER_CHANGED,e),e()}setupLeft(){const e=new Lv(this.column,this.eGui,this.beans);this.createManagedBean(e)}setupFilterButton(){this.suppressFilterButton=!this.menuService.isFloatingFilterButtonEnabled(this.column),this.highlightFilterButtonWhenActive=!this.menuService.isLegacyMenuEnabled()}setupUserComp(){if(!this.active)return;const e=this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter());e&&this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setCompDetails(e)}showParentFilter(){this.menuService.showFilterMenu({column:this.column,buttonElement:this.suppressFilterButton?this.eFloatingFilterBody:this.eButtonShowMainFilter,containerType:"floatingFilter",positionBy:"button"})}setupSyncWithFilter(){if(!this.active)return;const{filterManager:e}=this.beans,t=i=>{const n=this.comp.getFloatingFilterComp();!n||n.then(s=>{if(s){const o=e.getCurrentFloatingFilterParentModel(this.column);s.onParentModelChanged(o,i)}})};this.destroySyncListener=this.addManagedListener(this.column,ot.EVENT_FILTER_CHANGED,t),e.isFilterActive(this.column)&&t(null)}setupWidth(){const e=()=>{const t=`${this.column.getActualWidth()}px`;this.comp.setWidth(t)};this.addManagedListener(this.column,ot.EVENT_WIDTH_CHANGED,e),e()}setupFilterChangedListener(){this.active&&(this.destroyFilterChangedListener=this.addManagedListener(this.column,ot.EVENT_FILTER_CHANGED,this.updateFilterButton.bind(this)),this.updateFilterButton())}updateFilterButton(){if(!this.suppressFilterButton&&this.comp){const e=this.beans.filterManager.isFilterAllowed(this.column);this.comp.setButtonWrapperDisplayed(e),this.highlightFilterButtonWhenActive&&e&&this.eButtonShowMainFilter.classList.toggle("ag-filter-active",this.column.isFilterActive())}}onColDefChanged(){var e,t;const i=this.active;this.setupActive();const n=!i&&this.active;i&&!this.active&&(null===(e=this.destroySyncListener)||void 0===e||e.call(this),null===(t=this.destroyFilterChangedListener)||void 0===t||t.call(this));const s=this.active?this.beans.filterManager.getFloatingFilterCompDetails(this.column,()=>this.showParentFilter()):null,o=this.comp.getFloatingFilterComp();o&&s?o.then(a=>{var c;!a||this.beans.filterManager.areFilterCompsDifferent(null!==(c=this.userCompDetails)&&void 0!==c?c:null,s)?this.updateCompDetails(s,n):this.updateFloatingFilterParams(s)}):this.updateCompDetails(s,n)}updateCompDetails(e,t){!this.isAlive()||(this.setCompDetails(e),this.setupFilterButton(),this.setupUi(),t&&(this.setupSyncWithFilter(),this.setupFilterChangedListener()))}updateFloatingFilterParams(e){var t;if(!e)return;const i=e.params;null===(t=this.comp.getFloatingFilterComp())||void 0===t||t.then(n=>{let s=!1;n?.refresh&&"function"==typeof n.refresh&&null!==n.refresh(i)&&(s=!0),!s&&n?.onParamsUpdated&&"function"==typeof n.onParamsUpdated&&null!==n.onParamsUpdated(i)&&st("Custom floating filter method 'onParamsUpdated' is deprecated. Use 'refresh' instead.")})}destroy(){super.destroy(),this.eButtonShowMainFilter=null,this.eFloatingFilterBody=null,this.userCompDetails=null,this.destroySyncListener=null,this.destroyFilterChangedListener=null}}var Gv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class qf extends Ee{constructor(e,t,i,n,s){super(),this.pinned=e,this.column=t,this.eResize=i,this.comp=n,this.ctrl=s}postConstruct(){const e=[];let t,i;const n=()=>{if(si(this.eResize,t),!t)return;const a=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(e.push(a),i){const c=this.gridOptionsService.get("skipHeaderOnAutoSize"),u=()=>{this.columnModel.autoSizeColumn(this.column,"uiColumnResized",c)};this.eResize.addEventListener("dblclick",u);const p=new Ln(this.eResize);p.addEventListener(Ln.EVENT_DOUBLE_TAP,u),e.push(()=>{this.eResize.removeEventListener("dblclick",u),p.removeEventListener(Ln.EVENT_DOUBLE_TAP,u),p.destroy()})}},s=()=>{e.forEach(a=>a()),e.length=0},o=()=>{const a=this.column.isResizable(),c=!this.gridOptionsService.get("suppressAutoSize")&&!this.column.getColDef().suppressAutoSize;(a!==t||c!==i)&&(t=a,i=c,s(),n())};o(),this.addDestroyFunc(s),this.ctrl.addRefreshFunction(o)}onResizing(e,t){const{column:i,lastResizeAmount:n,resizeStartWidth:s}=this,o=this.normaliseResizeAmount(t),c=[{key:i,newWidth:s+o}];this.column.getPinned()&&this.pinnedWidthService.getPinnedLeftWidth()+this.pinnedWidthService.getPinnedRightWidth()+(o-n)>Ec(this.ctrlsService.getGridBodyCtrl().getBodyViewportElement())-50||(this.lastResizeAmount=o,this.columnModel.setColumnWidths(c,this.resizeWithShiftKey,e,"uiColumnResized"),e&&this.toggleColumnResizing(!1))}onResizeStart(e){this.resizeStartWidth=this.column.getActualWidth(),this.lastResizeAmount=0,this.resizeWithShiftKey=e,this.toggleColumnResizing(!0)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}normaliseResizeAmount(e){let t=e;const i="left"!==this.pinned,n="right"===this.pinned;return this.gridOptionsService.get("enableRtl")?i&&(t*=-1):n&&(t*=-1),t}}Gv([P("horizontalResizeService")],qf.prototype,"horizontalResizeService",void 0),Gv([P("pinnedWidthService")],qf.prototype,"pinnedWidthService",void 0),Gv([P("ctrlsService")],qf.prototype,"ctrlsService",void 0),Gv([P("columnModel")],qf.prototype,"columnModel",void 0),Gv([Se],qf.prototype,"postConstruct",null);var wA=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class d0 extends Ee{constructor(e){super(),this.cbSelectAllVisible=!1,this.processingEventFromCheckbox=!1,this.column=e}onSpaceKeyDown(e){const t=this.cbSelectAll,i=this.gridOptionsService.getDocument();t.isDisplayed()&&!t.getGui().contains(i.activeElement)&&(e.preventDefault(),t.setValue(!t.getValue()))}getCheckboxGui(){return this.cbSelectAll.getGui()}setComp(e){this.headerCellCtrl=e,this.cbSelectAll=this.createManagedBean(new Rc),this.cbSelectAll.addCssClass("ag-header-select-all"),In(this.cbSelectAll.getGui(),"presentation"),this.showOrHideSelectAll(),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,this.onNewColumnsLoaded.bind(this)),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_SELECTION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_PAGINATION_CHANGED,this.onSelectionChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_MODEL_UPDATED,this.onModelChanged.bind(this)),this.addManagedListener(this.cbSelectAll,G.EVENT_FIELD_VALUE_CHANGED,this.onCbSelectAll.bind(this)),Pd(this.cbSelectAll.getGui(),!0),this.cbSelectAll.getInputElement().setAttribute("tabindex","-1"),this.refreshSelectAllLabel()}onNewColumnsLoaded(){this.showOrHideSelectAll()}onDisplayedColumnsChanged(){!this.isAlive()||this.showOrHideSelectAll()}showOrHideSelectAll(){this.cbSelectAllVisible=this.isCheckboxSelection(),this.cbSelectAll.setDisplayed(this.cbSelectAllVisible,{skipAriaHidden:!0}),this.cbSelectAllVisible&&(this.checkRightRowModelType("selectAllCheckbox"),this.checkSelectionType("selectAllCheckbox"),this.updateStateOfCheckbox()),this.refreshSelectAllLabel()}onModelChanged(){!this.cbSelectAllVisible||this.updateStateOfCheckbox()}onSelectionChanged(){!this.cbSelectAllVisible||this.updateStateOfCheckbox()}updateStateOfCheckbox(){if(this.processingEventFromCheckbox)return;this.processingEventFromCheckbox=!0;const e=this.selectionService.getSelectAllState(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setValue(e);const t=this.selectionService.hasNodesToSelect(this.isFilteredOnly(),this.isCurrentPageOnly());this.cbSelectAll.setDisabled(!t),this.refreshSelectAllLabel(),this.processingEventFromCheckbox=!1}refreshSelectAllLabel(){const e=this.localeService.getLocaleTextFunc(),i=this.cbSelectAll.getValue()?e("ariaChecked","checked"):e("ariaUnchecked","unchecked"),n=e("ariaRowSelectAll","Press Space to toggle all rows selection");this.headerCellCtrl.setAriaDescriptionProperty("selectAll",this.cbSelectAllVisible?`${n} (${i})`:null),this.cbSelectAll.setInputAriaLabel(`${n} (${i})`),this.headerCellCtrl.announceAriaDescription()}checkSelectionType(e){return"multiple"===this.gridOptionsService.get("rowSelection")||(console.warn(`AG Grid: ${e} is only available if using 'multiple' rowSelection.`),!1)}checkRightRowModelType(e){const t=this.rowModel.getType();return"clientSide"===t||"serverSide"===t||(console.warn(`AG Grid: ${e} is only available if using 'clientSide' or 'serverSide' rowModelType, you are using ${t}.`),!1)}onCbSelectAll(){if(this.processingEventFromCheckbox||!this.cbSelectAllVisible)return;const e=this.cbSelectAll.getValue(),t=this.isFilteredOnly(),i=this.isCurrentPageOnly();let n="uiSelectAll";i?n="uiSelectAllCurrentPage":t&&(n="uiSelectAllFiltered");const s={source:n,justFiltered:t,justCurrentPage:i};e?this.selectionService.selectAllRowNodes(s):this.selectionService.deselectAllRowNodes(s)}isCheckboxSelection(){let e=this.column.getColDef().headerCheckboxSelection;return"function"==typeof e&&(e=e(this.gridOptionsService.addGridCommonParams({column:this.column,colDef:this.column.getColDef()}))),!!e&&this.checkRightRowModelType("headerCheckboxSelection")&&this.checkSelectionType("headerCheckboxSelection")}isFilteredOnly(){return!!this.column.getColDef().headerCheckboxSelectionFilteredOnly}isCurrentPageOnly(){return!!this.column.getColDef().headerCheckboxSelectionCurrentPageOnly}}wA([P("rowModel")],d0.prototype,"rowModel",void 0),wA([P("selectionService")],d0.prototype,"selectionService",void 0);class jP extends Yr{constructor(e,t,i){super(e,t,i),this.refreshFunctions=[],this.userHeaderClasses=new Set,this.ariaDescriptionProperties=new Map,this.column=e}setComp(e,t,i,n){this.comp=e,this.setGui(t),this.updateState(),this.setupWidth(),this.setupMovingCss(),this.setupMenuClass(),this.setupSortableClass(),this.setupWrapTextClass(),this.refreshSpanHeaderHeight(),this.setupAutoHeight(n),this.addColumnHoverListener(),this.setupFilterClass(),this.setupClassesFromColDef(),this.setupTooltip(),this.addActiveHeaderMouseListeners(),this.setupSelectAll(),this.setupUserComp(),this.refreshAria(),this.resizeFeature=this.createManagedBean(new qf(this.getPinned(),this.column,i,e,this)),this.createManagedBean(new kv([this.column],t)),this.createManagedBean(new Lv(this.column,t,this.beans)),this.createManagedBean(new ir(t,{shouldStopEventPropagation:s=>this.shouldStopEventPropagation(s),onTabKeyDown:()=>null,handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addResizeAndMoveKeyboardListeners(),this.addManagedPropertyListeners(["suppressMovableColumns","suppressMenuHide","suppressAggFuncInHeader"],this.refresh.bind(this)),this.addManagedListener(this.column,ot.EVENT_COL_DEF_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_VALUE_CHANGED,this.onColumnValueChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,this.onColumnRowGroupChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_CHANGED,this.onColumnPivotChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_HEADER_HEIGHT_CHANGED,this.onHeaderHeightChanged.bind(this))}resizeHeader(e,t){var i,n;if(!this.column.isResizable())return;const s=this.column.getActualWidth(),o=null!==(i=this.column.getMinWidth())&&void 0!==i?i:0,a=null!==(n=this.column.getMaxWidth())&&void 0!==n?n:Number.MAX_SAFE_INTEGER,c=Math.min(Math.max(s+e,o),a);this.beans.columnModel.setColumnWidths([{key:this.column,newWidth:c}],t,!0,"uiColumnResized")}moveHeader(e){const{eGui:t,column:i,gridOptionsService:n,ctrlsService:s}=this,o=this.getPinned(),a=t.getBoundingClientRect().left,c=i.getActualWidth(),u=n.get("enableRtl"),g=Ml.normaliseX(e===zr.Left!==u?a-20:a+c+20,o,!0,n,s);Ml.attemptMoveColumns({allMovingColumns:[i],isFromHeader:!0,hDirection:e,xPosition:g,pinned:o,fromEnter:!1,fakeEvent:!1,gridOptionsService:n,columnModel:this.beans.columnModel}),s.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(i,"auto")}setupUserComp(){const e=this.lookupUserCompDetails();this.setCompDetails(e)}setCompDetails(e){this.userCompDetails=e,this.comp.setUserCompDetails(e)}lookupUserCompDetails(){const e=this.createParams(),t=this.column.getColDef();return this.userComponentFactory.getHeaderCompDetails(t,e)}createParams(){return this.gridOptionsService.addGridCommonParams({column:this.column,displayName:this.displayName,enableSorting:this.column.isSortable(),enableMenu:this.menuEnabled,enableFilterButton:this.openFilterEnabled&&this.menuService.isHeaderFilterButtonEnabled(this.column),enableFilterIcon:!this.openFilterEnabled||this.menuService.isLegacyMenuEnabled(),showColumnMenu:t=>{this.menuService.showColumnMenu({column:this.column,buttonElement:t,positionBy:"button"})},showColumnMenuAfterMouseClick:t=>{this.menuService.showColumnMenu({column:this.column,mouseEvent:t,positionBy:"mouse"})},showFilter:t=>{this.menuService.showFilterMenu({column:this.column,buttonElement:t,containerType:"columnFilter",positionBy:"button"})},progressSort:t=>{this.beans.sortController.progressSort(this.column,!!t,"uiColumnSorted")},setSort:(t,i)=>{this.beans.sortController.setSortForColumn(this.column,t,!!i,"uiColumnSorted")},eGridHeader:this.getGui()})}setupSelectAll(){this.selectAllFeature=this.createManagedBean(new d0(this.column)),this.selectAllFeature.setComp(this)}getSelectAllGui(){return this.selectAllFeature.getCheckboxGui()}handleKeyDown(e){super.handleKeyDown(e),e.key===ge.SPACE&&this.selectAllFeature.onSpaceKeyDown(e),e.key===ge.ENTER&&this.onEnterKeyDown(e),e.key===ge.DOWN&&e.altKey&&this.showMenuOnKeyPress(e,!1)}onEnterKeyDown(e){e.ctrlKey||e.metaKey?this.showMenuOnKeyPress(e,!0):this.sortable&&this.beans.sortController.progressSort(this.column,e.shiftKey,"uiColumnSorted")}showMenuOnKeyPress(e,t){const i=this.comp.getUserCompInstance();!i||!(i instanceof kn)||i.onMenuKeyboardShortcut(t)&&e.preventDefault()}onFocusIn(e){if(!this.getGui().contains(e.relatedTarget)){const t=this.getRowIndex();this.focusService.setFocusedHeader(t,this.column),this.announceAriaDescription()}this.focusService.isKeyboardMode()&&this.setActiveHeader(!0)}onFocusOut(e){this.getGui().contains(e.relatedTarget)||this.setActiveHeader(!1)}setupTooltip(){const t=this.createManagedBean(new KS({getColumn:()=>this.column,getColDef:()=>this.column.getColDef(),getGui:()=>this.eGui,getLocation:()=>"header",getTooltipValue:()=>this.column.getColDef().headerTooltip},this.beans));t.setComp(this.eGui),this.refreshFunctions.push(()=>t.refreshToolTip())}setupClassesFromColDef(){const e=()=>{const t=this.column.getColDef(),i=Nh.getHeaderClassesFromColDef(t,this.gridOptionsService,this.column,null),n=this.userHeaderClasses;this.userHeaderClasses=new Set(i),i.forEach(s=>{n.has(s)?n.delete(s):this.comp.addOrRemoveCssClass(s,!0)}),n.forEach(s=>this.comp.addOrRemoveCssClass(s,!1))};this.refreshFunctions.push(e),e()}setDragSource(e){if(this.dragSourceElement=e,this.removeDragSource(),!e||!this.draggable)return;const{column:t,beans:i,displayName:n,dragAndDropService:s,gridOptionsService:o}=this,{columnModel:a}=i;let c=!this.gridOptionsService.get("suppressDragLeaveHidesColumns");const u=this.dragSource={type:sn.HeaderCell,eElement:e,getDefaultIconName:()=>c?St.ICON_HIDE:St.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(t),dragItemName:n,onDragStarted:()=>{c=!o.get("suppressDragLeaveHidesColumns"),t.setMoving(!0,"uiColumnMoved")},onDragStopped:()=>t.setMoving(!1,"uiColumnMoved"),onGridEnter:p=>{var g;if(c){const m=(null===(g=p?.columns)||void 0===g?void 0:g.filter(y=>!y.getColDef().lockVisible))||[];a.setColumnsVisible(m,!0,"uiColumnMoved")}},onGridExit:p=>{var g;if(c){const m=(null===(g=p?.columns)||void 0===g?void 0:g.filter(y=>!y.getColDef().lockVisible))||[];a.setColumnsVisible(m,!1,"uiColumnMoved")}}};s.addDragSource(u,!0)}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}updateState(){this.menuEnabled=this.menuService.isColumnMenuInHeaderEnabled(this.column),this.openFilterEnabled=this.menuService.isFilterMenuInHeaderEnabled(this.column),this.sortable=this.column.isSortable(),this.displayName=this.calculateDisplayName(),this.draggable=this.workOutDraggable()}addRefreshFunction(e){this.refreshFunctions.push(e)}refresh(){this.updateState(),this.refreshHeaderComp(),this.refreshAria(),this.refreshFunctions.forEach(e=>e())}refreshHeaderComp(){const e=this.lookupUserCompDetails();null!=this.comp.getUserCompInstance()&&this.userCompDetails.componentClass==e.componentClass&&this.attemptHeaderCompRefresh(e.params)?this.setDragSource(this.dragSourceElement):this.setCompDetails(e)}attemptHeaderCompRefresh(e){const t=this.comp.getUserCompInstance();return!(!t||!t.refresh)&&t.refresh(e)}calculateDisplayName(){return this.beans.columnModel.getDisplayNameForColumn(this.column,"header",!0)}checkDisplayName(){this.displayName!==this.calculateDisplayName()&&this.refresh()}workOutDraggable(){const e=this.column.getColDef();return!(this.gridOptionsService.get("suppressMovableColumns")||e.suppressMovable||e.lockPosition)||!!e.enableRowGroup||!!e.enablePivot}onColumnRowGroupChanged(){this.checkDisplayName()}onColumnPivotChanged(){this.checkDisplayName()}onColumnValueChanged(){this.checkDisplayName()}setupWidth(){const e=()=>{const t=this.column.getActualWidth();this.comp.setWidth(`${t}px`)};this.addManagedListener(this.column,ot.EVENT_WIDTH_CHANGED,e),e()}setupMovingCss(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving())};this.addManagedListener(this.column,ot.EVENT_MOVING_CHANGED,e),e()}setupMenuClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-column-menu-visible",this.column.isMenuVisible())};this.addManagedListener(this.column,ot.EVENT_MENU_VISIBLE_CHANGED,e),e()}setupSortableClass(){const e=()=>{this.comp.addOrRemoveCssClass("ag-header-cell-sortable",!!this.sortable)};e(),this.addRefreshFunction(e),this.addManagedListener(this.eventService,ot.EVENT_SORT_CHANGED,this.refreshAriaSort.bind(this))}setupFilterClass(){const e=()=>{const t=this.column.isFilterActive();this.comp.addOrRemoveCssClass("ag-header-cell-filtered",t),this.refreshAria()};this.addManagedListener(this.column,ot.EVENT_FILTER_ACTIVE_CHANGED,e),e()}setupWrapTextClass(){const e=()=>{const t=!!this.column.getColDef().wrapHeaderText;this.comp.addOrRemoveCssClass("ag-header-cell-wrap-text",t)};e(),this.addRefreshFunction(e)}onDisplayedColumnsChanged(){super.onDisplayedColumnsChanged(),this.isAlive()&&this.onHeaderHeightChanged()}onHeaderHeightChanged(){this.refreshSpanHeaderHeight()}refreshSpanHeaderHeight(){const{eGui:e,column:t,comp:i,beans:n}=this;if(!t.isSpanHeaderHeight())return e.style.removeProperty("top"),e.style.removeProperty("height"),i.addOrRemoveCssClass("ag-header-span-height",!1),void i.addOrRemoveCssClass("ag-header-span-total",!1);const{numberOfParents:s,isSpanningTotal:o}=this.column.getColumnGroupPaddingInfo();i.addOrRemoveCssClass("ag-header-span-height",s>0);const{columnModel:a}=n,c=a.getColumnHeaderRowHeight();if(0===s)return i.addOrRemoveCssClass("ag-header-span-total",!1),e.style.setProperty("top","0px"),void e.style.setProperty("height",`${c}px`);i.addOrRemoveCssClass("ag-header-span-total",o);const g=s*(a.isPivotMode()?a.getPivotGroupHeaderHeight():a.getGroupHeaderHeight());e.style.setProperty("top",-g+"px"),e.style.setProperty("height",`${c+g}px`)}setupAutoHeight(e){const{columnModel:t,resizeObserverService:i}=this.beans,n=p=>{if(!this.isAlive())return;const{paddingTop:g,paddingBottom:m,borderBottomWidth:y,borderTopWidth:b}=wc(this.getGui()),D=e.offsetHeight+(g+m+y+b);if(p<5){const R=this.beans.gridOptionsService.getDocument(),L=0==D;if(!R||!R.contains(e)||L)return void window.setTimeout(()=>n(p+1),0)}t.setColumnHeaderHeight(this.column,D)};let o,s=!1;const a=()=>{const p=this.column.isAutoHeaderHeight();p&&!s&&c(),!p&&s&&u()},c=()=>{s=!0,n(0),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!0),o=i.observeResize(e,()=>n(0))},u=()=>{s=!1,o&&o(),this.comp.addOrRemoveCssClass("ag-header-cell-auto-height",!1),o=void 0};a(),this.addDestroyFunc(()=>u()),this.addManagedListener(this.column,ot.EVENT_WIDTH_CHANGED,()=>s&&n(0)),this.addManagedListener(this.eventService,ot.EVENT_SORT_CHANGED,()=>{s&&window.setTimeout(()=>n(0))}),this.addRefreshFunction(a)}refreshAriaSort(){if(this.sortable){const e=this.localeService.getLocaleTextFunc(),t=this.beans.sortController.getDisplaySortForColumn(this.column)||null;this.comp.setAriaSort(iE(t)),this.setAriaDescriptionProperty("sort",e("ariaSortableColumn","Press ENTER to sort"))}else this.comp.setAriaSort(),this.setAriaDescriptionProperty("sort",null)}refreshAriaMenu(){if(this.menuEnabled){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("menu",e("ariaMenuColumn","Press ALT DOWN to open column menu"))}else this.setAriaDescriptionProperty("menu",null)}refreshAriaFilterButton(){if(this.openFilterEnabled&&!this.menuService.isLegacyMenuEnabled()){const e=this.localeService.getLocaleTextFunc();this.setAriaDescriptionProperty("filterButton",e("ariaFilterColumn","Press CTRL ENTER to open filter"))}else this.setAriaDescriptionProperty("filterButton",null)}refreshAriaFiltered(){const e=this.localeService.getLocaleTextFunc();this.column.isFilterActive()?this.setAriaDescriptionProperty("filter",e("ariaColumnFiltered","Column Filtered")):this.setAriaDescriptionProperty("filter",null)}setAriaDescriptionProperty(e,t){null!=t?this.ariaDescriptionProperties.set(e,t):this.ariaDescriptionProperties.delete(e)}announceAriaDescription(){const e=this.beans.gridOptionsService.getDocument();if(!this.eGui.contains(e.activeElement))return;const t=Array.from(this.ariaDescriptionProperties.keys()).sort((i,n)=>"filter"===i?-1:n.charCodeAt(0)-i.charCodeAt(0)).map(i=>this.ariaDescriptionProperties.get(i)).join(". ");this.beans.ariaAnnouncementService.announceValue(t)}refreshAria(){this.refreshAriaSort(),this.refreshAriaMenu(),this.refreshAriaFilterButton(),this.refreshAriaFiltered()}addColumnHoverListener(){const e=()=>{if(!this.gridOptionsService.get("columnHoverHighlight"))return;const t=this.beans.columnHoverService.isHovered(this.column);this.comp.addOrRemoveCssClass("ag-column-hover",t)};this.addManagedListener(this.eventService,G.EVENT_COLUMN_HOVER_CHANGED,e),e()}getColId(){return this.column.getColId()}addActiveHeaderMouseListeners(){const e=n=>this.handleMouseOverChange("mouseenter"===n.type);this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e),this.addManagedListener(this.getGui(),"click",()=>this.dispatchColumnMouseEvent(G.EVENT_COLUMN_HEADER_CLICKED,this.column)),this.addManagedListener(this.getGui(),"contextmenu",n=>this.handleContextMenuMouseEvent(n,void 0,this.column))}handleMouseOverChange(e){this.setActiveHeader(e),this.eventService.dispatchEvent({type:e?G.EVENT_COLUMN_HEADER_MOUSE_OVER:G.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column})}setActiveHeader(e){this.comp.addOrRemoveCssClass("ag-header-active",e)}getAnchorElementForMenu(e){const t=this.comp.getUserCompInstance();return t instanceof kn?t.getAnchorElementForMenu(e):this.getGui()}destroy(){super.destroy(),this.refreshFunctions=null,this.selectAllFeature=null,this.dragSourceElement=null,this.userCompDetails=null,this.userHeaderClasses=null,this.ariaDescriptionProperties=null}}var ib=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Jd extends Ee{constructor(e,t,i,n){super(),this.eResize=t,this.comp=e,this.pinned=i,this.columnGroup=n}postConstruct(){if(!this.columnGroup.isResizable())return void this.comp.setResizableDisplayed(!1);const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.eResize,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this,!1),onResizeEnd:this.onResizing.bind(this,!0)});if(this.addDestroyFunc(e),!this.gridOptionsService.get("suppressAutoSize")){const t=this.gridOptionsService.get("skipHeaderOnAutoSize");this.eResize.addEventListener("dblclick",()=>{const i=[];this.columnGroup.getDisplayedLeafColumns().forEach(s=>{s.getColDef().suppressAutoSize||i.push(s.getColId())}),i.length>0&&this.columnModel.autoSizeColumns({columns:i,skipHeader:t,stopAtGroup:this.columnGroup,source:"uiColumnResized"}),this.resizeLeafColumnsToFit("uiColumnResized")})}}onResizeStart(e){const t=this.getInitialValues(e);this.storeLocalValues(t),this.toggleColumnResizing(!0)}onResizing(e,t,i="uiColumnResized"){const n=this.normaliseDragChange(t);this.resizeColumnsFromLocalValues(this.resizeStartWidth+n,i,e)}getInitialValues(e){const t=this.getColumnsToResize(),i=this.getInitialSizeOfColumns(t),s={columnsToResize:t,resizeStartWidth:i,resizeRatios:this.getSizeRatiosOfColumns(t,i)};let o=null;if(e&&(o=this.columnModel.getDisplayedGroupAfter(this.columnGroup)),o){const a=o.getDisplayedLeafColumns(),c=s.groupAfterColumns=a.filter(p=>p.isResizable()),u=s.groupAfterStartWidth=this.getInitialSizeOfColumns(c);s.groupAfterRatios=this.getSizeRatiosOfColumns(c,u)}else s.groupAfterColumns=void 0,s.groupAfterStartWidth=void 0,s.groupAfterRatios=void 0;return s}storeLocalValues(e){const{columnsToResize:t,resizeStartWidth:i,resizeRatios:n,groupAfterColumns:s,groupAfterStartWidth:o,groupAfterRatios:a}=e;this.resizeCols=t,this.resizeStartWidth=i,this.resizeRatios=n,this.resizeTakeFromCols=s,this.resizeTakeFromStartWidth=o,this.resizeTakeFromRatios=a}clearLocalValues(){this.resizeCols=void 0,this.resizeRatios=void 0,this.resizeTakeFromCols=void 0,this.resizeTakeFromRatios=void 0}resizeLeafColumnsToFit(e){const t=this.autoWidthCalculator.getPreferredWidthForColumnGroup(this.columnGroup),i=this.getInitialValues();t>i.resizeStartWidth&&this.resizeColumns(i,t,e,!0)}resizeColumnsFromLocalValues(e,t,i=!0){var n,s,o;if(!this.resizeCols||!this.resizeRatios)return;const a={columnsToResize:this.resizeCols,resizeStartWidth:this.resizeStartWidth,resizeRatios:this.resizeRatios,groupAfterColumns:null!==(n=this.resizeTakeFromCols)&&void 0!==n?n:void 0,groupAfterStartWidth:null!==(s=this.resizeTakeFromStartWidth)&&void 0!==s?s:void 0,groupAfterRatios:null!==(o=this.resizeTakeFromRatios)&&void 0!==o?o:void 0};this.resizeColumns(a,e,t,i)}resizeColumns(e,t,i,n=!0){const{columnsToResize:s,resizeStartWidth:o,resizeRatios:a,groupAfterColumns:c,groupAfterStartWidth:u,groupAfterRatios:p}=e,g=[];g.push({columns:s,ratios:a,width:t}),c&&g.push({columns:c,ratios:p,width:u-(t-o)}),this.columnModel.resizeColumnSets({resizeSets:g,finished:n,source:i}),n&&this.toggleColumnResizing(!1)}toggleColumnResizing(e){this.comp.addOrRemoveCssClass("ag-column-resizing",e)}getColumnsToResize(){return this.columnGroup.getDisplayedLeafColumns().filter(t=>t.isResizable())}getInitialSizeOfColumns(e){return e.reduce((t,i)=>t+i.getActualWidth(),0)}getSizeRatiosOfColumns(e,t){return e.map(i=>i.getActualWidth()/t)}normaliseDragChange(e){let t=e;return this.gridOptionsService.get("enableRtl")?"left"!==this.pinned&&(t*=-1):"right"===this.pinned&&(t*=-1),t}destroy(){super.destroy(),this.clearLocalValues()}}ib([P("horizontalResizeService")],Jd.prototype,"horizontalResizeService",void 0),ib([P("autoWidthCalculator")],Jd.prototype,"autoWidthCalculator",void 0),ib([P("columnModel")],Jd.prototype,"columnModel",void 0),ib([Se],Jd.prototype,"postConstruct",null);class zP extends Ee{constructor(e,t){super(),this.removeChildListenersFuncs=[],this.columnGroup=t,this.comp=e}postConstruct(){this.addListenersToChildrenColumns(),this.addManagedListener(this.columnGroup,di.EVENT_DISPLAYED_CHILDREN_CHANGED,this.onDisplayedChildrenChanged.bind(this)),this.onWidthChanged(),this.addDestroyFunc(this.removeListenersOnChildrenColumns.bind(this))}addListenersToChildrenColumns(){this.removeListenersOnChildrenColumns();const e=this.onWidthChanged.bind(this);this.columnGroup.getLeafColumns().forEach(t=>{t.addEventListener("widthChanged",e),t.addEventListener("visibleChanged",e),this.removeChildListenersFuncs.push(()=>{t.removeEventListener("widthChanged",e),t.removeEventListener("visibleChanged",e)})})}removeListenersOnChildrenColumns(){this.removeChildListenersFuncs.forEach(e=>e()),this.removeChildListenersFuncs=[]}onDisplayedChildrenChanged(){this.addListenersToChildrenColumns(),this.onWidthChanged()}onWidthChanged(){const e=this.columnGroup.getActualWidth();this.comp.setWidth(`${e}px`),this.comp.addOrRemoveCssClass("ag-hidden",0===e)}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Se],zP.prototype,"postConstruct",null);class Vv extends Yr{constructor(e,t,i){super(e,t,i),this.onSuppressColMoveChange=()=>{if(!this.isAlive()||this.isSuppressMoving())this.removeDragSource();else if(!this.dragSource){const n=this.getGui();this.setDragSource(n)}},this.column=e}setComp(e,t,i){this.comp=e,this.setGui(t),this.displayName=this.beans.columnModel.getDisplayNameForColumnGroup(this.column,"header"),this.addClasses(),this.setupMovingCss(),this.setupExpandable(),this.setupTooltip(),this.setupUserComp(),this.addHeaderMouseListeners();const n=this.getParentRowCtrl().getPinned(),s=this.column.getProvidedColumnGroup().getLeafColumns();this.createManagedBean(new kv(s,t)),this.createManagedBean(new Lv(this.column,t,this.beans)),this.createManagedBean(new zP(e,this.column)),this.resizeFeature=this.createManagedBean(new Jd(e,i,n,this.column)),this.createManagedBean(new ir(t,{shouldStopEventPropagation:this.shouldStopEventPropagation.bind(this),onTabKeyDown:()=>{},handleKeyDown:this.handleKeyDown.bind(this),onFocusIn:this.onFocusIn.bind(this)})),this.addManagedPropertyListener(G.EVENT_SUPPRESS_COLUMN_MOVE_CHANGED,this.onSuppressColMoveChange),this.addResizeAndMoveKeyboardListeners()}resizeHeader(e,t){if(!this.resizeFeature)return;const i=this.resizeFeature.getInitialValues(t);this.resizeFeature.resizeColumns(i,i.resizeStartWidth+e,"uiColumnResized",!0)}moveHeader(e){const{beans:t,eGui:i,column:n,gridOptionsService:s,ctrlsService:o}=this,a=s.get("enableRtl"),c=e===zr.Left,u=this.getPinned(),p=i.getBoundingClientRect(),g=p.left,y=Ml.normaliseX(c!==a?g-20:g+p.width+20,u,!0,s,o),b=n.getGroupId(),_=this.focusService.getFocusedHeader();Ml.attemptMoveColumns({allMovingColumns:this.column.getLeafColumns(),isFromHeader:!0,hDirection:e,xPosition:y,pinned:u,fromEnter:!1,fakeEvent:!1,gridOptionsService:s,columnModel:t.columnModel});const E=n.getDisplayedLeafColumns(),D=c?E[0]:Xt(E);this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(D,"auto"),!this.isAlive()&&_&&this.restoreFocus(b,n,_)}restoreFocus(e,t,i){const n=t.getLeafColumns();if(!n.length)return;const s=n[0].getParent();if(!s)return;const o=this.findGroupWidthId(s,e);o&&this.focusService.focusHeaderPosition({headerPosition:Object.assign(Object.assign({},i),{column:o})})}findGroupWidthId(e,t){for(;e;){if(e.getGroupId()===t)return e;e=e.getParent()}return null}resizeLeafColumnsToFit(e){!this.resizeFeature||this.resizeFeature.resizeLeafColumnsToFit(e)}setupUserComp(){const e=this.gridOptionsService.addGridCommonParams({displayName:this.displayName,columnGroup:this.column,setExpanded:i=>{this.beans.columnModel.setColumnGroupOpened(this.column.getProvidedColumnGroup(),i,"gridInitializing")}}),t=this.userComponentFactory.getHeaderGroupCompDetails(e);this.comp.setUserCompDetails(t)}addHeaderMouseListeners(){const e=n=>this.handleMouseOverChange("mouseenter"===n.type);this.addManagedListener(this.getGui(),"mouseenter",e),this.addManagedListener(this.getGui(),"mouseleave",e),this.addManagedListener(this.getGui(),"click",()=>this.dispatchColumnMouseEvent(G.EVENT_COLUMN_HEADER_CLICKED,this.column.getProvidedColumnGroup())),this.addManagedListener(this.getGui(),"contextmenu",n=>this.handleContextMenuMouseEvent(n,void 0,this.column.getProvidedColumnGroup()))}handleMouseOverChange(e){const i={type:e?G.EVENT_COLUMN_HEADER_MOUSE_OVER:G.EVENT_COLUMN_HEADER_MOUSE_LEAVE,column:this.column.getProvidedColumnGroup()};this.eventService.dispatchEvent(i)}setupTooltip(){const e=this.column.getColGroupDef(),t={getColumn:()=>this.column,getGui:()=>this.eGui,getLocation:()=>"headerGroup",getTooltipValue:()=>e&&e.headerTooltip};e&&(t.getColDef=()=>e),this.createManagedBean(new KS(t,this.beans)).setComp(this.eGui)}setupExpandable(){const e=this.column.getProvidedColumnGroup();this.refreshExpanded(),this.addManagedListener(e,Wt.EVENT_EXPANDABLE_CHANGED,this.refreshExpanded.bind(this)),this.addManagedListener(e,Wt.EVENT_EXPANDED_CHANGED,this.refreshExpanded.bind(this))}refreshExpanded(){const e=this.column;this.expandable=e.isExpandable();const t=e.isExpanded();this.comp.setAriaExpanded(this.expandable?t?"true":"false":void 0)}getColId(){return this.column.getUniqueId()}addClasses(){const e=this.column.getColGroupDef(),t=Nh.getHeaderClassesFromColDef(e,this.gridOptionsService,null,this.column);this.column.isPadding()?(t.push("ag-header-group-cell-no-group"),this.column.getLeafColumns().every(n=>n.isSpanHeaderHeight())&&t.push("ag-header-span-height")):t.push("ag-header-group-cell-with-group"),t.forEach(i=>this.comp.addOrRemoveCssClass(i,!0))}setupMovingCss(){const t=this.column.getProvidedColumnGroup().getLeafColumns(),i=()=>this.comp.addOrRemoveCssClass("ag-header-cell-moving",this.column.isMoving());t.forEach(n=>{this.addManagedListener(n,ot.EVENT_MOVING_CHANGED,i)}),i()}onFocusIn(e){if(!this.eGui.contains(e.relatedTarget)){const t=this.getRowIndex();this.beans.focusService.setFocusedHeader(t,this.column)}}handleKeyDown(e){super.handleKeyDown(e);const t=this.getWrapperHasFocus();if(this.expandable&&t&&e.key===ge.ENTER){const i=this.column,n=!i.isExpanded();this.beans.columnModel.setColumnGroupOpened(i.getProvidedColumnGroup(),n,"uiColumnExpanded")}}setDragSource(e){if(!this.isAlive()||this.isSuppressMoving()||(this.removeDragSource(),!e))return;const{beans:t,column:i,displayName:n,gridOptionsService:s,dragAndDropService:o}=this,{columnModel:a}=t,c=i.getProvidedColumnGroup().getLeafColumns();let u=!s.get("suppressDragLeaveHidesColumns");const p=this.dragSource={type:sn.HeaderCell,eElement:e,getDefaultIconName:()=>u?St.ICON_HIDE:St.ICON_NOT_ALLOWED,dragItemName:n,getDragItem:()=>this.getDragItemForGroup(i),onDragStarted:()=>{u=!s.get("suppressDragLeaveHidesColumns"),c.forEach(g=>g.setMoving(!0,"uiColumnDragged"))},onDragStopped:()=>c.forEach(g=>g.setMoving(!1,"uiColumnDragged")),onGridEnter:g=>{var m;if(u){const y=(null===(m=g?.columns)||void 0===m?void 0:m.filter(b=>!b.getColDef().lockVisible))||[];a.setColumnsVisible(y,!0,"uiColumnMoved")}},onGridExit:g=>{var m;if(u){const y=(null===(m=g?.columns)||void 0===m?void 0:m.filter(b=>!b.getColDef().lockVisible))||[];a.setColumnsVisible(y,!1,"uiColumnMoved")}}};o.addDragSource(p,!0)}getDragItemForGroup(e){const t=e.getProvidedColumnGroup().getLeafColumns(),i={};t.forEach(s=>i[s.getId()]=s.isVisible());const n=[];return this.beans.columnModel.getAllDisplayedColumns().forEach(s=>{t.indexOf(s)>=0&&(n.push(s),vr(t,s))}),t.forEach(s=>n.push(s)),{columns:n,visibleState:i}}isSuppressMoving(){let e=!1;return this.column.getLeafColumns().forEach(i=>{(i.getColDef().suppressMovable||i.getColDef().lockPosition)&&(e=!0)}),e||this.gridOptionsService.get("suppressMovableColumns")}}var EA=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let $P=0;class Hh extends Ee{constructor(e,t,i){super(),this.instanceId=$P++,this.rowIndex=e,this.pinned=t,this.type=i,this.headerRowClass="ag-header-row "+(i==Ns.COLUMN_GROUP?"ag-header-row-column-group":i==Ns.FLOATING_FILTER?"ag-header-row-column-filter":"ag-header-row-column")}postConstruct(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.isEnsureDomOrder=this.gridOptionsService.get("ensureDomOrder")}getInstanceId(){return this.instanceId}setComp(e,t=!0){this.comp=e,t&&(this.onRowHeightChanged(),this.onVirtualColumnsChanged()),this.setWidth(),this.addEventListeners()}getHeaderRowClass(){return this.headerRowClass}getAriaRowIndex(){return this.rowIndex+1}addEventListeners(){this.addManagedListener(this.eventService,G.EVENT_COLUMN_RESIZED,this.onColumnResized.bind(this)),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_VIRTUAL_COLUMNS_CHANGED,e=>this.onVirtualColumnsChanged(e.afterScroll)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_GRID_STYLES_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("domLayout",this.onDisplayedColumnsChanged.bind(this)),this.addManagedPropertyListener("ensureDomOrder",e=>this.isEnsureDomOrder=e.currentValue),this.addManagedPropertyListener("headerHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("groupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("pivotGroupHeaderHeight",this.onRowHeightChanged.bind(this)),this.addManagedPropertyListener("floatingFiltersHeight",this.onRowHeightChanged.bind(this))}getHeaderCellCtrl(e){if(this.headerCellCtrls)return ff(this.headerCellCtrls).find(t=>t.getColumnGroupChild()===e)}onDisplayedColumnsChanged(){this.isPrintLayout=this.gridOptionsService.isDomLayout("print"),this.onVirtualColumnsChanged(),this.setWidth(),this.onRowHeightChanged()}getType(){return this.type}onColumnResized(){this.setWidth()}setWidth(){const e=this.getWidthForRow();this.comp.setWidth(`${e}px`)}getWidthForRow(){const{columnModel:e}=this.beans;return this.isPrintLayout?null!=this.pinned?0:e.getContainerWidth("right")+e.getContainerWidth("left")+e.getContainerWidth(null):e.getContainerWidth(this.pinned)}onRowHeightChanged(){var{topOffset:e,rowHeight:t}=this.getTopAndHeight();this.comp.setTop(e+"px"),this.comp.setHeight(t+"px")}getTopAndHeight(){const{columnModel:e,filterManager:t}=this.beans;let i=e.getHeaderRowCount();const n=[];let s=0;t.hasFloatingFilters()&&(i++,s=1);const o=e.getColumnGroupHeaderRowHeight(),a=e.getColumnHeaderRowHeight(),u=i-(1+s);for(let m=0;m<u;m++)n.push(o);n.push(a);for(let m=0;m<s;m++)n.push(e.getFloatingFiltersHeight());let p=0;for(let m=0;m<this.rowIndex;m++)p+=n[m];return{topOffset:p,rowHeight:n[this.rowIndex]}}getPinned(){return this.pinned}getRowIndex(){return this.rowIndex}onVirtualColumnsChanged(e=!1){const t=this.getHeaderCtrls();this.comp.setHeaderCtrls(t,this.isEnsureDomOrder||this.isPrintLayout,e)}getHeaderCtrls(){const e=this.headerCellCtrls;this.headerCellCtrls=new Map;const t=this.getColumnsInViewport();for(const s of t)this.recycleAndCreateHeaderCtrls(s,e);const i=s=>{const{focusService:o,columnModel:a}=this.beans;return!!o.isHeaderWrapperFocused(s)&&a.isDisplayed(s.getColumnGroupChild())};if(e)for(const[s,o]of e)i(o)?this.headerCellCtrls.set(s,o):this.destroyBean(o);return Array.from(this.headerCellCtrls.values())}recycleAndCreateHeaderCtrls(e,t){if(!this.headerCellCtrls||e.isEmptyGroup())return;const i=e.getUniqueId();let n;if(t&&(n=t.get(i),t.delete(i)),n&&n.getColumnGroupChild()!=e&&(this.destroyBean(n),n=void 0),null==n)switch(this.type){case Ns.FLOATING_FILTER:n=this.createBean(new c0(e,this.beans,this));break;case Ns.COLUMN_GROUP:n=this.createBean(new Vv(e,this.beans,this));break;default:n=this.createBean(new jP(e,this.beans,this))}this.headerCellCtrls.set(i,n)}getColumnsInViewport(){return this.isPrintLayout?this.getColumnsInViewportPrintLayout():this.getColumnsInViewportNormalLayout()}getColumnsInViewportPrintLayout(){if(null!=this.pinned)return[];let e=[];const t=this.getActualDepth(),{columnModel:i}=this.beans;return["left",null,"right"].forEach(n=>{const s=i.getVirtualHeaderGroupRow(n,t);e=e.concat(s)}),e}getActualDepth(){return this.type==Ns.FLOATING_FILTER?this.rowIndex-1:this.rowIndex}getColumnsInViewportNormalLayout(){return this.beans.columnModel.getVirtualHeaderGroupRow(this.pinned,this.getActualDepth())}focusHeader(e,t){if(!this.headerCellCtrls)return!1;const n=Array.from(this.headerCellCtrls.values()).find(s=>s.getColumnGroupChild()==e);return!!n&&n.focus(t)}destroy(){this.headerCellCtrls&&this.headerCellCtrls.forEach(e=>{this.destroyBean(e)}),this.headerCellCtrls=void 0,super.destroy()}}EA([P("beans")],Hh.prototype,"beans",void 0),EA([Se],Hh.prototype,"postConstruct",null);var Xf=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class sr extends Ee{constructor(e){super(),this.hidden=!1,this.includeFloatingFilter=!1,this.groupsRowCtrls=[],this.pinned=e}setComp(e,t){this.comp=e,this.eViewport=t,this.setupCenterWidth(),this.setupPinnedWidth(),this.setupDragAndDrop(this.eViewport),this.addManagedListener(this.eventService,G.EVENT_GRID_COLUMNS_CHANGED,this.onGridColumnsChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.ctrlsService.registerHeaderContainer(this,this.pinned),this.columnModel.isReady()&&this.refresh()}setupDragAndDrop(e){const t=new Xd(this.pinned,e);this.createManagedBean(t)}refresh(e=!1){const t=new RE,i=this.focusService.getFocusHeaderToUseAfterRefresh();(()=>{const c=this.columnModel.getHeaderRowCount()-1;this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls);for(let u=0;u<c;u++){const p=this.createBean(new Hh(t.next(),this.pinned,Ns.COLUMN_GROUP));this.groupsRowCtrls.push(p)}})(),(()=>{const c=t.next(),u=!(this.hidden||null!=this.columnsRowCtrl&&e&&this.columnsRowCtrl.getRowIndex()===c);(u||this.hidden)&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),u&&(this.columnsRowCtrl=this.createBean(new Hh(c,this.pinned,Ns.COLUMN)))})(),(()=>{this.includeFloatingFilter=this.filterManager.hasFloatingFilters()&&!this.hidden;const c=()=>{this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)};if(!this.includeFloatingFilter)return void c();const u=t.next();if(this.filtersRowCtrl){const p=this.filtersRowCtrl.getRowIndex()!==u;(!e||p)&&c()}this.filtersRowCtrl||(this.filtersRowCtrl=this.createBean(new Hh(u,this.pinned,Ns.FLOATING_FILTER)))})();const a=this.getAllCtrls();this.comp.setCtrls(a),this.restoreFocusOnHeader(i)}restoreFocusOnHeader(e){null==e||e.column.getPinned()!=this.pinned||this.focusService.focusHeaderPosition({headerPosition:e})}getAllCtrls(){const e=[...this.groupsRowCtrls];return this.columnsRowCtrl&&e.push(this.columnsRowCtrl),this.filtersRowCtrl&&e.push(this.filtersRowCtrl),e}onGridColumnsChanged(){this.refresh(!0)}onDisplayedColumnsChanged(){const e=this.filterManager.hasFloatingFilters()&&!this.hidden;this.includeFloatingFilter!==e&&this.refresh(!0)}setupCenterWidth(){null==this.pinned&&this.createManagedBean(new Lh(e=>this.comp.setCenterWidth(`${e}px`),!0))}setHorizontalScroll(e){this.comp.setViewportScrollLeft(e)}setupPinnedWidth(){if(null==this.pinned)return;const e="left"===this.pinned,t="right"===this.pinned;this.hidden=!0;const i=()=>{const n=e?this.pinnedWidthService.getPinnedLeftWidth():this.pinnedWidthService.getPinnedRightWidth();if(null==n)return;const s=0==n,o=this.hidden!==s,a=this.gridOptionsService.get("enableRtl"),c=this.gridOptionsService.getScrollbarWidth(),p=this.scrollVisibleService.isVerticalScrollShowing()&&(a&&e||!a&&t)?n+c:n;this.comp.setPinnedContainerWidth(`${p}px`),this.comp.setDisplayed(!s),o&&(this.hidden=s,this.refresh())};this.addManagedListener(this.eventService,G.EVENT_LEFT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,G.EVENT_RIGHT_PINNED_WIDTH_CHANGED,i),this.addManagedListener(this.eventService,G.EVENT_SCROLL_VISIBILITY_CHANGED,i),this.addManagedListener(this.eventService,G.EVENT_SCROLLBAR_WIDTH_CHANGED,i)}getHeaderCtrlForColumn(e){if(e instanceof ot)return this.columnsRowCtrl?this.columnsRowCtrl.getHeaderCellCtrl(e):void 0;if(0!==this.groupsRowCtrls.length)for(let t=0;t<this.groupsRowCtrls.length;t++){const i=this.groupsRowCtrls[t].getHeaderCellCtrl(e);if(i)return i}}getHtmlElementForColumnHeader(e){const t=this.getHeaderCtrlForColumn(e);return t?t.getGui():null}getRowType(e){const i=this.getAllCtrls()[e];return i?i.getType():void 0}focusHeader(e,t,i){const s=this.getAllCtrls()[e];return!!s&&s.focusHeader(t,i)}getViewport(){return this.eViewport}getRowCount(){return this.groupsRowCtrls.length+(this.columnsRowCtrl?1:0)+(this.filtersRowCtrl?1:0)}destroy(){this.filtersRowCtrl&&(this.filtersRowCtrl=this.destroyBean(this.filtersRowCtrl)),this.columnsRowCtrl&&(this.columnsRowCtrl=this.destroyBean(this.columnsRowCtrl)),this.groupsRowCtrls&&this.groupsRowCtrls.length&&(this.groupsRowCtrls=this.destroyBeans(this.groupsRowCtrls)),super.destroy()}}Xf([P("ctrlsService")],sr.prototype,"ctrlsService",void 0),Xf([P("scrollVisibleService")],sr.prototype,"scrollVisibleService",void 0),Xf([P("pinnedWidthService")],sr.prototype,"pinnedWidthService",void 0),Xf([P("columnModel")],sr.prototype,"columnModel",void 0),Xf([P("focusService")],sr.prototype,"focusService",void 0),Xf([P("filterManager")],sr.prototype,"filterManager",void 0);var Uh=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Vi extends Ne{constructor(e){super(),this.headerRowComps={},this.rowCompsList=[],this.pinned=e}init(){this.selectAndSetTemplate();const e={setDisplayed:i=>this.setDisplayed(i),setCtrls:i=>this.setCtrls(i),setCenterWidth:i=>this.eCenterContainer.style.width=i,setViewportScrollLeft:i=>this.getGui().scrollLeft=i,setPinnedContainerWidth:i=>{const n=this.getGui();n.style.width=i,n.style.maxWidth=i,n.style.minWidth=i}};this.createManagedBean(new sr(this.pinned)).setComp(e,this.getGui())}selectAndSetTemplate(){this.setTemplate("left"==this.pinned?Vi.PINNED_LEFT_TEMPLATE:"right"==this.pinned?Vi.PINNED_RIGHT_TEMPLATE:Vi.CENTER_TEMPLATE),this.eRowContainer=this.eCenterContainer?this.eCenterContainer:this.getGui()}destroyRowComps(){this.setCtrls([])}destroyRowComp(e){this.destroyBean(e),this.eRowContainer.removeChild(e.getGui())}setCtrls(e){const t=this.headerRowComps;let i;this.headerRowComps={},this.rowCompsList=[];const n=s=>{const o=s.getGui();o.parentElement!=this.eRowContainer&&this.eRowContainer.appendChild(o),i&&DE(this.eRowContainer,o,i),i=o};e.forEach(s=>{const o=s.getInstanceId(),a=t[o];delete t[o];const c=a||this.createBean(new l0(s));this.headerRowComps[o]=c,this.rowCompsList.push(c),n(c)}),fh(t).forEach(s=>this.destroyRowComp(s))}}Vi.PINNED_LEFT_TEMPLATE='<div class="ag-pinned-left-header" role="rowgroup"></div>',Vi.PINNED_RIGHT_TEMPLATE='<div class="ag-pinned-right-header" role="rowgroup"></div>',Vi.CENTER_TEMPLATE='<div class="ag-header-viewport" role="presentation">\n            <div class="ag-header-container" ref="eCenterContainer" role="rowgroup"></div>\n        </div>',Uh([re("eCenterContainer")],Vi.prototype,"eCenterContainer",void 0),Uh([Se],Vi.prototype,"init",null),Uh([Js],Vi.prototype,"destroyRowComps",null);var Ga=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},qr=(()=>(function(r){r[r.UP=0]="UP",r[r.DOWN=1]="DOWN",r[r.LEFT=2]="LEFT",r[r.RIGHT=3]="RIGHT"}(qr||(qr={})),qr))();let gs=class extends Ee{constructor(){super(...arguments),this.currentHeaderRowWithoutSpan=-1}postConstruct(){this.ctrlsService.whenReady(t=>{this.gridBodyCon=t.gridBodyCtrl});const e=this.gridOptionsService.getDocument();this.addManagedListener(e,"mousedown",()=>this.setCurrentHeaderRowWithoutSpan(-1))}getHeaderRowCount(){const e=this.ctrlsService.getHeaderRowContainerCtrl();return e?e.getRowCount():0}navigateVertically(e,t,i){if(t||(t=this.focusService.getFocusedHeader()),!t)return!1;const{headerRowIndex:n,column:s}=t,o=this.getHeaderRowCount(),a=e===qr.UP;let{headerRowIndex:c,column:u,headerRowIndexWithoutSpan:p}=a?this.headerPositionUtils.getColumnVisibleParent(s,n):this.headerPositionUtils.getColumnVisibleChild(s,n),g=!1;return c<0&&(c=0,u=s,g=!0),c>=o?(c=-1,this.setCurrentHeaderRowWithoutSpan(-1)):void 0!==p&&(this.currentHeaderRowWithoutSpan=p),!(!g&&!u)&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:c,column:u},allowUserOverride:!0,event:i})}setCurrentHeaderRowWithoutSpan(e){this.currentHeaderRowWithoutSpan=e}navigateHorizontally(e,t=!1,i){const n=this.focusService.getFocusedHeader(),s=e===qr.LEFT,o=this.gridOptionsService.get("enableRtl");let a,c;return-1!==this.currentHeaderRowWithoutSpan?n.headerRowIndex=this.currentHeaderRowWithoutSpan:this.currentHeaderRowWithoutSpan=n.headerRowIndex,s!==o?(c="Before",a=this.headerPositionUtils.findHeader(n,c)):(c="After",a=this.headerPositionUtils.findHeader(n,c)),a||!t?this.focusService.focusHeaderPosition({headerPosition:a,direction:c,fromTab:t,allowUserOverride:!0,event:i}):this.focusNextHeaderRow(n,c,i)}focusNextHeaderRow(e,t,i){const n=e.headerRowIndex;let o,s=null;if("Before"===t?n>0&&(o=n-1,this.currentHeaderRowWithoutSpan-=1,s=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"end")):(o=n+1,this.currentHeaderRowWithoutSpan<this.getHeaderRowCount()?this.currentHeaderRowWithoutSpan+=1:this.setCurrentHeaderRowWithoutSpan(-1),s=this.headerPositionUtils.findColAtEdgeForHeaderRow(o,"start")),!s)return!1;const{column:a,headerRowIndex:c}=this.headerPositionUtils.getHeaderIndexToFocus(s.column,s?.headerRowIndex);return this.focusService.focusHeaderPosition({headerPosition:{column:a,headerRowIndex:c},direction:t,fromTab:!0,allowUserOverride:!0,event:i})}scrollToColumn(e,t="After"){if(e.getPinned())return;let i;if(e instanceof di){const n=e.getDisplayedLeafColumns();i="Before"===t?Xt(n):n[0]}else i=e;this.gridBodyCon.getScrollFeature().ensureColumnVisible(i)}};Ga([P("focusService")],gs.prototype,"focusService",void 0),Ga([P("headerPositionUtils")],gs.prototype,"headerPositionUtils",void 0),Ga([P("ctrlsService")],gs.prototype,"ctrlsService",void 0),Ga([Se],gs.prototype,"postConstruct",null),gs=Ga([He("headerNavigationService")],gs);var Qd=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class $o extends Ee{setComp(e,t,i){this.comp=e,this.eGui=t,this.createManagedBean(new ir(i,{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),onFocusOut:this.onFocusOut.bind(this)})),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.onPivotModeChanged(),this.setupHeaderHeight();const n=this.onHeaderContextMenu.bind(this);this.addManagedListener(this.eGui,"contextmenu",n),this.mockContextMenuForIPad(n),this.ctrlsService.registerGridHeaderCtrl(this)}setupHeaderHeight(){const e=this.setHeaderHeight.bind(this);e(),this.addManagedPropertyListener("headerHeight",e),this.addManagedPropertyListener("pivotHeaderHeight",e),this.addManagedPropertyListener("groupHeaderHeight",e),this.addManagedPropertyListener("pivotGroupHeaderHeight",e),this.addManagedPropertyListener("floatingFiltersHeight",e),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,G.EVENT_COLUMN_HEADER_HEIGHT_CHANGED,e),this.addManagedListener(this.eventService,G.EVENT_GRID_STYLES_CHANGED,e),this.addManagedListener(this.eventService,G.EVENT_ADVANCED_FILTER_ENABLED_CHANGED,e)}getHeaderHeight(){return this.headerHeight}setHeaderHeight(){const{columnModel:e}=this;let n,t=0,i=e.getHeaderRowCount();this.filterManager.hasFloatingFilters()&&(i++,t=1);const o=this.columnModel.getColumnGroupHeaderRowHeight(),a=this.columnModel.getColumnHeaderRowHeight(),u=i-(1+t);n=t*e.getFloatingFiltersHeight(),n+=u*o,n+=a,this.headerHeight!==n&&(this.headerHeight=n,this.comp.setHeightAndMinHeight(`${n+1}px`),this.eventService.dispatchEvent({type:G.EVENT_HEADER_HEIGHT_CHANGED}))}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.comp.addOrRemoveCssClass("ag-pivot-on",e),this.comp.addOrRemoveCssClass("ag-pivot-off",!e)}onDisplayedColumnsChanged(){const t=this.columnModel.getAllDisplayedColumns().some(i=>i.isSpanHeaderHeight());this.comp.addOrRemoveCssClass("ag-header-allow-overflow",t)}onTabKeyDown(e){const t=this.gridOptionsService.get("enableRtl");(this.headerNavigationService.navigateHorizontally(e.shiftKey!==t?qr.LEFT:qr.RIGHT,!0,e)||this.focusService.focusNextGridCoreContainer(e.shiftKey))&&e.preventDefault()}handleKeyDown(e){let t=null;switch(e.key){case ge.LEFT:t=qr.LEFT;case ge.RIGHT:Ie(t)||(t=qr.RIGHT),this.headerNavigationService.navigateHorizontally(t,!1,e);break;case ge.UP:t=qr.UP;case ge.DOWN:Ie(t)||(t=qr.DOWN),this.headerNavigationService.navigateVertically(t,null,e)&&e.preventDefault();break;default:return}}onFocusOut(e){const t=this.gridOptionsService.getDocument(),{relatedTarget:i}=e;!i&&this.eGui.contains(t.activeElement)||this.eGui.contains(i)||this.focusService.clearFocusedHeader()}onHeaderContextMenu(e,t,i){if(!e&&!i||!this.menuService.isHeaderContextMenuEnabled())return;const{target:n}=e??t;(n===this.eGui||n===this.ctrlsService.getHeaderRowContainerCtrl().getViewport())&&this.menuService.showHeaderContextMenu(void 0,e,i)}mockContextMenuForIPad(e){if(!Vo())return;const t=new Ln(this.eGui);this.addManagedListener(t,Ln.EVENT_LONG_TAP,n=>{e(void 0,n.touchStart,n.touchEvent)}),this.addDestroyFunc(()=>t.destroy())}}Qd([P("headerNavigationService")],$o.prototype,"headerNavigationService",void 0),Qd([P("focusService")],$o.prototype,"focusService",void 0),Qd([P("columnModel")],$o.prototype,"columnModel",void 0),Qd([P("ctrlsService")],$o.prototype,"ctrlsService",void 0),Qd([P("filterManager")],$o.prototype,"filterManager",void 0),Qd([P("menuService")],$o.prototype,"menuService",void 0);class Il extends Ne{constructor(){super(Il.TEMPLATE)}postConstruct(){const e={addOrRemoveCssClass:(n,s)=>this.addOrRemoveCssClass(n,s),setHeightAndMinHeight:n=>{this.getGui().style.height=n,this.getGui().style.minHeight=n}};this.createManagedBean(new $o).setComp(e,this.getGui(),this.getFocusableElement());const i=n=>{this.createManagedBean(n),this.appendChild(n)};i(new Vi("left")),i(new Vi(null)),i(new Vi("right"))}}Il.TEMPLATE='<div class="ag-header" role="presentation"/>',function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Se],Il.prototype,"postConstruct",null);var eu=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Fl=class extends Ee{addResizeBar(e){const t={dragStartPixels:e.dragStartPixels||0,eElement:e.eResizeBar,onDragStart:this.onDragStart.bind(this,e),onDragStop:this.onDragStop.bind(this,e),onDragging:this.onDragging.bind(this,e),includeTouch:!0,stopPropagationForTouch:!0};return this.dragService.addDragSource(t),()=>this.dragService.removeDragSource(t)}onDragStart(e,t){this.dragStartX=t.clientX,this.setResizeIcons();const i=t instanceof MouseEvent&&!0===t.shiftKey;e.onResizeStart(i)}setResizeIcons(){const e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!0),e.disableUserSelect(!0)}onDragStop(e,t){e.onResizeEnd(this.resizeAmount),this.resetIcons()}resetIcons(){const e=this.ctrlsService.getGridCtrl();e.setResizeCursor(!1),e.disableUserSelect(!1)}onDragging(e,t){this.resizeAmount=t.clientX-this.dragStartX,e.onResizing(this.resizeAmount)}};eu([P("dragService")],Fl.prototype,"dragService",void 0),eu([P("ctrlsService")],Fl.prototype,"ctrlsService",void 0),Fl=eu([He("horizontalResizeService")],Fl);var Va=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let So=class extends Ee{hideActiveMenu(){this.hidePopup&&this.hidePopup()}showMenuAfterMouseEvent(e,t,i){this.showPopup(e,n=>{this.popupService.positionPopupUnderMouseEvent({column:e,type:i,mouseEvent:t,ePopup:n})},i,t.target,this.menuService.isLegacyMenuEnabled())}showMenuAfterButtonClick(e,t,i){let n=-1,s="left";const o=this.menuService.isLegacyMenuEnabled();!o&&this.gridOptionsService.get("enableRtl")&&(n=1,s="right");let a=o?void 0:4*n,c=o?void 0:4;this.showPopup(e,u=>{this.popupService.positionPopupByComponent({type:i,eventSource:t,ePopup:u,nudgeX:a,nudgeY:c,alignSide:s,keepWithinBounds:!0,position:"under",column:e})},i,t,o)}showPopup(e,t,i,n,s){const o=e?this.filterManager.getOrCreateFilterWrapper(e,"COLUMN_MENU"):void 0;if(!o||!e)throw new Error("AG Grid - unable to show popup filter, filter instantiation failed");const a=document.createElement("div");let c;In(a,"presentation"),a.classList.add("ag-menu"),s||a.classList.add("ag-filter-menu"),this.tabListener=this.addManagedListener(a,"keydown",_=>this.trapFocusWithin(_,a)),o.guiPromise.then(_=>a.appendChild(_));const p=this.menuService.isColumnMenuAnchoringEnabled()?n??this.ctrlsService.getGridBodyCtrl().getGui():void 0,m=this.localeService.getLocaleTextFunc(),y=s&&"columnFilter"!==i?m("ariaLabelColumnMenu","Column Menu"):m("ariaLabelColumnFilter","Column Filter"),b=this.popupService.addPopup({modal:!0,eChild:a,closeOnEsc:!0,closedCallback:_=>{e.setMenuVisible(!1,"contextMenu");const E=_ instanceof KeyboardEvent;if(this.tabListener&&(this.tabListener=this.tabListener()),E&&n&&Fn(n)){const D=this.focusService.findTabbableParent(n);D&&D.focus()}(()=>{var _;null===(_=o.filterPromise)||void 0===_||_.then(E=>{var D;return null===(D=E?.afterGuiDetached)||void 0===D?void 0:D.call(E)})})(),this.dispatchVisibleChangedEvent(!1,i,e)},positionCallback:()=>t(a),anchorToElement:p,ariaLabel:y});b&&(this.hidePopup=c=b.hideFunc),o.filterPromise.then(_=>{t(a),_.afterGuiAttached&&_.afterGuiAttached({container:i,hidePopup:c})}),e.setMenuVisible(!0,"contextMenu"),this.dispatchVisibleChangedEvent(!0,i,e)}trapFocusWithin(e,t){e.key!==ge.TAB||e.defaultPrevented||this.focusService.findNextFocusableElement(t,!1,e.shiftKey)||(e.preventDefault(),this.focusService.focusInto(t,e.shiftKey))}dispatchVisibleChangedEvent(e,t,i){this.eventService.dispatchEvent({type:G.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:e,switchingTab:!1,key:t,column:i??null})}isMenuEnabled(e){var t;return e.isFilterAllowed()&&(null!==(t=e.getColDef().menuTabs)&&void 0!==t?t:["filterMenuTab"]).includes("filterMenuTab")}showMenuAfterContextMenuEvent(){}};Va([P("filterManager")],So.prototype,"filterManager",void 0),Va([P("popupService")],So.prototype,"popupService",void 0),Va([P("focusService")],So.prototype,"focusService",void 0),Va([P("ctrlsService")],So.prototype,"ctrlsService",void 0),Va([P("menuService")],So.prototype,"menuService",void 0),So=Va([He("filterMenuFactory")],So);var Wh=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Ko=(()=>(function(r){r.TAB_GUARD="ag-tab-guard",r.TAB_GUARD_TOP="ag-tab-guard-top",r.TAB_GUARD_BOTTOM="ag-tab-guard-bottom"}(Ko||(Ko={})),Ko))();class nb extends Ee{constructor(e){super(),this.skipTabGuardFocus=!1,this.forcingFocusOut=!1;const{comp:t,eTopGuard:i,eBottomGuard:n,focusTrapActive:s,forceFocusOutWhenTabGuardsAreEmpty:o,focusInnerElement:a,onFocusIn:c,onFocusOut:u,shouldStopEventPropagation:p,onTabKeyDown:g,handleKeyDown:m,eFocusableElement:y}=e;this.comp=t,this.eTopGuard=i,this.eBottomGuard=n,this.providedFocusInnerElement=a,this.eFocusableElement=y,this.focusTrapActive=!!s,this.forceFocusOutWhenTabGuardsAreEmpty=!!o,this.providedFocusIn=c,this.providedFocusOut=u,this.providedShouldStopEventPropagation=p,this.providedOnTabKeyDown=g,this.providedHandleKeyDown=m}postConstruct(){this.createManagedBean(new ir(this.eFocusableElement,{shouldStopEventPropagation:()=>this.shouldStopEventPropagation(),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e)})),this.activateTabGuards(),[this.eTopGuard,this.eBottomGuard].forEach(e=>this.addManagedListener(e,"focus",this.onFocus.bind(this)))}handleKeyDown(e){this.providedHandleKeyDown&&this.providedHandleKeyDown(e)}tabGuardsAreActive(){return!!this.eTopGuard&&this.eTopGuard.hasAttribute("tabIndex")}shouldStopEventPropagation(){return!!this.providedShouldStopEventPropagation&&this.providedShouldStopEventPropagation()}activateTabGuards(){if(this.forcingFocusOut)return;const e=this.gridOptionsService.get("tabIndex");this.comp.setTabIndex(e.toString())}deactivateTabGuards(){this.comp.setTabIndex()}onFocus(e){if(this.skipTabGuardFocus)return void(this.skipTabGuardFocus=!1);if(this.forceFocusOutWhenTabGuardsAreEmpty&&0===this.focusService.findFocusableElements(this.eFocusableElement,".ag-tab-guard").length)return void this.findNextElementOutsideAndFocus(e.target===this.eBottomGuard);const t=e.target===this.eBottomGuard;this.providedFocusInnerElement?this.providedFocusInnerElement(t):this.focusInnerElement(t)}findNextElementOutsideAndFocus(e){const t=this.gridOptionsService.getDocument(),i=this.focusService.findFocusableElements(t.body,null,!0),n=i.indexOf(e?this.eTopGuard:this.eBottomGuard);if(-1===n)return;let s,o;e?(s=0,o=n):(s=n+1,o=i.length);const a=i.slice(s,o),c=this.gridOptionsService.get("tabIndex");a.sort((u,p)=>{const g=parseInt(u.getAttribute("tabindex")||"0"),m=parseInt(p.getAttribute("tabindex")||"0");return m===c?1:g===c?-1:0===g?1:0===m?-1:g-m}),a[e?a.length-1:0].focus()}onFocusIn(e){this.focusTrapActive||(this.providedFocusIn&&this.providedFocusIn(e),this.deactivateTabGuards())}onFocusOut(e){this.focusTrapActive||(this.providedFocusOut&&this.providedFocusOut(e),this.eFocusableElement.contains(e.relatedTarget)||this.activateTabGuards())}onTabKeyDown(e){if(this.providedOnTabKeyDown)return void this.providedOnTabKeyDown(e);if(this.focusTrapActive||e.defaultPrevented)return;const t=this.tabGuardsAreActive();t&&this.deactivateTabGuards();const i=this.getNextFocusableElement(e.shiftKey);t&&setTimeout(()=>this.activateTabGuards(),0),i&&(i.focus(),e.preventDefault())}focusInnerElement(e=!1){const t=this.focusService.findFocusableElements(this.eFocusableElement);this.tabGuardsAreActive()&&(t.splice(0,1),t.splice(t.length-1,1)),t.length&&t[e?t.length-1:0].focus({preventScroll:!0})}getNextFocusableElement(e){return this.focusService.findNextFocusableElement(this.eFocusableElement,!1,e)}forceFocusOutOfContainer(e=!1){if(this.forcingFocusOut)return;const t=e?this.eTopGuard:this.eBottomGuard;this.activateTabGuards(),this.skipTabGuardFocus=!0,this.forcingFocusOut=!0,t.focus(),window.setTimeout(()=>{this.forcingFocusOut=!1,this.activateTabGuards()})}isTabGuard(e){return e===this.eTopGuard||e===this.eBottomGuard}}Wh([P("focusService")],nb.prototype,"focusService",void 0),Wh([Se],nb.prototype,"postConstruct",null);class jh extends Ne{initialiseTabGuard(e){this.eTopGuard=this.createTabGuard("top"),this.eBottomGuard=this.createTabGuard("bottom"),this.eFocusableElement=this.getFocusableElement();const t=[this.eTopGuard,this.eBottomGuard],i={setTabIndex:n=>{t.forEach(s=>null!=n?s.setAttribute("tabindex",n):s.removeAttribute("tabindex"))}};this.addTabGuards(this.eTopGuard,this.eBottomGuard),this.tabGuardCtrl=this.createManagedBean(new nb({comp:i,focusTrapActive:!!e.focusTrapActive,eTopGuard:this.eTopGuard,eBottomGuard:this.eBottomGuard,eFocusableElement:this.eFocusableElement,onFocusIn:e.onFocusIn,onFocusOut:e.onFocusOut,focusInnerElement:e.focusInnerElement,handleKeyDown:e.handleKeyDown,onTabKeyDown:e.onTabKeyDown,shouldStopEventPropagation:e.shouldStopEventPropagation,forceFocusOutWhenTabGuardsAreEmpty:e.forceFocusOutWhenTabGuardsAreEmpty}))}createTabGuard(e){const t=document.createElement("div");return t.classList.add(Ko.TAB_GUARD,"top"===e?Ko.TAB_GUARD_TOP:Ko.TAB_GUARD_BOTTOM),In(t,"presentation"),t}addTabGuards(e,t){this.eFocusableElement.insertAdjacentElement("afterbegin",e),this.eFocusableElement.insertAdjacentElement("beforeend",t)}removeAllChildrenExceptTabGuards(){const e=[this.eTopGuard,this.eBottomGuard];es(this.getFocusableElement()),this.addTabGuards(...e)}forceFocusOutOfContainer(e=!1){this.tabGuardCtrl.forceFocusOutOfContainer(e)}appendChild(e,t){Dh(e)||(e=e.getGui());const{eBottomGuard:i}=this;i?i.insertAdjacentElement("beforebegin",e):super.appendChild(e,t)}}var Bv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Nc extends jh{constructor(e){super(Nc.getTemplate(e.cssClass)),this.items=[],this.tabbedItemScrollMap=new Map,this.params=e,e.items&&e.items.forEach(t=>this.addItem(t))}postConstruct(){this.initialiseTabGuard({onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this),focusInnerElement:this.focusInnerElement.bind(this),focusTrapActive:!0}),this.addDestroyFunc(()=>{var e,t,i;return null===(i=null===(t=null===(e=this.activeItem)||void 0===e?void 0:e.tabbedItem)||void 0===t?void 0:t.afterDetachedCallback)||void 0===i?void 0:i.call(t)})}static getTemplate(e){return`<div class="ag-tabs ${e}">\n            <div ref="eHeader" role="tablist" class="ag-tabs-header ${e?`${e}-header`:""}"></div>\n            <div ref="eBody" role="presentation" class="ag-tabs-body ${e?`${e}-body`:""}"></div>\n        </div>`}handleKeyDown(e){const t=this.gridOptionsService.getDocument();switch(e.key){case ge.RIGHT:case ge.LEFT:if(!this.eHeader.contains(t.activeElement))return;const i=e.key===ge.RIGHT,n=this.gridOptionsService.get("enableRtl"),s=this.items.indexOf(this.activeItem),o=i!==n?Math.min(s+1,this.items.length-1):Math.max(s-1,0);if(s===o)return;e.preventDefault();const a=this.items[o];this.showItemWrapper(a),a.eHeaderButton.focus();break;case ge.UP:case ge.DOWN:e.stopPropagation()}}onTabKeyDown(e){if(e.defaultPrevented)return;const{focusService:t,eHeader:i,eBody:n,activeItem:s}=this,a=this.gridOptionsService.getDocument().activeElement,c=e.target;if(e.preventDefault(),i.contains(a))return void this.focusBody(e.shiftKey);let u=null;t.isTargetUnderManagedComponent(n,c)&&(e.shiftKey&&(u=this.focusService.findFocusableElementBeforeTabGuard(n,c)),u||(u=s.eHeaderButton)),!u&&n.contains(a)&&(u=t.findNextFocusableElement(n,!1,e.shiftKey),u||this.focusHeader()),u&&u.focus()}focusInnerElement(e){e?this.focusHeader():this.focusBody(!0)}focusHeader(){this.activeItem.eHeaderButton.focus()}focusBody(e){this.focusService.focusInto(this.eBody,e)}setAfterAttachedParams(e){this.afterAttachedParams=e}showFirstItem(){this.items.length>0&&this.showItemWrapper(this.items[0])}addItem(e){const t=document.createElement("span");In(t,"tab"),t.setAttribute("tabindex","-1"),t.appendChild(e.title),t.classList.add("ag-tab"),this.eHeader.appendChild(t),bc(t,e.titleLabel);const i={tabbedItem:e,eHeaderButton:t};this.items.push(i),t.addEventListener("click",this.showItemWrapper.bind(this,i))}showItem(e){const t=this.items.find(i=>i.tabbedItem===e);t&&this.showItemWrapper(t)}showItemWrapper(e){var t,i,n,s,o,a;const{tabbedItem:c,eHeaderButton:u}=e;null===(i=(t=this.params).onItemClicked)||void 0===i||i.call(t,{item:c}),this.activeItem!==e?(this.lastScrollListener&&(this.lastScrollListener=this.lastScrollListener()),es(this.eBody),c.bodyPromise.then(p=>{this.eBody.appendChild(p);const g=!this.focusService.isKeyboardMode();if(this.focusService.focusInto(this.eBody,!1,g),c.afterAttachedCallback&&c.afterAttachedCallback(this.afterAttachedParams),this.params.keepScrollPosition){const m=c.getScrollableContainer&&c.getScrollableContainer()||p;this.lastScrollListener=this.addManagedListener(m,"scroll",()=>{this.tabbedItemScrollMap.set(c.name,m.scrollTop)});const y=this.tabbedItemScrollMap.get(c.name);void 0!==y&&setTimeout(()=>{m.scrollTop=y},0)}}),this.activeItem&&(this.activeItem.eHeaderButton.classList.remove("ag-tab-selected"),null===(a=(o=this.activeItem.tabbedItem).afterDetachedCallback)||void 0===a||a.call(o)),u.classList.add("ag-tab-selected"),this.activeItem=e):null===(s=(n=this.params).onActiveItemClicked)||void 0===s||s.call(n)}}Bv([P("focusService")],Nc.prototype,"focusService",void 0),Bv([re("eHeader")],Nc.prototype,"eHeader",void 0),Bv([re("eBody")],Nc.prototype,"eBody",void 0),Bv([Se],Nc.prototype,"postConstruct",null);let sb=class extends Ee{constructor(){super(...arguments),this.polyfillFunctions=[]}observeResize(e,t){const i=this.gridOptionsService.getWindow(),s=()=>{var c,u;let p=null!==(c=e?.clientWidth)&&void 0!==c?c:0,g=null!==(u=e?.clientHeight)&&void 0!==u?u:0,m=!0;const y=()=>{var b,_;if(m){const E=null!==(b=e?.clientWidth)&&void 0!==b?b:0,D=null!==(_=e?.clientHeight)&&void 0!==_?_:0;(E!==p||D!==g)&&(p=E,g=D,t()),this.doNextPolyfillTurn(y)}};return y(),()=>m=!1},o=this.gridOptionsService.get("suppressBrowserResizeObserver");return i.ResizeObserver&&!o?(()=>{const c=new i.ResizeObserver(t);return c.observe(e),()=>c.disconnect()})():this.getFrameworkOverrides().wrapIncoming(()=>s(),"resize-observer")}doNextPolyfillTurn(e){this.polyfillFunctions.push(e),this.schedulePolyfill()}schedulePolyfill(){this.polyfillScheduled||(this.polyfillScheduled=!0,window.setTimeout(()=>{const t=this.polyfillFunctions;this.polyfillScheduled=!1,this.polyfillFunctions=[],t.forEach(i=>i())},50))}};sb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He("resizeObserverService")],sb);var Hv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let zh=class extends Ee{constructor(){super(...arguments),this.createTasksP1={list:[],sorted:!1},this.createTasksP2={list:[],sorted:!1},this.destroyTasks=[],this.ticking=!1,this.scrollGoingDown=!0,this.lastPage=0,this.lastScrollTop=0,this.taskCount=0,this.cancelledTasks=new Set}setScrollTop(e){const t=this.gridOptionsService.get("pagination");if(this.scrollGoingDown=e>=this.lastScrollTop,t&&0===e){const i=this.paginationProxy.getCurrentPage();i!==this.lastPage&&(this.lastPage=i,this.scrollGoingDown=!0)}this.lastScrollTop=e}init(){this.useAnimationFrame=!this.gridOptionsService.get("suppressAnimationFrame")}isOn(){return this.useAnimationFrame}verifyAnimationFrameOn(e){!1===this.useAnimationFrame&&console.warn(`AG Grid: AnimationFrameService.${e} called but animation frames are off`)}createTask(e,t,i){this.verifyAnimationFrameOn(i);const n={task:e,index:t,createOrder:++this.taskCount};this.addTaskToList(this[i],n),this.schedule()}cancelTask(e){this.cancelledTasks.add(e)}addTaskToList(e,t){e.list.push(t),e.sorted=!1}sortTaskList(e){if(e.sorted)return;const t=this.scrollGoingDown?1:-1;e.list.sort((i,n)=>i.index!==n.index?t*(n.index-i.index):n.createOrder-i.createOrder),e.sorted=!0}addDestroyTask(e){this.verifyAnimationFrameOn("createTasksP3"),this.destroyTasks.push(e),this.schedule()}executeFrame(e){this.verifyAnimationFrameOn("executeFrame");const t=this.createTasksP1,i=t.list,n=this.createTasksP2,s=n.list,o=this.destroyTasks,a=(new Date).getTime();let c=(new Date).getTime()-a;const u=e<=0,p=this.ctrlsService.getGridBodyCtrl();for(;u||c<e;){if(!p.getScrollFeature().scrollGridIfNeeded()){let m;if(i.length)this.sortTaskList(t),m=i.pop().task;else if(s.length)this.sortTaskList(n),m=s.pop().task;else{if(!o.length){this.cancelledTasks.clear();break}m=o.pop()}this.cancelledTasks.has(m)||m()}c=(new Date).getTime()-a}i.length||s.length||o.length?this.requestFrame():this.stopTicking()}stopTicking(){this.ticking=!1}flushAllFrames(){!this.useAnimationFrame||this.executeFrame(-1)}schedule(){!this.useAnimationFrame||this.ticking||(this.ticking=!0,this.requestFrame())}requestFrame(){const e=this.executeFrame.bind(this,60);this.requestAnimationFrame(e)}requestAnimationFrame(e){const t=this.gridOptionsService.getWindow();t.requestAnimationFrame?t.requestAnimationFrame(e):t.webkitRequestAnimationFrame?t.webkitRequestAnimationFrame(e):t.setTimeout(e,0)}isQueueEmpty(){return!this.ticking}debounce(e){let t=!1;return()=>{this.isOn()?t||(t=!0,this.addDestroyTask(()=>{t=!1,e()})):window.setTimeout(e,0)}}};Hv([P("ctrlsService")],zh.prototype,"ctrlsService",void 0),Hv([P("paginationProxy")],zh.prototype,"paginationProxy",void 0),Hv([Se],zh.prototype,"init",null),zh=Hv([He("animationFrameService")],zh);var Kt=(()=>(function(r){r.EVERYTHING="group",r.FILTER="filter",r.SORT="sort",r.MAP="map",r.AGGREGATE="aggregate",r.FILTER_AGGREGATES="filter_aggregates",r.PIVOT="pivot",r.NOTHING="nothing"}(Kt||(Kt={})),Kt))(),u0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Jf=class extends Ee{postConstruct(){this.isClientSideRowModel="clientSide"===this.rowModel.getType()}expandRows(e){if(!this.isClientSideRowModel)return;const t=new Set(e);this.rowModel.forEachNode(i=>{i.id&&t.has(i.id)&&(i.expanded=!0)}),this.onGroupExpandedOrCollapsed()}getExpandedRows(){const e=[];return this.rowModel.forEachNode(({expanded:t,id:i})=>{t&&i&&e.push(i)}),e}expandAll(e){!this.isClientSideRowModel||this.rowModel.expandOrCollapseAll(e)}setRowNodeExpanded(e,t,i){e&&(i&&e.parent&&-1!==e.parent.level&&this.setRowNodeExpanded(e.parent,t,i),e.setExpanded(t))}onGroupExpandedOrCollapsed(){!this.isClientSideRowModel||this.rowModel.refreshModel({step:Kt.MAP})}};u0([P("rowModel")],Jf.prototype,"rowModel",void 0),u0([Se],Jf.prototype,"postConstruct",null),Jf=u0([He("expansionService")],Jf);var Lc=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Yo=class extends Ee{postConstruct(){var e;this.activeMenuFactory=null!==(e=this.enterpriseMenuFactory)&&void 0!==e?e:this.filterMenuFactory}showColumnMenu(e){this.showColumnMenuCommon(this.activeMenuFactory,e,"columnMenu")}showFilterMenu(e){const t=this.enterpriseMenuFactory&&this.isLegacyMenuEnabled()?this.enterpriseMenuFactory:this.filterMenuFactory;this.showColumnMenuCommon(t,e,e.containerType,!0)}showHeaderContextMenu(e,t,i){this.activeMenuFactory.showMenuAfterContextMenuEvent(e,t,i)}showContextMenu(e){var t,i,n;const{column:s,anchorToElement:o,rowNode:a,value:c}=e;null===(t=this.contextMenuFactory)||void 0===t||t.onContextMenu(null!==(i=e.mouseEvent)&&void 0!==i?i:null,null!==(n=e.touchEvent)&&void 0!==n?n:null,a??null,s??null,c,o)}showColumnChooser(e){var t;null===(t=this.columnChooserFactory)||void 0===t||t.showColumnChooser(e)}hidePopupMenu(){var e;null===(e=this.contextMenuFactory)||void 0===e||e.hideActiveMenu(),this.activeMenuFactory.hideActiveMenu()}hideColumnChooser(){var e;null===(e=this.columnChooserFactory)||void 0===e||e.hideActiveColumnChooser()}isColumnMenuInHeaderEnabled(e){const{suppressMenu:t,suppressHeaderMenuButton:i}=e.getColDef();return!(i??t)&&this.activeMenuFactory.isMenuEnabled(e)&&(this.isLegacyMenuEnabled()||!!this.enterpriseMenuFactory)}isFilterMenuInHeaderEnabled(e){return!e.getColDef().suppressHeaderFilterButton&&this.filterManager.isFilterAllowed(e)}isHeaderContextMenuEnabled(e){return!e?.getColDef().suppressHeaderContextMenu&&"new"===this.getColumnMenuType()}isHeaderMenuButtonAlwaysShowEnabled(){return this.isSuppressMenuHide()}isHeaderMenuButtonEnabled(){const e=!this.isSuppressMenuHide();return!(Vo()&&e)}isHeaderFilterButtonEnabled(e){return this.isFilterMenuInHeaderEnabled(e)&&!this.isLegacyMenuEnabled()&&!this.isFloatingFilterButtonDisplayed(e)}isFilterMenuItemEnabled(e){return this.filterManager.isFilterAllowed(e)&&!this.isLegacyMenuEnabled()&&!this.isFilterMenuInHeaderEnabled(e)&&!this.isFloatingFilterButtonDisplayed(e)}isColumnMenuAnchoringEnabled(){return!this.isLegacyMenuEnabled()}areAdditionalColumnMenuItemsEnabled(){return"new"===this.getColumnMenuType()}isLegacyMenuEnabled(){return"legacy"===this.getColumnMenuType()}isFloatingFilterButtonEnabled(e){var t;const i=e.getColDef(),n=null===(t=i.floatingFilterComponentParams)||void 0===t?void 0:t.suppressFilterButton;return null!=n&&st("As of v31.1, 'colDef.floatingFilterComponentParams.suppressFilterButton' is deprecated. Use 'colDef.suppressFloatingFilterButton' instead."),null==i.suppressFloatingFilterButton?!n:!i.suppressFloatingFilterButton}getColumnMenuType(){var e;return null!==(e=this.gridOptionsService.get("columnMenu"))&&void 0!==e?e:"legacy"}isFloatingFilterButtonDisplayed(e){return!!e.getColDef().floatingFilter&&this.isFloatingFilterButtonEnabled(e)}isSuppressMenuHide(){const e=this.gridOptionsService.get("suppressMenuHide");return!this.isLegacyMenuEnabled()&&!this.gridOptionsService.exists("suppressMenuHide")||e}showColumnMenuCommon(e,t,i,n){const{column:s,positionBy:o}=t;if("button"===o){const{buttonElement:a}=t;e.showMenuAfterButtonClick(s,a,i,n)}else if("mouse"===o){const{mouseEvent:a}=t;e.showMenuAfterMouseEvent(s,a,i,n)}else s&&(this.ctrlsService.getGridBodyCtrl().getScrollFeature().ensureColumnVisible(s,"auto"),this.animationFrameService.requestAnimationFrame(()=>{const a=this.ctrlsService.getHeaderRowContainerCtrl(s.getPinned()).getHeaderCtrlForColumn(s);e.showMenuAfterButtonClick(s,a.getAnchorElementForMenu(n),i,!0)}))}};Lc([Pt("enterpriseMenuFactory")],Yo.prototype,"enterpriseMenuFactory",void 0),Lc([P("filterMenuFactory")],Yo.prototype,"filterMenuFactory",void 0),Lc([Pt("contextMenuFactory")],Yo.prototype,"contextMenuFactory",void 0),Lc([P("ctrlsService")],Yo.prototype,"ctrlsService",void 0),Lc([P("animationFrameService")],Yo.prototype,"animationFrameService",void 0),Lc([Pt("columnChooserFactory")],Yo.prototype,"columnChooserFactory",void 0),Lc([P("filterManager")],Yo.prototype,"filterManager",void 0),Lc([Se],Yo.prototype,"postConstruct",null),Yo=Lc([He("menuService")],Yo);var $h=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let kc=class extends Ee{postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCtrl=e.centerRowContainerCtrl})}getPreferredWidthForColumn(e,t){const i=this.getHeaderCellForColumn(e);if(!i)return-1;const n=this.rowRenderer.getAllCellsForColumn(e);return t||n.push(i),this.addElementsToContainerAndGetWidth(n)}getPreferredWidthForColumnGroup(e){const t=this.getHeaderCellForColumn(e);return t?this.addElementsToContainerAndGetWidth([t]):-1}addElementsToContainerAndGetWidth(e){const t=document.createElement("form");t.style.position="fixed";const i=this.centerRowContainerCtrl.getContainerElement();e.forEach(o=>this.cloneItemIntoDummy(o,t)),i.appendChild(t);const n=t.offsetWidth;return i.removeChild(t),n+this.getAutoSizePadding()}getAutoSizePadding(){return this.gridOptionsService.get("autoSizePadding")}getHeaderCellForColumn(e){let t=null;return this.ctrlsService.getHeaderRowContainerCtrls().forEach(i=>{const n=i.getHtmlElementForColumnHeader(e);null!=n&&(t=n)}),t}cloneItemIntoDummy(e,t){const i=e.cloneNode(!0);i.style.width="",i.style.position="static",i.style.left="";const n=document.createElement("div"),s=n.classList;["ag-header-cell","ag-header-group-cell"].some(c=>i.classList.contains(c))?(s.add("ag-header","ag-header-row"),n.style.position="static"):s.add("ag-row");let a=e.parentElement;for(;a;){if(["ag-header-row","ag-row"].some(u=>a.classList.contains(u))){for(let u=0;u<a.classList.length;u++){const p=a.classList[u];"ag-row-position-absolute"!=p&&s.add(p)}break}a=a.parentElement}n.appendChild(i),t.appendChild(n)}};$h([P("rowRenderer")],kc.prototype,"rowRenderer",void 0),$h([P("ctrlsService")],kc.prototype,"ctrlsService",void 0),$h([P("rowCssClassCalculator")],kc.prototype,"rowCssClassCalculator",void 0),$h([Se],kc.prototype,"postConstruct",null),kc=$h([He("autoWidthCalculator")],kc);var rb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class tu extends Ee{constructor(e,t){super(),this.createRowCon=e,this.destroyRowCtrls=t,this.stickyRowCtrls=[],this.containerHeight=0}postConstruct(){this.isClientSide="clientSide"===this.rowModel.getType(),this.ctrlsService.whenReady(e=>{this.gridBodyCtrl=e.gridBodyCtrl})}getStickyRowCtrls(){return this.stickyRowCtrls}checkStickyRows(){let e=0;if(!this.gridOptionsService.isGroupRowsSticky())return this.refreshNodesAndContainerHeight([],e);const t=[],i=this.rowRenderer.getFirstVisibleVerticalPixel(),n=o=>{var a,c,u;let p;if(t.push(o),this.isClientSide){let m=o;for(;m.isExpandable()&&m.expanded;)if(m.master)m=m.detailNode;else if(m.childrenAfterSort){if(0===m.childrenAfterSort.length)break;m=Xt(m.childrenAfterSort)}p=m.rowTop+m.rowHeight}else if(o.master)p=o.detailNode.rowTop+o.detailNode.rowHeight;else{const m=null===(a=o.childStore)||void 0===a?void 0:a.getStoreBounds();p=(null!==(c=m?.heightPx)&&void 0!==c?c:0)+(null!==(u=m?.topPx)&&void 0!==u?u:0)}const g=i+e+o.rowHeight;o.stickyRowTop=p<g?e+(p-g):e,e=0,t.forEach(m=>{const y=m.stickyRowTop+m.rowHeight;e<y&&(e=y)})};let s=0;for(;;){const o=i+e,a=this.rowModel.getRowIndexAtPixel(o),c=this.rowModel.getRow(a);if(null==c||c.level<0||100==s++)break;const u=[];let p=c.parent;for(;p.level>=0;)u.push(p),p=p.parent;const g=u.reverse().find(m=>t.indexOf(m)<0&&m.displayed);if(g)n(g);else{if(!(c.isExpandable()&&c.expanded&&c.rowTop<o))break;n(c)}}return this.refreshNodesAndContainerHeight(t,e)}refreshStickyNode(e){const t=[];for(let i=0;i<this.stickyRowCtrls.length;i++){const n=this.stickyRowCtrls[i].getRowNode();n!==e&&t.push(n)}this.refreshNodesAndContainerHeight(t,this.containerHeight)&&this.checkStickyRows()}refreshNodesAndContainerHeight(e,t){let i=!1;const n=this.stickyRowCtrls.filter(c=>-1===e.indexOf(c.getRowNode())),s=e.filter(c=>-1===this.stickyRowCtrls.findIndex(u=>u.getRowNode()===c));(n.length||s.length)&&(i=!0);const o={};n.forEach(c=>{o[c.getRowNode().id]=c,this.stickyRowCtrls=this.stickyRowCtrls.filter(u=>u!==c)});for(const c of Object.values(o))c.getRowNode().sticky=!1;this.destroyRowCtrls(o,!1);const a=s.map(c=>(c.sticky=!0,this.createRowCon(c,!1,!1)));return this.stickyRowCtrls.push(...a),this.stickyRowCtrls.forEach(c=>c.setRowTop(c.getRowNode().stickyRowTop)),this.stickyRowCtrls.sort((c,u)=>u.getRowNode().rowIndex-c.getRowNode().rowIndex),this.containerHeight!==t&&(this.containerHeight=t,this.gridBodyCtrl.setStickyTopHeight(t),i=!0),i}}rb([P("rowModel")],tu.prototype,"rowModel",void 0),rb([P("rowRenderer")],tu.prototype,"rowRenderer",void 0),rb([P("ctrlsService")],tu.prototype,"ctrlsService",void 0),rb([Se],tu.prototype,"postConstruct",null);var Xr=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let yr=class extends Ee{constructor(){super(...arguments),this.destroyFuncsForColumnListeners=[],this.rowCtrlsByRowIndex={},this.zombieRowCtrls={},this.allRowCtrls=[],this.topRowCtrls=[],this.bottomRowCtrls=[],this.refreshInProgress=!1,this.dataFirstRenderedFired=!1,this.setupRangeSelectionListeners=()=>{const e=()=>{this.getAllCellCtrls().forEach(o=>o.onRangeSelectionChanged())},t=()=>{this.getAllCellCtrls().forEach(o=>o.updateRangeBordersIfRangeCount())},i=()=>{this.eventService.addEventListener(G.EVENT_RANGE_SELECTION_CHANGED,e),this.eventService.addEventListener(G.EVENT_COLUMN_MOVED,t),this.eventService.addEventListener(G.EVENT_COLUMN_PINNED,t),this.eventService.addEventListener(G.EVENT_COLUMN_VISIBLE,t)},n=()=>{this.eventService.removeEventListener(G.EVENT_RANGE_SELECTION_CHANGED,e),this.eventService.removeEventListener(G.EVENT_COLUMN_MOVED,t),this.eventService.removeEventListener(G.EVENT_COLUMN_PINNED,t),this.eventService.removeEventListener(G.EVENT_COLUMN_VISIBLE,t)};this.addDestroyFunc(()=>n()),this.addManagedPropertyListener("enableRangeSelection",o=>{o.currentValue?i():n()}),this.gridOptionsService.get("enableRangeSelection")&&i()}}postConstruct(){this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl(),this.initialise()})}initialise(){if(this.addManagedListener(this.eventService,G.EVENT_PAGINATION_CHANGED,this.onPageLoaded.bind(this)),this.addManagedListener(this.eventService,G.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,this.onDisplayedColumnsChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_BODY_SCROLL,this.onBodyScroll.bind(this)),this.addManagedListener(this.eventService,G.EVENT_BODY_HEIGHT_CHANGED,this.redraw.bind(this)),this.addManagedPropertyListeners(["domLayout","embedFullWidthRows"],()=>this.onDomLayoutChanged()),this.addManagedPropertyListeners(["suppressMaxRenderedRowRestriction","rowBuffer"],()=>this.redraw()),this.addManagedPropertyListeners(["suppressCellFocus","getBusinessKeyForNode","fullWidthCellRenderer","fullWidthCellRendererParams","rowStyle","getRowStyle","rowClass","getRowClass","rowClassRules","groupRowRenderer","groupRowRendererParams","loadingCellRenderer","loadingCellRendererParams","detailCellRenderer","detailCellRendererParams","enableRangeSelection","enableCellTextSelection"],()=>this.redrawRows()),this.gridOptionsService.isGroupRowsSticky()){const e=this.rowModel.getType();("clientSide"===e||"serverSide"===e)&&(this.stickyRowFeature=this.createManagedBean(new tu(this.createRowCon.bind(this),this.destroyRowCtrls.bind(this))))}this.registerCellEventListeners(),this.initialiseCache(),this.printLayout=this.gridOptionsService.isDomLayout("print"),this.embedFullWidthRows=this.printLayout||this.gridOptionsService.get("embedFullWidthRows"),this.redrawAfterModelUpdate()}initialiseCache(){if(this.gridOptionsService.get("keepDetailRows")){const e=this.getKeepDetailRowsCount();this.cachedRowCtrls=new KP(e??3)}}getKeepDetailRowsCount(){return this.gridOptionsService.get("keepDetailRowsCount")}getStickyTopRowCtrls(){return this.stickyRowFeature?this.stickyRowFeature.getStickyRowCtrls():[]}updateAllRowCtrls(){const e=fh(this.rowCtrlsByRowIndex),t=fh(this.zombieRowCtrls),i=this.cachedRowCtrls?this.cachedRowCtrls.getEntries():[];this.allRowCtrls=t.length>0||i.length>0?[...e,...t,...i]:e}onCellFocusChanged(e){this.getAllCellCtrls().forEach(t=>t.onCellFocused(e)),this.getFullWidthRowCtrls().forEach(t=>t.onFullWidthRowFocused(e))}registerCellEventListeners(){this.addManagedListener(this.eventService,G.EVENT_CELL_FOCUSED,e=>{this.onCellFocusChanged(e)}),this.addManagedListener(this.eventService,G.EVENT_CELL_FOCUS_CLEARED,()=>{this.onCellFocusChanged()}),this.addManagedListener(this.eventService,G.EVENT_FLASH_CELLS,e=>{this.getAllCellCtrls().forEach(t=>t.onFlashCells(e))}),this.addManagedListener(this.eventService,G.EVENT_COLUMN_HOVER_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onColumnHover())}),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,()=>{this.getAllCellCtrls().forEach(e=>e.onDisplayedColumnsChanged())}),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,()=>{this.printLayout&&this.getAllCellCtrls().forEach(e=>e.onLeftChanged())}),this.setupRangeSelectionListeners(),this.refreshListenersToColumnsForCellComps(),this.addManagedListener(this.eventService,G.EVENT_GRID_COLUMNS_CHANGED,this.refreshListenersToColumnsForCellComps.bind(this)),this.addDestroyFunc(this.removeGridColumnListeners.bind(this))}removeGridColumnListeners(){this.destroyFuncsForColumnListeners.forEach(e=>e()),this.destroyFuncsForColumnListeners.length=0}refreshListenersToColumnsForCellComps(){this.removeGridColumnListeners(),this.columnModel.getAllGridColumns().forEach(t=>{const i=u=>{this.getAllCellCtrls().forEach(p=>{p.getColumn()===t&&u(p)})},n=()=>{i(u=>u.onLeftChanged())},s=()=>{i(u=>u.onWidthChanged())},o=()=>{i(u=>u.onFirstRightPinnedChanged())},a=()=>{i(u=>u.onLastLeftPinnedChanged())},c=()=>{i(u=>u.onColDefChanged())};t.addEventListener("leftChanged",n),t.addEventListener("widthChanged",s),t.addEventListener("firstRightPinnedChanged",o),t.addEventListener("lastLeftPinnedChanged",a),t.addEventListener("colDefChanged",c),this.destroyFuncsForColumnListeners.push(()=>{t.removeEventListener("leftChanged",n),t.removeEventListener("widthChanged",s),t.removeEventListener("firstRightPinnedChanged",o),t.removeEventListener("lastLeftPinnedChanged",a),t.removeEventListener("colDefChanged",c)})})}onDomLayoutChanged(){const e=this.gridOptionsService.isDomLayout("print"),t=e||this.gridOptionsService.get("embedFullWidthRows"),i=t!==this.embedFullWidthRows||this.printLayout!==e;this.printLayout=e,this.embedFullWidthRows=t,i&&this.redrawAfterModelUpdate({domLayoutChanged:!0})}datasourceChanged(){this.firstRenderedRow=0,this.lastRenderedRow=-1;const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}onPageLoaded(e){this.redrawAfterModelUpdate({recycleRows:e.keepRenderedRows,animate:e.animate,newData:e.newData,newPage:e.newPage,onlyBody:!0})}getAllCellsForColumn(e){const t=[];return this.getAllRowCtrls().forEach(i=>{const n=i.getCellElement(e);n&&t.push(n)}),t}refreshFloatingRowComps(){this.refreshFloatingRows(this.topRowCtrls,this.pinnedRowModel.getPinnedTopRowData()),this.refreshFloatingRows(this.bottomRowCtrls,this.pinnedRowModel.getPinnedBottomRowData())}getTopRowCtrls(){return this.topRowCtrls}getCentreRowCtrls(){return this.allRowCtrls}getBottomRowCtrls(){return this.bottomRowCtrls}refreshFloatingRows(e,t){e.forEach(i=>{i.destroyFirstPass(),i.destroySecondPass()}),e.length=0,t&&t.forEach(i=>{const n=new $d(i,this.beans,!1,!1,this.printLayout);e.push(n)})}onPinnedRowDataChanged(){this.redrawAfterModelUpdate({recycleRows:!0})}redrawRow(e,t=!1){var i;if(e.sticky)this.stickyRowFeature.refreshStickyNode(e);else{if(null!==(i=this.cachedRowCtrls)&&void 0!==i&&i.has(e))return void this.cachedRowCtrls.removeRow(e);{const n=s=>{const o=s[e.rowIndex];!o||o.getRowNode()===e&&(o.destroyFirstPass(),o.destroySecondPass(),s[e.rowIndex]=this.createRowCon(e,!1,!1))};switch(e.rowPinned){case"top":n(this.topRowCtrls);break;case"bottom":n(this.bottomRowCtrls);break;default:n(this.rowCtrlsByRowIndex),this.updateAllRowCtrls()}}}t||this.dispatchDisplayedRowsChanged(!1)}redrawRows(e){if(null!=e)return e?.forEach(i=>this.redrawRow(i,!0)),void this.dispatchDisplayedRowsChanged(!1);this.redrawAfterModelUpdate()}getCellToRestoreFocusToAfterRefresh(e){const t=e?.suppressKeepFocus?null:this.focusService.getFocusCellToUseAfterRefresh();if(null==t)return null;const n=this.gridOptionsService.getDocument().activeElement,s=this.gridOptionsService.getDomData(n,Pc.DOM_DATA_KEY_CELL_CTRL),o=this.gridOptionsService.getDomData(n,$d.DOM_DATA_KEY_ROW_CTRL);return s||o?t:null}redrawAfterModelUpdate(e={}){this.getLockOnRefresh();const t=this.getCellToRestoreFocusToAfterRefresh(e);this.updateContainerHeights(),this.scrollToTopIfNewData(e);const i=!e.domLayoutChanged&&!!e.recycleRows,n=e.animate&&this.gridOptionsService.isAnimateRows(),s=i?this.getRowsToRecycle():null;i||this.removeAllRowComps(),this.workOutFirstAndLastRowsToRender(),this.stickyRowFeature&&this.stickyRowFeature.checkStickyRows(),this.recycleRows(s,n),this.gridBodyCtrl.updateRowCount(),e.onlyBody||this.refreshFloatingRowComps(),this.dispatchDisplayedRowsChanged(),null!=t&&this.restoreFocusedCell(t),this.releaseLockOnRefresh()}scrollToTopIfNewData(e){const t=e.newData||e.newPage,i=this.gridOptionsService.get("suppressScrollOnNewData");t&&!i&&this.gridBodyCtrl.getScrollFeature().scrollToTop()}updateContainerHeights(){if(this.printLayout)return void this.rowContainerHeightService.setModelHeight(null);let e=this.paginationProxy.getCurrentPageHeight();0===e&&(e=1),this.rowContainerHeightService.setModelHeight(e)}getLockOnRefresh(){if(this.refreshInProgress)throw new Error("AG Grid: cannot get grid to draw rows when it is in the middle of drawing rows. Your code probably called a grid API method while the grid was in the render stage. To overcome this, put the API call into a timeout, e.g. instead of api.redrawRows(), call setTimeout(function() { api.redrawRows(); }, 0). To see what part of your code that caused the refresh check this stacktrace.");this.refreshInProgress=!0}releaseLockOnRefresh(){this.refreshInProgress=!1}isRefreshInProgress(){return this.refreshInProgress}restoreFocusedCell(e){e&&(this.focusService.setRestoreFocusedCell(e),this.onCellFocusChanged(this.beans.gridOptionsService.addGridCommonParams({rowIndex:e.rowIndex,column:e.column,rowPinned:e.rowPinned,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0,type:"mock"})))}stopEditing(e=!1){this.getAllRowCtrls().forEach(t=>{t.stopEditing(e)})}getAllCellCtrls(){const e=[],t=this.getAllRowCtrls(),i=t.length;for(let n=0;n<i;n++){const s=t[n].getAllCellCtrls(),o=s.length;for(let a=0;a<o;a++)e.push(s[a])}return e}getAllRowCtrls(){const e=this.stickyRowFeature&&this.stickyRowFeature.getStickyRowCtrls()||[],t=[...this.topRowCtrls,...this.bottomRowCtrls,...e];for(const i of Object.keys(this.rowCtrlsByRowIndex))t.push(this.rowCtrlsByRowIndex[i]);return t}addRenderedRowListener(e,t,i){const n=this.rowCtrlsByRowIndex[t];n&&n.addEventListener(e,i)}flashCells(e={}){this.getCellCtrls(e.rowNodes,e.columns).forEach(t=>t.flashCell(e))}refreshCells(e={}){const t={forceRefresh:e.force,newData:!1,suppressFlash:e.suppressFlash};this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>i.refreshOrDestroyCell(t)),e.rowNodes&&(this.getRowCtrls(e.rowNodes).forEach(i=>{i.isFullWidth()&&(i.refreshFullWidth()||this.redrawRow(i.getRowNode(),!0))}),this.dispatchDisplayedRowsChanged(!1))}getCellRendererInstances(e){var t;const i=this.getCellCtrls(e.rowNodes,e.columns).map(o=>o.getCellRenderer()).filter(o=>null!=o);if(null!==(t=e.columns)&&void 0!==t&&t.length)return i;const n=[],s=this.mapRowNodes(e.rowNodes);return this.getAllRowCtrls().forEach(o=>{if(s&&!this.isRowInMap(o.getRowNode(),s)||!o.isFullWidth())return;const a=o.getFullWidthCellRenderers();for(let c=0;c<a.length;c++){const u=a[c];null!=u&&n.push(u)}}),[...n,...i]}getCellEditorInstances(e){const t=[];return this.getCellCtrls(e.rowNodes,e.columns).forEach(i=>{const n=i.getCellEditor();n&&t.push(n)}),t}getEditingCells(){const e=[];return this.getAllCellCtrls().forEach(t=>{if(t.isEditing()){const i=t.getCellPosition();e.push(i)}}),e}mapRowNodes(e){if(!e)return;const t={top:{},bottom:{},normal:{}};return e.forEach(i=>{const n=i.id;"top"===i.rowPinned?t.top[n]=i:"bottom"===i.rowPinned?t.bottom[n]=i:t.normal[n]=i}),t}isRowInMap(e,t){const i=e.id,n=e.rowPinned;return"bottom"===n?null!=t.bottom[i]:"top"===n?null!=t.top[i]:null!=t.normal[i]}getRowCtrls(e){const t=this.mapRowNodes(e),i=this.getAllRowCtrls();return e&&t?i.filter(n=>{const s=n.getRowNode();return this.isRowInMap(s,t)}):i}getCellCtrls(e,t){let i;Ie(t)&&(i={},t.forEach(s=>{const o=this.columnModel.getGridColumn(s);Ie(o)&&(i[o.getId()]=!0)}));const n=[];return this.getRowCtrls(e).forEach(s=>{s.getAllCellCtrls().forEach(o=>{const a=o.getColumn().getId();i&&!i[a]||n.push(o)})}),n}destroy(){this.removeAllRowComps(),super.destroy()}removeAllRowComps(){const e=Object.keys(this.rowCtrlsByRowIndex);this.removeRowCtrls(e)}getRowsToRecycle(){const e=[];gr(this.rowCtrlsByRowIndex,(i,n)=>{null==n.getRowNode().id&&e.push(i)}),this.removeRowCtrls(e);const t={};return gr(this.rowCtrlsByRowIndex,(i,n)=>{const s=n.getRowNode();t[s.id]=n}),this.rowCtrlsByRowIndex={},t}removeRowCtrls(e,t=!1){e.forEach(i=>{const n=this.rowCtrlsByRowIndex[i];n&&(n.destroyFirstPass(t),n.destroySecondPass()),delete this.rowCtrlsByRowIndex[i]})}onBodyScroll(e){"vertical"===e.direction&&this.redraw({afterScroll:!0})}redraw(e={}){const{afterScroll:t}=e;let i;this.stickyRowFeature&&fE()&&(i=this.getCellToRestoreFocusToAfterRefresh()||void 0);const n=this.firstRenderedRow,s=this.lastRenderedRow;this.workOutFirstAndLastRowsToRender();let o=!1;if(this.stickyRowFeature&&(o=this.stickyRowFeature.checkStickyRows()),(!t||o||this.firstRenderedRow!==n||this.lastRenderedRow!==s)&&(this.getLockOnRefresh(),this.recycleRows(null,!1,t),this.releaseLockOnRefresh(),this.dispatchDisplayedRowsChanged(t&&!o),null!=i)){const c=this.getCellToRestoreFocusToAfterRefresh();null!=i&&null==c&&(this.animationFrameService.flushAllFrames(),this.restoreFocusedCell(i))}}removeRowCompsNotToDraw(e,t){const i={};e.forEach(o=>i[o]=!0);const s=Object.keys(this.rowCtrlsByRowIndex).filter(o=>!i[o]);this.removeRowCtrls(s,t)}calculateIndexesToDraw(e){let t=wS(this.firstRenderedRow,this.lastRenderedRow);const i=(s,o)=>{const a=o.getRowNode().rowIndex;null!=a&&(a<this.firstRenderedRow||a>this.lastRenderedRow)&&this.doNotUnVirtualiseRow(o)&&t.push(a)};gr(this.rowCtrlsByRowIndex,i),gr(e,i),t.sort((s,o)=>s-o);const n=[];for(let s=0;s<t.length;s++){const o=t[s],a=this.paginationProxy.getRow(o);a&&!a.sticky&&n.push(o)}return n}recycleRows(e,t=!1,i=!1){const n=this.calculateIndexesToDraw(e);(this.printLayout||i)&&(t=!1),this.removeRowCompsNotToDraw(n,!t);const s=[];n.forEach(o=>{const a=this.createOrUpdateRowCtrl(o,e,t,i);Ie(a)&&s.push(a)}),e&&(!i||this.gridOptionsService.get("suppressAnimationFrame")||this.printLayout?this.destroyRowCtrls(e,t):this.beans.animationFrameService.addDestroyTask(()=>{this.destroyRowCtrls(e,t),this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()})),this.updateAllRowCtrls()}dispatchDisplayedRowsChanged(e=!1){this.eventService.dispatchEvent({type:G.EVENT_DISPLAYED_ROWS_CHANGED,afterScroll:e})}onDisplayedColumnsChanged(){const e=this.columnModel.isPinningLeft(),t=this.columnModel.isPinningRight();(this.pinningLeft!==e||t!==this.pinningRight)&&(this.pinningLeft=e,this.pinningRight=t,this.embedFullWidthRows&&this.redrawFullWidthEmbeddedRows())}redrawFullWidthEmbeddedRows(){const e=[];this.getFullWidthRowCtrls().forEach(t=>{const i=t.getRowNode().rowIndex;e.push(i.toString())}),this.refreshFloatingRowComps(),this.removeRowCtrls(e),this.redraw({afterScroll:!0})}getFullWidthRowCtrls(e){const t=this.mapRowNodes(e);return this.getAllRowCtrls().filter(i=>{if(!i.isFullWidth())return!1;const n=i.getRowNode();return!(null!=t&&!this.isRowInMap(n,t))})}createOrUpdateRowCtrl(e,t,i,n){let s,o=this.rowCtrlsByRowIndex[e];if(o||(s=this.paginationProxy.getRow(e),Ie(s)&&Ie(t)&&t[s.id]&&s.alreadyRendered&&(o=t[s.id],t[s.id]=null)),!o){if(s||(s=this.paginationProxy.getRow(e)),!Ie(s))return;o=this.createRowCon(s,i,n)}return s&&(s.alreadyRendered=!0),this.rowCtrlsByRowIndex[e]=o,o}destroyRowCtrls(e,t){const i=[];gr(e,(n,s)=>{if(s){if(this.cachedRowCtrls&&s.isCacheable())return void this.cachedRowCtrls.addRow(s);s.destroyFirstPass(!t),t?(this.zombieRowCtrls[s.getInstanceId()]=s,i.push(()=>{s.destroySecondPass(),delete this.zombieRowCtrls[s.getInstanceId()]})):s.destroySecondPass()}}),t&&(i.push(()=>{this.updateAllRowCtrls(),this.dispatchDisplayedRowsChanged()}),gf(i))}getRowBuffer(){return this.gridOptionsService.get("rowBuffer")}getRowBufferInPixels(){return this.getRowBuffer()*this.gridOptionsService.getRowHeightAsNumber()}workOutFirstAndLastRowsToRender(){let e,t;if(this.rowContainerHeightService.updateOffset(),this.paginationProxy.isRowsToRender())if(this.printLayout)this.environment.refreshRowHeightVariable(),e=this.paginationProxy.getPageFirstRow(),t=this.paginationProxy.getPageLastRow();else{const c=this.getRowBufferInPixels(),u=this.ctrlsService.getGridBodyCtrl(),p=this.gridOptionsService.get("suppressRowVirtualisation");let m,y,g=!1;do{const R=this.paginationProxy.getPixelOffset(),{pageFirstPixel:O,pageLastPixel:L}=this.paginationProxy.getCurrentPagePixelRange(),k=this.rowContainerHeightService.getDivStretchOffset(),U=u.getScrollFeature().getVScrollPosition(),j=U.top,q=U.bottom;p?(m=O+k,y=L+k):(m=Math.max(j+R-c,O)+k,y=Math.min(q+R+c,L)+k),this.firstVisibleVPixel=Math.max(j+R,O)+k,g=this.ensureAllRowsInRangeHaveHeightsCalculated(m,y)}while(g);let b=this.paginationProxy.getRowIndexAtPixel(m),_=this.paginationProxy.getRowIndexAtPixel(y);const E=this.paginationProxy.getPageFirstRow(),D=this.paginationProxy.getPageLastRow();b<E&&(b=E),_>D&&(_=D),e=b,t=_}else e=0,t=-1;const i=this.gridOptionsService.isDomLayout("normal"),n=this.gridOptionsService.get("suppressMaxRenderedRowRestriction"),s=Math.max(this.getRowBuffer(),500);i&&!n&&t-e>s&&(t=e+s),e===this.firstRenderedRow&&t===this.lastRenderedRow||(this.firstRenderedRow=e,this.lastRenderedRow=t,this.eventService.dispatchEvent({type:G.EVENT_VIEWPORT_CHANGED,firstRow:e,lastRow:t}))}dispatchFirstDataRenderedEvent(){if(this.dataFirstRenderedFired)return;this.dataFirstRenderedFired=!0;const e={type:G.EVENT_FIRST_DATA_RENDERED,firstRow:this.firstRenderedRow,lastRow:this.lastRenderedRow};window.requestAnimationFrame(()=>{this.beans.eventService.dispatchEvent(e)})}ensureAllRowsInRangeHaveHeightsCalculated(e,t){const i=this.paginationProxy.ensureRowHeightsValid(e,t,-1,-1);return i&&this.updateContainerHeights(),i}getFirstVisibleVerticalPixel(){return this.firstVisibleVPixel}getFirstVirtualRenderedRow(){return this.firstRenderedRow}getLastVirtualRenderedRow(){return this.lastRenderedRow}doNotUnVirtualiseRow(e){const n=e.getRowNode(),s=this.focusService.isRowNodeFocused(n),o=e.isEditing();return!!(s||o||n.detail)&&!!this.paginationProxy.isRowPresent(n)}createRowCon(e,t,i){const n=this.cachedRowCtrls?this.cachedRowCtrls.getRow(e):null;if(n)return n;const s=this.gridOptionsService.get("suppressAnimationFrame");return new $d(e,this.beans,t,i&&!s&&!this.printLayout,this.printLayout)}getRenderedNodes(){const e=this.rowCtrlsByRowIndex;return Object.keys(e).map(t=>e[t].getRowNode())}getRowByPosition(e){let t;const{rowIndex:i}=e;switch(e.rowPinned){case"top":t=this.topRowCtrls[i];break;case"bottom":t=this.bottomRowCtrls[i];break;default:t=this.rowCtrlsByRowIndex[i],t||(t=this.getStickyTopRowCtrls().find(n=>n.getRowNode().rowIndex===i)||null)}return t}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}isRangeInRenderedViewport(e,t){return null!=e&&null!=t&&!(t<this.firstRenderedRow||e>this.lastRenderedRow)}};Xr([P("animationFrameService")],yr.prototype,"animationFrameService",void 0),Xr([P("paginationProxy")],yr.prototype,"paginationProxy",void 0),Xr([P("columnModel")],yr.prototype,"columnModel",void 0),Xr([P("pinnedRowModel")],yr.prototype,"pinnedRowModel",void 0),Xr([P("rowModel")],yr.prototype,"rowModel",void 0),Xr([P("focusService")],yr.prototype,"focusService",void 0),Xr([P("beans")],yr.prototype,"beans",void 0),Xr([P("rowContainerHeightService")],yr.prototype,"rowContainerHeightService",void 0),Xr([P("ctrlsService")],yr.prototype,"ctrlsService",void 0),Xr([Se],yr.prototype,"postConstruct",null),yr=Xr([He("rowRenderer")],yr);class KP{constructor(e){this.entriesMap={},this.entriesList=[],this.maxCount=e}addRow(e){if(this.entriesMap[e.getRowNode().id]=e,this.entriesList.push(e),e.setCached(!0),this.entriesList.length>this.maxCount){const t=this.entriesList[0];t.destroyFirstPass(),t.destroySecondPass(),this.removeFromCache(t)}}getRow(e){if(null==e||null==e.id)return null;const t=this.entriesMap[e.id];return t?(this.removeFromCache(t),t.setCached(!1),t.getRowNode()!=e?null:t):null}has(e){return null!=this.entriesMap[e.id]}removeRow(e){const t=e.id,i=this.entriesMap[t];delete this.entriesMap[t],vr(this.entriesList,i)}removeFromCache(e){const t=e.getRowNode().id;delete this.entriesMap[t],vr(this.entriesList,e)}getEntries(){return this.entriesList}}var ob=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Qf=class extends Ee{formatValue(e,t,i,n,s=!0){let a,o=null;const c=e.getColDef();if(n?a=n:s&&(a=c.valueFormatter),a){const u=this.gridOptionsService.addGridCommonParams({value:i,node:t,data:t?t.data:null,colDef:c,column:e});o="function"==typeof a?a(u):this.expressionService.evaluate(a,u)}else if(c.refData)return c.refData[i]||"";return null==o&&Array.isArray(i)&&(o=i.join(", ")),o}};ob([P("expressionService")],Qf.prototype,"expressionService",void 0),Qf=ob([He("valueFormatterService")],Qf);var ab=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let eg=class extends Ee{init(){this.setPinnedTopRowData(),this.setPinnedBottomRowData(),this.addManagedPropertyListener("pinnedTopRowData",()=>this.setPinnedTopRowData()),this.addManagedPropertyListener("pinnedBottomRowData",()=>this.setPinnedBottomRowData())}isEmpty(e){return us("top"===e?this.pinnedTopRows:this.pinnedBottomRows)}isRowsToRender(e){return!this.isEmpty(e)}getRowAtPixel(e,t){const i="top"===t?this.pinnedTopRows:this.pinnedBottomRows;if(us(i))return 0;for(let n=0;n<i.length;n++){const s=i[n];if(s.rowTop+s.rowHeight-1>=e)return n}return i.length-1}setPinnedTopRowData(){const e=this.gridOptionsService.get("pinnedTopRowData");this.pinnedTopRows=this.createNodesFromData(e,!0),this.eventService.dispatchEvent({type:G.EVENT_PINNED_ROW_DATA_CHANGED})}setPinnedBottomRowData(){const e=this.gridOptionsService.get("pinnedBottomRowData");this.pinnedBottomRows=this.createNodesFromData(e,!1),this.eventService.dispatchEvent({type:G.EVENT_PINNED_ROW_DATA_CHANGED})}createNodesFromData(e,t){const i=[];if(e){let n=0;e.forEach((s,o)=>{const a=new Gt(this.beans);a.data=s,a.id=(t?Gt.ID_PREFIX_TOP_PINNED:Gt.ID_PREFIX_BOTTOM_PINNED)+o,a.rowPinned=t?"top":"bottom",a.setRowTop(n),a.setRowHeight(this.gridOptionsService.getRowHeightForNode(a).height),a.setRowIndex(o),n+=a.rowHeight,i.push(a)})}return i}getPinnedTopRowData(){return this.pinnedTopRows}getPinnedBottomRowData(){return this.pinnedBottomRows}getPinnedTopTotalHeight(){return this.getTotalHeight(this.pinnedTopRows)}getPinnedTopRowCount(){return this.pinnedTopRows?this.pinnedTopRows.length:0}getPinnedBottomRowCount(){return this.pinnedBottomRows?this.pinnedBottomRows.length:0}getPinnedTopRow(e){return this.pinnedTopRows[e]}getPinnedBottomRow(e){return this.pinnedBottomRows[e]}forEachPinnedTopRow(e){us(this.pinnedTopRows)||this.pinnedTopRows.forEach(e)}forEachPinnedBottomRow(e){us(this.pinnedBottomRows)||this.pinnedBottomRows.forEach(e)}getPinnedBottomTotalHeight(){return this.getTotalHeight(this.pinnedBottomRows)}getTotalHeight(e){if(!e||0===e.length)return 0;const t=Xt(e);return t.rowTop+t.rowHeight}};ab([P("beans")],eg.prototype,"beans",void 0),ab([Se],eg.prototype,"init",null),eg=ab([He("pinnedRowModel")],eg);class tg{constructor(e,t){this.active=!0,this.nodeIdsToColumns={},this.mapToItems={},this.keepingColumns=e,this.pathRoot={rowNode:t,children:null},this.mapToItems[t.id]=this.pathRoot}setInactive(){this.active=!1}isActive(){return this.active}depthFirstSearchChangedPath(e,t){if(e.children)for(let i=0;i<e.children.length;i++)this.depthFirstSearchChangedPath(e.children[i],t);t(e.rowNode)}depthFirstSearchEverything(e,t,i){if(e.childrenAfterGroup)for(let n=0;n<e.childrenAfterGroup.length;n++){const s=e.childrenAfterGroup[n];s.childrenAfterGroup?this.depthFirstSearchEverything(e.childrenAfterGroup[n],t,i):i&&t(s)}t(e)}forEachChangedNodeDepthFirst(e,t=!1,i=!1){this.active&&!i?this.depthFirstSearchChangedPath(this.pathRoot,e):this.depthFirstSearchEverything(this.pathRoot.rowNode,e,t)}executeFromRootNode(e){e(this.pathRoot.rowNode)}createPathItems(e){let t=e,i=0;for(;!this.mapToItems[t.id];)this.mapToItems[t.id]={rowNode:t,children:null},i++,t=t.parent;return i}populateColumnsMap(e,t){if(!this.keepingColumns||!t)return;let i=e;for(;i;)this.nodeIdsToColumns[i.id]||(this.nodeIdsToColumns[i.id]={}),t.forEach(n=>this.nodeIdsToColumns[i.id][n.getId()]=!0),i=i.parent}linkPathItems(e,t){let i=e;for(let n=0;n<t;n++){const s=this.mapToItems[i.id],o=this.mapToItems[i.parent.id];o.children||(o.children=[]),o.children.push(s),i=i.parent}}addParentNode(e,t){if(!e||e.isRowPinned())return;const i=this.createPathItems(e);this.linkPathItems(e,i),this.populateColumnsMap(e,t)}canSkip(e){return this.active&&!this.mapToItems[e.id]}getValueColumnsForNode(e,t){if(!this.keepingColumns)return t;const i=this.nodeIdsToColumns[e.id];return t.filter(s=>i[s.getId()])}getNotValueColumnsForNode(e,t){if(!this.keepingColumns)return null;const i=this.nodeIdsToColumns[e.id];return t.filter(s=>!i[s.getId()])}}let h0=(()=>{class r extends Ee{constructor(t){super(),this.state=r.STATE_WAITING_TO_LOAD,this.version=0,this.id=t}getId(){return this.id}load(){this.state=r.STATE_LOADING,this.loadFromDatasource()}getVersion(){return this.version}setStateWaitingToLoad(){this.version++,this.state=r.STATE_WAITING_TO_LOAD}getState(){return this.state}pageLoadFailed(t){this.isRequestMostRecentAndLive(t)&&(this.state=r.STATE_FAILED,this.processServerFail()),this.dispatchLoadCompleted(!1)}success(t,i){this.successCommon(t,i)}pageLoaded(t,i,n){this.successCommon(t,{rowData:i,rowCount:n})}isRequestMostRecentAndLive(t){const i=t===this.version,n=this.isAlive();return i&&n}successCommon(t,i){this.dispatchLoadCompleted(),this.isRequestMostRecentAndLive(t)&&(this.state=r.STATE_LOADED,this.processServerResult(i))}dispatchLoadCompleted(t=!0){this.dispatchEvent({type:r.EVENT_LOAD_COMPLETE,success:t,block:this})}}return r.EVENT_LOAD_COMPLETE="loadComplete",r.STATE_WAITING_TO_LOAD="needsLoading",r.STATE_LOADING="loading",r.STATE_LOADED="loaded",r.STATE_FAILED="failed",r})();var Wv,Uv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let iu=Wv=class extends Ee{constructor(){super(...arguments),this.activeBlockLoadsCount=0,this.blocks=[],this.active=!0}postConstruct(){this.maxConcurrentRequests=this.getMaxConcurrentDatasourceRequests();const e=this.gridOptionsService.get("blockLoadDebounceMillis");e&&e>0&&(this.checkBlockToLoadDebounce=z.debounce(this.performCheckBlocksToLoad.bind(this),e))}setBeans(e){this.logger=e.create("RowNodeBlockLoader")}getMaxConcurrentDatasourceRequests(){const e=this.gridOptionsService.get("maxConcurrentDatasourceRequests");return null==e?2:e<=0?void 0:e}addBlock(e){this.blocks.push(e),e.addEventListener(h0.EVENT_LOAD_COMPLETE,this.loadComplete.bind(this)),this.checkBlockToLoad()}removeBlock(e){z.removeFromArray(this.blocks,e)}destroy(){super.destroy(),this.active=!1}loadComplete(){this.activeBlockLoadsCount--,this.checkBlockToLoad(),this.dispatchEvent({type:Wv.BLOCK_LOADED_EVENT}),0==this.activeBlockLoadsCount&&this.dispatchEvent({type:Wv.BLOCK_LOADER_FINISHED_EVENT})}checkBlockToLoad(){this.checkBlockToLoadDebounce?this.checkBlockToLoadDebounce():this.performCheckBlocksToLoad()}performCheckBlocksToLoad(){if(!this.active)return;if(this.printCacheStatus(),null!=this.maxConcurrentRequests&&this.activeBlockLoadsCount>=this.maxConcurrentRequests)return void this.logger.log("checkBlockToLoad: max loads exceeded");const e=this.getAvailableLoadingCount(),t=this.blocks.filter(i=>i.getState()===h0.STATE_WAITING_TO_LOAD).slice(0,e);this.registerLoads(t.length),t.forEach(i=>i.load()),this.printCacheStatus()}getBlockState(){if(this.gridOptionsService.isRowModelType("serverSide"))return this.rowModel.getBlockStates();const e={};return this.blocks.forEach(t=>{const{id:i,state:n}=t.getBlockStateJson();e[i]=n}),e}printCacheStatus(){this.logger.isLogging()&&this.logger.log(`printCacheStatus: activePageLoadsCount = ${this.activeBlockLoadsCount}, blocks = ${JSON.stringify(this.getBlockState())}`)}isLoading(){return this.activeBlockLoadsCount>0}registerLoads(e){this.activeBlockLoadsCount+=e}getAvailableLoadingCount(){return void 0!==this.maxConcurrentRequests?this.maxConcurrentRequests-this.activeBlockLoadsCount:void 0}};iu.BLOCK_LOADED_EVENT="blockLoaded",iu.BLOCK_LOADER_FINISHED_EVENT="blockLoaderFinished",Uv([P("rowModel")],iu.prototype,"rowModel",void 0),Uv([Se],iu.prototype,"postConstruct",null),Uv([function(r,e){return function(t,i){e(t,i,0)}}(0,Cl("loggerFactory"))],iu.prototype,"setBeans",null),iu=Wv=Uv([He("rowNodeBlockLoader")],iu);var lb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let ig=class extends Ee{constructor(){super(...arguments),this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=0,this.pixelOffset=0,this.masterRowCount=0}postConstruct(){this.active=this.gridOptionsService.get("pagination"),this.pageSizeFromGridOptions=this.gridOptionsService.get("paginationPageSize"),this.paginateChildRows=this.isPaginateChildRows(),this.addManagedListener(this.eventService,G.EVENT_MODEL_UPDATED,this.onModelUpdated.bind(this)),this.addManagedPropertyListener("pagination",this.onPaginationGridOptionChanged.bind(this)),this.addManagedPropertyListener("paginationPageSize",this.onPageSizeGridOptionChanged.bind(this)),this.onModelUpdated()}ensureRowHeightsValid(e,t,i,n){const s=this.rowModel.ensureRowHeightsValid(e,t,this.getPageFirstRow(),this.getPageLastRow());return s&&this.calculatePages(),s}isPaginateChildRows(){return!(!this.gridOptionsService.get("groupRemoveSingleChildren")&&!this.gridOptionsService.get("groupRemoveLowestSingleChildren"))||this.gridOptionsService.get("paginateChildRows")}onModelUpdated(e){this.calculatePages(),this.eventService.dispatchEvent({type:G.EVENT_PAGINATION_CHANGED,animate:!!e&&e.animate,newData:!!e&&e.newData,newPage:!!e&&e.newPage,newPageSize:!!e&&e.newPageSize,keepRenderedRows:!!e&&e.keepRenderedRows})}onPaginationGridOptionChanged(){this.active=this.gridOptionsService.get("pagination"),this.calculatePages(),this.eventService.dispatchEvent({type:G.EVENT_PAGINATION_CHANGED,animate:!1,newData:!1,newPage:!1,newPageSize:!1,keepRenderedRows:!0})}onPageSizeGridOptionChanged(){this.setPageSize(this.gridOptionsService.get("paginationPageSize"),"gridOptions")}goToPage(e){this.active&&this.currentPage!==e&&"number"==typeof this.currentPage&&(this.currentPage=e,this.onModelUpdated({type:G.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!0,newPageSize:!1}))}getPixelOffset(){return this.pixelOffset}getRow(e){return this.rowModel.getRow(e)}getRowNode(e){return this.rowModel.getRowNode(e)}getRowIndexAtPixel(e){return this.rowModel.getRowIndexAtPixel(e)}getCurrentPageHeight(){return gt(this.topRowBounds)||gt(this.bottomRowBounds)?0:Math.max(this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight-this.topRowBounds.rowTop,0)}getCurrentPagePixelRange(){return{pageFirstPixel:this.topRowBounds?this.topRowBounds.rowTop:0,pageLastPixel:this.bottomRowBounds?this.bottomRowBounds.rowTop+this.bottomRowBounds.rowHeight:0}}isRowPresent(e){return!!this.rowModel.isRowPresent(e)&&e.rowIndex>=this.topDisplayedRowIndex&&e.rowIndex<=this.bottomDisplayedRowIndex}isEmpty(){return this.rowModel.isEmpty()}isRowsToRender(){return this.rowModel.isRowsToRender()}forEachNode(e){return this.rowModel.forEachNode(e)}forEachNodeOnPage(e){const t=this.getPageFirstRow(),i=this.getPageLastRow();for(let n=t;n<=i;n++){const s=this.getRow(n);s&&e(s)}}getType(){return this.rowModel.getType()}getRowBounds(e){const t=this.rowModel.getRowBounds(e);return t.rowIndex=e,t}getPageFirstRow(){return this.topRowBounds?this.topRowBounds.rowIndex:-1}getPageLastRow(){return this.bottomRowBounds?this.bottomRowBounds.rowIndex:-1}getRowCount(){return this.rowModel.getRowCount()}getPageForIndex(e){return Math.floor(e/this.pageSize)}goToPageWithIndex(e){if(!this.active)return;const t=this.getPageForIndex(e);this.goToPage(t)}isRowInPage(e){return!this.active||this.getPageForIndex(e.rowIndex)===this.currentPage}isLastPageFound(){return this.rowModel.isLastRowIndexKnown()}getCurrentPage(){return this.currentPage}goToNextPage(){this.goToPage(this.currentPage+1)}goToPreviousPage(){this.goToPage(this.currentPage-1)}goToFirstPage(){this.goToPage(0)}goToLastPage(){const e=this.rowModel.getRowCount(),t=Math.floor(e/this.pageSize);this.goToPage(t)}getPageSize(){return this.pageSize}getTotalPages(){return this.totalPages}setPage(e){this.currentPage=e}get pageSize(){return Ie(this.pageSizeAutoCalculated)?this.pageSizeAutoCalculated:Ie(this.pageSizeFromPageSizeSelector)?this.pageSizeFromPageSizeSelector:Ie(this.pageSizeFromInitialState)?this.pageSizeFromInitialState:Ie(this.pageSizeFromGridOptions)?this.pageSizeFromGridOptions:this.defaultPageSize}unsetAutoCalculatedPageSize(){if(void 0===this.pageSizeAutoCalculated)return;const e=this.pageSizeAutoCalculated;this.pageSizeAutoCalculated=void 0,this.pageSize!==e&&this.onModelUpdated({type:G.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1,newPageSize:!0})}setPageSize(e,t){const i=this.pageSize;switch(t){case"autoCalculated":this.pageSizeAutoCalculated=e;break;case"pageSizeSelector":this.pageSizeFromPageSizeSelector=e,0!==this.currentPage&&this.goToFirstPage();break;case"initialState":this.pageSizeFromInitialState=e;break;case"gridOptions":this.pageSizeFromGridOptions=e,this.pageSizeFromInitialState=void 0,this.pageSizeFromPageSizeSelector=void 0,0!==this.currentPage&&this.goToFirstPage()}i!==this.pageSize&&this.onModelUpdated({type:G.EVENT_MODEL_UPDATED,animate:!1,keepRenderedRows:!1,newData:!1,newPage:!1,newPageSize:!0})}calculatePages(){this.active?this.paginateChildRows?this.calculatePagesAllRows():this.calculatePagesMasterRowsOnly():this.calculatedPagesNotActive(),this.topRowBounds=this.rowModel.getRowBounds(this.topDisplayedRowIndex),this.topRowBounds&&(this.topRowBounds.rowIndex=this.topDisplayedRowIndex),this.bottomRowBounds=this.rowModel.getRowBounds(this.bottomDisplayedRowIndex),this.bottomRowBounds&&(this.bottomRowBounds.rowIndex=this.bottomDisplayedRowIndex),this.setPixelOffset(Ie(this.topRowBounds)?this.topRowBounds.rowTop:0)}setPixelOffset(e){this.pixelOffset!==e&&(this.pixelOffset=e,this.eventService.dispatchEvent({type:G.EVENT_PAGINATION_PIXEL_OFFSET_CHANGED}))}setZeroRows(){this.masterRowCount=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=-1,this.currentPage=0,this.totalPages=0}adjustCurrentPageIfInvalid(){this.currentPage>=this.totalPages&&(this.currentPage=this.totalPages-1),(!isFinite(this.currentPage)||isNaN(this.currentPage)||this.currentPage<0)&&(this.currentPage=0)}calculatePagesMasterRowsOnly(){if(this.masterRowCount=this.rowModel.getTopLevelRowCount(),this.masterRowCount<=0)return void this.setZeroRows();const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid();let i=this.pageSize*(this.currentPage+1)-1;if(i>e&&(i=e),this.topDisplayedRowIndex=this.rowModel.getTopLevelRowDisplayedIndex(this.pageSize*this.currentPage),i===e)this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1;else{const n=this.rowModel.getTopLevelRowDisplayedIndex(i+1);this.bottomDisplayedRowIndex=n-1}}getMasterRowCount(){return this.masterRowCount}calculatePagesAllRows(){if(this.masterRowCount=this.rowModel.getRowCount(),0===this.masterRowCount)return void this.setZeroRows();const e=this.masterRowCount-1;this.totalPages=Math.floor(e/this.pageSize)+1,this.adjustCurrentPageIfInvalid(),this.topDisplayedRowIndex=this.pageSize*this.currentPage,this.bottomDisplayedRowIndex=this.pageSize*(this.currentPage+1)-1,this.bottomDisplayedRowIndex>e&&(this.bottomDisplayedRowIndex=e)}calculatedPagesNotActive(){this.setPageSize(this.masterRowCount,"autoCalculated"),this.totalPages=1,this.currentPage=0,this.topDisplayedRowIndex=0,this.bottomDisplayedRowIndex=this.rowModel.getRowCount()-1}};lb([P("rowModel")],ig.prototype,"rowModel",void 0),lb([Se],ig.prototype,"postConstruct",null),ig=lb([He("paginationProxy")],ig);var f0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let jv=class extends Ee{processAllCellClasses(e,t,i,n){this.processClassRules(void 0,e.cellClassRules,t,i,n),this.processStaticCellClasses(e,t,i)}processClassRules(e,t,i,n,s){if(null==t&&null==e)return;const o={},a={},c=(u,p)=>{u.split(" ").forEach(g=>{""!=g.trim()&&p(g)})};if(t){const u=Object.keys(t);for(let p=0;p<u.length;p++){const g=u[p],m=t[g];let y;"string"==typeof m?y=this.expressionService.evaluate(m,i):"function"==typeof m&&(y=m(i)),c(g,b=>{y?o[b]=!0:a[b]=!0})}}e&&s&&Object.keys(e).forEach(u=>c(u,p=>{o[p]||(a[p]=!0)})),s&&Object.keys(a).forEach(s),Object.keys(o).forEach(n)}getStaticCellClasses(e,t){const{cellClass:i}=e;if(!i)return[];let n;return n="function"==typeof i?i(t):i,"string"==typeof n&&(n=[n]),n||[]}processStaticCellClasses(e,t,i){this.getStaticCellClasses(e,t).forEach(s=>{i(s)})}};f0([P("expressionService")],jv.prototype,"expressionService",void 0),jv=f0([He("stylingService")],jv);class g0 extends Rc{constructor(e){super(e,"ag-toggle-button")}setValue(e,t){return super.setValue(e,t),this.addOrRemoveCssClass("ag-selected",this.getValue()),this}}class RA extends xa{constructor(e){super(e,"ag-text-area",null,"textarea")}setValue(e,t){const i=super.setValue(e,t);return this.eInput.value=e,i}setCols(e){return this.eInput.cols=e,this}setRows(e){return this.eInput.rows=e,this}}class AA extends Ac{constructor(e){super(e,"ag-date-field","date")}postConstruct(){super.postConstruct(),this.addManagedListener(this.eInput,"wheel",this.onWheel.bind(this));const e=er();this.addManagedListener(this.eInput,"mousedown",()=>{this.isDisabled()||e||this.eInput.focus()}),this.eInput.step="any"}onWheel(e){document.activeElement===this.eInput&&e.preventDefault()}setMin(e){var t;const i=e instanceof Date?null!==(t=Bo(e??null,!1))&&void 0!==t?t:void 0:e;return this.min===i||(this.min=i,Oa(this.eInput,"min",i)),this}setMax(e){var t;const i=e instanceof Date?null!==(t=Bo(e??null,!1))&&void 0!==t?t:void 0:e;return this.max===i||(this.max=i,Oa(this.eInput,"max",i)),this}setStep(e){return this.step===e||(this.step=e,Oa(this.eInput,"step",e)),this}getDate(){var e;if(this.eInput.validity.valid)return null!==(e=tr(this.getValue()))&&void 0!==e?e:void 0}setDate(e,t){this.setValue(Bo(e??null,!1),t)}}class m0 extends xa{constructor(e){super(e,"ag-range-field","range")}postConstruct(){super.postConstruct();const{min:e,max:t,step:i}=this.config;null!=e&&this.setMinValue(e),null!=t&&this.setMaxValue(t),this.setStep(i||1)}addInputListeners(){this.addManagedListener(this.eInput,"input",e=>{this.setValue(e.target.value)})}setMinValue(e){return this.min=e,this.eInput.setAttribute("min",e.toString()),this}setMaxValue(e){return this.max=e,this.eInput.setAttribute("max",e.toString()),this}setStep(e){return this.eInput.setAttribute("step",e.toString()),this}setValue(e,t){null!=this.min&&(e=Math.max(parseFloat(e),this.min).toString()),null!=this.max&&(e=Math.min(parseFloat(e),this.max).toString());const i=super.setValue(e,t);return this.eInput.value=e,i}}var zv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class cb extends Ne{constructor(e,t){super('<div class="ag-rich-select-row" role="presentation"></div>'),this.params=e,this.wrapperEl=t}postConstruct(){this.addManagedListener(this.getGui(),"click",this.onClick.bind(this))}setState(e){let t="";this.params.valueFormatter&&(t=this.params.valueFormatter(e)),this.populateWithRenderer(e,t)||this.populateWithoutRenderer(e,t),this.value=e}highlightString(e){const{parsedValue:t}=this;if(this.params.cellRenderer||!Ie(t))return;let i=Ie(e);if(i){const n=t?.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(n>=0){const s=n+e.length,o=yn(t.slice(0,n),!0),a=yn(t.slice(n,s),!0),c=yn(t.slice(s));this.renderValueWithoutRenderer(`${o}<span class="ag-rich-select-row-text-highlight">${a}</span>${c}`)}else i=!1}i||this.renderValueWithoutRenderer(t)}updateHighlighted(e){var t;const i=this.getGui(),n=`ag-rich-select-row-${this.getCompId()}`;null===(t=i.parentElement)||void 0===t||t.setAttribute("id",n),e&&(oE(this.getParentComponent().getAriaElement(),n),this.wrapperEl.setAttribute("data-active-option",n)),Ef(i.parentElement,e),this.addOrRemoveCssClass("ag-rich-select-row-selected",e)}populateWithoutRenderer(e,t){const i=this.gridOptionsService.getDocument(),n=this.getGui(),s=i.createElement("span");s.style.overflow="hidden",s.style.textOverflow="ellipsis";const o=yn(Ie(t)?t:e,!0);this.parsedValue=Ie(o)?o:null,n.appendChild(s),this.renderValueWithoutRenderer(o)}renderValueWithoutRenderer(e){const t=this.getGui().querySelector("span");!t||(t.innerHTML=Ie(e)?e:"&nbsp;")}populateWithRenderer(e,t){let i,n;return this.params.cellRenderer&&(n=this.userComponentFactory.getCellRendererDetails(this.params,{value:e,valueFormatted:t})),n&&(i=n.newAgStackInstance()),i&&AS(i,this.getGui()),!!i&&(i.then(s=>{this.addDestroyFunc(()=>{this.getContext().destroyBean(s)})}),!0)}onClick(){this.getParentComponent()?.dispatchEvent({type:G.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:!1,value:this.value})}}zv([P("userComponentFactory")],cb.prototype,"userComponentFactory",void 0),zv([Se],cb.prototype,"postConstruct",null);var $v=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class qo extends jh{constructor(e){super(qo.getTemplate(e?.cssIdentifier||"default")),this.renderedRows=new Map,this.rowHeight=20;const{cssIdentifier:t="default",ariaRole:i="listbox",listName:n}=e||{};this.cssIdentifier=t,this.ariaRole=i,this.listName=n}postConstruct(){this.addScrollListener(),this.rowHeight=this.getItemHeight(),this.addResizeObserver(),this.initialiseTabGuard({onFocusIn:e=>this.onFocusIn(e),onFocusOut:e=>this.onFocusOut(e),focusInnerElement:e=>this.focusInnerElement(e),onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)}),this.setAriaProperties(),this.addManagedListener(this.eventService,G.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanged.bind(this))}onGridStylesChanged(){this.rowHeight=this.getItemHeight(),this.refresh()}setAriaProperties(){const t=this.localeService.getLocaleTextFunc()("ariaDefaultListName",this.listName||"List"),i=this.eContainer;In(i,this.ariaRole),bc(i,t)}addResizeObserver(){const t=this.resizeObserverService.observeResize(this.getGui(),()=>this.animationFrameService.requestAnimationFrame(()=>this.drawVirtualRows()));this.addDestroyFunc(t)}focusInnerElement(e){this.focusRow(e?this.model.getRowCount()-1:0)}onFocusIn(e){const t=e.target;t.classList.contains("ag-virtual-list-item")&&(this.lastFocusedRowIndex=nE(t)-1)}onFocusOut(e){this.getFocusableElement().contains(e.relatedTarget)||(this.lastFocusedRowIndex=null)}handleKeyDown(e){switch(e.key){case ge.UP:case ge.DOWN:this.navigate(e.key===ge.UP)&&e.preventDefault()}}onTabKeyDown(e){this.navigate(e.shiftKey)?e.preventDefault():(Aa(e),this.forceFocusOutOfContainer(e.shiftKey))}navigate(e){if(null==this.lastFocusedRowIndex)return!1;const t=this.lastFocusedRowIndex+(e?-1:1);return!(t<0||t>=this.model.getRowCount()||(this.focusRow(t),0))}getLastFocusedRow(){return this.lastFocusedRowIndex}focusRow(e){this.ensureIndexVisible(e),window.setTimeout(()=>{if(!this.isAlive())return;const t=this.renderedRows.get(e);t&&t.eDiv.focus()},10)}getComponentAt(e){const t=this.renderedRows.get(e);return t&&t.rowComponent}forEachRenderedRow(e){this.renderedRows.forEach((t,i)=>e(t.rowComponent,i))}static getTemplate(e){return`<div class="ag-virtual-list-viewport ag-${e}-virtual-list-viewport" role="presentation">\n                <div class="ag-virtual-list-container ag-${e}-virtual-list-container" ref="eContainer"></div>\n            </div>`}getItemHeight(){return this.environment.getListItemHeight()}ensureIndexVisible(e,t=!0){const i=this.model.getRowCount();if("number"!=typeof e||e<0||e>=i)return console.warn("AG Grid: invalid row index for ensureIndexVisible: "+e),!1;const n=e*this.rowHeight,s=n+this.rowHeight,o=this.getGui(),a=o.scrollTop,c=o.offsetHeight,p=t?0:this.rowHeight,m=a+c<s-p;return a>n+p?(o.scrollTop=n,!0):!!m&&(o.scrollTop=s-c,!0)}setComponentCreator(e){this.componentCreator=e}setComponentUpdater(e){this.componentUpdater=e}getRowHeight(){return this.rowHeight}getScrollTop(){return this.getGui().scrollTop}setRowHeight(e){this.rowHeight=e,this.refresh()}refresh(e){if(null==this.model||!this.isAlive())return;const t=this.model.getRowCount();this.eContainer.style.height=t*this.rowHeight+"px",mr(()=>this.eContainer.clientHeight>=t*this.rowHeight,()=>{!this.isAlive()||(this.canSoftRefresh(e)?this.drawVirtualRows(!0):(this.clearVirtualRows(),this.drawVirtualRows()))})}canSoftRefresh(e){return!!(e&&this.renderedRows.size&&"function"==typeof this.model.areRowsEqual&&this.componentUpdater)}clearVirtualRows(){this.renderedRows.forEach((e,t)=>this.removeRow(t))}drawVirtualRows(e){if(!this.isAlive()||!this.model)return;const t=this.getGui(),i=t.scrollTop,n=i+t.offsetHeight,s=Math.floor(i/this.rowHeight),o=Math.floor(n/this.rowHeight);this.ensureRowsRendered(s,o,e)}ensureRowsRendered(e,t,i){this.renderedRows.forEach((n,s)=>{(s<e||s>t)&&s!==this.lastFocusedRowIndex&&this.removeRow(s)}),i&&this.refreshRows();for(let n=e;n<=t;n++)this.renderedRows.has(n)||n<this.model.getRowCount()&&this.insertRow(n)}insertRow(e){const t=this.model.getRow(e),i=document.createElement("div");i.classList.add("ag-virtual-list-item",`ag-${this.cssIdentifier}-virtual-list-item`),In(i,"tree"===this.ariaRole?"treeitem":"option"),cv(i,this.model.getRowCount()),gS(i,e+1),i.setAttribute("tabindex","-1"),i.style.height=`${this.rowHeight}px`,i.style.top=this.rowHeight*e+"px";const n=this.componentCreator(t,i);n.addGuiEventListener("focusin",()=>this.lastFocusedRowIndex=e),i.appendChild(n.getGui()),this.renderedRows.has(e-1)?this.renderedRows.get(e-1).eDiv.insertAdjacentElement("afterend",i):this.renderedRows.has(e+1)?this.renderedRows.get(e+1).eDiv.insertAdjacentElement("beforebegin",i):this.eContainer.appendChild(i),this.renderedRows.set(e,{rowComponent:n,eDiv:i,value:t})}removeRow(e){const t=this.renderedRows.get(e);this.eContainer.removeChild(t.eDiv),this.destroyBean(t.rowComponent),this.renderedRows.delete(e)}refreshRows(){const e=this.model.getRowCount();this.renderedRows.forEach((t,i)=>{var n,s;if(i>=e)this.removeRow(i);else{const o=this.model.getRow(i);null!==(s=(n=this.model).areRowsEqual)&&void 0!==s&&s.call(n,t.value,o)?this.componentUpdater(o,t.rowComponent):this.removeRow(i)}})}addScrollListener(){this.addGuiEventListener("scroll",()=>this.drawVirtualRows(),{passive:!0})}setModel(e){this.model=e}getAriaElement(){return this.eContainer}destroy(){!this.isAlive()||(this.clearVirtualRows(),super.destroy())}}$v([P("resizeObserverService")],qo.prototype,"resizeObserverService",void 0),$v([P("animationFrameService")],qo.prototype,"animationFrameService",void 0),$v([re("eContainer")],qo.prototype,"eContainer",void 0),$v([Se],qo.prototype,"postConstruct",null);var v0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class db extends Gd{constructor(e){var t,i;super(Object.assign(Object.assign({pickerAriaLabelKey:"ariaLabelRichSelectField",pickerAriaLabelValue:"Rich Select Field",pickerType:"ag-list",className:"ag-rich-select",pickerIcon:"smallDown",ariaRole:"combobox",template:null!==(t=e?.template)&&void 0!==t?t:'\n    <div class="ag-picker-field" role="presentation">\n        <div ref="eLabel"></div>\n            <div ref="eWrapper" class="ag-wrapper ag-picker-field-wrapper ag-rich-select-value ag-picker-collapsed">\n            <div ref="eDisplayField" class="ag-picker-field-display"></div>\n            <ag-input-text-field ref="eInput" class="ag-rich-select-field-input"></ag-input-text-field>\n            <div ref="eIcon" class="ag-picker-field-icon" aria-hidden="true"></div>\n        </div>\n    </div>',modalPicker:!1},e),{maxPickerHeight:null!==(i=e?.maxPickerHeight)&&void 0!==i?i:"calc(var(--ag-row-height) * 6.5)"})),this.searchString="",this.highlightedItem=-1,this.lastRowHovered=-1,this.searchStringCreator=null;const{cellRowHeight:n,value:s,valueList:o,searchStringCreator:a}=e||{};null!=n&&(this.cellRowHeight=n),void 0!==s&&(this.value=s),null!=o&&(this.values=o),a&&(this.searchStringCreator=a)}postConstruct(){super.postConstruct(),this.createLoadingElement(),this.createListComponent();const{allowTyping:e,placeholder:t}=this.config;e?(this.eInput.setAutoComplete(!1).setInputPlaceholder(t),this.eDisplayField.classList.add("ag-hidden")):this.eInput.setDisplayed(!1),this.eWrapper.tabIndex=this.gridOptionsService.get("tabIndex");const{searchDebounceDelay:i=300}=this.config;this.clearSearchString=ko(this.clearSearchString,i),this.renderSelectedValue(),e&&(this.eInput.onValueChange(n=>this.searchTextFromString(n)),this.addManagedListener(this.eWrapper,"focus",this.onWrapperFocus.bind(this))),this.addManagedListener(this.eWrapper,"focusout",this.onWrapperFocusOut.bind(this))}createLoadingElement(){const e=this.gridOptionsService.getDocument(),t=this.localeService.getLocaleTextFunc(),i=e.createElement("div");i.classList.add("ag-loading-text"),i.innerText=t("loadingOoo","Loading..."),this.eLoading=i}createListComponent(){this.listComponent=this.createBean(new qo({cssIdentifier:"rich-select"})),this.listComponent.setComponentCreator(this.createRowComponent.bind(this)),this.listComponent.setComponentUpdater((c,u)=>{}),this.listComponent.setParentComponent(this),this.addManagedListener(this.listComponent,G.EVENT_FIELD_PICKER_VALUE_SELECTED,c=>{this.onListValueSelected(c.value,c.fromEnterKey)});const{cellRowHeight:t}=this;t&&this.listComponent.setRowHeight(t);const i=this.listComponent.getGui(),n=this.listComponent.getAriaElement();this.addManagedListener(i,"mousemove",this.onPickerMouseMove.bind(this)),this.addManagedListener(i,"mousedown",c=>c.preventDefault()),i.classList.add("ag-rich-select-list");const s=`ag-rich-select-list-${this.listComponent.getCompId()}`;n.setAttribute("id",s),bc(n,this.localeService.getLocaleTextFunc()(this.config.pickerAriaLabelKey,this.config.pickerAriaLabelValue)),cE(this.eWrapper,n)}renderSelectedValue(){const{value:e,eDisplayField:t,config:i}=this,{allowTyping:n,initialInputValue:s}=this.config,o=this.config.valueFormatter?this.config.valueFormatter(e):e;if(n)return void this.eInput.setValue(s??o);let a,c;if(i.cellRenderer&&(a=this.userComponentFactory.getCellRendererDetails(this.config,{value:e,valueFormatted:o})),a&&(c=a.newAgStackInstance()),c)es(t),AS(c,t),c.then(u=>{this.addDestroyFunc(()=>this.getContext().destroyBean(u))});else if(Ie(this.value))t.innerText=o,t.classList.remove("ag-display-as-placeholder");else{const{placeholder:u}=i;Ie(u)?(t.innerHTML=`${yn(u)}`,t.classList.add("ag-display-as-placeholder")):es(t)}}getCurrentValueIndex(){const{currentList:e,value:t}=this;if(null==t||!e)return-1;for(let i=0;i<e.length;i++)if(e[i]===t)return i;return-1}highlightFilterMatch(){var e;null===(e=this.listComponent)||void 0===e||e.forEachRenderedRow((t,i)=>{t.highlightString(this.searchString)})}highlightSelectedValue(e){var t;null==e&&(e=this.getCurrentValueIndex()),this.highlightedItem=e,null===(t=this.listComponent)||void 0===t||t.forEachRenderedRow((i,n)=>{i.updateHighlighted(-1!==e&&this.highlightedItem===n)})}setRowHeight(e){e!==this.cellRowHeight&&(this.cellRowHeight=e),this.listComponent&&this.listComponent.setRowHeight(e)}createPickerComponent(){const{values:e}=this;return e&&this.setValueList({valueList:e}),this.listComponent}setSearchStringCreator(e){this.searchStringCreator=e}setValueList(e){const{valueList:t,refresh:i}=e;!this.listComponent||this.currentList!==t&&(this.currentList=t,this.listComponent.setModel({getRowCount:()=>t.length,getRow:n=>t[n],areRowsEqual:(n,s)=>n===s}),i&&(this.values?this.listComponent.refresh(!0):(this.values=t,this.isPickerDisplayed&&this.showCurrentValueInPicker())))}showPicker(){super.showPicker(),this.showCurrentValueInPicker(),this.displayOrHidePicker()}showCurrentValueInPicker(){var e,t;if(!this.listComponent)return;if(!this.currentList)return void(this.isPickerDisplayed&&this.eLoading&&this.listComponent.appendChild(this.eLoading));null!==(e=this.eLoading)&&void 0!==e&&e.offsetParent&&(null===(t=this.eLoading.parentElement)||void 0===t||t.removeChild(this.eLoading));const i=this.getCurrentValueIndex();-1!==i?(this.listComponent.refresh(),this.listComponent.ensureIndexVisible(i),this.listComponent.refresh(!0),this.highlightSelectedValue(i)):this.listComponent.refresh()}beforeHidePicker(){this.highlightedItem=-1,super.beforeHidePicker()}onWrapperFocus(){if(!this.eInput)return;const e=this.eInput.getFocusableElement();e.focus(),e.select()}onWrapperFocusOut(e){this.eWrapper.contains(e.relatedTarget)||this.hidePicker()}buildSearchStringFromKeyboardEvent(e){let{key:t}=e;if(t===ge.BACKSPACE)this.searchString=this.searchString.slice(0,-1),t="";else if(!Th(e))return;e.preventDefault(),this.searchTextFromCharacter(t)}searchTextFromCharacter(e){this.searchString+=e,this.runSearch(),this.clearSearchString()}searchTextFromString(e){null==e&&(e=""),this.searchString=e,this.runSearch()}buildSearchStrings(e){const{valueFormatter:t=(n=>n)}=this.config;let i;return"number"==typeof e[0]||"string"==typeof e[0]?i=e.map(n=>t(n)):"object"==typeof e[0]&&this.searchStringCreator&&(i=this.searchStringCreator(e)),i}getSuggestionsAndFilteredValues(e,t){let i=[],n=[];if(!e.length)return{suggestions:i,filteredValues:n};const{searchType:s="fuzzy",filterList:o}=this.config;if("fuzzy"===s){const a=OS(this.searchString,t,!0);i=a.values;const c=a.indices;if(o&&c.length)for(let u=0;u<c.length;u++)n.push(this.values[c[u]])}else i=t.filter((a,c)=>{const u=a.toLocaleLowerCase(),p=this.searchString.toLocaleLowerCase(),g="match"===s?u.startsWith(p):-1!==u.indexOf(p);return o&&g&&n.push(this.values[c]),g});return{suggestions:i,filteredValues:n}}filterListModel(e){const{filterList:t}=this.config;!t||(this.setValueList({valueList:e,refresh:!0}),this.alignPickerToComponent())}runSearch(){var e,t;const{values:i}=this,n=this.buildSearchStrings(i);if(!n)return void this.highlightSelectedValue(-1);const{suggestions:s,filteredValues:o}=this.getSuggestionsAndFilteredValues(this.searchString,n),{filterList:a,highlightMatch:c,searchType:u="fuzzy"}=this.config,p=o.length,g=!(!a||""===this.searchString);if(this.filterListModel(g?o:i),s.length){const m=g?0:n.indexOf(s[0]);this.selectListItem(m)}else if(this.highlightSelectedValue(-1),!g||p)null===(e=this.listComponent)||void 0===e||e.ensureIndexVisible(0);else if(g){this.getAriaElement().removeAttribute("data-active-option");const m=null===(t=this.listComponent)||void 0===t?void 0:t.getAriaElement();m&&oE(m,null)}c&&"fuzzy"!==u&&this.highlightFilterMatch(),this.displayOrHidePicker()}displayOrHidePicker(){var e;(null===(e=this.listComponent)||void 0===e?void 0:e.getGui())?.classList.toggle("ag-hidden",!!this.currentList&&0===this.currentList.length)}clearSearchString(){this.searchString=""}selectListItem(e,t){!this.isPickerDisplayed||!this.currentList||!this.listComponent||e<0||e>=this.currentList.length||(this.listComponent.ensureIndexVisible(e,!t)&&!t&&this.listComponent.refresh(!0),this.highlightSelectedValue(e))}setValue(e,t,i){const n=this.currentList?this.currentList.indexOf(e):-1;return-1===n?this:(this.value=e,i||this.selectListItem(n),this.renderSelectedValue(),super.setValue(e,t))}createRowComponent(e){const t=new cb(this.config,this.eWrapper);t.setParentComponent(this.listComponent),this.getContext().createBean(t),t.setState(e);const{highlightMatch:i,searchType:n="fuzzy"}=this.config;return i&&"fuzzy"!==n&&t.highlightString(this.searchString),t}getRowForMouseEvent(e){const{listComponent:t}=this;if(!t)return-1;const n=t?.getGui().getBoundingClientRect(),s=t.getScrollTop();return Math.floor((e.clientY-n.top+s)/t.getRowHeight())}onPickerMouseMove(e){if(!this.listComponent)return;const t=this.getRowForMouseEvent(e);-1!==t&&t!=this.lastRowHovered&&(this.lastRowHovered=t,this.selectListItem(t,!0))}onNavigationKeyDown(e,t){e.preventDefault();const i=t===ge.DOWN;if(!this.isPickerDisplayed&&i)return void this.showPicker();const n=this.highlightedItem;this.selectListItem(-1===n?0:n+(i?1:-1))}onEnterKeyDown(e){!this.isPickerDisplayed||(e.preventDefault(),this.currentList&&this.onListValueSelected(this.currentList[this.highlightedItem],!0))}onTabKeyDown(){!this.isPickerDisplayed||!this.currentList||this.setValue(this.currentList[this.highlightedItem],!1,!0)}onListValueSelected(e,t){this.setValue(e,!1,!0),this.dispatchPickerEvent(e,t),this.hidePicker()}dispatchPickerEvent(e,t){this.dispatchEvent({type:G.EVENT_FIELD_PICKER_VALUE_SELECTED,fromEnterKey:t,value:e})}getFocusableElement(){const{allowTyping:e}=this.config;return e?this.eInput.getFocusableElement():super.getFocusableElement()}onKeyDown(e){const t=e.key,{allowTyping:i}=this.config;switch(t){case ge.LEFT:case ge.RIGHT:case ge.PAGE_HOME:case ge.PAGE_END:i||e.preventDefault();break;case ge.PAGE_UP:case ge.PAGE_DOWN:e.preventDefault();break;case ge.DOWN:case ge.UP:this.onNavigationKeyDown(e,t);break;case ge.ESCAPE:this.isPickerDisplayed&&(Fn(this.listComponent.getGui())&&(e.preventDefault(),Aa(e)),this.hidePicker());break;case ge.ENTER:this.onEnterKeyDown(e);break;case ge.TAB:this.onTabKeyDown();break;default:i||this.buildSearchStringFromKeyboardEvent(e)}}destroy(){this.listComponent&&(this.destroyBean(this.listComponent),this.listComponent=void 0),this.eLoading=void 0,super.destroy()}}v0([P("userComponentFactory")],db.prototype,"userComponentFactory",void 0),v0([re("eInput")],db.prototype,"eInput",void 0);var Kv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Vn extends FS{constructor(e){super(e,Vn.TEMPLATE),this.labelAlignment="top"}init(){this.eSlider.addCssClass("ag-slider-field")}onValueChange(e){const t=G.EVENT_FIELD_VALUE_CHANGED;return this.addManagedListener(this.eText,t,()=>{const i=parseFloat(this.eText.getValue());this.eSlider.setValue(i.toString(),!0),e(i||0)}),this.addManagedListener(this.eSlider,t,()=>{const i=this.eSlider.getValue();this.eText.setValue(i,!0),e(parseFloat(i))}),this}setSliderWidth(e){return this.eSlider.setWidth(e),this}setTextFieldWidth(e){return this.eText.setWidth(e),this}setMinValue(e){return this.eSlider.setMinValue(e),this.eText.setMin(e),this}setMaxValue(e){return this.eSlider.setMaxValue(e),this.eText.setMax(e),this}getValue(){return this.eText.getValue()}setValue(e){return this.getValue()===e||(this.eText.setValue(e,!0),this.eSlider.setValue(e,!0),this.dispatchEvent({type:G.EVENT_FIELD_VALUE_CHANGED})),this}setStep(e){return this.eSlider.setStep(e),this.eText.setStep(e),this}}Vn.TEMPLATE='<div class="ag-slider">\n            <label ref="eLabel"></label>\n            <div class="ag-wrapper ag-slider-wrapper">\n                <ag-input-range ref="eSlider"></ag-input-range>\n                <ag-input-number-field ref="eText"></ag-input-number-field>\n            </div>\n        </div>',Kv([re("eLabel")],Vn.prototype,"eLabel",void 0),Kv([re("eSlider")],Vn.prototype,"eSlider",void 0),Kv([re("eText")],Vn.prototype,"eText",void 0),Kv([Se],Vn.prototype,"init",null);var Kh=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class ln extends Ne{constructor(e={}){super(ln.getTemplate(e)),this.suppressEnabledCheckbox=!0,this.suppressOpenCloseIcons=!1;const{title:t,enabled:i,items:n,suppressEnabledCheckbox:s,suppressOpenCloseIcons:o}=e;this.title=t,this.cssIdentifier=e.cssIdentifier||"default",this.enabled=i??!0,this.items=n||[],this.alignItems=e.alignItems||"center",null!=s&&(this.suppressEnabledCheckbox=s),null!=o&&(this.suppressOpenCloseIcons=o)}static getTemplate(e){const t=e.cssIdentifier||"default";return`<div class="ag-group ag-${t}-group" role="presentation">\n            <div class="ag-group-title-bar ag-${t}-group-title-bar ag-unselectable" ref="eTitleBar" role="button">\n                <span class="ag-group-title-bar-icon ag-${t}-group-title-bar-icon" ref="eGroupOpenedIcon" role="presentation"></span>\n                <span class="ag-group-title-bar-icon ag-${t}-group-title-bar-icon" ref="eGroupClosedIcon" role="presentation"></span>\n                <span ref="eTitle" class="ag-group-title ag-${t}-group-title"></span>\n            </div>\n            <div ref="eToolbar" class="ag-group-toolbar ag-${t}-group-toolbar">\n                <ag-checkbox ref="cbGroupEnabled"></ag-checkbox>\n            </div>\n            <div ref="eContainer" class="ag-group-container ag-group-container-${e.direction||"vertical"} ag-${t}-group-container"></div>\n        </div>`}postConstruct(){if(this.items.length){const t=this.items;this.items=[],this.addItems(t)}const e=this.localeService.getLocaleTextFunc();this.cbGroupEnabled.setLabel(e("enabled","Enabled")),this.title&&this.setTitle(this.title),this.enabled&&this.setEnabled(this.enabled),this.setAlignItems(this.alignItems),this.hideEnabledCheckbox(this.suppressEnabledCheckbox),this.hideOpenCloseIcons(this.suppressOpenCloseIcons),this.setupExpandContract(),this.refreshAriaStatus(),this.refreshChildDisplay()}setupExpandContract(){this.eGroupClosedIcon.appendChild(Ur("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(Ur("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eTitleBar,"click",()=>this.toggleGroupExpand()),this.addManagedListener(this.eTitleBar,"keydown",e=>{switch(e.key){case ge.ENTER:case ge.SPACE:e.preventDefault(),this.toggleGroupExpand();break;case ge.RIGHT:case ge.LEFT:e.preventDefault(),this.toggleGroupExpand(e.key===ge.RIGHT)}})}refreshAriaStatus(){this.suppressOpenCloseIcons||_c(this.eTitleBar,this.expanded)}refreshChildDisplay(){const e=!this.suppressOpenCloseIcons;si(this.eToolbar,this.expanded&&!this.suppressEnabledCheckbox),si(this.eGroupOpenedIcon,e&&this.expanded),si(this.eGroupClosedIcon,e&&!this.expanded)}isExpanded(){return this.expanded}setAlignItems(e){return this.alignItems!==e&&this.removeCssClass(`ag-group-item-alignment-${this.alignItems}`),this.alignItems=e,this.addCssClass(`ag-group-item-alignment-${this.alignItems}`),this}toggleGroupExpand(e){return this.suppressOpenCloseIcons?(this.expanded=!0,this.refreshChildDisplay(),si(this.eContainer,!0),this):(this.expanded===(e=e??!this.expanded)||(this.expanded=e,this.refreshAriaStatus(),this.refreshChildDisplay(),si(this.eContainer,e),this.dispatchEvent({type:this.expanded?ln.EVENT_EXPANDED:ln.EVENT_COLLAPSED})),this)}addItems(e){e.forEach(t=>this.addItem(t))}prependItem(e){this.insertItem(e,this.eContainer.firstChild)}addItem(e){this.insertItem(e,null)}insertItem(e,t){const i=this.eContainer,n=e instanceof Ne?e.getGui():e;n.classList.add("ag-group-item",`ag-${this.cssIdentifier}-group-item`),i.insertBefore(n,t),this.items.push(n)}hideItem(e,t){si(this.items[t],!e)}setTitle(e){return this.eTitle.innerText=e,this}addCssClassToTitleBar(e){this.eTitleBar.classList.add(e)}setEnabled(e,t){return this.enabled=e,this.refreshDisabledStyles(),this.toggleGroupExpand(e),t||this.cbGroupEnabled.setValue(e),this}isEnabled(){return this.enabled}onEnableChange(e){return this.cbGroupEnabled.onValueChange(t=>{this.setEnabled(t,!0),e(t)}),this}hideEnabledCheckbox(e){return this.suppressEnabledCheckbox=e,this.refreshChildDisplay(),this.refreshDisabledStyles(),this}hideOpenCloseIcons(e){return this.suppressOpenCloseIcons=e,e&&this.toggleGroupExpand(!0),this}refreshDisabledStyles(){this.addOrRemoveCssClass("ag-disabled",!this.enabled),this.suppressEnabledCheckbox&&!this.enabled?(this.eTitleBar.classList.add("ag-disabled-group-title-bar"),this.eTitleBar.removeAttribute("tabindex")):(this.eTitleBar.classList.remove("ag-disabled-group-title-bar"),this.eTitleBar.setAttribute("tabindex","0")),this.eContainer.classList.toggle("ag-disabled-group-container",!this.enabled)}}ln.EVENT_EXPANDED="expanded",ln.EVENT_COLLAPSED="collapsed",Kh([re("eTitleBar")],ln.prototype,"eTitleBar",void 0),Kh([re("eGroupOpenedIcon")],ln.prototype,"eGroupOpenedIcon",void 0),Kh([re("eGroupClosedIcon")],ln.prototype,"eGroupClosedIcon",void 0),Kh([re("eToolbar")],ln.prototype,"eToolbar",void 0),Kh([re("cbGroupEnabled")],ln.prototype,"cbGroupEnabled",void 0),Kh([re("eTitle")],ln.prototype,"eTitle",void 0),Kh([re("eContainer")],ln.prototype,"eContainer",void 0),Kh([Se],ln.prototype,"postConstruct",null);var MA=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Yh extends jh{constructor(e=0,t){super('<div class="ag-menu-list" role="tree"></div>'),this.level=e,this.menuItems=[],this.params=t??{column:null,node:null,value:null}}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e),onFocusIn:e=>this.handleFocusIn(e),onFocusOut:e=>this.handleFocusOut(e)})}onTabKeyDown(e){const t=this.getParentComponent(),i=t&&t.getGui();i&&i.classList.contains("ag-focus-managed")||e.preventDefault(),e.shiftKey&&this.closeIfIsChild(e)}handleKeyDown(e){switch(e.key){case ge.UP:case ge.RIGHT:case ge.DOWN:case ge.LEFT:e.preventDefault(),this.handleNavKey(e.key);break;case ge.ESCAPE:this.closeIfIsChild()&&Aa(e)}}handleFocusIn(e){var t,i;const n=e.relatedTarget;!this.tabGuardCtrl.isTabGuard(n)&&(this.getGui().contains(n)||(null===(i=null===(t=this.activeMenuItem)||void 0===t?void 0:t.getSubMenuGui())||void 0===i?void 0:i.contains(n)))||(this.activeMenuItem?this.activeMenuItem.activate():this.activateFirstItem())}handleFocusOut(e){var t;const i=e.relatedTarget;!this.activeMenuItem||this.getGui().contains(i)||(null===(t=this.activeMenuItem.getSubMenuGui())||void 0===t?void 0:t.contains(i))||this.activeMenuItem.isSubMenuOpening()||this.activeMenuItem.deactivate()}clearActiveItem(){this.activeMenuItem&&(this.activeMenuItem.deactivate(),this.activeMenuItem=null)}addMenuItems(e){null!=e&&$t.all(e.map(t=>"separator"===t?$t.resolve({eGui:this.createSeparator()}):"string"==typeof t?(console.warn(`AG Grid: unrecognised menu item ${t}`),$t.resolve({eGui:null})):this.addItem(t))).then(t=>{t.forEach(i=>{i?.eGui&&(this.appendChild(i.eGui),i.comp&&this.menuItems.push(i.comp))})})}addItem(e){const t=this.createManagedBean(new wn);return t.init({menuItemDef:e,isAnotherSubMenuOpen:()=>this.menuItems.some(i=>i.isSubMenuOpen()),level:this.level,contextParams:this.params}).then(()=>(t.setParentComponent(this),this.addManagedListener(t,wn.EVENT_CLOSE_MENU,i=>{this.dispatchEvent(i)}),this.addManagedListener(t,wn.EVENT_MENU_ITEM_ACTIVATED,i=>{this.activeMenuItem&&this.activeMenuItem!==i.menuItem&&this.activeMenuItem.deactivate(),this.activeMenuItem=i.menuItem}),{comp:t,eGui:t.getGui()}))}activateFirstItem(){const e=this.menuItems.filter(t=>!t.isDisabled())[0];!e||e.activate()}createSeparator(){return ps('\n            <div class="ag-menu-separator" aria-hidden="true">\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n                <div class="ag-menu-separator-part"></div>\n            </div>')}handleNavKey(e){switch(e){case ge.UP:case ge.DOWN:const i=this.findNextItem(e===ge.UP);return void(i&&i!==this.activeMenuItem&&i.activate())}e===(this.gridOptionsService.get("enableRtl")?ge.RIGHT:ge.LEFT)?this.closeIfIsChild():this.openChild()}closeIfIsChild(e){const t=this.getParentComponent();return!!(t&&t instanceof wn)&&(e&&e.preventDefault(),t.closeSubMenu(),t.getGui().focus(),!0)}openChild(){this.activeMenuItem&&this.activeMenuItem.openSubMenu(!0)}findNextItem(e){const t=this.menuItems.filter(s=>!s.isDisabled());if(!t.length)return;if(!this.activeMenuItem)return e?Xt(t):t[0];e&&t.reverse();let i,n=!1;for(let s=0;s<t.length;s++){const o=t[s];if(n){i=o;break}o===this.activeMenuItem&&(n=!0)}return n&&!i?t[0]:i||this.activeMenuItem}destroy(){this.clearActiveItem(),super.destroy()}}MA([P("focusService")],Yh.prototype,"focusService",void 0),MA([Se],Yh.prototype,"postConstruct",null);class Bn extends jh{constructor(e){super(),this.wrappedComponent=e,this.setTemplateFromElement(e.getGui())}postConstruct(){this.initialiseTabGuard({onTabKeyDown:e=>this.onTabKeyDown(e),handleKeyDown:e=>this.handleKeyDown(e)})}handleKeyDown(e){e.key===ge.ESCAPE&&this.closePanel()}onTabKeyDown(e){e.defaultPrevented||(this.closePanel(),e.preventDefault())}closePanel(){const e=this.parentComponent;e.closeSubMenu(),setTimeout(()=>e.getGui().focus(),0)}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Se],Bn.prototype,"postConstruct",null);var ub=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class wn extends Ee{constructor(){super(...arguments),this.isActive=!1,this.subMenuIsOpen=!1,this.subMenuIsOpening=!1,this.suppressRootStyles=!0,this.suppressAria=!0,this.suppressFocus=!0}init(e){var t,i;const{menuItemDef:n,isAnotherSubMenuOpen:s,level:o,childComponent:a,contextParams:c}=e;return this.params=e.menuItemDef,this.level=o,this.isAnotherSubMenuOpen=s,this.childComponent=a,this.contextParams=c,this.cssClassPrefix=null!==(i=null===(t=this.params.menuItemParams)||void 0===t?void 0:t.cssClassPrefix)&&void 0!==i?i:"ag-menu-option",this.userComponentFactory.getMenuItemCompDetails(this.params,Object.assign(Object.assign({},n),{level:o,isAnotherSubMenuOpen:s,openSubMenu:p=>this.openSubMenu(p),closeSubMenu:()=>this.closeSubMenu(),closeMenu:p=>this.closeMenu(p),updateTooltip:p=>this.updateTooltip(p),onItemActivated:()=>this.onItemActivated()})).newAgStackInstance().then(p=>{var g;this.menuItemComp=p;const m=null===(g=p.configureDefaults)||void 0===g?void 0:g.call(p);m&&this.configureDefaults(!0===m?void 0:m)})}addListeners(e,t){t?.suppressClick||this.addManagedListener(e,"click",i=>this.onItemSelected(i)),t?.suppressKeyboardSelect||this.addManagedListener(e,"keydown",i=>{(i.key===ge.ENTER||i.key===ge.SPACE)&&(i.preventDefault(),this.onItemSelected(i))}),t?.suppressMouseDown||this.addManagedListener(e,"mousedown",i=>{i.stopPropagation(),i.preventDefault()}),t?.suppressMouseOver||(this.addManagedListener(e,"mouseenter",()=>this.onMouseEnter()),this.addManagedListener(e,"mouseleave",()=>this.onMouseLeave()))}isDisabled(){return!!this.params.disabled}openSubMenu(e=!1){var t,i;if(this.closeSubMenu(),!this.params.subMenu)return;this.subMenuIsOpening=!0;const n=ps('<div class="ag-menu" role="presentation"></div>');this.eSubMenuGui=n;let s,o=()=>{this.subMenuIsOpening=!1};if(this.childComponent){const p=this.createBean(new Bn(this.childComponent));p.setParentComponent(this);const g=p.getGui(),m="mouseenter",y=()=>this.cancelDeactivate();g.addEventListener(m,y),s=()=>g.removeEventListener(m,y),n.appendChild(g),this.childComponent.afterGuiAttached&&(o=()=>{this.childComponent.afterGuiAttached(),this.subMenuIsOpening=!1})}else if(this.params.subMenu){const p=this.createBean(new Yh(this.level+1,this.contextParams));p.setParentComponent(this),p.addMenuItems(this.params.subMenu),n.appendChild(p.getGui()),this.addManagedListener(p,wn.EVENT_CLOSE_MENU,g=>this.dispatchEvent(g)),p.addGuiEventListener("mouseenter",()=>this.cancelDeactivate()),s=()=>this.destroyBean(p),e&&(o=()=>{p.activateFirstItem(),this.subMenuIsOpening=!1})}const a=this.popupService.positionPopupForMenu.bind(this.popupService,{eventSource:this.eGui,ePopup:n}),c=this.localeService.getLocaleTextFunc(),u=this.popupService.addPopup({modal:!0,eChild:n,positionCallback:a,anchorToElement:this.eGui,ariaLabel:c("ariaLabelSubMenu","SubMenu"),afterGuiAttached:o});this.subMenuIsOpen=!0,this.setAriaExpanded(!0),this.hideSubMenu=()=>{var p,g;u&&u.hideFunc(),this.subMenuIsOpen=!1,this.setAriaExpanded(!1),s(),null===(g=(p=this.menuItemComp).setExpanded)||void 0===g||g.call(p,!1),this.eSubMenuGui=void 0},null===(i=(t=this.menuItemComp).setExpanded)||void 0===i||i.call(t,!0)}setAriaExpanded(e){this.suppressAria||_c(this.eGui,e)}closeSubMenu(){!this.hideSubMenu||(this.hideSubMenu(),this.hideSubMenu=null,this.setAriaExpanded(!1))}isSubMenuOpen(){return this.subMenuIsOpen}isSubMenuOpening(){return this.subMenuIsOpening}activate(e){var t,i;this.cancelActivate(),!this.params.disabled&&(this.isActive=!0,this.suppressRootStyles||this.eGui.classList.add(`${this.cssClassPrefix}-active`),null===(i=(t=this.menuItemComp).setActive)||void 0===i||i.call(t,!0),this.suppressFocus||this.eGui.focus({preventScroll:!0}),e&&this.params.subMenu&&window.setTimeout(()=>{this.isAlive()&&this.isActive&&this.openSubMenu()},300),this.onItemActivated())}deactivate(){var e,t;this.cancelDeactivate(),this.suppressRootStyles||this.eGui.classList.remove(`${this.cssClassPrefix}-active`),null===(t=(e=this.menuItemComp).setActive)||void 0===t||t.call(e,!1),this.isActive=!1,this.subMenuIsOpen&&this.hideSubMenu()}getGui(){return this.menuItemComp.getGui()}getParentComponent(){return this.parentComponent}setParentComponent(e){this.parentComponent=e}getSubMenuGui(){return this.eSubMenuGui}onItemSelected(e){var t,i;null===(i=(t=this.menuItemComp).select)||void 0===i||i.call(t),this.params.action?this.getFrameworkOverrides().wrapOutgoing(()=>this.params.action(this.gridOptionsService.addGridCommonParams(Object.assign({},this.contextParams)))):this.openSubMenu(e&&"keydown"===e.type),!(this.params.subMenu&&!this.params.action||this.params.suppressCloseOnSelect)&&this.closeMenu(e)}closeMenu(e){this.dispatchEvent({type:wn.EVENT_CLOSE_MENU,event:e})}onItemActivated(){this.dispatchEvent({type:wn.EVENT_MENU_ITEM_ACTIVATED,menuItem:this})}cancelActivate(){this.activateTimeoutId&&(window.clearTimeout(this.activateTimeoutId),this.activateTimeoutId=0)}cancelDeactivate(){this.deactivateTimeoutId&&(window.clearTimeout(this.deactivateTimeoutId),this.deactivateTimeoutId=0)}onMouseEnter(){this.cancelDeactivate(),this.isAnotherSubMenuOpen()?this.activateTimeoutId=window.setTimeout(()=>this.activate(!0),wn.ACTIVATION_DELAY):this.activate(!0)}onMouseLeave(){this.cancelActivate(),this.isSubMenuOpen()?this.deactivateTimeoutId=window.setTimeout(()=>this.deactivate(),wn.ACTIVATION_DELAY):this.deactivate()}configureDefaults(e){var t,i,n;if(this.tooltip=this.params.tooltip,!this.menuItemComp)return void setTimeout(()=>this.configureDefaults(e));let s=this.menuItemComp.getGui();const o=null===(i=(t=this.menuItemComp).getRootElement)||void 0===i?void 0:i.call(t);o&&(e?.suppressRootStyles||s.classList.add("ag-menu-option-custom"),s=o),this.eGui=s,this.suppressRootStyles=!!e?.suppressRootStyles,this.suppressRootStyles||(s.classList.add(this.cssClassPrefix),null===(n=this.params.cssClasses)||void 0===n||n.forEach(a=>s.classList.add(a)),this.params.disabled&&s.classList.add(`${this.cssClassPrefix}-disabled`)),e?.suppressTooltip||this.setTooltip(),this.suppressAria=!!e?.suppressAria,this.suppressAria||(In(s,"treeitem"),sE(s,this.level+1),this.params.disabled&&rE(s,!0)),e?.suppressTabIndex||s.setAttribute("tabindex","-1"),this.params.disabled||this.addListeners(s,e),this.suppressFocus=!!e?.suppressFocus}updateTooltip(e){this.tooltip=e,!this.tooltipFeature&&this.menuItemComp&&this.setTooltip()}setTooltip(){!this.tooltip||(this.tooltipFeature=this.createManagedBean(new KS({getGui:()=>this.getGui(),getTooltipValue:()=>this.tooltip,getLocation:()=>"menu"},this.beans)),this.tooltipFeature.setComp(this.getGui()))}}wn.EVENT_CLOSE_MENU="closeMenu",wn.EVENT_MENU_ITEM_ACTIVATED="menuItemActivated",wn.ACTIVATION_DELAY=80,ub([P("popupService")],wn.prototype,"popupService",void 0),ub([P("userComponentFactory")],wn.prototype,"userComponentFactory",void 0),ub([P("beans")],wn.prototype,"beans",void 0);var Yv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Xo extends Ne{constructor(e){super(Xo.getTemplate(e)),this.config=e,this.closable=!0}static getTemplate(e){const t=e.cssIdentifier||"default";return`<div class="ag-panel ag-${t}-panel" tabindex="-1">\n            <div ref="eTitleBar" class="ag-panel-title-bar ag-${t}-panel-title-bar ag-unselectable">\n                <span ref="eTitle" class="ag-panel-title-bar-title ag-${t}-panel-title-bar-title"></span>\n                <div ref="eTitleBarButtons" class="ag-panel-title-bar-buttons ag-${t}-panel-title-bar-buttons"></div>\n            </div>\n            <div ref="eContentWrapper" class="ag-panel-content-wrapper ag-${t}-panel-content-wrapper"></div>\n        </div>`}postConstruct(){const{component:e,closable:t,hideTitleBar:i,title:n,minWidth:s=250,width:o,minHeight:a=250,height:c,centered:u,popup:p,x:g,y:m}=this.config;this.positionableFeature=new El(this.getGui(),{minWidth:s,width:o,minHeight:a,height:c,centered:u,x:g,y:m,popup:p,calculateTopBuffer:()=>this.positionableFeature.getHeight()-this.getBodyHeight()}),this.createManagedBean(this.positionableFeature);const y=this.getGui();e&&this.setBodyComponent(e),i?si(this.eTitleBar,!1):(n&&this.setTitle(n),this.setClosable(t??this.closable)),this.addManagedListener(this.eTitleBar,"mousedown",b=>{const _=this.gridOptionsService.getDocument();if(y.contains(b.relatedTarget)||y.contains(_.activeElement)||this.eTitleBarButtons.contains(b.target))return void b.preventDefault();const E=this.eContentWrapper.querySelector("button, [href], input, select, textarea, [tabindex]");E&&E.focus()}),(!p||!this.positionableFeature.isPositioned())&&(this.renderComponent&&this.renderComponent(),this.positionableFeature.initialisePosition(),this.eContentWrapper.style.height="0")}renderComponent(){const e=this.getGui();e.focus(),this.close=()=>{e.parentElement.removeChild(e),this.destroy()}}getHeight(){return this.positionableFeature.getHeight()}setHeight(e){this.positionableFeature.setHeight(e)}getWidth(){return this.positionableFeature.getWidth()}setWidth(e){this.positionableFeature.setWidth(e)}setClosable(e){if(e!==this.closable&&(this.closable=e),e){const t=this.closeButtonComp=new Ne(Xo.CLOSE_BTN_TEMPLATE);this.getContext().createBean(t);const i=t.getGui(),n=Nn("close",this.gridOptionsService);n.classList.add("ag-panel-title-bar-button-icon"),i.appendChild(n),this.addTitleBarButton(t),t.addManagedListener(i,"click",this.onBtClose.bind(this))}else if(this.closeButtonComp){const t=this.closeButtonComp.getGui();t.parentElement.removeChild(t),this.closeButtonComp=this.destroyBean(this.closeButtonComp)}}setBodyComponent(e){e.setParentComponent(this),this.eContentWrapper.appendChild(e.getGui())}addTitleBarButton(e,t){const i=this.eTitleBarButtons,n=i.children,s=n.length;null==t&&(t=s),t=Math.max(0,Math.min(t,s)),e.addCssClass("ag-panel-title-bar-button");const o=e.getGui();0===t?i.insertAdjacentElement("afterbegin",o):t===s?i.insertAdjacentElement("beforeend",o):n[t-1].insertAdjacentElement("afterend",o),e.setParentComponent(this)}getBodyHeight(){return Nd(this.eContentWrapper)}getBodyWidth(){return Ec(this.eContentWrapper)}setTitle(e){this.eTitle.innerText=e}onBtClose(){this.close()}destroy(){this.closeButtonComp&&(this.closeButtonComp=this.destroyBean(this.closeButtonComp));const e=this.getGui();e&&Fn(e)&&this.close(),super.destroy()}}Xo.CLOSE_BTN_TEMPLATE='<div class="ag-button"></div>',Yv([re("eContentWrapper")],Xo.prototype,"eContentWrapper",void 0),Yv([re("eTitleBar")],Xo.prototype,"eTitleBar",void 0),Yv([re("eTitleBarButtons")],Xo.prototype,"eTitleBarButtons",void 0),Yv([re("eTitle")],Xo.prototype,"eTitle",void 0),Yv([Se],Xo.prototype,"postConstruct",null);class ng extends Xo{constructor(e){super(Object.assign(Object.assign({},e),{popup:!0})),this.isMaximizable=!1,this.isMaximized=!1,this.maximizeListeners=[],this.resizeListenerDestroy=null,this.lastPosition={x:0,y:0,width:0,height:0}}postConstruct(){const e=this.getGui(),{movable:t,resizable:i,maximizable:n}=this.config;this.addCssClass("ag-dialog"),super.postConstruct(),this.addManagedListener(e,"focusin",s=>{e.contains(s.relatedTarget)||this.popupService.bringPopupToFront(e)}),t&&this.setMovable(t),n&&this.setMaximizable(n),i&&this.setResizable(i)}renderComponent(){const e=this.getGui(),{alwaysOnTop:t,modal:i,title:n,afterGuiAttached:s}=this.config,o=this.localeService.getLocaleTextFunc(),a=this.popupService.addPopup({modal:i,eChild:e,closeOnEsc:!0,closedCallback:this.onClosed.bind(this),alwaysOnTop:t,ariaLabel:n||o("ariaLabelDialog","Dialog"),afterGuiAttached:s});a&&(this.close=a.hideFunc)}onClosed(e){var t,i;this.destroy(),null===(i=(t=this.config).closedCallback)||void 0===i||i.call(t,e)}toggleMaximize(){const e=this.positionableFeature.getPosition();if(this.isMaximized){const{x:t,y:i,width:n,height:s}=this.lastPosition;this.setWidth(n),this.setHeight(s),this.positionableFeature.offsetElement(t,i)}else this.lastPosition.width=this.getWidth(),this.lastPosition.height=this.getHeight(),this.lastPosition.x=e.x,this.lastPosition.y=e.y,this.positionableFeature.offsetElement(0,0),this.setHeight("100%"),this.setWidth("100%");this.isMaximized=!this.isMaximized,this.refreshMaximizeIcon()}refreshMaximizeIcon(){si(this.maximizeIcon,!this.isMaximized),si(this.minimizeIcon,this.isMaximized)}clearMaximizebleListeners(){this.maximizeListeners.length&&(this.maximizeListeners.forEach(e=>e()),this.maximizeListeners.length=0),this.resizeListenerDestroy&&(this.resizeListenerDestroy(),this.resizeListenerDestroy=null)}destroy(){this.maximizeButtonComp=this.destroyBean(this.maximizeButtonComp),this.clearMaximizebleListeners(),super.destroy()}setResizable(e){this.positionableFeature.setResizable(e)}setMovable(e){this.positionableFeature.setMovable(e,this.eTitleBar)}setMaximizable(e){if(!e)return this.clearMaximizebleListeners(),void(this.maximizeButtonComp&&(this.destroyBean(this.maximizeButtonComp),this.maximizeButtonComp=this.maximizeIcon=this.minimizeIcon=void 0));const t=this.eTitleBar;if(!t||e===this.isMaximizable)return;const i=this.buildMaximizeAndMinimizeElements();this.refreshMaximizeIcon(),i.addManagedListener(i.getGui(),"click",this.toggleMaximize.bind(this)),this.addTitleBarButton(i,0),this.maximizeListeners.push(this.addManagedListener(t,"dblclick",this.toggleMaximize.bind(this))),this.resizeListenerDestroy=this.addManagedListener(this,"resize",()=>{this.isMaximized=!1,this.refreshMaximizeIcon()})}buildMaximizeAndMinimizeElements(){const e=this.maximizeButtonComp=this.createBean(new Ne('<div class="ag-dialog-button"></span>')),t=e.getGui();return this.maximizeIcon=Nn("maximize",this.gridOptionsService),t.appendChild(this.maximizeIcon),this.maximizeIcon.classList.add("ag-panel-title-bar-button-icon"),this.minimizeIcon=Nn("minimize",this.gridOptionsService),t.appendChild(this.minimizeIcon),this.minimizeIcon.classList.add("ag-panel-title-bar-button-icon"),e}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([P("popupService")],ng.prototype,"popupService",void 0);var nu,sg=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},Gc=(()=>(function(r){r[r.vertical=0]="vertical",r[r.horizontal=1]="horizontal"}(Gc||(Gc={})),Gc))();let XP=0,Vc=nu=class extends Ee{constructor(){super(...arguments),this.popupList=[]}postConstruct(){this.ctrlsService.whenReady(e=>{this.gridCtrl=e.gridCtrl}),this.addManagedListener(this.eventService,G.EVENT_GRID_STYLES_CHANGED,this.handleThemeChange.bind(this))}getPopupParent(){return this.gridOptionsService.get("popupParent")||this.gridCtrl.getGui()}positionPopupForMenu(e){const{eventSource:t,ePopup:i}=e,n=this.getPopupIndex(i);-1!==n&&(this.popupList[n].alignedToElement=t);const s=t.getBoundingClientRect(),o=this.getParentRect(),a=this.keepXYWithinBounds(i,s.top-o.top,Gc.vertical),c=i.clientWidth>0?i.clientWidth:200;i.style.minWidth=`${c}px`;const p=o.right-o.left-c;let g;function m(){return s.right-o.left-2}function y(){return s.left-o.left-c}this.gridOptionsService.get("enableRtl")?(g=y(),g<0&&(g=m(),this.setAlignedStyles(i,"left")),g>p&&(g=0,this.setAlignedStyles(i,"right"))):(g=m(),g>p&&(g=y(),this.setAlignedStyles(i,"right")),g<0&&(g=0,this.setAlignedStyles(i,"left"))),i.style.left=`${g}px`,i.style.top=`${a}px`}positionPopupUnderMouseEvent(e){const{ePopup:t,nudgeX:i,nudgeY:n,skipObserver:s}=e;this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:!0,skipObserver:s,updatePosition:()=>this.calculatePointerAlign(e.mouseEvent),postProcessCallback:()=>this.callPostProcessPopup(e.type,e.ePopup,null,e.mouseEvent,e.column,e.rowNode)})}calculatePointerAlign(e){const t=this.getParentRect();return{x:e.clientX-t.left,y:e.clientY-t.top}}positionPopupByComponent(e){const{ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:s,eventSource:o,alignSide:a="left",position:c="over",column:u,rowNode:p,type:g}=e,m=o.getBoundingClientRect(),y=this.getParentRect(),b=this.getPopupIndex(t);-1!==b&&(this.popupList[b].alignedToElement=o),this.positionPopup({ePopup:t,nudgeX:i,nudgeY:n,keepWithinBounds:s,updatePosition:()=>{let D,E=m.left-y.left;return"right"===a&&(E-=t.offsetWidth-m.width),"over"===c?(D=m.top-y.top,this.setAlignedStyles(t,"over")):(this.setAlignedStyles(t,"under"),D="under"===this.shouldRenderUnderOrAbove(t,m,y,e.nudgeY||0)?m.top-y.top+m.height:m.top-t.offsetHeight-2*(n||0)-y.top),{x:E,y:D}},postProcessCallback:()=>this.callPostProcessPopup(g,t,o,null,u,p)})}shouldRenderUnderOrAbove(e,t,i,n){const s=i.bottom-t.bottom,o=t.top-i.top,a=e.offsetHeight+n;return s>a?"under":o>a||o>s?"above":"under"}setAlignedStyles(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const n=this.popupList[i],{alignedToElement:s}=n;!s||(["right","left","over","above","under"].forEach(a=>{s.classList.remove(`ag-has-popup-positioned-${a}`),e.classList.remove(`ag-popup-positioned-${a}`)}),!t)||(s.classList.add(`ag-has-popup-positioned-${t}`),e.classList.add(`ag-popup-positioned-${t}`))}callPostProcessPopup(e,t,i,n,s,o){const a=this.gridOptionsService.getCallback("postProcessPopup");a&&a({column:s,rowNode:o,ePopup:t,type:e,eventSource:i,mouseEvent:n})}positionPopup(e){const{ePopup:t,keepWithinBounds:i,nudgeX:n,nudgeY:s,skipObserver:o,updatePosition:a}=e,c={width:0,height:0},u=(p=!1)=>{let{x:g,y:m}=a();p&&t.clientWidth===c.width&&t.clientHeight===c.height||(c.width=t.clientWidth,c.height=t.clientHeight,n&&(g+=n),s&&(m+=s),i&&(g=this.keepXYWithinBounds(t,g,Gc.horizontal),m=this.keepXYWithinBounds(t,m,Gc.vertical)),t.style.left=`${g}px`,t.style.top=`${m}px`,e.postProcessCallback&&e.postProcessCallback())};if(u(),!o){const p=this.resizeObserverService.observeResize(t,()=>u(!0));setTimeout(()=>p(),nu.WAIT_FOR_POPUP_CONTENT_RESIZE)}}getActivePopups(){return this.popupList.map(e=>e.element)}getPopupList(){return this.popupList}getParentRect(){const e=this.gridOptionsService.getDocument();let t=this.getPopupParent();return t===e.body?t=e.documentElement:"static"===getComputedStyle(t).position&&(t=t.offsetParent),DS(t)}keepXYWithinBounds(e,t,i){const n=i===Gc.vertical,s=n?"clientHeight":"clientWidth",o=n?"top":"left",a=n?"offsetHeight":"offsetWidth",c=n?"scrollTop":"scrollLeft",u=this.gridOptionsService.getDocument(),p=u.documentElement,g=this.getPopupParent(),m=g.getBoundingClientRect(),y=u.documentElement.getBoundingClientRect(),b=g===u.body,_=e[a];let D=b?(n?ES:Rf)(p)+p[c]:g[s];b&&(D-=Math.abs(y[o]-m[o]));const R=D-_;return Math.min(Math.max(t,0),Math.abs(R))}addPopup(e){const t=this.gridOptionsService.getDocument(),{eChild:i,ariaLabel:n,alwaysOnTop:s,positionCallback:o,anchorToElement:a}=e;if(!t)return console.warn("AG Grid: could not find the document, document is empty"),{hideFunc:()=>{}};const c=this.getPopupIndex(i);if(-1!==c)return{hideFunc:this.popupList[c].hideFunc};this.initialisePopupPosition(i);const u=this.createPopupWrapper(i,n,!!s),p=this.addEventListenersToPopup(Object.assign(Object.assign({},e),{wrapperEl:u}));return o&&o(),this.addPopupToPopupList(i,u,p,a),{hideFunc:p}}initialisePopupPosition(e){const i=this.getPopupParent().getBoundingClientRect();Ie(e.style.top)||(e.style.top=-1*i.top+"px"),Ie(e.style.left)||(e.style.left=-1*i.left+"px")}createPopupWrapper(e,t,i){const n=this.getPopupParent(),s=document.createElement("div"),{allThemes:o}=this.environment.getTheme();return o.length&&s.classList.add(...o),s.classList.add("ag-popup"),e.classList.add(this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr","ag-popup-child"),e.hasAttribute("role")||In(e,"dialog"),bc(e,t),s.appendChild(e),n.appendChild(s),i?this.setAlwaysOnTop(e,!0):this.bringPopupToFront(e),s}handleThemeChange(){const{allThemes:e}=this.environment.getTheme();for(const t of this.popupList){for(const i of Array.from(t.wrapper.classList))i.startsWith("ag-theme-")&&t.wrapper.classList.remove(i);e.length&&t.wrapper.classList.add(...e)}}addEventListenersToPopup(e){const t=this.gridOptionsService.getDocument(),i=this.getPopupParent(),{wrapperEl:n,eChild:s,closedCallback:a,afterGuiAttached:c,closeOnEsc:u,modal:p}=e;let g=!1;const m=E=>{n.contains(t.activeElement)&&E.key===ge.ESCAPE&&!yl(E)&&_({keyboardEvent:E})},y=E=>_({mouseEvent:E}),b=E=>_({touchEvent:E}),_=(E={})=>{const{mouseEvent:D,touchEvent:R,keyboardEvent:O}=E;this.isEventFromCurrentPopup({mouseEvent:D,touchEvent:R},s)||g||(g=!0,i.removeChild(n),t.removeEventListener("keydown",m),t.removeEventListener("mousedown",y),t.removeEventListener("touchstart",b),t.removeEventListener("contextmenu",y),this.eventService.removeEventListener(G.EVENT_DRAG_STARTED,y),a&&a(D||R||O),this.removePopupFromPopupList(s))};return c&&c({hidePopup:_}),window.setTimeout(()=>{u&&t.addEventListener("keydown",m),p&&(t.addEventListener("mousedown",y),this.eventService.addEventListener(G.EVENT_DRAG_STARTED,y),t.addEventListener("touchstart",b),t.addEventListener("contextmenu",y))},0),_}addPopupToPopupList(e,t,i,n){this.popupList.push({element:e,wrapper:t,hideFunc:i,instanceId:XP++,isAnchored:!!n}),n&&this.setPopupPositionRelatedToElement(e,n)}getPopupIndex(e){return this.popupList.findIndex(t=>t.element===e)}setPopupPositionRelatedToElement(e,t){const i=this.getPopupIndex(e);if(-1===i)return;const n=this.popupList[i];if(n.stopAnchoringPromise&&n.stopAnchoringPromise.then(o=>o&&o()),n.stopAnchoringPromise=void 0,n.isAnchored=!1,!t)return;const s=this.keepPopupPositionedRelativeTo({element:t,ePopup:e,hidePopup:n.hideFunc});return n.stopAnchoringPromise=s,n.isAnchored=!0,s}removePopupFromPopupList(e){this.setAlignedStyles(e,null),this.setPopupPositionRelatedToElement(e,null),this.popupList=this.popupList.filter(t=>t.element!==e)}keepPopupPositionedRelativeTo(e){const t=this.getPopupParent(),i=t.getBoundingClientRect(),{element:n,ePopup:s}=e,o=n.getBoundingClientRect(),a=i.top-o.top,c=i.left-o.left;let u=a,p=c;const g=s.style.top,m=parseInt(g.substring(0,g.length-1),10),y=s.style.left,b=parseInt(y.substring(0,y.length-1),10);return new $t(_=>{this.getFrameworkOverrides().setInterval(()=>{const E=t.getBoundingClientRect(),D=n.getBoundingClientRect();if(0==D.top&&0==D.left&&0==D.height&&0==D.width)return void e.hidePopup();const O=E.top-D.top;if(O!=u){const k=this.keepXYWithinBounds(s,m+a-O,Gc.vertical);s.style.top=`${k}px`}u=O;const L=E.left-D.left;if(L!=p){const k=this.keepXYWithinBounds(s,b+c-L,Gc.horizontal);s.style.left=`${k}px`}p=L},200).then(E=>{_(()=>{null!=E&&window.clearInterval(E)})})})}hasAnchoredPopup(){return this.popupList.some(e=>e.isAnchored)}isEventFromCurrentPopup(e,t){const{mouseEvent:i,touchEvent:n}=e,s=i||n;if(!s)return!1;const o=this.getPopupIndex(t);if(-1===o)return!1;for(let a=o;a<this.popupList.length;a++)if(aS(this.popupList[a].element,s))return!0;return this.isElementWithinCustomPopup(s.target)}isElementWithinCustomPopup(e){const t=this.gridOptionsService.getDocument();for(;e&&e!==t.body;){if(e.classList.contains("ag-custom-component-popup")||null===e.parentElement)return!0;e=e.parentElement}return!1}getWrapper(e){for(;!e.classList.contains("ag-popup")&&e.parentElement;)e=e.parentElement;return e.classList.contains("ag-popup")?e:null}setAlwaysOnTop(e,t){const i=this.getWrapper(e);!i||(i.classList.toggle("ag-always-on-top",!!t),t&&this.bringPopupToFront(i))}bringPopupToFront(e){const t=this.getPopupParent(),i=Array.prototype.slice.call(t.querySelectorAll(".ag-popup")),n=i.length,s=Array.prototype.slice.call(t.querySelectorAll(".ag-popup.ag-always-on-top")),o=s.length,a=this.getWrapper(e);if(!a||n<=1||!t.contains(e))return;const c=i.indexOf(a),u=a.querySelectorAll("div"),p=[];for(u.forEach(m=>{0!==m.scrollTop&&p.push([m,m.scrollTop])}),o?a.classList.contains("ag-always-on-top")?c!==n-1&&Xt(s).insertAdjacentElement("afterend",a):c!==n-o-1&&s[0].insertAdjacentElement("beforebegin",a):c!==n-1&&Xt(i).insertAdjacentElement("afterend",a);p.length;){const m=p.pop();m[0].scrollTop=m[1]}this.eventService.dispatchEvent({type:"popupToFront",eWrapper:a})}};Vc.WAIT_FOR_POPUP_CONTENT_RESIZE=200,sg([P("focusService")],Vc.prototype,"focusService",void 0),sg([P("ctrlsService")],Vc.prototype,"ctrlsService",void 0),sg([P("resizeObserverService")],Vc.prototype,"resizeObserverService",void 0),sg([Se],Vc.prototype,"postConstruct",null),Vc=nu=sg([He("popupService")],Vc);class ZP extends Ne{constructor(){super('\n        <div class="ag-autocomplete-row" role="presentation">\n            <div class="ag-autocomplete-row-label"></div>\n        </div>'),this.hasHighlighting=!1}setState(e,t){this.value=e,this.render(),this.updateSelected(t)}updateSelected(e){this.addOrRemoveCssClass("ag-autocomplete-row-selected",e)}setSearchString(e){var t;let i=!1;if(Ie(e)){const n=null===(t=this.value)||void 0===t?void 0:t.toLocaleLowerCase().indexOf(e.toLocaleLowerCase());if(n>=0){i=!0,this.hasHighlighting=!0;const s=n+e.length,o=yn(this.value.slice(0,n)),a=yn(this.value.slice(n,s)),c=yn(this.value.slice(s));this.getGui().lastElementChild.innerHTML=`${o}<b>${a}</b>${c}`}}!i&&this.hasHighlighting&&(this.hasHighlighting=!1,this.render())}render(){var e;this.getGui().lastElementChild.innerHTML=null!==(e=yn(this.value))&&void 0!==e?e:"&nbsp;"}}var C0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class qv extends Vd{constructor(e){super(qv.TEMPLATE),this.params=e,this.searchString=""}destroy(){super.destroy()}init(){this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList=this.createManagedBean(new qo({cssIdentifier:"autocomplete"})),this.virtualList.setComponentCreator(this.createRowComponent.bind(this)),this.eList.appendChild(this.virtualList.getGui()),this.virtualList.setModel({getRowCount:()=>this.autocompleteEntries.length,getRow:t=>this.autocompleteEntries[t]});const e=this.virtualList.getGui();this.addManagedListener(e,"click",()=>this.params.onConfirmed()),this.addManagedListener(e,"mousemove",this.onMouseMove.bind(this)),this.addManagedListener(e,"mousedown",t=>t.preventDefault()),this.setSelectedValue(0)}onNavigationKeyDown(e,t){e.preventDefault();const i=this.autocompleteEntries.indexOf(this.selectedValue);this.checkSetSelectedValue(t===ge.UP?i-1:i+1)}setSearch(e){this.searchString=e,Ie(e)?this.runSearch():(this.autocompleteEntries=this.params.autocompleteEntries,this.virtualList.refresh(),this.checkSetSelectedValue(0)),this.updateSearchInList()}runContainsSearch(e,t){let i,n=!1;const s=e.toLocaleLowerCase(),o=t.filter(a=>{const u=a.toLocaleLowerCase().indexOf(s),p=0===u,g=u>=0;return g&&(!i||!n&&p||n===p&&a.length<i.length)&&(i=a,n=p),g});return!i&&o.length&&(i=o[0]),{topMatch:i,allMatches:o}}runSearch(){var e,t;const{autocompleteEntries:i}=this.params,n=i.map(u=>{var p;return null!==(p=u.displayValue)&&void 0!==p?p:u.key});let s,o;if(this.params.useFuzzySearch)s=OS(this.searchString,n,!0).values,o=s.length?s[0]:void 0;else{const u=this.runContainsSearch(this.searchString,n);s=u.allMatches,o=u.topMatch}let a=i.filter(({key:u,displayValue:p})=>s.includes(p??u));if(!a.length&&this.selectedValue&&(null===(t=null===(e=this.params)||void 0===e?void 0:e.forceLastSelection)||void 0===t?void 0:t.call(e,this.selectedValue,this.searchString))&&(a=[this.selectedValue]),this.autocompleteEntries=a,this.virtualList.refresh(),!o)return;const c=s.indexOf(o);this.checkSetSelectedValue(c)}updateSearchInList(){this.virtualList.forEachRenderedRow(e=>e.setSearchString(this.searchString))}checkSetSelectedValue(e){e>=0&&e<this.autocompleteEntries.length&&this.setSelectedValue(e)}setSelectedValue(e){const t=this.autocompleteEntries[e];this.selectedValue!==t&&(this.selectedValue=t,this.virtualList.ensureIndexVisible(e),this.virtualList.forEachRenderedRow((i,n)=>{i.updateSelected(e===n)}))}createRowComponent(e){var t;const i=new ZP;return this.getContext().createBean(i),i.setState(null!==(t=e.displayValue)&&void 0!==t?t:e.key,e===this.selectedValue),i}onMouseMove(e){const t=this.virtualList.getGui().getBoundingClientRect(),i=this.virtualList.getScrollTop(),s=Math.floor((e.clientY-t.top+i)/this.virtualList.getRowHeight());this.checkSetSelectedValue(s)}afterGuiAttached(){this.virtualList.refresh()}getSelectedValue(){var e;return this.autocompleteEntries.length&&null!==(e=this.selectedValue)&&void 0!==e?e:null}}qv.TEMPLATE='<div class="ag-autocomplete-list-popup">\n            <div ref="eList" class="ag-autocomplete-list"></div>\n        <div>',C0([re("eList")],qv.prototype,"eList",void 0),C0([Se],qv.prototype,"init",null);var Xv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Sr extends Ne{constructor(){super('\n            <div class="ag-autocomplete" role="presentation">\n                <ag-input-text-field ref="eAutocompleteInput"></ag-input-text-field>\n            </div>'),this.isListOpen=!1,this.lastPosition=0,this.valid=!0}postConstruct(){this.eAutocompleteInput.onValueChange(e=>this.onValueChanged(e)),this.eAutocompleteInput.getInputElement().setAttribute("autocomplete","off"),this.addGuiEventListener("keydown",this.onKeyDown.bind(this)),this.addGuiEventListener("click",this.updatePositionAndList.bind(this)),this.addDestroyFunc(()=>{this.destroyBean(this.autocompleteList)}),this.addGuiEventListener("focusout",()=>this.onFocusOut())}onValueChanged(e){const t=fr(e);this.updateValue(t),this.updateAutocompleteList(t)}updateValue(e){this.updateLastPosition(),this.dispatchEvent({type:Sr.EVENT_VALUE_CHANGED,value:e}),this.validate(e)}updateAutocompleteList(e){var t,i,n,s;const o=null!==(i=null===(t=this.listGenerator)||void 0===t?void 0:t.call(this,e,this.lastPosition))&&void 0!==i?i:{enabled:!1};if((!o.type||o.type!==(null===(n=this.autocompleteListParams)||void 0===n?void 0:n.type))&&this.isListOpen&&this.closeList(),this.autocompleteListParams=o,null!==(s=this.autocompleteListParams)&&void 0!==s&&s.enabled){this.isListOpen||this.openList();const{searchString:a}=this.autocompleteListParams;this.autocompleteList.setSearch(a??"")}else this.isListOpen&&this.closeList()}onKeyDown(e){const t=e.key;switch(this.updateLastPosition(),t){case ge.ENTER:this.onEnterKeyDown(e);break;case ge.TAB:this.onTabKeyDown(e);break;case ge.DOWN:case ge.UP:this.onUpDownKeyDown(e,t);break;case ge.LEFT:case ge.RIGHT:case ge.PAGE_HOME:case ge.PAGE_END:setTimeout(()=>{this.updatePositionAndList()});break;case ge.ESCAPE:this.onEscapeKeyDown(e);break;case ge.SPACE:e.ctrlKey&&!this.isListOpen&&(e.preventDefault(),this.forceOpenList())}}confirmSelection(){var e;const t=null===(e=this.autocompleteList)||void 0===e?void 0:e.getSelectedValue();t&&(this.closeList(),this.dispatchEvent({type:Sr.EVENT_OPTION_SELECTED,value:this.getValue(),position:this.lastPosition,updateEntry:t,autocompleteType:this.autocompleteListParams.type}))}onTabKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.confirmSelection())}onEnterKeyDown(e){e.preventDefault(),this.isListOpen?this.confirmSelection():this.onCompleted()}onUpDownKeyDown(e,t){var i;e.preventDefault(),this.isListOpen?null===(i=this.autocompleteList)||void 0===i||i.onNavigationKeyDown(e,t):this.forceOpenList()}onEscapeKeyDown(e){this.isListOpen&&(e.preventDefault(),e.stopPropagation(),this.closeList(),this.setCaret(this.lastPosition,!0))}onFocusOut(){this.isListOpen&&this.closeList()}updatePositionAndList(){var e;this.updateLastPosition(),this.updateAutocompleteList(null!==(e=this.eAutocompleteInput.getValue())&&void 0!==e?e:null)}setCaret(e,t){const i=this.gridOptionsService.getDocument();t&&i.activeElement===i.body&&this.eAutocompleteInput.getFocusableElement().focus();const n=this.eAutocompleteInput.getInputElement();n.setSelectionRange(e,e),e===n.value.length&&(n.scrollLeft=n.scrollWidth)}forceOpenList(){this.onValueChanged(this.eAutocompleteInput.getValue())}updateLastPosition(){var e;this.lastPosition=null!==(e=this.eAutocompleteInput.getInputElement().selectionStart)&&void 0!==e?e:0}validate(e){var t;!this.validator||(this.validationMessage=this.validator(e),this.eAutocompleteInput.getInputElement().setCustomValidity(null!==(t=this.validationMessage)&&void 0!==t?t:""),this.valid=!this.validationMessage,this.dispatchEvent({type:Sr.EVENT_VALID_CHANGED,isValid:this.valid,validationMessage:this.validationMessage}))}openList(){this.isListOpen=!0,this.autocompleteList=this.createBean(new qv({autocompleteEntries:this.autocompleteListParams.entries,onConfirmed:()=>this.confirmSelection(),forceLastSelection:this.forceLastSelection}));const e=this.autocompleteList.getGui(),t={ePopup:e,type:"autocomplete",eventSource:this.getGui(),position:"under",alignSide:this.gridOptionsService.get("enableRtl")?"right":"left",keepWithinBounds:!0},i=this.popupService.addPopup({eChild:e,anchorToElement:this.getGui(),positionCallback:()=>this.popupService.positionPopupByComponent(t),ariaLabel:this.listAriaLabel});this.hidePopup=i.hideFunc,this.autocompleteList.afterGuiAttached()}closeList(){this.isListOpen=!1,this.hidePopup(),this.destroyBean(this.autocompleteList),this.autocompleteList=null}onCompleted(){this.isListOpen&&this.closeList(),this.dispatchEvent({type:Sr.EVENT_VALUE_CONFIRMED,value:this.getValue(),isValid:this.isValid()})}getValue(){return fr(this.eAutocompleteInput.getValue())}setInputPlaceholder(e){return this.eAutocompleteInput.setInputPlaceholder(e),this}setInputAriaLabel(e){return this.eAutocompleteInput.setInputAriaLabel(e),this}setListAriaLabel(e){return this.listAriaLabel=e,this}setListGenerator(e){return this.listGenerator=e,this}setValidator(e){return this.validator=e,this}isValid(){return this.valid}setValue(e){const{value:t,position:i,silent:n,updateListOnlyIfOpen:s,restoreFocus:o}=e;this.eAutocompleteInput.setValue(t,!0),this.setCaret(i??this.lastPosition,o),n||this.updateValue(t),(!s||this.isListOpen)&&this.updateAutocompleteList(t)}setForceLastSelection(e){return this.forceLastSelection=e,this}setInputDisabled(e){return this.eAutocompleteInput.setDisabled(e),this}}Sr.EVENT_VALUE_CHANGED="eventValueChanged",Sr.EVENT_VALUE_CONFIRMED="eventValueConfirmed",Sr.EVENT_OPTION_SELECTED="eventOptionSelected",Sr.EVENT_VALID_CHANGED="eventValidChanged",Xv([P("popupService")],Sr.prototype,"popupService",void 0),Xv([re("eAutocompleteInput")],Sr.prototype,"eAutocompleteInput",void 0),Xv([Se],Sr.prototype,"postConstruct",null);const Nl=["touchstart","touchend","touchmove","touchcancel"];class xA{constructor(e="javascript"){this.frameworkName=e,this.renderingEngine="vanilla",this.wrapIncoming=t=>t(),this.wrapOutgoing=t=>t()}setInterval(e,t){return new $t(i=>{i(window.setInterval(e,t))})}addEventListener(e,t,i,n){const s=Go(Nl,t);e.addEventListener(t,i,{capture:!!n,passive:s})}get shouldWrapOutgoing(){return!1}frameworkComponent(e){return null}isFrameworkComponent(e){return!1}getDocLink(e){return`https://www.ag-grid.com/${"solid"===this.frameworkName?"react":this.frameworkName}-data-grid${e?`/${e}`:""}`}}var qh=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Ls=class extends Ee{getNextCellToFocus(e,t,i=!1){return i?this.getNextCellToFocusWithCtrlPressed(e,t):this.getNextCellToFocusWithoutCtrlPressed(e,t)}getNextCellToFocusWithCtrlPressed(e,t){const i=e===ge.UP,s=e===ge.LEFT;let o,a;if(i||e===ge.DOWN)a=i?this.paginationProxy.getPageFirstRow():this.paginationProxy.getPageLastRow(),o=t.column;else{const c=this.columnModel.getAllDisplayedColumns(),u=this.gridOptionsService.get("enableRtl");a=t.rowIndex,o=s!==u?c[0]:Xt(c)}return{rowIndex:a,rowPinned:null,column:o}}getNextCellToFocusWithoutCtrlPressed(e,t){let i=t,n=!1;for(;!n;){switch(e){case ge.UP:i=this.getCellAbove(i);break;case ge.DOWN:i=this.getCellBelow(i);break;case ge.RIGHT:i=this.gridOptionsService.get("enableRtl")?this.getCellToLeft(i):this.getCellToRight(i);break;case ge.LEFT:i=this.gridOptionsService.get("enableRtl")?this.getCellToRight(i):this.getCellToLeft(i);break;default:i=null,console.warn("AG Grid: unknown key for navigation "+e)}n=!i||this.isCellGoodToFocusOn(i)}return i}isCellGoodToFocusOn(e){const t=e.column;let i;switch(e.rowPinned){case"top":i=this.pinnedRowModel.getPinnedTopRow(e.rowIndex);break;case"bottom":i=this.pinnedRowModel.getPinnedBottomRow(e.rowIndex);break;default:i=this.rowModel.getRow(e.rowIndex)}return!!i&&!t.isSuppressNavigable(i)}getCellToLeft(e){if(!e)return null;const t=this.columnModel.getDisplayedColBefore(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getCellToRight(e){if(!e)return null;const t=this.columnModel.getDisplayedColAfter(e.column);return t?{rowIndex:e.rowIndex,column:t,rowPinned:e.rowPinned}:null}getRowBelow(e){const t=e.rowIndex,i=e.rowPinned;if(this.isLastRowInContainer(e))switch(i){case"bottom":return null;case"top":return this.rowModel.isRowsToRender()?{rowIndex:this.paginationProxy.getPageFirstRow(),rowPinned:null}:this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null;default:return this.pinnedRowModel.isRowsToRender("bottom")?{rowIndex:0,rowPinned:"bottom"}:null}const n=this.rowModel.getRow(e.rowIndex);return this.getNextStickyPosition(n)||{rowIndex:t+1,rowPinned:i}}getNextStickyPosition(e,t){if(!this.gridOptionsService.isGroupRowsSticky()||!e||!e.sticky)return;const i=[...this.rowRenderer.getStickyTopRowCtrls()].sort((a,c)=>a.getRowNode().rowIndex-c.getRowNode().rowIndex),n=t?-1:1,s=i.findIndex(a=>a.getRowNode().rowIndex===e.rowIndex),o=i[s+n];return o?{rowIndex:o.getRowNode().rowIndex,rowPinned:null}:void 0}getCellBelow(e){if(!e)return null;const t=this.getRowBelow(e);return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}isLastRowInContainer(e){const t=e.rowPinned,i=e.rowIndex;return"top"===t?this.pinnedRowModel.getPinnedTopRowData().length-1<=i:"bottom"===t?this.pinnedRowModel.getPinnedBottomRowData().length-1<=i:this.paginationProxy.getPageLastRow()<=i}getRowAbove(e){const t=e.rowIndex,i=e.rowPinned;if(i?0===t:t===this.paginationProxy.getPageFirstRow())return"top"===i?null:i&&this.rowModel.isRowsToRender()?this.getLastBodyCell():this.pinnedRowModel.isRowsToRender("top")?this.getLastFloatingTopRow():null;const s=this.rowModel.getRow(e.rowIndex);return this.getNextStickyPosition(s,!0)||{rowIndex:t-1,rowPinned:i}}getCellAbove(e){if(!e)return null;const t=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});return t?{rowIndex:t.rowIndex,column:e.column,rowPinned:t.rowPinned}:null}getLastBodyCell(){return{rowIndex:this.paginationProxy.getPageLastRow(),rowPinned:null}}getLastFloatingTopRow(){return{rowIndex:this.pinnedRowModel.getPinnedTopRowData().length-1,rowPinned:"top"}}getNextTabbedCell(e,t){return t?this.getNextTabbedCellBackwards(e):this.getNextTabbedCellForwards(e)}getNextTabbedCellForwards(e){const t=this.columnModel.getAllDisplayedColumns();let i=e.rowIndex,n=e.rowPinned,s=this.columnModel.getDisplayedColAfter(e.column);if(!s){s=t[0];const o=this.getRowBelow(e);if(gt(o)||!o.rowPinned&&!this.paginationProxy.isRowInPage(o))return null;i=o?o.rowIndex:null,n=o?o.rowPinned:null}return{rowIndex:i,column:s,rowPinned:n}}getNextTabbedCellBackwards(e){const t=this.columnModel.getAllDisplayedColumns();let i=e.rowIndex,n=e.rowPinned,s=this.columnModel.getDisplayedColBefore(e.column);if(!s){s=Xt(t);const o=this.getRowAbove({rowIndex:e.rowIndex,rowPinned:e.rowPinned});if(gt(o)||!o.rowPinned&&!this.paginationProxy.isRowInPage(o))return null;i=o?o.rowIndex:null,n=o?o.rowPinned:null}return{rowIndex:i,column:s,rowPinned:n}}};qh([P("columnModel")],Ls.prototype,"columnModel",void 0),qh([P("rowModel")],Ls.prototype,"rowModel",void 0),qh([P("rowRenderer")],Ls.prototype,"rowRenderer",void 0),qh([P("pinnedRowModel")],Ls.prototype,"pinnedRowModel",void 0),qh([P("paginationProxy")],Ls.prototype,"paginationProxy",void 0),Ls=qh([He("cellNavigationService")],Ls);var br=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let su=class extends Ee{constructor(){super(...arguments),this.consuming=!1}setBeans(e){this.logger=e.create("AlignedGridsService")}getAlignedGridApis(){var e;let t=null!==(e=this.gridOptionsService.get("alignedGrids"))&&void 0!==e?e:[];const i="function"==typeof t;"function"==typeof t&&(t=t());const n=()=>`See ${this.getFrameworkOverrides().getDocLink("aligned-grids")}`;return t.map(o=>{var a;if(!o)return hs("alignedGrids contains an undefined option."),i||hs('You may want to configure via a callback to avoid setup race conditions:\n                     "alignedGrids: () => [linkedGrid]"'),void hs(n());if(o instanceof Vt)return o;const c=o;return"current"in c?null===(a=c.current)||void 0===a?void 0:a.api:(c.api||hs(`alignedGrids - No api found on the linked grid. If you are passing gridOptions to alignedGrids since v31 this is no longer valid. ${n()}`),c.api)}).filter(o=>!!o&&!o.isDestroyed())}init(){this.addManagedListener(this.eventService,G.EVENT_COLUMN_MOVED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_VISIBLE,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PINNED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_GROUP_OPENED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_RESIZED,this.fireColumnEvent.bind(this)),this.addManagedListener(this.eventService,G.EVENT_BODY_SCROLL,this.fireScrollEvent.bind(this))}fireEvent(e){this.consuming||this.getAlignedGridApis().forEach(t=>{const i=t.__getAlignedGridService();e(i)})}onEvent(e){this.consuming=!0,e(),this.consuming=!1}fireColumnEvent(e){this.fireEvent(t=>{t.onColumnEvent(e)})}fireScrollEvent(e){"horizontal"===e.direction&&this.fireEvent(t=>{t.onScrollEvent(e)})}onScrollEvent(e){this.onEvent(()=>{this.ctrlsService.getGridBodyCtrl().getScrollFeature().setHorizontalScrollPosition(e.left,!0)})}getMasterColumns(e){const t=[];return e.columns?e.columns.forEach(i=>{t.push(i)}):e.column&&t.push(e.column),t}getColumnIds(e){const t=[];return e.columns?e.columns.forEach(i=>{t.push(i.getColId())}):e.column&&t.push(e.column.getColId()),t}onColumnEvent(e){this.onEvent(()=>{switch(e.type){case G.EVENT_COLUMN_MOVED:case G.EVENT_COLUMN_VISIBLE:case G.EVENT_COLUMN_PINNED:case G.EVENT_COLUMN_RESIZED:this.processColumnEvent(e);break;case G.EVENT_COLUMN_GROUP_OPENED:this.processGroupOpenedEvent(e);break;case G.EVENT_COLUMN_PIVOT_CHANGED:console.warn("AG Grid: pivoting is not supported with aligned grids. You can only use one of these features at a time in a grid.")}})}processGroupOpenedEvent(e){e.columnGroups.forEach(t=>{let i=null;if(t){const n=t.getGroupId();i=this.columnModel.getProvidedColumnGroup(n)}t&&!i||(this.logger.log("onColumnEvent-> processing "+e+" expanded = "+t.isExpanded()),this.columnModel.setColumnGroupOpened(i,t.isExpanded(),"alignedGridChanged"))})}processColumnEvent(e){var t;const i=e.column;let n=null;if(i&&(n=this.columnModel.getPrimaryColumn(i.getColId())),i&&!n)return;const s=this.getMasterColumns(e);switch(e.type){case G.EVENT_COLUMN_MOVED:{const p=e,m=e.api.getColumnState().map(y=>({colId:y.colId}));this.columnModel.applyColumnState({state:m,applyOrder:!0},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} toIndex = ${p.toIndex}`)}break;case G.EVENT_COLUMN_VISIBLE:{const p=e,m=e.api.getColumnState().map(y=>({colId:y.colId,hide:y.hide}));this.columnModel.applyColumnState({state:m},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} visible = ${p.visible}`)}break;case G.EVENT_COLUMN_PINNED:{const p=e,m=e.api.getColumnState().map(y=>({colId:y.colId,pinned:y.pinned}));this.columnModel.applyColumnState({state:m},"alignedGridChanged"),this.logger.log(`onColumnEvent-> processing ${e.type} pinned = ${p.pinned}`)}break;case G.EVENT_COLUMN_RESIZED:const c=e,u={};s.forEach(p=>{this.logger.log(`onColumnEvent-> processing ${e.type} actualWidth = ${p.getActualWidth()}`),u[p.getId()]={key:p.getColId(),newWidth:p.getActualWidth()}}),null===(t=c.flexColumns)||void 0===t||t.forEach(p=>{u[p.getId()]&&delete u[p.getId()]}),this.columnModel.setColumnWidths(Object.values(u),!1,c.finished,"alignedGridChanged")}const a=this.ctrlsService.getGridBodyCtrl().isVerticalScrollShowing();this.getAlignedGridApis().forEach(c=>{c.setGridOption("alwaysShowVerticalScroll",a)})}};br([P("columnModel")],su.prototype,"columnModel",void 0),br([P("ctrlsService")],su.prototype,"ctrlsService",void 0),br([function(r,e){return function(t,i){e(t,i,0)}}(0,Cl("loggerFactory"))],su.prototype,"setBeans",null),br([Se],su.prototype,"init",null),su=br([He("alignedGridsService")],su);var Zv=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Xh=class extends Ee{constructor(){super(...arguments),this.selectedNodes=new Map,this.lastRowNode=null}init(){this.rowSelection=this.gridOptionsService.get("rowSelection"),this.groupSelectsChildren=this.gridOptionsService.get("groupSelectsChildren"),this.addManagedPropertyListeners(["groupSelectsChildren","rowSelection"],()=>{this.groupSelectsChildren=this.gridOptionsService.get("groupSelectsChildren"),this.rowSelection=this.gridOptionsService.get("rowSelection"),this.deselectAllRowNodes({source:"api"})}),this.addManagedListener(this.eventService,G.EVENT_ROW_SELECTED,this.onRowSelected.bind(this))}destroy(){super.destroy(),this.resetNodes(),this.lastRowNode=null}isMultiselect(){return"multiple"===this.rowSelection}setNodesSelected(e){var t;const{newValue:i,clearSelection:n,suppressFinishActions:s,rangeSelect:o,nodes:a,event:c,source:u="api"}=e;if(0===a.length)return 0;if(a.length>1&&!this.isMultiselect())return console.warn("AG Grid: cannot multi select while rowSelection='single'"),0;const p=this.groupSelectsChildren&&!0===e.groupSelectsFiltered,g=a.map(y=>y.footer?y.sibling:y);if(o){if(a.length>1)return console.warn("AG Grid: cannot range select while selecting multiple rows"),0;let y=null;if("checkboxSelected"===u&&!1===i&&this.lastRowNode&&(this.lastRowNode.id?y=this.lastRowNode:this.lastRowNode=null),null==y&&(y=this.getLastSelectedNode()),y){const b=g[0];if(b!==y&&this.isMultiselect())return this.selectRange(b,y,i,u)}}this.lastRowNode=i?null:g[0];let m=0;for(let y=0;y<g.length;y++){const b=g[y];p&&b.group||b.selectThisNode(i,c,u)&&m++,this.groupSelectsChildren&&(null===(t=b.childrenAfterGroup)||void 0===t?void 0:t.length)&&(m+=this.selectChildren(b,i,p,u))}return!s&&(i&&(n||!this.isMultiselect())&&(m+=this.clearOtherNodes(g[0],u)),m>0)&&(this.updateGroupsFromChildrenSelections(u),this.eventService.dispatchEvent({type:G.EVENT_SELECTION_CHANGED,source:u})),m}selectRange(e,t,i=!0,n){const s=this.rowModel.getNodesInRangeForSelection(e,t);let o=0;return s.forEach(c=>{c.group&&this.groupSelectsChildren||c.selectThisNode(i,void 0,n)&&o++}),this.updateGroupsFromChildrenSelections(n),this.eventService.dispatchEvent({type:G.EVENT_SELECTION_CHANGED,source:n}),o}selectChildren(e,t,i,n){const s=i?e.childrenAfterAggFilter:e.childrenAfterGroup;return gt(s)?0:this.setNodesSelected({newValue:t,clearSelection:!1,suppressFinishActions:!0,groupSelectsFiltered:i,source:n,nodes:s})}getLastSelectedNode(){const e=Array.from(this.selectedNodes.keys());return 0==e.length?null:this.selectedNodes.get(Xt(e))||null}getSelectedNodes(){const e=[];return this.selectedNodes.forEach(t=>{t&&e.push(t)}),e}getSelectedRows(){const e=[];return this.selectedNodes.forEach(t=>{t&&t.data&&e.push(t.data)}),e}getSelectionCount(){return this.selectedNodes.size}filterFromSelection(e){const t=new Map;this.selectedNodes.forEach((i,n)=>{i&&e(i)&&t.set(n,i)}),this.selectedNodes=t}updateGroupsFromChildrenSelections(e,t){if(!this.groupSelectsChildren||"clientSide"!==this.rowModel.getType())return!1;const n=this.rowModel.getRootNode();t||(t=new tg(!0,n)).setInactive();let s=!1;return t.forEachChangedNodeDepthFirst(o=>{if(o!==n){const a=o.calculateSelectedFromChildren();s=o.selectThisNode(null!==a&&a,void 0,e)||s}}),s}clearOtherNodes(e,t){const i=new Map;let n=0;return this.selectedNodes.forEach(s=>{s&&s.id!==e.id&&(n+=this.selectedNodes.get(s.id).setSelectedParams({newValue:!1,clearSelection:!1,suppressFinishActions:!0,source:t}),this.groupSelectsChildren&&s.parent&&i.set(s.parent.id,s.parent))}),i.forEach(s=>{const o=s.calculateSelectedFromChildren();s.selectThisNode(null!==o&&o,void 0,t)}),n}onRowSelected(e){const t=e.node;this.groupSelectsChildren&&t.group||(t.isSelected()?this.selectedNodes.set(t.id,t):this.selectedNodes.delete(t.id))}syncInRowNode(e,t){this.syncInOldRowNode(e,t),this.syncInNewRowNode(e)}syncInOldRowNode(e,t){Ie(t)&&e.id!==t.id&&t&&this.selectedNodes.get(t.id)==e&&this.selectedNodes.set(t.id,t)}syncInNewRowNode(e){this.selectedNodes.has(e.id)?(e.setSelectedInitialValue(!0),this.selectedNodes.set(e.id,e)):e.setSelectedInitialValue(!1)}reset(e){const t=this.getSelectionCount();this.resetNodes(),t&&this.eventService.dispatchEvent({type:G.EVENT_SELECTION_CHANGED,source:e})}resetNodes(){var e;null===(e=this.selectedNodes)||void 0===e||e.clear()}getBestCostNodeSelection(){if("clientSide"!==this.rowModel.getType())return;const t=this.rowModel.getTopLevelNodes();if(null===t)return;const i=[];return function n(s){for(let o=0,a=s.length;o<a;o++){const c=s[o];if(c.isSelected())i.push(c);else{const u=c;u.group&&u.children&&n(u.children)}}}(t),i}isEmpty(){let e=0;return this.selectedNodes.forEach(t=>{t&&e++}),0===e}deselectAllRowNodes(e){const t=c=>c.selectThisNode(!1,void 0,n),i="clientSide"===this.rowModel.getType(),{source:n,justFiltered:s,justCurrentPage:o}=e;if(o||s){if(!i)return void console.error("AG Grid: selecting just filtered only works when gridOptions.rowModelType='clientSide'");this.getNodesToSelect(s,o).forEach(t)}else this.selectedNodes.forEach(c=>{c&&t(c)}),this.reset(n);i&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(n),this.eventService.dispatchEvent({type:G.EVENT_SELECTION_CHANGED,source:n})}getSelectedCounts(e,t){let i=0,n=0;return this.getNodesToSelect(e,t).forEach(o=>{this.groupSelectsChildren&&o.group||(o.isSelected()?i++:o.selectable&&n++)}),{selectedCount:i,notSelectedCount:n}}getSelectAllState(e,t){const{selectedCount:i,notSelectedCount:n}=this.getSelectedCounts(e,t);return(0!==i||0!==n)&&(i>0&&n>0?null:i>0)}hasNodesToSelect(e=!1,t=!1){return this.getNodesToSelect(e,t).filter(i=>i.selectable).length>0}getNodesToSelect(e=!1,t=!1){if("clientSide"!==this.rowModel.getType())throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const i=[];if(t)return this.paginationProxy.forEachNodeOnPage(s=>{if(s.group)if(s.expanded)this.groupSelectsChildren||i.push(s);else{const o=a=>{var c;i.push(a),null!==(c=a.childrenAfterFilter)&&void 0!==c&&c.length&&a.childrenAfterFilter.forEach(o)};o(s)}else i.push(s)}),i;const n=this.rowModel;return e?(n.forEachNodeAfterFilter(s=>{i.push(s)}),i):(n.forEachNode(s=>{i.push(s)}),i)}selectAllRowNodes(e){if("clientSide"!==this.rowModel.getType())throw new Error(`selectAll only available when rowModelType='clientSide', ie not ${this.rowModel.getType()}`);const{source:t,justFiltered:i,justCurrentPage:n}=e;this.getNodesToSelect(i,n).forEach(a=>a.selectThisNode(!0,void 0,t)),"clientSide"===this.rowModel.getType()&&this.groupSelectsChildren&&this.updateGroupsFromChildrenSelections(t),this.eventService.dispatchEvent({type:G.EVENT_SELECTION_CHANGED,source:t})}getSelectionState(){const e=[];return this.selectedNodes.forEach(t=>{t?.id&&e.push(t.id)}),e.length?e:null}setSelectionState(e,t){if(!Array.isArray(e))return;const i=new Set(e),n=[];this.rowModel.forEachNode(s=>{i.has(s.id)&&n.push(s)}),this.setNodesSelected({newValue:!0,nodes:n,source:t})}};Zv([P("rowModel")],Xh.prototype,"rowModel",void 0),Zv([P("paginationProxy")],Xh.prototype,"paginationProxy",void 0),Zv([Se],Xh.prototype,"init",null),Xh=Zv([He("selectionService")],Xh);var PA=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let rg=class{constructor(e){this.viaApi=(t,...i)=>(st(`Since v31, 'columnApi.${t}' is deprecated and moved to 'api.${t}'.`),this.api[t](...i)),this.api=e}sizeColumnsToFit(e){this.viaApi("sizeColumnsToFit",e)}setColumnGroupOpened(e,t){this.viaApi("setColumnGroupOpened",e,t)}getColumnGroup(e,t){return this.viaApi("getColumnGroup",e,t)}getProvidedColumnGroup(e){return this.viaApi("getProvidedColumnGroup",e)}getDisplayNameForColumn(e,t){return this.viaApi("getDisplayNameForColumn",e,t)}getDisplayNameForColumnGroup(e,t){return this.viaApi("getDisplayNameForColumnGroup",e,t)}getColumn(e){return this.viaApi("getColumn",e)}getColumns(){return this.viaApi("getColumns")}applyColumnState(e){return this.viaApi("applyColumnState",e)}getColumnState(){return this.viaApi("getColumnState")}resetColumnState(){this.viaApi("resetColumnState")}getColumnGroupState(){return this.viaApi("getColumnGroupState")}setColumnGroupState(e){this.viaApi("setColumnGroupState",e)}resetColumnGroupState(){this.viaApi("resetColumnGroupState")}isPinning(){return this.viaApi("isPinning")}isPinningLeft(){return this.viaApi("isPinningLeft")}isPinningRight(){return this.viaApi("isPinningRight")}getDisplayedColAfter(e){return this.viaApi("getDisplayedColAfter",e)}getDisplayedColBefore(e){return this.viaApi("getDisplayedColBefore",e)}setColumnVisible(e,t){this.viaApi("setColumnVisible",e,t)}setColumnsVisible(e,t){this.viaApi("setColumnsVisible",e,t)}setColumnPinned(e,t){this.viaApi("setColumnPinned",e,t)}setColumnsPinned(e,t){this.viaApi("setColumnsPinned",e,t)}getAllGridColumns(){return this.viaApi("getAllGridColumns")}getDisplayedLeftColumns(){return this.viaApi("getDisplayedLeftColumns")}getDisplayedCenterColumns(){return this.viaApi("getDisplayedCenterColumns")}getDisplayedRightColumns(){return this.viaApi("getDisplayedRightColumns")}getAllDisplayedColumns(){return this.viaApi("getAllDisplayedColumns")}getAllDisplayedVirtualColumns(){return this.viaApi("getAllDisplayedVirtualColumns")}moveColumn(e,t){this.viaApi("moveColumn",e,t)}moveColumnByIndex(e,t){this.viaApi("moveColumnByIndex",e,t)}moveColumns(e,t){this.viaApi("moveColumns",e,t)}moveRowGroupColumn(e,t){this.viaApi("moveRowGroupColumn",e,t)}setColumnAggFunc(e,t){this.viaApi("setColumnAggFunc",e,t)}setColumnWidth(e,t,i=!0,n){this.viaApi("setColumnWidth",e,t,i,n)}setColumnWidths(e,t=!0,i){this.viaApi("setColumnWidths",e,t,i)}setPivotMode(e){this.viaApi("setPivotMode",e)}isPivotMode(){return this.viaApi("isPivotMode")}getPivotResultColumn(e,t){return this.viaApi("getPivotResultColumn",e,t)}setValueColumns(e){this.viaApi("setValueColumns",e)}getValueColumns(){return this.viaApi("getValueColumns")}removeValueColumn(e){this.viaApi("removeValueColumn",e)}removeValueColumns(e){this.viaApi("removeValueColumns",e)}addValueColumn(e){this.viaApi("addValueColumn",e)}addValueColumns(e){this.viaApi("addValueColumns",e)}setRowGroupColumns(e){this.viaApi("setRowGroupColumns",e)}removeRowGroupColumn(e){this.viaApi("removeRowGroupColumn",e)}removeRowGroupColumns(e){this.viaApi("removeRowGroupColumns",e)}addRowGroupColumn(e){this.viaApi("addRowGroupColumn",e)}addRowGroupColumns(e){this.viaApi("addRowGroupColumns",e)}getRowGroupColumns(){return this.viaApi("getRowGroupColumns")}setPivotColumns(e){this.viaApi("setPivotColumns",e)}removePivotColumn(e){this.viaApi("removePivotColumn",e)}removePivotColumns(e){this.viaApi("removePivotColumns",e)}addPivotColumn(e){this.viaApi("addPivotColumn",e)}addPivotColumns(e){this.viaApi("addPivotColumns",e)}getPivotColumns(){return this.viaApi("getPivotColumns")}getLeftDisplayedColumnGroups(){return this.viaApi("getLeftDisplayedColumnGroups")}getCenterDisplayedColumnGroups(){return this.viaApi("getCenterDisplayedColumnGroups")}getRightDisplayedColumnGroups(){return this.viaApi("getRightDisplayedColumnGroups")}getAllDisplayedColumnGroups(){return this.viaApi("getAllDisplayedColumnGroups")}autoSizeColumn(e,t){return this.viaApi("autoSizeColumn",e,t)}autoSizeColumns(e,t){this.viaApi("autoSizeColumns",e,t)}autoSizeAllColumns(e){this.viaApi("autoSizeAllColumns",e)}setPivotResultColumns(e){this.viaApi("setPivotResultColumns",e)}getPivotResultColumns(){return this.viaApi("getPivotResultColumns")}};PA([P("gridApi")],rg.prototype,"api",void 0),rg=PA([He("columnApi")],rg);var og=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Ll=class extends Ee{constructor(){super(...arguments),this.initialised=!1,this.isSsrm=!1}init(){this.isSsrm=this.gridOptionsService.isRowModelType("serverSide"),this.cellExpressions=this.gridOptionsService.get("enableCellExpressions"),this.isTreeData=this.gridOptionsService.get("treeData"),this.initialised=!0;const e=i=>this.callColumnCellValueChangedHandler(i),t=this.gridOptionsService.useAsyncEvents();this.eventService.addEventListener(G.EVENT_CELL_VALUE_CHANGED,e,t),this.addDestroyFunc(()=>this.eventService.removeEventListener(G.EVENT_CELL_VALUE_CHANGED,e,t)),this.addManagedPropertyListener("treeData",i=>this.isTreeData=i.currentValue)}getValue(e,t,i=!1,n=!1){if(this.initialised||this.init(),!t)return;const s=e.getColDef(),o=s.field,a=e.getColId(),c=t.data;let u;const p=t.groupData&&void 0!==t.groupData[a],g=!n&&t.aggData&&void 0!==t.aggData[a],m=this.isSsrm&&n&&!!e.getColDef().aggFunc,y=this.isSsrm&&t.footer&&t.field&&(!0===e.getColDef().showRowGroup||e.getColDef().showRowGroup===t.field);if(i&&s.filterValueGetter?u=this.executeFilterValueGetter(s.filterValueGetter,c,e,t):this.isTreeData&&g?u=t.aggData[a]:this.isTreeData&&s.valueGetter?u=this.executeValueGetter(s.valueGetter,c,e,t):this.isTreeData&&o&&c?u=nn(c,o,e.isFieldContainsDots()):p?u=t.groupData[a]:g?u=t.aggData[a]:s.valueGetter?u=this.executeValueGetter(s.valueGetter,c,e,t):y?u=nn(c,t.field,e.isFieldContainsDots()):o&&c&&!m&&(u=nn(c,o,e.isFieldContainsDots())),this.cellExpressions&&"string"==typeof u&&0===u.indexOf("=")){const b=u.substring(1);u=this.executeValueGetter(b,c,e,t)}if(null==u){const b=this.getOpenedGroup(t,e);if(null!=b)return b}return u}getOpenedGroup(e,t){if(!this.gridOptionsService.get("showOpenedGroup")||!t.getColDef().showRowGroup)return;const n=t.getColDef().showRowGroup;let s=e.parent;for(;null!=s;){if(s.rowGroupColumn&&(!0===n||n===s.rowGroupColumn.getColId()))return s.key;s=s.parent}}setValue(e,t,i,n){const s=this.columnModel.getPrimaryColumn(t);if(!e||!s)return!1;gt(e.data)&&(e.data={});const{field:o,valueSetter:a}=s.getColDef();if(gt(o)&&gt(a))return console.warn("AG Grid: you need either field or valueSetter set on colDef for editing to work"),!1;if(!this.dataTypeService.checkType(s,i))return console.warn("AG Grid: Data type of the new value does not match the cell data type of the column"),!1;const c=this.gridOptionsService.addGridCommonParams({node:e,data:e.data,oldValue:this.getValue(s,e),newValue:i,colDef:s.getColDef(),column:s});let u;return c.newValue=i,u=Ie(a)?"function"==typeof a?a(c):this.expressionService.evaluate(a,c):this.setValueUsingField(e.data,o,i,s.isFieldContainsDots()),void 0===u&&(u=!0),!!u&&(e.resetQuickFilterAggregateText(),this.valueCache.onDataChanged(),c.newValue=this.getValue(s,e),this.eventService.dispatchEvent({type:G.EVENT_CELL_VALUE_CHANGED,event:null,rowIndex:e.rowIndex,rowPinned:e.rowPinned,column:c.column,api:c.api,columnApi:c.columnApi,colDef:c.colDef,context:c.context,data:e.data,node:e,oldValue:c.oldValue,newValue:c.newValue,value:c.newValue,source:n}),!0)}callColumnCellValueChangedHandler(e){const t=e.colDef.onCellValueChanged;"function"==typeof t&&this.getFrameworkOverrides().wrapOutgoing(()=>{t({node:e.node,data:e.data,oldValue:e.oldValue,newValue:e.newValue,colDef:e.colDef,column:e.column,api:e.api,columnApi:e.columnApi,context:e.context})})}setValueUsingField(e,t,i,n){if(!t)return!1;let s=!1;if(n){const o=t.split(".");let a=e;for(;o.length>0&&a;){const c=o.shift();0===o.length?(s=a[c]===i,s||(a[c]=i)):a=a[c]}}else s=e[t]===i,s||(e[t]=i);return!s}executeFilterValueGetter(e,t,i,n){const s=this.gridOptionsService.addGridCommonParams({data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)});return"function"==typeof e?e(s):this.expressionService.evaluate(e,s)}executeValueGetter(e,t,i,n){const s=i.getColId(),o=this.valueCache.getValue(n,s);if(void 0!==o)return o;const a=this.gridOptionsService.addGridCommonParams({data:t,node:n,column:i,colDef:i.getColDef(),getValue:this.getValueCallback.bind(this,n)});let c;return c="function"==typeof e?e(a):this.expressionService.evaluate(e,a),this.valueCache.setValue(n,s,c),c}getValueCallback(e,t){const i=this.columnModel.getPrimaryColumn(t);return i?this.getValue(i,e):null}getKeyForNode(e,t){const i=this.getValue(e,t),n=e.getColDef().keyCreator;let s=i;return n&&(s=n(this.gridOptionsService.addGridCommonParams({value:i,colDef:e.getColDef(),column:e,node:t,data:t.data}))),"string"==typeof s||null==s||(s=String(s),"[object Object]"===s&&st("a column you are grouping or pivoting by has objects as values. If you want to group by complex objects then either a) use a colDef.keyCreator (se AG Grid docs) or b) to toString() on the object to return a key")),s}};og([P("expressionService")],Ll.prototype,"expressionService",void 0),og([P("columnModel")],Ll.prototype,"columnModel",void 0),og([P("valueCache")],Ll.prototype,"valueCache",void 0),og([P("dataTypeService")],Ll.prototype,"dataTypeService",void 0),og([Se],Ll.prototype,"init",null),Ll=og([He("valueService")],Ll);var ag=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Jv=class extends Ee{constructor(){super(...arguments),this.expressionToFunctionCache={}}setBeans(e){this.logger=e.create("ExpressionService")}evaluate(e,t){if("string"==typeof e)return this.evaluateExpression(e,t);console.error("AG Grid: value should be either a string or a function",e)}evaluateExpression(e,t){try{return this.createExpressionFunction(e)(t.value,t.context,t.oldValue,t.newValue,t.value,t.node,t.data,t.colDef,t.rowIndex,t.api,t.columnApi,t.getValue,t.column,t.columnGroup)}catch(i){return console.log("Processing of the expression failed"),console.log("Expression = "+e),console.log("Params =",t),console.log("Exception = "+i),null}}createExpressionFunction(e){if(this.expressionToFunctionCache[e])return this.expressionToFunctionCache[e];const t=this.createFunctionBody(e),i=new Function("x, ctx, oldValue, newValue, value, node, data, colDef, rowIndex, api, columnApi, getValue, column, columnGroup",t);return this.expressionToFunctionCache[e]=i,i}createFunctionBody(e){return e.indexOf("return")>=0?e:"return "+e+";"}};ag([function(r,e){return function(t,i){e(t,i,0)}}(0,Cl("loggerFactory"))],Jv.prototype,"setBeans",null),Jv=ag([He("expressionService")],Jv);let hb=class extends Ee{constructor(){super(...arguments),this.templateCache={},this.waitingCallbacks={}}getTemplate(e,t){const i=this.templateCache[e];if(i)return i;let n=this.waitingCallbacks[e];const s=this;if(!n){n=[],this.waitingCallbacks[e]=n;const o=new XMLHttpRequest;o.onload=function(){s.handleHttpResult(this,e)},o.open("GET",e),o.send()}return t&&n.push(t),null}handleHttpResult(e,t){if(200!==e.status||null===e.response)return void console.warn(`AG Grid: Unable to get template error ${e.status} - ${t}`);this.templateCache[t]=e.response||e.responseText;const i=this.waitingCallbacks[t];for(let n=0;n<i.length;n++)(0,i[n])()}};hb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He("templateService")],hb);var y0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let fb=class extends Ee{setBeans(e){this.logging=e.get("debug")}create(e){return new gb(e,this.isLogging.bind(this))}isLogging(){return this.logging}};y0([function(r,e){return function(t,i){e(t,i,0)}}(0,Cl("gridOptionsService"))],fb.prototype,"setBeans",null),fb=y0([He("loggerFactory")],fb);class gb{constructor(e,t){this.name=e,this.isLoggingFunc=t}isLogging(){return this.isLoggingFunc()}log(e){this.isLoggingFunc()&&console.log("AG Grid."+this.name+": "+e)}}var Zh=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Bc extends Ee{setComp(e,t,i){this.view=e,this.eGridHostDiv=t,this.eGui=i,this.eGui.setAttribute("grid-id",this.context.getGridId()),this.dragAndDropService.addDropTarget({getContainer:()=>this.eGui,isInterestedIn:s=>s===sn.HeaderCell||s===sn.ToolPanel,getIconName:()=>St.ICON_NOT_ALLOWED}),this.mouseEventService.stampTopLevelGridCompWithGridInstance(t),this.createManagedBean(new xv(this.view)),this.addRtlSupport();const n=this.resizeObserverService.observeResize(this.eGridHostDiv,this.onGridSizeChanged.bind(this));this.addDestroyFunc(()=>n()),this.ctrlsService.registerGridCtrl(this)}isDetailGrid(){var e;return(null===(e=this.focusService.findTabbableParent(this.getGui())?.getAttribute("row-id"))||void 0===e?void 0:e.startsWith("detail"))||!1}showDropZones(){return yt.__isRegistered(ze.RowGroupingModule,this.context.getGridId())}showSideBar(){return yt.__isRegistered(ze.SideBarModule,this.context.getGridId())}showStatusBar(){return yt.__isRegistered(ze.StatusBarModule,this.context.getGridId())}showWatermark(){return yt.__isRegistered(ze.EnterpriseCoreModule,this.context.getGridId())}onGridSizeChanged(){this.eventService.dispatchEvent({type:G.EVENT_GRID_SIZE_CHANGED,clientWidth:this.eGridHostDiv.clientWidth,clientHeight:this.eGridHostDiv.clientHeight})}addRtlSupport(){const e=this.gridOptionsService.get("enableRtl")?"ag-rtl":"ag-ltr";this.view.setRtlClass(e)}destroyGridUi(){this.view.destroyGridUi()}getGui(){return this.eGui}setResizeCursor(e){this.view.setCursor(e?"ew-resize":null)}disableUserSelect(e){this.view.setUserSelect(e?"none":null)}focusNextInnerContainer(e){const t=this.gridOptionsService.getDocument(),i=this.view.getFocusableContainers(),s=i.findIndex(o=>o.contains(t.activeElement))+(e?-1:1);return!(s<=0||s>=i.length)&&this.focusService.focusInto(i[s])}focusInnerElement(e){const t=this.view.getFocusableContainers(),i=this.columnModel.getAllDisplayedColumns();if(e){if(t.length>1)return this.focusService.focusInto(Xt(t),!0);const n=Xt(i);if(this.focusService.focusGridView(n,!0))return!0}if(0===this.gridOptionsService.get("headerHeight")||this.gridOptionsService.get("suppressHeaderFocus")){if(this.focusService.focusGridView(i[0]))return!0;for(let n=1;n<t.length;n++)if(this.focusService.focusInto(t[n]))return!0;return!1}return this.focusService.focusFirstHeader()}forceFocusOutOfContainer(e=!1){this.view.forceFocusOutOfContainer(e)}}Zh([P("focusService")],Bc.prototype,"focusService",void 0),Zh([P("resizeObserverService")],Bc.prototype,"resizeObserverService",void 0),Zh([P("columnModel")],Bc.prototype,"columnModel",void 0),Zh([P("ctrlsService")],Bc.prototype,"ctrlsService",void 0),Zh([P("mouseEventService")],Bc.prototype,"mouseEventService",void 0),Zh([P("dragAndDropService")],Bc.prototype,"dragAndDropService",void 0);var ru=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Jh extends jh{constructor(e){super(),this.eGridDiv=e}postConstruct(){this.logger=this.loggerFactory.create("GridComp");const e={destroyGridUi:()=>this.destroyBean(this),setRtlClass:i=>this.addCssClass(i),forceFocusOutOfContainer:this.forceFocusOutOfContainer.bind(this),updateLayoutClasses:this.updateLayoutClasses.bind(this),getFocusableContainers:this.getFocusableContainers.bind(this),setUserSelect:i=>{this.getGui().style.userSelect=i??"",this.getGui().style.webkitUserSelect=i??""},setCursor:i=>{this.getGui().style.cursor=i??""}};this.ctrl=this.createManagedBean(new Bc);const t=this.createTemplate();this.setTemplate(t),this.ctrl.setComp(e,this.eGridDiv,this.getGui()),this.insertGridIntoDom(),this.initialiseTabGuard({onTabKeyDown:()=>{},focusInnerElement:i=>this.ctrl.focusInnerElement(i),forceFocusOutWhenTabGuardsAreEmpty:!0})}insertGridIntoDom(){const e=this.getGui();this.eGridDiv.appendChild(e),this.addDestroyFunc(()=>{this.eGridDiv.removeChild(e),this.logger.log("Grid removed from DOM")})}updateLayoutClasses(e,t){const i=this.eRootWrapperBody.classList;i.toggle(Gn.AUTO_HEIGHT,t.autoHeight),i.toggle(Gn.NORMAL,t.normal),i.toggle(Gn.PRINT,t.print),this.addOrRemoveCssClass(Gn.AUTO_HEIGHT,t.autoHeight),this.addOrRemoveCssClass(Gn.NORMAL,t.normal),this.addOrRemoveCssClass(Gn.PRINT,t.print)}createTemplate(){return`<div class="ag-root-wrapper" role="presentation">\n                ${this.ctrl.showDropZones()?"<ag-grid-header-drop-zones></ag-grid-header-drop-zones>":""}\n                <div class="ag-root-wrapper-body" ref="rootWrapperBody" role="presentation">\n                    <ag-grid-body ref="gridBody"></ag-grid-body>\n                    ${this.ctrl.showSideBar()?'<ag-side-bar ref="sideBar"></ag-side-bar>':""}\n                </div>\n                ${this.ctrl.showStatusBar()?'<ag-status-bar ref="statusBar"></ag-status-bar>':""}\n                <ag-pagination></ag-pagination>\n                ${this.ctrl.showWatermark()?"<ag-watermark></ag-watermark>":""}\n            </div>`}getFocusableElement(){return this.eRootWrapperBody}getFocusableContainers(){const e=[this.gridBodyComp.getGui()];return this.sideBarComp&&e.push(this.sideBarComp.getGui()),e.filter(t=>Fn(t))}}ru([P("loggerFactory")],Jh.prototype,"loggerFactory",void 0),ru([re("gridBody")],Jh.prototype,"gridBodyComp",void 0),ru([re("sideBar")],Jh.prototype,"sideBarComp",void 0),ru([re("rootWrapperBody")],Jh.prototype,"eRootWrapperBody",void 0),ru([Se],Jh.prototype,"postConstruct",null);var Qv,S0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let lg=Qv=class extends Ee{progressSort(e,t,i){const n=this.getNextSortDirection(e);this.setSortForColumn(e,n,t,i)}setSortForColumn(e,t,i,n){"asc"!==t&&"desc"!==t&&(t=null);let o=[e];if(this.gridOptionsService.isColumnsSortingCoupledToGroup()&&e.getColDef().showRowGroup){const p=this.columnModel.getSourceColumnsForGroupColumn(e)?.filter(g=>g.isSortable());p&&(o=[e,...p])}o.forEach(u=>u.setSort(t,n));const c=[];if(!i&&!this.gridOptionsService.get("alwaysMultiSort")||this.gridOptionsService.get("suppressMultiSort")){const u=this.clearSortBarTheseColumns(o,n);c.push(...u)}this.updateSortIndex(e),c.push(...o),this.dispatchSortChangedEvents(n,c)}updateSortIndex(e){const t=this.gridOptionsService.isColumnsSortingCoupledToGroup(),i=this.columnModel.getGroupDisplayColumnForGroup(e.getId()),n=t&&i||e,s=this.getColumnsWithSortingOrdered();this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(c=>c.setSortIndex(null));const o=s.filter(c=>!(t&&c.getColDef().showRowGroup||c===n));(n.getSort()?[...o,n]:o).forEach((c,u)=>{c.setSortIndex(u)})}onSortChanged(e,t){this.dispatchSortChangedEvents(e,t)}isSortActive(){const t=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(i=>!!i.getSort());return t&&t.length>0}dispatchSortChangedEvents(e,t){const i={type:G.EVENT_SORT_CHANGED,source:e};t&&(i.columns=t),this.eventService.dispatchEvent(i)}clearSortBarTheseColumns(e,t){const i=[];return this.columnModel.getPrimaryAndSecondaryAndAutoColumns().forEach(n=>{e.includes(n)||(n.getSort()&&i.push(n),n.setSort(void 0,t))}),i}getNextSortDirection(e){let t;if(t=e.getColDef().sortingOrder?e.getColDef().sortingOrder:this.gridOptionsService.get("sortingOrder")?this.gridOptionsService.get("sortingOrder"):Qv.DEFAULT_SORTING_ORDER,!Array.isArray(t)||t.length<=0)return console.warn(`AG Grid: sortingOrder must be an array with at least one element, currently it's ${t}`),null;const i=t.indexOf(e.getSort());let o;return o=i<0||i==t.length-1?t[0]:t[i+1],Qv.DEFAULT_SORTING_ORDER.indexOf(o)<0?(console.warn("AG Grid: invalid sort type "+o),null):o}getIndexedSortMap(){let e=this.columnModel.getPrimaryAndSecondaryAndAutoColumns().filter(o=>!!o.getSort());if(this.columnModel.isPivotMode()){const o=this.gridOptionsService.isColumnsSortingCoupledToGroup();e=e.filter(a=>{const c=!!a.getAggFunc(),u=!a.isPrimary(),p=o?this.columnModel.getGroupDisplayColumnForGroup(a.getId()):a.getColDef().showRowGroup;return c||u||p})}const t=this.columnModel.getRowGroupColumns().filter(o=>!!o.getSort()),i=this.gridOptionsService.isColumnsSortingCoupledToGroup()&&!!t.length;i&&(e=[...new Set(e.map(o=>{var a;return null!==(a=this.columnModel.getGroupDisplayColumnForGroup(o.getId()))&&void 0!==a?a:o}))]);const n={};e.forEach((o,a)=>n[o.getId()]=a),e.sort((o,a)=>{const c=o.getSortIndex(),u=a.getSortIndex();return null!=c&&null!=u?c-u:null==c&&null==u?n[o.getId()]>n[a.getId()]?1:-1:null==u?-1:1});const s=new Map;return e.forEach((o,a)=>s.set(o,a)),i&&t.forEach(o=>{const a=this.columnModel.getGroupDisplayColumnForGroup(o.getId());s.set(o,s.get(a))}),s}getColumnsWithSortingOrdered(){return[...this.getIndexedSortMap().entries()].sort(([e,t],[i,n])=>t-n).map(([e])=>e)}getSortModel(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),colId:e.getId()}))}getSortOptions(){return this.getColumnsWithSortingOrdered().filter(e=>e.getSort()).map(e=>({sort:e.getSort(),column:e}))}canColumnDisplayMixedSort(e){const t=this.gridOptionsService.isColumnsSortingCoupledToGroup(),i=!!e.getColDef().showRowGroup;return t&&i}getDisplaySortForColumn(e){const t=this.columnModel.getSourceColumnsForGroupColumn(e);if(!this.canColumnDisplayMixedSort(e)||!t?.length)return e.getSort();const n=null!=e.getColDef().field||e.getColDef().valueGetter?[e,...t]:t,s=n[0].getSort();return n.every(a=>a.getSort()==s)?s:"mixed"}getDisplaySortIndexForColumn(e){return this.getIndexedSortMap().get(e)}};lg.DEFAULT_SORTING_ORDER=["asc","desc",null],S0([P("columnModel")],lg.prototype,"columnModel",void 0),lg=Qv=S0([He("sortController")],lg);var wr,_r=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let is=wr=class extends Ee{static addKeyboardModeEvents(e){this.instanceCount>0||(e.addEventListener("keydown",wr.toggleKeyboardMode),e.addEventListener("mousedown",wr.toggleKeyboardMode))}static removeKeyboardModeEvents(e){this.instanceCount>0||(e.addEventListener("keydown",wr.toggleKeyboardMode),e.addEventListener("mousedown",wr.toggleKeyboardMode))}static toggleKeyboardMode(e){const i="keydown"===e.type;i&&(e.ctrlKey||e.metaKey||e.altKey)||wr.keyboardModeActive!==i&&(wr.keyboardModeActive=i)}static unregisterGridCompController(e){wr.removeKeyboardModeEvents(e)}init(){const e=this.clearFocusedCell.bind(this);this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,this.onColumnEverythingChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_GROUP_OPENED,e),this.addManagedListener(this.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.registerKeyboardFocusEvents(),this.ctrlsService.whenReady(t=>{this.gridCtrl=t.gridCtrl})}registerKeyboardFocusEvents(){const e=this.gridOptionsService.getDocument();wr.addKeyboardModeEvents(e),wr.instanceCount++,this.addDestroyFunc(()=>{wr.instanceCount--,wr.unregisterGridCompController(e)})}onColumnEverythingChanged(){if(!this.focusedCellPosition)return;const e=this.focusedCellPosition.column,t=this.columnModel.getGridColumn(e.getId());e!==t&&this.clearFocusedCell()}isKeyboardMode(){return wr.keyboardModeActive}getFocusCellToUseAfterRefresh(){const e=this.gridOptionsService.getDocument();return this.gridOptionsService.get("suppressFocusAfterRefresh")||!this.focusedCellPosition||this.isDomDataMissingInHierarchy(e.activeElement,$d.DOM_DATA_KEY_ROW_CTRL)?null:this.focusedCellPosition}getFocusHeaderToUseAfterRefresh(){const e=this.gridOptionsService.getDocument();return this.gridOptionsService.get("suppressFocusAfterRefresh")||!this.focusedHeaderPosition||this.isDomDataMissingInHierarchy(e.activeElement,Yr.DOM_DATA_KEY_HEADER_CTRL)?null:this.focusedHeaderPosition}isDomDataMissingInHierarchy(e,t){let i=e;for(;i;){if(this.gridOptionsService.getDomData(i,t))return!1;i=i.parentNode}return!0}getFocusedCell(){return this.focusedCellPosition}shouldRestoreFocus(e){return!!this.isCellRestoreFocused(e)&&(setTimeout(()=>{this.restoredFocusedCellPosition=null},0),!0)}isCellRestoreFocused(e){return null!=this.restoredFocusedCellPosition&&this.cellPositionUtils.equals(e,this.restoredFocusedCellPosition)}setRestoreFocusedCell(e){"react"===this.getFrameworkOverrides().renderingEngine&&(this.restoredFocusedCellPosition=e)}getFocusEventParams(){const{rowIndex:e,rowPinned:t,column:i}=this.focusedCellPosition,n={rowIndex:e,rowPinned:t,column:i,isFullWidthCell:!1},s=this.rowRenderer.getRowByPosition({rowIndex:e,rowPinned:t});return s&&(n.isFullWidthCell=s.isFullWidth()),n}clearFocusedCell(){if(this.restoredFocusedCellPosition=null,null==this.focusedCellPosition)return;const e=Object.assign({type:G.EVENT_CELL_FOCUS_CLEARED},this.getFocusEventParams());this.focusedCellPosition=null,this.eventService.dispatchEvent(e)}setFocusedCell(e){const{column:t,rowIndex:i,rowPinned:n,forceBrowserFocus:s=!1,preventScrollOnBrowserFocus:o=!1}=e,a=this.columnModel.getGridColumn(t);if(!a)return void(this.focusedCellPosition=null);this.focusedCellPosition=a?{rowIndex:i,rowPinned:fr(n),column:a}:null;const c=Object.assign(Object.assign({type:G.EVENT_CELL_FOCUSED},this.getFocusEventParams()),{forceBrowserFocus:s,preventScrollOnBrowserFocus:o,floating:null});this.eventService.dispatchEvent(c)}isCellFocused(e){return null!=this.focusedCellPosition&&this.cellPositionUtils.equals(e,this.focusedCellPosition)}isRowNodeFocused(e){return this.isRowFocused(e.rowIndex,e.rowPinned)}isHeaderWrapperFocused(e){if(null==this.focusedHeaderPosition)return!1;const t=e.getColumnGroupChild(),i=e.getRowIndex(),n=e.getPinned(),{column:s,headerRowIndex:o}=this.focusedHeaderPosition;return t===s&&i===o&&n==s.getPinned()}clearFocusedHeader(){this.focusedHeaderPosition=null}getFocusedHeader(){return this.focusedHeaderPosition}setFocusedHeader(e,t){this.focusedHeaderPosition={headerRowIndex:e,column:t}}focusHeaderPosition(e){if(this.gridOptionsService.get("suppressHeaderFocus"))return!1;const{direction:t,fromTab:i,allowUserOverride:n,event:s,fromCell:o,rowWithoutSpanValue:a}=e;let{headerPosition:c}=e;if(o&&this.filterManager.isAdvancedFilterHeaderActive())return this.focusAdvancedFilter(c);if(n){const g=this.getFocusedHeader(),m=this.headerNavigationService.getHeaderRowCount();if(i){const y=this.gridOptionsService.getCallback("tabToNextHeader");y&&(c=y({backwards:"Before"===t,previousHeaderPosition:g,nextHeaderPosition:c,headerRowCount:m}))}else{const y=this.gridOptionsService.getCallback("navigateToNextHeader");y&&s&&(c=y({key:s.key,previousHeaderPosition:g,nextHeaderPosition:c,headerRowCount:m,event:s}))}}if(!c)return!1;if(-1===c.headerRowIndex)return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(c):this.focusGridView(c.column);this.headerNavigationService.scrollToColumn(c.column,t);const p=this.ctrlsService.getHeaderRowContainerCtrl(c.column.getPinned()).focusHeader(c.headerRowIndex,c.column,s);return p&&(null!=a||o)&&this.headerNavigationService.setCurrentHeaderRowWithoutSpan(a??-1),p}focusFirstHeader(){let e=this.columnModel.getAllDisplayedColumns()[0];if(!e)return!1;e.getParent()&&(e=this.columnModel.getColumnGroupAtLevel(e,0));const t=this.headerPositionUtils.getHeaderIndexToFocus(e,0);return this.focusHeaderPosition({headerPosition:t,rowWithoutSpanValue:0})}focusLastHeader(e){const t=this.headerNavigationService.getHeaderRowCount()-1,i=Xt(this.columnModel.getAllDisplayedColumns());return this.focusHeaderPosition({headerPosition:{headerRowIndex:t,column:i},rowWithoutSpanValue:-1,event:e})}focusPreviousFromFirstCell(e){return this.filterManager.isAdvancedFilterHeaderActive()?this.focusAdvancedFilter(null):this.focusLastHeader(e)}isAnyCellFocused(){return!!this.focusedCellPosition}isRowFocused(e,t){return null!=this.focusedCellPosition&&this.focusedCellPosition.rowIndex===e&&this.focusedCellPosition.rowPinned===fr(t)}findFocusableElements(e,t,i=!1){let s=_E;t&&(s+=", "+t),i&&(s+=', [tabindex="-1"]');const o=Array.prototype.slice.apply(e.querySelectorAll(Id)).filter(u=>Fn(u)),a=Array.prototype.slice.apply(e.querySelectorAll(s));return a.length?(p=a,o.filter(g=>-1===p.indexOf(g))):o;var p}focusInto(e,t=!1,i=!1){const n=this.findFocusableElements(e,null,i),s=t?Xt(n):n[0];return!!s&&(s.focus({preventScroll:!0}),!0)}findFocusableElementBeforeTabGuard(e,t){if(!t)return null;const i=this.findFocusableElements(e),n=i.indexOf(t);if(-1===n)return null;let s=-1;for(let o=n-1;o>=0;o--)if(i[o].classList.contains(Ko.TAB_GUARD_TOP)){s=o;break}return s<=0?null:i[s-1]}findNextFocusableElement(e=this.eGridDiv,t,i){const n=this.findFocusableElements(e,t?':not([tabindex="-1"])':null),o=this.gridOptionsService.getDocument().activeElement;let a;a=t?n.findIndex(u=>u.contains(o)):n.indexOf(o);const c=a+(i?-1:1);return c<0||c>=n.length?null:n[c]}isTargetUnderManagedComponent(e,t){if(!t)return!1;const i=e.querySelectorAll(`.${ir.FOCUS_MANAGED_CLASS}`);if(!i.length)return!1;for(let n=0;n<i.length;n++)if(i[n].contains(t))return!0;return!1}findTabbableParent(e,t=5){let i=0;for(;e&&null===pv(e)&&++i<=t;)e=e.parentElement;return null===pv(e)?null:e}focusGridView(e,t){if(this.gridOptionsService.get("suppressCellFocus"))return t?this.gridOptionsService.get("suppressHeaderFocus")?this.focusNextGridCoreContainer(!0,!0):this.focusLastHeader():this.focusNextGridCoreContainer(!1);const i=t?this.rowPositionUtils.getLastRow():this.rowPositionUtils.getFirstRow();if(!i)return!1;const{rowIndex:n,rowPinned:s}=i,o=this.getFocusedHeader();return!e&&o&&(e=o.column),!(null==n||!e)&&(this.navigationService.ensureCellVisible({rowIndex:n,column:e,rowPinned:s}),this.setFocusedCell({rowIndex:n,column:e,rowPinned:fr(s),forceBrowserFocus:!0}),this.rangeService&&this.rangeService.setRangeToCell({rowIndex:n,rowPinned:s,column:e}),!0)}focusNextGridCoreContainer(e,t=!1){return!(t||!this.gridCtrl.focusNextInnerContainer(e))||((t||!e&&!this.gridCtrl.isDetailGrid())&&this.gridCtrl.forceFocusOutOfContainer(e),!1)}focusAdvancedFilter(e){return this.advancedFilterFocusColumn=e?.column,this.advancedFilterService.getCtrl().focusHeaderComp()}focusNextFromAdvancedFilter(e,t){var i,n;const s=null!==(i=t?void 0:this.advancedFilterFocusColumn)&&void 0!==i?i:null===(n=this.columnModel.getAllDisplayedColumns())||void 0===n?void 0:n[0];return e?this.focusHeaderPosition({headerPosition:{column:s,headerRowIndex:this.headerNavigationService.getHeaderRowCount()-1}}):this.focusGridView(s)}clearAdvancedFilterColumn(){this.advancedFilterFocusColumn=void 0}};is.keyboardModeActive=!1,is.instanceCount=0,_r([P("eGridDiv")],is.prototype,"eGridDiv",void 0),_r([P("columnModel")],is.prototype,"columnModel",void 0),_r([P("headerNavigationService")],is.prototype,"headerNavigationService",void 0),_r([P("headerPositionUtils")],is.prototype,"headerPositionUtils",void 0),_r([P("rowRenderer")],is.prototype,"rowRenderer",void 0),_r([P("rowPositionUtils")],is.prototype,"rowPositionUtils",void 0),_r([P("cellPositionUtils")],is.prototype,"cellPositionUtils",void 0),_r([Pt("rangeService")],is.prototype,"rangeService",void 0),_r([P("navigationService")],is.prototype,"navigationService",void 0),_r([P("ctrlsService")],is.prototype,"ctrlsService",void 0),_r([P("filterManager")],is.prototype,"filterManager",void 0),_r([Pt("advancedFilterService")],is.prototype,"advancedFilterService",void 0),_r([Se],is.prototype,"init",null),is=wr=_r([He("focusService")],is);let b0=class extends Ee{setMouseOver(e){this.selectedColumns=e,this.eventService.dispatchEvent({type:G.EVENT_COLUMN_HOVER_CHANGED})}clearMouseOver(){this.selectedColumns=null,this.eventService.dispatchEvent({type:G.EVENT_COLUMN_HOVER_CHANGED})}isHovered(e){return!!this.selectedColumns&&this.selectedColumns.indexOf(e)>=0}};b0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He("columnHoverService")],b0);var _0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let eC=class extends Ee{constructor(){super(...arguments),this.executeNextFuncs=[],this.executeLaterFuncs=[],this.active=!1,this.suppressAnimation=!1,this.animationThreadCount=0}postConstruct(){this.ctrlsService.whenReady(e=>this.gridBodyCtrl=e.gridBodyCtrl)}isActive(){return this.active&&!this.suppressAnimation}setSuppressAnimation(e){this.suppressAnimation=e}start(){this.active||this.gridOptionsService.get("suppressColumnMoveAnimation")||this.gridOptionsService.get("enableRtl")||(this.ensureAnimationCssClassPresent(),this.active=!0)}finish(){!this.active||this.flush(()=>{this.active=!1})}executeNextVMTurn(e){this.active?this.executeNextFuncs.push(e):e()}executeLaterVMTurn(e){this.active?this.executeLaterFuncs.push(e):e()}ensureAnimationCssClassPresent(){this.animationThreadCount++;const e=this.animationThreadCount;this.gridBodyCtrl.setColumnMovingCss(!0),this.executeLaterFuncs.push(()=>{this.animationThreadCount===e&&this.gridBodyCtrl.setColumnMovingCss(!1)})}flush(e){if(0===this.executeNextFuncs.length&&0===this.executeLaterFuncs.length)return void e();const t=i=>{for(;i.length;){const n=i.pop();n&&n()}};this.getFrameworkOverrides().wrapIncoming(()=>{window.setTimeout(()=>t(this.executeNextFuncs),0),window.setTimeout(()=>{t(this.executeLaterFuncs),e()},200)})}};_0([P("ctrlsService")],eC.prototype,"ctrlsService",void 0),_0([Se],eC.prototype,"postConstruct",null),eC=_0([He("columnAnimationService")],eC);var mb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let cg=class extends Ee{postConstruct(){this.ctrlsService.whenReady(e=>{this.centerRowContainerCon=e.centerRowContainerCtrl,this.addManagedListener(this.eventService,G.EVENT_BODY_HEIGHT_CHANGED,this.checkPageSize.bind(this)),this.addManagedListener(this.eventService,G.EVENT_SCROLL_VISIBILITY_CHANGED,this.checkPageSize.bind(this)),this.addManagedPropertyListener("paginationAutoPageSize",this.onPaginationAutoSizeChanged.bind(this)),this.checkPageSize()})}notActive(){return!this.gridOptionsService.get("paginationAutoPageSize")||null==this.centerRowContainerCon}onPaginationAutoSizeChanged(){this.notActive()?this.paginationProxy.unsetAutoCalculatedPageSize():this.checkPageSize()}checkPageSize(){if(this.notActive())return;const e=this.centerRowContainerCon.getViewportSizeFeature().getBodyHeight();if(e>0){const t=()=>{const i=this.gridOptionsService.getRowHeightAsNumber(),n=Math.floor(e/i);this.paginationProxy.setPageSize(n,"autoCalculated")};this.isBodyRendered?ko(()=>t(),50)():(t(),this.isBodyRendered=!0)}else this.isBodyRendered=!1}};mb([P("ctrlsService")],cg.prototype,"ctrlsService",void 0),mb([P("paginationProxy")],cg.prototype,"paginationProxy",void 0),mb([Se],cg.prototype,"postConstruct",null),cg=mb([He("paginationAutoPageSizeService")],cg);var FA=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let vb=class extends Ee{constructor(){super(...arguments),this.cacheVersion=0}init(){this.active=this.gridOptionsService.get("valueCache"),this.neverExpires=this.gridOptionsService.get("valueCacheNeverExpires")}onDataChanged(){this.neverExpires||this.expire()}expire(){this.cacheVersion++}setValue(e,t,i){this.active&&(e.__cacheVersion!==this.cacheVersion&&(e.__cacheVersion=this.cacheVersion,e.__cacheData={}),e.__cacheData[t]=i)}getValue(e,t){if(this.active&&e.__cacheVersion===this.cacheVersion)return e.__cacheData[t]}};FA([Se],vb.prototype,"init",null),vb=FA([He("valueCache")],vb);var Cb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let dg=class extends Ee{init(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel),this.addManagedListener(this.eventService,G.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged.bind(this))}onCellValueChanged(e){"paste"!==e.source&&this.doChangeDetection(e.node,e.column)}doChangeDetection(e,t){if(this.gridOptionsService.get("suppressChangeDetection"))return;const i=[e];if(this.clientSideRowModel&&!e.isRowPinned()){const n=this.gridOptionsService.get("aggregateOnlyChangedColumns"),s=new tg(n,this.clientSideRowModel.getRootNode());s.addParentNode(e.parent,[t]),this.clientSideRowModel.doAggregate(s),s.forEachChangedNodeDepthFirst(o=>{i.push(o)})}this.rowRenderer.refreshCells({rowNodes:i})}};Cb([P("rowModel")],dg.prototype,"rowModel",void 0),Cb([P("rowRenderer")],dg.prototype,"rowRenderer",void 0),Cb([Se],dg.prototype,"init",null),dg=Cb([He("changeDetectionService")],dg);var NA=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let yb=class extends Ee{adaptFunction(e,t){const i=this.componentMetadataProvider.retrieve(e);return i&&i.functionAdapter?i.functionAdapter(t):null}adaptCellRendererFunction(e){return class t{refresh(n){return!1}getGui(){return this.eGui}init(n){const s=e(n),o=typeof s;this.eGui="string"!==o&&"number"!==o&&"boolean"!==o?null!=s?s:ps("<span></span>"):ps("<span>"+s+"</span>")}}}doesImplementIComponent(e){return!!e&&e.prototype&&"getGui"in e.prototype}};NA([P("componentMetadataProvider")],yb.prototype,"componentMetadataProvider",void 0),yb=NA([He("agComponentUtils")],yb);var w0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let tC=class extends Ee{postConstruct(){this.componentMetaData={dateComponent:{mandatoryMethodList:["getDate","setDate"],optionalMethodList:["afterGuiAttached","setInputPlaceholder","setInputAriaLabel","setDisabled","onParamsUpdated","refresh"]},detailCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},headerComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},headerGroupComponent:{mandatoryMethodList:[],optionalMethodList:[]},loadingCellRenderer:{mandatoryMethodList:[],optionalMethodList:[]},loadingOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},noRowsOverlayComponent:{mandatoryMethodList:[],optionalMethodList:["refresh"]},floatingFilterComponent:{mandatoryMethodList:["onParentModelChanged"],optionalMethodList:["afterGuiAttached","onParamsUpdated","refresh"]},cellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},cellEditor:{mandatoryMethodList:["getValue"],optionalMethodList:["isPopup","isCancelBeforeStart","isCancelAfterEnd","getPopupPosition","focusIn","focusOut","afterGuiAttached","refresh"]},innerRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},fullWidthCellRenderer:{mandatoryMethodList:[],optionalMethodList:["refresh","afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},groupRowRenderer:{mandatoryMethodList:[],optionalMethodList:["afterGuiAttached"],functionAdapter:this.agComponentUtils.adaptCellRendererFunction.bind(this.agComponentUtils)},filter:{mandatoryMethodList:["isFilterActive","doesFilterPass","getModel","setModel"],optionalMethodList:["afterGuiAttached","afterGuiDetached","onNewRowsLoaded","getModelAsString","onFloatingFilterChanged","onAnyFilterChanged","refresh"]},statusPanel:{mandatoryMethodList:[],optionalMethodList:["refresh"]},toolPanel:{mandatoryMethodList:[],optionalMethodList:["refresh","getState"]},tooltipComponent:{mandatoryMethodList:[],optionalMethodList:[]},menuItem:{mandatoryMethodList:[],optionalMethodList:["setActive","select","setExpanded","configureDefaults"]}}}retrieve(e){return this.componentMetaData[e]}};w0([P("agComponentUtils")],tC.prototype,"agComponentUtils",void 0),w0([Se],tC.prototype,"postConstruct",null),tC=w0([He("componentMetadataProvider")],tC);var E0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const VA={"ag-theme-custom":{headerHeight:25,headerCellMinWidth:24,listItemHeight:20,rowHeight:25,chartMenuPanelWidth:220},"ag-theme-material":{headerHeight:56,headerCellMinWidth:48,listItemHeight:32,rowHeight:48,chartMenuPanelWidth:240},"ag-theme-balham":{headerHeight:32,headerCellMinWidth:24,listItemHeight:24,rowHeight:28,chartMenuPanelWidth:220},"ag-theme-alpine":{headerHeight:48,headerCellMinWidth:36,listItemHeight:24,rowHeight:42,chartMenuPanelWidth:240},"ag-theme-quartz":{headerHeight:48,headerCellMinWidth:36,listItemHeight:24,rowHeight:42,chartMenuPanelWidth:260}},R0={headerHeight:["ag-header-row"],headerCellMinWidth:["ag-header-cell"],listItemHeight:["ag-virtual-list-item"],rowHeight:["ag-row"],chartMenuPanelWidth:["ag-chart-docked-container"]};let ug=class extends Ee{constructor(){super(...arguments),this.calculatedSizes={}}postConstruct(){var e;const t=null!==(e=this.getTheme().el)&&void 0!==e?e:this.eGridDiv;this.addManagedPropertyListener("rowHeight",()=>this.refreshRowHeightVariable()),this.mutationObserver=new MutationObserver(()=>{this.calculatedSizes={},this.fireGridStylesChangedEvent()}),this.mutationObserver.observe(t||this.eGridDiv,{attributes:!0,attributeFilter:["class"]})}fireGridStylesChangedEvent(){this.eventService.dispatchEvent({type:G.EVENT_GRID_STYLES_CHANGED})}getSassVariable(e){const{themeFamily:t,el:i}=this.getTheme();if(t&&0===t.indexOf("ag-theme"))return this.calculatedSizes||(this.calculatedSizes={}),this.calculatedSizes[t]||(this.calculatedSizes[t]={}),this.calculatedSizes[t][e]??(this.calculatedSizes[t][e]=this.calculateValueForSassProperty(e,t,i),this.calculatedSizes[t][e])}calculateValueForSassProperty(e,t,i){const n="ag-theme-"+(t.match("material")?"material":t.match("balham")?"balham":t.match("alpine")?"alpine":"custom"),s=VA[n][e],o=this.gridOptionsService.getDocument();if(i||(i=this.eGridDiv),!R0[e])return s;const a=R0[e],c=o.createElement("div"),u=Array.from(i.classList);c.classList.add(t,...u),c.style.position="absolute";const p=a.reduce((m,y)=>{const b=o.createElement("div");return b.style.position="static",b.classList.add(y),m.appendChild(b),b},c);let g=0;if(o.body){o.body.appendChild(c);const m=-1!==e.toLowerCase().indexOf("height")?"height":"width";g=parseInt(window.getComputedStyle(p)[m],10),o.body.removeChild(c)}return g||s}isThemeDark(){const{theme:e}=this.getTheme();return!!e&&e.indexOf("dark")>=0}chartMenuPanelWidth(){return this.getSassVariable("chartMenuPanelWidth")}getTheme(){const e=/\bag-(material|(?:theme-([\w\-]*)))\b/g;let t=this.eGridDiv,i=null,n=[];for(;t;){if(i=e.exec(t.className),i){const o=t.className.match(e);o&&(n=o);break}t=t.parentElement||void 0}if(!i)return{allThemes:n};const s=i[0];return{theme:s,el:t,themeFamily:s.replace(/-dark$/,""),allThemes:n}}getFromTheme(e,t){var i;return null!==(i=this.getSassVariable(t))&&void 0!==i?i:e}getDefaultRowHeight(){return this.getFromTheme(25,"rowHeight")}getListItemHeight(){return this.getFromTheme(20,"listItemHeight")}refreshRowHeightVariable(){const e=this.eGridDiv.style.getPropertyValue("--ag-line-height").trim(),t=this.gridOptionsService.get("rowHeight");if(null==t||isNaN(t)||!isFinite(t))return null!==e&&this.eGridDiv.style.setProperty("--ag-line-height",null),-1;const i=`${t}px`;return e!=i?(this.eGridDiv.style.setProperty("--ag-line-height",i),t):""!=e?parseFloat(e):-1}getMinColWidth(){const e=this.getFromTheme(null,"headerCellMinWidth");return Ie(e)?Math.max(e,10):10}destroy(){this.calculatedSizes=null,this.mutationObserver&&this.mutationObserver.disconnect(),super.destroy()}};E0([P("eGridDiv")],ug.prototype,"eGridDiv",void 0),E0([Se],ug.prototype,"postConstruct",null),ug=E0([He("environment")],ug);var hg=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Zo=class extends Ee{constructor(){super(...arguments),this.scrollY=0,this.uiBodyHeight=0}agWire(e){this.logger=e.create("RowContainerHeightService")}postConstruct(){this.addManagedListener(this.eventService,G.EVENT_BODY_HEIGHT_CHANGED,this.updateOffset.bind(this)),this.maxDivHeight=gE(),this.logger.log("maxDivHeight = "+this.maxDivHeight)}isStretching(){return this.stretching}getDivStretchOffset(){return this.divStretchOffset}updateOffset(){if(!this.stretching)return;const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition().top,i=this.getUiBodyHeight();(t!==this.scrollY||i!==this.uiBodyHeight)&&(this.scrollY=t,this.uiBodyHeight=i,this.calculateOffset())}calculateOffset(){this.setUiContainerHeight(this.maxDivHeight),this.pixelsToShave=this.modelHeight-this.uiContainerHeight,this.maxScrollY=this.uiContainerHeight-this.uiBodyHeight;const e=this.scrollY/this.maxScrollY,t=e*this.pixelsToShave;this.logger.log(`Div Stretch Offset = ${t} (${this.pixelsToShave} * ${e})`),this.setDivStretchOffset(t)}setUiContainerHeight(e){e!==this.uiContainerHeight&&(this.uiContainerHeight=e,this.eventService.dispatchEvent({type:G.EVENT_ROW_CONTAINER_HEIGHT_CHANGED}))}clearOffset(){this.setUiContainerHeight(this.modelHeight),this.pixelsToShave=0,this.setDivStretchOffset(0)}setDivStretchOffset(e){const t="number"==typeof e?Math.floor(e):null;this.divStretchOffset!==t&&(this.divStretchOffset=t,this.eventService.dispatchEvent({type:G.EVENT_HEIGHT_SCALE_CHANGED}))}setModelHeight(e){this.modelHeight=e,this.stretching=null!=e&&this.maxDivHeight>0&&e>this.maxDivHeight,this.stretching?this.calculateOffset():this.clearOffset()}getUiContainerHeight(){return this.uiContainerHeight}getRealPixelPosition(e){return e-this.divStretchOffset}getUiBodyHeight(){const t=this.ctrlsService.getGridBodyCtrl().getScrollFeature().getVScrollPosition();return t.bottom-t.top}getScrollPositionForPixel(e){if(this.pixelsToShave<=0)return e;const t=this.modelHeight-this.getUiBodyHeight();return this.maxScrollY*(e/t)}};hg([P("ctrlsService")],Zo.prototype,"ctrlsService",void 0),hg([function(r,e){return function(t,i){e(t,i,0)}}(0,Cl("loggerFactory"))],Zo.prototype,"agWire",null),hg([Se],Zo.prototype,"postConstruct",null),Zo=hg([He("rowContainerHeightService")],Zo);var wb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let pg=class extends Ee{init(){this.addManagedPropertyListener("isRowSelectable",()=>this.updateSelectable())}updateSelectableAfterGrouping(){this.updateSelectable(!0)}updateSelectable(e=!1){const t=!!this.gridOptionsService.get("rowSelection"),i=this.gridOptionsService.get("isRowSelectable");if(!t||!i)return;const n=this.gridOptionsService.get("groupSelectsChildren"),s="clientSide"===this.rowModel.getType()&&n,o=[],a=c=>{if(e&&!c.group)return;if(s&&c.group){const p=c.childrenAfterGroup.some(g=>!0===g.selectable);return void c.setRowSelectable(p,!0)}const u=!i||i(c);c.setRowSelectable(u,!0),!u&&c.isSelected()&&o.push(c)};s?new tg(!1,this.rowModel.getRootNode()).forEachChangedNodeDepthFirst(a,!0,!0):this.rowModel.forEachNode(a),o.length&&this.selectionService.setNodesSelected({nodes:o,newValue:!1,source:"selectableChanged"}),s&&this.selectionService instanceof Xh&&this.selectionService.updateGroupsFromChildrenSelections("selectableChanged")}};wb([P("rowModel")],pg.prototype,"rowModel",void 0),wb([P("selectionService")],pg.prototype,"selectionService",void 0),wb([Se],pg.prototype,"init",null),pg=wb([He("selectableService")],pg);var ms=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class bo extends Ne{constructor(){super(),this.previousAndFirstButtonsDisabled=!1,this.nextButtonDisabled=!1,this.lastButtonDisabled=!1,this.areListenersSetup=!1}postConstruct(){const e=this.gridOptionsService.get("enableRtl");this.setTemplate(this.getTemplate());const{btFirst:t,btPrevious:i,btNext:n,btLast:s}=this;this.activateTabIndex([t,i,n,s]),t.insertAdjacentElement("afterbegin",Nn(e?"last":"first",this.gridOptionsService)),i.insertAdjacentElement("afterbegin",Nn(e?"next":"previous",this.gridOptionsService)),n.insertAdjacentElement("afterbegin",Nn(e?"previous":"next",this.gridOptionsService)),s.insertAdjacentElement("afterbegin",Nn(e?"first":"last",this.gridOptionsService)),this.addManagedPropertyListener("pagination",this.onPaginationChanged.bind(this)),this.addManagedPropertyListener("suppressPaginationPanel",this.onPaginationChanged.bind(this)),this.addManagedPropertyListeners(["paginationPageSizeSelector","paginationAutoPageSize","suppressPaginationPanel"],()=>this.onPageSizeRelatedOptionsChange()),this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector()),this.onPaginationChanged()}onPaginationChanged(){const t=this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel");this.setDisplayed(t),t&&(this.setupListeners(),this.enableOrDisableButtons(),this.updateRowLabels(),this.setCurrentPageLabel(),this.setTotalLabels(),this.onPageSizeRelatedOptionsChange())}onPageSizeRelatedOptionsChange(){this.pageSizeComp.toggleSelectDisplay(this.pageSizeComp.shouldShowPageSizeSelector())}setupListeners(){this.areListenersSetup||(this.addManagedListener(this.eventService,G.EVENT_PAGINATION_CHANGED,this.onPaginationChanged.bind(this)),[{el:this.btFirst,fn:this.onBtFirst.bind(this)},{el:this.btPrevious,fn:this.onBtPrevious.bind(this)},{el:this.btNext,fn:this.onBtNext.bind(this)},{el:this.btLast,fn:this.onBtLast.bind(this)}].forEach(e=>{const{el:t,fn:i}=e;this.addManagedListener(t,"click",i),this.addManagedListener(t,"keydown",n=>{(n.key===ge.ENTER||n.key===ge.SPACE)&&(n.preventDefault(),i())})}),this.areListenersSetup=!0)}onBtFirst(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToFirstPage()}setCurrentPageLabel(){const e=this.paginationProxy.getTotalPages()>0,t=this.paginationProxy.getCurrentPage();this.lbCurrent.textContent=this.formatNumber(e?t+1:0)}formatNumber(e){const t=this.gridOptionsService.getCallback("paginationNumberFormatter");if(t)return t({value:e});const i=this.localeService.getLocaleTextFunc();return SE(e,i("thousandSeparator",","),i("decimalSeparator","."))}getTemplate(){const e=this.localeService.getLocaleTextFunc(),t=e("page","Page"),i=e("to","to"),n=e("of","of"),s=e("firstPage","First Page"),o=e("previousPage","Previous Page"),a=e("nextPage","Next Page"),c=e("lastPage","Last Page"),u=this.getCompId();return`<div class="ag-paging-panel ag-unselectable" id="ag-${u}">\n                <ag-page-size-selector ref="pageSizeComp"></ag-page-size-selector>\n                <span class="ag-paging-row-summary-panel" role="status">\n                    <span id="ag-${u}-first-row" ref="lbFirstRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-${u}-to">${i}</span>\n                    <span id="ag-${u}-last-row" ref="lbLastRowOnPage" class="ag-paging-row-summary-panel-number"></span>\n                    <span id="ag-${u}-of">${n}</span>\n                    <span id="ag-${u}-row-count" ref="lbRecordCount" class="ag-paging-row-summary-panel-number"></span>\n                </span>\n                <span class="ag-paging-page-summary-panel" role="presentation">\n                    <div ref="btFirst" class="ag-button ag-paging-button" role="button" aria-label="${s}"></div>\n                    <div ref="btPrevious" class="ag-button ag-paging-button" role="button" aria-label="${o}"></div>\n                    <span class="ag-paging-description" role="status">\n                        <span id="ag-${u}-start-page">${t}</span>\n                        <span id="ag-${u}-start-page-number" ref="lbCurrent" class="ag-paging-number"></span>\n                        <span id="ag-${u}-of-page">${n}</span>\n                        <span id="ag-${u}-of-page-number" ref="lbTotal" class="ag-paging-number"></span>\n                    </span>\n                    <div ref="btNext" class="ag-button ag-paging-button" role="button" aria-label="${a}"></div>\n                    <div ref="btLast" class="ag-button ag-paging-button" role="button" aria-label="${c}"></div>\n                </span>\n            </div>`}onBtNext(){this.nextButtonDisabled||this.paginationProxy.goToNextPage()}onBtPrevious(){this.previousAndFirstButtonsDisabled||this.paginationProxy.goToPreviousPage()}onBtLast(){this.lastButtonDisabled||this.paginationProxy.goToLastPage()}enableOrDisableButtons(){const e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.isLastPageFound(),i=this.paginationProxy.getTotalPages();this.previousAndFirstButtonsDisabled=0===e,this.toggleButtonDisabled(this.btFirst,this.previousAndFirstButtonsDisabled),this.toggleButtonDisabled(this.btPrevious,this.previousAndFirstButtonsDisabled);const n=this.isZeroPagesToDisplay();this.nextButtonDisabled=e===i-1||n,this.lastButtonDisabled=!t||n||e===i-1,this.toggleButtonDisabled(this.btNext,this.nextButtonDisabled),this.toggleButtonDisabled(this.btLast,this.lastButtonDisabled)}toggleButtonDisabled(e,t){rE(e,t),e.classList.toggle("ag-disabled",t)}updateRowLabels(){const e=this.paginationProxy.getCurrentPage(),t=this.paginationProxy.getPageSize(),i=this.paginationProxy.isLastPageFound(),n=this.paginationProxy.isLastPageFound()?this.paginationProxy.getMasterRowCount():null;let s,o;if(this.isZeroPagesToDisplay()?s=o=0:(s=t*e+1,o=s+t-1,i&&o>n&&(o=n)),this.lbFirstRowOnPage.textContent=this.formatNumber(s),this.rowNodeBlockLoader.isLoading()){const a=this.localeService.getLocaleTextFunc();this.lbLastRowOnPage.innerHTML=a("pageLastRowUnknown","?")}else this.lbLastRowOnPage.textContent=this.formatNumber(o)}isZeroPagesToDisplay(){const e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages();return e&&0===t}setTotalLabels(){const e=this.paginationProxy.isLastPageFound(),t=this.paginationProxy.getTotalPages(),i=e?this.paginationProxy.getMasterRowCount():null;if(1===i){const n=this.paginationProxy.getRow(0);if(n&&n.group&&!n.groupData&&!n.aggData)return void this.setTotalLabelsToZero()}if(e)this.lbTotal.textContent=this.formatNumber(t),this.lbRecordCount.textContent=this.formatNumber(i);else{const n=this.localeService.getLocaleTextFunc()("more","more");this.lbTotal.innerHTML=n,this.lbRecordCount.innerHTML=n}}setTotalLabelsToZero(){this.lbFirstRowOnPage.textContent=this.formatNumber(0),this.lbCurrent.textContent=this.formatNumber(0),this.lbLastRowOnPage.textContent=this.formatNumber(0),this.lbTotal.textContent=this.formatNumber(0),this.lbRecordCount.textContent=this.formatNumber(0)}}ms([P("paginationProxy")],bo.prototype,"paginationProxy",void 0),ms([P("rowNodeBlockLoader")],bo.prototype,"rowNodeBlockLoader",void 0),ms([re("btFirst")],bo.prototype,"btFirst",void 0),ms([re("btPrevious")],bo.prototype,"btPrevious",void 0),ms([re("btNext")],bo.prototype,"btNext",void 0),ms([re("btLast")],bo.prototype,"btLast",void 0),ms([re("lbRecordCount")],bo.prototype,"lbRecordCount",void 0),ms([re("lbFirstRowOnPage")],bo.prototype,"lbFirstRowOnPage",void 0),ms([re("lbLastRowOnPage")],bo.prototype,"lbLastRowOnPage",void 0),ms([re("lbCurrent")],bo.prototype,"lbCurrent",void 0),ms([re("lbTotal")],bo.prototype,"lbTotal",void 0),ms([re("pageSizeComp")],bo.prototype,"pageSizeComp",void 0),ms([Se],bo.prototype,"postConstruct",null);var iC=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class fg extends Ne{constructor(){super(fg.TEMPLATE),this.inProgress=!1,this.destroyRequested=!1}updateLayoutClasses(e,t){const i=this.eOverlayWrapper.classList;i.toggle(Gn.AUTO_HEIGHT,t.autoHeight),i.toggle(Gn.NORMAL,t.normal),i.toggle(Gn.PRINT,t.print)}postConstruct(){this.createManagedBean(new xv(this)),this.setDisplayed(!1,{skipAriaHidden:!0}),this.overlayService.registerOverlayWrapperComp(this)}setWrapperTypeClass(e){const t=this.eOverlayWrapper.classList;this.activeOverlayWrapperCssClass&&t.toggle(this.activeOverlayWrapperCssClass,!1),this.activeOverlayWrapperCssClass=e,t.toggle(e,!0)}showOverlay(e,t,i){this.inProgress||(this.setWrapperTypeClass(t),this.destroyActiveOverlay(),this.inProgress=!0,e&&e.then(n=>{this.inProgress=!1,this.eOverlayWrapper.appendChild(n.getGui()),this.activeOverlay=n,this.updateListenerDestroyFunc=i,this.destroyRequested&&(this.destroyRequested=!1,this.destroyActiveOverlay())}),this.setDisplayed(!0,{skipAriaHidden:!0}))}destroyActiveOverlay(){var e;this.inProgress?this.destroyRequested=!0:!this.activeOverlay||(this.activeOverlay=this.getContext().destroyBean(this.activeOverlay),null===(e=this.updateListenerDestroyFunc)||void 0===e||e.call(this),es(this.eOverlayWrapper))}hideOverlay(){this.destroyActiveOverlay(),this.setDisplayed(!1,{skipAriaHidden:!0})}destroy(){this.destroyActiveOverlay(),super.destroy()}}fg.TEMPLATE='\n        <div class="ag-overlay" role="presentation">\n            <div class="ag-overlay-panel" role="presentation">\n                <div class="ag-overlay-wrapper" ref="eOverlayWrapper" role="presentation"></div>\n            </div>\n        </div>',iC([P("overlayService")],fg.prototype,"overlayService",void 0),iC([re("eOverlayWrapper")],fg.prototype,"eOverlayWrapper",void 0),iC([Se],fg.prototype,"postConstruct",null);var nC=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Qh=class extends Ee{getFirstRow(){let t,e=0;return this.pinnedRowModel.getPinnedTopRowCount()?t="top":this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageFirstRow()):this.pinnedRowModel.getPinnedBottomRowCount()&&(t="bottom"),void 0===t?null:{rowIndex:e,rowPinned:t}}getLastRow(){let e,t=null;const i=this.pinnedRowModel.getPinnedBottomRowCount(),n=this.pinnedRowModel.getPinnedTopRowCount();return i?(t="bottom",e=i-1):this.rowModel.getRowCount()?(t=null,e=this.paginationProxy.getPageLastRow()):n&&(t="top",e=n-1),void 0===e?null:{rowIndex:e,rowPinned:t}}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}sameRow(e,t){return!e&&!t||!(e&&!t||!e&&t)&&e.rowIndex===t.rowIndex&&e.rowPinned==t.rowPinned}before(e,t){switch(e.rowPinned){case"top":if("top"!==t.rowPinned)return!0;break;case"bottom":if("bottom"!==t.rowPinned)return!1;break;default:if(Ie(t.rowPinned))return"top"!==t.rowPinned}return e.rowIndex<t.rowIndex}rowMax(e){let t;return e.forEach(i=>{(void 0===t||this.before(t,i))&&(t=i)}),t}rowMin(e){let t;return e.forEach(i=>{(void 0===t||this.before(i,t))&&(t=i)}),t}};nC([P("rowModel")],Qh.prototype,"rowModel",void 0),nC([P("pinnedRowModel")],Qh.prototype,"pinnedRowModel",void 0),nC([P("paginationProxy")],Qh.prototype,"paginationProxy",void 0),Qh=nC([He("rowPositionUtils")],Qh);let _t=class extends Ee{createId(e){const{rowIndex:t,rowPinned:i,column:n}=e;return this.createIdFromValues({rowIndex:t,column:n,rowPinned:i})}createIdFromValues(e){const{rowIndex:t,rowPinned:i,column:n}=e;return`${t}.${i??"null"}.${n.getId()}`}equals(e,t){return e.column===t.column&&e.rowPinned===t.rowPinned&&e.rowIndex===t.rowIndex}};_t=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He("cellPositionUtils")],_t);class sC{constructor(e){this.cellValueChanges=e}}class A0 extends sC{constructor(e,t,i,n){super(e),this.initialRange=t,this.finalRange=i,this.ranges=n}}let HA=(()=>{class r{constructor(t){this.actionStack=[],this.maxStackSize=t||r.DEFAULT_STACK_SIZE,this.actionStack=new Array(this.maxStackSize)}pop(){return this.actionStack.pop()}push(t){!(t.cellValueChanges&&t.cellValueChanges.length>0)||(this.actionStack.length===this.maxStackSize&&this.actionStack.shift(),this.actionStack.push(t))}clear(){this.actionStack=[]}getCurrentStackSize(){return this.actionStack.length}}return r.DEFAULT_STACK_SIZE=10,r})();var Er=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Jo=class extends Ee{constructor(){super(...arguments),this.cellValueChanges=[],this.activeCellEdit=null,this.activeRowEdit=null,this.isPasting=!1,this.isRangeInAction=!1,this.onCellValueChanged=e=>{const t={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned},i=null!==this.activeCellEdit&&this.cellPositionUtils.equals(this.activeCellEdit,t),n=null!==this.activeRowEdit&&this.rowPositionUtils.sameRow(this.activeRowEdit,t);if(!(i||n||this.isPasting||this.isRangeInAction))return;const{rowPinned:o,rowIndex:a,column:c,oldValue:u,value:p}=e,g={rowPinned:o,rowIndex:a,columnId:c.getColId(),newValue:p,oldValue:u};this.cellValueChanges.push(g)},this.clearStacks=()=>{this.undoStack.clear(),this.redoStack.clear()}}init(){if(!this.gridOptionsService.get("undoRedoCellEditing"))return;const e=this.gridOptionsService.get("undoRedoCellEditingLimit");e<=0||(this.undoStack=new HA(e),this.redoStack=new HA(e),this.addRowEditingListeners(),this.addCellEditingListeners(),this.addPasteListeners(),this.addFillListeners(),this.addCellKeyListeners(),this.addManagedListener(this.eventService,G.EVENT_CELL_VALUE_CHANGED,this.onCellValueChanged),this.addManagedListener(this.eventService,G.EVENT_MODEL_UPDATED,t=>{t.keepUndoRedoStack||this.clearStacks()}),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,this.clearStacks),this.addManagedListener(this.eventService,G.EVENT_COLUMN_GROUP_OPENED,this.clearStacks),this.addManagedListener(this.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,this.clearStacks),this.addManagedListener(this.eventService,G.EVENT_COLUMN_MOVED,this.clearStacks),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PINNED,this.clearStacks),this.addManagedListener(this.eventService,G.EVENT_COLUMN_VISIBLE,this.clearStacks),this.addManagedListener(this.eventService,G.EVENT_ROW_DRAG_END,this.clearStacks),this.ctrlsService.whenReady(()=>{this.gridBodyCtrl=this.ctrlsService.getGridBodyCtrl()}))}getCurrentUndoStackSize(){return this.undoStack?this.undoStack.getCurrentStackSize():0}getCurrentRedoStackSize(){return this.redoStack?this.redoStack.getCurrentStackSize():0}undo(e){this.eventService.dispatchEvent({type:G.EVENT_UNDO_STARTED,source:e});const i=this.undoRedo(this.undoStack,this.redoStack,"initialRange","oldValue","undo");this.eventService.dispatchEvent({type:G.EVENT_UNDO_ENDED,source:e,operationPerformed:i})}redo(e){this.eventService.dispatchEvent({type:G.EVENT_REDO_STARTED,source:e});const i=this.undoRedo(this.redoStack,this.undoStack,"finalRange","newValue","redo");this.eventService.dispatchEvent({type:G.EVENT_REDO_ENDED,source:e,operationPerformed:i})}undoRedo(e,t,i,n,s){if(!e)return!1;const o=e.pop();return!(!o||!o.cellValueChanges||(this.processAction(o,a=>a[n],s),o instanceof A0?this.processRange(o.ranges||[o[i]]):this.processCell(o.cellValueChanges),t.push(o),0))}processAction(e,t,i){e.cellValueChanges.forEach(n=>{const{rowIndex:s,rowPinned:o,columnId:a}=n,u=this.getRowNode({rowIndex:s,rowPinned:o});!u.displayed||u.setDataValue(a,t(n),i)})}processRange(e){let t;this.rangeService.removeAllCellRanges(!0),e.forEach((i,n)=>{if(!i)return;const s=i.startRow,o=i.endRow;n===e.length-1&&(t={rowPinned:s.rowPinned,rowIndex:s.rowIndex,columnId:i.startColumn.getColId()},this.setLastFocusedCell(t)),this.rangeService.addCellRange({rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnStart:i.startColumn,columns:i.columns})})}processCell(e){const t=e[0],{rowIndex:i,rowPinned:n}=t,o=this.getRowNode({rowIndex:i,rowPinned:n});this.setLastFocusedCell({rowPinned:t.rowPinned,rowIndex:o.rowIndex,columnId:t.columnId},!!this.rangeService)}setLastFocusedCell(e,t){const{rowIndex:i,columnId:n,rowPinned:s}=e,o=this.gridBodyCtrl.getScrollFeature(),a=this.columnModel.getGridColumn(n);if(!a)return;o.ensureIndexVisible(i),o.ensureColumnVisible(a);const c={rowIndex:i,column:a,rowPinned:s};this.focusService.setFocusedCell(Object.assign(Object.assign({},c),{forceBrowserFocus:!0})),t&&this.rangeService.setRangeToCell(c)}addRowEditingListeners(){this.addManagedListener(this.eventService,G.EVENT_ROW_EDITING_STARTED,e=>{this.activeRowEdit={rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,G.EVENT_ROW_EDITING_STOPPED,()=>{const e=new sC(this.cellValueChanges);this.pushActionsToUndoStack(e),this.activeRowEdit=null})}addCellEditingListeners(){this.addManagedListener(this.eventService,G.EVENT_CELL_EDITING_STARTED,e=>{this.activeCellEdit={column:e.column,rowIndex:e.rowIndex,rowPinned:e.rowPinned}}),this.addManagedListener(this.eventService,G.EVENT_CELL_EDITING_STOPPED,e=>{if(this.activeCellEdit=null,e.valueChanged&&!this.activeRowEdit&&!this.isPasting&&!this.isRangeInAction){const i=new sC(this.cellValueChanges);this.pushActionsToUndoStack(i)}})}addPasteListeners(){this.addManagedListener(this.eventService,G.EVENT_PASTE_START,()=>{this.isPasting=!0}),this.addManagedListener(this.eventService,G.EVENT_PASTE_END,()=>{const e=new sC(this.cellValueChanges);this.pushActionsToUndoStack(e),this.isPasting=!1})}addFillListeners(){this.addManagedListener(this.eventService,G.EVENT_FILL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,G.EVENT_FILL_END,e=>{const t=new A0(this.cellValueChanges,e.initialRange,e.finalRange);this.pushActionsToUndoStack(t),this.isRangeInAction=!1})}addCellKeyListeners(){this.addManagedListener(this.eventService,G.EVENT_KEY_SHORTCUT_CHANGED_CELL_START,()=>{this.isRangeInAction=!0}),this.addManagedListener(this.eventService,G.EVENT_KEY_SHORTCUT_CHANGED_CELL_END,()=>{let e;e=this.rangeService&&this.gridOptionsService.get("enableRangeSelection")?new A0(this.cellValueChanges,void 0,void 0,[...this.rangeService.getCellRanges()]):new sC(this.cellValueChanges),this.pushActionsToUndoStack(e),this.isRangeInAction=!1})}pushActionsToUndoStack(e){this.undoStack.push(e),this.cellValueChanges=[],this.redoStack.clear()}getRowNode(e){switch(e.rowPinned){case"top":return this.pinnedRowModel.getPinnedTopRowData()[e.rowIndex];case"bottom":return this.pinnedRowModel.getPinnedBottomRowData()[e.rowIndex];default:return this.rowModel.getRow(e.rowIndex)}}};Er([P("focusService")],Jo.prototype,"focusService",void 0),Er([P("ctrlsService")],Jo.prototype,"ctrlsService",void 0),Er([P("rowModel")],Jo.prototype,"rowModel",void 0),Er([P("pinnedRowModel")],Jo.prototype,"pinnedRowModel",void 0),Er([P("cellPositionUtils")],Jo.prototype,"cellPositionUtils",void 0),Er([P("rowPositionUtils")],Jo.prototype,"rowPositionUtils",void 0),Er([P("columnModel")],Jo.prototype,"columnModel",void 0),Er([Pt("rangeService")],Jo.prototype,"rangeService",void 0),Er([Se],Jo.prototype,"init",null),Jo=Er([He("undoRedoService")],Jo);var gg=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let ou=class extends Ee{findHeader(e,t){let i,n,s;if(e.column instanceof di?(n=`getDisplayedGroup${t}`,i=this.columnModel[n](e.column)):(s=`getDisplayedCol${t}`,i=this.columnModel[s](e.column)),!i)return;let{headerRowIndex:o}=e;if(this.getHeaderRowType(o)!==Ns.FLOATING_FILTER){const u=[i];for(;i.getParent();)i=i.getParent(),u.push(i);i=u[u.length-1-o]}const{column:a,headerRowIndex:c}=this.getHeaderIndexToFocus(i,o);return{column:a,headerRowIndex:c}}getHeaderIndexToFocus(e,t){let i;if(e instanceof di&&this.isAnyChildSpanningHeaderHeight(e)&&e.isPadding()){const n=e;i=n.getLeafColumns()[0];let s=i;for(;s!==n;)t++,s=s.getParent()}return{column:i||e,headerRowIndex:t}}isAnyChildSpanningHeaderHeight(e){return!!e&&e.getLeafColumns().some(t=>t.isSpanHeaderHeight())}getColumnVisibleParent(e,t){const i=this.getHeaderRowType(t),s=i===Ns.COLUMN;let o=i===Ns.FLOATING_FILTER?e:e.getParent(),a=t-1,c=a;if(s&&this.isAnyChildSpanningHeaderHeight(e.getParent())){for(;o&&o.isPadding();)o=o.getParent(),a--;c=a,a<0&&(o=e,a=t,c=void 0)}return{column:o,headerRowIndex:a,headerRowIndexWithoutSpan:c}}getColumnVisibleChild(e,t,i="After"){let s=e,o=t+1,a=o;if(this.getHeaderRowType(t)===Ns.COLUMN_GROUP){const c=e.getDisplayedLeafColumns(),u="After"===i?c[0]:Xt(c),p=[];let g=u;for(;g.getParent()!==e;)g=g.getParent(),p.push(g);if(s=u,u.isSpanHeaderHeight())for(let m=p.length-1;m>=0;m--){const y=p[m];if(!y.isPadding()){s=y;break}o++}else s=Xt(p),s||(s=u)}return{column:s,headerRowIndex:o,headerRowIndexWithoutSpan:a}}getHeaderRowType(e){const t=this.ctrlsService.getHeaderRowContainerCtrl();if(t)return t.getRowType(e)}findColAtEdgeForHeaderRow(e,t){const i=this.columnModel.getAllDisplayedColumns(),n=i["start"===t?0:i.length-1];if(!n)return;const o=this.ctrlsService.getHeaderRowContainerCtrl(n.getPinned()).getRowType(e);return o==Ns.COLUMN_GROUP?{headerRowIndex:e,column:this.columnModel.getColumnGroupAtLevel(n,e)}:{headerRowIndex:null==o?-1:e,column:n}}};gg([P("columnModel")],ou.prototype,"columnModel",void 0),gg([P("ctrlsService")],ou.prototype,"ctrlsService",void 0),ou=gg([He("headerPositionUtils")],ou);let UA=class{buildColumnDefs(e,t,i){const n=[],s={};return e.forEach(o=>{let c=!0,u=this.createDefFromColumn(o,t,i),p=o.getOriginalParent(),g=null;for(;p;){let m=null;if(p.isPadding()){p=p.getOriginalParent();continue}const y=s[p.getGroupId()];if(y){y.children.push(u),c=!1;break}if(m=this.createDefFromGroup(p),m&&(m.children=[u],s[m.groupId]=m,u=m,p=p.getOriginalParent()),null!=p&&g===p){c=!1;break}g=p}c&&n.push(u)}),n}createDefFromGroup(e){const t=Ad(e.getColGroupDef(),["children"]);return t&&(t.groupId=e.getGroupId()),t}createDefFromColumn(e,t,i){const n=Ad(e.getColDef());return n.colId=e.getColId(),n.width=e.getActualWidth(),n.rowGroup=e.isRowGroupActive(),n.rowGroupIndex=e.isRowGroupActive()?t.indexOf(e):null,n.pivot=e.isPivotActive(),n.pivotIndex=e.isPivotActive()?i.indexOf(e):null,n.aggFunc=e.isValueActive()?e.getAggFunc():null,n.hide=!e.isVisible()||void 0,n.pinned=e.isPinned()?e.getPinned():null,n.sort=e.getSort()?e.getSort():null,n.sortIndex=null!=e.getSortIndex()?e.getSortIndex():null,n}};UA=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He("columnDefFactory")],UA);var Eb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let mg=class{getInitialRowClasses(e){const t=[];return Ie(e.extraCssClass)&&t.push(e.extraCssClass),t.push("ag-row"),t.push(e.rowFocused?"ag-row-focus":"ag-row-no-focus"),e.fadeRowIn&&t.push("ag-opacity-zero"),t.push(e.rowIsEven?"ag-row-even":"ag-row-odd"),e.rowNode.isRowPinned()&&t.push("ag-row-pinned"),e.rowNode.isSelected()&&t.push("ag-row-selected"),e.rowNode.footer&&t.push("ag-row-footer"),t.push("ag-row-level-"+e.rowLevel),e.rowNode.stub&&t.push("ag-row-loading"),e.fullWidthRow&&t.push("ag-full-width-row"),e.expandable&&(t.push("ag-row-group"),t.push(e.rowNode.expanded?"ag-row-group-expanded":"ag-row-group-contracted")),e.rowNode.dragging&&t.push("ag-row-dragging"),Zw(t,this.processClassesFromGridOptions(e.rowNode)),Zw(t,this.preProcessRowClassRules(e.rowNode)),t.push(e.printLayout?"ag-row-position-relative":"ag-row-position-absolute"),e.firstRowOnPage&&t.push("ag-row-first"),e.lastRowOnPage&&t.push("ag-row-last"),e.fullWidthRow&&("left"===e.pinned&&t.push("ag-cell-last-left-pinned"),"right"===e.pinned&&t.push("ag-cell-first-right-pinned")),t}processClassesFromGridOptions(e){const t=[],i=o=>{"string"==typeof o?t.push(o):Array.isArray(o)&&o.forEach(a=>t.push(a))},n=this.gridOptionsService.get("rowClass");if(n){if("function"==typeof n)return console.warn("AG Grid: rowClass should not be a function, please use getRowClass instead"),[];i(n)}const s=this.gridOptionsService.getCallback("getRowClass");return s&&i(s({data:e.data,node:e,rowIndex:e.rowIndex})),t}preProcessRowClassRules(e){const t=[];return this.processRowClassRules(e,i=>{t.push(i)},i=>{}),t}processRowClassRules(e,t,i){const n=this.gridOptionsService.addGridCommonParams({data:e.data,node:e,rowIndex:e.rowIndex});this.stylingService.processClassRules(void 0,this.gridOptionsService.get("rowClassRules"),n,t,i)}calculateRowLevel(e){return e.group?e.level:e.parent?e.parent.level+1:0}};Eb([P("stylingService")],mg.prototype,"stylingService",void 0),Eb([P("gridOptionsService")],mg.prototype,"gridOptionsService",void 0),mg=Eb([He("rowCssClassCalculator")],mg);var Db=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let ep=class extends Ee{init(){this.isAccentedSort=this.gridOptionsService.get("accentedSort"),this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup(),this.addManagedPropertyListener("accentedSort",e=>this.isAccentedSort=e.currentValue),this.addManagedPropertyListener("autoGroupColumnDef",()=>this.primaryColumnsSortGroups=this.gridOptionsService.isColumnsSortingCoupledToGroup())}doFullSort(e,t){const n=e.map((s,o)=>({currentPos:o,rowNode:s}));return n.sort(this.compareRowNodes.bind(this,t)),n.map(s=>s.rowNode)}compareRowNodes(e,t,i){const n=t.rowNode,s=i.rowNode;for(let o=0,a=e.length;o<a;o++){const c=e[o],u="desc"===c.sort,p=this.getValue(n,c.column),g=this.getValue(s,c.column);let m;const y=this.getComparator(c,n);if(m=y?y(p,g,n,s,u):z.defaultComparator(p,g,this.isAccentedSort),!isNaN(m)&&0!==m)return"asc"===c.sort?m:-1*m}return t.currentPos-i.currentPos}getComparator(e,t){const i=e.column,n=i.getColDef().comparator;if(null!=n)return n;if(!i.getColDef().showRowGroup)return;const s=!t.group&&i.getColDef().field;if(!s)return;const o=this.columnModel.getPrimaryColumn(s);return o?o.getColDef().comparator:void 0}getValue(e,t){var i,n;if(!this.primaryColumnsSortGroups)return this.valueService.getValue(t,e,!1,!1);if(e.rowGroupColumn===t){if(this.gridOptionsService.isGroupUseEntireRow(this.columnModel.isPivotActive())){const c=null===(i=e.allLeafChildren)||void 0===i?void 0:i[0];return c?this.valueService.getValue(t,c,!1,!1):void 0}const a=this.columnModel.getGroupDisplayColumnForGroup(t.getId());return a?null===(n=e.groupData)||void 0===n?void 0:n[a.getId()]:void 0}return e.group&&t.getColDef().showRowGroup?void 0:this.valueService.getValue(t,e,!1,!1)}};var Tb;Db([P("valueService")],ep.prototype,"valueService",void 0),Db([P("columnModel")],ep.prototype,"columnModel",void 0),Db([Se],ep.prototype,"init",null),ep=Db([He("rowNodeSorter")],ep);let rC=Tb=class extends Ee{constructor(){super(...arguments),this.ready=!1,this.readyCallbacks=[]}checkReady(){if(this.ready=null!=this.gridCtrl&&null!=this.gridBodyCtrl&&null!=this.centerRowContainerCtrl&&null!=this.leftRowContainerCtrl&&null!=this.rightRowContainerCtrl&&null!=this.bottomCenterRowContainerCtrl&&null!=this.bottomLeftRowContainerCtrl&&null!=this.bottomRightRowContainerCtrl&&null!=this.topCenterRowContainerCtrl&&null!=this.topLeftRowContainerCtrl&&null!=this.topRightRowContainerCtrl&&null!=this.stickyTopCenterRowContainerCtrl&&null!=this.stickyTopLeftRowContainerCtrl&&null!=this.stickyTopRightRowContainerCtrl&&null!=this.centerHeaderRowContainerCtrl&&null!=this.leftHeaderRowContainerCtrl&&null!=this.rightHeaderRowContainerCtrl&&null!=this.fakeHScrollComp&&null!=this.fakeVScrollComp&&null!=this.gridHeaderCtrl,this.ready){const e=this.createReadyParams();this.readyCallbacks.forEach(t=>t(e)),this.readyCallbacks.length=0}}whenReady(e){this.ready?e(this.createReadyParams()):this.readyCallbacks.push(e)}createReadyParams(){return{centerRowContainerCtrl:this.centerRowContainerCtrl,leftRowContainerCtrl:this.leftRowContainerCtrl,rightRowContainerCtrl:this.rightRowContainerCtrl,bottomCenterRowContainerCtrl:this.bottomCenterRowContainerCtrl,bottomLeftRowContainerCtrl:this.bottomLeftRowContainerCtrl,bottomRightRowContainerCtrl:this.bottomRightRowContainerCtrl,topCenterRowContainerCtrl:this.topCenterRowContainerCtrl,topLeftRowContainerCtrl:this.topLeftRowContainerCtrl,topRightRowContainerCtrl:this.topRightRowContainerCtrl,stickyTopCenterRowContainerCtrl:this.stickyTopCenterRowContainerCtrl,stickyTopLeftRowContainerCtrl:this.stickyTopLeftRowContainerCtrl,stickyTopRightRowContainerCtrl:this.stickyTopRightRowContainerCtrl,centerHeaderRowContainerCtrl:this.centerHeaderRowContainerCtrl,leftHeaderRowContainerCtrl:this.leftHeaderRowContainerCtrl,rightHeaderRowContainerCtrl:this.rightHeaderRowContainerCtrl,fakeHScrollComp:this.fakeHScrollComp,fakeVScrollComp:this.fakeVScrollComp,gridBodyCtrl:this.gridBodyCtrl,gridCtrl:this.gridCtrl,gridHeaderCtrl:this.gridHeaderCtrl}}registerFakeHScrollComp(e){this.fakeHScrollComp=e,this.checkReady()}registerFakeVScrollComp(e){this.fakeVScrollComp=e,this.checkReady()}registerGridHeaderCtrl(e){this.gridHeaderCtrl=e,this.checkReady()}registerCenterRowContainerCtrl(e){this.centerRowContainerCtrl=e,this.checkReady()}registerLeftRowContainerCtrl(e){this.leftRowContainerCtrl=e,this.checkReady()}registerRightRowContainerCtrl(e){this.rightRowContainerCtrl=e,this.checkReady()}registerTopCenterRowContainerCtrl(e){this.topCenterRowContainerCtrl=e,this.checkReady()}registerTopLeftRowContainerCon(e){this.topLeftRowContainerCtrl=e,this.checkReady()}registerTopRightRowContainerCtrl(e){this.topRightRowContainerCtrl=e,this.checkReady()}registerStickyTopCenterRowContainerCtrl(e){this.stickyTopCenterRowContainerCtrl=e,this.checkReady()}registerStickyTopLeftRowContainerCon(e){this.stickyTopLeftRowContainerCtrl=e,this.checkReady()}registerStickyTopRightRowContainerCtrl(e){this.stickyTopRightRowContainerCtrl=e,this.checkReady()}registerBottomCenterRowContainerCtrl(e){this.bottomCenterRowContainerCtrl=e,this.checkReady()}registerBottomLeftRowContainerCtrl(e){this.bottomLeftRowContainerCtrl=e,this.checkReady()}registerBottomRightRowContainerCtrl(e){this.bottomRightRowContainerCtrl=e,this.checkReady()}registerHeaderContainer(e,t){switch(t){case"left":this.leftHeaderRowContainerCtrl=e;break;case"right":this.rightHeaderRowContainerCtrl=e;break;default:this.centerHeaderRowContainerCtrl=e}this.checkReady()}registerGridBodyCtrl(e){this.gridBodyCtrl=e,this.checkReady()}registerGridCtrl(e){this.gridCtrl=e,this.checkReady()}getFakeHScrollComp(){return this.fakeHScrollComp}getFakeVScrollComp(){return this.fakeVScrollComp}getGridHeaderCtrl(){return this.gridHeaderCtrl}getGridCtrl(){return this.gridCtrl}getCenterRowContainerCtrl(){return this.centerRowContainerCtrl}getTopCenterRowContainerCtrl(){return this.topCenterRowContainerCtrl}getBottomCenterRowContainerCtrl(){return this.bottomCenterRowContainerCtrl}getStickyTopCenterRowContainerCtrl(){return this.stickyTopCenterRowContainerCtrl}getGridBodyCtrl(){return this.gridBodyCtrl}getHeaderRowContainerCtrls(){return[this.leftHeaderRowContainerCtrl,this.rightHeaderRowContainerCtrl,this.centerHeaderRowContainerCtrl]}getHeaderRowContainerCtrl(e){switch(e){case"left":return this.leftHeaderRowContainerCtrl;case"right":return this.rightHeaderRowContainerCtrl;default:return this.centerHeaderRowContainerCtrl}}};rC.NAME="ctrlsService",rC=Tb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He(Tb.NAME)],rC);let O0=class extends Ee{constructor(){super(...arguments),this.registry={}}register(e){this.registry[e.controllerName]=e.controllerClass}getInstance(e){const t=this.registry[e];if(null!=t)return new t}};O0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He("ctrlsFactory")],O0);var oC=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Ha extends Ne{constructor(e,t){super(e),this.direction=t,this.hideTimeout=null}postConstruct(){this.addManagedListener(this.eventService,G.EVENT_SCROLL_VISIBILITY_CHANGED,this.onScrollVisibilityChanged.bind(this)),this.onScrollVisibilityChanged(),this.addOrRemoveCssClass("ag-apple-scrollbar",FR()||Vo())}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.invisibleScrollbar=Tf(),this.invisibleScrollbar&&(this.hideAndShowInvisibleScrollAsNeeded(),this.addActiveListenerToggles()))}addActiveListenerToggles(){const i=this.getGui();["mouseenter","mousedown","touchstart"].forEach(n=>this.addManagedListener(i,n,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!0))),["mouseleave","touchend"].forEach(n=>this.addManagedListener(i,n,()=>this.addOrRemoveCssClass("ag-scrollbar-active",!1)))}onScrollVisibilityChanged(){void 0===this.invisibleScrollbar&&this.initialiseInvisibleScrollbar(),this.animationFrameService.requestAnimationFrame(()=>this.setScrollVisible())}hideAndShowInvisibleScrollAsNeeded(){this.addManagedListener(this.eventService,G.EVENT_BODY_SCROLL,e=>{e.direction===this.direction&&(null!==this.hideTimeout&&(window.clearTimeout(this.hideTimeout),this.hideTimeout=null),this.addOrRemoveCssClass("ag-scrollbar-scrolling",!0))}),this.addManagedListener(this.eventService,G.EVENT_BODY_SCROLL_END,()=>{this.hideTimeout=window.setTimeout(()=>{this.addOrRemoveCssClass("ag-scrollbar-scrolling",!1),this.hideTimeout=null},400)})}attemptSettingScrollPosition(e){const t=this.getViewport();mr(()=>Fn(t),()=>this.setScrollPosition(e),100)}getViewport(){return this.eViewport}getContainer(){return this.eContainer}onScrollCallback(e){this.addManagedListener(this.getViewport(),"scroll",e)}}oC([re("eViewport")],Ha.prototype,"eViewport",void 0),oC([re("eContainer")],Ha.prototype,"eContainer",void 0),oC([P("scrollVisibleService")],Ha.prototype,"scrollVisibleService",void 0),oC([P("ctrlsService")],Ha.prototype,"ctrlsService",void 0),oC([P("animationFrameService")],Ha.prototype,"animationFrameService",void 0);var aC=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Hc extends Ha{constructor(){super(Hc.TEMPLATE,"horizontal")}postConstruct(){super.postConstruct();const e=this.setFakeHScrollSpacerWidths.bind(this);this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedListener(this.eventService,G.EVENT_PINNED_ROW_DATA_CHANGED,this.onPinnedRowDataChanged.bind(this)),this.addManagedPropertyListener("domLayout",e),this.ctrlsService.registerFakeHScrollComp(this),this.createManagedBean(new Lh(t=>this.eContainer.style.width=`${t}px`)),this.addManagedPropertyListeners(["suppressHorizontalScroll"],this.onScrollVisibilityChanged.bind(this))}initialiseInvisibleScrollbar(){void 0===this.invisibleScrollbar&&(this.enableRtl=this.gridOptionsService.get("enableRtl"),super.initialiseInvisibleScrollbar(),this.invisibleScrollbar&&this.refreshCompBottom())}onPinnedRowDataChanged(){this.refreshCompBottom()}refreshCompBottom(){if(!this.invisibleScrollbar)return;const e=this.pinnedRowModel.getPinnedBottomTotalHeight();this.getGui().style.bottom=`${e}px`}onScrollVisibilityChanged(){super.onScrollVisibilityChanged(),this.setFakeHScrollSpacerWidths()}setFakeHScrollSpacerWidths(){const e=this.scrollVisibleService.isVerticalScrollShowing();let t=this.columnModel.getDisplayedColumnsRightWidth();const i=!this.enableRtl&&e,n=this.gridOptionsService.getScrollbarWidth();i&&(t+=n),Ho(this.eRightSpacer,t),this.eRightSpacer.classList.toggle("ag-scroller-corner",t<=n);let s=this.columnModel.getDisplayedColumnsLeftWidth();this.enableRtl&&e&&(s+=n),Ho(this.eLeftSpacer,s),this.eLeftSpacer.classList.toggle("ag-scroller-corner",s<=n)}setScrollVisible(){const e=this.scrollVisibleService.isHorizontalScrollShowing(),t=this.invisibleScrollbar,i=this.gridOptionsService.get("suppressHorizontalScroll"),n=e&&this.gridOptionsService.getScrollbarWidth()||0,o=i?0:0===n&&t?16:n;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Eh(this.getGui(),o),Eh(this.eViewport,o),Eh(this.eContainer,o),this.setDisplayed(e,{skipAriaHidden:!0})}getScrollPosition(){return vv(this.getViewport(),this.enableRtl)}setScrollPosition(e){Fn(this.getViewport())||this.attemptSettingScrollPosition(e),Cv(this.getViewport(),e,this.enableRtl)}}Hc.TEMPLATE='<div class="ag-body-horizontal-scroll" aria-hidden="true">\n            <div class="ag-horizontal-left-spacer" ref="eLeftSpacer"></div>\n            <div class="ag-body-horizontal-scroll-viewport" ref="eViewport">\n                <div class="ag-body-horizontal-scroll-container" ref="eContainer"></div>\n            </div>\n            <div class="ag-horizontal-right-spacer" ref="eRightSpacer"></div>\n        </div>',aC([re("eLeftSpacer")],Hc.prototype,"eLeftSpacer",void 0),aC([re("eRightSpacer")],Hc.prototype,"eRightSpacer",void 0),aC([P("columnModel")],Hc.prototype,"columnModel",void 0),aC([P("pinnedRowModel")],Hc.prototype,"pinnedRowModel",void 0),aC([Se],Hc.prototype,"postConstruct",null);var M0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let au=class extends Ee{postConstruct(){const e=this.checkContainerWidths.bind(this);this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_CHANGED,e),this.addManagedListener(this.eventService,G.EVENT_DISPLAYED_COLUMNS_WIDTH_CHANGED,e),this.addManagedPropertyListener("domLayout",e)}checkContainerWidths(){const e=this.gridOptionsService.isDomLayout("print"),t=e?0:this.columnModel.getDisplayedColumnsLeftWidth(),i=e?0:this.columnModel.getDisplayedColumnsRightWidth();t!=this.leftWidth&&(this.leftWidth=t,this.eventService.dispatchEvent({type:G.EVENT_LEFT_PINNED_WIDTH_CHANGED})),i!=this.rightWidth&&(this.rightWidth=i,this.eventService.dispatchEvent({type:G.EVENT_RIGHT_PINNED_WIDTH_CHANGED}))}getPinnedRightWidth(){return this.rightWidth}getPinnedLeftWidth(){return this.leftWidth}};M0([P("columnModel")],au.prototype,"columnModel",void 0),M0([Se],au.prototype,"postConstruct",null),au=M0([He("pinnedWidthService")],au);var lC=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let tp=class extends Ee{constructor(){super(...arguments),this.events=[]}postConstruct(){"clientSide"==this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel)}dispatchExpanded(e){null!=this.clientSideRowModel?(this.events.push(e),null==this.dispatchExpandedDebounced&&(this.dispatchExpandedDebounced=this.animationFrameService.debounce(()=>{this.clientSideRowModel&&this.clientSideRowModel.onRowGroupOpened(),this.events.forEach(i=>this.eventService.dispatchEvent(i)),this.events=[]})),this.dispatchExpandedDebounced()):this.eventService.dispatchEvent(e)}};lC([P("animationFrameService")],tp.prototype,"animationFrameService",void 0),lC([P("rowModel")],tp.prototype,"rowModel",void 0),lC([Se],tp.prototype,"postConstruct",null),tp=lC([He("rowNodeEventThrottle")],tp);const lu=(r,e)=>{var t;return"clientSide"===(null!==(t=e.rowModelType)&&void 0!==t?t:"clientSide")?{module:ze.RowGroupingModule}:null},cC={enableRowGroup:lu,rowGroup:lu,rowGroupIndex:lu,enablePivot:lu,enableValue:lu,pivot:lu,pivotIndex:lu,aggFunc:lu,cellEditor:r=>"agRichSelect"===r.cellEditor||"agRichSelectCellEditor"===r.cellEditor?{module:ze.RichSelectModule}:null,menuTabs:r=>{var e;const t=["columnsMenuTab","generalMenuTab"];return null!==(e=r.menuTabs)&&void 0!==e&&e.some(i=>t.includes(i))?{module:ze.MenuModule}:null},columnsMenuParams:{module:[ze.MenuModule,ze.ColumnsToolPanelModule]},columnChooserParams:{module:[ze.MenuModule,ze.ColumnsToolPanelModule]},headerCheckboxSelection:{supportedRowModels:["clientSide","serverSide"],dependencies:(r,{rowSelection:e})=>"multiple"===e?null:"headerCheckboxSelection is only supported with rowSelection=multiple"},headerCheckboxSelectionFilteredOnly:{supportedRowModels:["clientSide"],dependencies:(r,{rowSelection:e})=>"multiple"===e?null:"headerCheckboxSelectionFilteredOnly is only supported with rowSelection=multiple"},headerCheckboxSelectionCurrentPageOnly:{supportedRowModels:["clientSide"],dependencies:(r,{rowSelection:e})=>"multiple"===e?null:"headerCheckboxSelectionCurrentPageOnly is only supported with rowSelection=multiple"},children:()=>kl},kl={objectName:"colDef",allProperties:Uf.ALL_PROPERTIES,docsUrl:"column-properties/",deprecations:{columnsMenuParams:{version:"31.1",message:"Use `columnChooserParams` instead."},suppressMenu:{version:"31.1",message:"Use `suppressHeaderMenuButton` instead."}},validations:cC},sI={suppressContextMenu:!1,preventDefaultOnContextMenu:!1,allowContextMenuWithControlKey:!1,suppressMenuHide:!1,enableBrowserTooltips:!1,tooltipTrigger:"hover",tooltipShowDelay:2e3,tooltipHideDelay:1e4,tooltipMouseTrack:!1,tooltipInteraction:!1,copyHeadersToClipboard:!1,copyGroupHeadersToClipboard:!1,clipboardDelimiter:"\t",suppressCopyRowsToClipboard:!1,suppressCopySingleCellRanges:!1,suppressLastEmptyLineOnPaste:!1,suppressClipboardPaste:!1,suppressClipboardApi:!1,suppressCutToClipboard:!1,maintainColumnOrder:!1,suppressFieldDotNotation:!1,allowDragFromColumnsToolPanel:!1,suppressMovableColumns:!1,suppressColumnMoveAnimation:!1,suppressDragLeaveHidesColumns:!1,suppressRowGroupHidesColumns:!1,suppressAutoSize:!1,autoSizePadding:20,skipHeaderOnAutoSize:!1,singleClickEdit:!1,suppressClickEdit:!1,readOnlyEdit:!1,stopEditingWhenCellsLoseFocus:!1,enterNavigatesVertically:!1,enterNavigatesVerticallyAfterEdit:!1,enableCellEditingOnBackspace:!1,undoRedoCellEditing:!1,undoRedoCellEditingLimit:10,suppressCsvExport:!1,suppressExcelExport:!1,cacheQuickFilter:!1,includeHiddenColumnsInQuickFilter:!1,excludeChildrenWhenTreeDataFiltering:!1,enableAdvancedFilter:!1,includeHiddenColumnsInAdvancedFilter:!1,enableCharts:!1,suppressChartToolPanelsButton:!1,masterDetail:!1,keepDetailRows:!1,keepDetailRowsCount:10,detailRowAutoHeight:!1,tabIndex:0,rowBuffer:10,valueCache:!1,valueCacheNeverExpires:!1,enableCellExpressions:!1,suppressTouch:!1,suppressFocusAfterRefresh:!1,suppressAsyncEvents:!1,suppressBrowserResizeObserver:!1,suppressPropertyNamesCheck:!1,suppressChangeDetection:!1,debug:!1,suppressLoadingOverlay:!1,suppressNoRowsOverlay:!1,pagination:!1,paginationPageSize:100,paginationPageSizeSelector:!0,paginationAutoPageSize:!1,paginateChildRows:!1,suppressPaginationPanel:!1,pivotMode:!1,pivotPanelShow:"never",pivotDefaultExpanded:0,pivotSuppressAutoColumn:!1,suppressExpandablePivotGroups:!1,functionsReadOnly:!1,suppressAggFuncInHeader:!1,alwaysAggregateAtRootLevel:!1,aggregateOnlyChangedColumns:!1,suppressAggFilteredOnly:!1,removePivotHeaderRowWhenSingleValueColumn:!1,animateRows:!0,enableCellChangeFlash:!1,cellFlashDelay:500,cellFlashDuration:500,cellFadeDelay:1e3,cellFadeDuration:1e3,allowShowChangeAfterFilter:!1,domLayout:"normal",ensureDomOrder:!1,enableRtl:!1,suppressColumnVirtualisation:!1,suppressMaxRenderedRowRestriction:!1,suppressRowVirtualisation:!1,rowDragManaged:!1,suppressRowDrag:!1,suppressMoveWhenRowDragging:!1,rowDragEntireRow:!1,rowDragMultiRow:!1,embedFullWidthRows:!1,groupDisplayType:"singleColumn",groupDefaultExpanded:0,groupMaintainOrder:!1,groupSelectsChildren:!1,groupIncludeTotalFooter:!1,groupSuppressBlankHeader:!1,groupSelectsFiltered:!1,showOpenedGroup:!1,groupRemoveSingleChildren:!1,groupRemoveLowestSingleChildren:!1,groupHideOpenParents:!1,groupAllowUnbalanced:!1,rowGroupPanelShow:"never",suppressMakeColumnVisibleAfterUnGroup:!1,treeData:!1,rowGroupPanelSuppressSort:!1,suppressGroupRowsSticky:!1,rowModelType:"clientSide",asyncTransactionWaitMillis:50,suppressModelUpdateAfterUpdateTransaction:!1,cacheOverflowSize:1,infiniteInitialRowCount:1,serverSideInitialRowCount:1,suppressServerSideInfiniteScroll:!1,cacheBlockSize:100,maxBlocksInCache:-1,maxConcurrentDatasourceRequests:2,blockLoadDebounceMillis:0,purgeClosedRowNodes:!1,serverSideSortAllLevels:!1,serverSideOnlyRefreshFilteredGroups:!1,serverSideSortOnServer:!1,serverSideFilterOnServer:!1,serverSidePivotResultFieldSeparator:"_",viewportRowModelPageSize:5,viewportRowModelBufferSize:5,alwaysShowHorizontalScroll:!1,alwaysShowVerticalScroll:!1,debounceVerticalScrollbar:!1,suppressHorizontalScroll:!1,suppressScrollOnNewData:!1,suppressScrollWhenPopupsAreOpen:!1,suppressAnimationFrame:!1,suppressMiddleClickScrolls:!1,suppressPreventDefaultOnMouseWheel:!1,rowMultiSelectWithClick:!1,suppressRowDeselection:!1,suppressRowClickSelection:!1,suppressCellFocus:!1,suppressHeaderFocus:!1,suppressMultiRangeSelection:!1,enableCellTextSelection:!1,enableRangeSelection:!1,enableRangeHandle:!1,enableFillHandle:!1,fillHandleDirection:"xy",suppressClearOnFillReduction:!1,accentedSort:!1,unSortIcon:!1,suppressMultiSort:!1,alwaysMultiSort:!1,suppressMaintainUnsortedOrder:!1,suppressRowHoverHighlight:!1,suppressRowTransform:!1,columnHoverHighlight:!1,deltaSort:!1,enableGroupEdit:!1,suppressGroupMaintainValueType:!1,functionsPassive:!1,groupLockGroupColumns:0,serverSideEnableClientSideSort:!1},zA={sideBar:{module:ze.SideBarModule},statusBar:{module:ze.StatusBarModule},enableCharts:{module:ze.GridChartsModule},getMainMenuItems:{module:ze.MenuModule},getContextMenuItems:{module:ze.MenuModule},allowContextMenuWithControlKey:{module:ze.MenuModule},enableAdvancedFilter:{module:ze.AdvancedFilterModule},treeData:{supportedRowModels:["clientSide","serverSide"],module:ze.RowGroupingModule,dependencies:r=>{var e;const t=null!==(e=r.rowModelType)&&void 0!==e?e:"clientSide";switch(t){case"clientSide":const i=`treeData requires 'getDataPath' in the ${t} row model.`;return r.getDataPath?null:i;case"serverSide":const n=`treeData requires 'isServerSideGroup' and 'getServerSideGroupKey' in the ${t} row model.`;return r.isServerSideGroup&&r.getServerSideGroupKey?null:n}return null}},masterDetail:{module:ze.MasterDetailModule},enableRangeSelection:{module:ze.RangeSelectionModule},enableRangeHandle:{dependencies:{enableRangeSelection:[!0]}},enableFillHandle:{dependencies:{enableRangeSelection:[!0]}},groupDefaultExpanded:{supportedRowModels:["clientSide"]},groupIncludeFooter:{supportedRowModels:["clientSide","serverSide"],dependencies:r=>{var e;switch(null!==(e=r.rowModelType)&&void 0!==e?e:"clientSide"){case"clientSide":return null;case"serverSide":const i="groupIncludeFooter is not supported alongside suppressServerSideInfiniteScroll";return r.suppressServerSideInfiniteScroll?i:null}return null}},groupIncludeTotalFooter:{supportedRowModels:["clientSide"]},groupRemoveSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveLowestSingleChildren:[void 0,!1]}},groupRemoveLowestSingleChildren:{dependencies:{groupHideOpenParents:[void 0,!1],groupRemoveSingleChildren:[void 0,!1]}},groupSelectsChildren:{dependencies:{rowSelection:["multiple"]}},suppressParentsInRowNodes:{dependencies:{groupSelectsChildren:[void 0,!1]}},viewportDatasource:{supportedRowModels:["viewport"],module:ze.ViewportRowModelModule},serverSideDatasource:{supportedRowModels:["serverSide"],module:ze.ServerSideRowModelModule},cacheBlockSize:{supportedRowModels:["serverSide","infinite"]},datasource:{supportedRowModels:["infinite"],module:ze.InfiniteRowModelModule},rowData:{supportedRowModels:["clientSide"],module:ze.ClientSideRowModelModule},columnDefs:()=>kl,defaultColDef:()=>kl,defaultColGroupDef:()=>kl,autoGroupColumnDef:()=>kl},$A={objectName:"gridOptions",allProperties:[...Wi.ALL_PROPERTIES,...xi.EVENT_CALLBACKS],propertyExceptions:["api","columnApi"],docsUrl:"grid-options/",deprecations:{enableChartToolPanelsButton:{version:"29",message:"The Chart Tool Panels button is now enabled by default. To hide the Chart Tool Panels button and display the hamburger button instead, set suppressChartToolPanelsButton=true."},functionsPassive:{version:"29.2"},onColumnRowGroupChangeRequest:{version:"29.2"},onColumnPivotChangeRequest:{version:"29.2"},onColumnValueChangeRequest:{version:"29.2"},onColumnAggFuncChangeRequest:{version:"29.2"},serverSideFilterAllLevels:{version:"30",message:"All server-side group levels are now filtered by default. This can be toggled using `serverSideOnlyRefreshFilteredGroups`."},suppressAggAtRootLevel:{version:"30",message:"The root level aggregation is now suppressed by default. This can be toggled using  `alwaysAggregateAtRootLevel`."},excludeHiddenColumnsFromQuickFilter:{version:"30",message:"Hidden columns are now excluded from the Quick Filter by default. This can be toggled using `includeHiddenColumnsInQuickFilter`."},enterMovesDown:{version:"30",renamed:"enterNavigatesVertically"},enterMovesDownAfterEdit:{version:"30",renamed:"enterNavigatesVerticallyAfterEdit"},suppressParentsInRowNodes:{version:"30.2",message:"Using suppressParentsInRowNodes is no longer recommended. To serialize nodes it is now recommended to instead remove the parent node reference before serialization."},advancedFilterModel:{version:"31",message:"Use `initialState.filter.advancedFilterModel` instead."},suppressAsyncEvents:{version:"31",message:"Events should be handled asynchronously."},cellFadeDelay:{version:"31.1",renamed:"cellFadeDuration"},cellFlashDelay:{version:"31.1",renamed:"cellFlashDuration"},suppressServerSideInfiniteScroll:{version:"31.1"},serverSideSortOnServer:{version:"31.1"},serverSideFilterOnServer:{version:"31.1"}},validations:zA};var En,Ua=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let ks=En=class{constructor(){this.destroyed=!1,this.domDataKey="__AG_"+Math.random().toString(),this.propertyEventService=new go,this.globalEventHandlerFactory=e=>(t,i)=>{if(this.destroyed)return;const n=En.alwaysSyncGlobalEvents.has(t);if(n&&!e||!n&&e)return;const s=xi.getCallbackForEvent(t),o=this.gridOptions[s];"function"==typeof o&&this.frameworkOverrides.wrapOutgoing(()=>{o(i)})}}get context(){return this.gridOptions.context}init(){this.columnApi=new rg(this.api);const e=!this.get("suppressAsyncEvents");this.eventService.addGlobalListener(this.globalEventHandlerFactory().bind(this),e),this.eventService.addGlobalListener(this.globalEventHandlerFactory(!0).bind(this),!1),this.propertyEventService.setFrameworkOverrides(this.frameworkOverrides),this.getScrollbarWidth()}destroy(){this.destroyed=!0,this.columnApi=void 0}get(e){var t;return null!==(t=this.gridOptions[e])&&void 0!==t?t:sI[e]}getCallback(e){return this.mergeGridCommonParams(this.gridOptions[e])}exists(e){return Ie(this.gridOptions[e])}mergeGridCommonParams(e){return e&&(i=>{const n=i;return n.api=this.api,n.columnApi=this.columnApi,n.context=this.context,e(n)})}static toBoolean(e){return"boolean"==typeof e?e:"string"==typeof e&&("TRUE"===e.toUpperCase()||""==e)}static toNumber(e){if("number"==typeof e)return e;if("string"==typeof e){const t=parseInt(e);return isNaN(t)?void 0:t}}static toConstrainedNum(e,t){return i=>{const n=En.toNumber(i);if(!(null==n||n<e||n>t))return n}}static getCoercedValue(e,t){const i=En.PROPERTY_COERCIONS.get(e);return i?i(t):t}static getCoercedGridOptions(e){const t={};return Object.entries(e).forEach(([i,n])=>{const s=En.getCoercedValue(i,n);t[i]=s}),t}updateGridOptions({options:e,source:t="api"}){const i={id:En.changeSetId++,properties:[]},n=[];Object.entries(e).forEach(([s,o])=>{"api"===t&&jx[s]&&st(`${s} is an initial property and cannot be updated.`);const a=En.getCoercedValue(s,o),u=this.gridOptions[s];("object"==typeof a&&"api"===t||u!==a)&&(this.gridOptions[s]=a,n.push({type:s,currentValue:a,previousValue:u,changeSet:i,source:t}))}),this.validationService.processGridOptions(this.gridOptions),i.properties=n.map(s=>s.type),n.forEach(s=>{this.gridOptions.debug&&console.log(`AG Grid: Updated property ${s.type} from `,s.previousValue," to  ",s.currentValue),this.propertyEventService.dispatchEvent(s)})}addEventListener(e,t){this.propertyEventService.addEventListener(e,t)}removeEventListener(e,t){this.propertyEventService.removeEventListener(e,t)}getScrollbarWidth(){if(null==this.scrollbarWidth){const t="number"==typeof this.gridOptions.scrollbarWidth&&this.gridOptions.scrollbarWidth>=0?this.gridOptions.scrollbarWidth:vE();null!=t&&(this.scrollbarWidth=t,this.eventService.dispatchEvent({type:G.EVENT_SCROLLBAR_WIDTH_CHANGED}))}return this.scrollbarWidth}isRowModelType(e){return this.gridOptions.rowModelType===e||"clientSide"===e&&gt(this.gridOptions.rowModelType)}isDomLayout(e){var t;return(null!==(t=this.gridOptions.domLayout)&&void 0!==t?t:"normal")===e}isRowSelection(){return"single"===this.gridOptions.rowSelection||"multiple"===this.gridOptions.rowSelection}useAsyncEvents(){return!this.get("suppressAsyncEvents")}isGetRowHeightFunction(){return"function"==typeof this.gridOptions.getRowHeight}getRowHeightForNode(e,t=!1,i){if(null==i&&(i=this.environment.getDefaultRowHeight()),this.isGetRowHeightFunction()){if(t)return{height:i,estimated:!0};const s={node:e,data:e.data},o=this.getCallback("getRowHeight")(s);if(this.isNumeric(o))return 0===o&&st("The return of `getRowHeight` cannot be zero. If the intention is to hide rows, use a filter instead."),{height:Math.max(1,o),estimated:!1}}return e.detail&&this.get("masterDetail")?this.getMasterDetailRowHeight():{height:this.gridOptions.rowHeight&&this.isNumeric(this.gridOptions.rowHeight)?this.gridOptions.rowHeight:i,estimated:!1}}getMasterDetailRowHeight(){return this.get("detailRowAutoHeight")?{height:1,estimated:!1}:this.isNumeric(this.gridOptions.detailRowHeight)?{height:this.gridOptions.detailRowHeight,estimated:!1}:{height:300,estimated:!1}}getRowHeightAsNumber(){if(!this.gridOptions.rowHeight||gt(this.gridOptions.rowHeight))return this.environment.getDefaultRowHeight();const e=this.environment.refreshRowHeightVariable();return-1!==e?e:(console.warn("AG Grid row height must be a number if not using standard row model"),this.environment.getDefaultRowHeight())}isNumeric(e){return!isNaN(e)&&"number"==typeof e&&isFinite(e)}getDomDataKey(){return this.domDataKey}getDomData(e,t){const i=e[this.getDomDataKey()];return i?i[t]:void 0}setDomData(e,t,i){const n=this.getDomDataKey();let s=e[n];gt(s)&&(s={},e[n]=s),s[t]=i}getDocument(){let e=null;return this.gridOptions.getDocument&&Ie(this.gridOptions.getDocument)?e=this.gridOptions.getDocument():this.eGridDiv&&(e=this.eGridDiv.ownerDocument),e&&Ie(e)?e:document}getWindow(){return this.getDocument().defaultView||window}getRootNode(){return this.eGridDiv.getRootNode()}getAsyncTransactionWaitMillis(){return Ie(this.gridOptions.asyncTransactionWaitMillis)?this.gridOptions.asyncTransactionWaitMillis:50}isAnimateRows(){return!this.get("ensureDomOrder")&&this.get("animateRows")}isGroupRowsSticky(){return!(this.get("suppressGroupRowsSticky")||this.get("paginateChildRows")||this.get("groupHideOpenParents")||this.isDomLayout("print"))}isColumnsSortingCoupledToGroup(){return!this.gridOptions.autoGroupColumnDef?.comparator&&!this.get("treeData")}getGroupAggFiltering(){const e=this.gridOptions.groupAggFiltering;return"function"==typeof e?this.getCallback("groupAggFiltering"):!0===e?()=>!0:void 0}isGroupIncludeFooterTrueOrCallback(){const e=this.gridOptions.groupIncludeFooter;return!0===e||"function"==typeof e}getGroupIncludeFooter(){const e=this.gridOptions.groupIncludeFooter;return"function"==typeof e?this.getCallback("groupIncludeFooter"):!0===e?()=>!0:()=>!1}isGroupMultiAutoColumn(){return this.gridOptions.groupDisplayType?"multipleColumns"===this.gridOptions.groupDisplayType:this.get("groupHideOpenParents")}isGroupUseEntireRow(e){return!e&&"groupRows"===this.gridOptions.groupDisplayType}getGridCommonParams(){return{api:this.api,columnApi:this.columnApi,context:this.context}}addGridCommonParams(e){const t=e;return t.api=this.api,t.columnApi=this.columnApi,t.context=this.context,t}};ks.alwaysSyncGlobalEvents=new Set([G.EVENT_GRID_PRE_DESTROYED]),ks.PROPERTY_COERCIONS=new Map([...Wi.BOOLEAN_PROPERTIES.map(r=>[r,En.toBoolean]),...Wi.NUMBER_PROPERTIES.map(r=>[r,En.toNumber]),["groupAggFiltering",r=>"function"==typeof r?r:En.toBoolean(r)],["pageSize",En.toConstrainedNum(1,Number.MAX_VALUE)],["autoSizePadding",En.toConstrainedNum(0,Number.MAX_VALUE)],["keepDetailRowsCount",En.toConstrainedNum(1,Number.MAX_VALUE)],["rowBuffer",En.toConstrainedNum(0,Number.MAX_VALUE)],["infiniteInitialRowCount",En.toConstrainedNum(1,Number.MAX_VALUE)],["cacheOverflowSize",En.toConstrainedNum(1,Number.MAX_VALUE)],["cacheBlockSize",En.toConstrainedNum(1,Number.MAX_VALUE)],["serverSideInitialRowCount",En.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelPageSize",En.toConstrainedNum(1,Number.MAX_VALUE)],["viewportRowModelBufferSize",En.toConstrainedNum(0,Number.MAX_VALUE)]]),ks.changeSetId=0,Ua([P("gridOptions")],ks.prototype,"gridOptions",void 0),Ua([P("eventService")],ks.prototype,"eventService",void 0),Ua([P("environment")],ks.prototype,"environment",void 0),Ua([P("frameworkOverrides")],ks.prototype,"frameworkOverrides",void 0),Ua([P("eGridDiv")],ks.prototype,"eGridDiv",void 0),Ua([P("validationService")],ks.prototype,"validationService",void 0),Ua([P("gridApi")],ks.prototype,"api",void 0),Ua([Se],ks.prototype,"init",null),Ua([Js],ks.prototype,"destroy",null),ks=En=Ua([He("gridOptionsService")],ks);let x0=class extends Ee{getLocaleTextFunc(){const e=this.gridOptionsService.getCallback("getLocaleText");if(e)return(i,n,s)=>e({key:i,defaultValue:n,variableValues:s});const t=this.gridOptionsService.get("localeText");return(i,n,s)=>{let o=t&&t[i];if(o&&s&&s.length){let a=0;for(;!(a>=s.length||-1===o.indexOf("${variable}"));)o=o.replace("${variable}",s[a++])}return o??n}}};x0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He("localeService")],x0);class Rb extends Ha{constructor(){super(Rb.TEMPLATE,"vertical")}postConstruct(){super.postConstruct(),this.createManagedBean(new XS(this.eContainer)),this.ctrlsService.registerFakeVScrollComp(this),this.addManagedListener(this.eventService,G.EVENT_ROW_CONTAINER_HEIGHT_CHANGED,this.onRowContainerHeightChanged.bind(this))}setScrollVisible(){const e=this.scrollVisibleService.isVerticalScrollShowing(),t=this.invisibleScrollbar,i=e&&this.gridOptionsService.getScrollbarWidth()||0,n=0===i&&t?16:i;this.addOrRemoveCssClass("ag-scrollbar-invisible",t),Ho(this.getGui(),n),Ho(this.eViewport,n),Ho(this.eContainer,n),this.setDisplayed(e,{skipAriaHidden:!0})}onRowContainerHeightChanged(){const{ctrlsService:e}=this,i=e.getGridBodyCtrl().getBodyViewportElement(),n=this.getScrollPosition(),s=i.scrollTop;n!=s&&this.setScrollPosition(s,!0)}getScrollPosition(){return this.getViewport().scrollTop}setScrollPosition(e,t){!t&&!Fn(this.getViewport())&&this.attemptSettingScrollPosition(e),this.getViewport().scrollTop=e}}Rb.TEMPLATE='<div class="ag-body-vertical-scroll" aria-hidden="true">\n            <div class="ag-body-vertical-scroll-viewport" ref="eViewport">\n                <div class="ag-body-vertical-scroll-container" ref="eContainer"></div>\n            </div>\n        </div>',function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Se],Rb.prototype,"postConstruct",null);var vg=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const oI={january:"January",february:"February",march:"March",april:"April",may:"May",june:"June",july:"July",august:"August",september:"September",october:"October",november:"November",december:"December"},P0=["january","february","march","april","may","june","july","august","september","october","november","december"];let Qo=class extends Ee{constructor(){super(...arguments),this.dataTypeDefinitions={},this.isWaitingForRowData=!1,this.isColumnTypeOverrideInDataTypeDefinitions=!1,this.columnStateUpdatesPendingInference={},this.columnStateUpdateListenerDestroyFuncs=[]}init(){this.groupHideOpenParents=this.gridOptionsService.get("groupHideOpenParents"),this.addManagedPropertyListener("groupHideOpenParents",()=>{this.groupHideOpenParents=this.gridOptionsService.get("groupHideOpenParents")}),this.processDataTypeDefinitions(),this.addManagedPropertyListener("dataTypeDefinitions",e=>{this.processDataTypeDefinitions(),this.columnModel.recreateColumnDefs(xd(e.source))})}processDataTypeDefinitions(){var e;const t=this.getDefaultDataTypes();this.dataTypeDefinitions={},Object.entries(t).forEach(([n,s])=>{this.dataTypeDefinitions[n]=Object.assign(Object.assign({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)})});const i=null!==(e=this.gridOptionsService.get("dataTypeDefinitions"))&&void 0!==e?e:{};this.dataTypeMatchers={},Object.entries(i).forEach(([n,s])=>{const o=this.processDataTypeDefinition(s,i,[n],t);o&&(this.dataTypeDefinitions[n]=o,s.dataTypeMatcher&&(this.dataTypeMatchers[n]=s.dataTypeMatcher))}),this.checkObjectValueHandlers(t),["dateString","text","number","boolean","date"].forEach(n=>{const s=this.dataTypeMatchers[n];s&&delete this.dataTypeMatchers[n],this.dataTypeMatchers[n]=s??t[n].dataTypeMatcher})}mergeDataTypeDefinitions(e,t){const i=Object.assign(Object.assign({},e),t);return e.columnTypes&&t.columnTypes&&t.appendColumnTypes&&(i.columnTypes=[...this.convertColumnTypes(e.columnTypes),...this.convertColumnTypes(t.columnTypes)]),i}processDataTypeDefinition(e,t,i,n){let s;const o=e.extendsDataType;if(e.columnTypes&&(this.isColumnTypeOverrideInDataTypeDefinitions=!0),e.extendsDataType===e.baseDataType){let a=n[o];const c=t[o];if(a&&c&&(a=c),!this.validateDataTypeDefinition(e,a,o))return;s=this.mergeDataTypeDefinitions(a,e)}else{if(i.includes(o))return void st('Data type definition hierarchies (via the "extendsDataType" property) cannot contain circular references.');const a=t[o];if(!this.validateDataTypeDefinition(e,a,o))return;const c=this.processDataTypeDefinition(a,t,[...i,o],n);if(!c)return;s=this.mergeDataTypeDefinitions(c,e)}return Object.assign(Object.assign({},s),{groupSafeValueFormatter:this.createGroupSafeValueFormatter(s)})}validateDataTypeDefinition(e,t,i){return t?t.baseDataType===e.baseDataType||(st('The "baseDataType" property of a data type definition must match that of its parent.'),!1):(st(`The data type definition ${i} does not exist.`),!1)}createGroupSafeValueFormatter(e){if(e.valueFormatter)return t=>{var i,n;if(null!==(i=t.node)&&void 0!==i&&i.group){const s=t.column.getAggFunc();if(s){if("first"===s||"last"===s)return e.valueFormatter(t);if("number"===e.baseDataType&&"count"!==s){if("number"==typeof t.value)return e.valueFormatter(t);if("object"==typeof t.value){if(!t.value)return;if("toNumber"in t.value)return e.valueFormatter(Object.assign(Object.assign({},t),{value:t.value.toNumber()}));if("value"in t.value)return e.valueFormatter(Object.assign(Object.assign({},t),{value:t.value.value}))}}}if(!this.gridOptionsService.get("suppressGroupMaintainValueType"))return}else if(this.groupHideOpenParents&&t.column.isRowGroupActive()){if("string"!=typeof t.value||(null===(n=e.dataTypeMatcher)||void 0===n?void 0:n.call(e,t.value)))return e.valueFormatter(t);if(!this.gridOptionsService.get("suppressGroupMaintainValueType"))return}return e.valueFormatter(t)}}updateColDefAndGetDataTypeDefinitionColumnType(e,t,i){let{cellDataType:n}=t;const{field:s}=t;if(void 0===n&&(n=e.cellDataType),(null==n||!0===n)&&(n=!!this.canInferCellDataType(e,t)&&this.inferCellDataType(s,i)),!n)return void(e.cellDataType=!1);const o=this.dataTypeDefinitions[n];if(o)return e.cellDataType=n,o.groupSafeValueFormatter&&(e.valueFormatter=o.groupSafeValueFormatter),o.valueParser&&(e.valueParser=o.valueParser),o.suppressDefaultProperties||this.setColDefPropertiesForBaseDataType(e,o,i),o.columnTypes;st(`Missing data type definition - "${n}"`)}updateColDefAndGetColumnType(e,t,i){var n,s;const o=this.updateColDefAndGetDataTypeDefinitionColumnType(e,t,i),a=null!==(s=null!==(n=t.type)&&void 0!==n?n:o)&&void 0!==s?s:e.type;return e.type=a,a?this.convertColumnTypes(a):void 0}addColumnListeners(e){if(!this.isWaitingForRowData)return;const t=this.columnStateUpdatesPendingInference[e.getColId()];if(!t)return;const i=n=>{t.add(n.key)};e.addEventListener(ot.EVENT_STATE_UPDATED,i),this.columnStateUpdateListenerDestroyFuncs.push(()=>e.removeEventListener(ot.EVENT_STATE_UPDATED,i))}canInferCellDataType(e,t){var i;if("clientSide"!==this.rowModel.getType())return!1;const n={cellRenderer:!0,valueGetter:!0,valueParser:!0,refData:!0};if(this.doColDefPropsPreventInference(t,n))return!1;const s=null===t.type?e.type:t.type;if(s){const o=null!==(i=this.gridOptionsService.get("columnTypes"))&&void 0!==i?i:{};if(this.convertColumnTypes(s).some(c=>{const u=o[c.trim()];return u&&this.doColDefPropsPreventInference(u,n)}))return!1}return!this.doColDefPropsPreventInference(e,n)}doColDefPropsPreventInference(e,t){return[["cellRenderer","agSparklineCellRenderer"],["valueGetter",void 0],["valueParser",void 0],["refData",void 0]].some(([i,n])=>this.doesColDefPropPreventInference(e,t,i,n))}doesColDefPropPreventInference(e,t,i,n){if(!t[i])return!1;const s=e[i];return null===s?(t[i]=!1,!1):void 0===n?!!s:s===n}inferCellDataType(e,t){var i;if(!e)return;let n;const s=this.getInitialData();if(s){const a=e.indexOf(".")>=0&&!this.gridOptionsService.get("suppressFieldDotNotation");n=nn(s,e,a)}else this.initWaitForRowData(t);if(null==n)return;const[o]=null!==(i=Object.entries(this.dataTypeMatchers).find(([a,c])=>c(n)))&&void 0!==i?i:["object"];return o}getInitialData(){const e=this.gridOptionsService.get("rowData");if(e?.length)return e[0];if(this.initialData)return this.initialData;{const t=this.rowModel.getRootNode().allLeafChildren;if(t?.length)return t[0].data}return null}initWaitForRowData(e){if(this.columnStateUpdatesPendingInference[e]=new Set,this.isWaitingForRowData)return;this.isWaitingForRowData=!0;const t=this.isColumnTypeOverrideInDataTypeDefinitions;t&&this.columnModel.queueResizeOperations();const i=this.addManagedListener(this.eventService,G.EVENT_ROW_DATA_UPDATE_STARTED,n=>{const{firstRowData:s}=n;s&&(i?.(),this.isWaitingForRowData=!1,this.processColumnsPendingInference(s,t),this.columnStateUpdatesPendingInference={},t&&this.columnModel.processResizeOperations(),this.eventService.dispatchEvent({type:G.EVENT_DATA_TYPES_INFERRED}))})}isPendingInference(){return this.isWaitingForRowData}processColumnsPendingInference(e,t){this.initialData=e;const i=[];this.columnStateUpdateListenerDestroyFuncs.forEach(o=>o()),this.columnStateUpdateListenerDestroyFuncs=[];const n={},s={};Object.entries(this.columnStateUpdatesPendingInference).forEach(([o,a])=>{const c=this.columnModel.getGridColumn(o);if(!c)return;const u=c.getColDef();if(!this.columnModel.resetColumnDefIntoColumn(c,"cellDataTypeInferred"))return;const p=c.getColDef();if(t&&p.type&&p.type!==u.type){const g=this.getUpdatedColumnState(c,a);g.rowGroup&&null==g.rowGroupIndex&&(n[o]=g),g.pivot&&null==g.pivotIndex&&(s[o]=g),i.push(g)}}),t&&i.push(...this.columnModel.generateColumnStateForRowGroupAndPivotIndexes(n,s)),i.length&&this.columnModel.applyColumnState({state:i},"cellDataTypeInferred"),this.initialData=null}getUpdatedColumnState(e,t){const i=this.columnModel.getColumnStateFromColDef(e);return t.forEach(n=>{delete i[n],"rowGroup"===n?delete i.rowGroupIndex:"pivot"===n&&delete i.pivotIndex}),i}checkObjectValueHandlers(e){const t=this.dataTypeDefinitions.object,i=e.object;this.hasObjectValueParser=t.valueParser!==i.valueParser,this.hasObjectValueFormatter=t.valueFormatter!==i.valueFormatter}convertColumnTypes(e){let t=[];return e instanceof Array?e.some(n=>"string"!=typeof n)?console.warn("if colDef.type is supplied an array it should be of type 'string[]'"):t=e:"string"==typeof e?t=e.split(","):console.warn("colDef.type should be of type 'string' | 'string[]'"),t}getDateStringTypeDefinition(e){var t;return e&&null!==(t=this.getDataTypeDefinition(e))&&void 0!==t?t:this.dataTypeDefinitions.dateString}getDateParserFunction(e){return this.getDateStringTypeDefinition(e).dateParser}getDateFormatterFunction(e){return this.getDateStringTypeDefinition(e).dateFormatter}getDataTypeDefinition(e){const t=e.getColDef();if(t.cellDataType)return this.dataTypeDefinitions[t.cellDataType]}getBaseDataType(e){var t;return null===(t=this.getDataTypeDefinition(e))||void 0===t?void 0:t.baseDataType}checkType(e,t){var i;if(null==t)return!0;const n=null===(i=this.getDataTypeDefinition(e))||void 0===i?void 0:i.dataTypeMatcher;return!n||n(t)}validateColDef(e){"object"===e.cellDataType&&(e.valueFormatter===this.dataTypeDefinitions.object.groupSafeValueFormatter&&!this.hasObjectValueFormatter&&st('Cell data type is "object" but no value formatter has been provided. Please either provide an object data type definition with a value formatter, or set "colDef.valueFormatter"'),e.editable&&e.valueParser===this.dataTypeDefinitions.object.valueParser&&!this.hasObjectValueParser&&st('Cell data type is "object" but no value parser has been provided. Please either provide an object data type definition with a value parser, or set "colDef.valueParser"'))}setColDefPropertiesForBaseDataType(e,t,i){const n=(c,u,p)=>{let g=c.getColDef().valueFormatter;return g===t.groupSafeValueFormatter&&(g=t.valueFormatter),this.valueFormatterService.formatValue(c,u,p,g)},s=yt.__isRegistered(ze.SetFilterModule,this.context.getGridId()),o=this.localeService.getLocaleTextFunc(),a=c=>{const{filterParams:u}=e;e.filterParams="object"==typeof u?Object.assign(Object.assign({},u),c):c};switch(t.baseDataType){case"number":e.cellEditor="agNumberCellEditor",s&&a({comparator:(c,u)=>{const p=null==c?0:parseInt(c),g=null==u?0:parseInt(u);return p===g?0:p>g?1:-1}});break;case"boolean":e.cellEditor="agCheckboxCellEditor",e.cellRenderer="agCheckboxCellRenderer",e.suppressKeyboardEvent=c=>!!c.colDef.editable&&c.event.key===ge.SPACE,a(s?{valueFormatter:c=>Ie(c.value)?o(String(c.value),c.value?"True":"False"):o("blanks","(Blanks)")}:{maxNumConditions:1,debounceMs:0,filterOptions:["empty",{displayKey:"true",displayName:"True",predicate:(c,u)=>u,numberOfInputs:0},{displayKey:"false",displayName:"False",predicate:(c,u)=>!1===u,numberOfInputs:0}]});break;case"date":e.cellEditor="agDateCellEditor",e.keyCreator=c=>n(c.column,c.node,c.value),s&&a({valueFormatter:c=>{const u=n(c.column,c.node,c.value);return Ie(u)?u:o("blanks","(Blanks)")},treeList:!0,treeListFormatter:(c,u)=>{if(1===u&&null!=c){const p=P0[Number(c)-1];return o(p,oI[p])}return c??o("blanks","(Blanks)")}});break;case"dateString":{e.cellEditor="agDateStringCellEditor",e.keyCreator=u=>n(u.column,u.node,u.value);const c=t.dateParser;a(s?{valueFormatter:u=>{const p=n(u.column,u.node,u.value);return Ie(p)?p:o("blanks","(Blanks)")},treeList:!0,treeListPathGetter:u=>{const p=c(u??void 0);return p?[String(p.getFullYear()),String(p.getMonth()+1),String(p.getDate())]:null},treeListFormatter:(u,p)=>{if(1===p&&null!=u){const g=P0[Number(u)-1];return o(g,oI[g])}return u??o("blanks","(Blanks)")}}:{comparator:(u,p)=>{const g=c(p);return null==p||g<u?-1:g>u?1:0}});break}case"object":e.cellEditorParams={useFormatter:!0},e.comparator=(c,u)=>{const p=this.columnModel.getPrimaryColumn(i),g=p?.getColDef();if(!p||!g)return 0;const m=null==c?"":n(p,null,c),y=null==u?"":n(p,null,u);return m===y?0:m>y?1:-1},e.keyCreator=c=>n(c.column,c.node,c.value),s?a({valueFormatter:c=>{const u=n(c.column,c.node,c.value);return Ie(u)?u:o("blanks","(Blanks)")}}):e.filterValueGetter=c=>n(c.column,c.node,this.valueService.getValue(c.column,c.node))}}getDefaultDataTypes(){const e=i=>!!i.match("^\\d{4}-\\d{2}-\\d{2}$"),t=this.localeService.getLocaleTextFunc();return{number:{baseDataType:"number",valueParser:i=>{var n,s;return""===(null===(s=null===(n=i.newValue)||void 0===n?void 0:n.trim)||void 0===s?void 0:s.call(n))?null:Number(i.newValue)},valueFormatter:i=>null==i.value?"":"number"!=typeof i.value||isNaN(i.value)?t("invalidNumber","Invalid Number"):String(i.value),dataTypeMatcher:i=>"number"==typeof i},text:{baseDataType:"text",valueParser:i=>""===i.newValue?null:eS(i.newValue),dataTypeMatcher:i=>"string"==typeof i},boolean:{baseDataType:"boolean",valueParser:i=>{var n,s;return null==i.newValue?i.newValue:""===(null===(s=null===(n=i.newValue)||void 0===n?void 0:n.trim)||void 0===s?void 0:s.call(n))?null:"true"===String(i.newValue).toLowerCase()},valueFormatter:i=>null==i.value?"":String(i.value),dataTypeMatcher:i=>"boolean"==typeof i},date:{baseDataType:"date",valueParser:i=>tr(null==i.newValue?null:String(i.newValue)),valueFormatter:i=>{var n;return null==i.value?"":i.value instanceof Date&&!isNaN(i.value.getTime())?null!==(n=Bo(i.value,!1))&&void 0!==n?n:"":t("invalidDate","Invalid Date")},dataTypeMatcher:i=>i instanceof Date},dateString:{baseDataType:"dateString",dateParser:i=>{var n;return null!==(n=tr(i))&&void 0!==n?n:void 0},dateFormatter:i=>{var n;return null!==(n=Bo(i??null,!1))&&void 0!==n?n:void 0},valueParser:i=>e(String(i.newValue))?i.newValue:null,valueFormatter:i=>e(String(i.value))?i.value:"",dataTypeMatcher:i=>"string"==typeof i&&e(i)},object:{baseDataType:"object",valueParser:()=>null,valueFormatter:i=>{var n;return null!==(n=eS(i.value))&&void 0!==n?n:""}}}}};vg([P("rowModel")],Qo.prototype,"rowModel",void 0),vg([P("columnModel")],Qo.prototype,"columnModel",void 0),vg([P("columnUtils")],Qo.prototype,"columnUtils",void 0),vg([P("valueService")],Qo.prototype,"valueService",void 0),vg([P("valueFormatterService")],Qo.prototype,"valueFormatterService",void 0),vg([Se],Qo.prototype,"init",null),Qo=vg([He("dataTypeService")],Qo);var KA=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Ab=class extends Ee{parseValue(e,t,i,n){const s=e.getColDef(),o=this.gridOptionsService.addGridCommonParams({node:t,data:t?.data,oldValue:n,newValue:i,colDef:s,column:e}),a=s.valueParser;return Ie(a)?"function"==typeof a?a(o):this.expressionService.evaluate(a,o):i}};KA([P("expressionService")],Ab.prototype,"expressionService",void 0),Ab=KA([He("valueParserService")],Ab);var Cg=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Wa=class extends Ee{constructor(){super(...arguments),this.waitingForColumns=!1}postConstruct(){this.addManagedPropertyListener("columnDefs",e=>this.setColumnDefs(e))}start(){this.ctrlsService.whenReady(()=>{const e=this.gridOptionsService.get("columnDefs");e?this.setColumnsAndData(e):this.waitingForColumns=!0,this.gridReady()})}setColumnsAndData(e){this.columnModel.setColumnDefs(e??[],"gridInitializing"),this.rowModel.start()}gridReady(){this.dispatchGridReadyEvent();const e=yt.__isRegistered(ze.EnterpriseCoreModule,this.context.getGridId());new gb("AG Grid",()=>this.gridOptionsService.get("debug")).log(`initialised successfully, enterprise = ${e}`)}dispatchGridReadyEvent(){this.eventService.dispatchEvent({type:G.EVENT_GRID_READY})}setColumnDefs(e){const t=this.gridOptionsService.get("columnDefs");if(t){if(this.waitingForColumns)return this.waitingForColumns=!1,void this.setColumnsAndData(t);this.columnModel.setColumnDefs(t,xd(e.source))}}};Cg([P("ctrlsService")],Wa.prototype,"ctrlsService",void 0),Cg([P("columnModel")],Wa.prototype,"columnModel",void 0),Cg([P("rowModel")],Wa.prototype,"rowModel",void 0),Cg([Se],Wa.prototype,"postConstruct",null),Wa=Cg([He("syncService")],Wa);var dC=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let ip=class extends Ee{constructor(){super(...arguments),this.manuallyDisplayed=!1}postConstruct(){this.addManagedListener(this.eventService,G.EVENT_ROW_DATA_UPDATED,()=>this.onRowDataUpdated()),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,()=>this.onNewColumnsLoaded())}registerOverlayWrapperComp(e){this.overlayWrapperComp=e,(!this.gridOptionsService.get("columnDefs")||this.gridOptionsService.isRowModelType("clientSide")&&!this.gridOptionsService.get("rowData"))&&this.showLoadingOverlay()}showLoadingOverlay(){if(this.gridOptionsService.get("suppressLoadingOverlay"))return;const t=this.userComponentFactory.getLoadingOverlayCompDetails({});this.showOverlay(t,"ag-overlay-loading-wrapper","loadingOverlayComponentParams")}showNoRowsOverlay(){if(this.gridOptionsService.get("suppressNoRowsOverlay"))return;const t=this.userComponentFactory.getNoRowsOverlayCompDetails({});this.showOverlay(t,"ag-overlay-no-rows-wrapper","noRowsOverlayComponentParams")}showOverlay(e,t,i){const n=e.newAgStackInstance(),s=this.addManagedPropertyListener(i,({currentValue:o})=>{n.then(a=>{a.refresh&&a.refresh(this.gridOptionsService.addGridCommonParams(Object.assign({},o??{})))})});this.manuallyDisplayed=this.columnModel.isReady()&&!this.paginationProxy.isEmpty(),this.overlayWrapperComp.showOverlay(n,t,s)}hideOverlay(){this.manuallyDisplayed=!1,this.overlayWrapperComp.hideOverlay()}showOrHideOverlay(){const e=this.paginationProxy.isEmpty(),t=this.gridOptionsService.get("suppressNoRowsOverlay");e&&!t?this.showNoRowsOverlay():this.hideOverlay()}onRowDataUpdated(){this.showOrHideOverlay()}onNewColumnsLoaded(){this.columnModel.isReady()&&!this.paginationProxy.isEmpty()&&!this.manuallyDisplayed&&this.hideOverlay()}};dC([P("userComponentFactory")],ip.prototype,"userComponentFactory",void 0),dC([P("paginationProxy")],ip.prototype,"paginationProxy",void 0),dC([P("columnModel")],ip.prototype,"columnModel",void 0),dC([Se],ip.prototype,"postConstruct",null),ip=dC([He("overlayService")],ip);var _o=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Dr=class extends Ee{constructor(){super(...arguments),this.suppressEvents=!0,this.queuedUpdateSources=new Set,this.dispatchStateUpdateEventDebounced=ko(()=>this.dispatchQueuedStateUpdateEvents(),0)}postConstruct(){var e;this.isClientSideRowModel="clientSide"===this.rowModel.getType(),this.cachedState=null!==(e=this.gridOptionsService.get("initialState"))&&void 0!==e?e:{},this.ctrlsService.whenReady(()=>this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnGridReady()));const t=this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,({source:s})=>{"gridInitializing"===s&&(t?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnColumnsInitialised()))}),i=this.addManagedListener(this.eventService,G.EVENT_ROW_COUNT_READY,()=>{i?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnRowCountReady())}),n=this.addManagedListener(this.eventService,G.EVENT_FIRST_DATA_RENDERED,()=>{n?.(),this.suppressEventsAndDispatchInitEvent(()=>this.setupStateOnFirstDataRendered())})}getState(){return this.cachedState}setupStateOnGridReady(){this.updateCachedState("sideBar",this.getSideBarState()),this.addManagedListener(this.eventService,G.EVENT_TOOL_PANEL_VISIBLE_CHANGED,()=>this.updateCachedState("sideBar",this.getSideBarState())),this.addManagedListener(this.eventService,G.EVENT_SIDE_BAR_UPDATED,()=>this.updateCachedState("sideBar",this.getSideBarState()))}setupStateOnColumnsInitialised(){var e;const t=null!==(e=this.gridOptionsService.get("initialState"))&&void 0!==e?e:{};this.setColumnState(t),this.setColumnGroupState(t),this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"]),this.updateCachedState("columnGroup",this.getColumnGroupState()),this.addManagedListener(this.eventService,G.EVENT_COLUMN_VALUE_CHANGED,()=>this.updateColumnState(["aggregation"])),this.addManagedListener(this.eventService,G.EVENT_COLUMN_MOVED,()=>this.updateColumnState(["columnOrder"])),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PINNED,()=>this.updateColumnState(["columnPinning"])),this.addManagedListener(this.eventService,G.EVENT_COLUMN_RESIZED,()=>this.updateColumnState(["columnSizing"])),this.addManagedListener(this.eventService,G.EVENT_COLUMN_VISIBLE,()=>this.updateColumnState(["columnVisibility"])),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.updateColumnState(["pivot"])),this.addManagedListener(this.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.updateColumnState(["rowGroup"])),this.addManagedListener(this.eventService,G.EVENT_SORT_CHANGED,()=>this.updateColumnState(["sort"])),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,()=>this.updateColumnState(["aggregation","columnOrder","columnPinning","columnSizing","columnVisibility","pivot","pivot","rowGroup","sort"])),this.addManagedListener(this.eventService,G.EVENT_COLUMN_GROUP_OPENED,()=>this.updateCachedState("columnGroup",this.getColumnGroupState()))}setupStateOnRowCountReady(){var e;const{filter:t,rowGroupExpansion:i,rowSelection:n,pagination:s}=null!==(e=this.gridOptionsService.get("initialState"))&&void 0!==e?e:{},o=this.gridOptionsService.get("advancedFilterModel");(t||o)&&this.setFilterState(t,o),i&&this.setRowGroupExpansionState(i),n&&this.setRowSelectionState(n),s&&this.setPaginationState(s),this.updateCachedState("filter",this.getFilterState()),this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState()),this.updateCachedState("rowSelection",this.getRowSelectionState()),this.updateCachedState("pagination",this.getPaginationState()),this.addManagedListener(this.eventService,G.EVENT_FILTER_CHANGED,()=>this.updateCachedState("filter",this.getFilterState())),this.addManagedListener(this.eventService,G.EVENT_ROW_GROUP_OPENED,()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),this.addManagedListener(this.eventService,G.EVENT_EXPAND_COLLAPSE_ALL,()=>this.updateCachedState("rowGroupExpansion",this.getRowGroupExpansionState())),this.addManagedListener(this.eventService,G.EVENT_SELECTION_CHANGED,()=>this.updateCachedState("rowSelection",this.getRowSelectionState())),this.addManagedListener(this.eventService,G.EVENT_PAGINATION_CHANGED,a=>{(a.newPage||a.newPageSize)&&this.updateCachedState("pagination",this.getPaginationState())})}setupStateOnFirstDataRendered(){var e;const{scroll:t,rangeSelection:i,focusedCell:n,columnOrder:s}=null!==(e=this.gridOptionsService.get("initialState"))&&void 0!==e?e:{};n&&this.setFocusedCellState(n),i&&this.setRangeSelectionState(i),t&&this.setScrollState(t),this.setColumnPivotState(!!s?.orderedColIds),this.updateCachedState("sideBar",this.getSideBarState()),this.updateCachedState("focusedCell",this.getFocusedCellState()),this.updateCachedState("rangeSelection",this.getRangeSelectionState()),this.updateCachedState("scroll",this.getScrollState()),this.addManagedListener(this.eventService,G.EVENT_CELL_FOCUSED,()=>this.updateCachedState("focusedCell",this.getFocusedCellState())),this.addManagedListener(this.eventService,G.EVENT_RANGE_SELECTION_CHANGED,o=>{o.finished&&this.updateCachedState("rangeSelection",this.getRangeSelectionState())}),this.addManagedListener(this.eventService,G.EVENT_BODY_SCROLL_END,()=>this.updateCachedState("scroll",this.getScrollState()))}getColumnState(){const e=this.columnModel.isPivotMode(),t=[],i=[],n=[],s=[],o=[],a=[],c=[],u=[],p=[],g=this.columnModel.getColumnState();for(let m=0;m<g.length;m++){const{colId:y,sort:b,sortIndex:_,rowGroup:E,rowGroupIndex:D,aggFunc:R,pivot:O,pivotIndex:L,pinned:k,hide:U,width:j,flex:q}=g[m];p.push(y),b&&(t[_??0]={colId:y,sort:b}),E&&(i[D??0]=y),"string"==typeof R&&n.push({colId:y,aggFunc:R}),O&&(s[L??0]=y),k&&("right"===k?a:o).push(y),U&&c.push(y),(q||j)&&u.push({colId:y,flex:q??void 0,width:j})}return{sort:t.length?{sortModel:t}:void 0,rowGroup:i.length?{groupColIds:i}:void 0,aggregation:n.length?{aggregationModel:n}:void 0,pivot:s.length||e?{pivotMode:e,pivotColIds:s}:void 0,columnPinning:o.length||a.length?{leftColIds:o,rightColIds:a}:void 0,columnVisibility:c.length?{hiddenColIds:c}:void 0,columnSizing:u.length?{columnSizingModel:u}:void 0,columnOrder:p.length?{orderedColIds:p}:void 0}}setColumnState(e){const{sort:t,rowGroup:i,aggregation:n,pivot:s,columnPinning:o,columnVisibility:a,columnSizing:c,columnOrder:u}=e,p={},g=_=>{let E=p[_];return E||(E={colId:_},p[_]=E,E)};t&&t.sortModel.forEach(({colId:_,sort:E},D)=>{const R=g(_);R.sort=E,R.sortIndex=D}),i&&i.groupColIds.forEach((_,E)=>{const D=g(_);D.rowGroup=!0,D.rowGroupIndex=E}),n&&n.aggregationModel.forEach(({colId:_,aggFunc:E})=>{g(_).aggFunc=E}),s&&(s.pivotColIds.forEach((_,E)=>{const D=g(_);D.pivot=!0,D.pivotIndex=E}),this.gridOptionsService.updateGridOptions({options:{pivotMode:s.pivotMode},source:"gridInitializing"})),o&&(o.leftColIds.forEach(_=>{g(_).pinned="left"}),o.rightColIds.forEach(_=>{g(_).pinned="right"})),a&&a.hiddenColIds.forEach(_=>{g(_).hide=!0}),c&&c.columnSizingModel.forEach(({colId:_,flex:E,width:D})=>{const R=g(_);R.flex=E??null,R.width=D});const m=u?.orderedColIds,y=!!m?.length,b=y?m.map(_=>g(_)):Object.values(p);b.length&&(this.columnStates=b,this.columnModel.applyColumnState({state:b,applyOrder:y,defaultState:{sort:null,sortIndex:null,rowGroup:null,rowGroupIndex:null,aggFunc:null,pivot:null,pivotIndex:null,pinned:null,hide:null,flex:null}},"gridInitializing"))}setColumnPivotState(e){const t=this.columnStates;this.columnStates=void 0;const i=this.columnGroupStates;if(this.columnGroupStates=void 0,this.columnModel.isSecondaryColumnsPresent()){if(t){let n=[];for(const s of t)this.columnModel.getSecondaryColumn(s.colId)&&n.push(s);this.columnModel.applyColumnState({state:n,applyOrder:e},"gridInitializing")}i&&this.columnModel.setColumnGroupState(i,"gridInitializing")}}getColumnGroupState(){const e=this.columnModel.getColumnGroupState(),t=[];return e.forEach(({groupId:i,open:n})=>{n&&t.push(i)}),t.length?{openColumnGroupIds:t}:void 0}setColumnGroupState(e){var t;if(!e.hasOwnProperty("columnGroup"))return;const i=new Set(null===(t=e.columnGroup)||void 0===t?void 0:t.openColumnGroupIds),s=this.columnModel.getColumnGroupState().map(({groupId:o})=>{const a=i.has(o);return a&&i.delete(o),{groupId:o,open:a}});i.forEach(o=>{s.push({groupId:o,open:!0})}),s.length&&(this.columnGroupStates=s),this.columnModel.setColumnGroupState(s,"gridInitializing")}getFilterState(){var e;let t=this.filterManager.getFilterModel();t&&0===Object.keys(t).length&&(t=void 0);const i=null!==(e=this.filterManager.getAdvancedFilterModel())&&void 0!==e?e:void 0;return t||i?{filterModel:t,advancedFilterModel:i}:void 0}setFilterState(e,t){const{filterModel:i,advancedFilterModel:n}=e??{advancedFilterModel:t};i&&this.filterManager.setFilterModel(i,"columnFilter"),n&&this.filterManager.setAdvancedFilterModel(n)}getRangeSelectionState(){var e;const t=null===(e=this.rangeService)||void 0===e?void 0:e.getCellRanges().map(i=>{const{id:n,type:s,startRow:o,endRow:a,columns:c,startColumn:u}=i;return{id:n,type:s,startRow:o,endRow:a,colIds:c.map(p=>p.getColId()),startColId:u.getColId()}});return t?.length?{cellRanges:t}:void 0}setRangeSelectionState(e){var t;if(!this.gridOptionsService.get("enableRangeSelection"))return;const i=e.cellRanges.map(n=>Object.assign(Object.assign({},n),{columns:n.colIds.map(s=>this.columnModel.getGridColumn(s)),startColumn:this.columnModel.getGridColumn(n.startColId)}));null===(t=this.rangeService)||void 0===t||t.setCellRanges(i)}getScrollState(){var e,t,i;if(!this.isClientSideRowModel)return;const n=null===(e=this.ctrlsService.getGridBodyCtrl())||void 0===e?void 0:e.getScrollFeature(),{left:s}=null!==(t=n?.getHScrollPosition())&&void 0!==t?t:{left:0},{top:o}=null!==(i=n?.getVScrollPosition())&&void 0!==i?i:{top:0};return o||s?{top:o,left:s}:void 0}setScrollState(e){var t;if(!this.isClientSideRowModel)return;const{top:i,left:n}=e;null===(t=this.ctrlsService.getGridBodyCtrl())||void 0===t||t.getScrollFeature().setScrollPosition(i,n)}getSideBarState(){var e,t;return null===(t=null===(e=this.sideBarService)||void 0===e?void 0:e.getSideBarComp())||void 0===t?void 0:t.getState()}getFocusedCellState(){if(!this.isClientSideRowModel)return;const e=this.focusService.getFocusedCell();if(e){const{column:t,rowIndex:i,rowPinned:n}=e;return{colId:t.getColId(),rowIndex:i,rowPinned:n}}}setFocusedCellState(e){if(!this.isClientSideRowModel)return;const{colId:t,rowIndex:i,rowPinned:n}=e;this.focusService.setFocusedCell({column:this.columnModel.getGridColumn(t),rowIndex:i,rowPinned:n,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}getPaginationState(){const e=this.paginationProxy.getCurrentPage(),t=this.gridOptionsService.get("paginationAutoPageSize")?void 0:this.paginationProxy.getPageSize();if(e||t)return{page:e,pageSize:t}}setPaginationState(e){e.pageSize&&!this.gridOptionsService.get("paginationAutoPageSize")&&this.paginationProxy.setPageSize(e.pageSize,"initialState"),"number"==typeof e.page&&this.paginationProxy.setPage(e.page)}getRowSelectionState(){var e;const t=this.selectionService.getSelectionState();return t&&(Array.isArray(t)||!1!==t.selectAll&&!1!==t.selectAllChildren||null!==(e=t?.toggledNodes)&&void 0!==e&&e.length)?t:void 0}setRowSelectionState(e){this.selectionService.setSelectionState(e,"gridInitializing")}getRowGroupExpansionState(){const e=this.expansionService.getExpandedRows();return e.length?{expandedRowGroupIds:e}:void 0}setRowGroupExpansionState(e){this.expansionService.expandRows(e.expandedRowGroupIds)}updateColumnState(e){const t=this.getColumnState();let i=!1;Object.entries(t).forEach(([n,s])=>{yR(s,this.cachedState[n])||(i=!0)}),this.cachedState=Object.assign(Object.assign({},this.cachedState),t),i&&this.dispatchStateUpdateEvent(e)}updateCachedState(e,t){const i=this.cachedState[e];this.cachedState=Object.assign(Object.assign({},this.cachedState),{[e]:t}),yR(t,i)||this.dispatchStateUpdateEvent([e])}dispatchStateUpdateEvent(e){this.suppressEvents||(e.forEach(t=>this.queuedUpdateSources.add(t)),this.dispatchStateUpdateEventDebounced())}dispatchQueuedStateUpdateEvents(){const e=Array.from(this.queuedUpdateSources);this.queuedUpdateSources.clear(),this.eventService.dispatchEvent({type:G.EVENT_STATE_UPDATED,sources:e,state:this.cachedState})}suppressEventsAndDispatchInitEvent(e){this.suppressEvents=!0,this.columnAnimationService.setSuppressAnimation(!0),e(),setTimeout(()=>{this.suppressEvents=!1,this.queuedUpdateSources.clear(),this.isAlive()&&(this.columnAnimationService.setSuppressAnimation(!1),this.dispatchStateUpdateEvent(["gridInitializing"]))})}};_o([P("filterManager")],Dr.prototype,"filterManager",void 0),_o([Pt("rangeService")],Dr.prototype,"rangeService",void 0),_o([P("ctrlsService")],Dr.prototype,"ctrlsService",void 0),_o([Pt("sideBarService")],Dr.prototype,"sideBarService",void 0),_o([P("focusService")],Dr.prototype,"focusService",void 0),_o([P("columnModel")],Dr.prototype,"columnModel",void 0),_o([P("paginationProxy")],Dr.prototype,"paginationProxy",void 0),_o([P("rowModel")],Dr.prototype,"rowModel",void 0),_o([P("selectionService")],Dr.prototype,"selectionService",void 0),_o([P("expansionService")],Dr.prototype,"expansionService",void 0),_o([P("columnAnimationService")],Dr.prototype,"columnAnimationService",void 0),_o([Se],Dr.prototype,"postConstruct",null),Dr=_o([He("stateService")],Dr);var I0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let yg=class extends Ee{init(){this.processGridOptions(this.gridOptions)}processGridOptions(e){this.processOptions(e,$A)}processColumnDefs(e){this.processOptions(e,kl)}processOptions(e,t){const{validations:i,deprecations:n,allProperties:s,propertyExceptions:o,objectName:a,docsUrl:c}=t;s&&!0!==this.gridOptions.suppressPropertyNamesCheck&&this.checkProperties(e,[...o??[],...Object.keys(n)],s,a,c);const u=new Set;Object.keys(e).forEach(g=>{var m;const y=n[g];if(y)if("renamed"in y){const{renamed:L,version:k}=y;u.add(`As of v${k}, ${String(g)} is deprecated. Please use ${String(L)} instead.`),e[L]=e[g]}else{const{message:L,version:k}=y;u.add(`As of v${k}, ${String(g)} is deprecated. ${L??""}`)}const b=e[g];if(null==b||!1===b)return;const _=i[g];let E;if(!_)return;if("function"==typeof _){const L=_(e,this.gridOptions);if(!L)return;if("objectName"in L){const k=e[g];return Array.isArray(k)?void k.forEach(U=>{this.processOptions(U,L)}):void this.processOptions(e[g],L)}E=L}else E=_;const{module:D,dependencies:R,supportedRowModels:O}=E;if(O){const L=null!==(m=this.gridOptions.rowModelType)&&void 0!==m?m:"clientSide";if(!O.includes(L))return void u.add(`${String(g)} is not supported with the '${L}' row model.`)}if(D){const L=Array.isArray(D)?D:[D];let k=!0;if(L.forEach(U=>{yt.__assertRegistered(U,String(g),this.context.getGridId())||(k=!1,u.add(`${String(g)} is only available when ${U} is loaded.`))}),!k)return}if(R){const L=this.checkForWarning(g,R,e);if(L)return void u.add(L)}}),u.size>0&&u.forEach(g=>{st(g)})}checkForWarning(e,t,i){if("function"==typeof t)return t(i,this.gridOptions);const s=Object.entries(t).find(([c,u])=>!u.includes(i[c]));if(!s)return null;const[o,a]=s;return a.length>1?`'${String(e)}' requires '${o}' to be one of [${a.join(", ")}].`:`'${String(e)}' requires '${o}' to be ${a[0]}.`}checkProperties(e,t,i,n,s){const a=Qx(Object.getOwnPropertyNames(e),["__ob__","__v_skip","__metadata__",...t,...i],i);if(gr(a,(c,u)=>{st(`invalid ${n} property '${c}' did you mean any of these: ${u.slice(0,8).join(", ")}`)}),Object.keys(a).length>0&&s){const c=this.getFrameworkOverrides().getDocLink(s);st(`to see all the valid ${n} properties please check: ${c}`)}}};I0([P("gridOptions")],yg.prototype,"gridOptions",void 0),I0([Se],yg.prototype,"init",null),yg=I0([He("validationService")],yg);var YA=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Ob=class extends Ee{constructor(){super(...arguments),this.syncEventListeners=new Map,this.asyncEventListeners=new Map,this.syncGlobalEventListeners=new Set,this.asyncGlobalEventListeners=new Set}postConstruct(){this.frameworkEventWrappingService=new Yw(this.getFrameworkOverrides())}addEventListener(e,t){const i=this.frameworkEventWrappingService.wrap(t),n=this.gridOptionsService.useAsyncEvents(),s=n?this.asyncEventListeners:this.syncEventListeners;s.has(e)||s.set(e,new Set),s.get(e).add(i),this.eventService.addEventListener(e,i,n)}addGlobalListener(e){const t=this.frameworkEventWrappingService.wrapGlobal(e),i=this.gridOptionsService.useAsyncEvents();(i?this.asyncGlobalEventListeners:this.syncGlobalEventListeners).add(t),this.eventService.addGlobalListener(t,i)}removeEventListener(e,t){var i;const n=this.frameworkEventWrappingService.unwrap(t),o=!!this.asyncEventListeners.get(e)?.delete(n);o||null===(i=this.asyncEventListeners.get(e))||void 0===i||i.delete(n),this.eventService.removeEventListener(e,n,o)}removeGlobalListener(e){const t=this.frameworkEventWrappingService.unwrapGlobal(e),i=this.asyncGlobalEventListeners.delete(t);i||this.syncGlobalEventListeners.delete(t),this.eventService.removeGlobalListener(t,i)}destroyEventListeners(e,t){e.forEach((i,n)=>{i.forEach(s=>this.eventService.removeEventListener(n,s,t)),i.clear()}),e.clear()}destroyGlobalListeners(e,t){e.forEach(i=>this.eventService.removeGlobalListener(i,t)),e.clear()}destroy(){super.destroy(),this.destroyEventListeners(this.syncEventListeners,!1),this.destroyEventListeners(this.asyncEventListeners,!0),this.destroyGlobalListeners(this.syncGlobalEventListeners,!1),this.destroyGlobalListeners(this.asyncGlobalEventListeners,!0)}};YA([Se],Ob.prototype,"postConstruct",null),Ob=YA([He("apiEventService")],Ob);var cu=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class uC extends Ne{constructor(){super('<span class="ag-paging-page-size"></span>'),this.hasEmptyOption=!1,this.handlePageSizeItemSelected=()=>{if(!this.selectPageSizeComp)return;const e=this.selectPageSizeComp.getValue();if(!e)return;const t=Number(e);isNaN(t)||t<1||t===this.paginationProxy.getPageSize()||(this.paginationProxy.setPageSize(t,"pageSizeSelector"),this.hasEmptyOption&&this.toggleSelectDisplay(!0),this.selectPageSizeComp.getFocusableElement().focus())}}init(){this.addManagedPropertyListener("paginationPageSizeSelector",()=>{this.onPageSizeSelectorValuesChange()}),this.addManagedListener(this.eventService,G.EVENT_PAGINATION_CHANGED,e=>this.handlePaginationChanged(e))}handlePaginationChanged(e){if(!this.selectPageSizeComp||!e?.newPageSize)return;const t=this.paginationProxy.getPageSize();this.getPageSizeSelectorValues().includes(t)?this.selectPageSizeComp.setValue(t.toString()):this.hasEmptyOption?this.selectPageSizeComp.setValue(""):this.toggleSelectDisplay(!0)}toggleSelectDisplay(e){this.selectPageSizeComp&&this.reset(),e&&(this.reloadPageSizesSelector(),this.selectPageSizeComp&&this.appendChild(this.selectPageSizeComp))}reset(){es(this.getGui()),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0)}onPageSizeSelectorValuesChange(){!this.selectPageSizeComp||this.shouldShowPageSizeSelector()&&this.reloadPageSizesSelector()}shouldShowPageSizeSelector(){return this.gridOptionsService.get("pagination")&&!this.gridOptionsService.get("suppressPaginationPanel")&&!this.gridOptionsService.get("paginationAutoPageSize")&&!1!==this.gridOptionsService.get("paginationPageSizeSelector")}reloadPageSizesSelector(){const e=this.getPageSizeSelectorValues(),t=this.paginationProxy.getPageSize(),i=!t||!e.includes(t);i&&(e.unshift(""),st("The paginationPageSize grid option is set to a value that is not in the list of page size options.\n                Please make sure that the paginationPageSize grid option is set to one of the values in the \n                paginationPageSizeSelector array, or set the paginationPageSizeSelector to false to hide the page size selector.")),this.selectPageSizeComp&&(this.destroyBean(this.selectPageSizeComp),this.selectPageSizeComp=void 0);const n=this.localeService.getLocaleTextFunc(),s=n("pageSizeSelectorLabel","Page Size:"),o=e.map(c=>({value:String(c),text:String(c)})),a=n("ariaPageSizeSelectorLabel","Page Size");this.selectPageSizeComp=this.createManagedBean(new Tc).addOptions(o).setValue(String(i?"":t)).setAriaLabel(a).setLabel(s).onValueChange(()=>this.handlePageSizeItemSelected()),this.hasEmptyOption=i}getPageSizeSelectorValues(){const t=this.gridOptionsService.get("paginationPageSizeSelector");return Array.isArray(t)&&this.validateValues(t)?[...t].sort((i,n)=>i-n):[20,50,100]}validateValues(e){if(!e.length)return st("The paginationPageSizeSelector grid option is an empty array. This is most likely a mistake.\n                If you want to hide the page size selector, please set the paginationPageSizeSelector to false."),!1;for(let t=0;t<e.length;t++){const i=e[t],s=i>0;if("number"!=typeof i)return st("The paginationPageSizeSelector grid option contains a non-numeric value.\n                    Please make sure that all values in the paginationPageSizeSelector array are numbers."),!1;if(!s)return st("The paginationPageSizeSelector grid option contains a negative number or zero.\n                    Please make sure that all values in the paginationPageSizeSelector array are positive."),!1}return!0}destroy(){this.toggleSelectDisplay(!1),super.destroy()}}cu([P("localeService")],uC.prototype,"localeService",void 0),cu([P("gridOptionsService")],uC.prototype,"gridOptionsService",void 0),cu([P("paginationProxy")],uC.prototype,"paginationProxy",void 0),cu([Se],uC.prototype,"init",null);var Mb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let hC=class extends Ee{constructor(){super(),this.descriptionContainer=null,this.announceValue=ko(this.announceValue.bind(this),200)}postConstruct(){const e=this.gridOptionsService.getDocument(),t=this.descriptionContainer=e.createElement("div");t.classList.add("ag-aria-description-container"),lv(t,"polite"),xR(t,"additions text"),pS(t,!0),this.eGridDiv.appendChild(t)}announceValue(e){!this.descriptionContainer||(this.descriptionContainer.textContent="",setTimeout(()=>{this.descriptionContainer.textContent=e},50))}destroy(){super.destroy();const{descriptionContainer:e}=this;e&&(es(e),e.parentElement&&e.parentElement.removeChild(e)),this.descriptionContainer=null,this.eGridDiv=null}};Mb([P("eGridDiv")],hC.prototype,"eGridDiv",void 0),Mb([Se],hC.prototype,"postConstruct",null),hC=Mb([He("ariaAnnouncementService")],hC);let XA=1;class ZA{create(e,t,i,n,s){var o;const a=!!t.debug,c=null!==(o=t.gridId)&&void 0!==o?o:String(XA++),u=this.getRegisteredModules(s,c),p=this.createBeansList(t.rowModelType,u,c),g=this.createProvidedBeans(e,t,s);if(!p)return void hs("Failed to create grid.");const m={providedBeanInstances:g,beanClasses:p,debug:a,gridId:c},y=new gb("Context",()=>m.debug),b=new Nx(m,y),_=b.getBean("beans");return this.registerModuleUserComponents(_,u),this.registerStackComponents(_,u),this.registerControllers(_,u),i(b),_.syncService.start(),n&&n(b),_.gridApi}registerControllers(e,t){t.forEach(i=>{i.controllers&&i.controllers.forEach(n=>e.ctrlsFactory.register(n))})}registerStackComponents(e,t){const i=this.createAgStackComponentsList(t);e.agStackComponentsRegistry.setupComponents(i)}getRegisteredModules(e,t){const i=e?e.modules:null,n=yt.__getRegisteredModules(t),s=[],o={},a=(c,u,p)=>{var m;o[(m=u).moduleName]||(o[m.moduleName]=!0,s.push(m),yt.__register(m,c,p)),u.dependantModules&&u.dependantModules.forEach(m=>a(c,m,p))};return i&&i.forEach(c=>a(!0,c,t)),n&&n.forEach(c=>a(!yt.__isPackageBased(),c,void 0)),s}registerModuleUserComponents(e,t){this.extractModuleEntity(t,n=>n.userComponents?n.userComponents:[]).forEach(n=>{e.userComponentRegistry.registerDefaultComponent(n.componentName,n.componentClass)})}createProvidedBeans(e,t,i){let n=i?i.frameworkOverrides:null;gt(n)&&(n=new xA);const s={gridOptions:t,eGridDiv:e,globalEventListener:i?i.globalEventListener:null,globalSyncEventListener:i?i.globalSyncEventListener:null,frameworkOverrides:n};return i&&i.providedBeanInstances&&Object.assign(s,i.providedBeanInstances),s}createAgStackComponentsList(e){let t=[{componentName:"AgCheckbox",componentClass:Rc},{componentName:"AgRadioButton",componentClass:NE},{componentName:"AgToggleButton",componentClass:g0},{componentName:"AgInputTextField",componentClass:Ac},{componentName:"AgInputTextArea",componentClass:RA},{componentName:"AgInputNumberField",componentClass:LE},{componentName:"AgInputDateField",componentClass:AA},{componentName:"AgInputRange",componentClass:m0},{componentName:"AgRichSelect",componentClass:db},{componentName:"AgSelect",componentClass:Tc},{componentName:"AgSlider",componentClass:Vn},{componentName:"AgGridBody",componentClass:Ol},{componentName:"AgHeaderRoot",componentClass:Il},{componentName:"AgSortIndicator",componentClass:bn},{componentName:"AgPagination",componentClass:bo},{componentName:"AgPageSizeSelector",componentClass:uC},{componentName:"AgOverlayWrapper",componentClass:fg},{componentName:"AgGroupComponent",componentClass:ln},{componentName:"AgRowContainer",componentClass:Vh},{componentName:"AgFakeHorizontalScroll",componentClass:Hc},{componentName:"AgFakeVerticalScroll",componentClass:Rb},{componentName:"AgAutocomplete",componentClass:Sr}];const i=this.extractModuleEntity(e,n=>n.agStackComponents?n.agStackComponents:[]);return t=t.concat(i),t}createBeansList(e="clientSide",t,i){const n=t.filter(u=>!u.rowModel||u.rowModel===e),s={clientSide:ze.ClientSideRowModelModule,infinite:ze.InfiniteRowModelModule,serverSide:ze.ServerSideRowModelModule,viewport:ze.ViewportRowModelModule};if(!s[e])return void hs("Could not find row model for rowModelType = "+e);if(!yt.__assertRegistered(s[e],`rowModelType = '${e}'`,i))return;const o=[bt,Qh,_t,ou,cg,Vt,Bf,yb,tC,sb,Bd,Zo,Fl,x0,yg,eg,Ph,dS,go,ks,Vc,Xh,jo,Pn,gs,ig,yr,Jv,_f,hb,su,ts,vb,Ll,fb,tE,kc,So,St,rg,is,Fc,ug,Ls,Qf,jv,Yd,lg,b0,eC,pg,lS,dg,zh,Jo,av,UA,mg,iu,ep,rC,au,tp,O0,Qo,Ab,Tl,Wa,ip,Dr,Jf,Ob,hC,Yo],a=this.extractModuleEntity(n,u=>u.beans?u.beans:[]);o.push(...a);const c=[];return o.forEach(u=>{c.indexOf(u)<0&&c.push(u)}),c}extractModuleEntity(e,t){return[].concat(...e.map(t))}}const aI={columnGroup:["column","stackedColumn","normalizedColumn"],barGroup:["bar","stackedBar","normalizedBar"],pieGroup:["pie","donut"],lineGroup:["line"],scatterGroup:["scatter","bubble"],areaGroup:["area","stackedArea","normalizedArea"],polarGroup:["radarLine","radarArea","nightingale","radialColumn","radialBar"],statisticalGroup:["boxPlot","histogram","rangeBar","rangeArea"],hierarchicalGroup:["treemap","sunburst"],specializedGroup:["heatmap","waterfall"],combinationGroup:["columnLineCombo","areaColumnCombo","customCombo"]},xb=["chartSettings","chartData","chartFormat"],N0=["chartUnlink","chartLink","chartDownload"],Pb={settings:"chartSettings",data:"chartData",format:"chartFormat"},Sg=typeof global>"u"?{}:global;Sg.HTMLElement=typeof HTMLElement>"u"?{}:HTMLElement,Sg.HTMLButtonElement=typeof HTMLButtonElement>"u"?{}:HTMLButtonElement,Sg.HTMLSelectElement=typeof HTMLSelectElement>"u"?{}:HTMLSelectElement,Sg.HTMLInputElement=typeof HTMLInputElement>"u"?{}:HTMLInputElement,Sg.Node=typeof Node>"u"?{}:Node,Sg.MouseEvent=typeof MouseEvent>"u"?{}:MouseEvent;let JA=(()=>{class r extends xA{constructor(t){super("angular"),this._ngZone=t,this.isRunningWithinTestZone=!1,this.wrapIncoming=(i,n)=>this.runOutside(i,n),this.wrapOutgoing=i=>this.runInsideAngular(i),this.isRunningWithinTestZone=window?.AG_GRID_UNDER_TEST??!!window?.Zone?.AsyncTestZoneSpec,this.runOutside=this._ngZone?this.isRunningWithinTestZone?(i,n)=>"resize-observer"===n?this._ngZone.runOutsideAngular(i):i():i=>this._ngZone.runOutsideAngular(i):i=>i()}get shouldWrapOutgoing(){return this._ngZone&&C.R0b.isInAngularZone()}isFrameworkComponent(t){if(!t)return!1;const i=t.prototype;return i&&"agInit"in i}runInsideAngular(t){return this._ngZone?this._ngZone.run(t):t()}runOutsideAngular(t,i){return this.runOutside(t,i)}}return r.\u0275fac=function(t){return new(t||r)(C.LFG(C.R0b))},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac}),r})(),Ib=(()=>{class r extends class F0{wrap(e,t,i=[],n){const s=this.createWrapper(e,n);return t.forEach(o=>{this.createMethod(s,o,!0)}),i.forEach(o=>{this.createMethod(s,o,!1)}),s}unwrap(e){return e}createMethod(e,t,i){e.addMethod(t,this.createMethodProxy(e,t,i))}createMethodProxy(e,t,i){return function(){return e.hasMethod(t)?e.callMethod(t,arguments):(i&&console.warn("AG Grid: Framework component is missing the method "+t+"()"),null)}}}{setViewContainerRef(t,i){this.viewContainerRef=t,this.angularFrameworkOverrides=i}createWrapper(t,i){let n=this.angularFrameworkOverrides,s=this,a=new class o extends class lI{init(e){this._params=e,this._componentRef=this.createComponent(),this._agAwareComponent=this._componentRef.instance,this._frameworkComponentInstance=this._componentRef.instance,this._eGui=this._componentRef.location.nativeElement,this._agAwareComponent.agInit(this._params)}getGui(){return this._eGui}getRootElement(){return this._eGui.firstChild}destroy(){this._frameworkComponentInstance&&"function"==typeof this._frameworkComponentInstance.destroy&&this._frameworkComponentInstance.destroy(),this._componentRef&&this._componentRef.destroy()}getFrameworkComponentInstance(){return this._frameworkComponentInstance}}{init(u){n.runInsideAngular(()=>{super.init(u),this._componentRef.changeDetectorRef.detectChanges()})}createComponent(){return n.runInsideAngular(()=>s.createComponent(t))}hasMethod(u){return null!=a.getFrameworkComponentInstance()[u]}callMethod(u,p){const g=this.getFrameworkComponentInstance();return n.runInsideAngular(()=>a.getFrameworkComponentInstance()[u].apply(g,p))}addMethod(u,p){a[u]=p}};return a}createComponent(t){return this.viewContainerRef.createComponent(t)}}return r.\u0275fac=function(){let e;return function(i){return(e||(e=C.n5z(r)))(i||r)}}(),r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac}),r})(),L0=(()=>{class r{constructor(t,i,n,s){this.viewContainerRef=i,this.angularFrameworkOverrides=n,this.frameworkComponentWrapper=s,this._initialised=!1,this._destroyed=!1,this._fullyReady=$t.resolve(!0),this.statusBar=void 0,this.sideBar=void 0,this.suppressContextMenu=void 0,this.preventDefaultOnContextMenu=void 0,this.allowContextMenuWithControlKey=void 0,this.columnMenu=void 0,this.suppressMenuHide=void 0,this.enableBrowserTooltips=void 0,this.tooltipTrigger=void 0,this.tooltipShowDelay=void 0,this.tooltipHideDelay=void 0,this.tooltipMouseTrack=void 0,this.tooltipInteraction=void 0,this.popupParent=void 0,this.copyHeadersToClipboard=void 0,this.copyGroupHeadersToClipboard=void 0,this.clipboardDelimiter=void 0,this.suppressCopyRowsToClipboard=void 0,this.suppressCopySingleCellRanges=void 0,this.suppressLastEmptyLineOnPaste=void 0,this.suppressClipboardPaste=void 0,this.suppressClipboardApi=void 0,this.suppressCutToClipboard=void 0,this.columnDefs=void 0,this.defaultColDef=void 0,this.defaultColGroupDef=void 0,this.columnTypes=void 0,this.dataTypeDefinitions=void 0,this.maintainColumnOrder=void 0,this.suppressFieldDotNotation=void 0,this.headerHeight=void 0,this.groupHeaderHeight=void 0,this.floatingFiltersHeight=void 0,this.pivotHeaderHeight=void 0,this.pivotGroupHeaderHeight=void 0,this.allowDragFromColumnsToolPanel=void 0,this.suppressMovableColumns=void 0,this.suppressColumnMoveAnimation=void 0,this.suppressDragLeaveHidesColumns=void 0,this.suppressRowGroupHidesColumns=void 0,this.colResizeDefault=void 0,this.suppressAutoSize=void 0,this.autoSizePadding=void 0,this.skipHeaderOnAutoSize=void 0,this.autoSizeStrategy=void 0,this.components=void 0,this.editType=void 0,this.singleClickEdit=void 0,this.suppressClickEdit=void 0,this.readOnlyEdit=void 0,this.stopEditingWhenCellsLoseFocus=void 0,this.enterMovesDown=void 0,this.enterMovesDownAfterEdit=void 0,this.enterNavigatesVertically=void 0,this.enterNavigatesVerticallyAfterEdit=void 0,this.enableCellEditingOnBackspace=void 0,this.undoRedoCellEditing=void 0,this.undoRedoCellEditingLimit=void 0,this.defaultCsvExportParams=void 0,this.suppressCsvExport=void 0,this.defaultExcelExportParams=void 0,this.suppressExcelExport=void 0,this.excelStyles=void 0,this.quickFilterText=void 0,this.cacheQuickFilter=void 0,this.excludeHiddenColumnsFromQuickFilter=void 0,this.includeHiddenColumnsInQuickFilter=void 0,this.quickFilterParser=void 0,this.quickFilterMatcher=void 0,this.excludeChildrenWhenTreeDataFiltering=void 0,this.enableAdvancedFilter=void 0,this.advancedFilterModel=void 0,this.includeHiddenColumnsInAdvancedFilter=void 0,this.advancedFilterParent=void 0,this.advancedFilterBuilderParams=void 0,this.enableCharts=void 0,this.chartThemes=void 0,this.customChartThemes=void 0,this.chartThemeOverrides=void 0,this.enableChartToolPanelsButton=void 0,this.suppressChartToolPanelsButton=void 0,this.chartToolPanelsDef=void 0,this.loadingCellRenderer=void 0,this.loadingCellRendererParams=void 0,this.loadingCellRendererSelector=void 0,this.localeText=void 0,this.masterDetail=void 0,this.keepDetailRows=void 0,this.keepDetailRowsCount=void 0,this.detailCellRenderer=void 0,this.detailCellRendererParams=void 0,this.detailRowHeight=void 0,this.detailRowAutoHeight=void 0,this.context=void 0,this.alignedGrids=void 0,this.tabIndex=void 0,this.rowBuffer=void 0,this.valueCache=void 0,this.valueCacheNeverExpires=void 0,this.enableCellExpressions=void 0,this.suppressParentsInRowNodes=void 0,this.suppressTouch=void 0,this.suppressFocusAfterRefresh=void 0,this.suppressAsyncEvents=void 0,this.suppressBrowserResizeObserver=void 0,this.suppressPropertyNamesCheck=void 0,this.suppressChangeDetection=void 0,this.debug=void 0,this.overlayLoadingTemplate=void 0,this.loadingOverlayComponent=void 0,this.loadingOverlayComponentParams=void 0,this.suppressLoadingOverlay=void 0,this.overlayNoRowsTemplate=void 0,this.noRowsOverlayComponent=void 0,this.noRowsOverlayComponentParams=void 0,this.suppressNoRowsOverlay=void 0,this.pagination=void 0,this.paginationPageSize=void 0,this.paginationPageSizeSelector=void 0,this.paginationAutoPageSize=void 0,this.paginateChildRows=void 0,this.suppressPaginationPanel=void 0,this.pivotMode=void 0,this.pivotPanelShow=void 0,this.pivotDefaultExpanded=void 0,this.pivotColumnGroupTotals=void 0,this.pivotRowTotals=void 0,this.pivotSuppressAutoColumn=void 0,this.suppressExpandablePivotGroups=void 0,this.functionsReadOnly=void 0,this.aggFuncs=void 0,this.suppressAggFuncInHeader=void 0,this.alwaysAggregateAtRootLevel=void 0,this.suppressAggAtRootLevel=void 0,this.aggregateOnlyChangedColumns=void 0,this.suppressAggFilteredOnly=void 0,this.removePivotHeaderRowWhenSingleValueColumn=void 0,this.animateRows=void 0,this.enableCellChangeFlash=void 0,this.cellFlashDuration=void 0,this.cellFlashDelay=void 0,this.cellFadeDuration=void 0,this.cellFadeDelay=void 0,this.allowShowChangeAfterFilter=void 0,this.domLayout=void 0,this.ensureDomOrder=void 0,this.enableRtl=void 0,this.suppressColumnVirtualisation=void 0,this.suppressMaxRenderedRowRestriction=void 0,this.suppressRowVirtualisation=void 0,this.rowDragManaged=void 0,this.suppressRowDrag=void 0,this.suppressMoveWhenRowDragging=void 0,this.rowDragEntireRow=void 0,this.rowDragMultiRow=void 0,this.rowDragText=void 0,this.fullWidthCellRenderer=void 0,this.fullWidthCellRendererParams=void 0,this.embedFullWidthRows=void 0,this.suppressGroupMaintainValueType=void 0,this.groupDisplayType=void 0,this.groupDefaultExpanded=void 0,this.autoGroupColumnDef=void 0,this.groupMaintainOrder=void 0,this.groupSelectsChildren=void 0,this.groupLockGroupColumns=void 0,this.groupAggFiltering=void 0,this.groupIncludeFooter=void 0,this.groupIncludeTotalFooter=void 0,this.groupSuppressBlankHeader=void 0,this.groupSelectsFiltered=void 0,this.showOpenedGroup=void 0,this.groupRemoveSingleChildren=void 0,this.groupRemoveLowestSingleChildren=void 0,this.groupHideOpenParents=void 0,this.groupAllowUnbalanced=void 0,this.rowGroupPanelShow=void 0,this.groupRowRenderer=void 0,this.groupRowRendererParams=void 0,this.suppressMakeColumnVisibleAfterUnGroup=void 0,this.treeData=void 0,this.rowGroupPanelSuppressSort=void 0,this.suppressGroupRowsSticky=void 0,this.pinnedTopRowData=void 0,this.pinnedBottomRowData=void 0,this.rowModelType=void 0,this.rowData=void 0,this.asyncTransactionWaitMillis=void 0,this.suppressModelUpdateAfterUpdateTransaction=void 0,this.datasource=void 0,this.cacheOverflowSize=void 0,this.infiniteInitialRowCount=void 0,this.serverSideInitialRowCount=void 0,this.suppressServerSideInfiniteScroll=void 0,this.cacheBlockSize=void 0,this.maxBlocksInCache=void 0,this.maxConcurrentDatasourceRequests=void 0,this.blockLoadDebounceMillis=void 0,this.purgeClosedRowNodes=void 0,this.serverSideDatasource=void 0,this.serverSideSortAllLevels=void 0,this.serverSideEnableClientSideSort=void 0,this.serverSideOnlyRefreshFilteredGroups=void 0,this.serverSideFilterAllLevels=void 0,this.serverSideSortOnServer=void 0,this.serverSideFilterOnServer=void 0,this.serverSidePivotResultFieldSeparator=void 0,this.viewportDatasource=void 0,this.viewportRowModelPageSize=void 0,this.viewportRowModelBufferSize=void 0,this.alwaysShowHorizontalScroll=void 0,this.alwaysShowVerticalScroll=void 0,this.debounceVerticalScrollbar=void 0,this.suppressHorizontalScroll=void 0,this.suppressScrollOnNewData=void 0,this.suppressScrollWhenPopupsAreOpen=void 0,this.suppressAnimationFrame=void 0,this.suppressMiddleClickScrolls=void 0,this.suppressPreventDefaultOnMouseWheel=void 0,this.scrollbarWidth=void 0,this.rowSelection=void 0,this.rowMultiSelectWithClick=void 0,this.suppressRowDeselection=void 0,this.suppressRowClickSelection=void 0,this.suppressCellFocus=void 0,this.suppressHeaderFocus=void 0,this.suppressMultiRangeSelection=void 0,this.enableCellTextSelection=void 0,this.enableRangeSelection=void 0,this.enableRangeHandle=void 0,this.enableFillHandle=void 0,this.fillHandleDirection=void 0,this.suppressClearOnFillReduction=void 0,this.sortingOrder=void 0,this.accentedSort=void 0,this.unSortIcon=void 0,this.suppressMultiSort=void 0,this.alwaysMultiSort=void 0,this.multiSortKey=void 0,this.suppressMaintainUnsortedOrder=void 0,this.icons=void 0,this.rowHeight=void 0,this.rowStyle=void 0,this.rowClass=void 0,this.rowClassRules=void 0,this.suppressRowHoverHighlight=void 0,this.suppressRowTransform=void 0,this.columnHoverHighlight=void 0,this.gridId=void 0,this.deltaSort=void 0,this.treeDataDisplayType=void 0,this.functionsPassive=void 0,this.enableGroupEdit=void 0,this.initialState=void 0,this.getContextMenuItems=void 0,this.getMainMenuItems=void 0,this.postProcessPopup=void 0,this.processUnpinnedColumns=void 0,this.processCellForClipboard=void 0,this.processHeaderForClipboard=void 0,this.processGroupHeaderForClipboard=void 0,this.processCellFromClipboard=void 0,this.sendToClipboard=void 0,this.processDataFromClipboard=void 0,this.isExternalFilterPresent=void 0,this.doesExternalFilterPass=void 0,this.getChartToolbarItems=void 0,this.createChartContainer=void 0,this.navigateToNextHeader=void 0,this.tabToNextHeader=void 0,this.navigateToNextCell=void 0,this.tabToNextCell=void 0,this.getLocaleText=void 0,this.getDocument=void 0,this.paginationNumberFormatter=void 0,this.getGroupRowAgg=void 0,this.isGroupOpenByDefault=void 0,this.initialGroupOrderComparator=void 0,this.processPivotResultColDef=void 0,this.processPivotResultColGroupDef=void 0,this.getDataPath=void 0,this.getChildCount=void 0,this.getServerSideGroupLevelParams=void 0,this.isServerSideGroupOpenByDefault=void 0,this.isApplyServerSideTransaction=void 0,this.isServerSideGroup=void 0,this.getServerSideGroupKey=void 0,this.getBusinessKeyForNode=void 0,this.getRowId=void 0,this.resetRowDataOnUpdate=void 0,this.processRowPostCreate=void 0,this.isRowSelectable=void 0,this.isRowMaster=void 0,this.fillOperation=void 0,this.postSortRows=void 0,this.getRowStyle=void 0,this.getRowClass=void 0,this.getRowHeight=void 0,this.isFullWidthRow=void 0,this.toolPanelVisibleChanged=new C.vpe,this.toolPanelSizeChanged=new C.vpe,this.columnMenuVisibleChanged=new C.vpe,this.cutStart=new C.vpe,this.cutEnd=new C.vpe,this.pasteStart=new C.vpe,this.pasteEnd=new C.vpe,this.columnVisible=new C.vpe,this.columnPinned=new C.vpe,this.columnResized=new C.vpe,this.columnMoved=new C.vpe,this.columnValueChanged=new C.vpe,this.columnPivotModeChanged=new C.vpe,this.columnPivotChanged=new C.vpe,this.columnGroupOpened=new C.vpe,this.newColumnsLoaded=new C.vpe,this.gridColumnsChanged=new C.vpe,this.displayedColumnsChanged=new C.vpe,this.virtualColumnsChanged=new C.vpe,this.columnEverythingChanged=new C.vpe,this.columnHeaderMouseOver=new C.vpe,this.columnHeaderMouseLeave=new C.vpe,this.columnHeaderClicked=new C.vpe,this.columnHeaderContextMenu=new C.vpe,this.componentStateChanged=new C.vpe,this.cellValueChanged=new C.vpe,this.cellEditRequest=new C.vpe,this.rowValueChanged=new C.vpe,this.cellEditingStarted=new C.vpe,this.cellEditingStopped=new C.vpe,this.rowEditingStarted=new C.vpe,this.rowEditingStopped=new C.vpe,this.undoStarted=new C.vpe,this.undoEnded=new C.vpe,this.redoStarted=new C.vpe,this.redoEnded=new C.vpe,this.rangeDeleteStart=new C.vpe,this.rangeDeleteEnd=new C.vpe,this.filterOpened=new C.vpe,this.filterChanged=new C.vpe,this.filterModified=new C.vpe,this.advancedFilterBuilderVisibleChanged=new C.vpe,this.chartCreated=new C.vpe,this.chartRangeSelectionChanged=new C.vpe,this.chartOptionsChanged=new C.vpe,this.chartDestroyed=new C.vpe,this.cellKeyDown=new C.vpe,this.gridReady=new C.vpe,this.gridPreDestroyed=new C.vpe,this.firstDataRendered=new C.vpe,this.gridSizeChanged=new C.vpe,this.modelUpdated=new C.vpe,this.virtualRowRemoved=new C.vpe,this.viewportChanged=new C.vpe,this.bodyScroll=new C.vpe,this.bodyScrollEnd=new C.vpe,this.dragStarted=new C.vpe,this.dragStopped=new C.vpe,this.stateUpdated=new C.vpe,this.paginationChanged=new C.vpe,this.rowDragEnter=new C.vpe,this.rowDragMove=new C.vpe,this.rowDragLeave=new C.vpe,this.rowDragEnd=new C.vpe,this.columnRowGroupChanged=new C.vpe,this.rowGroupOpened=new C.vpe,this.expandOrCollapseAll=new C.vpe,this.pinnedRowDataChanged=new C.vpe,this.rowDataUpdated=new C.vpe,this.asyncTransactionsFlushed=new C.vpe,this.storeRefreshed=new C.vpe,this.cellClicked=new C.vpe,this.cellDoubleClicked=new C.vpe,this.cellFocused=new C.vpe,this.cellMouseOver=new C.vpe,this.cellMouseOut=new C.vpe,this.cellMouseDown=new C.vpe,this.rowClicked=new C.vpe,this.rowDoubleClicked=new C.vpe,this.rowSelected=new C.vpe,this.selectionChanged=new C.vpe,this.cellContextMenu=new C.vpe,this.rangeSelectionChanged=new C.vpe,this.tooltipShow=new C.vpe,this.tooltipHide=new C.vpe,this.sortChanged=new C.vpe,this.columnRowGroupChangeRequest=new C.vpe,this.columnPivotChangeRequest=new C.vpe,this.columnValueChangeRequest=new C.vpe,this.columnAggFuncChangeRequest=new C.vpe,this._nativeElement=t.nativeElement}ngAfterViewInit(){this.angularFrameworkOverrides.runOutsideAngular(()=>{this.frameworkComponentWrapper.setViewContainerRef(this.viewContainerRef,this.angularFrameworkOverrides);const t=xi.combineAttributesAndGridOptions(this.gridOptions,this);this.gridParams={globalEventListener:this.globalEventListener.bind(this),frameworkOverrides:this.angularFrameworkOverrides,providedBeanInstances:{frameworkComponentWrapper:this.frameworkComponentWrapper},modules:this.modules||[]};const i=function qA(r,e,t){if(!e)return hs("No gridOptions provided to createGrid"),{};const i=ks.getCoercedGridOptions(e),n=(new ZA).create(r,i,s=>{const o=new Jh(r);s.createBean(o)},void 0,t);if(!Object.isFrozen(e)&&!t?.frameworkOverrides){const s="https://ag-grid.com/javascript-data-grid/grid-interface/#grid-api";Object.defineProperty(e,"api",{get:()=>{hs(`gridOptions.api is no longer supported. See ${s}.`)},configurable:!0}),Object.defineProperty(e,"columnApi",{get:()=>{hs(`gridOptions.columnApi is no longer supported and all methods moved to the grid api. See ${s}.`)},configurable:!0})}return n}(this._nativeElement,t,this.gridParams);i&&(this.api=i,this.columnApi=new rg(i));const n=this.gridPreDestroyed;(n.observed??n.observers.length>0)&&console.warn('AG Grid: gridPreDestroyed event listener registered via (gridPreDestroyed)="method($event)" will be ignored! Please assign via gridOptions.gridPreDestroyed and pass to the grid as [gridOptions]="gridOptions"'),this._initialised=!0,this._fullyReady.resolveNow(null,s=>s)})}ngOnChanges(t){this._initialised&&this.angularFrameworkOverrides.runOutsideAngular(()=>{const i={};Object.entries(t).forEach(([n,s])=>{i[n]=s.currentValue}),xi.processOnChange(i,this.api)})}ngOnDestroy(){this._initialised&&(this._destroyed=!0,this.api?.destroy())}isEmitterUsed(t){const n=this[t],s=n?.observed??n?.observers?.length>0,o=`on${t.charAt(0).toUpperCase()}${t.substring(1)}`;return s||!!this.gridOptions&&!!this.gridOptions[o]}globalEventListener(t,i){if(this._destroyed)return;const n=this[t];if(n&&this.isEmitterUsed(t)){const s=()=>this.angularFrameworkOverrides.runInsideAngular(()=>n.emit(i));"gridReady"===t?this._fullyReady.then(()=>s()):s()}}}return r.\u0275fac=function(t){return new(t||r)(C.Y36(C.SBq),C.Y36(C.s_b),C.Y36(JA),C.Y36(Ib))},r.\u0275cmp=C.Xpm({type:r,selectors:[["ag-grid-angular"]],inputs:{gridOptions:"gridOptions",modules:"modules",statusBar:"statusBar",sideBar:"sideBar",suppressContextMenu:"suppressContextMenu",preventDefaultOnContextMenu:"preventDefaultOnContextMenu",allowContextMenuWithControlKey:"allowContextMenuWithControlKey",columnMenu:"columnMenu",suppressMenuHide:"suppressMenuHide",enableBrowserTooltips:"enableBrowserTooltips",tooltipTrigger:"tooltipTrigger",tooltipShowDelay:"tooltipShowDelay",tooltipHideDelay:"tooltipHideDelay",tooltipMouseTrack:"tooltipMouseTrack",tooltipInteraction:"tooltipInteraction",popupParent:"popupParent",copyHeadersToClipboard:"copyHeadersToClipboard",copyGroupHeadersToClipboard:"copyGroupHeadersToClipboard",clipboardDelimiter:"clipboardDelimiter",suppressCopyRowsToClipboard:"suppressCopyRowsToClipboard",suppressCopySingleCellRanges:"suppressCopySingleCellRanges",suppressLastEmptyLineOnPaste:"suppressLastEmptyLineOnPaste",suppressClipboardPaste:"suppressClipboardPaste",suppressClipboardApi:"suppressClipboardApi",suppressCutToClipboard:"suppressCutToClipboard",columnDefs:"columnDefs",defaultColDef:"defaultColDef",defaultColGroupDef:"defaultColGroupDef",columnTypes:"columnTypes",dataTypeDefinitions:"dataTypeDefinitions",maintainColumnOrder:"maintainColumnOrder",suppressFieldDotNotation:"suppressFieldDotNotation",headerHeight:"headerHeight",groupHeaderHeight:"groupHeaderHeight",floatingFiltersHeight:"floatingFiltersHeight",pivotHeaderHeight:"pivotHeaderHeight",pivotGroupHeaderHeight:"pivotGroupHeaderHeight",allowDragFromColumnsToolPanel:"allowDragFromColumnsToolPanel",suppressMovableColumns:"suppressMovableColumns",suppressColumnMoveAnimation:"suppressColumnMoveAnimation",suppressDragLeaveHidesColumns:"suppressDragLeaveHidesColumns",suppressRowGroupHidesColumns:"suppressRowGroupHidesColumns",colResizeDefault:"colResizeDefault",suppressAutoSize:"suppressAutoSize",autoSizePadding:"autoSizePadding",skipHeaderOnAutoSize:"skipHeaderOnAutoSize",autoSizeStrategy:"autoSizeStrategy",components:"components",editType:"editType",singleClickEdit:"singleClickEdit",suppressClickEdit:"suppressClickEdit",readOnlyEdit:"readOnlyEdit",stopEditingWhenCellsLoseFocus:"stopEditingWhenCellsLoseFocus",enterMovesDown:"enterMovesDown",enterMovesDownAfterEdit:"enterMovesDownAfterEdit",enterNavigatesVertically:"enterNavigatesVertically",enterNavigatesVerticallyAfterEdit:"enterNavigatesVerticallyAfterEdit",enableCellEditingOnBackspace:"enableCellEditingOnBackspace",undoRedoCellEditing:"undoRedoCellEditing",undoRedoCellEditingLimit:"undoRedoCellEditingLimit",defaultCsvExportParams:"defaultCsvExportParams",suppressCsvExport:"suppressCsvExport",defaultExcelExportParams:"defaultExcelExportParams",suppressExcelExport:"suppressExcelExport",excelStyles:"excelStyles",quickFilterText:"quickFilterText",cacheQuickFilter:"cacheQuickFilter",excludeHiddenColumnsFromQuickFilter:"excludeHiddenColumnsFromQuickFilter",includeHiddenColumnsInQuickFilter:"includeHiddenColumnsInQuickFilter",quickFilterParser:"quickFilterParser",quickFilterMatcher:"quickFilterMatcher",excludeChildrenWhenTreeDataFiltering:"excludeChildrenWhenTreeDataFiltering",enableAdvancedFilter:"enableAdvancedFilter",advancedFilterModel:"advancedFilterModel",includeHiddenColumnsInAdvancedFilter:"includeHiddenColumnsInAdvancedFilter",advancedFilterParent:"advancedFilterParent",advancedFilterBuilderParams:"advancedFilterBuilderParams",enableCharts:"enableCharts",chartThemes:"chartThemes",customChartThemes:"customChartThemes",chartThemeOverrides:"chartThemeOverrides",enableChartToolPanelsButton:"enableChartToolPanelsButton",suppressChartToolPanelsButton:"suppressChartToolPanelsButton",chartToolPanelsDef:"chartToolPanelsDef",loadingCellRenderer:"loadingCellRenderer",loadingCellRendererParams:"loadingCellRendererParams",loadingCellRendererSelector:"loadingCellRendererSelector",localeText:"localeText",masterDetail:"masterDetail",keepDetailRows:"keepDetailRows",keepDetailRowsCount:"keepDetailRowsCount",detailCellRenderer:"detailCellRenderer",detailCellRendererParams:"detailCellRendererParams",detailRowHeight:"detailRowHeight",detailRowAutoHeight:"detailRowAutoHeight",context:"context",alignedGrids:"alignedGrids",tabIndex:"tabIndex",rowBuffer:"rowBuffer",valueCache:"valueCache",valueCacheNeverExpires:"valueCacheNeverExpires",enableCellExpressions:"enableCellExpressions",suppressParentsInRowNodes:"suppressParentsInRowNodes",suppressTouch:"suppressTouch",suppressFocusAfterRefresh:"suppressFocusAfterRefresh",suppressAsyncEvents:"suppressAsyncEvents",suppressBrowserResizeObserver:"suppressBrowserResizeObserver",suppressPropertyNamesCheck:"suppressPropertyNamesCheck",suppressChangeDetection:"suppressChangeDetection",debug:"debug",overlayLoadingTemplate:"overlayLoadingTemplate",loadingOverlayComponent:"loadingOverlayComponent",loadingOverlayComponentParams:"loadingOverlayComponentParams",suppressLoadingOverlay:"suppressLoadingOverlay",overlayNoRowsTemplate:"overlayNoRowsTemplate",noRowsOverlayComponent:"noRowsOverlayComponent",noRowsOverlayComponentParams:"noRowsOverlayComponentParams",suppressNoRowsOverlay:"suppressNoRowsOverlay",pagination:"pagination",paginationPageSize:"paginationPageSize",paginationPageSizeSelector:"paginationPageSizeSelector",paginationAutoPageSize:"paginationAutoPageSize",paginateChildRows:"paginateChildRows",suppressPaginationPanel:"suppressPaginationPanel",pivotMode:"pivotMode",pivotPanelShow:"pivotPanelShow",pivotDefaultExpanded:"pivotDefaultExpanded",pivotColumnGroupTotals:"pivotColumnGroupTotals",pivotRowTotals:"pivotRowTotals",pivotSuppressAutoColumn:"pivotSuppressAutoColumn",suppressExpandablePivotGroups:"suppressExpandablePivotGroups",functionsReadOnly:"functionsReadOnly",aggFuncs:"aggFuncs",suppressAggFuncInHeader:"suppressAggFuncInHeader",alwaysAggregateAtRootLevel:"alwaysAggregateAtRootLevel",suppressAggAtRootLevel:"suppressAggAtRootLevel",aggregateOnlyChangedColumns:"aggregateOnlyChangedColumns",suppressAggFilteredOnly:"suppressAggFilteredOnly",removePivotHeaderRowWhenSingleValueColumn:"removePivotHeaderRowWhenSingleValueColumn",animateRows:"animateRows",enableCellChangeFlash:"enableCellChangeFlash",cellFlashDuration:"cellFlashDuration",cellFlashDelay:"cellFlashDelay",cellFadeDuration:"cellFadeDuration",cellFadeDelay:"cellFadeDelay",allowShowChangeAfterFilter:"allowShowChangeAfterFilter",domLayout:"domLayout",ensureDomOrder:"ensureDomOrder",enableRtl:"enableRtl",suppressColumnVirtualisation:"suppressColumnVirtualisation",suppressMaxRenderedRowRestriction:"suppressMaxRenderedRowRestriction",suppressRowVirtualisation:"suppressRowVirtualisation",rowDragManaged:"rowDragManaged",suppressRowDrag:"suppressRowDrag",suppressMoveWhenRowDragging:"suppressMoveWhenRowDragging",rowDragEntireRow:"rowDragEntireRow",rowDragMultiRow:"rowDragMultiRow",rowDragText:"rowDragText",fullWidthCellRenderer:"fullWidthCellRenderer",fullWidthCellRendererParams:"fullWidthCellRendererParams",embedFullWidthRows:"embedFullWidthRows",suppressGroupMaintainValueType:"suppressGroupMaintainValueType",groupDisplayType:"groupDisplayType",groupDefaultExpanded:"groupDefaultExpanded",autoGroupColumnDef:"autoGroupColumnDef",groupMaintainOrder:"groupMaintainOrder",groupSelectsChildren:"groupSelectsChildren",groupLockGroupColumns:"groupLockGroupColumns",groupAggFiltering:"groupAggFiltering",groupIncludeFooter:"groupIncludeFooter",groupIncludeTotalFooter:"groupIncludeTotalFooter",groupSuppressBlankHeader:"groupSuppressBlankHeader",groupSelectsFiltered:"groupSelectsFiltered",showOpenedGroup:"showOpenedGroup",groupRemoveSingleChildren:"groupRemoveSingleChildren",groupRemoveLowestSingleChildren:"groupRemoveLowestSingleChildren",groupHideOpenParents:"groupHideOpenParents",groupAllowUnbalanced:"groupAllowUnbalanced",rowGroupPanelShow:"rowGroupPanelShow",groupRowRenderer:"groupRowRenderer",groupRowRendererParams:"groupRowRendererParams",suppressMakeColumnVisibleAfterUnGroup:"suppressMakeColumnVisibleAfterUnGroup",treeData:"treeData",rowGroupPanelSuppressSort:"rowGroupPanelSuppressSort",suppressGroupRowsSticky:"suppressGroupRowsSticky",pinnedTopRowData:"pinnedTopRowData",pinnedBottomRowData:"pinnedBottomRowData",rowModelType:"rowModelType",rowData:"rowData",asyncTransactionWaitMillis:"asyncTransactionWaitMillis",suppressModelUpdateAfterUpdateTransaction:"suppressModelUpdateAfterUpdateTransaction",datasource:"datasource",cacheOverflowSize:"cacheOverflowSize",infiniteInitialRowCount:"infiniteInitialRowCount",serverSideInitialRowCount:"serverSideInitialRowCount",suppressServerSideInfiniteScroll:"suppressServerSideInfiniteScroll",cacheBlockSize:"cacheBlockSize",maxBlocksInCache:"maxBlocksInCache",maxConcurrentDatasourceRequests:"maxConcurrentDatasourceRequests",blockLoadDebounceMillis:"blockLoadDebounceMillis",purgeClosedRowNodes:"purgeClosedRowNodes",serverSideDatasource:"serverSideDatasource",serverSideSortAllLevels:"serverSideSortAllLevels",serverSideEnableClientSideSort:"serverSideEnableClientSideSort",serverSideOnlyRefreshFilteredGroups:"serverSideOnlyRefreshFilteredGroups",serverSideFilterAllLevels:"serverSideFilterAllLevels",serverSideSortOnServer:"serverSideSortOnServer",serverSideFilterOnServer:"serverSideFilterOnServer",serverSidePivotResultFieldSeparator:"serverSidePivotResultFieldSeparator",viewportDatasource:"viewportDatasource",viewportRowModelPageSize:"viewportRowModelPageSize",viewportRowModelBufferSize:"viewportRowModelBufferSize",alwaysShowHorizontalScroll:"alwaysShowHorizontalScroll",alwaysShowVerticalScroll:"alwaysShowVerticalScroll",debounceVerticalScrollbar:"debounceVerticalScrollbar",suppressHorizontalScroll:"suppressHorizontalScroll",suppressScrollOnNewData:"suppressScrollOnNewData",suppressScrollWhenPopupsAreOpen:"suppressScrollWhenPopupsAreOpen",suppressAnimationFrame:"suppressAnimationFrame",suppressMiddleClickScrolls:"suppressMiddleClickScrolls",suppressPreventDefaultOnMouseWheel:"suppressPreventDefaultOnMouseWheel",scrollbarWidth:"scrollbarWidth",rowSelection:"rowSelection",rowMultiSelectWithClick:"rowMultiSelectWithClick",suppressRowDeselection:"suppressRowDeselection",suppressRowClickSelection:"suppressRowClickSelection",suppressCellFocus:"suppressCellFocus",suppressHeaderFocus:"suppressHeaderFocus",suppressMultiRangeSelection:"suppressMultiRangeSelection",enableCellTextSelection:"enableCellTextSelection",enableRangeSelection:"enableRangeSelection",enableRangeHandle:"enableRangeHandle",enableFillHandle:"enableFillHandle",fillHandleDirection:"fillHandleDirection",suppressClearOnFillReduction:"suppressClearOnFillReduction",sortingOrder:"sortingOrder",accentedSort:"accentedSort",unSortIcon:"unSortIcon",suppressMultiSort:"suppressMultiSort",alwaysMultiSort:"alwaysMultiSort",multiSortKey:"multiSortKey",suppressMaintainUnsortedOrder:"suppressMaintainUnsortedOrder",icons:"icons",rowHeight:"rowHeight",rowStyle:"rowStyle",rowClass:"rowClass",rowClassRules:"rowClassRules",suppressRowHoverHighlight:"suppressRowHoverHighlight",suppressRowTransform:"suppressRowTransform",columnHoverHighlight:"columnHoverHighlight",gridId:"gridId",deltaSort:"deltaSort",treeDataDisplayType:"treeDataDisplayType",functionsPassive:"functionsPassive",enableGroupEdit:"enableGroupEdit",initialState:"initialState",getContextMenuItems:"getContextMenuItems",getMainMenuItems:"getMainMenuItems",postProcessPopup:"postProcessPopup",processUnpinnedColumns:"processUnpinnedColumns",processCellForClipboard:"processCellForClipboard",processHeaderForClipboard:"processHeaderForClipboard",processGroupHeaderForClipboard:"processGroupHeaderForClipboard",processCellFromClipboard:"processCellFromClipboard",sendToClipboard:"sendToClipboard",processDataFromClipboard:"processDataFromClipboard",isExternalFilterPresent:"isExternalFilterPresent",doesExternalFilterPass:"doesExternalFilterPass",getChartToolbarItems:"getChartToolbarItems",createChartContainer:"createChartContainer",navigateToNextHeader:"navigateToNextHeader",tabToNextHeader:"tabToNextHeader",navigateToNextCell:"navigateToNextCell",tabToNextCell:"tabToNextCell",getLocaleText:"getLocaleText",getDocument:"getDocument",paginationNumberFormatter:"paginationNumberFormatter",getGroupRowAgg:"getGroupRowAgg",isGroupOpenByDefault:"isGroupOpenByDefault",initialGroupOrderComparator:"initialGroupOrderComparator",processPivotResultColDef:"processPivotResultColDef",processPivotResultColGroupDef:"processPivotResultColGroupDef",getDataPath:"getDataPath",getChildCount:"getChildCount",getServerSideGroupLevelParams:"getServerSideGroupLevelParams",isServerSideGroupOpenByDefault:"isServerSideGroupOpenByDefault",isApplyServerSideTransaction:"isApplyServerSideTransaction",isServerSideGroup:"isServerSideGroup",getServerSideGroupKey:"getServerSideGroupKey",getBusinessKeyForNode:"getBusinessKeyForNode",getRowId:"getRowId",resetRowDataOnUpdate:"resetRowDataOnUpdate",processRowPostCreate:"processRowPostCreate",isRowSelectable:"isRowSelectable",isRowMaster:"isRowMaster",fillOperation:"fillOperation",postSortRows:"postSortRows",getRowStyle:"getRowStyle",getRowClass:"getRowClass",getRowHeight:"getRowHeight",isFullWidthRow:"isFullWidthRow"},outputs:{toolPanelVisibleChanged:"toolPanelVisibleChanged",toolPanelSizeChanged:"toolPanelSizeChanged",columnMenuVisibleChanged:"columnMenuVisibleChanged",cutStart:"cutStart",cutEnd:"cutEnd",pasteStart:"pasteStart",pasteEnd:"pasteEnd",columnVisible:"columnVisible",columnPinned:"columnPinned",columnResized:"columnResized",columnMoved:"columnMoved",columnValueChanged:"columnValueChanged",columnPivotModeChanged:"columnPivotModeChanged",columnPivotChanged:"columnPivotChanged",columnGroupOpened:"columnGroupOpened",newColumnsLoaded:"newColumnsLoaded",gridColumnsChanged:"gridColumnsChanged",displayedColumnsChanged:"displayedColumnsChanged",virtualColumnsChanged:"virtualColumnsChanged",columnEverythingChanged:"columnEverythingChanged",columnHeaderMouseOver:"columnHeaderMouseOver",columnHeaderMouseLeave:"columnHeaderMouseLeave",columnHeaderClicked:"columnHeaderClicked",columnHeaderContextMenu:"columnHeaderContextMenu",componentStateChanged:"componentStateChanged",cellValueChanged:"cellValueChanged",cellEditRequest:"cellEditRequest",rowValueChanged:"rowValueChanged",cellEditingStarted:"cellEditingStarted",cellEditingStopped:"cellEditingStopped",rowEditingStarted:"rowEditingStarted",rowEditingStopped:"rowEditingStopped",undoStarted:"undoStarted",undoEnded:"undoEnded",redoStarted:"redoStarted",redoEnded:"redoEnded",rangeDeleteStart:"rangeDeleteStart",rangeDeleteEnd:"rangeDeleteEnd",filterOpened:"filterOpened",filterChanged:"filterChanged",filterModified:"filterModified",advancedFilterBuilderVisibleChanged:"advancedFilterBuilderVisibleChanged",chartCreated:"chartCreated",chartRangeSelectionChanged:"chartRangeSelectionChanged",chartOptionsChanged:"chartOptionsChanged",chartDestroyed:"chartDestroyed",cellKeyDown:"cellKeyDown",gridReady:"gridReady",gridPreDestroyed:"gridPreDestroyed",firstDataRendered:"firstDataRendered",gridSizeChanged:"gridSizeChanged",modelUpdated:"modelUpdated",virtualRowRemoved:"virtualRowRemoved",viewportChanged:"viewportChanged",bodyScroll:"bodyScroll",bodyScrollEnd:"bodyScrollEnd",dragStarted:"dragStarted",dragStopped:"dragStopped",stateUpdated:"stateUpdated",paginationChanged:"paginationChanged",rowDragEnter:"rowDragEnter",rowDragMove:"rowDragMove",rowDragLeave:"rowDragLeave",rowDragEnd:"rowDragEnd",columnRowGroupChanged:"columnRowGroupChanged",rowGroupOpened:"rowGroupOpened",expandOrCollapseAll:"expandOrCollapseAll",pinnedRowDataChanged:"pinnedRowDataChanged",rowDataUpdated:"rowDataUpdated",asyncTransactionsFlushed:"asyncTransactionsFlushed",storeRefreshed:"storeRefreshed",cellClicked:"cellClicked",cellDoubleClicked:"cellDoubleClicked",cellFocused:"cellFocused",cellMouseOver:"cellMouseOver",cellMouseOut:"cellMouseOut",cellMouseDown:"cellMouseDown",rowClicked:"rowClicked",rowDoubleClicked:"rowDoubleClicked",rowSelected:"rowSelected",selectionChanged:"selectionChanged",cellContextMenu:"cellContextMenu",rangeSelectionChanged:"rangeSelectionChanged",tooltipShow:"tooltipShow",tooltipHide:"tooltipHide",sortChanged:"sortChanged",columnRowGroupChangeRequest:"columnRowGroupChangeRequest",columnPivotChangeRequest:"columnPivotChangeRequest",columnValueChangeRequest:"columnValueChangeRequest",columnAggFuncChangeRequest:"columnAggFuncChangeRequest"},standalone:!0,features:[C._Bn([JA,Ib]),C.TTD,C.jDz],decls:0,vars:0,template:function(t,i){},encapsulation:2}),r})(),cI=(()=>{class r{constructor(t,i,n,s,o,a){this.nextId=0,this.rowCountReady=!1,this.allNodesMap={},this.rootNode=t,this.gridOptionsService=i,this.eventService=n,this.columnModel=s,this.beans=a,this.selectionService=o,this.rootNode.group=!0,this.rootNode.level=-1,this.rootNode.id=r.ROOT_NODE_ID,this.rootNode.allLeafChildren=[],this.rootNode.childrenAfterGroup=[],this.rootNode.childrenAfterSort=[],this.rootNode.childrenAfterAggFilter=[],this.rootNode.childrenAfterFilter=[]}getCopyOfNodesMap(){return z.cloneObject(this.allNodesMap)}getRowNode(t){return this.allNodesMap[t]}setRowData(t){if("string"==typeof t)return void console.warn("AG Grid: rowData must be an array, however you passed in a string. If you are loading JSON, make sure you convert the JSON string to JavaScript objects first");this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(t);const i=this.rootNode,n=this.rootNode.sibling;i.childrenAfterFilter=null,i.childrenAfterGroup=null,i.childrenAfterAggFilter=null,i.childrenAfterSort=null,i.childrenMapped=null,i.updateHasChildren(),this.nextId=0,this.allNodesMap={},t?i.allLeafChildren=t.map(s=>this.createNode(s,this.rootNode,r.TOP_LEVEL)):(i.allLeafChildren=[],i.childrenAfterGroup=[]),n&&(n.childrenAfterFilter=i.childrenAfterFilter,n.childrenAfterGroup=i.childrenAfterGroup,n.childrenAfterAggFilter=i.childrenAfterAggFilter,n.childrenAfterSort=i.childrenAfterSort,n.childrenMapped=i.childrenMapped,n.allLeafChildren=i.allLeafChildren)}updateRowData(t,i){this.rowCountReady=!0,this.dispatchRowDataUpdateStartedEvent(t.add);const n={remove:[],update:[],add:[]},s=[];return this.executeRemove(t,n,s),this.executeUpdate(t,n,s),this.executeAdd(t,n),this.updateSelection(s,"rowDataChanged"),i&&z.sortRowNodesByOrder(this.rootNode.allLeafChildren,i),n}isRowCountReady(){return this.rowCountReady}dispatchRowDataUpdateStartedEvent(t){this.eventService.dispatchEvent({type:G.EVENT_ROW_DATA_UPDATE_STARTED,firstRowData:t?.length?t[0]:null})}updateSelection(t,i){const n=t.length>0;n&&this.selectionService.setNodesSelected({newValue:!1,nodes:t,suppressFinishActions:!0,source:i}),this.selectionService.updateGroupsFromChildrenSelections(i),n&&this.eventService.dispatchEvent({type:G.EVENT_SELECTION_CHANGED,source:i})}executeAdd(t,i){var n;const{add:s,addIndex:o}=t;if(z.missingOrEmpty(s))return;const a=s.map(c=>this.createNode(c,this.rootNode,r.TOP_LEVEL));if("number"==typeof o&&o>=0){const{allLeafChildren:c}=this.rootNode,u=c.length;let p=o;if(this.gridOptionsService.get("treeData")&&o>0&&u>0)for(let b=0;b<u;b++)if((null===(n=c[b])||void 0===n?void 0:n.rowIndex)==o-1){p=b+1;break}const m=c.slice(0,p),y=c.slice(p,c.length);this.rootNode.allLeafChildren=[...m,...a,...y]}else this.rootNode.allLeafChildren=[...this.rootNode.allLeafChildren,...a];this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren),i.add=a}executeRemove(t,i,n){const{remove:s}=t;if(z.missingOrEmpty(s))return;const o={};s.forEach(a=>{const c=this.lookupRowNode(a);!c||(c.isSelected()&&n.push(c),c.clearRowTopAndRowIndex(),o[c.id]=!0,delete this.allNodesMap[c.id],i.remove.push(c))}),this.rootNode.allLeafChildren=this.rootNode.allLeafChildren.filter(a=>!o[a.id]),this.rootNode.sibling&&(this.rootNode.sibling.allLeafChildren=this.rootNode.allLeafChildren)}executeUpdate(t,i,n){const{update:s}=t;z.missingOrEmpty(s)||s.forEach(o=>{const a=this.lookupRowNode(o);!a||(a.updateData(o),!a.selectable&&a.isSelected()&&n.push(a),this.setMasterForRow(a,o,r.TOP_LEVEL,!1),i.update.push(a))})}lookupRowNode(t){const i=this.gridOptionsService.getCallback("getRowId");let n;if(i){const s=i({data:t,level:0});if(n=this.allNodesMap[s],!n)return console.error(`AG Grid: could not find row id=${s}, data item was not found for this id`),null}else if(n=this.rootNode.allLeafChildren.find(s=>s.data===t),!n)return console.error("AG Grid: could not find data item as object was not found",t),console.error("Consider using getRowId to help the Grid find matching row data"),null;return n||null}createNode(t,i,n){const s=new Gt(this.beans);s.group=!1,this.setMasterForRow(s,t,n,!0);const o=this.gridOptionsService.get("suppressParentsInRowNodes");return i&&!o&&(s.parent=i),s.level=n,s.setDataAndId(t,this.nextId.toString()),this.allNodesMap[s.id]&&console.warn(`AG Grid: duplicate node id '${s.id}' detected from getRowId callback, this could cause issues in your grid.`),this.allNodesMap[s.id]=s,this.nextId++,s}setMasterForRow(t,i,n,s){if(this.gridOptionsService.get("treeData"))t.setMaster(!1),s&&(t.expanded=!1);else{if(this.gridOptionsService.get("masterDetail")){const c=this.gridOptionsService.get("isRowMaster");t.setMaster(!c||c(i))}else t.setMaster(!1);if(s){const c=this.columnModel.getRowGroupColumns(),p=n+(c?c.length:0);t.expanded=!!t.master&&this.isExpanded(p)}}}isExpanded(t){const i=this.gridOptionsService.get("groupDefaultExpanded");return-1===i||t<i}}return r.TOP_LEVEL=0,r.ROOT_NODE_ID="ROOT_NODE_ID",r})();var Zr=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},ja=(()=>(function(r){r[r.Normal=0]="Normal",r[r.AfterFilter=1]="AfterFilter",r[r.AfterFilterAndSort=2]="AfterFilterAndSort",r[r.PivotNodes=3]="PivotNodes"}(ja||(ja={})),ja))();let rr=class extends Ee{constructor(){super(...arguments),this.onRowHeightChanged_debounced=z.debounce(this.onRowHeightChanged.bind(this),100),this.rowsToDisplay=[],this.hasStarted=!1,this.shouldSkipSettingDataOnStart=!1,this.isRefreshingModel=!1,this.rowCountReady=!1}init(){const e=this.refreshModel.bind(this,{step:Kt.EVERYTHING}),t=!this.gridOptionsService.get("suppressAnimationFrame"),i=this.refreshModel.bind(this,{step:Kt.EVERYTHING,afterColumnsChanged:!0,keepRenderedRows:!0,animate:t});this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,i),this.addManagedListener(this.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,e),this.addManagedListener(this.eventService,G.EVENT_COLUMN_VALUE_CHANGED,this.onValueChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_CHANGED,this.refreshModel.bind(this,{step:Kt.PIVOT})),this.addManagedListener(this.eventService,G.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_SORT_CHANGED,this.onSortChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_MODE_CHANGED,e),this.addManagedListener(this.eventService,G.EVENT_GRID_STYLES_CHANGED,this.onGridStylesChanges.bind(this)),this.addManagedListener(this.eventService,G.EVENT_GRID_READY,()=>this.onGridReady()),this.addPropertyListeners(),this.rootNode=new Gt(this.beans),this.nodeManager=new cI(this.rootNode,this.gridOptionsService,this.eventService,this.columnModel,this.selectionService,this.beans)}addPropertyListeners(){const e=new Set(["treeData","masterDetail"]),t=new Set(["suppressParentsInRowNodes","groupDefaultExpanded","groupAllowUnbalanced","initialGroupOrderComparator","groupHideOpenParents","groupDisplayType"]),i=new Set(["excludeChildrenWhenTreeDataFiltering"]),n=new Set(["removePivotHeaderRowWhenSingleValueColumn","pivotRowTotals","pivotColumnGroupTotals","suppressExpandablePivotGroups"]),s=new Set(["getGroupRowAgg","alwaysAggregateAtRootLevel","groupIncludeTotalFooter","suppressAggFilteredOnly"]),o=new Set(["postSortRows","groupDisplayType","accentedSort"]),a=new Set([]),c=new Set(["groupRemoveSingleChildren","groupRemoveLowestSingleChildren","groupIncludeFooter"]),u=[...e,...t,...i,...n,...n,...s,...o,...a,...c];this.addManagedPropertyListeners(u,p=>{var g;const m=null===(g=p.changeSet)||void 0===g?void 0:g.properties;if(!m)return;const y=b=>m.some(_=>b.has(_));y(e)?this.setRowData(this.rootNode.allLeafChildren.map(b=>b.data)):y(t)?this.refreshModel({step:Kt.EVERYTHING}):y(i)?this.refreshModel({step:Kt.FILTER}):y(n)?this.refreshModel({step:Kt.PIVOT}):y(s)?this.refreshModel({step:Kt.AGGREGATE}):y(o)?this.refreshModel({step:Kt.SORT}):y(a)?this.refreshModel({step:Kt.FILTER_AGGREGATES}):y(c)&&this.refreshModel({step:Kt.MAP})}),this.addManagedPropertyListener("rowHeight",()=>this.resetRowHeights())}start(){this.hasStarted=!0,this.shouldSkipSettingDataOnStart?this.dispatchUpdateEventsAndRefresh():this.setInitialData()}setInitialData(){const e=this.gridOptionsService.get("rowData");e&&(this.shouldSkipSettingDataOnStart=!0,this.setRowData(e))}ensureRowHeightsValid(e,t,i,n){let s,o=!1;do{s=!1;const a=this.getRowIndexAtPixel(e),c=this.getRowIndexAtPixel(t),u=Math.max(a,i),p=Math.min(c,n);for(let g=u;g<=p;g++){const m=this.getRow(g);if(m.rowHeightEstimated){const y=this.gridOptionsService.getRowHeightForNode(m);m.setRowHeight(y.height),s=!0,o=!0}}s&&this.setRowTopAndRowIndex()}while(s);return o}setRowTopAndRowIndex(){const e=this.environment.getDefaultRowHeight();let t=0;const i=new Set,n=this.gridOptionsService.isDomLayout("normal");for(let s=0;s<this.rowsToDisplay.length;s++){const o=this.rowsToDisplay[s];if(null!=o.id&&i.add(o.id),null==o.rowHeight){const a=this.gridOptionsService.getRowHeightForNode(o,n,e);o.setRowHeight(a.height,a.estimated)}o.setRowTop(t),o.setRowIndex(s),t+=o.rowHeight}return i}clearRowTopAndRowIndex(e,t){const i=e.isActive(),n=o=>{o&&null!=o.id&&!t.has(o.id)&&o.clearRowTopAndRowIndex()},s=o=>{if(n(o),n(o.detailNode),n(o.sibling),o.hasChildren()&&o.childrenAfterGroup){const a=-1==o.level;i&&!a&&!o.expanded||o.childrenAfterGroup.forEach(s)}};s(this.rootNode)}ensureRowsAtPixel(e,t,i=0){const n=this.getRowIndexAtPixel(t),s=this.getRow(n),o=!this.gridOptionsService.get("suppressAnimationFrame");return s!==e[0]&&(e.forEach(a=>{z.removeFromArray(this.rootNode.allLeafChildren,a)}),e.forEach((a,c)=>{z.insertIntoArray(this.rootNode.allLeafChildren,a,Math.max(n+i,0)+c)}),this.refreshModel({step:Kt.EVERYTHING,keepRenderedRows:!0,keepEditingRows:!0,animate:o}),!0)}highlightRowAtPixel(e,t){const i=null!=t?this.getRowIndexAtPixel(t):null,n=null!=i?this.getRow(i):null;if(!n||!e||n===e||null==t)return void(this.lastHighlightedRow&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null));const s=this.getHighlightPosition(t,n);this.lastHighlightedRow&&this.lastHighlightedRow!==n&&(this.lastHighlightedRow.setHighlighted(null),this.lastHighlightedRow=null),n.setHighlighted(s),this.lastHighlightedRow=n}getHighlightPosition(e,t){if(!t){const s=this.getRowIndexAtPixel(e);if(!(t=this.getRow(s||0)))return Oc.Below}const{rowTop:i,rowHeight:n}=t;return e-i<n/2?Oc.Above:Oc.Below}getLastHighlightedRowNode(){return this.lastHighlightedRow}isLastRowIndexKnown(){return!0}getRowCount(){return this.rowsToDisplay?this.rowsToDisplay.length:0}getTopLevelRowCount(){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return 1;const t=this.rootNode.childrenAfterAggFilter;return t?t.length:0}getTopLevelRowDisplayedIndex(e){if(this.rowsToDisplay&&this.rowsToDisplay[0]===this.rootNode)return e;let i=this.rootNode.childrenAfterSort[e];if(this.gridOptionsService.get("groupHideOpenParents"))for(;i.expanded&&i.childrenAfterSort&&i.childrenAfterSort.length>0;)i=i.childrenAfterSort[0];return i.rowIndex}getRowBounds(e){if(z.missing(this.rowsToDisplay))return null;const t=this.rowsToDisplay[e];return t?{rowTop:t.rowTop,rowHeight:t.rowHeight}:null}onRowGroupOpened(){const e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:Kt.MAP,keepRenderedRows:!0,animate:e})}onFilterChanged(e){if(e.afterDataChange)return;const t=this.gridOptionsService.isAnimateRows(),n=0===e.columns.length||e.columns.some(s=>s.isPrimary())?Kt.FILTER:Kt.FILTER_AGGREGATES;this.refreshModel({step:n,keepRenderedRows:!0,animate:t})}onSortChanged(){const e=this.gridOptionsService.isAnimateRows();this.refreshModel({step:Kt.SORT,keepRenderedRows:!0,animate:e,keepEditingRows:!0})}getType(){return"clientSide"}onValueChanged(){this.columnModel.isPivotActive()?this.refreshModel({step:Kt.PIVOT}):this.refreshModel({step:Kt.AGGREGATE})}createChangePath(e){const t=z.missingOrEmpty(e),i=new tg(!1,this.rootNode);return(t||this.gridOptionsService.get("treeData"))&&i.setInactive(),i}isSuppressModelUpdateAfterUpdateTransaction(e){if(!this.gridOptionsService.get("suppressModelUpdateAfterUpdateTransaction")||null==e.rowNodeTransactions)return!1;const t=e.rowNodeTransactions.filter(n=>null!=n.add&&n.add.length>0||null!=n.remove&&n.remove.length>0);return null==t||0==t.length}buildRefreshModelParams(e){let t=Kt.EVERYTHING;const i={everything:Kt.EVERYTHING,group:Kt.EVERYTHING,filter:Kt.FILTER,map:Kt.MAP,aggregate:Kt.AGGREGATE,sort:Kt.SORT,pivot:Kt.PIVOT};if(z.exists(e)&&(t=i[e]),!z.missing(t))return{step:t,keepRenderedRows:!0,keepEditingRows:!0,animate:!this.gridOptionsService.get("suppressAnimationFrame")};console.error(`AG Grid: invalid step ${e}, available steps are ${Object.keys(i).join(", ")}`)}refreshModel(e){if(!this.hasStarted||this.isRefreshingModel||this.columnModel.shouldRowModelIgnoreRefresh())return;let t="object"==typeof e&&"step"in e?e:this.buildRefreshModelParams(e);if(!t||this.isSuppressModelUpdateAfterUpdateTransaction(t))return;const i=this.createChangePath(t.rowNodeTransactions);switch(this.isRefreshingModel=!0,t.step){case Kt.EVERYTHING:this.doRowGrouping(t.rowNodeTransactions,t.rowNodeOrder,i,!!t.afterColumnsChanged);case Kt.FILTER:this.doFilter(i);case Kt.PIVOT:this.doPivot(i);case Kt.AGGREGATE:this.doAggregate(i);case Kt.FILTER_AGGREGATES:this.doFilterAggregates(i);case Kt.SORT:this.doSort(t.rowNodeTransactions,i);case Kt.MAP:this.doRowsToDisplay()}const n=this.setRowTopAndRowIndex();this.clearRowTopAndRowIndex(i,n),this.isRefreshingModel=!1,this.eventService.dispatchEvent({type:G.EVENT_MODEL_UPDATED,animate:t.animate,keepRenderedRows:t.keepRenderedRows,newData:t.newData,newPage:!1,keepUndoRedoStack:t.keepUndoRedoStack})}isEmpty(){const e=z.missing(this.rootNode.allLeafChildren)||0===this.rootNode.allLeafChildren.length;return z.missing(this.rootNode)||e||!this.columnModel.isReady()}isRowsToRender(){return z.exists(this.rowsToDisplay)&&this.rowsToDisplay.length>0}getNodesInRangeForSelection(e,t){let i=!t,n=!1;const s=[],o=this.gridOptionsService.get("groupSelectsChildren");return this.forEachNodeAfterFilterAndSort(a=>{if(!n)if(i&&(a===t||a===e)&&(n=!0,a.group&&o))s.push(...a.allLeafChildren);else{if(!i){if(a!==t&&a!==e)return;i=!0}a.group&&o||s.push(a)}}),s}setDatasource(e){console.error("AG Grid: should never call setDatasource on clientSideRowController")}getTopLevelNodes(){return this.rootNode?this.rootNode.childrenAfterGroup:null}getRootNode(){return this.rootNode}getRow(e){return this.rowsToDisplay[e]}isRowPresent(e){return this.rowsToDisplay.indexOf(e)>=0}getRowIndexAtPixel(e){if(this.isEmpty()||0===this.rowsToDisplay.length)return-1;let t=0,i=this.rowsToDisplay.length-1;if(e<=0)return 0;if(z.last(this.rowsToDisplay).rowTop<=e)return this.rowsToDisplay.length-1;let s=-1,o=-1;for(;;){const a=Math.floor((t+i)/2),c=this.rowsToDisplay[a];if(this.isRowInPixel(c,e)||(c.rowTop<e?t=a+1:c.rowTop>e&&(i=a-1),s===t&&o===i))return a;s=t,o=i}}isRowInPixel(e,t){return e.rowTop<=t&&e.rowTop+e.rowHeight>t}forEachLeafNode(e){this.rootNode.allLeafChildren&&this.rootNode.allLeafChildren.forEach((t,i)=>e(t,i))}forEachNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterGroup||[]],callback:e,recursionType:ja.Normal,index:0,includeFooterNodes:t})}forEachNodeAfterFilter(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterAggFilter||[]],callback:e,recursionType:ja.AfterFilter,index:0,includeFooterNodes:t})}forEachNodeAfterFilterAndSort(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[...this.rootNode.childrenAfterSort||[]],callback:e,recursionType:ja.AfterFilterAndSort,index:0,includeFooterNodes:t})}forEachPivotNode(e,t=!1){this.recursivelyWalkNodesAndCallback({nodes:[this.rootNode],callback:e,recursionType:ja.PivotNodes,index:0,includeFooterNodes:t})}recursivelyWalkNodesAndCallback(e){var t;const{nodes:i,callback:n,recursionType:s,includeFooterNodes:o}=e;let{index:a}=e;for(let p=0;p<i.length;p++){const g=i[p];if(n(g,a++),g.hasChildren()&&!g.footer){let m=null;switch(s){case ja.Normal:m=g.childrenAfterGroup;break;case ja.AfterFilter:m=g.childrenAfterAggFilter;break;case ja.AfterFilterAndSort:m=g.childrenAfterSort;break;case ja.PivotNodes:m=g.leafGroup?null:g.childrenAfterSort}m&&(a=this.recursivelyWalkNodesAndCallback({nodes:[...m],callback:n,recursionType:s,index:a,includeFooterNodes:o}))}}const c=null===(t=i[0])||void 0===t?void 0:t.parent;if(!o||!c)return a;if(c===this.rootNode){if(!this.gridOptionsService.get("groupIncludeTotalFooter"))return a}else if(!this.gridOptionsService.getGroupIncludeFooter()({node:c}))return a;return c.createFooter(),n(c.sibling,a++),a}doAggregate(e){this.aggregationStage&&this.aggregationStage.execute({rowNode:this.rootNode,changedPath:e})}doFilterAggregates(e){this.filterAggregatesStage?this.filterAggregatesStage.execute({rowNode:this.rootNode,changedPath:e}):this.rootNode.childrenAfterAggFilter=this.rootNode.childrenAfterFilter}expandOrCollapseAll(e){const t=this.gridOptionsService.get("treeData"),i=this.columnModel.isPivotActive(),n=a=>{!a||a.forEach(c=>{const u=()=>{c.expanded=e,n(c.childrenAfterGroup)};t?z.exists(c.childrenAfterGroup)&&u():i?!c.leafGroup&&u():c.group&&u()})};this.rootNode&&n(this.rootNode.childrenAfterGroup),this.refreshModel({step:Kt.MAP}),this.eventService.dispatchEvent({type:G.EVENT_EXPAND_COLLAPSE_ALL,source:e?"expandAll":"collapseAll"})}doSort(e,t){this.sortStage.execute({rowNode:this.rootNode,rowNodeTransactions:e,changedPath:t})}doRowGrouping(e,t,i,n){this.groupStage?(this.groupStage.execute(e?{rowNode:this.rootNode,rowNodeTransactions:e,rowNodeOrder:t,changedPath:i}:{rowNode:this.rootNode,changedPath:i,afterColumnsChanged:n}),this.gridOptionsService.get("groupSelectsChildren")&&this.selectionService.updateGroupsFromChildrenSelections("rowGroupChanged",i)&&this.eventService.dispatchEvent({type:G.EVENT_SELECTION_CHANGED,source:"rowGroupChanged"})):(this.rootNode.childrenAfterGroup=this.rootNode.allLeafChildren,this.rootNode.sibling&&(this.rootNode.sibling.childrenAfterGroup=this.rootNode.childrenAfterGroup),this.rootNode.updateHasChildren()),this.nodeManager.isRowCountReady()&&(this.rowCountReady=!0,this.eventService.dispatchEventOnce({type:G.EVENT_ROW_COUNT_READY}))}doFilter(e){this.filterStage.execute({rowNode:this.rootNode,changedPath:e})}doPivot(e){this.pivotStage&&this.pivotStage.execute({rowNode:this.rootNode,changedPath:e})}getCopyOfNodesMap(){return this.nodeManager.getCopyOfNodesMap()}getRowNode(e){if("string"==typeof e&&0==e.indexOf(Gt.ID_PREFIX_ROW_GROUP)){let i;return this.forEachNode(n=>{n.id===e&&(i=n)}),i}return this.nodeManager.getRowNode(e)}setRowData(e){this.selectionService.reset("rowDataChanged"),this.nodeManager.setRowData(e),this.hasStarted&&this.dispatchUpdateEventsAndRefresh()}dispatchUpdateEventsAndRefresh(){this.eventService.dispatchEvent({type:G.EVENT_ROW_DATA_UPDATED}),this.refreshModel({step:Kt.EVERYTHING,newData:!0})}batchUpdateRowData(e,t){if(null==this.applyAsyncTransactionsTimeout){this.rowDataTransactionBatch=[];const i=this.gridOptionsService.getAsyncTransactionWaitMillis();this.applyAsyncTransactionsTimeout=window.setTimeout(()=>{this.executeBatchUpdateRowData()},i)}this.rowDataTransactionBatch.push({rowDataTransaction:e,callback:t})}flushAsyncTransactions(){null!=this.applyAsyncTransactionsTimeout&&(clearTimeout(this.applyAsyncTransactionsTimeout),this.executeBatchUpdateRowData())}executeBatchUpdateRowData(){this.valueCache.onDataChanged();const e=[],t=[];let i=!1;this.rowDataTransactionBatch&&this.rowDataTransactionBatch.forEach(n=>{const s=this.nodeManager.updateRowData(n.rowDataTransaction,void 0);t.push(s),n.callback&&e.push(n.callback.bind(null,s)),"number"==typeof n.rowDataTransaction.addIndex&&(i=!0)}),this.commonUpdateRowData(t,void 0,i),e.length>0&&window.setTimeout(()=>{e.forEach(n=>n())},0),t.length>0&&this.eventService.dispatchEvent({type:G.EVENT_ASYNC_TRANSACTIONS_FLUSHED,results:t}),this.rowDataTransactionBatch=null,this.applyAsyncTransactionsTimeout=void 0}updateRowData(e,t){this.valueCache.onDataChanged();const i=this.nodeManager.updateRowData(e,t);return this.commonUpdateRowData([i],t,"number"==typeof e.addIndex),i}createRowNodeOrder(){if(this.gridOptionsService.get("suppressMaintainUnsortedOrder"))return;const t={};if(this.rootNode&&this.rootNode.allLeafChildren)for(let i=0;i<this.rootNode.allLeafChildren.length;i++)t[this.rootNode.allLeafChildren[i].id]=i;return t}commonUpdateRowData(e,t,i){if(!this.hasStarted)return;const n=!this.gridOptionsService.get("suppressAnimationFrame");i&&(t=this.createRowNodeOrder()),this.eventService.dispatchEvent({type:G.EVENT_ROW_DATA_UPDATED}),this.refreshModel({step:Kt.EVERYTHING,rowNodeTransactions:e,rowNodeOrder:t,keepRenderedRows:!0,keepEditingRows:!0,animate:n})}doRowsToDisplay(){this.rowsToDisplay=this.flattenStage.execute({rowNode:this.rootNode})}onRowHeightChanged(){this.refreshModel({step:Kt.MAP,keepRenderedRows:!0,keepEditingRows:!0,keepUndoRedoStack:!0})}onRowHeightChangedDebounced(){this.onRowHeightChanged_debounced()}resetRowHeights(){const e=this.resetRowHeightsForAllRowNodes();this.rootNode.setRowHeight(this.rootNode.rowHeight,!0),this.rootNode.sibling&&this.rootNode.sibling.setRowHeight(this.rootNode.sibling.rowHeight,!0),e&&this.onRowHeightChanged()}resetRowHeightsForAllRowNodes(){let e=!1;return this.forEachNode(t=>{t.setRowHeight(t.rowHeight,!0);const i=t.detailNode;i&&i.setRowHeight(i.rowHeight,!0),t.sibling&&t.sibling.setRowHeight(t.sibling.rowHeight,!0),e=!0}),e}onGridStylesChanges(){this.columnModel.isAutoRowHeightActive()||this.resetRowHeights()}onGridReady(){this.hasStarted||this.setInitialData()}isRowDataLoaded(){return this.rowCountReady}};Zr([P("columnModel")],rr.prototype,"columnModel",void 0),Zr([P("selectionService")],rr.prototype,"selectionService",void 0),Zr([P("filterManager")],rr.prototype,"filterManager",void 0),Zr([P("valueCache")],rr.prototype,"valueCache",void 0),Zr([P("beans")],rr.prototype,"beans",void 0),Zr([P("filterStage")],rr.prototype,"filterStage",void 0),Zr([P("sortStage")],rr.prototype,"sortStage",void 0),Zr([P("flattenStage")],rr.prototype,"flattenStage",void 0),Zr([Pt("groupStage")],rr.prototype,"groupStage",void 0),Zr([Pt("aggregationStage")],rr.prototype,"aggregationStage",void 0),Zr([Pt("pivotStage")],rr.prototype,"pivotStage",void 0),Zr([Pt("filterAggregatesStage")],rr.prototype,"filterAggregatesStage",void 0),Zr([Se],rr.prototype,"init",null),rr=Zr([He("rowModel")],rr);var QA=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Fb=class extends Ee{execute(e){const{changedPath:t}=e;this.filterService.filter(t)}};QA([P("filterService")],Fb.prototype,"filterService",void 0),Fb=QA([He("filterStage")],Fb);var k0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let bg=class extends Ee{execute(e){const t=this.sortController.getSortOptions(),i=z.exists(t)&&t.length>0,n=i&&z.exists(e.rowNodeTransactions)&&this.gridOptionsService.get("deltaSort"),s=t.some(o=>this.gridOptionsService.isColumnsSortingCoupledToGroup()?o.column.isPrimary()&&o.column.isRowGroupActive():!!o.column.getColDef().showRowGroup);this.sortService.sort(t,i,n,e.rowNodeTransactions,e.changedPath,s)}};k0([P("sortService")],bg.prototype,"sortService",void 0),k0([P("sortController")],bg.prototype,"sortController",void 0),bg=k0([He("sortStage")],bg);var Nb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let _g=class extends Ee{execute(e){const t=e.rowNode,i=[],n=this.columnModel.isPivotMode(),s=n&&t.leafGroup,o=s?[t]:t.childrenAfterSort,a=this.getFlattenDetails();return this.recursivelyAddToRowsToDisplay(a,o,i,n,0),!s&&i.length>0&&a.groupIncludeTotalFooter&&(t.createFooter(),this.addRowNodeToRowsToDisplay(a,t.sibling,i,0)),i}getFlattenDetails(){const e=this.gridOptionsService.get("groupRemoveSingleChildren");return{groupRemoveLowestSingleChildren:!e&&this.gridOptionsService.get("groupRemoveLowestSingleChildren"),groupRemoveSingleChildren:e,isGroupMultiAutoColumn:this.gridOptionsService.isGroupMultiAutoColumn(),hideOpenParents:this.gridOptionsService.get("groupHideOpenParents"),groupIncludeTotalFooter:this.gridOptionsService.get("groupIncludeTotalFooter"),getGroupIncludeFooter:this.gridOptionsService.getGroupIncludeFooter()}}recursivelyAddToRowsToDisplay(e,t,i,n,s){if(!z.missingOrEmpty(t))for(let o=0;o<t.length;o++){const a=t[o],c=a.hasChildren(),p=e.groupRemoveSingleChildren&&c&&1===a.childrenAfterGroup.length,g=e.groupRemoveLowestSingleChildren&&c&&a.leafGroup&&1===a.childrenAfterGroup.length,m=n&&a.leafGroup,y=e.hideOpenParents&&a.expanded&&!a.master&&!m;if(!(n&&!c)&&!y&&!p&&!g&&this.addRowNodeToRowsToDisplay(e,a,i,s),!n||!a.leafGroup)if(c){const _=p||g;if(a.expanded||_){const E=_?s:s+1;this.recursivelyAddToRowsToDisplay(e,a.childrenAfterSort,i,n,E),e.getGroupIncludeFooter({node:a})?(a.createFooter(),this.addRowNodeToRowsToDisplay(e,a.sibling,i,E)):a.destroyFooter()}}else if(a.master&&a.expanded){const _=this.createDetailNode(a);this.addRowNodeToRowsToDisplay(e,_,i,s)}}}addRowNodeToRowsToDisplay(e,t,i,n){i.push(t),t.setUiLevel(e.isGroupMultiAutoColumn?0:n)}createDetailNode(e){if(z.exists(e.detailNode))return e.detailNode;const t=new Gt(this.beans);return t.detail=!0,t.selectable=!1,t.parent=e,z.exists(e.id)&&(t.id="detail_"+e.id),t.data=e.data,t.level=e.level+1,e.detailNode=t,t}};Nb([P("columnModel")],_g.prototype,"columnModel",void 0),Nb([P("beans")],_g.prototype,"beans",void 0),_g=Nb([He("flattenStage")],_g);var G0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let np=class extends Ee{sort(e,t,i,n,s,o){const a=this.gridOptionsService.get("groupMaintainOrder"),c=this.columnModel.getAllGridColumns().some(y=>y.isRowGroupActive());let u={};i&&n&&(u=this.calculateDirtyNodes(n));const p=this.columnModel.isPivotMode(),g=this.gridOptionsService.getCallback("postSortRows");s&&s.forEachChangedNodeDepthFirst(y=>{var b;this.pullDownGroupDataForHideOpenParents(y.childrenAfterAggFilter,!0);const _=p&&y.leafGroup;if(a&&c&&!y.leafGroup&&!o){const R=null===(null===(b=this.columnModel.getRowGroupColumns())||void 0===b?void 0:b[y.level+1])?.getSort(),O=y.childrenAfterAggFilter.slice(0);if(y.childrenAfterSort&&!R){const L={};y.childrenAfterSort.forEach((k,U)=>{L[k.id]=U}),O.sort((k,U)=>{var j,q;return(null!==(j=L[k.id])&&void 0!==j?j:0)-(null!==(q=L[U.id])&&void 0!==q?q:0)})}y.childrenAfterSort=O}else y.childrenAfterSort=!t||_?y.childrenAfterAggFilter.slice(0):i?this.doDeltaSort(y,u,s,e):this.rowNodeSorter.doFullSort(y.childrenAfterAggFilter,e);y.sibling&&(y.sibling.childrenAfterSort=y.childrenAfterSort),this.updateChildIndexes(y),g&&g({nodes:y.childrenAfterSort})}),this.updateGroupDataForHideOpenParents(s)}calculateDirtyNodes(e){const t={},i=n=>{n&&n.forEach(s=>t[s.id]=!0)};return e&&e.forEach(n=>{i(n.add),i(n.update),i(n.remove)}),t}doDeltaSort(e,t,i,n){const s=e.childrenAfterAggFilter,o=e.childrenAfterSort;if(!o)return this.rowNodeSorter.doFullSort(s,n);const a={},c=[];s.forEach(m=>{t[m.id]||!i.canSkip(m)?c.push(m):a[m.id]=!0});const u=o.filter(m=>a[m.id]),p=(m,y)=>({currentPos:y,rowNode:m}),g=c.map(p).sort((m,y)=>this.rowNodeSorter.compareRowNodes(n,m,y));return this.mergeSortedArrays(n,g,u.map(p)).map(({rowNode:m})=>m)}mergeSortedArrays(e,t,i){const n=[];let s=0,o=0;for(;s<t.length&&o<i.length;)this.rowNodeSorter.compareRowNodes(e,t[s],i[o])<0?n.push(t[s++]):n.push(i[o++]);for(;s<t.length;)n.push(t[s++]);for(;o<i.length;)n.push(i[o++]);return n}updateChildIndexes(e){if(z.missing(e.childrenAfterSort))return;const t=e.childrenAfterSort;for(let i=0;i<t.length;i++){const n=t[i],o=i===e.childrenAfterSort.length-1;n.setFirstChild(0===i),n.setLastChild(o),n.setChildIndex(i)}}updateGroupDataForHideOpenParents(e){if(!this.gridOptionsService.get("groupHideOpenParents"))return;if(this.gridOptionsService.get("treeData"))return z.warnOnce("The property hideOpenParents dose not work with Tree Data. This is because Tree Data has values at the group level, it doesn't make sense to hide them."),!1;const t=i=>{this.pullDownGroupDataForHideOpenParents(i.childrenAfterSort,!1),i.childrenAfterSort.forEach(n=>{n.hasChildren()&&t(n)})};e&&e.executeFromRootNode(i=>t(i))}pullDownGroupDataForHideOpenParents(e,t){!this.gridOptionsService.get("groupHideOpenParents")||z.missing(e)||e.forEach(i=>{this.columnModel.getGroupDisplayColumns().forEach(s=>{const o=s.getColDef().showRowGroup;if("string"!=typeof o)return void console.error("AG Grid: groupHideOpenParents only works when specifying specific columns for colDef.showRowGroup");const c=this.columnModel.getPrimaryColumn(o);if(c!==i.rowGroupColumn)if(t)i.setGroupValue(s.getId(),void 0);else{const p=i.getFirstChildOfFirstChild(c);p&&i.setGroupValue(s.getId(),p.key)}})})}};G0([P("columnModel")],np.prototype,"columnModel",void 0),G0([P("rowNodeSorter")],np.prototype,"rowNodeSorter",void 0),np=G0([He("sortService")],np);var V0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Lb=class extends Ee{filter(e){const t=this.filterManager.isChildFilterPresent();this.filterNodes(t,e)}filterNodes(e,t){const i=(n,s)=>{n.childrenAfterFilter=n.hasChildren()&&e&&!s?n.childrenAfterGroup.filter(o=>{const a=o.childrenAfterFilter&&o.childrenAfterFilter.length>0,c=o.data&&this.filterManager.doesRowPassFilter({rowNode:o});return a||c}):n.childrenAfterGroup,n.sibling&&(n.sibling.childrenAfterFilter=n.childrenAfterFilter)};if(this.doingTreeDataFiltering()){const n=(o,a)=>{if(o.childrenAfterGroup)for(let c=0;c<o.childrenAfterGroup.length;c++){const u=o.childrenAfterGroup[c],p=a||this.filterManager.doesRowPassFilter({rowNode:u});u.childrenAfterGroup?n(o.childrenAfterGroup[c],p):i(u,p)}i(o,a)};t.executeFromRootNode(o=>n(o,!1))}else t.forEachChangedNodeDepthFirst(s=>i(s,!1),!0)}doingTreeDataFiltering(){return this.gridOptionsService.get("treeData")&&!this.gridOptionsService.get("excludeChildrenWhenTreeDataFiltering")}};V0([P("filterManager")],Lb.prototype,"filterManager",void 0),Lb=V0([He("filterService")],Lb);var pC=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Uc=class extends Ee{postConstruct(){"clientSide"===this.rowModel.getType()&&(this.clientSideRowModel=this.rowModel,this.addManagedPropertyListener("rowData",()=>this.onRowDataUpdated()))}isActive(){const e=this.gridOptionsService.exists("getRowId");return!this.gridOptionsService.get("resetRowDataOnUpdate")&&e}setRowData(e){const t=this.createTransactionForRowData(e);if(!t)return;const[i,n]=t;this.clientSideRowModel.updateRowData(i,n)}createTransactionForRowData(e){if(z.missing(this.clientSideRowModel))return void console.error("AG Grid: ImmutableService only works with ClientSideRowModel");const t=this.gridOptionsService.getCallback("getRowId");if(null==t)return void console.error("AG Grid: ImmutableService requires getRowId() callback to be implemented, your row data needs IDs!");const i={remove:[],update:[],add:[]},n=this.clientSideRowModel.getCopyOfNodesMap(),o=this.gridOptionsService.get("suppressMaintainUnsortedOrder")?void 0:{};return z.exists(e)&&e.forEach((a,c)=>{const u=t({data:a,level:0}),p=n[u];o&&(o[u]=c),p?(p.data!==a&&i.update.push(a),n[u]=void 0):i.add.push(a)}),z.iterateObject(n,(a,c)=>{c&&i.remove.push(c.data)}),[i,o]}onRowDataUpdated(){const e=this.gridOptionsService.get("rowData");!e||(this.isActive()?this.setRowData(e):(this.selectionService.reset("rowDataChanged"),this.clientSideRowModel.setRowData(e)))}};pC([P("rowModel")],Uc.prototype,"rowModel",void 0),pC([P("rowRenderer")],Uc.prototype,"rowRenderer",void 0),pC([P("selectionService")],Uc.prototype,"selectionService",void 0),pC([Se],Uc.prototype,"postConstruct",null),Uc=pC([He("immutableService")],Uc);const tO={version:"31.1.1",moduleName:ze.ClientSideRowModelModule,rowModel:"clientSide",beans:[rr,Fb,bg,_g,np,Lb,Uc]};class B0{constructor(){this.ieCompatibility=!1}init(){this.ieCompatibility="5d41402abc4b2a76b9719d911017c592"!=this.md5("hello")}md5cycle(e,t){let i=e[0],n=e[1],s=e[2],o=e[3];i=this.ff(i,n,s,o,t[0],7,-680876936),o=this.ff(o,i,n,s,t[1],12,-389564586),s=this.ff(s,o,i,n,t[2],17,606105819),n=this.ff(n,s,o,i,t[3],22,-1044525330),i=this.ff(i,n,s,o,t[4],7,-176418897),o=this.ff(o,i,n,s,t[5],12,1200080426),s=this.ff(s,o,i,n,t[6],17,-1473231341),n=this.ff(n,s,o,i,t[7],22,-45705983),i=this.ff(i,n,s,o,t[8],7,1770035416),o=this.ff(o,i,n,s,t[9],12,-1958414417),s=this.ff(s,o,i,n,t[10],17,-42063),n=this.ff(n,s,o,i,t[11],22,-1990404162),i=this.ff(i,n,s,o,t[12],7,1804603682),o=this.ff(o,i,n,s,t[13],12,-40341101),s=this.ff(s,o,i,n,t[14],17,-1502002290),n=this.ff(n,s,o,i,t[15],22,1236535329),i=this.gg(i,n,s,o,t[1],5,-165796510),o=this.gg(o,i,n,s,t[6],9,-1069501632),s=this.gg(s,o,i,n,t[11],14,643717713),n=this.gg(n,s,o,i,t[0],20,-373897302),i=this.gg(i,n,s,o,t[5],5,-701558691),o=this.gg(o,i,n,s,t[10],9,38016083),s=this.gg(s,o,i,n,t[15],14,-660478335),n=this.gg(n,s,o,i,t[4],20,-405537848),i=this.gg(i,n,s,o,t[9],5,568446438),o=this.gg(o,i,n,s,t[14],9,-1019803690),s=this.gg(s,o,i,n,t[3],14,-187363961),n=this.gg(n,s,o,i,t[8],20,1163531501),i=this.gg(i,n,s,o,t[13],5,-1444681467),o=this.gg(o,i,n,s,t[2],9,-51403784),s=this.gg(s,o,i,n,t[7],14,1735328473),n=this.gg(n,s,o,i,t[12],20,-1926607734),i=this.hh(i,n,s,o,t[5],4,-378558),o=this.hh(o,i,n,s,t[8],11,-2022574463),s=this.hh(s,o,i,n,t[11],16,1839030562),n=this.hh(n,s,o,i,t[14],23,-35309556),i=this.hh(i,n,s,o,t[1],4,-1530992060),o=this.hh(o,i,n,s,t[4],11,1272893353),s=this.hh(s,o,i,n,t[7],16,-155497632),n=this.hh(n,s,o,i,t[10],23,-1094730640),i=this.hh(i,n,s,o,t[13],4,681279174),o=this.hh(o,i,n,s,t[0],11,-358537222),s=this.hh(s,o,i,n,t[3],16,-722521979),n=this.hh(n,s,o,i,t[6],23,76029189),i=this.hh(i,n,s,o,t[9],4,-640364487),o=this.hh(o,i,n,s,t[12],11,-421815835),s=this.hh(s,o,i,n,t[15],16,530742520),n=this.hh(n,s,o,i,t[2],23,-995338651),i=this.ii(i,n,s,o,t[0],6,-198630844),o=this.ii(o,i,n,s,t[7],10,1126891415),s=this.ii(s,o,i,n,t[14],15,-1416354905),n=this.ii(n,s,o,i,t[5],21,-57434055),i=this.ii(i,n,s,o,t[12],6,1700485571),o=this.ii(o,i,n,s,t[3],10,-1894986606),s=this.ii(s,o,i,n,t[10],15,-1051523),n=this.ii(n,s,o,i,t[1],21,-2054922799),i=this.ii(i,n,s,o,t[8],6,1873313359),o=this.ii(o,i,n,s,t[15],10,-30611744),s=this.ii(s,o,i,n,t[6],15,-1560198380),n=this.ii(n,s,o,i,t[13],21,1309151649),i=this.ii(i,n,s,o,t[4],6,-145523070),o=this.ii(o,i,n,s,t[11],10,-1120210379),s=this.ii(s,o,i,n,t[2],15,718787259),n=this.ii(n,s,o,i,t[9],21,-343485551),e[0]=this.add32(i,e[0]),e[1]=this.add32(n,e[1]),e[2]=this.add32(s,e[2]),e[3]=this.add32(o,e[3])}cmn(e,t,i,n,s,o){return t=this.add32(this.add32(t,e),this.add32(n,o)),this.add32(t<<s|t>>>32-s,i)}ff(e,t,i,n,s,o,a){return this.cmn(t&i|~t&n,e,t,s,o,a)}gg(e,t,i,n,s,o,a){return this.cmn(t&n|i&~n,e,t,s,o,a)}hh(e,t,i,n,s,o,a){return this.cmn(t^i^n,e,t,s,o,a)}ii(e,t,i,n,s,o,a){return this.cmn(i^(t|~n),e,t,s,o,a)}md51(e){const t=e.length,i=[1732584193,-271733879,-1732584194,271733878];let n;for(n=64;n<=e.length;n+=64)this.md5cycle(i,this.md5blk(e.substring(n-64,n)));e=e.substring(n-64);const s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<e.length;n++)s[n>>2]|=e.charCodeAt(n)<<(n%4<<3);if(s[n>>2]|=128<<(n%4<<3),n>55)for(this.md5cycle(i,s),n=0;n<16;n++)s[n]=0;return s[14]=8*t,this.md5cycle(i,s),i}md5blk(e){const t=[];for(let i=0;i<64;i+=4)t[i>>2]=e.charCodeAt(i)+(e.charCodeAt(i+1)<<8)+(e.charCodeAt(i+2)<<16)+(e.charCodeAt(i+3)<<24);return t}rhex(e){const t="0123456789abcdef".split("");let i="",n=0;for(;n<4;n++)i+=t[e>>8*n+4&15]+t[e>>8*n&15];return i}hex(e){for(let t=0;t<e.length;t++)e[t]=this.rhex(e[t]);return e.join("")}md5(e){return this.hex(this.md51(e))}add32(e,t){return this.ieCompatibility?this.add32Compat(e,t):this.add32Std(e,t)}add32Std(e,t){return e+t&4294967295}add32Compat(e,t){const i=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(i>>16)<<16|65535&i}}function H0(r){return null==r||0===r.length}const kb={"01":"GRID","02":"CHARTS","0102":"BOTH"};let wg=(()=>{class r{constructor(t){this.watermarkMessage=void 0,this.totalMessageLength=124,this.document=t,this.md5=new B0,this.md5.init()}validateLicense(){const t=this.getLicenseDetails(r.licenseKey),i=`AG Grid ${"BOTH"===t.currentLicenseType?"and AG Charts ":""}Enterprise`,n=void 0===t.suppliedLicenseType?"":`AG ${"BOTH"===t.suppliedLicenseType?"Grid and AG Charts":"GRID"===t.suppliedLicenseType?"Grid":"Charts"} Enterprise`;if(t.missing)(!this.isWebsiteUrl()||this.isForceWatermark())&&this.outputMissingLicenseKey(i);else if(t.expired){const s=r.getGridReleaseDate(),o=r.formatDate(s);this.outputExpiredKey(t.expiry,o,i,n)}else t.valid?t.isTrial&&t.trialExpired&&this.outputExpiredTrialKey(t.expiry,i,n):this.outputInvalidLicenseKey(!!t.incorrectLicenseType,i,n)}static extractExpiry(t){const i=t.substring(t.lastIndexOf("_")+1,t.length);return new Date(parseInt(r.decode(i),10))}static extractLicenseComponents(t){let i=t.replace(/[\u200B-\u200D\uFEFF]/g,"");if(i=i.replace(/\r?\n|\r/g,""),t.length<=32)return{md5:null,license:t,version:null,isTrial:null};const n=i.length-32,s=i.substring(n),o=i.substring(0,n),[a,c,u]=r.extractBracketedInformation(i);return{md5:s,license:o,version:a,isTrial:c,type:u}}getLicenseDetails(t){const i=r.chartsLicenseManager?"BOTH":"GRID";if(H0(t))return{licenseKey:t,valid:!1,missing:!0,currentLicenseType:i};const n=r.getGridReleaseDate(),{md5:s,license:o,version:a,isTrial:c,type:u}=r.extractLicenseComponents(t);let g,m,_,p=s===this.md5.md5(o)&&-1===t.indexOf("For_Trialing_ag-Grid_Only"),y=null,b=!1;function E(){const D=new Date;g=y<D,m=void 0}if(p&&(y=r.extractExpiry(o),p=!isNaN(y.getTime()),p))switch(m=n>y,a){case"legacy":case"2":c&&E();break;case"3":H0(u)?p=!1:(_=u,u!==kb["01"]&&u!==kb["0102"]||"BOTH"===i&&"BOTH"!==_?(p=!1,b=!0):c&&E())}return p?{licenseKey:t,valid:p,expiry:r.formatDate(y),expired:m,version:a,isTrial:c,trialExpired:g,incorrectLicenseType:b,currentLicenseType:i,suppliedLicenseType:_}:{licenseKey:t,valid:p,incorrectLicenseType:b,currentLicenseType:i,suppliedLicenseType:_}}isDisplayWatermark(){return this.isForceWatermark()||!this.isLocalhost()&&!this.isWebsiteUrl()&&!H0(this.watermarkMessage)}getWatermarkMessage(){return this.watermarkMessage||""}getHostname(){const i=(this.document.defaultView||window).location,{hostname:n=""}=i;return n}isForceWatermark(){const i=(this.document.defaultView||window).location,{pathname:n}=i;return!!n&&-1!==n.indexOf("forceWatermark")}isWebsiteUrl(){return null!==this.getHostname().match(/^((?:\w+\.)?ag-grid\.com)$/)}isLocalhost(){return null!==this.getHostname().match(/^(?:127\.0\.0\.1|localhost)$/)}static formatDate(t){const n=t.getDate(),s=t.getMonth(),o=t.getFullYear();return n+" "+["January","February","March","April","May","June","July","August","September","October","November","December"][s]+" "+o}static getGridReleaseDate(){return new Date(parseInt(r.decode(r.RELEASE_INFORMATION),10))}static decode(t){const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";let s,o,a,c,u,p,g,n="",m=0;const y=t.replace(/[^A-Za-z0-9+/=]/g,"");for(;m<y.length;)c=i.indexOf(y.charAt(m++)),u=i.indexOf(y.charAt(m++)),p=i.indexOf(y.charAt(m++)),g=i.indexOf(y.charAt(m++)),s=c<<2|u>>4,o=(15&u)<<4|p>>2,a=(3&p)<<6|g,n+=String.fromCharCode(s),64!=p&&(n+=String.fromCharCode(o)),64!=g&&(n+=String.fromCharCode(a));return n=r.utf8_decode(n),n}static utf8_decode(t){t=t.replace(/rn/g,"n");let i="";for(let n=0;n<t.length;n++){const s=t.charCodeAt(n);s<128?i+=String.fromCharCode(s):s>127&&s<2048?(i+=String.fromCharCode(s>>6|192),i+=String.fromCharCode(63&s|128)):(i+=String.fromCharCode(s>>12|224),i+=String.fromCharCode(s>>6&63|128),i+=String.fromCharCode(63&s|128))}return i}static setChartsLicenseManager(t){this.chartsLicenseManager=t}static setLicenseKey(t){this.licenseKey=t,this.chartsLicenseManager&&this.chartsLicenseManager.setLicenseKey(t,!0)}static extractBracketedInformation(t){if(!t.includes("["))return["legacy",!1,void 0];const i=t.match(/\[(.*?)\]/g).map(c=>c.replace("[","").replace("]",""));if(!i||0===i.length)return["legacy",!1,void 0];const n=1===i.filter(c=>"TRIAL"===c).length,s=i.filter(c=>0===c.indexOf("v"))[0];return[s?s.replace("v",""):"legacy",n,kb[i.filter(c=>kb[c])[0]]]}centerPadAndOutput(t){console.error(t.padStart((this.totalMessageLength-t.length)/2+t.length,"*").padEnd(this.totalMessageLength,"*"))}padAndOutput(t,i="*",n=""){console.error(t.padEnd(this.totalMessageLength-n.length,i)+n)}outputInvalidLicenseKey(t,i,n){t?(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Incompatible License Key "),this.padAndOutput(`* Your license key is for ${n} only and does not cover you for ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to obtain a combined license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")):(this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Invalid License Key "),this.padAndOutput("* Your license key is not valid - please contact info@ag-grid.com to obtain a valid license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput("")),this.watermarkMessage="Invalid License"}outputExpiredTrialKey(t,i,n){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${i} License `),this.centerPadAndOutput(" Trial Period Expired. "),this.padAndOutput(`* Your trial only license for ${n} expired on ${t}.`," ","*"),this.padAndOutput("* Please email info@ag-grid.com to purchase a license."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="Trial Period Expired"}outputMissingLicenseKey(t){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${t} License `),this.centerPadAndOutput(" License Key Not Found "),this.padAndOutput(`* All ${t} features are unlocked for trial.`," ","*"),this.padAndOutput("* If you want to hide the watermark please email info@ag-grid.com for a trial license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="For Trial Use Only"}outputExpiredKey(t,i,n,s){this.centerPadAndOutput(""),this.centerPadAndOutput(` ${n} License `),this.centerPadAndOutput(" Incompatible Software Version "),this.padAndOutput(`* Your license key works with versions of ${s} released before ${t}.`," ","*"),this.padAndOutput(`* The version you are trying to use was released on ${i}.`," ","*"),this.padAndOutput("* Please contact info@ag-grid.com to renew your license key."," ","*"),this.centerPadAndOutput(""),this.centerPadAndOutput(""),this.watermarkMessage="License Expired"}}return r.RELEASE_INFORMATION="MTcwODI3NzkwNjI5Nw==",r})();var iO=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let fC=class extends Ee{validateLicense(){this.licenseManager=new wg(this.gridOptionsService.getDocument()),this.licenseManager.validateLicense()}static getLicenseDetails(e){return new wg(null).getLicenseDetails(e)}isDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}getWatermarkMessage(){return this.licenseManager.getWatermarkMessage()}static setLicenseKey(e){wg.setLicenseKey(e)}static setChartsLicenseManager(e){wg.setChartsLicenseManager(e)}};iO([vf],fC.prototype,"validateLicense",null),fC=iO([He("licenseManager")],fC);var du=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Gb extends Ne{constructor(){super('<div class="ag-watermark">\n                <div ref="eLicenseTextRef" class="ag-watermark-text"></div>\n            </div>')}postConstruct(){const e=this.shouldDisplayWatermark();this.setDisplayed(e),e&&(this.eLicenseTextRef.innerText=this.licenseManager.getWatermarkMessage(),window.setTimeout(()=>this.addCssClass("ag-opacity-zero"),0),window.setTimeout(()=>this.setDisplayed(!1),5e3))}shouldDisplayWatermark(){return this.licenseManager.isDisplayWatermark()}}du([P("licenseManager")],Gb.prototype,"licenseManager",void 0),du([re("eLicenseTextRef")],Gb.prototype,"eLicenseTextRef",void 0),du([Se],Gb.prototype,"postConstruct",null);const uu={version:"31.1.1",moduleName:ze.EnterpriseCoreModule,beans:[fC],agStackComponents:[{componentName:"AgWatermark",componentClass:Gb}]};var ns=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let ea=class extends Ee{hideActiveMenu(){this.destroyBean(this.activeMenu)}showMenuAfterMouseEvent(e,t,i,n){const s=n?"filterMenuTab":void 0;this.showMenu(e,o=>{var a;const c=o.getGui();this.popupService.positionPopupUnderMouseEvent({type:i,column:e,mouseEvent:t,ePopup:c}),s&&(null===(a=o.showTab)||void 0===a||a.call(o,s)),this.dispatchVisibleChangedEvent(!0,!1,e,s)},i,s,void 0,t.target)}showMenuAfterButtonClick(e,t,i,n){let s=-1,o="left";this.gridOptionsService.get("enableRtl")&&(s=1,o="right");const a=n?"filterMenuTab":void 0,c=a?[a]:void 0,u=this.menuService.isLegacyMenuEnabled();let p=(u?9:4)*s,g=u?-23:4;this.showMenu(e,m=>{var y;const b=m.getGui();this.popupService.positionPopupByComponent({type:i,column:e,eventSource:t,ePopup:b,alignSide:o,nudgeX:p,nudgeY:g,position:"under",keepWithinBounds:!0}),a&&(null===(y=m.showTab)||void 0===y||y.call(m,a)),this.dispatchVisibleChangedEvent(!0,!1,e,a)},i,a,c,t)}showMenu(e,t,i,n,s,o){var a;const{menu:c,eMenuGui:u,anchorToElement:p,restoreFocusParams:g}=this.getMenuParams(e,s,o),m=[];e&&m.push(_=>{const E=c.getGui();this.destroyBean(c),e?.setMenuVisible(!1,"contextMenu"),this.menuUtils.restoreFocusOnClose(g,E,_)});const y=this.localeService.getLocaleTextFunc();if(this.popupService.addPopup({modal:!0,eChild:u,closeOnEsc:!0,closedCallback:_=>{m.forEach(E=>E(_)),this.dispatchVisibleChangedEvent(!1,!1,e,n)},afterGuiAttached:_=>c.afterGuiAttached(Object.assign({},{container:i},_)),positionCallback:n?()=>t(c):void 0,ariaLabel:y("ariaLabelColumnMenu","Column Menu")}),n||(null===(a=c.showTabBasedOnPreviousSelection)||void 0===a||a.call(c),t(c)),this.menuService.isColumnMenuAnchoringEnabled()){const _=this.popupService.setPopupPositionRelatedToElement(u,p);_&&e&&this.addStopAnchoring(_,e,m)}c.addEventListener(jt.EVENT_TAB_SELECTED,_=>{this.dispatchVisibleChangedEvent(!1,!0,e),this.lastSelectedTab=_.key,this.dispatchVisibleChangedEvent(!0,!0,e)}),e?.setMenuVisible(!0,"contextMenu"),this.activeMenu=c,c.addEventListener(Ee.EVENT_DESTROYED,()=>{this.activeMenu===c&&(this.activeMenu=null)})}addStopAnchoring(e,t,i){e.then(n=>{t.addEventListener("leftChanged",n),t.addEventListener("visibleChanged",n),i.push(()=>{t.removeEventListener("leftChanged",n),t.removeEventListener("visibleChanged",n)})})}getMenuParams(e,t,i){const n={column:e,headerPosition:this.focusService.getFocusedHeader(),columnIndex:this.columnModel.getAllDisplayedColumns().indexOf(e),eventSource:i},s=this.createMenu(e,n,t,i);return{menu:s,eMenuGui:s.getGui(),anchorToElement:i||this.ctrlsService.getGridBodyCtrl().getGui(),restoreFocusParams:n}}createMenu(e,t,i,n){return this.menuService.isLegacyMenuEnabled()?this.createBean(new jt(e,t,this.lastSelectedTab,i,n)):this.createBean(new sp(e,t,n))}dispatchVisibleChangedEvent(e,t,i,n){var s,o;const a={type:G.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:e,switchingTab:t,key:null!==(o=null!==(s=this.lastSelectedTab)&&void 0!==s?s:n)&&void 0!==o?o:this.menuService.isLegacyMenuEnabled()?jt.TAB_GENERAL:"columnMenu",column:i??null};this.eventService.dispatchEvent(a)}isMenuEnabled(e){var t;if(!this.menuService.isLegacyMenuEnabled())return!0;const i=!this.filterManager.isFilterAllowed(e),n=null!==(t=e.getColDef().menuTabs)&&void 0!==t?t:jt.TABS_DEFAULT;return(i&&n.includes(jt.TAB_FILTER)?n.length-1:n.length)>0}showMenuAfterContextMenuEvent(e,t,i){this.menuUtils.onContextMenu(t,i,n=>(this.showMenuAfterMouseEvent(e,n,"columnMenu"),!0))}};ns([P("popupService")],ea.prototype,"popupService",void 0),ns([P("focusService")],ea.prototype,"focusService",void 0),ns([P("ctrlsService")],ea.prototype,"ctrlsService",void 0),ns([P("columnModel")],ea.prototype,"columnModel",void 0),ns([P("filterManager")],ea.prototype,"filterManager",void 0),ns([P("menuUtils")],ea.prototype,"menuUtils",void 0),ns([P("menuService")],ea.prototype,"menuService",void 0),ea=ns([He("enterpriseMenuFactory")],ea);class jt extends Ee{constructor(e,t,i,n,s){super(),this.column=e,this.restoreFocusParams=t,this.initialSelection=i,this.restrictTo=n,this.sourceElement=s,this.tabFactories={},this.includeChecks={},this.tabFactories[jt.TAB_GENERAL]=this.createMainPanel.bind(this),this.tabFactories[jt.TAB_FILTER]=this.createFilterPanel.bind(this),this.tabFactories[jt.TAB_COLUMNS]=this.createColumnsPanel.bind(this),this.includeChecks[jt.TAB_GENERAL]=()=>!0,this.includeChecks[jt.TAB_FILTER]=()=>!!e&&this.filterManager.isFilterAllowed(e),this.includeChecks[jt.TAB_COLUMNS]=()=>!0}init(){const e=this.getTabsToCreate().map(t=>this.createTab(t));this.tabbedLayout=new Nc({items:e,cssClass:"ag-menu",onActiveItemClicked:this.onHidePopup.bind(this),onItemClicked:this.onTabItemClicked.bind(this)}),this.createBean(this.tabbedLayout),this.mainMenuList&&this.mainMenuList.setParentComponent(this.tabbedLayout),this.addDestroyFunc(()=>this.destroyBean(this.tabbedLayout))}getTabsToCreate(){var e,t;return this.restrictTo?this.restrictTo:(null!==(t=null===(e=this.column)||void 0===e?void 0:e.getColDef().menuTabs)&&void 0!==t?t:jt.TABS_DEFAULT).filter(i=>this.isValidMenuTabItem(i)).filter(i=>this.isNotSuppressed(i)).filter(i=>this.isModuleLoaded(i))}isModuleLoaded(e){return e!==jt.TAB_COLUMNS||yt.__isRegistered(ze.ColumnsToolPanelModule,this.context.getGridId())}isValidMenuTabItem(e){let t=!0,i=jt.TABS_DEFAULT;return null!=this.restrictTo&&(t=this.restrictTo.indexOf(e)>-1,i=this.restrictTo),t=t&&jt.TABS_DEFAULT.indexOf(e)>-1,t||console.warn(`AG Grid: Trying to render an invalid menu item '${e}'. Check that your 'menuTabs' contains one of [${i}]`),t}isNotSuppressed(e){return this.includeChecks[e]()}createTab(e){return this.tabFactories[e]()}showTabBasedOnPreviousSelection(){this.showTab(this.initialSelection)}showTab(e){this.tabItemColumns&&e===jt.TAB_COLUMNS?this.tabbedLayout.showItem(this.tabItemColumns):this.tabItemFilter&&e===jt.TAB_FILTER?this.tabbedLayout.showItem(this.tabItemFilter):this.tabItemGeneral&&e===jt.TAB_GENERAL?this.tabbedLayout.showItem(this.tabItemGeneral):this.tabbedLayout.showFirstItem()}onTabItemClicked(e){let t=null;switch(e.item){case this.tabItemColumns:t=jt.TAB_COLUMNS;break;case this.tabItemFilter:t=jt.TAB_FILTER;break;case this.tabItemGeneral:t=jt.TAB_GENERAL}t&&this.activateTab(t)}activateTab(e){this.dispatchEvent({type:jt.EVENT_TAB_SELECTED,key:e})}createMainPanel(){return this.mainMenuList=this.columnMenuFactory.createMenu(this,this.column,()=>{var e;return null!==(e=this.sourceElement)&&void 0!==e?e:this.getGui()}),this.mainMenuList.addEventListener(wn.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.tabItemGeneral={title:z.createIconNoSpan("menu",this.gridOptionsService,this.column),titleLabel:jt.TAB_GENERAL.replace("MenuTab",""),bodyPromise:$t.resolve(this.mainMenuList.getGui()),name:jt.TAB_GENERAL},this.tabItemGeneral}onHidePopup(e){this.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}createFilterPanel(){const e=this.column?this.filterManager.getOrCreateFilterWrapper(this.column,"COLUMN_MENU"):null;if(!e)throw new Error("AG Grid - Unable to instantiate filter");return this.tabItemFilter={title:z.createIconNoSpan("filter",this.gridOptionsService,this.column),titleLabel:jt.TAB_FILTER.replace("MenuTab",""),bodyPromise:e?.guiPromise,afterAttachedCallback:n=>{!e?.filterPromise||e.filterPromise.then(s=>{s&&s.afterGuiAttached&&s.afterGuiAttached(n)})},afterDetachedCallback:()=>{var n;return null===(n=e?.filterPromise)||void 0===n?void 0:n.then(s=>{var o;return null===(o=s?.afterGuiDetached)||void 0===o?void 0:o.call(s)})},name:jt.TAB_FILTER},this.tabItemFilter}createColumnsPanel(){const e=document.createElement("div");e.classList.add("ag-menu-column-select-wrapper");const i=this.columnChooserFactory.createColumnSelectPanel(this,this.column).getGui();return i.classList.add("ag-menu-column-select"),e.appendChild(i),this.tabItemColumns={title:z.createIconNoSpan("columns",this.gridOptionsService,this.column),titleLabel:jt.TAB_COLUMNS.replace("MenuTab",""),bodyPromise:$t.resolve(e),name:jt.TAB_COLUMNS},this.tabItemColumns}afterGuiAttached(e){const{container:t,hidePopup:i}=e;this.tabbedLayout.setAfterAttachedParams({container:t,hidePopup:i}),i&&(this.hidePopupFunc=i,this.addDestroyFunc(i))}getGui(){return this.tabbedLayout.getGui()}}jt.EVENT_TAB_SELECTED="tabSelected",jt.TAB_FILTER="filterMenuTab",jt.TAB_GENERAL="generalMenuTab",jt.TAB_COLUMNS="columnsMenuTab",jt.TABS_DEFAULT=[jt.TAB_GENERAL,jt.TAB_FILTER,jt.TAB_COLUMNS],ns([P("filterManager")],jt.prototype,"filterManager",void 0),ns([P("columnChooserFactory")],jt.prototype,"columnChooserFactory",void 0),ns([P("columnMenuFactory")],jt.prototype,"columnMenuFactory",void 0),ns([P("menuUtils")],jt.prototype,"menuUtils",void 0),ns([Se],jt.prototype,"init",null);class sp extends Ne{constructor(e,t,i){super('\n            <div ref="eColumnMenu" role="presentation" class="ag-menu ag-column-menu"></div>\n        '),this.column=e,this.restoreFocusParams=t,this.sourceElement=i}init(){this.mainMenuList=this.columnMenuFactory.createMenu(this,this.column,()=>{var e;return null!==(e=this.sourceElement)&&void 0!==e?e:this.getGui()}),this.mainMenuList.addEventListener(wn.EVENT_CLOSE_MENU,this.onHidePopup.bind(this)),this.eColumnMenu.appendChild(this.mainMenuList.getGui())}onHidePopup(e){this.menuUtils.closePopupAndRestoreFocusOnSelect(this.hidePopupFunc,this.restoreFocusParams,e)}afterGuiAttached({hidePopup:e}){e&&(this.hidePopupFunc=e,this.addDestroyFunc(e)),this.focusService.focusInto(this.mainMenuList.getGui())}}ns([P("columnMenuFactory")],sp.prototype,"columnMenuFactory",void 0),ns([P("menuUtils")],sp.prototype,"menuUtils",void 0),ns([P("focusService")],sp.prototype,"focusService",void 0),ns([re("eColumnMenu")],sp.prototype,"eColumnMenu",void 0),ns([Se],sp.prototype,"init",null);var Gl=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const Vb="ag-context-menu-open";let Wc=class extends Ee{hideActiveMenu(){this.destroyBean(this.activeMenu)}getMenuItems(e,t,i){const n=[];if(z.exists(e)&&yt.__isRegistered(ze.ClipboardModule,this.context.getGridId())&&t&&(this.gridOptionsService.get("suppressCutToClipboard")||n.push("cut"),n.push("copy","copyWithHeaders","copyWithGroupHeaders","paste","separator")),this.gridOptionsService.get("enableCharts")&&yt.__isRegistered(ze.GridChartsModule,this.context.getGridId())&&(this.columnModel.isPivotMode()&&n.push("pivotChart"),this.rangeService&&!this.rangeService.isEmpty()&&n.push("chartRange")),z.exists(e)){const a=!yt.__isRegistered(ze.CsvExportModule,this.context.getGridId()),c=!yt.__isRegistered(ze.ExcelExportModule,this.context.getGridId()),u=this.gridOptionsService.get("suppressExcelExport")||c,p=this.gridOptionsService.get("suppressCsvExport")||a;!z.isIOSUserAgent()&&(!u||!p)&&n.push("export")}const s=n.length?n:void 0,o=t?.getColDef().contextMenuItems;if(Array.isArray(o))return o;if("function"==typeof o)return o(this.gridOptionsService.addGridCommonParams({column:t,node:e,value:i,defaultItems:s}));{const a=this.gridOptionsService.getCallback("getContextMenuItems");return a?a({column:t,node:e,value:i,defaultItems:s}):n}}onContextMenu(e,t,i,n,s,o){this.menuUtils.onContextMenu(e,t,a=>this.showMenu(i,n,s,a,o))}showMenu(e,t,i,n,s){const o=this.getMenuItems(e,t,i),a=this.ctrlsService.getGridBodyCtrl().getGui();if(void 0===o||z.missingOrEmpty(o))return!1;const c=new Eg(o,t,e,i);this.createBean(c);const u=c.getGui(),p={column:t,rowNode:e,type:"contextMenu",mouseEvent:n,ePopup:u,nudgeY:1},g=this.localeService.getLocaleTextFunc(),m=this.popupService.addPopup({modal:!0,eChild:u,closeOnEsc:!0,closedCallback:()=>{a.classList.remove(Vb),this.destroyBean(c)},click:n,positionCallback:()=>{const y=this.gridOptionsService.get("enableRtl");this.popupService.positionPopupUnderMouseEvent(Object.assign(Object.assign({},p),{nudgeX:y?-1*(u.offsetWidth+1):1}))},anchorToElement:s,ariaLabel:g("ariaLabelContextMenu","Context Menu")});return m&&(a.classList.add(Vb),c.afterGuiAttached({container:"contextMenu",hidePopup:m.hideFunc})),this.activeMenu&&this.hideActiveMenu(),this.activeMenu=c,c.addEventListener(Ee.EVENT_DESTROYED,()=>{this.activeMenu===c&&(this.activeMenu=null)}),m&&c.addEventListener(wn.EVENT_CLOSE_MENU,m.hideFunc),!0}};Gl([P("popupService")],Wc.prototype,"popupService",void 0),Gl([Pt("rangeService")],Wc.prototype,"rangeService",void 0),Gl([P("ctrlsService")],Wc.prototype,"ctrlsService",void 0),Gl([P("columnModel")],Wc.prototype,"columnModel",void 0),Gl([P("menuUtils")],Wc.prototype,"menuUtils",void 0),Wc=Gl([He("contextMenuFactory")],Wc);class Eg extends Ne{constructor(e,t,i,n){super('<div class="ag-menu" role="presentation"></div>'),this.menuItems=e,this.column=t,this.node=i,this.value=n,this.menuList=null,this.focusedCell=null}addMenuItems(){const e=this.createManagedBean(new Yh(0,{column:this.column,node:this.node,value:this.value})),t=this.menuItemMapper.mapWithStockItems(this.menuItems,null,()=>this.getGui());e.addMenuItems(t),this.appendChild(e),this.menuList=e,e.addEventListener(wn.EVENT_CLOSE_MENU,i=>this.dispatchEvent(i))}afterGuiAttached(e){e.hidePopup&&this.addDestroyFunc(e.hidePopup),this.focusedCell=this.focusService.getFocusedCell(),this.menuList&&this.focusService.focusInto(this.menuList.getGui())}restoreFocusedCell(){const e=this.focusService.getFocusedCell();if(e&&this.focusedCell&&this.cellPositionUtils.equals(e,this.focusedCell)){const{rowIndex:t,rowPinned:i,column:n}=this.focusedCell,s=this.gridOptionsService.getDocument();s.activeElement===s.body&&this.focusService.setFocusedCell({rowIndex:t,column:n,rowPinned:i,forceBrowserFocus:!0})}}destroy(){this.restoreFocusedCell(),super.destroy()}}Gl([P("menuItemMapper")],Eg.prototype,"menuItemMapper",void 0),Gl([P("focusService")],Eg.prototype,"focusService",void 0),Gl([P("cellPositionUtils")],Eg.prototype,"cellPositionUtils",void 0),Gl([Se],Eg.prototype,"addMenuItems",null);var za=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let wo=class extends Ee{mapWithStockItems(e,t,i){if(!e)return[];const n=[];return e.forEach(s=>{let o;if(o="string"==typeof s?this.getStockMenuItem(s,t,i):Object.assign({},s),!o)return;const a=o,{subMenu:c}=a;c&&c instanceof Array&&(a.subMenu=this.mapWithStockItems(c,t,i)),null!=o&&n.push(o)}),n}getStockMenuItem(e,t,i){var n;const s=this.localeService.getLocaleTextFunc(),o=this.gridOptionsService.get("skipHeaderOnAutoSize");switch(e){case"pinSubMenu":return{name:s("pinColumn","Pin Column"),icon:z.createIconNoSpan("menuPin",this.gridOptionsService,null),subMenu:["clearPinned","pinLeft","pinRight"]};case"pinLeft":return{name:s("pinLeft","Pin Left"),action:()=>this.columnModel.setColumnsPinned([t],"left","contextMenu"),checked:!!t&&t.isPinnedLeft()};case"pinRight":return{name:s("pinRight","Pin Right"),action:()=>this.columnModel.setColumnsPinned([t],"right","contextMenu"),checked:!!t&&t.isPinnedRight()};case"clearPinned":return{name:s("noPin","No Pin"),action:()=>this.columnModel.setColumnsPinned([t],null,"contextMenu"),checked:!!t&&!t.isPinned()};case"valueAggSubMenu":return yt.__assertRegistered(ze.RowGroupingModule,"Aggregation from Menu",this.context.getGridId())&&(t?.isPrimary()||t?.getColDef().pivotValueColumn)?{name:s("valueAggregation","Value Aggregation"),icon:z.createIconNoSpan("menuValue",this.gridOptionsService,null),subMenu:this.createAggregationSubMenu(t)}:null;case"autoSizeThis":return{name:s("autosizeThiscolumn","Autosize This Column"),action:()=>this.columnModel.autoSizeColumn(t,"contextMenu",o)};case"autoSizeAll":return{name:s("autosizeAllColumns","Autosize All Columns"),action:()=>this.columnModel.autoSizeAllColumns("contextMenu",o)};case"rowGroup":return{name:s("groupBy","Group by")+" "+z.escapeString(this.columnModel.getDisplayNameForColumn(t,"header")),disabled:t?.isRowGroupActive()||!t?.getColDef().enableRowGroup,action:()=>this.columnModel.addRowGroupColumns([t],"contextMenu"),icon:z.createIconNoSpan("menuAddRowGroup",this.gridOptionsService,null)};case"rowUnGroup":const a=z.createIconNoSpan("menuRemoveRowGroup",this.gridOptionsService,null),c=t?.getColDef().showRowGroup,u=this.gridOptionsService.get("groupLockGroupColumns");if(!0===c)return{name:s("ungroupAll","Un-Group All"),disabled:-1===u||u>=this.columnModel.getRowGroupColumns().length,action:()=>this.columnModel.setRowGroupColumns(this.columnModel.getRowGroupColumns().slice(0,u),"contextMenu"),icon:a};if("string"==typeof c){const y=this.columnModel.getPrimaryColumn(c),b=null!=y?z.escapeString(this.columnModel.getDisplayNameForColumn(y,"header")):c;return{name:s("ungroupBy","Un-Group by")+" "+b,disabled:null!=y&&this.columnModel.isColumnGroupingLocked(y),action:()=>this.columnModel.removeRowGroupColumns([c],"contextMenu"),icon:a}}return{name:s("ungroupBy","Un-Group by")+" "+z.escapeString(this.columnModel.getDisplayNameForColumn(t,"header")),disabled:!t?.isRowGroupActive()||!t?.getColDef().enableRowGroup||this.columnModel.isColumnGroupingLocked(t),action:()=>this.columnModel.removeRowGroupColumns([t],"contextMenu"),icon:a};case"resetColumns":return{name:s("resetColumns","Reset Columns"),action:()=>this.columnModel.resetColumnState("contextMenu")};case"expandAll":return{name:s("expandAll","Expand All Row Groups"),action:()=>this.gridApi.expandAll()};case"contractAll":return{name:s("collapseAll","Collapse All Row Groups"),action:()=>this.gridApi.collapseAll()};case"copy":return yt.__assertRegistered(ze.ClipboardModule,"Copy from Menu",this.context.getGridId())?{name:s("copy","Copy"),shortcut:s("ctrlC","Ctrl+C"),icon:z.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:()=>this.clipboardService.copyToClipboard()}:null;case"copyWithHeaders":return yt.__assertRegistered(ze.ClipboardModule,"Copy with Headers from Menu",this.context.getGridId())?{name:s("copyWithHeaders","Copy with Headers"),icon:z.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0})}:null;case"copyWithGroupHeaders":return yt.__assertRegistered(ze.ClipboardModule,"Copy with Group Headers from Menu",this.context.getGridId())?{name:s("copyWithGroupHeaders","Copy with Group Headers"),icon:z.createIconNoSpan("clipboardCopy",this.gridOptionsService,null),action:()=>this.clipboardService.copyToClipboard({includeHeaders:!0,includeGroupHeaders:!0})}:null;case"cut":if(yt.__assertRegistered(ze.ClipboardModule,"Cut from Menu",this.context.getGridId())){const y=this.focusService.getFocusedCell(),b=y?this.rowPositionUtils.getRowNode(y):null,_=!!b&&y?.column.isCellEditable(b);return{name:s("cut","Cut"),shortcut:s("ctrlX","Ctrl+X"),icon:z.createIconNoSpan("clipboardCut",this.gridOptionsService,null),disabled:!_||this.gridOptionsService.get("suppressCutToClipboard"),action:()=>this.clipboardService.cutToClipboard(void 0,"contextMenu")}}return null;case"paste":return yt.__assertRegistered(ze.ClipboardModule,"Paste from Clipboard",this.context.getGridId())?{name:s("paste","Paste"),shortcut:s("ctrlV","Ctrl+V"),disabled:!0,icon:z.createIconNoSpan("clipboardPaste",this.gridOptionsService,null),action:()=>this.clipboardService.pasteFromClipboard()}:null;case"export":const p=[],g=yt.__isRegistered(ze.CsvExportModule,this.context.getGridId()),m=yt.__isRegistered(ze.ExcelExportModule,this.context.getGridId());return!this.gridOptionsService.get("suppressCsvExport")&&g&&p.push("csvExport"),!this.gridOptionsService.get("suppressExcelExport")&&m&&p.push("excelExport"),{name:s("export","Export"),subMenu:p,icon:z.createIconNoSpan("save",this.gridOptionsService,null)};case"csvExport":return{name:s("csvExport","CSV Export"),icon:z.createIconNoSpan("csvExport",this.gridOptionsService,null),action:()=>this.gridApi.exportDataAsCsv({})};case"excelExport":return{name:s("excelExport","Excel Export"),icon:z.createIconNoSpan("excelExport",this.gridOptionsService,null),action:()=>this.gridApi.exportDataAsExcel()};case"separator":return"separator";case"pivotChart":case"chartRange":return null!==(n=this.chartMenuItemMapper.getChartItems(e))&&void 0!==n?n:null;case"columnFilter":return t?{name:s("columnFilter","Column Filter"),icon:z.createIconNoSpan("filter",this.gridOptionsService,null),action:()=>this.menuService.showFilterMenu({column:t,buttonElement:i(),containerType:"columnFilter",positionBy:"button"})}:null;case"columnChooser":return yt.__isRegistered(ze.ColumnsToolPanelModule,this.context.getGridId())?{name:s("columnChooser","Choose Columns"),icon:z.createIconNoSpan("columns",this.gridOptionsService,null),action:()=>this.menuService.showColumnChooser({column:t,eventSource:i()})}:null;case"sortAscending":return{name:s("sortAscending","Sort Ascending"),icon:z.createIconNoSpan("sortAscending",this.gridOptionsService,null),action:()=>this.sortController.setSortForColumn(t,"asc",!1,"columnMenu")};case"sortDescending":return{name:s("sortDescending","Sort Descending"),icon:z.createIconNoSpan("sortDescending",this.gridOptionsService,null),action:()=>this.sortController.setSortForColumn(t,"desc",!1,"columnMenu")};case"sortUnSort":return{name:s("sortUnSort","Clear Sort"),icon:z.createIconNoSpan("sortUnSort",this.gridOptionsService,null),action:()=>this.sortController.setSortForColumn(t,null,!1,"columnMenu")};default:return console.warn(`AG Grid: unknown menu item type ${e}`),null}}createAggregationSubMenu(e){const t=this.localeService.getLocaleTextFunc();let i;if(e.isPrimary())i=e;else{const s=e.getColDef().pivotValueColumn;i=z.exists(s)?s:void 0}const n=[];if(i){const s=i.isValueActive(),o=this.aggFuncService.getFuncNames(i);n.push({name:t("noAggregation","None"),action:()=>{this.columnModel.removeValueColumns([i],"contextMenu"),this.columnModel.setColumnAggFunc(i,void 0,"contextMenu")},checked:!s}),o.forEach(a=>{n.push({name:t(a,this.aggFuncService.getDefaultFuncLabel(a)),action:()=>{this.columnModel.setColumnAggFunc(i,a,"contextMenu"),this.columnModel.addValueColumns([i],"contextMenu")},checked:s&&i.getAggFunc()===a})})}return n}};za([P("columnModel")],wo.prototype,"columnModel",void 0),za([P("gridApi")],wo.prototype,"gridApi",void 0),za([Pt("clipboardService")],wo.prototype,"clipboardService",void 0),za([Pt("aggFuncService")],wo.prototype,"aggFuncService",void 0),za([P("focusService")],wo.prototype,"focusService",void 0),za([P("rowPositionUtils")],wo.prototype,"rowPositionUtils",void 0),za([P("chartMenuItemMapper")],wo.prototype,"chartMenuItemMapper",void 0),za([P("menuService")],wo.prototype,"menuService",void 0),za([P("sortController")],wo.prototype,"sortController",void 0),wo=za([He("menuItemMapper")],wo);var U0,sO=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Bb=U0=class extends Ee{getChartItems(e){var t,i;if(!this.chartService)return void yt.__assertRegistered(ze.GridChartsModule,`the Context Menu key "${e}"`,this.context.getGridId());const n="pivotChart"===e?new rO(this.gridOptionsService,this.chartService,this.localeService):new M1(this.gridOptionsService,this.chartService,this.localeService),s=this.chartService.isEnterprise();let o=n.getMenuItem();if(o&&o.subMenu&&!s){const c=u=>{var p;return Object.assign(Object.assign({},u),{subMenu:null===(p=u.subMenu)||void 0===p?void 0:p.filter(g=>!g._enterprise).map(g=>c(g))})};o=c(o)}const a=null===(i=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.settingsPanel)||void 0===i?void 0:i.chartGroupsDef;return a&&(o=U0.filterAndOrderChartMenu(o,a,n.getConfigLookup())),this.cleanInternals(o)}cleanInternals(e){if(!e)return e;const t=i=>{var n;return null==i||delete i._key,null==i||delete i._enterprise,null===(n=i?.subMenu)||void 0===n||n.forEach(s=>t(s)),i};return t(e)}static buildLookup(e){let t={};const i=n=>{t[n._key]=n,n.subMenu&&n.subMenu.forEach(s=>i(s))};return i(e),t}static filterAndOrderChartMenu(e,t,i){var n;const s=this.buildLookup(e);let o=Object.assign(Object.assign({},e),{subMenu:[]});if(Object.entries(t).forEach(([a,c])=>{var u,p;const g=i[a];if(null===g)return;if(null==g)return void z.warnOnce(`invalid chartGroupsDef config '${a}'`);const m=s[g._key];if(m)if(m.subMenu){const y=c.map(b=>{const _=g[b];if(null!=_)return s[_];z.warnOnce(`invalid chartGroupsDef config '${a}.${b}'`)}).filter(b=>void 0!==b);y.length>0&&(m.subMenu=y,null===(u=o.subMenu)||void 0===u||u.push(m))}else null===(p=o.subMenu)||void 0===p||p.push(m)}),0!=(null===(n=o.subMenu)||void 0===n?void 0:n.length))return o}};sO([Pt("chartService")],Bb.prototype,"chartService",void 0),Bb=U0=sO([He("chartMenuItemMapper")],Bb);class rO{constructor(e,t,i){this.gridOptionsService=e,this.chartService=t,this.localeService=i}getMenuItem(){const e=this.localeService.getLocaleTextFunc(),t=(i,n,s,o,a=!1)=>({name:e(i,n),action:()=>this.chartService.createPivotChart({chartType:s}),_key:o,_enterprise:a});return{name:e("pivotChart","Pivot Chart"),_key:"pivotChart",subMenu:[{_key:"pivotColumnChart",name:e("columnChart","Column"),subMenu:[t("groupedColumn","Grouped&lrm;","groupedColumn","pivotGroupedColumn"),t("stackedColumn","Stacked&lrm;","stackedColumn","pivotStackedColumn"),t("normalizedColumn","100% Stacked&lrm;","normalizedColumn","pivotNormalizedColumn")]},{_key:"pivotBarChart",name:e("barChart","Bar"),subMenu:[t("groupedBar","Grouped&lrm;","groupedBar","pivotGroupedBar"),t("stackedBar","Stacked&lrm;","stackedBar","pivotStackedBar"),t("normalizedBar","100% Stacked&lrm;","normalizedBar","pivotNormalizedBar")]},{_key:"pivotPieChart",name:e("pieChart","Pie"),subMenu:[t("pie","Pie&lrm;","pie","pivotPie"),t("donut","Donut&lrm;","donut","pivotDonut")]},t("line","Line&lrm;","line","pivotLineChart"),{_key:"pivotXYChart",name:e("xyChart","X Y (Scatter)"),subMenu:[t("scatter","Scatter&lrm;","scatter","pivotScatter"),t("bubble","Bubble&lrm;","bubble","pivotBubble")]},{_key:"pivotAreaChart",name:e("areaChart","Area"),subMenu:[t("area","Area&lrm;","area","pivotArea"),t("stackedArea","Stacked&lrm;","stackedArea","pivotStackedArea"),t("normalizedArea","100% Stacked&lrm;","normalizedArea","pivotNormalizedArea")]},{_key:"pivotStatisticalChart",_enterprise:!1,name:e("statisticalChart","Statistical"),subMenu:[t("histogramChart","Histogram&lrm;","histogram","pivotHistogram",!1)]},{_key:"pivotHierarchicalChart",_enterprise:!0,name:e("hierarchicalChart","Hierarchical"),subMenu:[t("treemapChart","Treemap&lrm;","treemap","pivotTreemap",!0),t("sunburstChart","Sunburst&lrm;","sunburst","pivotSunburst",!0)]},{_key:"pivotCombinationChart",name:e("combinationChart","Combination"),subMenu:[t("columnLineCombo","Column & Line&lrm;","columnLineCombo","pivotColumnLineCombo"),t("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","pivotAreaColumnCombo")]}],icon:z.createIconNoSpan("chart",this.gridOptionsService,void 0)}}getConfigLookup(){return{columnGroup:{_key:"pivotColumnChart",column:"pivotGroupedColumn",stackedColumn:"pivotStackedColumn",normalizedColumn:"pivotNormalizedColumn"},barGroup:{_key:"pivotBarChart",bar:"pivotGroupedBar",stackedBar:"pivotStackedBar",normalizedBar:"pivotNormalizedBar"},pieGroup:{_key:"pivotPieChart",pie:"pivotPie",donut:"pivotDonut",doughnut:"pivotDonut"},lineGroup:{_key:"pivotLineChart",line:"pivotLineChart"},scatterGroup:{_key:"pivotXYChart",bubble:"pivotBubble",scatter:"pivotScatter"},areaGroup:{_key:"pivotAreaChart",area:"pivotArea",stackedArea:"pivotStackedArea",normalizedArea:"pivotNormalizedArea"},combinationGroup:{_key:"pivotCombinationChart",columnLineCombo:"pivotColumnLineCombo",areaColumnCombo:"pivotAreaColumnCombo",customCombo:null},hierarchicalGroup:{_key:"pivotHierarchicalChart",treemap:"pivotTreemap",sunburst:"pivotSunburst"},statisticalGroup:{_key:"pivotStatisticalChart",histogram:"pivotHistogram",rangeBar:null,rangeArea:null,boxPlot:null},polarGroup:null,specializedGroup:null}}}class M1{constructor(e,t,i){this.gridOptionsService=e,this.chartService=t,this.localeService=i}getMenuItem(){const e=this.localeService.getLocaleTextFunc(),t=(i,n,s,o,a=!1)=>({name:e(i,n),action:()=>this.chartService.createChartFromCurrentRange(s),_key:o,_enterprise:a});return{name:e("chartRange","Chart Range"),_key:"chartRange",subMenu:[{name:e("columnChart","Column"),subMenu:[t("groupedColumn","Grouped&lrm;","groupedColumn","rangeGroupedColumn"),t("stackedColumn","Stacked&lrm;","stackedColumn","rangeStackedColumn"),t("normalizedColumn","100% Stacked&lrm;","normalizedColumn","rangeNormalizedColumn")],_key:"rangeColumnChart"},{name:e("barChart","Bar"),subMenu:[t("groupedBar","Grouped&lrm;","groupedBar","rangeGroupedBar"),t("stackedBar","Stacked&lrm;","stackedBar","rangeStackedBar"),t("normalizedBar","100% Stacked&lrm;","normalizedBar","rangeNormalizedBar")],_key:"rangeBarChart"},{name:e("pieChart","Pie"),subMenu:[t("pie","Pie&lrm;","pie","rangePie"),t("donut","Donut&lrm;","donut","rangeDonut")],_key:"rangePieChart"},t("line","Line&lrm;","line","rangeLineChart"),{name:e("xyChart","X Y (Scatter)"),subMenu:[t("scatter","Scatter&lrm;","scatter","rangeScatter"),t("bubble","Bubble&lrm;","bubble","rangeBubble")],_key:"rangeXYChart"},{name:e("areaChart","Area"),subMenu:[t("area","Area&lrm;","area","rangeArea"),t("stackedArea","Stacked&lrm;","stackedArea","rangeStackedArea"),t("normalizedArea","100% Stacked&lrm;","normalizedArea","rangeNormalizedArea")],_key:"rangeAreaChart"},{name:e("polarChart","Polar"),subMenu:[t("radarLine","Radar Line&lrm;","radarLine","rangeRadarLine"),t("radarArea","Radar Area&lrm;","radarArea","rangeRadarArea"),t("nightingale","Nightingale&lrm;","nightingale","rangeNightingale"),t("radialColumn","Radial Column&lrm;","radialColumn","rangeRadialColumn"),t("radialBar","Radial Bar&lrm;","radialBar","rangeRadialBar")],_key:"rangePolarChart",_enterprise:!0},{name:e("statisticalChart","Statistical"),subMenu:[t("boxPlot","Box Plot&lrm;","boxPlot","rangeBoxPlot",!0),t("histogramChart","Histogram&lrm;","histogram","rangeHistogram",!1),t("rangeBar","Range Bar&lrm;","rangeBar","rangeRangeBar",!0),t("rangeArea","Range Area&lrm;","rangeArea","rangeRangeArea",!0)],_key:"rangeStatisticalChart",_enterprise:!1},{name:e("hierarchicalChart","Hierarchical"),subMenu:[t("treemap","Treemap&lrm;","treemap","rangeTreemap"),t("sunburst","Sunburst&lrm;","sunburst","rangeSunburst")],_key:"rangeHierarchicalChart",_enterprise:!0},{name:e("specializedChart","Specialized"),subMenu:[t("heatmap","Heatmap&lrm;","heatmap","rangeHeatmap"),t("waterfall","Waterfall&lrm;","waterfall","rangeWaterfall")],_key:"rangeSpecializedChart",_enterprise:!0},{name:e("combinationChart","Combination"),subMenu:[t("columnLineCombo","Column & Line&lrm;","columnLineCombo","rangeColumnLineCombo"),t("AreaColumnCombo","Area & Column&lrm;","areaColumnCombo","rangeAreaColumnCombo")],_key:"rangeCombinationChart"}],icon:z.createIconNoSpan("chart",this.gridOptionsService,void 0)}}getConfigLookup(){return{columnGroup:{_key:"rangeColumnChart",column:"rangeGroupedColumn",stackedColumn:"rangeStackedColumn",normalizedColumn:"rangeNormalizedColumn"},barGroup:{_key:"rangeBarChart",bar:"rangeGroupedBar",stackedBar:"rangeStackedBar",normalizedBar:"rangeNormalizedBar"},pieGroup:{_key:"rangePieChart",pie:"rangePie",donut:"rangeDonut",doughnut:"rangeDonut"},lineGroup:{_key:"rangeLineChart",line:"rangeLineChart"},scatterGroup:{_key:"rangeXYChart",bubble:"rangeBubble",scatter:"rangeScatter"},areaGroup:{_key:"rangeAreaChart",area:"rangeArea",stackedArea:"rangeStackedArea",normalizedArea:"rangeNormalizedArea"},polarGroup:{_key:"rangePolarChart",radarLine:"rangeRadarLine",radarArea:"rangeRadarArea",nightingale:"rangeNightingale",radialColumn:"rangeRadialColumn",radialBar:"rangeRadialBar"},statisticalGroup:{_key:"rangeStatisticalChart",boxPlot:"rangeBoxPlot",histogram:"rangeHistogram",rangeBar:"rangeRangeBar",rangeArea:"rangeRangeArea"},hierarchicalGroup:{_key:"rangeHierarchicalChart",treemap:"rangeTreemap",sunburst:"rangeSunburst"},specializedGroup:{_key:"rangeSpecializedChart",heatmap:"rangeHeatmap",waterfall:"rangeWaterfall"},combinationGroup:{_key:"rangeCombinationChart",columnLineCombo:"rangeColumnLineCombo",areaColumnCombo:"rangeAreaColumnCombo",customCombo:null}}}}var Dg=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},$a=(()=>(function(r){r[r.EXPANDED=0]="EXPANDED",r[r.COLLAPSED=1]="COLLAPSED",r[r.INDETERMINATE=2]="INDETERMINATE"}($a||($a={})),$a))();class ta extends Ne{constructor(){super(ta.TEMPLATE)}postConstruct(){this.createExpandIcons(),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eExpand,"keydown",t=>{t.key===ge.SPACE&&(t.preventDefault(),this.onExpandClicked())}),this.addManagedListener(this.eSelect.getInputElement(),"click",this.onSelectClicked.bind(this)),this.addManagedPropertyListener("functionsReadOnly",()=>this.onFunctionsReadOnlyPropChanged()),this.eFilterTextField.setAutoComplete(!1).onValueChange(()=>this.onFilterTextChanged()),this.addManagedListener(this.eFilterTextField.getInputElement(),"keydown",this.onMiniFilterKeyDown.bind(this)),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this));const e=this.localeService.getLocaleTextFunc();this.eSelect.setInputAriaLabel(e("ariaColumnSelectAll","Toggle Select All Columns")),this.eFilterTextField.setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")),this.activateTabIndex([this.eExpand])}onFunctionsReadOnlyPropChanged(){const e=this.gridOptionsService.get("functionsReadOnly");this.eSelect.setReadOnly(e),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",e)}init(e){this.params=e;const t=this.gridOptionsService.get("functionsReadOnly");this.eSelect.setReadOnly(t),this.eSelect.addOrRemoveCssClass("ag-column-select-column-readonly",t),this.columnModel.isReady()&&this.showOrHideOptions()}createExpandIcons(){this.eExpand.appendChild(this.eExpandChecked=z.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=z.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=z.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService)),this.setExpandState($a.EXPANDED)}showOrHideOptions(){const e=!this.params.suppressColumnFilter,t=!this.params.suppressColumnSelectAll,i=!this.params.suppressColumnExpandAll,n=this.columnModel.isPrimaryColumnGroupsPresent(),s=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(s("searchOoo","Search...")),z.setDisplayed(this.eFilterTextField.getGui(),e),z.setDisplayed(this.eSelect.getGui(),t),z.setDisplayed(this.eExpand,i&&n)}onFilterTextChanged(){this.onFilterTextChangedDebounced||(this.onFilterTextChangedDebounced=z.debounce(()=>{const e=this.eFilterTextField.getValue();this.dispatchEvent({type:"filterChanged",filterText:e})},ta.DEBOUNCE_DELAY)),this.onFilterTextChangedDebounced()}onMiniFilterKeyDown(e){e.key===ge.ENTER&&setTimeout(()=>this.onSelectClicked(),ta.DEBOUNCE_DELAY)}onSelectClicked(){this.dispatchEvent({type:this.selectState?"unselectAll":"selectAll"})}onExpandClicked(){this.dispatchEvent({type:this.expandState===$a.EXPANDED?"collapseAll":"expandAll"})}setExpandState(e){this.expandState=e,z.setDisplayed(this.eExpandChecked,this.expandState===$a.EXPANDED),z.setDisplayed(this.eExpandUnchecked,this.expandState===$a.COLLAPSED),z.setDisplayed(this.eExpandIndeterminate,this.expandState===$a.INDETERMINATE)}setSelectionState(e){this.selectState=e,this.eSelect.setValue(this.selectState)}}ta.DEBOUNCE_DELAY=300,ta.TEMPLATE='<div class="ag-column-select-header" role="presentation">\n            <div ref="eExpand" class="ag-column-select-header-icon"></div>\n            <ag-checkbox ref="eSelect" class="ag-column-select-header-checkbox"></ag-checkbox>\n            <ag-input-text-field class="ag-column-select-header-filter-wrapper" ref="eFilterTextField"></ag-input-text-field>\n        </div>',Dg([P("columnModel")],ta.prototype,"columnModel",void 0),Dg([re("eExpand")],ta.prototype,"eExpand",void 0),Dg([re("eSelect")],ta.prototype,"eSelect",void 0),Dg([re("eFilterTextField")],ta.prototype,"eFilterTextField",void 0),Dg([Se],ta.prototype,"postConstruct",null);let Hb=(()=>{class r{constructor(t,i,n,s=!1,o){this.eventService=new go,this.displayName=t,this.dept=n,this.group=s,s?(this.columnGroup=i,this.expanded=o,this.children=[]):this.column=i}isGroup(){return this.group}getDisplayName(){return this.displayName}getColumnGroup(){return this.columnGroup}getColumn(){return this.column}getDept(){return this.dept}isExpanded(){return!!this.expanded}getChildren(){return this.children}isPassesFilter(){return this.passesFilter}setExpanded(t){t!==this.expanded&&(this.expanded=t,this.eventService.dispatchEvent({type:r.EVENT_EXPANDED_CHANGED}))}setPassesFilter(t){this.passesFilter=t}addEventListener(t,i){this.eventService.addEventListener(t,i)}removeEventListener(t,i){this.eventService.removeEventListener(t,i)}}return r.EVENT_EXPANDED_CHANGED="expandedChanged",r})();var W0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Tg extends Ne{constructor(e,t,i){super('<div class="ag-menu"></div>'),this.column=e,this.mouseEvent=t,this.parentEl=i,this.displayName=null}postConstruct(){if(this.initializeProperties(this.column),this.buildMenuItemMap(),this.displayName=this.column instanceof ot?this.columnModel.getDisplayNameForColumn(this.column,"columnToolPanel"):this.columnModel.getDisplayNameForProvidedColumnGroup(null,this.column,"columnToolPanel"),this.isActive()){this.mouseEvent.preventDefault();const e=this.getMappedMenuItems();if(0===e.length)return;this.displayContextMenu(e)}}initializeProperties(e){this.columns=e instanceof Wt?e.getLeafColumns():[e],this.allowGrouping=this.columns.some(t=>t.isPrimary()&&t.isAllowRowGroup()),this.allowValues=this.columns.some(t=>t.isPrimary()&&t.isAllowValue()),this.allowPivoting=this.columnModel.isPivotMode()&&this.columns.some(t=>t.isPrimary()&&t.isAllowPivot())}buildMenuItemMap(){const e=this.localeService.getLocaleTextFunc();this.menuItemMap=new Map,this.menuItemMap.set("rowGroup",{allowedFunction:t=>t.isPrimary()&&t.isAllowRowGroup()&&!this.columnModel.isColumnGroupingLocked(t),activeFunction:t=>t.isRowGroupActive(),activateLabel:()=>`${e("groupBy","Group by")} ${this.displayName}`,deactivateLabel:()=>`${e("ungroupBy","Un-Group by")} ${this.displayName}`,activateFunction:()=>{const t=this.columnModel.getRowGroupColumns();this.columnModel.setRowGroupColumns(this.addColumnsToList(t),"toolPanelUi")},deActivateFunction:()=>{const t=this.columnModel.getRowGroupColumns();this.columnModel.setRowGroupColumns(this.removeColumnsFromList(t),"toolPanelUi")},addIcon:"menuAddRowGroup",removeIcon:"menuRemoveRowGroup"}),this.menuItemMap.set("value",{allowedFunction:t=>t.isPrimary()&&t.isAllowValue(),activeFunction:t=>t.isValueActive(),activateLabel:()=>e("addToValues",`Add ${this.displayName} to values`,[this.displayName]),deactivateLabel:()=>e("removeFromValues",`Remove ${this.displayName} from values`,[this.displayName]),activateFunction:()=>{const t=this.columnModel.getValueColumns();this.columnModel.setValueColumns(this.addColumnsToList(t),"toolPanelUi")},deActivateFunction:()=>{const t=this.columnModel.getValueColumns();this.columnModel.setValueColumns(this.removeColumnsFromList(t),"toolPanelUi")},addIcon:"valuePanel",removeIcon:"valuePanel"}),this.menuItemMap.set("pivot",{allowedFunction:t=>this.columnModel.isPivotMode()&&t.isPrimary()&&t.isAllowPivot(),activeFunction:t=>t.isPivotActive(),activateLabel:()=>e("addToLabels",`Add ${this.displayName} to labels`,[this.displayName]),deactivateLabel:()=>e("removeFromLabels",`Remove ${this.displayName} from labels`,[this.displayName]),activateFunction:()=>{const t=this.columnModel.getPivotColumns();this.columnModel.setPivotColumns(this.addColumnsToList(t),"toolPanelUi")},deActivateFunction:()=>{const t=this.columnModel.getPivotColumns();this.columnModel.setPivotColumns(this.removeColumnsFromList(t),"toolPanelUi")},addIcon:"pivotPanel",removeIcon:"pivotPanel"})}addColumnsToList(e){return[...e].concat(this.columns.filter(t=>-1===e.indexOf(t)))}removeColumnsFromList(e){return e.filter(t=>-1===this.columns.indexOf(t))}displayContextMenu(e){const t=this.getGui(),i=this.createBean(new Yh),n=this.localeService.getLocaleTextFunc();let s=()=>{};t.appendChild(i.getGui()),i.addMenuItems(e),i.addManagedListener(i,wn.EVENT_CLOSE_MENU,()=>{this.parentEl.focus(),s()});const o=this.popupService.addPopup({modal:!0,eChild:t,closeOnEsc:!0,afterGuiAttached:()=>this.focusService.focusInto(i.getGui()),ariaLabel:n("ariaLabelContextMenu","Context Menu"),closedCallback:a=>{a instanceof KeyboardEvent&&this.parentEl.focus(),this.destroyBean(i)}});o&&(s=o.hideFunc),this.popupService.positionPopupUnderMouseEvent({type:"columnContextMenu",mouseEvent:this.mouseEvent,ePopup:t})}isActive(){return this.allowGrouping||this.allowValues||this.allowPivoting}getMappedMenuItems(){const e=[];for(const t of this.menuItemMap.values()){const i=this.columns.some(s=>t.allowedFunction(s)&&!t.activeFunction(s)),n=this.columns.some(s=>t.allowedFunction(s)&&t.activeFunction(s));i&&e.push({name:t.activateLabel(this.displayName),icon:z.createIconNoSpan(t.addIcon,this.gridOptionsService,null),action:()=>t.activateFunction()}),n&&e.push({name:t.deactivateLabel(this.displayName),icon:z.createIconNoSpan(t.removeIcon,this.gridOptionsService,null),action:()=>t.deActivateFunction()})}return e}}W0([P("columnModel")],Tg.prototype,"columnModel",void 0),W0([P("popupService")],Tg.prototype,"popupService",void 0),W0([P("focusService")],Tg.prototype,"focusService",void 0),W0([Se],Tg.prototype,"postConstruct",null);var jc=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Jr extends Ne{constructor(e,t,i,n){super(),this.modelItem=e,this.allowDragging=t,this.eventType=i,this.focusWrapper=n,this.processingColumnStateChange=!1,this.modelItem=e,this.columnGroup=e.getColumnGroup(),this.columnDept=e.getDept(),this.displayName=e.getDisplayName(),this.allowDragging=t}init(){this.setTemplate(Jr.TEMPLATE),this.eDragHandle=z.createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-group-drag-handle");const e=this.cbSelect.getGui(),t=this.cbSelect.getInputElement();e.insertAdjacentElement("afterend",this.eDragHandle),t.setAttribute("tabindex","-1"),this.eLabel.innerHTML=this.displayName?this.displayName:"",this.setupExpandContract(),this.addCssClass("ag-column-select-indent-"+this.columnDept),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.addManagedListener(this.cbSelect,G.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.modelItem,Hb.EVENT_EXPANDED_CHANGED,this.onExpandChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.setOpenClosedIcons(),this.setupDragging(),this.onColumnStateChanged(),this.addVisibilityListenersToAllChildren(),this.refreshAriaExpanded(),this.refreshAriaLabel(),this.setupTooltip(),Nh.getToolPanelClassesFromColDef(this.columnGroup.getColGroupDef(),this.gridOptionsService,null,this.columnGroup).forEach(n=>this.addOrRemoveCssClass(n,!0))}getColumns(){return this.columnGroup.getLeafColumns()}setupTooltip(){const e=this.columnGroup.getColGroupDef();if(!e)return;const t=()=>{this.setTooltip(e.headerTooltip)};t(),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,t)}getTooltipParams(){const e=super.getTooltipParams();return e.location="columnToolPanelColumnGroup",e}handleKeyDown(e){switch(e.key){case ge.LEFT:e.preventDefault(),this.modelItem.setExpanded(!1);break;case ge.RIGHT:e.preventDefault(),this.modelItem.setExpanded(!0);break;case ge.SPACE:e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected())}}onContextMenu(e){const{columnGroup:t,gridOptionsService:i}=this;if(i.get("functionsReadOnly"))return;const n=this.createBean(new Tg(t,e,this.focusWrapper));this.addDestroyFunc(()=>{n.isAlive()&&this.destroyBean(n)})}addVisibilityListenersToAllChildren(){this.columnGroup.getLeafColumns().forEach(e=>{this.addManagedListener(e,ot.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(e,ot.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(e,ot.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(e,ot.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this))})}setupDragging(){if(!this.allowDragging)return void z.setDisplayed(this.eDragHandle,!1);let e=!this.gridOptionsService.get("suppressDragLeaveHidesColumns");const t={type:sn.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>e?St.ICON_HIDE:St.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(),onDragStarted:()=>{e=!this.gridOptionsService.get("suppressDragLeaveHidesColumns"),this.eventService.dispatchEvent({type:G.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:this.columnGroup})},onDragStopped:()=>{this.eventService.dispatchEvent({type:G.EVENT_COLUMN_PANEL_ITEM_DRAG_END})},onGridEnter:i=>{e&&this.modelItemUtils.updateColumns({columns:this.columnGroup.getLeafColumns(),visibleState:i?.visibleState,pivotState:i?.pivotState,eventType:this.eventType})},onGridExit:()=>{e&&this.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(t))}createDragItem(){const e=this.columnGroup.getLeafColumns(),t={},i={};return e.forEach(n=>{const s=n.getId();t[s]=n.isVisible(),i[s]=this.modelItemUtils.createPivotState(n)}),{columns:e,visibleState:t,pivotState:i}}setupExpandContract(){this.eGroupClosedIcon.appendChild(z.createIcon("columnSelectClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(z.createIcon("columnSelectOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this));const e=new Ln(this.eColumnGroupIcons,!0);this.addManagedListener(e,Ln.EVENT_TAP,this.onExpandOrContractClicked.bind(this)),this.addDestroyFunc(e.destroy.bind(e))}onLabelClicked(){const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}getVisibleLeafColumns(){const e=[],t=i=>{i.forEach(n=>{!n.isPassesFilter()||(n.isGroup()?t(n.getChildren()):e.push(n.getColumn()))})};return t(this.modelItem.getChildren()),e}onChangeCommon(e){this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.selectAllChildren(this.modelItem.getChildren(),e,this.eventType)}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),t=e("ariaColumnGroup","Column Group"),i=this.cbSelect.getValue(),n=void 0===i?e("ariaIndeterminate","indeterminate"):i?e("ariaVisible","visible"):e("ariaHidden","hidden"),s=e("ariaToggleVisibility","Press SPACE to toggle visibility");z.setAriaLabel(this.focusWrapper,`${this.displayName} ${t}`),this.cbSelect.setInputAriaLabel(`${s} (${n})`),z.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)}onColumnStateChanged(){const e=this.workOutSelectedValue(),t=this.workOutReadOnlyValue();this.processingColumnStateChange=!0,this.cbSelect.setValue(e),this.cbSelect.setReadOnly(t),this.addOrRemoveCssClass("ag-column-select-column-group-readonly",t),this.processingColumnStateChange=!1}workOutSelectedValue(){const e=this.columnModel.isPivotMode(),t=this.getVisibleLeafColumns();let i=0,n=0;if(t.forEach(s=>{!e&&s.getColDef().lockVisible||(this.isColumnChecked(s,e)?i++:n++)}),!(i>0&&n>0))return i>0}workOutReadOnlyValue(){const e=this.columnModel.isPivotMode();let t=0;return this.columnGroup.getLeafColumns().forEach(i=>{e?i.isAnyFunctionAllowed()&&t++:i.getColDef().lockVisible||t++}),0===t}isColumnChecked(e,t){if(t){const i=e.isPivotActive(),n=e.isRowGroupActive(),s=e.isValueActive();return i||n||s}return e.isVisible()}onExpandOrContractClicked(){const e=this.modelItem.isExpanded();this.modelItem.setExpanded(!e)}onExpandChanged(){this.setOpenClosedIcons(),this.refreshAriaExpanded()}setOpenClosedIcons(){const e=this.modelItem.isExpanded();z.setDisplayed(this.eGroupClosedIcon,!e),z.setDisplayed(this.eGroupOpenedIcon,e)}refreshAriaExpanded(){z.setAriaExpanded(this.focusWrapper,this.modelItem.isExpanded())}getDisplayName(){return this.displayName}onSelectAllChanged(e){const t=this.cbSelect.getValue();!this.cbSelect.isReadOnly()&&(e&&!t||!e&&t)&&this.cbSelect.toggle()}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}setSelected(e){this.cbSelect.setValue(e,!0)}}Jr.TEMPLATE='<div class="ag-column-select-column-group" aria-hidden="true">\n            <span class="ag-column-group-icons" ref="eColumnGroupIcons" >\n                <span class="ag-column-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-column-group-opened-icon" ref="eGroupOpenedIcon"></span>\n            </span>\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',jc([P("columnModel")],Jr.prototype,"columnModel",void 0),jc([P("dragAndDropService")],Jr.prototype,"dragAndDropService",void 0),jc([P("modelItemUtils")],Jr.prototype,"modelItemUtils",void 0),jc([re("cbSelect")],Jr.prototype,"cbSelect",void 0),jc([re("eLabel")],Jr.prototype,"eLabel",void 0),jc([re("eGroupOpenedIcon")],Jr.prototype,"eGroupOpenedIcon",void 0),jc([re("eGroupClosedIcon")],Jr.prototype,"eGroupClosedIcon",void 0),jc([re("eColumnGroupIcons")],Jr.prototype,"eColumnGroupIcons",void 0),jc([Se],Jr.prototype,"init",null);var Ub=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class gC extends Ee{constructor(e,t){super(),this.comp=e,this.virtualList=t}postConstruct(){this.createManagedBean(new $S(this.comp,this.virtualList,{dragSourceType:sn.ToolPanel,listItemDragStartEvent:G.EVENT_COLUMN_PANEL_ITEM_DRAG_START,listItemDragEndEvent:G.EVENT_COLUMN_PANEL_ITEM_DRAG_END,eventSource:this.eventService,getCurrentDragValue:e=>this.getCurrentDragValue(e),isMoveBlocked:e=>this.isMoveBlocked(e),getNumRows:e=>e.getDisplayedColsList().length,moveItem:(e,t)=>this.moveItem(e,t)}))}getCurrentDragValue(e){return e.column}isMoveBlocked(e){return!!this.gridOptionsService.get("suppressMovableColumns")||!!this.getCurrentColumns(e).find(s=>{const o=s.getColDef();return!!o.suppressMovable||!!o.lockPosition})}moveItem(e,t){const i=this.getTargetIndex(e,t),n=this.getCurrentColumns(e);null!=i&&this.columnModel.moveColumns(n,i,"toolPanelUi")}getMoveDiff(e,t){const i=this.columnModel.getAllGridColumns(),n=this.getCurrentColumns(e),o=n.length;return i.indexOf(n[0])<t?o:0}getCurrentColumns(e){return e instanceof Wt?e.getLeafColumns():[e]}getTargetIndex(e,t){if(!t)return null;const i=t.component;let s,n="top"===t.position;if(i instanceof Jr?(s=i.getColumns()[0],n=!0):s=i.getColumn(),-1!==this.getCurrentColumns(e).indexOf(s))return null;const a=this.columnModel.getAllGridColumns().indexOf(s),c=n?a:a+1;return c-this.getMoveDiff(e,c)}}Ub([P("columnModel")],gC.prototype,"columnModel",void 0),Ub([P("gridOptionsService")],gC.prototype,"gridOptionsService",void 0),Ub([Se],gC.prototype,"postConstruct",null);var rp=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Vl extends Ne{constructor(e,t,i,n){super(),this.allowDragging=t,this.groupsExist=i,this.focusWrapper=n,this.processingColumnStateChange=!1,this.column=e.getColumn(),this.columnDept=e.getDept(),this.displayName=e.getDisplayName()}init(){this.setTemplate(Vl.TEMPLATE),this.eDragHandle=z.createIconNoSpan("columnDrag",this.gridOptionsService),this.eDragHandle.classList.add("ag-drag-handle","ag-column-select-column-drag-handle");const e=this.cbSelect.getGui(),t=this.cbSelect.getInputElement();e.insertAdjacentElement("afterend",this.eDragHandle),t.setAttribute("tabindex","-1");const i=z.escapeString(this.displayName);this.eLabel.innerHTML=i;const n=this.columnDept;this.groupsExist&&this.addCssClass("ag-column-select-add-group-indent"),this.addCssClass(`ag-column-select-indent-${n}`),this.setupDragging(),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,ot.EVENT_VALUE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,ot.EVENT_PIVOT_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,ot.EVENT_ROW_GROUP_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.column,ot.EVENT_VISIBLE_CHANGED,this.onColumnStateChanged.bind(this)),this.addManagedListener(this.focusWrapper,"keydown",this.handleKeyDown.bind(this)),this.addManagedListener(this.focusWrapper,"contextmenu",this.onContextMenu.bind(this)),this.addManagedPropertyListener("functionsReadOnly",this.onColumnStateChanged.bind(this)),this.addManagedListener(this.cbSelect,G.EVENT_FIELD_VALUE_CHANGED,this.onCheckboxChanged.bind(this)),this.addManagedListener(this.eLabel,"click",this.onLabelClicked.bind(this)),this.onColumnStateChanged(),this.refreshAriaLabel(),this.setupTooltip(),Nh.getToolPanelClassesFromColDef(this.column.getColDef(),this.gridOptionsService,this.column,null).forEach(o=>this.addOrRemoveCssClass(o,!0))}getColumn(){return this.column}setupTooltip(){const e=()=>{const t=this.column.getColDef().headerTooltip;this.setTooltip(t)};e(),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,e)}getTooltipParams(){const e=super.getTooltipParams();return e.location="columnToolPanelColumn",e.colDef=this.column.getColDef(),e}onContextMenu(e){const{column:t,gridOptionsService:i}=this;if(i.get("functionsReadOnly"))return;const n=this.createBean(new Tg(t,e,this.focusWrapper));this.addDestroyFunc(()=>{n.isAlive()&&this.destroyBean(n)})}handleKeyDown(e){e.key===ge.SPACE&&(e.preventDefault(),this.isSelectable()&&this.onSelectAllChanged(!this.isSelected()))}onLabelClicked(){if(this.gridOptionsService.get("functionsReadOnly"))return;const e=!this.cbSelect.getValue();this.onChangeCommon(e)}onCheckboxChanged(e){this.onChangeCommon(e.selected)}onChangeCommon(e){this.cbSelect.isReadOnly()||(this.refreshAriaLabel(),!this.processingColumnStateChange&&this.modelItemUtils.setColumn(this.column,e,"toolPanelUi"))}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),t=e("ariaColumn","Column"),i=this.cbSelect.getValue()?e("ariaVisible","visible"):e("ariaHidden","hidden"),n=e("ariaToggleVisibility","Press SPACE to toggle visibility");z.setAriaLabel(this.focusWrapper,`${this.displayName} ${t}`),this.cbSelect.setInputAriaLabel(`${n} (${i})`),z.setAriaDescribedBy(this.focusWrapper,this.cbSelect.getInputElement().id)}setupDragging(){if(!this.allowDragging)return void z.setDisplayed(this.eDragHandle,!1);let e=!this.gridOptionsService.get("suppressDragLeaveHidesColumns");const t={type:sn.ToolPanel,eElement:this.eDragHandle,dragItemName:this.displayName,getDefaultIconName:()=>e?St.ICON_HIDE:St.ICON_NOT_ALLOWED,getDragItem:()=>this.createDragItem(),onDragStarted:()=>{e=!this.gridOptionsService.get("suppressDragLeaveHidesColumns"),this.eventService.dispatchEvent({type:G.EVENT_COLUMN_PANEL_ITEM_DRAG_START,column:this.column})},onDragStopped:()=>{this.eventService.dispatchEvent({type:G.EVENT_COLUMN_PANEL_ITEM_DRAG_END})},onGridEnter:i=>{e&&this.modelItemUtils.updateColumns({columns:[this.column],visibleState:i?.visibleState,pivotState:i?.pivotState,eventType:"toolPanelUi"})},onGridExit:()=>{e&&this.onChangeCommon(!1)}};this.dragAndDropService.addDragSource(t,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(t))}createDragItem(){const e=this.column.getColId(),t={[e]:this.column.isVisible()},i={[e]:this.modelItemUtils.createPivotState(this.column)};return{columns:[this.column],visibleState:t,pivotState:i}}onColumnStateChanged(){this.processingColumnStateChange=!0;const e=this.columnModel.isPivotMode();if(e){const s=this.column.isAnyFunctionActive();this.cbSelect.setValue(s)}else this.cbSelect.setValue(this.column.isVisible());let t=!0,i=!0;if(e){const s=this.gridOptionsService.get("functionsReadOnly"),o=!this.column.isAnyFunctionAllowed();t=!s&&!o,i=t}else{const{enableRowGroup:s,enableValue:o,lockPosition:a,suppressMovable:c,lockVisible:u}=this.column.getColDef(),g=!!a||!!c;t=!u,i=!!s||!!o||!g}this.cbSelect.setReadOnly(!t),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",!i),this.addOrRemoveCssClass("ag-column-select-column-readonly",!i&&!t);const n=e&&this.gridOptionsService.get("functionsPassive");this.cbSelect.setPassive(n),this.processingColumnStateChange=!1}getDisplayName(){return this.displayName}onSelectAllChanged(e){e!==this.cbSelect.getValue()&&(this.cbSelect.isReadOnly()||this.cbSelect.toggle())}isSelected(){return this.cbSelect.getValue()}isSelectable(){return!this.cbSelect.isReadOnly()}isExpandable(){return!1}setExpanded(e){console.warn("AG Grid: can not expand a column item that does not represent a column group header")}}Vl.TEMPLATE='<div class="ag-column-select-column" aria-hidden="true">\n            <ag-checkbox ref="cbSelect" class="ag-column-select-checkbox"></ag-checkbox>\n            <span class="ag-column-select-column-label" ref="eLabel"></span>\n        </div>',rp([P("columnModel")],Vl.prototype,"columnModel",void 0),rp([P("dragAndDropService")],Vl.prototype,"dragAndDropService",void 0),rp([P("modelItemUtils")],Vl.prototype,"modelItemUtils",void 0),rp([re("eLabel")],Vl.prototype,"eLabel",void 0),rp([re("cbSelect")],Vl.prototype,"cbSelect",void 0),rp([Se],Vl.prototype,"init",null);var Wb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class uI{constructor(e){this.items=e}getRowCount(){return this.items.length}getRow(e){return this.items[e]}}class hu extends Ne{constructor(){super(hu.TEMPLATE),this.destroyColumnItemFuncs=[],this.hasLoadedInitialState=!1,this.isInitialState=!1}destroyColumnTree(){this.allColsTree=[],this.destroyColumnItemFuncs.forEach(e=>e()),this.destroyColumnItemFuncs=[]}init(e,t,i){this.params=e,this.allowDragging=t,this.eventType=i,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,G.EVENT_COLUMN_MOVED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,this.onColumnsChanged.bind(this)),[G.EVENT_COLUMN_PIVOT_CHANGED,G.EVENT_COLUMN_PIVOT_MODE_CHANGED,G.EVENT_COLUMN_ROW_GROUP_CHANGED,G.EVENT_COLUMN_VALUE_CHANGED,G.EVENT_COLUMN_VISIBLE,G.EVENT_NEW_COLUMNS_LOADED].forEach(o=>{this.addManagedListener(this.eventService,o,this.fireSelectionChangedEvent.bind(this))}),this.expandGroupsByDefault=!this.params.contractColumnSelection,this.virtualList=this.createManagedBean(new qo({cssIdentifier:"column-select",ariaRole:"tree"})),this.appendChild(this.virtualList.getGui());const s=this.virtualList.getAriaElement();z.setAriaLive(s,"assertive"),z.setAriaAtomic(s,!1),z.setAriaRelevant(s,"text"),this.virtualList.setComponentCreator((o,a)=>(z.setAriaLevel(a,o.getDept()+1),this.createComponentFromItem(o,a))),this.columnModel.isReady()&&this.onColumnsChanged(),!this.params.suppressColumnMove&&(this.colsListPanelItemDragFeature=this.createManagedBean(new gC(this,this.virtualList)))}createComponentFromItem(e,t){if(e.isGroup()){const n=new Jr(e,this.allowDragging,this.eventType,t);return this.getContext().createBean(n),n}const i=new Vl(e,this.allowDragging,this.groupsExist,t);return this.getContext().createBean(i),i}onColumnsChanged(){this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);const e=this.getExpandedStates(),t=this.columnModel.isPivotMode();this.params.suppressSyncLayoutWithGrid||t?this.buildTreeFromProvidedColumnDefs():this.buildTreeFromWhatGridIsDisplaying(),this.setExpandedStates(e),this.markFilteredColumns(),this.flattenAndFilterModel(),this.isInitialState=!1}getDisplayedColsList(){return this.displayedColsList}getExpandedStates(){const e={};if(this.isInitialState){const{expandedGroupIds:t}=this.params.initialState;return t.forEach(i=>{e[i]=!0}),e}return this.allColsTree?(this.forEachItem(t=>{if(!t.isGroup())return;const i=t.getColumnGroup();i&&(e[i.getId()]=t.isExpanded())}),e):{}}setExpandedStates(e){if(!this.allColsTree)return;const{isInitialState:t}=this;this.forEachItem(i=>{if(!i.isGroup())return;const n=i.getColumnGroup();if(n){const s=e[n.getId()];(null!=s||t)&&i.setExpanded(!!s)}})}buildTreeFromWhatGridIsDisplaying(){this.colDefService.syncLayoutWithGrid(this.setColumnLayout.bind(this))}setColumnLayout(e){const t=this.colDefService.createColumnTree(e);this.buildListModel(t),this.groupsExist=e.some(i=>i&&typeof i.children<"u"),this.markFilteredColumns(),this.flattenAndFilterModel()}buildTreeFromProvidedColumnDefs(){this.buildListModel(this.columnModel.getPrimaryColumnTree()),this.groupsExist=this.columnModel.isPrimaryColumnGroupsPresent()}buildListModel(e){const t=this.onColumnExpanded.bind(this),i=a=>{a.addEventListener(Hb.EVENT_EXPANDED_CHANGED,t);const c=a.removeEventListener.bind(a,Hb.EVENT_EXPANDED_CHANGED,t);this.destroyColumnItemFuncs.push(c)},n=(a,c,u)=>{a.forEach(p=>{p instanceof Wt?s(p,c,u):o(p,c,u)})},s=(a,c,u)=>{const p=a.getColGroupDef();if(p&&p.suppressColumnsToolPanel)return;if(a.isPadding())return void n(a.getChildren(),c,u);const m=this.columnModel.getDisplayNameForProvidedColumnGroup(null,a,"columnToolPanel"),y=new Hb(m,a,c,!0,this.expandGroupsByDefault);u.push(y),i(y),n(a.getChildren(),c+1,y.getChildren())},o=(a,c,u)=>{if(a.getColDef()&&a.getColDef().suppressColumnsToolPanel)return;const g=this.columnModel.getDisplayNameForColumn(a,"columnToolPanel");u.push(new Hb(g,a,c))};this.destroyColumnTree(),n(e,0,this.allColsTree)}onColumnExpanded(){this.flattenAndFilterModel()}flattenAndFilterModel(){this.displayedColsList=[];const e=i=>{!i.isPassesFilter()||(this.displayedColsList.push(i),i.isGroup()&&i.isExpanded()&&i.getChildren().forEach(e))};this.allColsTree.forEach(e),this.virtualList.setModel(new uI(this.displayedColsList));const t=this.virtualList.getLastFocusedRow();this.virtualList.refresh(),null!=t&&this.focusRowIfAlive(t),this.notifyListeners(),this.refreshAriaLabel()}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),t=e("ariaColumnPanelList","Column List"),i=e("columns","Columns"),n=this.displayedColsList.length;z.setAriaLabel(this.virtualList.getAriaElement(),`${t} ${n} ${i}`)}focusRowIfAlive(e){window.setTimeout(()=>{this.isAlive()&&this.virtualList.focusRow(e)},0)}forEachItem(e){const t=i=>{i.forEach(n=>{e(n),n.isGroup()&&t(n.getChildren())})};!this.allColsTree||t(this.allColsTree)}doSetExpandedAll(e){this.forEachItem(t=>{t.isGroup()&&t.setExpanded(e)})}setGroupsExpanded(e,t){if(!t)return void this.doSetExpandedAll(e);const i=[];this.forEachItem(s=>{if(!s.isGroup())return;const o=s.getColumnGroup().getId();t.indexOf(o)>=0&&(s.setExpanded(e),i.push(o))});const n=t.filter(s=>!z.includes(i,s));n.length>0&&console.warn("AG Grid: unable to find group(s) for supplied groupIds:",n)}getExpandState(){let e=0,t=0;return this.forEachItem(i=>{!i.isGroup()||(i.isExpanded()?e++:t++)}),e>0&&t>0?$a.INDETERMINATE:t>0?$a.COLLAPSED:$a.EXPANDED}doSetSelectedAll(e){this.modelItemUtils.selectAllChildren(this.allColsTree,e,this.eventType)}getSelectionState(){let e=0,t=0;const i=this.columnModel.isPivotMode();if(this.forEachItem(n=>{if(n.isGroup()||!n.isPassesFilter())return;const s=n.getColumn(),o=s.getColDef();let a;if(i){if(!s.isAllowPivot()&&!s.isAllowRowGroup()&&!s.isAllowValue())return;a=s.isValueActive()||s.isPivotActive()||s.isRowGroupActive()}else{if(o.lockVisible)return;a=s.isVisible()}a?e++:t++}),!(e>0&&t>0))return!(0===e||t>0)}setFilterText(e){this.filterText=z.exists(e)?e.toLowerCase():null,this.markFilteredColumns(),this.flattenAndFilterModel()}markFilteredColumns(){const e=i=>{if(!z.exists(this.filterText))return!0;const n=i.getDisplayName();return null==n||-1!==n.toLowerCase().indexOf(this.filterText)},t=(i,n)=>{let s=!1;if(i.isGroup()){const a=e(i);i.getChildren().forEach(c=>{const u=t(c,a||n);u&&(s=u)})}const o=!(!n&&!s)||e(i);return i.setPassesFilter(o),o};this.allColsTree.forEach(i=>t(i,!1))}notifyListeners(){this.fireGroupExpandedEvent(),this.fireSelectionChangedEvent()}fireGroupExpandedEvent(){const e=this.getExpandState();this.dispatchEvent({type:"groupExpanded",state:e})}fireSelectionChangedEvent(){if(!this.allColsTree)return;const e=this.getSelectionState();this.dispatchEvent({type:"selectionChanged",state:e})}getExpandedGroups(){const e=[];return this.allColsTree&&this.forEachItem(t=>{t.isGroup()&&t.isExpanded()&&e.push(t.getColumnGroup().getId())}),e}}hu.TEMPLATE='<div class="ag-column-select-list" role="presentation"></div>',Wb([P("columnModel")],hu.prototype,"columnModel",void 0),Wb([P("toolPanelColDefService")],hu.prototype,"colDefService",void 0),Wb([P("modelItemUtils")],hu.prototype,"modelItemUtils",void 0),Wb([Js],hu.prototype,"destroyColumnTree",null);var jb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Bl extends Ne{createTemplate(){return'<div class="ag-pivot-mode-panel">\n                <ag-toggle-button ref="cbPivotMode" class="ag-pivot-mode-select"></ag-toggle-button>\n            </div>'}init(){this.setTemplate(this.createTemplate()),this.cbPivotMode.setValue(this.columnModel.isPivotMode());const e=this.localeService.getLocaleTextFunc();this.cbPivotMode.setLabel(e("pivotMode","Pivot Mode")),this.addManagedListener(this.cbPivotMode,G.EVENT_FIELD_VALUE_CHANGED,this.onBtPivotMode.bind(this)),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,this.onPivotModeChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.onPivotModeChanged.bind(this))}onBtPivotMode(){const e=!!this.cbPivotMode.getValue();if(e!==this.columnModel.isPivotMode()){this.gridOptionsService.updateGridOptions({options:{pivotMode:e},source:"toolPanelUi"});const{api:t}=this;t&&t.refreshHeader()}}onPivotModeChanged(){const e=this.columnModel.isPivotMode();this.cbPivotMode.setValue(e)}}jb([P("columnModel")],Bl.prototype,"columnModel",void 0),jb([P("gridApi")],Bl.prototype,"api",void 0),jb([re("cbPivotMode")],Bl.prototype,"cbPivotMode",void 0),jb([vf],Bl.prototype,"init",null);var mC=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let op=class extends Ee{execute(e){const t=z.missingOrEmpty(this.columnModel.getValueColumns()),i=!this.gridOptionsService.getCallback("getGroupRowAgg"),n=e.changedPath&&e.changedPath.isActive();if(t&&i&&n)return;const s=this.createAggDetails(e);this.recursivelyCreateAggData(s)}createAggDetails(e){const t=this.columnModel.isPivotActive(),i=this.columnModel.getValueColumns(),n=t?this.columnModel.getPivotColumns():[];return{alwaysAggregateAtRootLevel:this.gridOptionsService.get("alwaysAggregateAtRootLevel"),groupIncludeTotalFooter:this.gridOptionsService.get("groupIncludeTotalFooter"),changedPath:e.changedPath,valueColumns:i,pivotColumns:n,filteredOnly:!this.isSuppressAggFilteredOnly(),userAggFunc:this.gridOptionsService.getCallback("getGroupRowAgg")}}isSuppressAggFilteredOnly(){return void 0!==this.gridOptionsService.getGroupAggFiltering()||this.gridOptionsService.get("suppressAggFilteredOnly")}recursivelyCreateAggData(e){e.changedPath.forEachChangedNodeDepthFirst(i=>{if(i.hasChildren()){if(-1===i.level&&!e.groupIncludeTotalFooter){const o=!this.columnModel.isPivotMode();if(!e.alwaysAggregateAtRootLevel&&o)return void i.setAggData(null)}this.aggregateRowNode(i,e)}else i.aggData&&i.setAggData(null)},!0)}aggregateRowNode(e,t){const i=0===t.valueColumns.length,n=0===t.pivotColumns.length;let s;s=t.userAggFunc?t.userAggFunc({nodes:e.childrenAfterFilter}):i?null:n?this.aggregateRowNodeUsingValuesOnly(e,t):this.aggregateRowNodeUsingValuesAndPivot(e),e.setAggData(s),e.sibling&&e.sibling.setAggData(s)}aggregateRowNodeUsingValuesAndPivot(e){var t,i;const n={},s=null!==(t=this.columnModel.getSecondaryColumns())&&void 0!==t?t:[];let o=!0;for(let a=0;a<s.length;a++){const c=s[a],u=c.getColDef();if(null!=u.pivotTotalColumnIds){o=!1;continue}const p=null!==(i=u.pivotKeys)&&void 0!==i?i:[];let g;g=e.leafGroup?this.getValuesFromMappedSet(e.childrenMapped,p,u.pivotValueColumn):this.getValuesPivotNonLeaf(e,u.colId),n[u.colId]=this.aggregateValues(g,u.pivotValueColumn.getAggFunc(),u.pivotValueColumn,e,c)}if(!o)for(let a=0;a<s.length;a++){const c=s[a],u=c.getColDef();if(null==u.pivotTotalColumnIds||!u.pivotTotalColumnIds.length)continue;const p=u.pivotTotalColumnIds.map(g=>n[g]);n[u.colId]=this.aggregateValues(p,u.pivotValueColumn.getAggFunc(),u.pivotValueColumn,e,c)}return n}aggregateRowNodeUsingValuesOnly(e,t){const i={},n=t.changedPath.isActive()?t.changedPath.getValueColumnsForNode(e,t.valueColumns):t.valueColumns,s=t.changedPath.isActive()?t.changedPath.getNotValueColumnsForNode(e,t.valueColumns):null,o=this.getValuesNormal(e,n,t.filteredOnly),a=e.aggData;return n.forEach((c,u)=>{i[c.getId()]=this.aggregateValues(o[u],c.getAggFunc(),c,e)}),s&&a&&s.forEach(c=>{i[c.getId()]=a[c.getId()]}),i}getValuesPivotNonLeaf(e,t){return e.childrenAfterFilter.map(i=>i.aggData[t])}getValuesFromMappedSet(e,t,i){let n=e;for(let s=0;s<t.length;s++){const o=t[s];n=n?n[o]:null}return n?n.map(s=>this.valueService.getValue(i,s)):[]}getValuesNormal(e,t,i){const n=[];t.forEach(()=>n.push([]));const s=t.length,o=i?e.childrenAfterFilter:e.childrenAfterGroup,a=o.length;for(let c=0;c<a;c++){const u=o[c];for(let p=0;p<s;p++){const m=this.valueService.getValue(t[p],u);n[p].push(m)}}return n}aggregateValues(e,t,i,n,s){const o="string"==typeof t?this.aggFuncService.getAggFunc(t):t;return"function"!=typeof o?(console.error(`AG Grid: unrecognised aggregation function ${t}`),null):o(this.gridOptionsService.addGridCommonParams({values:e,column:i,colDef:i?i.getColDef():void 0,pivotResultColumn:s,rowNode:n,data:n?n.data:void 0}))}};mC([P("columnModel")],op.prototype,"columnModel",void 0),mC([P("valueService")],op.prototype,"valueService",void 0),mC([P("aggFuncService")],op.prototype,"aggFuncService",void 0),op=mC([He("aggregationStage")],op);class zb{constructor(){this.allSets={},this.allParents=[]}removeFromChildrenAfterGroup(e,t){this.getSet(e).removeFromChildrenAfterGroup[t.id]=!0}isRemoveFromAllLeafChildren(e,t){return!!this.getSet(e).removeFromAllLeafChildren[t.id]}preventRemoveFromAllLeafChildren(e,t){delete this.getSet(e).removeFromAllLeafChildren[t.id]}removeFromAllLeafChildren(e,t){this.getSet(e).removeFromAllLeafChildren[t.id]=!0}getSet(e){return this.allSets[e.id]||(this.allSets[e.id]={removeFromAllLeafChildren:{},removeFromChildrenAfterGroup:{}},this.allParents.push(e)),this.allSets[e.id]}getAllParents(){return this.allParents}flush(){this.allParents.forEach(e=>{const t=this.allSets[e.id];e.childrenAfterGroup=e.childrenAfterGroup.filter(i=>!t.removeFromChildrenAfterGroup[i.id]),e.allLeafChildren=e.allLeafChildren.filter(i=>!t.removeFromAllLeafChildren[i.id]),e.updateHasChildren(),e.sibling&&(e.sibling.childrenAfterGroup=e.childrenAfterGroup,e.sibling.allLeafChildren=e.allLeafChildren)}),this.allSets={},this.allParents.length=0}}var ap=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let zc=class extends Ee{execute(e){const t=this.createGroupingDetails(e);t.transactions?this.handleTransaction(t):this.shotgunResetEverything(t,!0===e.afterColumnsChanged),t.usingTreeData||(this.positionLeafsAndGroups(e.changedPath),this.orderGroups(t)),this.selectableService.updateSelectableAfterGrouping()}positionLeafsAndGroups(e){e.forEachChangedNodeDepthFirst(t=>{if(t.childrenAfterGroup){const i=[],n=[];let s;t.childrenAfterGroup.forEach(o=>{var a;null!==(a=o.childrenAfterGroup)&&void 0!==a&&a.length?""!==o.key||s?n.push(o):s=o:i.push(o)}),s&&n.push(s),t.childrenAfterGroup=[...i,...n]}},!1)}createGroupingDetails(e){var t;const{rowNode:i,changedPath:n,rowNodeTransactions:s,rowNodeOrder:o}=e,a=this.gridOptionsService.get("treeData"),c=a?null:this.columnModel.getRowGroupColumns();return{includeParents:!this.gridOptionsService.get("suppressParentsInRowNodes"),expandByDefault:this.gridOptionsService.get("groupDefaultExpanded"),groupedCols:c,rootNode:i,pivotMode:this.columnModel.isPivotMode(),groupedColCount:a||!c?0:c.length,rowNodeOrder:o,transactions:s,changedPath:n,groupAllowUnbalanced:this.gridOptionsService.get("groupAllowUnbalanced"),isGroupOpenByDefault:this.gridOptionsService.getCallback("isGroupOpenByDefault"),initialGroupOrderComparator:this.gridOptionsService.getCallback("initialGroupOrderComparator"),usingTreeData:a,suppressGroupMaintainValueType:this.gridOptionsService.get("suppressGroupMaintainValueType"),getDataPath:a?this.gridOptionsService.get("getDataPath"):void 0,keyCreators:null!==(t=c?.map(p=>p.getColDef().keyCreator))&&void 0!==t?t:[]}}handleTransaction(e){e.transactions.forEach(t=>{const i=e.usingTreeData?void 0:new zb;if(z.existsAndNotEmpty(t.remove)&&this.removeNodes(t.remove,e,i),z.existsAndNotEmpty(t.update)&&this.moveNodesInWrongPath(t.update,e,i),z.existsAndNotEmpty(t.add)&&this.insertNodes(t.add,e,!1),i){const n=i.getAllParents().slice();i.flush(),this.removeEmptyGroups(n,e)}}),e.rowNodeOrder&&this.sortChildren(e)}sortChildren(e){e.changedPath.forEachChangedNodeDepthFirst(t=>{t.childrenAfterGroup&&z.sortRowNodesByOrder(t.childrenAfterGroup,e.rowNodeOrder)&&e.changedPath.addParentNode(t)},!1,!0)}orderGroups(e){const t=e.initialGroupOrderComparator;z.exists(t)&&function i(n){z.exists(n.childrenAfterGroup)&&!n.leafGroup&&(n.childrenAfterGroup.sort((o,a)=>t({nodeA:o,nodeB:a})),n.childrenAfterGroup.forEach(o=>i(o)))}(e.rootNode)}getExistingPathForNode(e,t){const i=[];let n=t.usingTreeData?e:e.parent;for(;n&&n!==t.rootNode;)i.push({key:n.key,rowGroupColumn:n.rowGroupColumn,field:n.field}),n=n.parent;return i.reverse(),i}moveNodesInWrongPath(e,t,i){e.forEach(n=>{t.changedPath.isActive()&&t.changedPath.addParentNode(n.parent);const s=u=>u.key,o=this.getExistingPathForNode(n,t).map(s),a=this.getGroupInfo(n,t).map(s);z.areEqual(o,a)||this.moveNode(n,t,i)})}moveNode(e,t,i){this.removeNodesInStages([e],t,i),this.insertOneNode(e,t,!0,i),e.setData(e.data),t.changedPath.isActive()&&t.changedPath.addParentNode(e.parent)}removeNodes(e,t,i){this.removeNodesInStages(e,t,i),t.changedPath.isActive()&&e.forEach(n=>t.changedPath.addParentNode(n.parent))}removeNodesInStages(e,t,i){if(this.removeNodesFromParents(e,t,i),t.usingTreeData){this.postRemoveCreateFillerNodes(e,t);const n=e.map(s=>s.parent);this.removeEmptyGroups(n,t)}}forEachParentGroup(e,t,i){let n=t;for(;n&&n!==e.rootNode;)i(n),n=n.parent}removeNodesFromParents(e,t,i){const n=null==i,s=i||new zb;e.forEach(o=>{this.removeFromParent(o,s),this.forEachParentGroup(t,o.parent,a=>{s.removeFromAllLeafChildren(a,o)})}),n&&s.flush()}postRemoveCreateFillerNodes(e,t){e.forEach(i=>{if(i.hasChildren()){const s=this.getExistingPathForNode(i,t),o=this.findParentForNode(i,s,t);o.expanded=i.expanded,o.allLeafChildren=i.allLeafChildren,o.childrenAfterGroup=i.childrenAfterGroup,o.childrenMapped=i.childrenMapped,o.updateHasChildren(),o.childrenAfterGroup.forEach(a=>a.parent=o)}})}removeEmptyGroups(e,t){let i=!0;const n=s=>{const o=this.getChildrenMappedKey(s.key,s.rowGroupColumn),a=s.parent;return!!(a&&a.childrenMapped&&a.childrenMapped[o])&&!!s.isEmptyRowGroupNode()};for(;i;){i=!1;const s=new zb;e.forEach(o=>{this.forEachParentGroup(t,o,a=>{n(a)&&(i=!0,this.removeFromParent(a,s),a.setSelectedParams({newValue:!1,source:"rowGroupChanged"}))})}),s.flush()}}removeFromParent(e,t){e.parent&&(t?t.removeFromChildrenAfterGroup(e.parent,e):(z.removeFromArray(e.parent.childrenAfterGroup,e),e.parent.updateHasChildren()));const i=this.getChildrenMappedKey(e.key,e.rowGroupColumn);e.parent&&e.parent.childrenMapped&&(e.parent.childrenMapped[i]=void 0),e.setRowTop(null),e.setRowIndex(null)}addToParent(e,t){const i=this.getChildrenMappedKey(e.key,e.rowGroupColumn);t&&(null!=t.childrenMapped&&(t.childrenMapped[i]=e),t.childrenAfterGroup.push(e),t.updateHasChildren())}areGroupColsEqual(e,t){return null!=e&&null!=t&&e.pivotMode===t.pivotMode&&z.areEqual(e.groupedCols,t.groupedCols)&&z.areEqual(e.keyCreators,t.keyCreators)}checkAllGroupDataAfterColsChanged(e){const t=i=>{!i||i.forEach(n=>{(e.usingTreeData||n.group)&&(this.setGroupData(n,{field:n.field,key:n.key,rowGroupColumn:n.rowGroupColumn,leafNode:n.allLeafChildren[0]},e),t(n.childrenAfterGroup))})};t(e.rootNode.childrenAfterGroup)}shotgunResetEverything(e,t){if(this.noChangeInGroupingColumns(e,t))return;this.selectionService.filterFromSelection(o=>o&&!o.group);const{rootNode:i,groupedCols:n}=e;i.leafGroup=!e.usingTreeData&&0===n.length,i.childrenAfterGroup=[],i.childrenMapped={},i.updateHasChildren();const s=i.sibling;s&&(s.childrenAfterGroup=i.childrenAfterGroup,s.childrenMapped=i.childrenMapped),this.insertNodes(i.allLeafChildren,e,!1)}noChangeInGroupingColumns(e,t){let i=!1;const n=this.columnModel.getGroupDisplayColumns(),s=n?n.map(o=>o.getId()).join("-"):"";return t&&(i=e.usingTreeData||this.areGroupColsEqual(e,this.oldGroupingDetails),this.oldGroupDisplayColIds!==s&&this.checkAllGroupDataAfterColsChanged(e)),this.oldGroupingDetails=e,this.oldGroupDisplayColIds=s,i}insertNodes(e,t,i){e.forEach(n=>{this.insertOneNode(n,t,i),t.changedPath.isActive()&&t.changedPath.addParentNode(n.parent)})}insertOneNode(e,t,i,n){const s=this.getGroupInfo(e,t),o=this.findParentForNode(e,s,t,n);o.group||console.warn("AG Grid: duplicate group keys for row data, keys should be unique",[o.data,e.data]),t.usingTreeData?this.swapGroupWithUserNode(o,e,i):(e.parent=o,e.level=s.length,o.childrenAfterGroup.push(e),o.updateHasChildren())}findParentForNode(e,t,i,n){let s=i.rootNode;return t.forEach((o,a)=>{s=this.getOrCreateNextNode(s,o,a,i),n?.isRemoveFromAllLeafChildren(s,e)?n?.preventRemoveFromAllLeafChildren(s,e):s.allLeafChildren.push(e)}),s}swapGroupWithUserNode(e,t,i){t.parent=e.parent,t.key=e.key,t.field=e.field,t.groupData=e.groupData,t.level=e.level,i||(t.expanded=e.expanded),t.leafGroup=e.leafGroup,t.rowGroupIndex=e.rowGroupIndex,t.allLeafChildren=e.allLeafChildren,t.childrenAfterGroup=e.childrenAfterGroup,t.childrenMapped=e.childrenMapped,t.sibling=e.sibling,t.updateHasChildren(),this.removeFromParent(e),t.childrenAfterGroup.forEach(n=>n.parent=t),this.addToParent(t,e.parent)}getOrCreateNextNode(e,t,i,n){const s=this.getChildrenMappedKey(t.key,t.rowGroupColumn);let o=e.childrenMapped?e.childrenMapped[s]:void 0;return o||(o=this.createGroup(t,e,i,n),this.addToParent(o,e)),o}createGroup(e,t,i,n){const s=new Gt(this.beans);return s.group=!0,s.field=e.field,s.rowGroupColumn=e.rowGroupColumn,this.setGroupData(s,e,n),s.key=e.key,s.id=this.createGroupId(s,t,n.usingTreeData,i),s.level=i,s.leafGroup=!n.usingTreeData&&i===n.groupedColCount-1,s.allLeafChildren=[],s.setAllChildrenCount(0),s.rowGroupIndex=n.usingTreeData?null:i,s.childrenAfterGroup=[],s.childrenMapped={},s.updateHasChildren(),s.parent=n.includeParents?t:null,this.setExpandedInitialValue(n,s),s}createGroupId(e,t,i,n){let s;return s=i?(o,a,c)=>{if(c<0)return null;const u=a?s(a,a.parent,c-1):null;return`${null==u?"":u+"-"}${c}-${o.key}`}:(o,a)=>{if(!o.rowGroupColumn)return null;const c=a?s(a,a.parent,0):null;return`${null==c?"":c+"-"}${o.rowGroupColumn.getColId()}-${o.key}`},Gt.ID_PREFIX_ROW_GROUP+s(e,t,n)}setGroupData(e,t,i){e.groupData={},this.columnModel.getGroupDisplayColumns().forEach(s=>{if(i.usingTreeData)return void(e.groupData[s.getColId()]=t.key);const a=e.rowGroupColumn;null!==a&&s.isRowGroupDisplayed(a.getId())&&(e.groupData[s.getColId()]=i.suppressGroupMaintainValueType?t.key:this.valueService.getValue(a,t.leafNode))})}getChildrenMappedKey(e,t){return t?t.getId()+"-"+e:e}setExpandedInitialValue(e,t){if(e.pivotMode&&t.leafGroup)return void(t.expanded=!1);const i=e.isGroupOpenByDefault;if(i)return void(t.expanded=1==i({rowNode:t,field:t.field,key:t.key,level:t.level,rowGroupColumn:t.rowGroupColumn}));const{expandByDefault:n}=e;t.expanded=-1===e.expandByDefault||t.level<n}getGroupInfo(e,t){return t.usingTreeData?this.getGroupInfoFromCallback(e,t):this.getGroupInfoFromGroupColumns(e,t)}getGroupInfoFromCallback(e,t){const i=t.getDataPath?t.getDataPath(e.data):null;return(null==i||0===i.length)&&z.warnOnce(`getDataPath() should not return an empty path for data ${e.data}`),i?i.map(s=>({key:s,field:null,rowGroupColumn:null})):[]}getGroupInfoFromGroupColumns(e,t){const i=[];return t.groupedCols.forEach(n=>{let s=this.valueService.getKeyForNode(n,e),o=null!=s&&""!==s;if((t.pivotMode||!t.groupAllowUnbalanced)&&!o&&(s="",o=!0),o){const c={key:s,field:n.getColDef().field,rowGroupColumn:n,leafNode:e};i.push(c)}}),i}};ap([P("columnModel")],zc.prototype,"columnModel",void 0),ap([P("selectableService")],zc.prototype,"selectableService",void 0),ap([P("valueService")],zc.prototype,"valueService",void 0),ap([P("beans")],zc.prototype,"beans",void 0),ap([P("selectionService")],zc.prototype,"selectionService",void 0),zc=ap([He("groupStage")],zc);var Kb,$b=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Rg=Kb=class extends Ee{init(){const e=()=>{var i;return null!==(i=this.gos.get("serverSidePivotResultFieldSeparator"))&&void 0!==i?i:"_"};this.fieldSeparator=e(),this.addManagedPropertyListener("serverSidePivotResultFieldSeparator",()=>{this.fieldSeparator=e()});const t=()=>this.gos.get("pivotDefaultExpanded");this.pivotDefaultExpanded=t(),this.addManagedPropertyListener("pivotDefaultExpanded",()=>{this.pivotDefaultExpanded=t()})}createPivotColumnDefs(e){const t=this.createPivotColumnsFromUniqueValues(e),n=function i(o,a=[]){return o.forEach(c=>{void 0!==c.children?i(c.children,a):a.push(c)}),a}(t);return this.addRowGroupTotals(t,n),this.addExpandablePivotGroups(t,n),this.addPivotTotalsToGroups(t,n),{pivotColumnGroupDefs:t,pivotColumnDefs:n.map(o=>z.cloneObject(o))}}createPivotColumnsFromUniqueValues(e){const t=this.columnModel.getPivotColumns();return this.recursivelyBuildGroup(0,e,[],t.length,t)}recursivelyBuildGroup(e,t,i,n,s){const o=this.columnModel.getValueColumns();if(e>=n)return this.buildMeasureCols(i);const a=s[e].getColDef(),c=this.headerNameComparator.bind(this,a.pivotComparator);if(1===o.length&&this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn")&&e===n-1){const p=[];return z.iterateObject(t,g=>{const m=[...i,g],y=this.createColDef(o[0],g,m);y.columnGroupShow="open",p.push(y)}),p.sort(c),p}const u=[];return z.iterateObject(t,(p,g)=>{const m=-1===this.pivotDefaultExpanded||e<this.pivotDefaultExpanded,y=[...i,p];u.push({children:this.recursivelyBuildGroup(e+1,g,y,n,s),headerName:p,pivotKeys:y,columnGroupShow:"open",openByDefault:m,groupId:this.generateColumnGroupId(y)})}),u.sort(c),u}buildMeasureCols(e){const t=this.columnModel.getValueColumns();return 0===t.length?[this.createColDef(null,"-",e)]:t.map(i=>{const n=this.columnModel.getDisplayNameForColumn(i,"header");return Object.assign(Object.assign({},this.createColDef(i,n,e)),{columnGroupShow:"open"})})}addExpandablePivotGroups(e,t){if(this.gridOptionsService.get("suppressExpandablePivotGroups")||this.gridOptionsService.get("pivotColumnGroupTotals"))return;const i=(n,s,o)=>{const a=n;if(a.children){const c=new Map;a.children.forEach(p=>{i(p,s,c)});const u=!a.children.some(p=>p.children);this.columnModel.getValueColumns().forEach(p=>{const g=this.columnModel.getDisplayNameForColumn(p,"header"),m=this.createColDef(p,g,n.pivotKeys);m.pivotTotalColumnIds=c.get(p.getColId()),m.columnGroupShow="closed",m.aggFunc=p.getAggFunc(),u||(n.children.push(m),s.push(m))}),this.merge(o,c)}else{const c=n;if(!c.pivotValueColumn)return;const u=c.pivotValueColumn.getColId(),p=o.has(u)?o.get(u):[];p.push(c.colId),o.set(u,p)}};e.forEach(n=>{i(n,t,new Map)})}addPivotTotalsToGroups(e,t){if(!this.gridOptionsService.get("pivotColumnGroupTotals"))return;const i="after"===this.gridOptionsService.get("pivotColumnGroupTotals"),n=this.columnModel.getValueColumns(),s=n.map(a=>a.getAggFunc());if(!s||s.length<1||!this.sameAggFuncs(s))return;const o=n[0];e.forEach(a=>{this.recursivelyAddPivotTotal(a,t,o,i)})}recursivelyAddPivotTotal(e,t,i,n){const s=e;if(!s.children){const a=e;return a.colId?[a.colId]:null}let o=[];if(s.children.forEach(a=>{const c=this.recursivelyAddPivotTotal(a,t,i,n);c&&(o=o.concat(c))}),s.children.length>1){const c=this.localeService.getLocaleTextFunc()("pivotColumnGroupTotals","Total"),u=this.createColDef(i,c,e.pivotKeys,!0);u.pivotTotalColumnIds=o,u.aggFunc=i.getAggFunc();const p=e.children;n?p.push(u):p.unshift(u),t.push(u)}return o}addRowGroupTotals(e,t){if(!this.gridOptionsService.get("pivotRowTotals"))return;const i="after"===this.gridOptionsService.get("pivotRowTotals"),n=this.columnModel.getValueColumns(),s=i?n.slice():n.slice().reverse();for(let o=0;o<s.length;o++){const a=s[o];let c=[];e.forEach(p=>{c=c.concat(this.extractColIdsForValueColumn(p,a))});const u=s.length>1||!this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn");this.createRowGroupTotal(e,t,a,c,i,u)}}extractColIdsForValueColumn(e,t){if(!e.children){const s=e;return s.pivotValueColumn===t&&s.colId?[s.colId]:[]}let n=[];return e.children.forEach(s=>{this.extractColIdsForValueColumn(s,t);const o=this.extractColIdsForValueColumn(s,t);n=n.concat(o)}),n}createRowGroupTotal(e,t,i,n,s,o){let c;if(0===this.columnModel.getValueColumns().length)c=this.createColDef(null,"-",[]);else{const p=this.columnModel.getDisplayNameForColumn(i,"header");c=this.createColDef(i,p,[]),c.pivotTotalColumnIds=n}c.colId=Kb.PIVOT_ROW_TOTAL_PREFIX+c.colId,t.push(c);const u=o?{children:[c],pivotKeys:[],groupId:`${Kb.PIVOT_ROW_TOTAL_PREFIX}_pivotGroup_${i.getColId()}`}:c;s?e.push(u):e.unshift(u)}createColDef(e,t,i,n=!1){const s={};if(e){const o=e.getColDef();Object.assign(s,o),s.hide=!1}return s.headerName=t,s.colId=this.generateColumnId(i||[],e&&!n?e.getColId():""),s.field=s.colId,s.valueGetter=o=>{var a;return null===(a=o.data)||void 0===a?void 0:a[o.colDef.field]},s.pivotKeys=i,s.pivotValueColumn=e,!0===s.filter&&(s.filter="agNumberColumnFilter"),s}sameAggFuncs(e){if(1==e.length)return!0;for(let t=1;t<e.length;t++)if(e[t]!==e[0])return!1;return!0}headerNameComparator(e,t,i){return e?e(t.headerName,i.headerName):t.headerName&&!i.headerName?1:!t.headerName&&i.headerName?-1:t.headerName&&i.headerName?t.headerName<i.headerName?-1:t.headerName>i.headerName?1:0:0}merge(e,t){t.forEach((i,n,s)=>{const a=[...e.has(n)?e.get(n):[],...i];e.set(n,a)})}generateColumnGroupId(e){return`pivotGroup_${this.columnModel.getPivotColumns().map(i=>i.getColId()).join("-")}_${e.join("-")}`}generateColumnId(e,t){return`pivot_${this.columnModel.getPivotColumns().map(n=>n.getColId()).join("-")}_${e.join("-")}_${t}`}createColDefsFromFields(e){const t={};for(let s=0;s<e.length;s++){const a=e[s].split(this.fieldSeparator);let c=t;for(let u=0;u<a.length;u++){const p=a[u];null==c[p]&&(c[p]={}),c=c[p]}}const i=(s,o,a,c)=>{var u;const p=[];for(let y in a){const _=i(`${s}${this.fieldSeparator}${y}`,y,a[y],c+1);p.push(_)}if(0===p.length){const y=this.columnModel.getPrimaryColumn(o);if(y){const _=null!==(u=this.columnModel.getDisplayNameForColumn(y,"header"))&&void 0!==u?u:o,E=this.createColDef(y,_,void 0,!1);return E.colId=s,E.aggFunc=y.getAggFunc(),E.valueGetter=D=>{var R;return null===(R=D.data)||void 0===R?void 0:R[s]},E}return{colId:s,headerName:o,valueGetter:_=>{var E;return null===(E=_.data)||void 0===E?void 0:E[s]}}}return this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn")&&1===p.length&&"colId"in p[0]?(p[0].headerName=o,p[0]):{openByDefault:-1===this.pivotDefaultExpanded||c<this.pivotDefaultExpanded,groupId:s,headerName:o,children:p}},n=[];for(let s in t){const a=i(s,s,t[s],0);n.push(a)}return n}};Rg.PIVOT_ROW_TOTAL_PREFIX="PivotRowTotal_",$b([P("columnModel")],Rg.prototype,"columnModel",void 0),$b([P("gridOptionsService")],Rg.prototype,"gos",void 0),$b([Se],Rg.prototype,"init",null),Rg=Kb=$b([He("pivotColDefService")],Rg);var Yb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Ag=class extends Ee{constructor(){super(...arguments),this.uniqueValues={}}execute(e){const t=e.changedPath;this.columnModel.isPivotActive()?this.executePivotOn(t):this.executePivotOff(t)}executePivotOff(e){this.aggregationColumnsHashLastTime=null,this.uniqueValues={},this.columnModel.isSecondaryColumnsPresent()&&(this.columnModel.setSecondaryColumns(null,"rowModelUpdated"),e&&e.setInactive())}executePivotOn(e){const t=this.bucketUpRowNodes(e),i=this.setUniqueValues(t),n=this.columnModel.getValueColumns(),s=n.map(E=>`${E.getId()}-${E.getColDef().headerName}`).join("#"),o=n.map(E=>E.getAggFunc().toString()).join("#"),a=this.aggregationColumnsHashLastTime!==s,c=this.aggregationFuncsHashLastTime!==o;this.aggregationColumnsHashLastTime=s,this.aggregationFuncsHashLastTime=o;const u=this.columnModel.getRowGroupColumns().map(E=>E.getId()).join("#"),p=u!==this.groupColumnsHashLastTime;this.groupColumnsHashLastTime=u;const g=this.gridOptionsService.get("pivotRowTotals"),m=this.gridOptionsService.get("pivotColumnGroupTotals"),y=this.gridOptionsService.get("suppressExpandablePivotGroups"),b=this.gridOptionsService.get("removePivotHeaderRowWhenSingleValueColumn"),_=g!==this.pivotRowTotalsLastTime||m!==this.pivotColumnGroupTotalsLastTime||y!==this.suppressExpandablePivotGroupsLastTime||b!==this.removePivotHeaderRowWhenSingleValueColumnLastTime;if(this.pivotRowTotalsLastTime=g,this.pivotColumnGroupTotalsLastTime=m,this.suppressExpandablePivotGroupsLastTime=y,this.removePivotHeaderRowWhenSingleValueColumnLastTime=b,i||a||p||c||_){const{pivotColumnGroupDefs:E,pivotColumnDefs:D}=this.pivotColDefService.createPivotColumnDefs(this.uniqueValues);this.pivotColumnDefs=D,this.columnModel.setSecondaryColumns(E,"rowModelUpdated"),e&&e.setInactive()}}setUniqueValues(e){return JSON.stringify(e)!==JSON.stringify(this.uniqueValues)&&(this.uniqueValues=e,!0)}bucketUpRowNodes(e){const t={};e.forEachChangedNodeDepthFirst(n=>{n.leafGroup&&(n.childrenMapped=null)});const i=n=>{var s;n.leafGroup?this.bucketRowNode(n,t):null===(s=n.childrenAfterFilter)||void 0===s||s.forEach(i)};return e.executeFromRootNode(i),t}bucketRowNode(e,t){const i=this.columnModel.getPivotColumns();e.childrenMapped=0===i.length?null:this.bucketChildren(e.childrenAfterFilter,i,0,t),e.sibling&&(e.sibling.childrenMapped=e.childrenMapped)}bucketChildren(e,t,i,n){const s={},o=t[i];if(e.forEach(a=>{let c=this.valueService.getKeyForNode(o,a);z.missing(c)&&(c=""),n[c]||(n[c]={}),s[c]||(s[c]=[]),s[c].push(a)}),i===t.length-1)return s;{const a={};return z.iterateObject(s,(c,u)=>{a[c]=this.bucketChildren(u,t,i+1,n[c])}),a}}getPivotColumnDefs(){return this.pivotColumnDefs}};Yb([P("valueService")],Ag.prototype,"valueService",void 0),Yb([P("columnModel")],Ag.prototype,"columnModel",void 0),Yb([P("pivotColDefService")],Ag.prototype,"pivotColDefService",void 0),Ag=Yb([He("pivotStage")],Ag);var Ka,oO=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const Hl=typeof BigInt>"u"?null:BigInt,vC={sum:"Sum",first:"First",last:"Last",min:"Min",max:"Max",count:"Count",avg:"Average"};let Ya=Ka=class extends Ee{constructor(){super(...arguments),this.aggFuncsMap={},this.initialised=!1}init(){this.initialised||(this.initialiseWithDefaultAggregations(),this.addAggFuncs(this.gridOptionsService.get("aggFuncs")))}initialiseWithDefaultAggregations(){this.aggFuncsMap[Ka.AGG_SUM]=j0,this.aggFuncsMap[Ka.AGG_FIRST]=Ul,this.aggFuncsMap[Ka.AGG_LAST]=pI,this.aggFuncsMap[Ka.AGG_MIN]=z0,this.aggFuncsMap[Ka.AGG_MAX]=CC,this.aggFuncsMap[Ka.AGG_COUNT]=fI,this.aggFuncsMap[Ka.AGG_AVG]=gI,this.initialised=!0}isAggFuncPossible(e,t){const i=this.getFuncNames(e),n=z.includes(i,t),s=z.exists(this.aggFuncsMap[t]);return n&&s}getDefaultFuncLabel(e){var t;return null!==(t=vC[e])&&void 0!==t?t:e}getDefaultAggFunc(e){const t=e.getColDef().defaultAggFunc;if(z.exists(t)&&this.isAggFuncPossible(e,t))return t;if(this.isAggFuncPossible(e,Ka.AGG_SUM))return Ka.AGG_SUM;const i=this.getFuncNames(e);return z.existsAndNotEmpty(i)?i[0]:null}addAggFuncs(e){this.init(),z.iterateObject(e,(t,i)=>{this.aggFuncsMap[t]=i})}getAggFunc(e){return this.init(),this.aggFuncsMap[e]}getFuncNames(e){return e.getColDef().allowedAggFuncs??Object.keys(this.aggFuncsMap).sort()}clear(){this.aggFuncsMap={}}};function j0(r){const{values:e}=r;let t=null;for(let i=0;i<e.length;i++){const n=e[i];"number"==typeof n?null===t?t=n:t+=Hl?"number"==typeof t?n:Hl(n):n:"bigint"==typeof n&&(t=null===t?n:("bigint"==typeof t?t:Hl(t))+n)}return t}function Ul(r){return r.values.length>0?r.values[0]:null}function pI(r){return r.values.length>0?z.last(r.values):null}function z0(r){const{values:e}=r;let t=null;for(let i=0;i<e.length;i++){const n=e[i];("number"==typeof n||"bigint"==typeof n)&&(null===t||t>n)&&(t=n)}return t}function CC(r){const{values:e}=r;let t=null;for(let i=0;i<e.length;i++){const n=e[i];("number"==typeof n||"bigint"==typeof n)&&(null===t||t<n)&&(t=n)}return t}function fI(r){var e,t;const{values:i}=r;let n=0;for(let o=0;o<i.length;o++){const a=i[o];n+=null!=a&&"number"==typeof a.value?a.value:1}const s=null===(t=null===(e=r.rowNode)||void 0===e?void 0:e.aggData)||void 0===t?void 0:t[r.column.getColId()];return s&&s.value===n?s:{value:n,toString:function(){return this.value.toString()},toNumber:function(){return this.value}}}function gI(r){var e,t,i;const{values:n}=r;let s=0,o=0;for(let u=0;u<n.length;u++){const p=n[u];let g=null;"number"==typeof p||"bigint"==typeof p?(g=p,o++):null!=p&&("number"==typeof p.value||"bigint"==typeof p.value)&&"number"==typeof p.count&&(g=Hl?p.value*("number"==typeof p.value?p.count:Hl(p.count)):p.value*p.count,o+=p.count),"number"==typeof g?s+=Hl?"number"==typeof s?g:Hl(g):g:"bigint"==typeof g&&(s=("bigint"==typeof s?s:Hl(s))+g)}let a=null;o>0&&(a=Hl?s/("number"==typeof s?o:Hl(o)):s/o);const c=null===(t=null===(e=r.rowNode)||void 0===e?void 0:e.aggData)||void 0===t?void 0:t[null===(i=r.column)||void 0===i?void 0:i.getColId()];return c&&c.count===o&&c.value===a?c:{count:o,value:a,toString:function(){return"number"==typeof this.value||"bigint"==typeof this.value?this.value.toString():""},toNumber:function(){return this.value}}}Ya.AGG_SUM="sum",Ya.AGG_FIRST="first",Ya.AGG_LAST="last",Ya.AGG_MIN="min",Ya.AGG_MAX="max",Ya.AGG_COUNT="count",Ya.AGG_AVG="avg",oO([Se],Ya.prototype,"init",null),Ya=Ka=oO([He("aggFuncService")],Ya);var Wl=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Hn extends Ne{constructor(e,t,i,n,s){super(),this.column=e,this.dragSourceDropTarget=t,this.ghost=i,this.dropZonePurpose=n,this.horizontal=s,this.popupShowing=!1}init(){this.setTemplate(Hn.TEMPLATE);const e=this.getGui(),t=this.gridOptionsService.get("functionsReadOnly");this.addElementClasses(e),this.addElementClasses(this.eDragHandle,"drag-handle"),this.addElementClasses(this.eText,"text"),this.addElementClasses(this.eButton,"button"),this.eDragHandle.appendChild(z.createIconNoSpan("columnDrag",this.gridOptionsService)),this.eButton.appendChild(z.createIconNoSpan("cancel",this.gridOptionsService)),this.setupSort(),this.displayName=this.columnModel.getDisplayNameForColumn(this.column,"columnDrop"),this.setupComponents(),!this.ghost&&!t&&this.addDragSource(),this.setupAria(),this.addManagedListener(this.eventService,ot.EVENT_SORT_CHANGED,()=>{this.setupAria()}),this.setupTooltip(),this.activateTabIndex();const i=()=>{const n=this.isGroupingAndLocked();z.setDisplayed(this.eButton,!n&&!this.gridOptionsService.get("functionsReadOnly")),this.eDragHandle.classList.toggle("ag-column-select-column-readonly",n),this.setupAria()};i(),this.isGroupingZone()&&this.addManagedPropertyListener("groupLockGroupColumns",()=>i())}getColumn(){return this.column}setupAria(){const e=this.localeService.getLocaleTextFunc(),{name:t,aggFuncName:i}=this.getColumnAndAggFuncName(),n=e("ariaDropZoneColumnComponentAggFuncSeparator"," of "),s={asc:e("ariaDropZoneColumnComponentSortAscending","ascending"),desc:e("ariaDropZoneColumnComponentSortDescending","descending")},o=this.column.getSort(),a=this.gridOptionsService.get("rowGroupPanelSuppressSort"),c=[[i&&`${i}${n}`,t,this.isGroupingZone()&&!a&&o&&`, ${s[o]}`].filter(p=>!!p).join("")],u=this.gridOptionsService.get("functionsReadOnly");if(this.isAggregationZone()&&!u){const p=e("ariaDropZoneColumnValueItemDescription","Press ENTER to change the aggregation type");c.push(p)}if(this.isGroupingZone()&&this.column.isSortable()&&!a){const p=e("ariaDropZoneColumnGroupItemDescription","Press ENTER to sort");c.push(p)}if(!this.isGroupingAndLocked()){const p=e("ariaDropZoneColumnComponentDescription","Press DELETE to remove");c.push(p)}z.setAriaLabel(this.getGui(),c.join(". "))}setupTooltip(){const e=()=>{const t=this.column.getColDef().headerTooltip;this.setTooltip(t)};e(),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,e)}setupSort(){const e=this.column.isSortable(),t=this.isGroupingZone();if(e&&t&&!this.gridOptionsService.get("rowGroupPanelSuppressSort")){this.eSortIndicator.setupSort(this.column,!0);const i=n=>{n.preventDefault();const o="ctrl"===this.gridOptionsService.get("multiSortKey")?n.ctrlKey||n.metaKey:n.shiftKey;this.sortController.progressSort(this.column,o,"uiColumnSorted")};this.addGuiEventListener("click",i),this.addGuiEventListener("keydown",n=>{n.key===ge.ENTER&&this.isGroupingZone()&&i(n)})}}addDragSource(){const{dragAndDropService:e,displayName:t,eDragHandle:i,column:n}=this,s={type:sn.ToolPanel,eElement:i,getDefaultIconName:()=>St.ICON_HIDE,getDragItem:()=>this.createDragItem(n),dragItemName:t};e.addDragSource(s,!0),this.addDestroyFunc(()=>e.removeDragSource(s))}createDragItem(e){const t={};return t[e.getId()]=e.isVisible(),{columns:[e],visibleState:t}}setupComponents(){this.setTextValue(),this.setupRemove(),this.ghost&&this.addCssClass("ag-column-drop-cell-ghost"),this.isAggregationZone()&&!this.gridOptionsService.get("functionsReadOnly")&&this.addGuiEventListener("click",this.onShowAggFuncSelection.bind(this))}isGroupingAndLocked(){return this.isGroupingZone()&&this.columnModel.isColumnGroupingLocked(this.column)}setupRemove(){z.setDisplayed(this.eButton,!this.isGroupingAndLocked()&&!this.gridOptionsService.get("functionsReadOnly"));const e={type:Hn.EVENT_COLUMN_REMOVE};this.addGuiEventListener("keydown",i=>{const n=i.key===ge.ENTER;i.key===ge.DELETE&&(this.isGroupingAndLocked()||(i.preventDefault(),this.dispatchEvent(e))),n&&this.isAggregationZone()&&!this.gridOptionsService.get("functionsReadOnly")&&(i.preventDefault(),this.onShowAggFuncSelection())}),this.addManagedListener(this.eButton,"click",i=>{this.dispatchEvent(e),i.stopPropagation()});const t=new Ln(this.eButton);this.addManagedListener(t,Ln.EVENT_TAP,()=>{this.dispatchEvent(e)}),this.addDestroyFunc(t.destroy.bind(t))}getColumnAndAggFuncName(){const e=this.displayName;let t="";if(this.isAggregationZone()){const i=this.column.getAggFunc(),n="string"==typeof i?i:"agg";t=this.localeService.getLocaleTextFunc()(n,n)}return{name:e,aggFuncName:t}}setTextValue(){const{name:e,aggFuncName:t}=this.getColumnAndAggFuncName(),i=this.isAggregationZone()?`${t}(${e})`:e,n=z.escapeString(i);this.eText.innerHTML=n}onShowAggFuncSelection(){if(this.popupShowing)return;this.popupShowing=!0;const e=new qo({cssIdentifier:"select-agg-func"}),t=this.aggFuncService.getFuncNames(this.column),i=this.getGui(),n=e.getGui();e.setModel({getRow:function(g){return t[g]},getRowCount:function(){return t.length}}),this.getContext().createBean(e);const s=z.loadTemplate('<div class="ag-select-agg-func-popup"></div>');s.style.top="0px",s.style.left="0px",s.appendChild(n),s.style.width=`${i.clientWidth}px`;const o=this.addManagedListener(s,"focusout",g=>{!s.contains(g.relatedTarget)&&u&&u.hideFunc()}),c=this.localeService.getLocaleTextFunc(),u=this.popupService.addPopup({modal:!0,eChild:s,closeOnEsc:!0,closedCallback:g=>{this.destroyBean(e),this.popupShowing=!1,"Escape"===g?.key&&i.focus(),o&&o()},ariaLabel:c("ariaLabelAggregationFunction","Aggregation Function")});u&&e.setComponentCreator(this.createAggSelect.bind(this,u.hideFunc)),e.addGuiEventListener("keydown",g=>{if(g.key===ge.ENTER||g.key===ge.SPACE){const m=e.getLastFocusedRow();if(null==m)return;const y=e.getComponentAt(m);y&&y.selectItem()}}),this.popupService.positionPopupByComponent({type:"aggFuncSelect",eventSource:i,ePopup:s,keepWithinBounds:!0,column:this.column,position:"under"}),e.refresh();let p=t.findIndex(g=>g===this.column.getAggFunc());-1===p&&(p=0),e.focusRow(p)}createAggSelect(e,t){const n=this.localeService.getLocaleTextFunc(),s=t.toString(),o=n(s,s);return new qb(()=>{e(),this.gridOptionsService.get("functionsPassive")?this.eventService.dispatchEvent({type:G.EVENT_COLUMN_AGG_FUNC_CHANGE_REQUEST,columns:[this.column],aggFunc:t}):this.columnModel.setColumnAggFunc(this.column,t,"toolPanelDragAndDrop")},o)}addElementClasses(e,t){e.classList.add("ag-column-drop-cell"+(t=t?`-${t}`:""),`ag-column-drop-${this.horizontal?"horizontal":"vertical"}-cell${t}`)}isAggregationZone(){return"aggregation"===this.dropZonePurpose}isGroupingZone(){return"rowGroup"===this.dropZonePurpose}destroy(){super.destroy(),this.column=null,this.dragSourceDropTarget=null}}Hn.EVENT_COLUMN_REMOVE="columnRemove",Hn.TEMPLATE='<span role="option">\n          <span ref="eDragHandle" class="ag-drag-handle ag-column-drop-cell-drag-handle" role="presentation"></span>\n          <span ref="eText" class="ag-column-drop-cell-text" aria-hidden="true"></span>\n          <ag-sort-indicator ref="eSortIndicator"></ag-sort-indicator>\n          <span ref="eButton" class="ag-column-drop-cell-button" role="presentation"></span>\n        </span>',Wl([P("dragAndDropService")],Hn.prototype,"dragAndDropService",void 0),Wl([P("columnModel")],Hn.prototype,"columnModel",void 0),Wl([P("popupService")],Hn.prototype,"popupService",void 0),Wl([Pt("aggFuncService")],Hn.prototype,"aggFuncService",void 0),Wl([P("sortController")],Hn.prototype,"sortController",void 0),Wl([re("eText")],Hn.prototype,"eText",void 0),Wl([re("eDragHandle")],Hn.prototype,"eDragHandle",void 0),Wl([re("eButton")],Hn.prototype,"eButton",void 0),Wl([re("eSortIndicator")],Hn.prototype,"eSortIndicator",void 0),Wl([Se],Hn.prototype,"init",null);class qb extends Ne{constructor(e,t){super('<div class="ag-select-agg-func-item"/>'),this.selectItem=e,this.getGui().innerText=t,this.addGuiEventListener("click",this.selectItem)}}var aO=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class vs extends Ne{constructor(e,t){super('<div class="ag-unselectable" role="presentation"></div>'),this.horizontal=e,this.dropZonePurpose=t,this.state=vs.STATE_NOT_DRAGGING,this.guiDestroyFunctions=[],this.childColumnComponents=[],this.resizeEnabled=!1,this.addElementClasses(this.getGui()),this.eColumnDropList=document.createElement("div"),this.addElementClasses(this.eColumnDropList,"list"),z.setAriaRole(this.eColumnDropList,"listbox")}isHorizontal(){return this.horizontal}toggleResizable(e){this.positionableFeature.setResizable(!!e&&{bottom:!0}),this.resizeEnabled=e}setBeans(e){this.beans=e}isSourceEventFromTarget(e){const{dropZoneTarget:t,dragSource:i}=e;return t.contains(i.eElement)}destroy(){this.destroyGui(),super.destroy()}destroyGui(){this.guiDestroyFunctions.forEach(e=>e()),this.guiDestroyFunctions.length=0,this.childColumnComponents.length=0,z.clearElement(this.getGui()),z.clearElement(this.eColumnDropList)}init(e){this.params=e,this.createManagedBean(new ir(this.getFocusableElement(),{handleKeyDown:this.handleKeyDown.bind(this)})),this.addManagedListener(this.beans.eventService,G.EVENT_NEW_COLUMNS_LOADED,this.refreshGui.bind(this)),this.addManagedPropertyListeners(["functionsReadOnly","rowGroupPanelSuppressSort","groupLockGroupColumns"],this.refreshGui.bind(this)),this.setupDropTarget(),this.positionableFeature=new El(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature),this.refreshGui(),z.setAriaLabel(this.eColumnDropList,this.getAriaLabel())}handleKeyDown(e){let i=e.key===ge.DOWN,n=e.key===ge.UP;if(this.horizontal){const o=this.gridOptionsService.get("enableRtl");i=!o&&e.key===ge.RIGHT||o&&e.key===ge.LEFT,n=!o&&e.key===ge.LEFT||o&&e.key===ge.RIGHT}if(!i&&!n)return;const s=this.focusService.findNextFocusableElement(this.getFocusableElement(),!1,n);s&&(e.preventDefault(),s.focus())}addElementClasses(e,t){e.classList.add("ag-column-drop"+(t=t?`-${t}`:""),`ag-column-drop-${this.horizontal?"horizontal":"vertical"}${t}`)}setupDropTarget(){this.dropTarget={getContainer:this.getGui.bind(this),getIconName:this.getIconName.bind(this),onDragging:this.onDragging.bind(this),onDragEnter:this.onDragEnter.bind(this),onDragLeave:this.onDragLeave.bind(this),onDragStop:this.onDragStop.bind(this),isInterestedIn:this.isInterestedIn.bind(this)},this.beans.dragAndDropService.addDropTarget(this.dropTarget)}isInterestedIn(e){return e===sn.HeaderCell||e===sn.ToolPanel}minimumAllowedNewInsertIndex(){const e=this.gridOptionsService.get("groupLockGroupColumns"),t=this.colModel.getRowGroupColumns().length;return-1===e?t:Math.min(e,t)}checkInsertIndex(e){const t=this.getNewInsertIndex(e);if(t<0)return!1;const i=this.minimumAllowedNewInsertIndex(),n=Math.max(i,t),s=n!==this.insertIndex;return s&&(this.insertIndex=n),s}getNewInsertIndex(e){const t=e.event,i=this.horizontal?t.clientX:t.clientY,n=this.childColumnComponents.map(o=>o.getGui().getBoundingClientRect()),s=n.findIndex(o=>this.horizontal?o.right>i&&o.left<i:o.top<i&&o.bottom>i);if(-1===s){const o=this.beans.gridOptionsService.get("enableRtl");return n.every(u=>i>(this.horizontal?u.right:u.bottom))?o&&this.horizontal?0:this.childColumnComponents.length:n.every(u=>i<(this.horizontal?u.left:u.top))?o&&this.horizontal?this.childColumnComponents.length:0:this.insertIndex}return this.insertIndex<=s?s+1:s}checkDragStartedBySelf(e){this.state===vs.STATE_NOT_DRAGGING&&(this.state=vs.STATE_REARRANGE_COLUMNS,this.potentialDndColumns=e.dragSource.getDragItem().columns||[],this.refreshGui(),this.checkInsertIndex(e),this.refreshGui())}onDragging(e){this.checkDragStartedBySelf(e),this.checkInsertIndex(e)&&this.refreshGui()}onDragEnter(e){const t=e.dragSource.getDragItem().columns||[];this.state=vs.STATE_NEW_COLUMNS_IN;const i=t.filter(o=>this.isColumnDroppable(o,e)),n=i.every(o=>-1!==this.childColumnComponents.map(a=>a.getColumn()).indexOf(o));if(0!==i.length)if(this.potentialDndColumns=i,n)this.state=vs.STATE_NOT_DRAGGING;else{if(this.isRowGroupPanel()&&!this.gridOptionsService.get("suppressRowGroupHidesColumns")&&!e.fromNudge){const a=e.dragSource.getDragItem().columns;this.setColumnsVisible(a,!1,"uiColumnDragged")}this.checkInsertIndex(e),this.refreshGui()}}setColumnsVisible(e,t,i){if(e){const n=e.filter(s=>!s.getColDef().lockVisible);this.colModel.setColumnsVisible(n,t,i)}}isPotentialDndColumns(){return z.existsAndNotEmpty(this.potentialDndColumns)}isRowGroupPanel(){return"rowGroup"===this.dropZonePurpose}onDragLeave(e){if(this.state===vs.STATE_REARRANGE_COLUMNS){const t=e.dragSource.getDragItem().columns||[];this.removeColumns(t)}if(this.isPotentialDndColumns()){if(this.isRowGroupPanel()&&!this.gridOptionsService.get("suppressMakeColumnVisibleAfterUnGroup")&&!e.fromNudge){const i=e.dragSource.getDragItem();this.setColumnsVisible(i.columns,!0,"uiColumnDragged")}this.potentialDndColumns=[],this.refreshGui()}this.state=vs.STATE_NOT_DRAGGING}onDragStop(){if(this.isPotentialDndColumns()){let e=!1;this.state===vs.STATE_NEW_COLUMNS_IN?(this.addColumns(this.potentialDndColumns),e=!0):e=this.rearrangeColumns(this.potentialDndColumns),this.potentialDndColumns=[],(!this.beans.gridOptionsService.get("functionsPassive")||!e)&&this.refreshGui()}this.state=vs.STATE_NOT_DRAGGING}removeColumns(e){const t=this.getExistingColumns().filter(i=>!z.includes(e,i));this.updateColumns(t)}addColumns(e){if(!e)return;const t=this.getExistingColumns().slice(),i=e.filter(n=>t.indexOf(n)<0);z.insertArrayIntoArray(t,i,this.insertIndex),this.updateColumns(t)}rearrangeColumns(e){const t=this.getNonGhostColumns().slice();return z.insertArrayIntoArray(t,e,this.insertIndex),!z.areEqual(t,this.getExistingColumns())&&(this.updateColumns(t),!0)}refreshGui(){const e=this.eColumnDropList.scrollTop,t=this.resizeEnabled,i=this.getFocusedItem();let n=this.focusService.findNextFocusableElement();n||(n=this.focusService.findNextFocusableElement(void 0,!1,!0)),this.toggleResizable(!1),this.destroyGui(),this.addIconAndTitleToGui(),this.addEmptyMessageToGui(),this.addColumnsToGui(),this.isHorizontal()||(this.eColumnDropList.scrollTop=e),t&&this.toggleResizable(t),this.focusService.isKeyboardMode()&&this.restoreFocus(i,n)}getFocusedItem(){const e=this.getGui(),t=this.gridOptionsService.getDocument().activeElement;return e.contains(t)?Array.from(e.querySelectorAll(".ag-column-drop-cell")).indexOf(t):-1}restoreFocus(e,t){const i=this.getGui(),n=Array.from(i.querySelectorAll(".ag-column-drop-cell"));if(-1===e)return;0===n.length&&t.focus();const o=n[Math.min(n.length-1,e)];o&&o.focus()}getNonGhostColumns(){const e=this.getExistingColumns();return this.isPotentialDndColumns()?e.filter(t=>!z.includes(this.potentialDndColumns,t)):e}addColumnsToGui(){const t=this.getNonGhostColumns().map(i=>this.createColumnComponent(i,!1));if(this.isPotentialDndColumns()){const i=this.potentialDndColumns.map(n=>this.createColumnComponent(n,!0));this.insertIndex>=t.length?t.push(...i):t.splice(this.insertIndex,0,...i)}this.appendChild(this.eColumnDropList),t.forEach((i,n)=>{n>0&&this.addArrow(this.eColumnDropList),this.eColumnDropList.appendChild(i.getGui())}),this.addAriaLabelsToComponents()}addAriaLabelsToComponents(){this.childColumnComponents.forEach((e,t)=>{const i=e.getGui();z.setAriaPosInSet(i,t+1),z.setAriaSetSize(i,this.childColumnComponents.length)})}createColumnComponent(e,t){const i=new Hn(e,this.dropTarget,t,this.dropZonePurpose,this.horizontal);return i.addEventListener(Hn.EVENT_COLUMN_REMOVE,this.removeColumns.bind(this,[e])),this.beans.context.createBean(i),this.guiDestroyFunctions.push(()=>this.destroyBean(i)),t||this.childColumnComponents.push(i),i}addIconAndTitleToGui(){const e=this.params.icon,t=document.createElement("div");if(z.setAriaHidden(t,!0),this.addElementClasses(t,"title-bar"),this.addElementClasses(e,"icon"),this.addOrRemoveCssClass("ag-column-drop-empty",this.isExistingColumnsEmpty()),t.appendChild(e),!this.horizontal){const i=document.createElement("span");this.addElementClasses(i,"title"),i.innerHTML=this.params.title,t.appendChild(i)}this.appendChild(t)}isExistingColumnsEmpty(){return 0===this.getExistingColumns().length}addEmptyMessageToGui(){if(!this.isExistingColumnsEmpty()||this.isPotentialDndColumns())return;const e=document.createElement("span");e.innerHTML=this.params.emptyMessage,this.addElementClasses(e,"empty-message"),this.eColumnDropList.appendChild(e)}addArrow(e){if(this.horizontal){const t=this.beans.gridOptionsService.get("enableRtl"),i=z.createIconNoSpan(t?"smallLeft":"smallRight",this.beans.gridOptionsService);this.addElementClasses(i,"cell-separator"),e.appendChild(i)}}}vs.STATE_NOT_DRAGGING="notDragging",vs.STATE_NEW_COLUMNS_IN="newColumnsIn",vs.STATE_REARRANGE_COLUMNS="rearrangeColumns",aO([P("columnModel")],vs.prototype,"colModel",void 0),aO([P("focusService")],vs.prototype,"focusService",void 0);var yC=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class pu extends vs{constructor(e){super(e,"rowGroup")}passBeansUp(){super.setBeans({gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});const e=this.localeService.getLocaleTextFunc(),t=e("rowGroupColumnsEmptyMessage","Drag here to set row groups"),i=e("groups","Row Groups");super.init({dragAndDropIcon:St.ICON_GROUP,icon:z.createIconNoSpan("rowGroupPanel",this.gridOptionsService,null),emptyMessage:t,title:i}),this.addManagedListener(this.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,this.refreshGui.bind(this))}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaRowGroupDropZonePanelLabel","Row Groups")}getTooltipParams(){const e=super.getTooltipParams();return e.location="rowGroupColumnsList",e}isColumnDroppable(e,t){return!(this.gridOptionsService.get("functionsReadOnly")||!e.isPrimary())&&e.isAllowRowGroup()&&(!e.isRowGroupActive()||this.isSourceEventFromTarget(t))}updateColumns(e){this.gridOptionsService.get("functionsPassive")?this.eventService.dispatchEvent({type:G.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:e}):this.columnModel.setRowGroupColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndColumns()?St.ICON_GROUP:St.ICON_NOT_ALLOWED}getExistingColumns(){return this.columnModel.getRowGroupColumns()}}yC([P("columnModel")],pu.prototype,"columnModel",void 0),yC([P("loggerFactory")],pu.prototype,"loggerFactory",void 0),yC([P("dragAndDropService")],pu.prototype,"dragAndDropService",void 0),yC([Se],pu.prototype,"passBeansUp",null);var Og=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class fu extends vs{constructor(e){super(e,"pivot")}passBeansUp(){super.setBeans({gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});const e=this.localeService.getLocaleTextFunc(),t=e("pivotColumnsEmptyMessage","Drag here to set column labels"),i=e("pivots","Column Labels");super.init({dragAndDropIcon:St.ICON_GROUP,icon:z.createIconNoSpan("pivotPanel",this.gridOptionsService,null),emptyMessage:t,title:i}),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,this.refresh.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_CHANGED,this.refresh.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_MODE_CHANGED,this.checkVisibility.bind(this)),this.refresh()}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaPivotDropZonePanelLabel","Column Labels")}getTooltipParams(){const e=super.getTooltipParams();return e.location="pivotColumnsList",e}refresh(){this.checkVisibility(),this.refreshGui()}checkVisibility(){const e=this.columnModel.isPivotMode();if(this.isHorizontal())switch(this.gridOptionsService.get("pivotPanelShow")){case"always":this.setDisplayed(e);break;case"onlyWhenPivoting":const t=this.columnModel.isPivotActive();this.setDisplayed(e&&t);break;default:this.setDisplayed(!1)}else this.setDisplayed(e)}isColumnDroppable(e,t){return!(this.gridOptionsService.get("functionsReadOnly")||!e.isPrimary())&&e.isAllowPivot()&&(!e.isPivotActive()||this.isSourceEventFromTarget(t))}updateColumns(e){this.gridOptionsService.get("functionsPassive")?this.eventService.dispatchEvent({type:G.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:e}):this.columnModel.setPivotColumns(e,"toolPanelUi")}getIconName(){return this.isPotentialDndColumns()?St.ICON_PIVOT:St.ICON_NOT_ALLOWED}getExistingColumns(){return this.columnModel.getPivotColumns()}}Og([P("columnModel")],fu.prototype,"columnModel",void 0),Og([P("loggerFactory")],fu.prototype,"loggerFactory",void 0),Og([P("dragAndDropService")],fu.prototype,"dragAndDropService",void 0),Og([Se],fu.prototype,"passBeansUp",null);var lO=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class $0 extends Ne{constructor(){super()}postConstruct(){this.setGui(this.createNorthPanel()),this.addManagedListener(this.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onRowGroupChanged()),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,()=>this.onRowGroupChanged()),this.addManagedPropertyListener("rowGroupPanelShow",()=>this.onRowGroupChanged()),this.addManagedPropertyListener("pivotPanelShow",()=>this.onPivotPanelShow()),this.onRowGroupChanged()}createNorthPanel(){const e=document.createElement("div");return e.classList.add("ag-column-drop-wrapper"),z.setAriaRole(e,"presentation"),this.rowGroupComp=new pu(!0),this.createManagedBean(this.rowGroupComp),this.pivotComp=new fu(!0),this.createManagedBean(this.pivotComp),e.appendChild(this.rowGroupComp.getGui()),e.appendChild(this.pivotComp.getGui()),this.addManagedListener(this.rowGroupComp,Ne.EVENT_DISPLAYED_CHANGED,()=>this.onDropPanelVisible()),this.addManagedListener(this.pivotComp,Ne.EVENT_DISPLAYED_CHANGED,()=>this.onDropPanelVisible()),this.onDropPanelVisible(),e}onDropPanelVisible(){const e=this.rowGroupComp.isDisplayed()&&this.pivotComp.isDisplayed();this.rowGroupComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e),this.pivotComp.addOrRemoveCssClass("ag-column-drop-horizontal-half-width",e)}onRowGroupChanged(){if(!this.rowGroupComp)return;const e=this.gridOptionsService.get("rowGroupPanelShow");if("always"===e)this.rowGroupComp.setDisplayed(!0);else if("onlyWhenGrouping"===e){const t=!this.columnModel.isRowGroupEmpty();this.rowGroupComp.setDisplayed(t)}else this.rowGroupComp.setDisplayed(!1)}onPivotPanelShow(){if(!this.pivotComp)return;const e=this.gridOptionsService.get("pivotPanelShow");if("always"===e)this.pivotComp.setDisplayed(!0);else if("onlyWhenPivoting"===e){const t=this.columnModel.isPivotActive();this.pivotComp.setDisplayed(t)}else this.pivotComp.setDisplayed(!1)}}lO([P("columnModel")],$0.prototype,"columnModel",void 0),lO([Se],$0.prototype,"postConstruct",null);var cO=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let lp=class extends Ee{execute(e){const t=this.columnModel.isPivotMode(),i=this.filterManager.isAggregateFilterPresent()||this.filterManager.isAggregateQuickFilterPresent(),o=this.gridOptionsService.getGroupAggFiltering()||(t?p=>p.node.leafGroup:p=>!p.node.group),{changedPath:a}=e,c=(p,g=!1)=>{p.childrenAfterFilter&&(p.childrenAfterAggFilter=p.childrenAfterFilter,g&&p.childrenAfterAggFilter.forEach(m=>c(m,g)),this.setAllChildrenCount(p)),p.sibling&&(p.sibling.childrenAfterAggFilter=p.childrenAfterAggFilter)};a.forEachChangedNodeDepthFirst(i?p=>{var g;p.childrenAfterAggFilter=(null===(g=p.childrenAfterFilter)||void 0===g?void 0:g.filter(m=>{var y;return o({node:m})&&this.filterManager.doesRowPassAggregateFilters({rowNode:m})?(c(m,!0),!0):null===(y=m.childrenAfterAggFilter)||void 0===y?void 0:y.length}))||null,this.setAllChildrenCount(p),p.sibling&&(p.sibling.childrenAfterAggFilter=p.childrenAfterAggFilter)}:c,!0)}setAllChildrenCountTreeData(e){let t=0;e.childrenAfterAggFilter.forEach(i=>{t++,t+=i.allChildrenCount}),e.setAllChildrenCount(t)}setAllChildrenCountGridGrouping(e){let t=0;e.childrenAfterAggFilter.forEach(i=>{i.group?t+=i.allChildrenCount:t++}),e.setAllChildrenCount(t)}setAllChildrenCount(e){e.hasChildren()?this.gridOptionsService.get("treeData")?this.setAllChildrenCountTreeData(e):this.setAllChildrenCountGridGrouping(e):e.setAllChildrenCount(null)}};cO([P("filterManager")],lp.prototype,"filterManager",void 0),cO([P("columnModel")],lp.prototype,"columnModel",void 0),lp=cO([He("filterAggregatesStage")],lp);var Mg=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Tr extends jh{constructor(){super('\n            <div class="ag-group-filter">\n                <div ref="eGroupField"></div>\n                <div ref="eUnderlyingFilter"></div>\n            </div>\n        ')}postConstruct(){this.initialiseTabGuard({})}init(e){return this.params=e,this.validateParams(),this.updateGroups().then(()=>{this.addManagedListener(this.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onColumnRowGroupChanged())})}validateParams(){const{colDef:e}=this.params;e.field&&z.warnOnce('Group Column Filter does not work with the colDef property "field". This property will be ignored.'),e.filterValueGetter&&z.warnOnce('Group Column Filter does not work with the colDef property "filterValueGetter". This property will be ignored.'),e.filterParams&&z.warnOnce('Group Column Filter does not work with the colDef property "filterParams". This property will be ignored.')}updateGroups(){const e=this.updateGroupField();return this.getUnderlyingFilters(e)}getSourceColumns(){return this.groupColumn=this.params.column,this.gridOptionsService.get("treeData")?(z.warnOnce("Group Column Filter does not work with Tree Data enabled. Please disable Tree Data, or use a different filter."),[]):this.columnModel.getSourceColumnsForGroupColumn(this.groupColumn)||(z.warnOnce("Group Column Filter only works on group columns. Please use a different filter."),[])}updateGroupField(){z.clearElement(this.eGroupField),this.eGroupFieldSelect&&this.destroyBean(this.eGroupFieldSelect);const e=this.getSourceColumns(),t=e.filter(i=>i.isFilterAllowed());return t.length?(1===e.length?(this.selectedColumn=t[0],z.setDisplayed(this.eGroupField,!1)):((!this.selectedColumn||!t.some(i=>i.getId()===this.selectedColumn.getId()))&&(this.selectedColumn=t[0]),this.createGroupFieldSelectElement(t),this.eGroupField.appendChild(this.eGroupFieldSelect.getGui()),this.eGroupField.appendChild(z.loadTemplate('<div class="ag-filter-separator"></div>')),z.setDisplayed(this.eGroupField,!0)),t):(this.selectedColumn=void 0,z.setDisplayed(this.eGroupField,!1),null)}createGroupFieldSelectElement(e){this.eGroupFieldSelect=this.createManagedBean(new Tc);const t=this.localeService.getLocaleTextFunc();this.eGroupFieldSelect.setLabel(t("groupFilterSelect","Select field:")),this.eGroupFieldSelect.setLabelAlignment("top"),this.eGroupFieldSelect.addOptions(e.map(i=>{var n;return{value:i.getId(),text:null!==(n=this.columnModel.getDisplayNameForColumn(i,"groupFilter",!1))&&void 0!==n?n:void 0}})),this.eGroupFieldSelect.setValue(this.selectedColumn.getId()),this.eGroupFieldSelect.onValueChange(i=>this.updateSelectedColumn(i)),this.eGroupFieldSelect.addCssClass("ag-group-filter-field-select-wrapper"),1===e.length&&this.eGroupFieldSelect.setDisabled(!0)}getUnderlyingFilters(e){if(!e)return this.filterColumnPairs=void 0,this.selectedFilter=void 0,this.groupColumn.setFilterActive(!1,"columnRowGroupChanged"),$t.resolve();const t=[],i=[];return e.forEach(n=>{const s=this.filterManager.getOrCreateFilterWrapper(n,"COLUMN_MENU");s?.filterPromise&&t.push(s.filterPromise.then(o=>(o&&i.push({filter:o,column:n}),n.getId()===this.selectedColumn.getId()&&(this.selectedFilter=o??void 0),o)))}),$t.all(t).then(()=>{this.filterColumnPairs=i,this.groupColumn.setFilterActive(this.isFilterActive(),"columnRowGroupChanged")})}addUnderlyingFilterElement(){if(z.clearElement(this.eUnderlyingFilter),!this.selectedColumn)return $t.resolve();const e=this.filterManager.getOrCreateFilterWrapper(this.selectedColumn,"COLUMN_MENU");return e?e.guiPromise.then(t=>{var i;this.eUnderlyingFilter.appendChild(t),null===(i=e.filterPromise)||void 0===i||i.then(n=>{var s,o;null===(s=n?.afterGuiAttached)||void 0===s||s.call(n,this.afterGuiAttachedParams),(null===(o=this.afterGuiAttachedParams)||void 0===o||!o.suppressFocus)&&this.eGroupFieldSelect&&!this.eGroupFieldSelect.isDisabled()&&this.eGroupFieldSelect.getFocusableElement().focus()})}):$t.resolve()}updateSelectedColumn(e){var t,i;if(!e)return;null===(i=null===(t=this.selectedFilter)||void 0===t?void 0:t.afterGuiDetached)||void 0===i||i.call(t);const n=this.getFilterColumnPair(e);this.selectedColumn=n?.column,this.selectedFilter=n?.filter,this.dispatchEvent({type:Tr.EVENT_SELECTED_COLUMN_CHANGED}),this.addUnderlyingFilterElement()}isFilterActive(){var e;return!(null===(e=this.filterColumnPairs)||void 0===e||!e.some(({filter:t})=>t.isFilterActive()))}doesFilterPass(){return!0}getModel(){return null}setModel(){return $t.resolve()}afterGuiAttached(e){this.afterGuiAttachedParams=e,this.addUnderlyingFilterElement()}afterGuiDetached(){var e,t;z.clearElement(this.eUnderlyingFilter),null===(t=null===(e=this.selectedFilter)||void 0===e?void 0:e.afterGuiDetached)||void 0===t||t.call(e)}onColumnRowGroupChanged(){this.updateGroups().then(()=>{this.dispatchEvent({type:Tr.EVENT_COLUMN_ROW_GROUP_CHANGED}),this.eventService.dispatchEvent({type:"filterAllowedUpdated"})})}getFilterColumnPair(e){var t;if(e)return null===(t=this.filterColumnPairs)||void 0===t?void 0:t.find(({column:i})=>i.getId()===e)}getSelectedFilter(){return this.selectedFilter}getSelectedColumn(){return this.selectedColumn}isFilterAllowed(){return!!this.selectedColumn}destroy(){super.destroy()}}Tr.EVENT_COLUMN_ROW_GROUP_CHANGED="columnRowGroupChanged",Tr.EVENT_SELECTED_COLUMN_CHANGED="selectedColumnChanged",Mg([P("filterManager")],Tr.prototype,"filterManager",void 0),Mg([P("columnModel")],Tr.prototype,"columnModel",void 0),Mg([re("eGroupField")],Tr.prototype,"eGroupField",void 0),Mg([re("eUnderlyingFilter")],Tr.prototype,"eUnderlyingFilter",void 0),Mg([Se],Tr.prototype,"postConstruct",null);var SC=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Xb extends Ne{constructor(){super('\n            <div ref="eFloatingFilter" class="ag-group-floating-filter ag-floating-filter-input" role="presentation"></div>\n        '),this.haveAddedColumnListeners=!1}init(e){this.params=e;const t="multipleColumns"===this.gridOptionsService.get("groupDisplayType");return new $t(i=>{this.params.parentFilterInstance(n=>{this.parentFilterInstance=n,t?this.setupUnderlyingFloatingFilterElement().then(()=>i()):(this.setupReadOnlyFloatingFilterElement(),i())})}).then(()=>{this.addManagedListener(this.parentFilterInstance,Tr.EVENT_SELECTED_COLUMN_CHANGED,()=>this.onSelectedColumnChanged()),this.addManagedListener(this.parentFilterInstance,Tr.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.onColumnRowGroupChanged())})}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams()}setParams(){var e;const t=this.columnModel.getDisplayNameForColumn(this.params.column,"header",!0),i=this.localeService.getLocaleTextFunc();null===(e=this.eFloatingFilterText)||void 0===e||e.setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}setupReadOnlyFloatingFilterElement(){this.eFloatingFilterText||(this.eFloatingFilterText=this.createManagedBean(new Ac),this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",()=>this.params.showParentFilter()),this.setParams()),this.updateDisplayedValue(),this.eFloatingFilter.appendChild(this.eFloatingFilterText.getGui())}setupUnderlyingFloatingFilterElement(){this.showingUnderlyingFloatingFilter=!1,this.underlyingFloatingFilter=void 0,z.clearElement(this.eFloatingFilter);const e=this.parentFilterInstance.getSelectedColumn();if(e&&!e.isVisible()){const t=this.filterManager.getFloatingFilterCompDetails(e,this.params.showParentFilter);if(t)return this.compDetails=t,this.haveAddedColumnListeners||(this.haveAddedColumnListeners=!0,this.addManagedListener(e,ot.EVENT_VISIBLE_CHANGED,this.onColumnVisibleChanged.bind(this)),this.addManagedListener(e,ot.EVENT_COL_DEF_CHANGED,this.onColDefChanged.bind(this))),t.newAgStackInstance().then(i=>{var n,s;this.underlyingFloatingFilter=i,null===(n=this.underlyingFloatingFilter)||void 0===n||n.onParentModelChanged(null===(s=this.parentFilterInstance.getSelectedFilter())||void 0===s?void 0:s.getModel()),this.appendChild(i.getGui()),this.showingUnderlyingFloatingFilter=!0})}return this.setupReadOnlyFloatingFilterElement(),$t.resolve()}onColumnVisibleChanged(){this.setupUnderlyingFloatingFilterElement()}onColDefChanged(e){var t,i,n;if(!e.column)return;const s=this.filterManager.getFloatingFilterCompDetails(e.column,this.params.showParentFilter);s&&(null!==(t=this.underlyingFloatingFilter)&&void 0!==t&&t.refresh?this.underlyingFloatingFilter.refresh(s.params):null===(n=null===(i=this.underlyingFloatingFilter)||void 0===i?void 0:i.onParamsUpdated)||void 0===n||n.call(i,s.params))}onParentModelChanged(e,t){var i,n;this.showingUnderlyingFloatingFilter?null===(i=this.underlyingFloatingFilter)||void 0===i||i.onParentModelChanged(null===(n=this.parentFilterInstance.getSelectedFilter())||void 0===n?void 0:n.getModel(),t):this.updateDisplayedValue()}updateDisplayedValue(){if(!this.parentFilterInstance||!this.eFloatingFilterText)return;const e=this.parentFilterInstance.getSelectedFilter();if(!e)return this.eFloatingFilterText.setValue(""),void this.eFloatingFilterText.setDisplayed(!1);if(this.eFloatingFilterText.setDisplayed(!0),e.getModelAsString){const t=e.getModel();this.eFloatingFilterText.setValue(null==t?"":e.getModelAsString(t))}else this.eFloatingFilterText.setValue("")}onSelectedColumnChanged(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}onColumnRowGroupChanged(){this.showingUnderlyingFloatingFilter||this.updateDisplayedValue()}destroy(){super.destroy()}}SC([P("columnModel")],Xb.prototype,"columnModel",void 0),SC([P("filterManager")],Xb.prototype,"filterManager",void 0),SC([re("eFloatingFilter")],Xb.prototype,"eFloatingFilter",void 0);const dO={version:"31.1.1",moduleName:ze.RowGroupingModule,beans:[op,lp,zc,Rg,Ag,Ya],agStackComponents:[{componentName:"AgGridHeaderDropZones",componentClass:$0}],userComponents:[{componentName:"agGroupColumnFilter",componentClass:Tr},{componentName:"agGroupColumnFloatingFilter",componentClass:Xb}],dependantModules:[uu]};var Zb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class xg extends vs{constructor(e){super(e,"aggregation")}passBeansUp(){super.setBeans({gridOptionsService:this.gridOptionsService,eventService:this.eventService,context:this.getContext(),loggerFactory:this.loggerFactory,dragAndDropService:this.dragAndDropService});const e=this.localeService.getLocaleTextFunc(),t=e("valueColumnsEmptyMessage","Drag here to aggregate"),i=e("values","Values");super.init({dragAndDropIcon:St.ICON_AGGREGATE,icon:z.createIconNoSpan("valuePanel",this.gridOptionsService,null),emptyMessage:t,title:i}),this.addManagedListener(this.eventService,G.EVENT_COLUMN_VALUE_CHANGED,this.refreshGui.bind(this))}getAriaLabel(){return this.localeService.getLocaleTextFunc()("ariaValuesDropZonePanelLabel","Values")}getTooltipParams(){const e=super.getTooltipParams();return e.location="valueColumnsList",e}getIconName(){return this.isPotentialDndColumns()?St.ICON_AGGREGATE:St.ICON_NOT_ALLOWED}isColumnDroppable(e,t){return!(this.gridOptionsService.get("functionsReadOnly")||!e.isPrimary())&&e.isAllowValue()&&(!e.isValueActive()||this.isSourceEventFromTarget(t))}updateColumns(e){this.gridOptionsService.get("functionsPassive")?this.eventService.dispatchEvent({type:G.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:e}):this.columnModel.setValueColumns(e,"toolPanelUi")}getExistingColumns(){return this.columnModel.getValueColumns()}}Zb([P("columnModel")],xg.prototype,"columnModel",void 0),Zb([P("loggerFactory")],xg.prototype,"loggerFactory",void 0),Zb([P("dragAndDropService")],xg.prototype,"dragAndDropService",void 0),Zb([Se],xg.prototype,"passBeansUp",null);var Y0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class jl extends Ne{constructor(){super(jl.TEMPLATE)}init(e,t,i){this.allowDragging=e,this.params=t,this.eventType=i,this.primaryColsHeaderPanel.init(this.params),this.params.suppressColumnExpandAll&&this.params.suppressColumnFilter&&this.params.suppressColumnSelectAll&&this.primaryColsHeaderPanel.setDisplayed(!1),this.addManagedListener(this.primaryColsListPanel,"groupExpanded",this.onGroupExpanded.bind(this)),this.addManagedListener(this.primaryColsListPanel,"selectionChanged",this.onSelectionChange.bind(this)),this.primaryColsListPanel.init(this.params,this.allowDragging,this.eventType),this.addManagedListener(this.primaryColsHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"selectAll",this.onSelectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"unselectAll",this.onUnselectAll.bind(this)),this.addManagedListener(this.primaryColsHeaderPanel,"filterChanged",this.onFilterChanged.bind(this)),this.positionableFeature=new El(this.getGui(),{minHeight:100}),this.createManagedBean(this.positionableFeature)}toggleResizable(e){this.positionableFeature.setResizable(!!e&&{bottom:!0})}onExpandAll(){this.primaryColsListPanel.doSetExpandedAll(!0)}onCollapseAll(){this.primaryColsListPanel.doSetExpandedAll(!1)}expandGroups(e){this.primaryColsListPanel.setGroupsExpanded(!0,e)}collapseGroups(e){this.primaryColsListPanel.setGroupsExpanded(!1,e)}setColumnLayout(e){this.primaryColsListPanel.setColumnLayout(e)}onFilterChanged(e){this.primaryColsListPanel.setFilterText(e.filterText)}syncLayoutWithGrid(){this.primaryColsListPanel.onColumnsChanged()}onSelectAll(){this.primaryColsListPanel.doSetSelectedAll(!0)}onUnselectAll(){this.primaryColsListPanel.doSetSelectedAll(!1)}onGroupExpanded(e){this.primaryColsHeaderPanel.setExpandState(e.state),this.params.onStateUpdated()}onSelectionChange(e){this.primaryColsHeaderPanel.setSelectionState(e.state)}getExpandedGroups(){return this.primaryColsListPanel.getExpandedGroups()}}jl.TEMPLATE='<div class="ag-column-select">\n            <ag-primary-cols-header ref="primaryColsHeaderPanel"></ag-primary-cols-header>\n            <ag-primary-cols-list ref="primaryColsListPanel"></ag-primary-cols-list>\n        </div>',Y0([re("primaryColsHeaderPanel")],jl.prototype,"primaryColsHeaderPanel",void 0),Y0([re("primaryColsListPanel")],jl.prototype,"primaryColsListPanel",void 0);let uO=(()=>{class r extends Ne{constructor(){super(r.TEMPLATE),this.initialised=!1,this.childDestroyFuncs=[]}setVisible(t){super.setDisplayed(t),t&&!this.initialised&&this.init(this.params)}init(t){const i=this.gridOptionsService.addGridCommonParams({suppressColumnMove:!1,suppressColumnSelectAll:!1,suppressColumnFilter:!1,suppressColumnExpandAll:!1,contractColumnSelection:!1,suppressPivotMode:!1,suppressRowGroups:!1,suppressValues:!1,suppressPivots:!1,suppressSyncLayoutWithGrid:!1});if(this.params=Object.assign(Object.assign({},i),t),this.isRowGroupingModuleLoaded()&&!this.params.suppressPivotMode&&(this.pivotModePanel=this.createBean(new Bl),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotModePanel)),this.appendChild(this.pivotModePanel)),this.primaryColsPanel=this.createBean(new jl),this.childDestroyFuncs.push(()=>this.destroyBean(this.primaryColsPanel)),this.primaryColsPanel.init(!0,this.params,"toolPanelUi"),this.primaryColsPanel.addCssClass("ag-column-panel-column-select"),this.appendChild(this.primaryColsPanel),this.isRowGroupingModuleLoaded()){this.params.suppressRowGroups||(this.rowGroupDropZonePanel=this.createBean(new pu(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.rowGroupDropZonePanel)),this.appendChild(this.rowGroupDropZonePanel)),this.params.suppressValues||(this.valuesDropZonePanel=this.createBean(new xg(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.valuesDropZonePanel)),this.appendChild(this.valuesDropZonePanel)),this.params.suppressPivots||(this.pivotDropZonePanel=this.createBean(new fu(!1)),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotDropZonePanel)),this.appendChild(this.pivotDropZonePanel)),this.setLastVisible();const n=this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>{this.resetChildrenHeight(),this.setLastVisible()});this.childDestroyFuncs.push(()=>n())}this.initialised=!0}setPivotModeSectionVisible(t){!this.isRowGroupingModuleLoaded()||(this.pivotModePanel?this.pivotModePanel.setDisplayed(t):t&&(this.pivotModePanel=this.createBean(new Bl),this.getGui().insertBefore(this.pivotModePanel.getGui(),this.getGui().firstChild),this.childDestroyFuncs.push(()=>this.destroyBean(this.pivotModePanel))),this.setLastVisible())}setRowGroupsSectionVisible(t){!this.isRowGroupingModuleLoaded()||(this.rowGroupDropZonePanel?this.rowGroupDropZonePanel.setDisplayed(t):t&&(this.rowGroupDropZonePanel=this.createManagedBean(new pu(!1)),this.appendChild(this.rowGroupDropZonePanel)),this.setLastVisible())}setValuesSectionVisible(t){!this.isRowGroupingModuleLoaded()||(this.valuesDropZonePanel?this.valuesDropZonePanel.setDisplayed(t):t&&(this.valuesDropZonePanel=this.createManagedBean(new xg(!1)),this.appendChild(this.valuesDropZonePanel)),this.setLastVisible())}setPivotSectionVisible(t){!this.isRowGroupingModuleLoaded()||(this.pivotDropZonePanel?this.pivotDropZonePanel.setDisplayed(t):t&&(this.pivotDropZonePanel=this.createManagedBean(new fu(!1)),this.appendChild(this.pivotDropZonePanel),this.pivotDropZonePanel.setDisplayed(t)),this.setLastVisible())}setResizers(){[this.primaryColsPanel,this.rowGroupDropZonePanel,this.valuesDropZonePanel,this.pivotDropZonePanel].forEach(t=>{if(!t)return;const i=t.getGui();t.toggleResizable(!i.classList.contains("ag-last-column-drop")&&!i.classList.contains("ag-hidden"))})}setLastVisible(){const t=this.getGui();Array.prototype.slice.call(t.querySelectorAll(".ag-column-drop")).forEach(o=>o.classList.remove("ag-last-column-drop"));const n=t.querySelectorAll(".ag-column-drop:not(.ag-hidden)"),s=z.last(n);s&&s.classList.add("ag-last-column-drop"),this.setResizers()}resetChildrenHeight(){const i=this.getGui().children;for(let n=0;n<i.length;n++){const s=i[n];s.style.removeProperty("height"),s.style.removeProperty("flex")}}isRowGroupingModuleLoaded(){return yt.__assertRegistered(ze.RowGroupingModule,"Row Grouping",this.context.getGridId())}expandColumnGroups(t){this.primaryColsPanel.expandGroups(t)}collapseColumnGroups(t){this.primaryColsPanel.collapseGroups(t)}setColumnLayout(t){this.primaryColsPanel.setColumnLayout(t)}syncLayoutWithGrid(){this.primaryColsPanel.syncLayoutWithGrid()}destroyChildren(){this.childDestroyFuncs.forEach(t=>t()),this.childDestroyFuncs.length=0,z.clearElement(this.getGui())}refresh(t){return this.destroyChildren(),this.init(t),!0}getState(){return{expandedGroupIds:this.primaryColsPanel.getExpandedGroups()}}destroy(){this.destroyChildren(),super.destroy()}}return r.TEMPLATE='<div class="ag-column-panel"></div>',r})();var q0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class bC extends Ne{constructor(){super('<div class="ag-tool-panel-horizontal-resize"></div>'),this.minWidth=100,this.maxWidth=null}setElementToResize(e){this.elementToResize=e}postConstruct(){const e=this.horizontalResizeService.addResizeBar({eResizeBar:this.getGui(),dragStartPixels:1,onResizeStart:this.onResizeStart.bind(this),onResizing:this.onResizing.bind(this),onResizeEnd:this.onResizeEnd.bind(this)});this.addDestroyFunc(e),this.setInverted(this.gridOptionsService.get("enableRtl"))}dispatchResizeEvent(e,t,i){this.eventService.dispatchEvent({type:G.EVENT_TOOL_PANEL_SIZE_CHANGED,width:i,started:e,ended:t})}onResizeStart(){this.startingWidth=this.elementToResize.offsetWidth,this.dispatchResizeEvent(!0,!1,this.startingWidth)}onResizeEnd(e){return this.onResizing(e,!0)}onResizing(e,t=!1){let n=Math.max(this.minWidth,Math.floor(this.startingWidth-e*(this.inverted?-1:1)));null!=this.maxWidth&&(n=Math.min(this.maxWidth,n)),this.elementToResize.style.width=`${n}px`,this.dispatchResizeEvent(!1,t,n)}setInverted(e){this.inverted=e}setMaxWidth(e){this.maxWidth=e}setMinWidth(e){this.minWidth=null!=e?e:100}}q0([P("horizontalResizeService")],bC.prototype,"horizontalResizeService",void 0),q0([Se],bC.prototype,"postConstruct",null);var _C=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class $c extends Ne{constructor(e){super(),this.toolPanelDef=e}getToolPanelId(){return this.toolPanelDef.id}postConstruct(){const e=this.createTemplate();this.setTemplate(e),this.setLabel(),this.setIcon(),this.addManagedListener(this.eToggleButton,"click",this.onButtonPressed.bind(this)),this.eToggleButton.setAttribute("id",`ag-${this.getCompId()}-button`)}createTemplate(){return'<div class="ag-side-button" role="presentation">\n                <button type="button" ref="eToggleButton" tabindex="-1" role="tab" aria-expanded="false" class="ag-button ag-side-button-button">\n                    <div ref="eIconWrapper" class="ag-side-button-icon-wrapper" aria-hidden="true"></div>\n                    <span ref ="eLabel" class="ag-side-button-label"></span>\n                </button>\n            </div>'}setLabel(){const e=this.localeService.getLocaleTextFunc(),t=this.toolPanelDef,i=e(t.labelKey,t.labelDefault);this.eLabel.innerText=i}setIcon(){this.eIconWrapper.insertAdjacentElement("afterbegin",z.createIconNoSpan(this.toolPanelDef.iconKey,this.gridOptionsService))}onButtonPressed(){this.dispatchEvent({type:$c.EVENT_TOGGLE_BUTTON_CLICKED})}setSelected(e){this.addOrRemoveCssClass("ag-selected",e),z.setAriaExpanded(this.eToggleButton,e)}getButtonElement(){return this.eToggleButton}}$c.EVENT_TOGGLE_BUTTON_CLICKED="toggleButtonClicked",_C([re("eToggleButton")],$c.prototype,"eToggleButton",void 0),_C([re("eIconWrapper")],$c.prototype,"eIconWrapper",void 0),_C([re("eLabel")],$c.prototype,"eLabel",void 0),_C([Se],$c.prototype,"postConstruct",null);var wC=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class ia extends Ne{constructor(){super(ia.TEMPLATE),this.buttonComps=[]}postConstruct(){this.addManagedListener(this.getFocusableElement(),"keydown",this.handleKeyDown.bind(this))}handleKeyDown(e){if(e.key!==ge.TAB||!e.shiftKey)return;const t=z.last(this.columnModel.getAllDisplayedColumns());this.focusService.focusGridView(t,!0)&&e.preventDefault()}setActiveButton(e){this.buttonComps.forEach(t=>{t.setSelected(e===t.getToolPanelId())})}addButtonComp(e){const t=this.createBean(new $c(e));return this.buttonComps.push(t),this.appendChild(t),t.addEventListener($c.EVENT_TOGGLE_BUTTON_CLICKED,()=>{this.dispatchEvent({type:ia.EVENT_SIDE_BAR_BUTTON_CLICKED,toolPanelId:e.id})}),t}clearButtons(){this.buttonComps=this.destroyBeans(this.buttonComps),z.clearElement(this.getGui())}}ia.EVENT_SIDE_BAR_BUTTON_CLICKED="sideBarButtonClicked",ia.TEMPLATE='<div class="ag-side-buttons" role="tablist"></div>',wC([P("focusService")],ia.prototype,"focusService",void 0),wC([P("columnModel")],ia.prototype,"columnModel",void 0),wC([Se],ia.prototype,"postConstruct",null),wC([Js],ia.prototype,"clearButtons",null);class or{static parse(e){if(e){if(!0===e)return{toolPanels:[or.DEFAULT_COLUMN_COMP,or.DEFAULT_FILTER_COMP],defaultToolPanel:"columns"};if("string"==typeof e)return or.parse([e]);if(Array.isArray(e)){const i=[];return e.forEach(n=>{const s=or.DEFAULT_BY_KEY[n];s?i.push(s):console.warn(`AG Grid: the key ${n} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(or.DEFAULT_BY_KEY).join(",")}`)}),0===i.length?void 0:{toolPanels:i,defaultToolPanel:i[0].id}}return{toolPanels:or.parseComponents(e.toolPanels),defaultToolPanel:e.defaultToolPanel,hiddenByDefault:e.hiddenByDefault,position:e.position}}}static parseComponents(e){const t=[];return e&&e.forEach(i=>{let n=null;if("string"==typeof i){const s=or.DEFAULT_BY_KEY[i];if(!s)return void console.warn(`AG Grid: the key ${i} is not a valid key for specifying a tool panel, valid keys are: ${Object.keys(or.DEFAULT_BY_KEY).join(",")}`);n=s}else n=i;t.push(n)}),t}}or.DEFAULT_COLUMN_COMP={id:"columns",labelDefault:"Columns",labelKey:"columns",iconKey:"columns",toolPanel:"agColumnsToolPanel"},or.DEFAULT_FILTER_COMP={id:"filters",labelDefault:"Filters",labelKey:"filters",iconKey:"filter",toolPanel:"agFiltersToolPanel"},or.DEFAULT_BY_KEY={columns:or.DEFAULT_COLUMN_COMP,filters:or.DEFAULT_FILTER_COMP};var X0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class cp extends Ne{constructor(){super(cp.TEMPLATE)}setupResize(){const e=this.getGui(),t=this.resizeBar=this.createManagedBean(new bC);e.setAttribute("id",`ag-${this.getCompId()}`),t.setElementToResize(e),this.appendChild(t)}getToolPanelId(){return this.toolPanelId}setToolPanelDef(e,t){const{id:i,minWidth:n,maxWidth:s,width:o}=e;this.toolPanelId=i,this.width=o;const a=this.userComponentFactory.getToolPanelCompDetails(e,t),c=a.newAgStackInstance();this.params=a.params,null!=c?(c.then(this.setToolPanelComponent.bind(this)),null!=n&&this.resizeBar.setMinWidth(n),null!=s&&this.resizeBar.setMaxWidth(s)):console.warn(`AG Grid: error processing tool panel component ${i}. You need to specify 'toolPanel'`)}setToolPanelComponent(e){this.toolPanelCompInstance=e,this.appendChild(e.getGui()),this.addDestroyFunc(()=>{this.destroyBean(e)}),this.width&&(this.getGui().style.width=`${this.width}px`)}getToolPanelInstance(){return this.toolPanelCompInstance}setResizerSizerSide(e){const t=this.gridOptionsService.get("enableRtl"),i="left"===e;this.resizeBar.setInverted(t?i:!i)}refresh(){this.toolPanelCompInstance.refresh(this.params)}}cp.TEMPLATE='<div class="ag-tool-panel-wrapper" role="tabpanel"/>',X0([P("userComponentFactory")],cp.prototype,"userComponentFactory",void 0),X0([Se],cp.prototype,"setupResize",null);var ss=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Qr extends Ne{constructor(){super(Qr.TEMPLATE),this.toolPanelWrappers=[]}postConstruct(){var e;this.sideBarButtonsComp.addEventListener(ia.EVENT_SIDE_BAR_BUTTON_CLICKED,this.onToolPanelButtonClicked.bind(this));const{sideBar:t}=null!==(e=this.gridOptionsService.get("initialState"))&&void 0!==e?e:{};this.setSideBarDef({sideBarDef:or.parse(this.gridOptionsService.get("sideBar")),sideBarState:t}),this.addManagedPropertyListener("sideBar",this.onSideBarUpdated.bind(this)),this.sideBarService.registerSideBarComp(this),this.createManagedBean(new ir(this.getFocusableElement(),{onTabKeyDown:this.onTabKeyDown.bind(this),handleKeyDown:this.handleKeyDown.bind(this)}))}onTabKeyDown(e){if(e.defaultPrevented)return;const{focusService:t,sideBarButtonsComp:i}=this,n=this.getGui(),s=i.getGui(),a=this.gridOptionsService.getDocument().activeElement,c=n.querySelector(".ag-tool-panel-wrapper:not(.ag-hidden)"),u=e.target;if(!c)return;if(s.contains(a))return void(t.focusInto(c,e.shiftKey)&&e.preventDefault());if(!e.shiftKey)return;let p=null;c.contains(a)?p=this.focusService.findNextFocusableElement(c,void 0,!0):t.isTargetUnderManagedComponent(c,u)&&e.shiftKey&&(p=this.focusService.findFocusableElementBeforeTabGuard(c,u)),p||(p=s.querySelector(".ag-selected button")),p&&p!==e.target&&(e.preventDefault(),p.focus())}handleKeyDown(e){const t=this.gridOptionsService.getDocument();if(!this.sideBarButtonsComp.getGui().contains(t.activeElement))return;const i=this.sideBarButtonsComp.getGui(),n=Array.prototype.slice.call(i.querySelectorAll(".ag-side-button")),s=t.activeElement,o=n.findIndex(u=>u.contains(s));let a=null;switch(e.key){case ge.LEFT:case ge.UP:a=Math.max(0,o-1);break;case ge.RIGHT:case ge.DOWN:a=Math.min(o+1,n.length-1)}if(null===a)return;const c=n[a].querySelector("button");c&&(c.focus(),e.preventDefault())}onToolPanelButtonClicked(e){const t=e.toolPanelId;this.openedItem()===t?this.openToolPanel(void 0,"sideBarButtonClicked"):this.openToolPanel(t,"sideBarButtonClicked")}clearDownUi(){this.sideBarButtonsComp.clearButtons(),this.destroyToolPanelWrappers()}setSideBarDef({sideBarDef:e,sideBarState:t,existingToolPanelWrappers:i}){if(this.setDisplayed(!1),this.sideBar=e,this.sideBar&&this.sideBar.toolPanels){if(this.createToolPanelsAndSideButtons(this.sideBar.toolPanels,t,i),!this.toolPanelWrappers.length)return;const s=t?t.visible:!this.sideBar.hiddenByDefault;if(this.setDisplayed(s),this.setSideBarPosition(t?t.position:this.sideBar.position),s)if(t){const{openToolPanel:o}=t;o&&this.openToolPanel(o,"sideBarInitializing")}else this.openToolPanel(this.sideBar.defaultToolPanel,"sideBarInitializing")}}getDef(){return this.sideBar}setSideBarPosition(e){e||(e="right"),this.position=e;const t="left"===e,i=t?"right":"left";return this.addOrRemoveCssClass("ag-side-bar-left",t),this.addOrRemoveCssClass("ag-side-bar-right",!t),this.toolPanelWrappers.forEach(n=>{n.setResizerSizerSide(i)}),this.eventService.dispatchEvent({type:G.EVENT_SIDE_BAR_UPDATED}),this}setDisplayed(e,t){super.setDisplayed(e,t),this.eventService.dispatchEvent({type:G.EVENT_SIDE_BAR_UPDATED})}getState(){const e={};return this.toolPanelWrappers.forEach(t=>{var i,n;e[t.getToolPanelId()]=null===(n=null===(i=t.getToolPanelInstance())||void 0===i?void 0:i.getState)||void 0===n?void 0:n.call(i)}),{visible:this.isDisplayed(),position:this.position,openToolPanel:this.openedItem(),toolPanels:e}}createToolPanelsAndSideButtons(e,t,i){var n;for(const s of e)this.createToolPanelAndSideButton(s,null===(n=t?.toolPanels)||void 0===n?void 0:n[s.id],i?.[s.id])}validateDef(e){if(null==e.id)return console.warn("AG Grid: please review all your toolPanel components, it seems like at least one of them doesn't have an id"),!1;if("agColumnsToolPanel"===e.toolPanel&&!yt.__assertRegistered(ze.ColumnsToolPanelModule,"Column Tool Panel",this.context.getGridId()))return!1;if("agFiltersToolPanel"===e.toolPanel){if(!yt.__assertRegistered(ze.FiltersToolPanelModule,"Filters Tool Panel",this.context.getGridId()))return!1;if(this.filterManager.isAdvancedFilterEnabled())return z.warnOnce("Advanced Filter does not work with Filters Tool Panel. Filters Tool Panel has been disabled."),!1}return!0}createToolPanelAndSideButton(e,t,i){if(!this.validateDef(e))return;const n=this.sideBarButtonsComp.addButtonComp(e);let s;i?s=i:(s=this.getContext().createBean(new cp),s.setToolPanelDef(e,{initialState:t,onStateUpdated:()=>this.eventService.dispatchEvent({type:G.EVENT_SIDE_BAR_UPDATED})})),s.setDisplayed(!1);const o=s.getGui();this.appendChild(o),this.toolPanelWrappers.push(s),z.setAriaControls(n.getButtonElement(),o)}refresh(){this.toolPanelWrappers.forEach(e=>e.refresh())}openToolPanel(e,t="api"){const i=this.openedItem();i!==e&&(this.toolPanelWrappers.forEach(o=>{const a=e===o.getToolPanelId();o.setDisplayed(a)}),i!==this.openedItem()&&(this.sideBarButtonsComp.setActiveButton(e),this.raiseToolPanelVisibleEvent(e,i??void 0,t)))}getToolPanelInstance(e){const t=this.toolPanelWrappers.filter(i=>i.getToolPanelId()===e)[0];if(t)return t.getToolPanelInstance();console.warn(`AG Grid: unable to lookup Tool Panel as invalid key supplied: ${e}`)}raiseToolPanelVisibleEvent(e,t,i){const n=!!e&&!!t;t&&this.eventService.dispatchEvent({type:G.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:i,key:t,visible:!1,switchingToolPanel:n}),e&&this.eventService.dispatchEvent({type:G.EVENT_TOOL_PANEL_VISIBLE_CHANGED,source:i,key:e,visible:!0,switchingToolPanel:n})}close(e="api"){this.openToolPanel(void 0,e)}isToolPanelShowing(){return!!this.openedItem()}openedItem(){let e=null;return this.toolPanelWrappers.forEach(t=>{t.isDisplayed()&&(e=t.getToolPanelId())}),e}onSideBarUpdated(){var e;const t=or.parse(this.gridOptionsService.get("sideBar"));let i={};t&&this.sideBar&&(null===(e=t.toolPanels)||void 0===e||e.forEach(n=>{var s,o;const{id:a}=n;if(!a)return;const c=null===(s=this.sideBar.toolPanels)||void 0===s?void 0:s.find(m=>m.id===a);if(!c||n.toolPanel!==c.toolPanel)return;const u=this.toolPanelWrappers.find(m=>m.getToolPanelId()===a);if(!u)return;const p=this.gridOptionsService.addGridCommonParams(Object.assign(Object.assign({},null!==(o=n.toolPanelParams)&&void 0!==o?o:{}),{onStateUpdated:()=>this.eventService.dispatchEvent({type:G.EVENT_SIDE_BAR_UPDATED})}));!0===u.getToolPanelInstance().refresh(p)&&(this.toolPanelWrappers=this.toolPanelWrappers.filter(m=>m!==u),z.removeFromParent(u.getGui()),i[a]=u)})),this.clearDownUi(),this.setSideBarDef({sideBarDef:t,existingToolPanelWrappers:i})}destroyToolPanelWrappers(){this.toolPanelWrappers.forEach(e=>{z.removeFromParent(e.getGui()),this.destroyBean(e)}),this.toolPanelWrappers.length=0}destroy(){this.destroyToolPanelWrappers(),super.destroy()}}Qr.TEMPLATE='<div class="ag-side-bar ag-unselectable">\n            <ag-side-bar-buttons ref="sideBarButtons"></ag-side-bar-buttons>\n        </div>',ss([P("focusService")],Qr.prototype,"focusService",void 0),ss([P("filterManager")],Qr.prototype,"filterManager",void 0),ss([P("sideBarService")],Qr.prototype,"sideBarService",void 0),ss([re("sideBarButtons")],Qr.prototype,"sideBarButtonsComp",void 0),ss([Se],Qr.prototype,"postConstruct",null);var hO=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Jb=class extends Ee{constructor(){super(...arguments),this.isColGroupDef=e=>e&&typeof e.children<"u",this.getId=e=>this.isColGroupDef(e)?e.groupId:e.colId}createColumnTree(e){const t=[],i=(s,o)=>{if(this.isColGroupDef(s)){const a=s,u=new Wt(a,typeof a.groupId<"u"?a.groupId:a.headerName,!1,o),p=[];return a.children.forEach(g=>{const m=i(g,o+1);m&&p.push(m)}),u.setChildren(p),u}{const a=s,u=this.columnModel.getPrimaryColumn(a.colId?a.colId:a.field);return u||t.push(a),u}},n=[];return e.forEach(s=>{const o=i(s,0);o&&n.push(o)}),t.length>0&&console.warn("AG Grid: unable to find grid columns for the supplied colDef(s):",t),n}syncLayoutWithGrid(e){const t=this.getLeafPathTrees();e(this.mergeLeafPathTrees(t))}getLeafPathTrees(){const e=(n,s)=>{let o;if(n instanceof Wt)if(n.isPadding())o=s;else{const c=Object.assign({},n.getColGroupDef());c.groupId=n.getGroupId(),c.children=[s],o=c}else{const c=Object.assign({},n.getColDef());c.colId=n.getColId(),o=c}const a=n.getOriginalParent();return a?e(a,o):o};return this.columnModel.getAllGridColumns().filter(n=>{const s=n.getColDef();return n.isPrimary()&&!s.showRowGroup}).map(n=>e(n,n.getColDef()))}mergeLeafPathTrees(e){const t=(s,o)=>this.isColGroupDef(s)&&this.isColGroupDef(o)&&this.getId(s)===this.getId(o),i=(s,o)=>{if(!this.isColGroupDef(o))return s;const a=s,c=o;return c.children&&c.groupId&&this.addChildrenToGroup(a,c.groupId,c.children[0])||c.children.forEach(u=>i(a,u)),a},n=[];for(let s=1;s<=e.length;s++){const o=e[s-1],a=e[s];t(o,a)?e[s]=i(o,a):n.push(o)}return n}addChildrenToGroup(e,t,i){if(!this.isColGroupDef(e))return!0;const s=e,o=i;if(((a,c)=>{const u=a.children.map(this.getId),p=z.includes(u,this.getId(c)),g=z.last(a.children),m=g&&this.getId(g)!==this.getId(c);return p&&m})(s,o))return s.children.push(o),!0;if(s.groupId===t){const a=s.children.map(this.getId);if(!z.includes(a,this.getId(o)))return s.children.push(o),!0}return s.children.forEach(a=>this.addChildrenToGroup(a,t,i)),!1}};hO([P("columnModel")],Jb.prototype,"columnModel",void 0),Jb=hO([He("toolPanelColDefService")],Jb);let Qb=class extends Ee{registerSideBarComp(e){this.sideBarComp=e}getSideBarComp(){return this.sideBarComp}};Qb=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He("sideBarService")],Qb);const e_={version:"31.1.1",moduleName:ze.SideBarModule,beans:[Jb,Qb],agStackComponents:[{componentName:"AgHorizontalResize",componentClass:bC},{componentName:"AgSideBar",componentClass:Qr},{componentName:"AgSideBarButtons",componentClass:ia}],dependantModules:[uu]};var Kc=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let dp=class{selectAllChildren(e,t,i){const n=this.extractAllLeafColumns(e);this.setAllColumns(n,t,i)}setColumn(e,t,i){this.setAllColumns([e],t,i)}setAllColumns(e,t,i){this.columnModel.isPivotMode()?this.setAllPivot(e,t,i):this.setAllVisible(e,t,i)}extractAllLeafColumns(e){const t=[],i=n=>{n.forEach(s=>{!s.isPassesFilter()||(s.isGroup()?i(s.getChildren()):t.push(s.getColumn()))})};return i(e),t}setAllVisible(e,t,i){const n=[];e.forEach(s=>{s.getColDef().lockVisible||s.isVisible()!=t&&n.push({colId:s.getId(),hide:!t})}),n.length>0&&this.columnModel.applyColumnState({state:n},i)}setAllPivot(e,t,i){this.gridOptionsService.get("functionsPassive")?this.setAllPivotPassive(e,t):this.setAllPivotActive(e,t,i)}setAllPivotPassive(e,t){const i=this.columnModel.getPivotColumns().slice(),n=this.columnModel.getValueColumns().slice(),s=this.columnModel.getRowGroupColumns().slice();let o=!1,a=!1,c=!1;e.forEach(t?m=>{m.isAnyFunctionActive()||(m.isAllowValue()?(n.push(m),a=!0):m.isAllowRowGroup()?(s.push(m),o=!0):m.isAllowPivot()&&(i.push(m),c=!0))}:m=>{!m.isAnyFunctionActive()||(i.indexOf(m)>=0&&(z.removeFromArray(i,m),o=!0),n.indexOf(m)>=0&&(z.removeFromArray(n,m),a=!0),s.indexOf(m)>=0&&(z.removeFromArray(s,m),c=!0))}),o&&this.eventService.dispatchEvent({type:G.EVENT_COLUMN_PIVOT_CHANGE_REQUEST,columns:i}),c&&this.eventService.dispatchEvent({type:G.EVENT_COLUMN_ROW_GROUP_CHANGE_REQUEST,columns:s}),a&&this.eventService.dispatchEvent({type:G.EVENT_COLUMN_VALUE_CHANGE_REQUEST,columns:s})}setAllPivotActive(e,t,i){const n=[];e.forEach(t?c=>{if(!c.isAnyFunctionActive())if(c.isAllowValue()){const u="string"==typeof c.getAggFunc()?c.getAggFunc():this.aggFuncService.getDefaultAggFunc(c);n.push({colId:c.getId(),aggFunc:u})}else c.isAllowRowGroup()?n.push({colId:c.getId(),rowGroup:!0}):c.isAllowPivot()&&n.push({colId:c.getId(),pivot:!0})}:c=>{(c.isPivotActive()||c.isRowGroupActive()||c.isValueActive())&&n.push({colId:c.getId(),pivot:!1,rowGroup:!1,aggFunc:null})}),n.length>0&&this.columnModel.applyColumnState({state:n},i)}updateColumns(e){const{columns:t,visibleState:i,pivotState:n,eventType:s}=e,o=t.map(a=>{const c=a.getColId();if(this.columnModel.isPivotMode()){const u=n?.[c];return{colId:c,pivot:u?.pivot,rowGroup:u?.rowGroup,aggFunc:u?.aggFunc}}return{colId:c,hide:!i?.[c]}});this.columnModel.applyColumnState({state:o},s)}createPivotState(e){return{pivot:e.isPivotActive(),rowGroup:e.isRowGroupActive(),aggFunc:e.isValueActive()?e.getAggFunc():void 0}}};Kc([P("aggFuncService")],dp.prototype,"aggFuncService",void 0),Kc([P("columnModel")],dp.prototype,"columnModel",void 0),Kc([P("gridOptionsService")],dp.prototype,"gridOptionsService",void 0),Kc([P("eventService")],dp.prototype,"eventService",void 0),dp=Kc([He("modelItemUtils")],dp);const mI={version:"31.1.1",moduleName:ze.ColumnsToolPanelModule,beans:[dp],agStackComponents:[{componentName:"AgPrimaryColsHeader",componentClass:ta},{componentName:"AgPrimaryColsList",componentClass:hu},{componentName:"AgPrimaryCols",componentClass:jl}],userComponents:[{componentName:"agColumnsToolPanel",componentClass:uO}],dependantModules:[uu,dO,e_]};var EC=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Pg=class extends Ee{createColumnSelectPanel(e,t,i,n){var s,o;const a=e.createManagedBean(new jl),c=null!==(o=null!==(s=n??t?.getColDef().columnChooserParams)&&void 0!==s?s:t?.getColDef().columnsMenuParams)&&void 0!==o?o:{},{contractColumnSelection:u,suppressColumnExpandAll:p,suppressColumnFilter:g,suppressColumnSelectAll:m,suppressSyncLayoutWithGrid:y,columnLayout:b}=c;return a.init(!!i,this.gridOptionsService.addGridCommonParams({suppressColumnMove:!1,suppressValues:!1,suppressPivots:!1,suppressRowGroups:!1,suppressPivotMode:!1,contractColumnSelection:!!u,suppressColumnExpandAll:!!p,suppressColumnFilter:!!g,suppressColumnSelectAll:!!m,suppressSyncLayoutWithGrid:!!b||!!y,onStateUpdated:()=>{}}),"columnMenu"),b&&a.setColumnLayout(b),a}showColumnChooser({column:e,chooserParams:t,eventSource:i}){this.hideActiveColumnChooser();const n=this.createColumnSelectPanel(this,e,!0,t),s=this.localeService.getLocaleTextFunc(),o=this.columnModel.getAllDisplayedColumns().indexOf(e),a=e?this.focusService.getFocusedHeader():null;this.activeColumnChooserDialog=this.createBean(new ng({title:s("chooseColumns","Choose Columns"),component:n,width:300,height:300,resizable:!0,movable:!0,centered:!0,closable:!0,afterGuiAttached:()=>{var c;null===(c=this.focusService.findNextFocusableElement(n.getGui()))||void 0===c||c.focus(),this.dispatchVisibleChangedEvent(!0,e)},closedCallback:c=>{const u=this.activeColumnChooser.getGui();this.destroyBean(this.activeColumnChooser),this.activeColumnChooser=void 0,this.activeColumnChooserDialog=void 0,this.dispatchVisibleChangedEvent(!1,e),e&&this.menuUtils.restoreFocusOnClose({column:e,headerPosition:a,columnIndex:o,eventSource:i},u,c,!0)}})),this.activeColumnChooser=n}hideActiveColumnChooser(){this.activeColumnChooserDialog&&this.destroyBean(this.activeColumnChooserDialog)}dispatchVisibleChangedEvent(e,t){this.eventService.dispatchEvent({type:G.EVENT_COLUMN_MENU_VISIBLE_CHANGED,visible:e,switchingTab:!1,key:"columnChooser",column:t??null})}};EC([P("focusService")],Pg.prototype,"focusService",void 0),EC([P("menuUtils")],Pg.prototype,"menuUtils",void 0),EC([P("columnModel")],Pg.prototype,"columnModel",void 0),Pg=EC([He("columnChooserFactory")],Pg);var gu,Ig=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let qa=gu=class extends Ee{createMenu(e,t,i){const n=e.createManagedBean(new Yh(0,{column:t??null,node:null,value:null})),s=this.getMenuItems(t),o=this.menuItemMapper.mapWithStockItems(s,t??null,i);return n.addMenuItems(o),n}getMenuItems(e){const t=this.getDefaultMenuOptions(e);let i;const n=e?.getColDef().mainMenuItems;if(Array.isArray(n))i=n;else if("function"==typeof n)i=n(this.gridOptionsService.addGridCommonParams({column:e,defaultItems:t}));else{const s=this.gridOptionsService.getCallback("getMainMenuItems");i=s&&e?s({column:e,defaultItems:t}):t}return z.removeRepeatsFromArray(i,gu.MENU_ITEM_SEPARATOR),i}getDefaultMenuOptions(e){const t=[],i=this.menuService.isLegacyMenuEnabled();if(!e)return i||t.push("columnChooser"),t.push("resetColumns"),t;const n=!e.getColDef().lockPinned,s=this.columnModel.getRowGroupColumns().length,o=s>0,a=e.isAllowValue(),c=e.isAllowRowGroup(),u=e.isPrimary(),p=this.columnModel.isPivotMode(),g="clientSide"===this.rowModel.getType(),m=this.gridOptionsService.get("treeData"),y=u&&o&&a||!u;if(!i&&e.isSortable()){const E=e.getSort();"asc"!==E&&t.push("sortAscending"),"desc"!==E&&t.push("sortDescending"),E&&t.push("sortUnSort"),t.push(gu.MENU_ITEM_SEPARATOR)}return this.menuService.isFilterMenuItemEnabled(e)&&(t.push("columnFilter"),t.push(gu.MENU_ITEM_SEPARATOR)),n&&t.push("pinSubMenu"),y&&t.push("valueAggSubMenu"),(n||y)&&t.push(gu.MENU_ITEM_SEPARATOR),t.push("autoSizeThis"),t.push("autoSizeAll"),t.push(gu.MENU_ITEM_SEPARATOR),e.getColDef().showRowGroup?t.push("rowUnGroup"):c&&e.isPrimary()&&(e.isRowGroupActive()?this.columnModel.isColumnGroupingLocked(e)||t.push("rowUnGroup"):t.push("rowGroup")),t.push(gu.MENU_ITEM_SEPARATOR),i||t.push("columnChooser"),t.push("resetColumns"),g&&(m||s>(p?1:0))&&(t.push("expandAll"),t.push("contractAll")),t}};qa.MENU_ITEM_SEPARATOR="separator",Ig([P("menuItemMapper")],qa.prototype,"menuItemMapper",void 0),Ig([P("columnModel")],qa.prototype,"columnModel",void 0),Ig([P("rowModel")],qa.prototype,"rowModel",void 0),Ig([P("filterManager")],qa.prototype,"filterManager",void 0),Ig([P("menuService")],qa.prototype,"menuService",void 0),qa=gu=Ig([He("columnMenuFactory")],qa);var DC=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let up=class extends Ee{restoreFocusOnClose(e,t,i,n){const{eventSource:s}=e,o=i instanceof KeyboardEvent;if(!n&&!o||!s)return;const a=this.gridOptionsService.getDocument();!t.contains(a.activeElement)&&a.activeElement!==a.body||this.focusHeaderCell(e)}closePopupAndRestoreFocusOnSelect(e,t,i){let n;i&&i.event&&i.event instanceof KeyboardEvent&&(n=i.event),e(n&&{keyboardEvent:n});const s=this.focusService.getFocusedCell(),o=this.gridOptionsService.getDocument();if(o.activeElement===o.body)if(s){const{rowIndex:a,rowPinned:c,column:u}=s;this.focusService.setFocusedCell({rowIndex:a,column:u,rowPinned:c,forceBrowserFocus:!0,preventScrollOnBrowserFocus:!0})}else this.focusHeaderCell(t)}onContextMenu(e,t,i){!this.gridOptionsService.get("allowContextMenuWithControlKey")&&e&&(e.ctrlKey||e.metaKey)||(e&&this.blockMiddleClickScrollsIfNeeded(e),this.gridOptionsService.get("suppressContextMenu"))||i(e??t.touches[0])&&(e??t).preventDefault()}focusHeaderCell(e){const{column:t,columnIndex:i,headerPosition:n,eventSource:s}=e;if(this.columnModel.getAllDisplayedColumns().some(a=>a===t)&&s&&z.isVisible(s)){const a=this.focusService.findTabbableParent(s);a&&(t&&this.headerNavigationService.scrollToColumn(t),a.focus())}else if(n&&-1!==i){const a=this.columnModel.getAllDisplayedColumns(),c=a[i]||z.last(a);c&&this.focusService.focusHeaderPosition({headerPosition:{headerRowIndex:n.headerRowIndex,column:c}})}}blockMiddleClickScrollsIfNeeded(e){const{gridOptionsService:t}=this,{which:i}=e;t.get("suppressMiddleClickScrolls")&&2===i&&e.preventDefault()}};DC([P("focusService")],up.prototype,"focusService",void 0),DC([P("headerNavigationService")],up.prototype,"headerNavigationService",void 0),DC([P("columnModel")],up.prototype,"columnModel",void 0),up=DC([He("menuUtils")],up);const t_={version:"31.1.1",moduleName:ze.MenuModule,beans:[ea,Wc,wo,Bb,Pg,qa,up],dependantModules:[uu]};var hp=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s},zl=(()=>(function(r){r[r.EXPANDED=0]="EXPANDED",r[r.COLLAPSED=1]="COLLAPSED",r[r.INDETERMINATE=2]="INDETERMINATE"}(zl||(zl={})),zl))();class pp extends Ne{preConstruct(){this.setTemplate('<div class="ag-filter-toolpanel-search" role="presentation">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <ag-input-text-field ref="eFilterTextField" class="ag-filter-toolpanel-search-input"></ag-input-text-field>\n            </div>')}postConstruct(){const e=this.localeService.getLocaleTextFunc();this.eFilterTextField.setAutoComplete(!1).setInputAriaLabel(e("ariaFilterColumnsInput","Filter Columns Input")).onValueChange(this.onSearchTextChanged.bind(this)),this.createExpandIcons(),this.setExpandState(zl.EXPANDED),this.addManagedListener(this.eExpand,"click",this.onExpandClicked.bind(this)),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,this.showOrHideOptions.bind(this))}init(e){this.params=e,this.columnModel.isReady()&&this.showOrHideOptions()}createExpandIcons(){this.eExpand.appendChild(this.eExpandChecked=z.createIconNoSpan("columnSelectOpen",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandUnchecked=z.createIconNoSpan("columnSelectClosed",this.gridOptionsService)),this.eExpand.appendChild(this.eExpandIndeterminate=z.createIconNoSpan("columnSelectIndeterminate",this.gridOptionsService))}showOrHideOptions(){const e=!this.params.suppressFilterSearch,t=!this.params.suppressExpandAll,i=this.localeService.getLocaleTextFunc();this.eFilterTextField.setInputPlaceholder(i("searchOoo","Search..."));const s=this.columnModel.getAllGridColumns().some(o=>o.getOriginalParent()&&o.isFilterAllowed());z.setDisplayed(this.eFilterTextField.getGui(),e),z.setDisplayed(this.eExpand,t&&s)}onSearchTextChanged(){this.onSearchTextChangedDebounced||(this.onSearchTextChangedDebounced=z.debounce(()=>{this.dispatchEvent({type:"searchChanged",searchText:this.eFilterTextField.getValue()})},300)),this.onSearchTextChangedDebounced()}onExpandClicked(){this.dispatchEvent(this.currentExpandState===zl.EXPANDED?{type:"collapseAll"}:{type:"expandAll"})}setExpandState(e){this.currentExpandState=e,z.setDisplayed(this.eExpandChecked,this.currentExpandState===zl.EXPANDED),z.setDisplayed(this.eExpandUnchecked,this.currentExpandState===zl.COLLAPSED),z.setDisplayed(this.eExpandIndeterminate,this.currentExpandState===zl.INDETERMINATE)}}hp([P("columnModel")],pp.prototype,"columnModel",void 0),hp([re("eExpand")],pp.prototype,"eExpand",void 0),hp([re("eFilterTextField")],pp.prototype,"eFilterTextField",void 0),hp([vf],pp.prototype,"preConstruct",null),hp([Se],pp.prototype,"postConstruct",null);var mu=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class eo extends Ne{constructor(e,t){super(eo.TEMPLATE),this.expandedCallback=t,this.expanded=!1,this.hideHeader=e}postConstruct(){this.eExpandChecked=z.createIconNoSpan("columnSelectOpen",this.gridOptionsService),this.eExpandUnchecked=z.createIconNoSpan("columnSelectClosed",this.gridOptionsService),this.eExpand.appendChild(this.eExpandChecked),this.eExpand.appendChild(this.eExpandUnchecked)}setColumn(e){this.column=e,this.eFilterName.innerText=this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)||"",this.addManagedListener(this.eFilterToolPanelHeader,"click",this.toggleExpanded.bind(this)),this.addManagedListener(this.eFilterToolPanelHeader,"keydown",t=>{(t.key===ge.ENTER||t.key===ge.SPACE)&&(t.preventDefault(),this.toggleExpanded())}),this.addManagedListener(this.eventService,G.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this)),this.addInIcon("filter",this.eFilterIcon,this.column),z.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),z.setDisplayed(this.eExpandChecked,!1),this.hideHeader?(z.setDisplayed(this.eFilterToolPanelHeader,!1),this.eFilterToolPanelHeader.removeAttribute("tabindex")):this.eFilterToolPanelHeader.setAttribute("tabindex","0"),this.addManagedListener(this.column,ot.EVENT_FILTER_CHANGED,this.onFilterChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_FILTER_DESTROYED,this.onFilterDestroyed.bind(this))}getColumn(){return this.column}getColumnFilterName(){return this.columnModel.getDisplayNameForColumn(this.column,"filterToolPanel",!1)}addCssClassToTitleBar(e){this.eFilterToolPanelHeader.classList.add(e)}addInIcon(e,t,i){if(null==t)return;const n=z.createIconNoSpan(e,this.gridOptionsService,i);t.appendChild(n)}isFilterActive(){return this.filterManager.isFilterActive(this.column)}onFilterChanged(){z.setDisplayed(this.eFilterIcon,this.isFilterActive(),{skipAriaHidden:!0}),this.dispatchEvent({type:ot.EVENT_FILTER_CHANGED})}onFilterDestroyed(e){this.expanded&&("api"===e.source||"paramsUpdated"===e.source)&&e.column.getId()===this.column.getId()&&this.columnModel.getPrimaryColumn(this.column)&&(this.removeFilterElement(),this.addFilterElement(!0))}toggleExpanded(){this.expanded?this.collapse():this.expand()}expand(){this.expanded||(this.expanded=!0,z.setAriaExpanded(this.eFilterToolPanelHeader,!0),z.setDisplayed(this.eExpandChecked,!0),z.setDisplayed(this.eExpandUnchecked,!1),this.addFilterElement(),this.expandedCallback())}addFilterElement(e){const t=z.loadTemplate('<div class="ag-filter-toolpanel-instance-filter"></div>'),i=this.filterManager.getOrCreateFilterWrapper(this.column,"TOOLBAR");if(!i)return;const{filterPromise:n,guiPromise:s}=i;n?.then(o=>{this.underlyingFilter=o,o&&s.then(a=>{a&&t.appendChild(a),this.agFilterToolPanelBody.appendChild(t),o.afterGuiAttached&&o.afterGuiAttached({container:"toolPanel",suppressFocus:e})})})}collapse(){var e,t;!this.expanded||(this.expanded=!1,z.setAriaExpanded(this.eFilterToolPanelHeader,!1),this.removeFilterElement(),z.setDisplayed(this.eExpandChecked,!1),z.setDisplayed(this.eExpandUnchecked,!0),null===(t=null===(e=this.underlyingFilter)||void 0===e?void 0:e.afterGuiDetached)||void 0===t||t.call(e),this.expandedCallback())}removeFilterElement(){z.clearElement(this.agFilterToolPanelBody)}isExpanded(){return this.expanded}refreshFilter(e){var t;if(!this.expanded)return;const i=this.underlyingFilter;!i||(e?"function"==typeof i.refreshVirtualList&&i.refreshVirtualList():null===(t=i.afterGuiDetached)||void 0===t||t.call(i))}onFilterOpened(e){"COLUMN_MENU"===e.source&&e.column===this.column&&(!this.expanded||this.collapse())}}eo.TEMPLATE='\n        <div class="ag-filter-toolpanel-instance">\n            <div class="ag-filter-toolpanel-header ag-filter-toolpanel-instance-header" ref="eFilterToolPanelHeader" role="button" aria-expanded="false">\n                <div ref="eExpand" class="ag-filter-toolpanel-expand"></div>\n                <span ref="eFilterName" class="ag-header-cell-text"></span>\n                <span ref="eFilterIcon" class="ag-header-icon ag-filter-icon ag-filter-toolpanel-instance-header-icon" aria-hidden="true"></span>\n            </div>\n            <div class="ag-filter-toolpanel-instance-body ag-filter" ref="agFilterToolPanelBody"></div>\n        </div>',mu([re("eFilterToolPanelHeader")],eo.prototype,"eFilterToolPanelHeader",void 0),mu([re("eFilterName")],eo.prototype,"eFilterName",void 0),mu([re("agFilterToolPanelBody")],eo.prototype,"agFilterToolPanelBody",void 0),mu([re("eFilterIcon")],eo.prototype,"eFilterIcon",void 0),mu([re("eExpand")],eo.prototype,"eExpand",void 0),mu([P("filterManager")],eo.prototype,"filterManager",void 0),mu([P("columnModel")],eo.prototype,"columnModel",void 0),mu([Se],eo.prototype,"postConstruct",null);var Yc=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class ar extends Ne{constructor(e,t,i,n,s){super(),this.columnGroup=e,this.childFilterComps=t,this.depth=n,this.expandedCallback=i,this.showingColumn=s}preConstruct(){this.setTemplate(ar.TEMPLATE,{filterGroupComp:{cssIdentifier:"filter-toolpanel",direction:"vertical"}})}init(){this.setGroupTitle(),this.filterGroupComp.setAlignItems("stretch"),this.filterGroupComp.addCssClass(`ag-filter-toolpanel-group-level-${this.depth}`),this.filterGroupComp.addCssClassToTitleBar(`ag-filter-toolpanel-group-level-${this.depth}-header`),this.childFilterComps.forEach(e=>{this.filterGroupComp.addItem(e),e.addCssClassToTitleBar(`ag-filter-toolpanel-group-level-${this.depth+1}-header`)}),this.refreshFilterClass(),this.addExpandCollapseListeners(),this.addFilterChangedListeners(),this.setupTooltip()}setupTooltip(){if(!this.showingColumn)return;const e=()=>{const t=this.columnGroup.getColDef().headerTooltip;this.setTooltip(t)};e(),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,e)}getTooltipParams(){const e=super.getTooltipParams();return e.location="filterToolPanelColumnGroup",e}addCssClassToTitleBar(e){this.filterGroupComp.addCssClassToTitleBar(e)}refreshFilters(e){this.childFilterComps.forEach(t=>{t instanceof ar?t.refreshFilters(e):t.refreshFilter(e)})}isColumnGroup(){return this.columnGroup instanceof Wt}isExpanded(){return this.filterGroupComp.isExpanded()}getChildren(){return this.childFilterComps}getFilterGroupName(){return this.filterGroupName?this.filterGroupName:""}getFilterGroupId(){return this.columnGroup.getId()}hideGroupItem(e,t){this.filterGroupComp.hideItem(e,t)}hideGroup(e){this.setDisplayed(!e)}forEachToolPanelFilterChild(e){this.childFilterComps.forEach(t=>{t instanceof eo&&e(t)})}addExpandCollapseListeners(){const e=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(i=>i.expand()),t=this.isColumnGroup()?()=>this.expandedCallback():()=>this.forEachToolPanelFilterChild(i=>i.collapse());this.addManagedListener(this.filterGroupComp,ln.EVENT_EXPANDED,e),this.addManagedListener(this.filterGroupComp,ln.EVENT_COLLAPSED,t)}getColumns(){return this.columnGroup instanceof Wt?this.columnGroup.getLeafColumns():[this.columnGroup]}addFilterChangedListeners(){this.getColumns().forEach(e=>{this.addManagedListener(e,ot.EVENT_FILTER_CHANGED,()=>this.refreshFilterClass())}),this.columnGroup instanceof Wt||this.addManagedListener(this.eventService,G.EVENT_FILTER_OPENED,this.onFilterOpened.bind(this))}refreshFilterClass(){const e=this.getColumns();this.filterGroupComp.addOrRemoveCssClass("ag-has-filter",e.some(i=>i.isFilterActive()))}onFilterOpened(e){"COLUMN_MENU"===e.source&&e.column===this.columnGroup&&(!this.isExpanded()||this.collapse())}expand(){this.filterGroupComp.toggleGroupExpand(!0)}collapse(){this.filterGroupComp.toggleGroupExpand(!1)}setGroupTitle(){this.filterGroupName=this.columnGroup instanceof Wt?this.getColumnGroupName(this.columnGroup):this.getColumnName(this.columnGroup),this.filterGroupComp.setTitle(this.filterGroupName||"")}getColumnGroupName(e){return this.columnModel.getDisplayNameForProvidedColumnGroup(null,e,"filterToolPanel")}getColumnName(e){return this.columnModel.getDisplayNameForColumn(e,"filterToolPanel",!1)}destroyFilters(){this.childFilterComps=this.destroyBeans(this.childFilterComps),z.clearElement(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}}ar.TEMPLATE='<div class="ag-filter-toolpanel-group-wrapper">\n            <ag-group-component ref="filterGroupComp"></ag-group-component>\n        </div>',Yc([re("filterGroupComp")],ar.prototype,"filterGroupComp",void 0),Yc([P("columnModel")],ar.prototype,"columnModel",void 0),Yc([vf],ar.prototype,"preConstruct",null),Yc([Se],ar.prototype,"init",null);var Z0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class vu extends Ne{constructor(){super(vu.TEMPLATE),this.initialised=!1,this.hasLoadedInitialState=!1,this.isInitialState=!1,this.filterGroupComps=[],this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending=!1}init(e){this.initialised=!0;const t=this.gridOptionsService.addGridCommonParams({suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});z.mergeDeep(t,e),this.params=t,this.params.suppressSyncLayoutWithGrid||this.addManagedListener(this.eventService,G.EVENT_COLUMN_MOVED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,G.EVENT_TOOL_PANEL_VISIBLE_CHANGED,n=>{"filters"===n.key&&this.refreshFilters(n.visible)}),this.addManagedListener(this.eventService,G.EVENT_DRAG_STARTED,()=>{this.suppressOnColumnsChanged=!0}),this.addManagedListener(this.eventService,G.EVENT_DRAG_STOPPED,()=>{this.suppressOnColumnsChanged=!1,this.onColumnsChangedPending&&(this.onColumnsChangedPending=!1,this.onColumnsChanged())}),this.columnModel.isReady()&&this.onColumnsChanged();const i=this.getAriaElement();z.setAriaLive(i,"assertive"),z.setAriaAtomic(i,!1),z.setAriaRelevant(i,"text")}onColumnsChanged(){if(this.suppressOnColumnsChanged)return void(this.onColumnsChangedPending=!0);const e=this.columnModel.isPivotMode();this.params.suppressSyncLayoutWithGrid||e?this.buildTreeFromProvidedColumnDefs():this.syncFilterLayout(),this.refreshAriaLabel()}syncFilterLayout(){this.toolPanelColDefService.syncLayoutWithGrid(this.setFiltersLayout.bind(this)),this.refreshAriaLabel()}buildTreeFromProvidedColumnDefs(){const e=this.columnModel.getPrimaryColumnTree();this.recreateFilters(e)}setFiltersLayout(e){const t=this.toolPanelColDefService.createColumnTree(e);this.recreateFilters(t)}recreateFilters(e){const t=this.gridOptionsService.getDocument().activeElement;this.hasLoadedInitialState||(this.hasLoadedInitialState=!0,this.isInitialState=!!this.params.initialState);const i=this.getExpansionState();this.destroyFilters(),this.filterGroupComps=this.recursivelyAddComps(e,0,i);const n=this.filterGroupComps.length;n&&(this.filterGroupComps.forEach(s=>this.appendChild(s)),this.setFirstAndLastVisible(0,n-1)),z.exists(this.searchFilterText)&&this.searchFilters(this.searchFilterText),this.fireExpandedEvent(),this.getGui().contains(t)&&t.focus(),this.isInitialState=!1,this.refreshAriaLabel()}recursivelyAddComps(e,t,i){return z.flatten(e.map(n=>{if(n instanceof Wt)return z.flatten(this.recursivelyAddFilterGroupComps(n,t,i));const s=n;if(!this.shouldDisplayFilter(s))return[];const a=new eo(0===t,()=>this.onFilterExpanded());if(this.createBean(a),a.setColumn(s),i.get(s.getId())&&a.expand(),t>0)return a;const c=this.createBean(new ar(s,[a],this.onGroupExpanded.bind(this),t,!0));return c.addCssClassToTitleBar("ag-filter-toolpanel-header"),i.get(c.getFilterGroupId())||c.collapse(),c}))}refreshAriaLabel(){const e=this.localeService.getLocaleTextFunc(),t=e("ariaFilterPanelList","Filter List"),i=e("filters","Filters"),u=this.getGui().querySelectorAll(".ag-filter-toolpanel-group-item:not(.ag-filter-toolpanel-group-wrapper, .ag-hidden)").length;z.setAriaLabel(this.getAriaElement(),`${t} ${u} ${i}`)}recursivelyAddFilterGroupComps(e,t,i){if(!this.filtersExistInChildren(e.getChildren()))return;const n=e.getColGroupDef();if(n&&n.suppressFiltersToolPanel)return[];const s=e.isPadding()?t:t+1,o=z.flatten(this.recursivelyAddComps(e.getChildren(),s,i));if(e.isPadding())return o;const a=new ar(e,o,this.onGroupExpanded.bind(this),t,!1);this.createBean(a),a.addCssClassToTitleBar("ag-filter-toolpanel-header");const c=i.get(a.getFilterGroupId());return(this.isInitialState&&!c||!1===c)&&a.collapse(),[a]}filtersExistInChildren(e){return e.some(t=>t instanceof Wt?this.filtersExistInChildren(t.getChildren()):this.shouldDisplayFilter(t))}shouldDisplayFilter(e){const t=e.getColDef()&&e.getColDef().suppressFiltersToolPanel;return e.isFilterAllowed()&&!t}getExpansionState(){const e=new Map;if(this.isInitialState){const{expandedColIds:i,expandedGroupIds:n}=this.params.initialState;return i.forEach(s=>e.set(s,!0)),n.forEach(s=>e.set(s,!0)),e}const t=i=>{e.set(i.getFilterGroupId(),i.isExpanded()),i.getChildren().forEach(n=>{n instanceof ar?t(n):e.set(n.getColumn().getId(),n.isExpanded())})};return this.filterGroupComps.forEach(t),e}refresh(){}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}expandFilterGroups(e,t){const i=[],n=s=>{const o=s.getFilterGroupId();(!t||z.includes(t,o))&&(e&&s.isColumnGroup()?s.expand():s.collapse(),i.push(o)),s.getChildren().forEach(c=>{c instanceof ar&&n(c)})};if(this.filterGroupComps.forEach(n),this.onGroupExpanded(),t){const s=t.filter(o=>i.indexOf(o)<0);s.length>0&&console.warn("AG Grid: unable to find groups for these supplied groupIds:",s)}}expandFilters(e,t){const i=[],n=s=>{if(s instanceof ar){let c=!1;return s.getChildren().forEach(u=>{n(u)&&(e?(s.expand(),c=!0):s.isColumnGroup()||s.collapse())}),c}const o=s.getColumn().getColId(),a=!t||z.includes(t,o);return a&&(e?s.expand():s.collapse(),i.push(o)),a};if(this.filterGroupComps.forEach(n),this.onGroupExpanded(),t){const s=t.filter(o=>i.indexOf(o)<0);s.length>0&&console.warn("AG Grid: unable to find columns for these supplied colIds:",s)}}onGroupExpanded(){this.fireExpandedEvent()}onFilterExpanded(){this.dispatchEvent({type:"filterExpanded"})}fireExpandedEvent(){let e=0,t=0;const i=s=>{!s.isColumnGroup()||(s.isExpanded()?e++:t++,s.getChildren().forEach(o=>{o instanceof ar&&i(o)}))};let n;this.filterGroupComps.forEach(i),n=e>0&&t>0?zl.INDETERMINATE:t>0?zl.COLLAPSED:zl.EXPANDED,this.dispatchEvent({type:"groupExpanded",state:n})}performFilterSearch(e){this.searchFilterText=z.exists(e)?e.toLowerCase():null,this.searchFilters(this.searchFilterText)}searchFilters(e){const t=o=>!z.exists(e)||-1!==o.toLowerCase().indexOf(e),i=(o,a)=>{if(!(o instanceof ar))return t(o.getColumnFilterName()||"");const c=o.getChildren(),u=t(o.getFilterGroupName()),p=a||u;if(p){o.hideGroup(!1);for(let m=0;m<c.length;m++)i(c[m],p),o.hideGroupItem(!1,m);return!0}let g=!1;return c.forEach((m,y)=>{const b=i(m,a);o.hideGroupItem(!b,y),b&&(g=!0)}),o.hideGroup(!g),g};let n,s;this.filterGroupComps.forEach((o,a)=>{i(o,!1),void 0===n?o.containsCssClass("ag-hidden")||(n=a,s=a):!o.containsCssClass("ag-hidden")&&s!==a&&(s=a)}),this.setFirstAndLastVisible(n,s),this.refreshAriaLabel()}setFirstAndLastVisible(e,t){this.filterGroupComps.forEach((i,n)=>{i.removeCssClass("ag-first-group-visible"),i.removeCssClass("ag-last-group-visible"),n===e&&i.addCssClass("ag-first-group-visible"),n===t&&i.addCssClass("ag-last-group-visible")})}refreshFilters(e){this.filterGroupComps.forEach(t=>t.refreshFilters(e))}getExpandedFiltersAndGroups(){const e=[],t=new Set,i=n=>{if(n instanceof ar){n.getChildren().forEach(o=>i(o));const s=n.getFilterGroupId();n.isExpanded()&&!t.has(s)&&e.push(s)}else n.isExpanded()&&t.add(n.getColumn().getColId())};return this.filterGroupComps.forEach(i),{expandedGroupIds:e,expandedColIds:Array.from(t)}}destroyFilters(){this.filterGroupComps=this.destroyBeans(this.filterGroupComps),z.clearElement(this.getGui())}destroy(){this.destroyFilters(),super.destroy()}}vu.TEMPLATE='<div class="ag-filter-list-panel"></div>',Z0([P("toolPanelColDefService")],vu.prototype,"toolPanelColDefService",void 0),Z0([P("columnModel")],vu.prototype,"columnModel",void 0);var vI=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Fg extends Ne{constructor(){super(Fg.TEMPLATE),this.initialised=!1,this.listenerDestroyFuncs=[]}init(e){this.initialised&&(this.listenerDestroyFuncs.forEach(s=>s()),this.listenerDestroyFuncs=[]),this.initialised=!0;const t=this.gridOptionsService.addGridCommonParams({suppressExpandAll:!1,suppressFilterSearch:!1,suppressSyncLayoutWithGrid:!1});this.params=Object.assign(Object.assign({},t),e),this.filtersToolPanelHeaderPanel.init(this.params),this.filtersToolPanelListPanel.init(this.params),this.params.suppressExpandAll&&this.params.suppressFilterSearch&&this.filtersToolPanelHeaderPanel.setDisplayed(!1),this.listenerDestroyFuncs.push(this.addManagedListener(this.filtersToolPanelHeaderPanel,"expandAll",this.onExpandAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"collapseAll",this.onCollapseAll.bind(this)),this.addManagedListener(this.filtersToolPanelHeaderPanel,"searchChanged",this.onSearchChanged.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"filterExpanded",this.onFilterExpanded.bind(this)),this.addManagedListener(this.filtersToolPanelListPanel,"groupExpanded",this.onGroupExpanded.bind(this)))}setVisible(e){super.setDisplayed(e),e&&!this.initialised&&this.init(this.params)}onExpandAll(){this.filtersToolPanelListPanel.expandFilterGroups(!0)}onCollapseAll(){this.filtersToolPanelListPanel.expandFilterGroups(!1)}onSearchChanged(e){this.filtersToolPanelListPanel.performFilterSearch(e.searchText)}setFilterLayout(e){this.filtersToolPanelListPanel.setFiltersLayout(e)}onFilterExpanded(){this.params.onStateUpdated()}onGroupExpanded(e){this.filtersToolPanelHeaderPanel.setExpandState(e.state),this.params.onStateUpdated()}expandFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!0,e)}collapseFilterGroups(e){this.filtersToolPanelListPanel.expandFilterGroups(!1,e)}expandFilters(e){this.filtersToolPanelListPanel.expandFilters(!0,e)}collapseFilters(e){this.filtersToolPanelListPanel.expandFilters(!1,e)}syncLayoutWithGrid(){this.filtersToolPanelListPanel.syncFilterLayout()}refresh(e){return this.init(e),!0}getState(){return this.filtersToolPanelListPanel.getExpandedFiltersAndGroups()}destroy(){super.destroy()}}Fg.TEMPLATE='<div class="ag-filter-toolpanel">\n            <ag-filters-tool-panel-header ref="filtersToolPanelHeaderPanel"></ag-filters-tool-panel-header>\n            <ag-filters-tool-panel-list ref="filtersToolPanelListPanel"></ag-filters-tool-panel-list>\n         </div>',vI([re("filtersToolPanelHeaderPanel")],Fg.prototype,"filtersToolPanelHeaderPanel",void 0),vI([re("filtersToolPanelListPanel")],Fg.prototype,"filtersToolPanelListPanel",void 0);const CI={version:"31.1.1",moduleName:ze.FiltersToolPanelModule,beans:[],agStackComponents:[{componentName:"AgFiltersToolPanelHeader",componentClass:pp},{componentName:"AgFiltersToolPanelList",componentClass:vu}],userComponents:[{componentName:"agFiltersToolPanel",componentClass:Fg}],dependantModules:[e_,uu]};let J0=class extends Ee{constructor(){super(),this.allComponents=new Map}registerStatusPanel(e,t){this.allComponents.set(e,t)}unregisterStatusPanel(e){this.allComponents.delete(e)}unregisterAllComponents(){this.allComponents.clear()}getStatusPanel(e){return this.allComponents.get(e)}destroy(){this.unregisterAllComponents(),super.destroy()}};J0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He("statusBarService")],J0);var Cu=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class na extends Ne{constructor(){super(na.TEMPLATE),this.compDestroyFunctions={}}postConstruct(){this.processStatusPanels(new Map),this.addManagedPropertyListeners(["statusBar"],this.handleStatusBarChanged.bind(this))}processStatusPanels(e){var t;const i=null===(t=this.gridOptionsService.get("statusBar"))||void 0===t?void 0:t.statusPanels;if(i){const n=i.filter(a=>"left"===a.align);this.createAndRenderComponents(n,this.eStatusBarLeft,e);const s=i.filter(a=>"center"===a.align);this.createAndRenderComponents(s,this.eStatusBarCenter,e);const o=i.filter(a=>!a.align||"right"===a.align);this.createAndRenderComponents(o,this.eStatusBarRight,e)}else this.setDisplayed(!1)}handleStatusBarChanged(){var e;const t=null===(e=this.gridOptionsService.get("statusBar"))||void 0===e?void 0:e.statusPanels,i=Array.isArray(t)&&t.length>0;this.setDisplayed(i);const n=new Map;i&&t.forEach(s=>{var o,a;const c=null!==(o=s.key)&&void 0!==o?o:s.statusPanel,u=this.statusBarService.getStatusPanel(c);if(u?.refresh){const p=this.gridOptionsService.addGridCommonParams(null!==(a=s.statusPanelParams)&&void 0!==a?a:{});u.refresh(p)&&(n.set(c,u),delete this.compDestroyFunctions[c],z.removeFromParent(u.getGui()))}}),this.resetStatusBar(),i&&this.processStatusPanels(n)}resetStatusBar(){this.eStatusBarLeft.innerHTML="",this.eStatusBarCenter.innerHTML="",this.eStatusBarRight.innerHTML="",this.destroyComponents(),this.statusBarService.unregisterAllComponents()}destroyComponents(){Object.values(this.compDestroyFunctions).forEach(e=>e()),this.compDestroyFunctions={}}createAndRenderComponents(e,t,i){const n=[];e.forEach(s=>{const o=s.key||s.statusPanel,a=i.get(o);let c;if(a)c=$t.resolve(a);else if(c=this.userComponentFactory.getStatusPanelCompDetails(s,{}).newAgStackInstance(),!c)return;n.push({key:o,promise:c})}),$t.all(n.map(s=>s.promise)).then(()=>{n.forEach(s=>{s.promise.then(o=>{const a=()=>{this.getContext().destroyBean(o)};this.isAlive()?(this.statusBarService.registerStatusPanel(s.key,o),t.appendChild(o.getGui()),this.compDestroyFunctions[s.key]=a):a()})})})}}na.TEMPLATE='<div class="ag-status-bar">\n            <div ref="eStatusBarLeft" class="ag-status-bar-left" role="status"></div>\n            <div ref="eStatusBarCenter" class="ag-status-bar-center" role="status"></div>\n            <div ref="eStatusBarRight" class="ag-status-bar-right" role="status"></div>\n        </div>',Cu([P("userComponentFactory")],na.prototype,"userComponentFactory",void 0),Cu([P("statusBarService")],na.prototype,"statusBarService",void 0),Cu([re("eStatusBarLeft")],na.prototype,"eStatusBarLeft",void 0),Cu([re("eStatusBarCenter")],na.prototype,"eStatusBarCenter",void 0),Cu([re("eStatusBarRight")],na.prototype,"eStatusBarRight",void 0),Cu([Se],na.prototype,"postConstruct",null),Cu([Js],na.prototype,"destroyComponents",null);var fO=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Xa extends Ne{constructor(){super(Xa.TEMPLATE)}setLabel(e,t){this.setDisplayed(!1);const i=this.localeService.getLocaleTextFunc();this.eLabel.innerHTML=i(e,t)}setValue(e){this.eValue.innerHTML=e}}Xa.TEMPLATE='<div class="ag-status-name-value">\n            <span ref="eLabel"></span>:&nbsp;\n            <span ref="eValue" class="ag-status-name-value-value"></span>\n        </div>',fO([re("eLabel")],Xa.prototype,"eLabel",void 0),fO([re("eValue")],Xa.prototype,"eValue",void 0);var Q0=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class eD extends Xa{postConstruct(){"clientSide"===this.gridApi.__getModel().getType()?(this.setLabel("totalAndFilteredRows","Rows"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-and-filtered-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,G.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalAndFilteredRowCountComponent should only be used with the client side row model.")}onDataChanged(){const e=this.localeService.getLocaleTextFunc(),t=e("thousandSeparator",","),i=e("decimalSeparator","."),n=z.formatNumberCommas(this.getFilteredRowCountValue(),t,i),s=z.formatNumberCommas(this.getTotalRowCount(),t,i);if(n===s)this.setValue(n);else{const o=this.localeService.getLocaleTextFunc();this.setValue(`${n} ${o("of","of")} ${s}`)}}getFilteredRowCountValue(){let e=0;return this.gridApi.forEachNodeAfterFilter(t=>{t.group||e++}),e}getTotalRowCount(){let e=0;return this.gridApi.forEachNode(t=>{t.group||e++}),e}init(){}refresh(){return!0}destroy(){super.destroy()}}Q0([P("gridApi")],eD.prototype,"gridApi",void 0),Q0([Se],eD.prototype,"postConstruct",null);var gO=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class i_ extends Xa{postConstruct(){if(this.setLabel("filteredRows","Filtered"),"clientSide"!==this.gridApi.__getModel().getType())return void console.warn("AG Grid: agFilteredRowCountComponent should only be used with the client side row model.");this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-filtered-row-count"),this.setDisplayed(!0);const e=this.onDataChanged.bind(this);this.addManagedListener(this.eventService,G.EVENT_MODEL_UPDATED,e),e()}onDataChanged(){const e=this.getTotalRowCountValue(),t=this.getFilteredRowCountValue(),i=this.localeService.getLocaleTextFunc(),n=i("thousandSeparator",","),s=i("decimalSeparator",".");this.setValue(z.formatNumberCommas(t,n,s)),this.setDisplayed(e!==t)}getTotalRowCountValue(){let e=0;return this.gridApi.forEachNode(t=>e+=1),e}getFilteredRowCountValue(){let e=0;return this.gridApi.forEachNodeAfterFilter(t=>{t.group||(e+=1)}),e}init(){}refresh(){return!0}destroy(){super.destroy()}}gO([P("gridApi")],i_.prototype,"gridApi",void 0),gO([Se],i_.prototype,"postConstruct",null);var mO=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class n_ extends Xa{postConstruct(){this.setLabel("totalRows","Total Rows"),"clientSide"===this.gridApi.__getModel().getType()?(this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-total-row-count"),this.setDisplayed(!0),this.addManagedListener(this.eventService,G.EVENT_MODEL_UPDATED,this.onDataChanged.bind(this)),this.onDataChanged()):console.warn("AG Grid: agTotalRowCountComponent should only be used with the client side row model.")}onDataChanged(){const e=this.localeService.getLocaleTextFunc(),t=e("thousandSeparator",","),i=e("decimalSeparator",".");this.setValue(z.formatNumberCommas(this.getRowCountValue(),t,i))}getRowCountValue(){let e=0;return this.gridApi.forEachLeafNode(t=>e+=1),e}init(){}refresh(){return!0}destroy(){super.destroy()}}mO([P("gridApi")],n_.prototype,"gridApi",void 0),mO([Se],n_.prototype,"postConstruct",null);var s_=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class TC extends Xa{postConstruct(){if(!this.isValidRowModel())return void console.warn("AG Grid: agSelectedRowCountComponent should only be used with the client and server side row model.");this.setLabel("selectedRows","Selected"),this.addCssClass("ag-status-panel"),this.addCssClass("ag-status-panel-selected-row-count"),this.onRowSelectionChanged();const e=this.onRowSelectionChanged.bind(this);this.addManagedListener(this.eventService,G.EVENT_MODEL_UPDATED,e),this.addManagedListener(this.eventService,G.EVENT_SELECTION_CHANGED,e)}isValidRowModel(){const e=this.gridApi.__getModel().getType();return"clientSide"===e||"serverSide"===e}onRowSelectionChanged(){const e=this.selectionService.getSelectionCount();if(e<0)return this.setValue("?"),void this.setDisplayed(!0);const t=this.localeService.getLocaleTextFunc(),i=t("thousandSeparator",","),n=t("decimalSeparator",".");this.setValue(z.formatNumberCommas(e,i,n)),this.setDisplayed(e>0)}init(){}refresh(){return!0}destroy(){super.destroy()}}s_([P("gridApi")],TC.prototype,"gridApi",void 0),s_([P("selectionService")],TC.prototype,"selectionService",void 0),s_([Se],TC.prototype,"postConstruct",null);var to=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Gs extends Ne{constructor(){super(Gs.TEMPLATE)}destroy(){super.destroy()}postConstruct(){this.isValidRowModel()?(this.avgAggregationComp.setLabel("avg","Average"),this.countAggregationComp.setLabel("count","Count"),this.minAggregationComp.setLabel("min","Min"),this.maxAggregationComp.setLabel("max","Max"),this.sumAggregationComp.setLabel("sum","Sum"),this.addManagedListener(this.eventService,G.EVENT_RANGE_SELECTION_CHANGED,this.onRangeSelectionChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_MODEL_UPDATED,this.onRangeSelectionChanged.bind(this))):console.warn("AG Grid: agAggregationComponent should only be used with the client and server side row model.")}isValidRowModel(){const e=this.gridApi.__getModel().getType();return"clientSide"===e||"serverSide"===e}init(e){this.params=e}refresh(e){return this.params=e,this.onRangeSelectionChanged(),!0}setAggregationComponentValue(e,t,i){var n;const s=this.getAllowedAggregationValueComponent(e);if(z.exists(s)&&s){const o=this.localeService.getLocaleTextFunc(),a=o("thousandSeparator",","),c=o("decimalSeparator",".");s.setValue(z.formatNumberTwoDecimalPlacesAndCommas(t,a,c)),s.setDisplayed(i)}else null===(n=this.getAggregationValueComponent(e))||void 0===n||n.setDisplayed(!1)}getAllowedAggregationValueComponent(e){const{aggFuncs:t}=this.params;return!t||t.includes(e)?this.getAggregationValueComponent(e):null}getAggregationValueComponent(e){return this[`${e}AggregationComp`]}onRangeSelectionChanged(){const e=this.rangeService?this.rangeService.getCellRanges():void 0;let t=0,i=0,n=0,s=null,o=null;const a={};e&&!z.missingOrEmpty(e)&&e.forEach(p=>{let g=this.rangeService.getRangeStartRow(p);const m=this.rangeService.getRangeEndRow(p);for(;!z.missing(g)&&g&&!this.rowPositionUtils.before(m,g)&&g&&p.columns;)p.columns.forEach(b=>{if(null===g)return;const _=this.cellPositionUtils.createId({rowPinned:g.rowPinned,column:b,rowIndex:g.rowIndex});if(a[_])return;a[_]=!0;const E=this.rowRenderer.getRowNode(g);if(z.missing(E))return;let D=this.valueService.getValue(b,E);z.missing(D)||""===D||(i++,("object"!=typeof D||!("value"in D)||(D=D.value,""!==D))&&("string"==typeof D&&(D=Number(D)),"number"==typeof D&&!isNaN(D)&&(t+=D,(null===o||D>o)&&(o=D),(null===s||D<s)&&(s=D),n++)))}),g=this.cellNavigationService.getRowBelow(g)});const u=n>1;this.setAggregationComponentValue("count",i,i>1),this.setAggregationComponentValue("sum",t,u),this.setAggregationComponentValue("min",s,u),this.setAggregationComponentValue("max",o,u),this.setAggregationComponentValue("avg",t/n,u)}}Gs.TEMPLATE='<div class="ag-status-panel ag-status-panel-aggregations">\n            <ag-name-value ref="avgAggregationComp"></ag-name-value>\n            <ag-name-value ref="countAggregationComp"></ag-name-value>\n            <ag-name-value ref="minAggregationComp"></ag-name-value>\n            <ag-name-value ref="maxAggregationComp"></ag-name-value>\n            <ag-name-value ref="sumAggregationComp"></ag-name-value>\n        </div>',to([Pt("rangeService")],Gs.prototype,"rangeService",void 0),to([P("valueService")],Gs.prototype,"valueService",void 0),to([P("cellNavigationService")],Gs.prototype,"cellNavigationService",void 0),to([P("rowRenderer")],Gs.prototype,"rowRenderer",void 0),to([P("gridApi")],Gs.prototype,"gridApi",void 0),to([P("cellPositionUtils")],Gs.prototype,"cellPositionUtils",void 0),to([P("rowPositionUtils")],Gs.prototype,"rowPositionUtils",void 0),to([re("sumAggregationComp")],Gs.prototype,"sumAggregationComp",void 0),to([re("countAggregationComp")],Gs.prototype,"countAggregationComp",void 0),to([re("minAggregationComp")],Gs.prototype,"minAggregationComp",void 0),to([re("maxAggregationComp")],Gs.prototype,"maxAggregationComp",void 0),to([re("avgAggregationComp")],Gs.prototype,"avgAggregationComp",void 0),to([Se],Gs.prototype,"postConstruct",null);const F1={version:"31.1.1",moduleName:ze.StatusBarModule,beans:[J0],agStackComponents:[{componentName:"AgStatusBar",componentClass:na},{componentName:"AgNameValue",componentClass:Xa}],userComponents:[{componentName:"agAggregationComponent",componentClass:Gs},{componentName:"agSelectedRowCountComponent",componentClass:TC},{componentName:"agTotalRowCountComponent",componentClass:n_},{componentName:"agFilteredRowCountComponent",componentClass:i_},{componentName:"agTotalAndFilteredRowCountComponent",componentClass:eD}],dependantModules:[uu]};function vO(r,e){if(1&r){const t=C.EpF();C.TgZ(0,"div",2)(1,"label",3)(2,"input",4),C.NdJ("change",function(){const s=C.CHM(t).$implicit,o=C.oxw();return C.KtG(o.onButtonPressed(s))}),C.qZA(),C._uU(3),C.qZA()()}if(2&r){const t=e.$implicit,i=C.oxw();C.xp6(2),C.Q6J("checked",i.selected===t),C.xp6(1),C.hij(" ",t.name," ")}}let N1=(()=>{class r{constructor(){this.PROFICIENCIES=[{name:"No Filter",threshold:0},{name:"Above 40%",threshold:40},{name:"Above 60%",threshold:60},{name:"Above 80%",threshold:80}],this.selected=this.PROFICIENCIES[0]}agInit(t){this.params=t}ngOnDestroy(){console.log("Destroying P")}onButtonPressed(t){this.selected=t,this.params.filterChangedCallback()}doesFilterPass(t){const i=this.params.valueGetter(t);return parseFloat(i)>=this.selected.threshold}isFilterActive(){return this.selected!==this.PROFICIENCIES[0]}getModel(){}setModel(t){}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=C.Xpm({type:r,selectors:[["ng-component"]],decls:5,vars:1,consts:[[2,"text-align","center","background","lightgray","width","100%","display","block","border-bottom","1px solid grey"],["style","margin-top: 3px",4,"ngFor","ngForOf"],[2,"margin-top","3px"],[2,"padding-left","4px"],["type","radio",3,"checked","change"]],template:function(t,i){1&t&&(C.TgZ(0,"div")(1,"div",0)(2,"b"),C._uU(3,"Custom Proficiency Filter"),C.qZA()(),C.YNc(4,vO,4,2,"div",1),C.qZA()),2&t&&(C.xp6(4),C.Q6J("ngForOf",i.PROFICIENCIES))},dependencies:[Oe.sg],encapsulation:2}),r})();function L1(r,e){if(1&r){const t=C.EpF();C.TgZ(0,"div",3)(1,"label",4)(2,"span")(3,"div",5),C._uU(4),C.qZA(),C.TgZ(5,"div")(6,"input",6),C.NdJ("click",function(n){const o=C.CHM(t).$implicit,a=C.oxw();return C.KtG(a.onSkillChanged(n,o))}),C.qZA(),C._UZ(7,"img",7),C.qZA()()()()}if(2&r){const t=e.$implicit;C.xp6(4),C.Oqu(t.name),C.xp6(3),C.MGl("src","images/skills/",t.filename,"",C.LSH)}}let k1=(()=>{class r{constructor(){this.skills=[{name:"Android",get filename(){return`${this.field}.png`},field:"android",selected:!1},{name:"CSS",get filename(){return`${this.field}.png`},field:"css",selected:!1},{name:"HTML 5",get filename(){return`${this.field}.png`},field:"html5",selected:!1},{name:"Mac",get filename(){return`${this.field}.png`},field:"mac",selected:!1},{name:"Windows",get filename(){return`${this.field}.png`},field:"windows",selected:!1}]}agInit(t){this.params=t}onSkillChanged(t,i){i.selected=t.target.checked,this.params.filterChangedCallback()}getModel(){return this.skills.reduce((t,i)=>(t[i.field]=i.selected,t),{})}setModel(t){for(const i of this.skills)i.selected=!(!t||!t[i.field])&&t[i.field].selected}doesFilterPass(t){const i=t.data.skills;let n=!0;for(const s of this.skills)n=n&&(!s.selected||s.selected&&i[s.field]);return n}isFilterActive(){return!0}helloFromSkillsFilter(){alert("Hello From The Skills Filter!")}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=C.Xpm({type:r,selectors:[["ng-component"]],decls:5,vars:1,consts:[[2,"display","inline-block"],[2,"text-align","center","background","lightgray","width","100%","display","block","border-bottom","1px solid grey"],["style","margin-top: 3px; float: left",4,"ngFor","ngForOf"],[2,"margin-top","3px","float","left"],[2,"border","1px solid lightgrey","margin","4px","padding","4px","display","inline-block"],[2,"text-align","center"],["type","checkbox",3,"click"],["width","30",3,"src"]],template:function(t,i){1&t&&(C.TgZ(0,"div",0)(1,"div",1)(2,"b"),C._uU(3,"Custom Skills Filter"),C.qZA()(),C.YNc(4,L1,8,2,"div",2),C.qZA()),2&t&&(C.xp6(4),C.Q6J("ngForOf",i.skills))},dependencies:[Oe.sg],encapsulation:2}),r})();class yi{}yi.IT_SKILLS=["android","css","html5","mac","windows"],yi.IT_SKILLS_NAMES=["Android","CSS","HTML 5","Mac","Windows"],yi.firstNames=["Sophie","Isabelle","Emily","Olivia","Lily","Chloe","Isabella","Amelia","Jessica","Sophia","Ava","Charlotte","Mia","Lucy","Grace","Ruby","Ella","Evie","Freya","Isla","Poppy","Daisy","Layla"],yi.middleNames=["Isabelle","Emily","Olivia","Lily","Chloe","Isabella","Amelia","Jessica","Sophia","Ava","Charlotte","Mia","Lucy","Grace","Ruby","Ella","Evie","Freya","Isla","Poppy","Daisy"],yi.lastNames=["Beckham","Black","Braxton","Brennan","Brock","Bryson","Cadwell","Cage","Carson","Chandler","Cohen","Cole","Corbin","Dallas","Dalton","Dane","Donovan","Easton","Fisher","Fletcher","Grady","Greyson","Griffin","Gunner","Hayden","Hudson","Hunter","Jacoby","Jagger","Jaxon","Jett","Kade","Kane","Keating","Keegan","Kingston","Kobe"],yi.marriageStatus=["Single","Married","Widowed","Divorced","Separated"],yi.gautras=["Garg","Goyal","Goyan","Bansal","Kansal","Singhal","Jindal","Madhukul","Bhandal","Kuchhal","Nagal"],yi.DOBs=[new Date(2e3,0,1),new Date(2001,1,2),new Date(2002,2,3),new Date(2003,3,4),new Date(2004,4,5),new Date(2005,5,6),new Date(2006,6,7),new Date(2007,7,8),new Date(2008,8,9),new Date(2009,9,10),new Date(2010,10,11),new Date(2011,11,12)],yi.COUNTRY_CODES={Ireland:"ie",Spain:"es","United Kingdom":"gb",France:"fr",Germany:"de",Sweden:"se",Italy:"it",Greece:"gr",Iceland:"is",Portugal:"pt",Malta:"mt",Norway:"no",Brazil:"br",Argentina:"ar",Colombia:"co",Peru:"pe",Venezuela:"ve",Uruguay:"uy"},yi.countries=[{country:"Ireland",continent:"Europe",language:"English"},{country:"Spain",continent:"Europe",language:"Spanish"},{country:"United Kingdom",continent:"Europe",language:"English"},{country:"France",continent:"Europe",language:"French"},{country:"Germany",continent:"Europe",language:"(other)"},{country:"Sweden",continent:"Europe",language:"(other)"},{country:"Norway",continent:"Europe",language:"(other)"},{country:"Italy",continent:"Europe",language:"(other)"},{country:"Greece",continent:"Europe",language:"(other)"},{country:"Iceland",continent:"Europe",language:"(other)"},{country:"Portugal",continent:"Europe",language:"Portuguese"},{country:"Malta",continent:"Europe",language:"(other)"},{country:"Brazil",continent:"South America",language:"Portuguese"},{country:"Argentina",continent:"South America",language:"Spanish"},{country:"Colombia",continent:"South America",language:"Spanish"},{country:"Peru",continent:"South America",language:"Spanish"},{country:"Venezuela",continent:"South America",language:"Spanish"},{country:"Uruguay",continent:"South America",language:"Spanish"}],yi.addresses=["1197 Thunder Wagon Common, Cataract, RI, 02987-1016, US, (401) 747-0763","3685 Rocky Glade, Showtucket, NU, X1E-9I0, CA, (867) 371-4215","3235 High Forest, Glen Campbell, MS, 39035-6845, US, (601) 638-8186","2234 Sleepy Pony Mall , Drain, DC, 20078-4243, US, (202) 948-3634","2722 Hazy Turnabout, Burnt Cabins, NY, 14120-5642, US, (917) 604-6597","6686 Lazy Ledge, Two Rock, CA, 92639-3020, US, (619) 901-9911","2000 Dewy Limits, Wacahoota, NF, A4L-2V9, CA, (709) 065-3959","7710 Noble Pond Avenue, Bolivia, RI, 02931-1842, US, (401) 865-2160","3452 Sunny Vale, Pyro, ON, M8V-4Z0, CA, (519) 072-8609","4402 Dusty Cove, Many Farms, UT, 84853-8223, US, (435) 518-0673","5198 Silent Parade, Round Bottom, MD, 21542-9798, US, (301) 060-7245","8550 Shady Moor, Kitty Fork, CO, 80941-6207, US, (303) 502-3767","2131 Old Dell, Merry Midnight, AK, 99906-8842, US, (907) 369-2206","7390 Harvest Crest, Mosquito Crossing, RI, 02957-6116, US, (401) 463-6348","874 Little Point, Hot Coffee, BC, V3U-2P6, CA, (250) 706-9207","8834 Stony Pioneer Heights, Newlove, OR, 97419-8670, US, (541) 408-2213","9829 Grand Beach, Flint, UT, 84965-9900, US, (435) 700-5161","3799 Cozy Blossom Ramp, Ptarmigan, MS, 38715-0313, US, (769) 740-1526","3254 Silver Island Loop, Maunaloa, DE, 19869-3169, US, (302) 667-7671","1081 Middle Wood, Taylors Gut Landing, OR, 97266-2873, US, (541) 357-6310","1137 Umber Trail, Shacktown, NW, X3U-5Y8, CA, (867) 702-6883","9914 Hidden Bank, Wyoming, MO, 64635-9665, US, (636) 280-4192","7080 Misty Nectar Townline, Coward, AB, T9U-3N4, CA, (403) 623-2838","1184 Wishing Grounds, Vibank, NW, X7D-0V9, CA, (867) 531-2730","126 Easy Pointe, Grandview Beach, KY, 40928-9539, US, (502) 548-0956","6683 Colonial Street, Swan River, BC, V1A-9I8, CA, (778) 014-4257","960 Gentle Oak Lane, Shakopee, ND, 58618-6277, US, (701) 327-1219","6918 Cotton Pine Corner, Kenaston, IA, 52165-3975, US, (515) 906-7427","2368 Burning Woods, Ernfold, NY, 11879-9186, US, (646) 819-0355","5646 Quiet Shadow Chase, Tiger Tail, IA, 52283-5537, US, (712) 375-9225","5466 Foggy Mountain Dale, Sweet Home, MT, 59738-0251, US, (406) 881-1706","5313 Clear Willow Route, Amazon, BC, V0S-2S6, CA, (604) 340-7596","7000 Pleasant Autoroute, Spaceport City, UT, 84749-2448, US, (435) 154-3360","8359 Quaking Anchor Road, Gross, BC, V9O-0H5, CA, (250) 985-3859","5143 Amber Deer Hollow, New Deal, ND, 58446-0853, US, (701) 927-0322","6230 Jagged Bear Key, Young, AR, 72337-3811, US, (501) 805-7239","7207 Heather Vista, Devon, WY, 82520-1771, US, (307) 358-7092","9416 Red Rise Place, Spraytown, OK, 73809-4766, US, (580) 867-1973","3770 Golden Horse Diversion, Yelland, IL, 60471-1487, US, (224) 717-9349","4819 Honey Treasure Park, Alaska, NB, E1U-3I0, CA, (506) 656-9138","6187 Round Front, Land O Lakes, AK, 99873-6403, US, (907) 853-9063","9218 Crystal Highway, Pickelville, MT, 59847-9299, US, (406) 076-0024","6737 Bright Quay, Lazy Mountain, KY, 42390-4772, US, (606) 256-7288","237 Merry Campus, Twentysix, SC, 29330-4909, US, (864) 945-0157","446 Fallen Gate Rise, Petrolia, SC, 29959-9527, US, (864) 826-0553","2347 Indian Boulevard, Frisbee, VA, 23797-6458, US, (703) 656-8445","365 Emerald Grove Line, Level, NC, 28381-1514, US, (919) 976-7958","1207 Iron Extension, Klickitat, SC, 29197-8571, US, (803) 535-7888","6770 Cinder Glen, Caronport, OH, 45053-5002, US, (440) 369-4018","7619 Tawny Carrefour, Senlac, NV, 89529-9876, US, (775) 901-6433"];let G1=(()=>{class r{agInit(t){this.params=t,this.params.columnGroup.getProvidedColumnGroup().addEventListener("expandedChanged",this.onExpandChanged.bind(this))}ngOnDestroy(){console.log("Destroying HeaderComponent")}expandOrCollapse(){this.params.setExpanded(!this.expanded)}onExpandChanged(){this.expanded=this.params.columnGroup.getProvidedColumnGroup().isExpanded()}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=C.Xpm({type:r,selectors:[["ng-component"]],decls:5,vars:4,consts:[[2,"display","flex","align-items","center"],[1,"customHeaderLabel"],[3,"click"],[1,"fa","fa-arrow-right"]],template:function(t,i){1&t&&(C.TgZ(0,"div",0)(1,"div",1),C._uU(2),C.qZA(),C.TgZ(3,"div",2),C.NdJ("click",function(){return i.expandOrCollapse()}),C._UZ(4,"i",3),C.qZA()()),2&t&&(C.xp6(2),C.hij(" ",i.params.displayName,""),C.xp6(1),C.Tol("customExpandButton"+(i.expanded?" expanded":" collapsed")))},styles:[".customExpandButton[_ngcontent-%COMP%]{margin-left:3px}.expanded[_ngcontent-%COMP%]{animation-name:toExpanded;animation-duration:1s;transform:rotate(180deg)}.collapsed[_ngcontent-%COMP%]{color:#6495ed;animation-name:toCollapsed;animation-duration:1s;transform:rotate(0)}@keyframes toExpanded{0%{color:#6495ed;transform:rotate(0)}to{color:#000;transform:rotate(180deg)}}@keyframes toCollapsed{0%{color:#000;transform:rotate(180deg)}to{color:#6495ed;transform:rotate(0)}}"]}),r})(),V1=(()=>{class r{constructor(){this.dd="",this.mm="",this.yyyy="",this.disabled=!1}agInit(t){this.params=t}ngOnDestroy(){console.log("Destroying DateComponent")}onResetDate(){this.setDateToEmpty(),this.params.onDateChanged()}setDateToEmpty(){this.dd="",this.mm="",this.yyyy="",this.date=null}onDateChanged(t,i){this.date=this.parseDate("dd"===t?i:this.dd,"mm"===t?i:this.mm,"yyyy"===t?i:this.yyyy),this.params.onDateChanged()}getDate(){return this.date}setDate(t){t?(this.dd=t.getDate()+"",this.mm=t.getMonth()+1+"",this.yyyy=t.getFullYear()+"",this.date=t,this.params.onDateChanged()):this.setDateToEmpty()}setDisabled(t){this.disabled=t}parseDate(t,i,n){if(""===t.trim()||""===i.trim()||""===n.trim())return null;let s=Number(t),o=Number(i),a=Number(n),c=new Date(a,o-1,s);return isNaN(c.getTime())||c.getDate()!=s||c.getMonth()+1!=o||c.getFullYear()!=a?null:c}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=C.Xpm({type:r,selectors:[["ag-full-width-grid"]],decls:8,vars:6,consts:[[1,"filter"],[1,"reset",3,"click"],["placeholder","dd","maxLength","2",1,"dd",3,"ngModel","disabled","ngModelChange"],["placeholder","mm","maxLength","2",1,"mm",3,"ngModel","disabled","ngModelChange"],["placeholder","yyyy","maxLength","4",1,"yyyy",3,"ngModel","disabled","ngModelChange"]],template:function(t,i){1&t&&(C.TgZ(0,"div",0)(1,"span",1),C.NdJ("click",function(){return i.onResetDate()}),C._uU(2,"x"),C.qZA(),C.TgZ(3,"input",2),C.NdJ("ngModelChange",function(s){return i.onDateChanged("dd",s)})("ngModelChange",function(s){return i.dd=s}),C.qZA(),C._uU(4,"/ "),C.TgZ(5,"input",3),C.NdJ("ngModelChange",function(s){return i.onDateChanged("mm",s)})("ngModelChange",function(s){return i.mm=s}),C.qZA(),C._uU(6,"/ "),C.TgZ(7,"input",4),C.NdJ("ngModelChange",function(s){return i.onDateChanged("yyyy",s)})("ngModelChange",function(s){return i.yyyy=s}),C.qZA()()),2&t&&(C.xp6(3),C.Q6J("ngModel",i.dd)("disabled",i.disabled),C.xp6(2),C.Q6J("ngModel",i.mm)("disabled",i.disabled),C.xp6(2),C.Q6J("ngModel",i.yyyy)("disabled",i.disabled))},dependencies:[hi,xm,Jn],styles:[".filter[_ngcontent-%COMP%]{margin:2px}.dd[_ngcontent-%COMP%], .mm[_ngcontent-%COMP%]{width:30px}.yyyy[_ngcontent-%COMP%]{width:60px}.reset[_ngcontent-%COMP%]{padding:2px;background-color:red;border-radius:3px;font-size:10px;margin-right:5px;color:#fff}"]}),r})(),B1=(()=>{class r{constructor(t){this.elementRef=t}agInit(t){this.params=t,this.params.column.addEventListener("sortChanged",this.onSortChanged.bind(this)),this.onSortChanged()}ngOnDestroy(){console.log("Destroying HeaderComponent")}onMenuClick(){this.params.showColumnMenu(this.querySelector(".customHeaderMenuButton"))}onSortRequested(t,i){this.params.setSort(t,i.shiftKey)}onSortChanged(){this.sorted=this.params.column.isSortAscending()?"asc":this.params.column.isSortDescending()?"desc":""}querySelector(t){return this.elementRef.nativeElement.querySelector(".customHeaderMenuButton",t)}refresh(t){return!0}}return r.\u0275fac=function(t){return new(t||r)(C.Y36(C.SBq))},r.\u0275cmp=C.Xpm({type:r,selectors:[["ng-component"]],decls:11,vars:17,consts:[[2,"display","flex","align-items","center"],[1,"customHeaderMenuButton",3,"hidden","click"],[1,"customHeaderLabel",3,"click"],[3,"hidden","click"],[1,"fa","fa-long-arrow-alt-down"],[1,"fa","fa-long-arrow-alt-up"],[1,"fa","fa-times"]],template:function(t,i){1&t&&(C.TgZ(0,"div",0)(1,"div",1),C.NdJ("click",function(){return i.onMenuClick()}),C._UZ(2,"i"),C.qZA(),C.TgZ(3,"div",2),C.NdJ("click",function(s){return i.onSortRequested("desc"===i.sorted?"asc":"desc",s)}),C._uU(4),C.qZA(),C.TgZ(5,"div",3),C.NdJ("click",function(s){return i.onSortRequested("desc",s)}),C._UZ(6,"i",4),C.qZA(),C.TgZ(7,"div",3),C.NdJ("click",function(s){return i.onSortRequested("asc",s)}),C._UZ(8,"i",5),C.qZA(),C.TgZ(9,"div",3),C.NdJ("click",function(s){return i.onSortRequested(null,s)}),C._UZ(10,"i",6),C.qZA()()),2&t&&(C.xp6(1),C.Q6J("hidden",!i.params.enableMenu),C.xp6(1),C.Tol("fa "+i.params.menuIcon),C.xp6(2),C.Oqu(i.params.displayName),C.xp6(1),C.Tol("customSortDownLabel"+("desc"===i.sorted?" active":"")),C.Q6J("hidden",!i.params.enableSorting),C.xp6(2),C.Tol("customSortUpLabel"+("asc"===i.sorted?" active":"")),C.Q6J("hidden",!i.params.enableSorting),C.xp6(2),C.Tol("customSortRemoveLabel"+(""===i.sorted?" active":"")),C.Q6J("hidden",!i.params.enableSorting))},styles:[".customHeaderMenuButton[_ngcontent-%COMP%]{margin-left:4px}.customHeaderLabel[_ngcontent-%COMP%]{margin-left:5px}.customSortDownLabel[_ngcontent-%COMP%]{margin-left:10px}.customSortUpLabel[_ngcontent-%COMP%]{margin-left:3px}.customSortRemoveLabel[_ngcontent-%COMP%]{font-size:11px;margin-left:3px}.active[_ngcontent-%COMP%]{color:#6495ed}.hidden[_ngcontent-%COMP%]{display:none}"]}),r})(),SI=(()=>{class r{constructor(t,i){this.renderer=t,this.el=i}agInit(t){this.value=t.value}ngOnInit(){this.renderer.setStyle(this.el.nativeElement,"background-color","lightblue")}refresh(t){return this.value=t.value,!0}}return r.\u0275fac=function(t){return new(t||r)(C.Y36(C.Qsj),C.Y36(C.SBq))},r.\u0275cmp=C.Xpm({type:r,selectors:[["app-renderer-component"]],decls:2,vars:1,template:function(t,i){1&t&&(C.TgZ(0,"span"),C._uU(1),C.qZA()),2&t&&(C.xp6(1),C.Oqu(i.value))},encapsulation:2}),r})();var Ng=Object.defineProperty,H1=Object.defineProperties,CO=Object.getOwnPropertyDescriptor,r_=Object.getOwnPropertyDescriptors,RC=Object.getOwnPropertySymbols,yO=Object.getPrototypeOf,bI=Object.prototype.hasOwnProperty,o_=Object.prototype.propertyIsEnumerable,SO=Reflect.get,tD=(r,e)=>(e=Symbol[r])?e:Symbol.for("Symbol."+r),Yt=Math.pow,_I=(r,e,t)=>e in r?Ng(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Re=(r,e)=>{for(var t in e||(e={}))bI.call(e,t)&&_I(r,t,e[t]);if(RC)for(var t of RC(e))o_.call(e,t)&&_I(r,t,e[t]);return r},nt=(r,e)=>H1(r,r_(e)),rs=(r,e)=>{var t={};for(var i in r)bI.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(null!=r&&RC)for(var i of RC(r))e.indexOf(i)<0&&o_.call(r,i)&&(t[i]=r[i]);return t},sa=(r,e)=>{for(var t in e)Ng(r,t,{get:e[t],enumerable:!0})},I=(r,e,t,i)=>{for(var o,n=i>1?void 0:i?CO(e,t):e,s=r.length-1;s>=0;s--)(o=r[s])&&(n=(i?o(e,t,n):o(n))||n);return i&&n&&Ng(e,t,n),n},yu=(r,e,t)=>SO(yO(r),t,e),Be=(r,e,t)=>new Promise((i,n)=>{var s=c=>{try{a(t.next(c))}catch(u){n(u)}},o=c=>{try{a(t.throw(c))}catch(u){n(u)}},a=c=>c.done?i(c.value):Promise.resolve(c.value).then(s,o);a((t=t.apply(r,e)).next())}),U1=function(r,e){this[0]=r,this[1]=e},wI=r=>{var i,e=r[tD("asyncIterator")],t=!1,n={};return null==e?(e=r[tD("iterator")](),i=s=>n[s]=o=>e[s](o)):(e=e.call(r),i=s=>n[s]=o=>{if(t){if(t=!1,"throw"===s)throw o;return o}return t=!0,{done:!1,value:new U1(new Promise(a=>{var c=e[s](o);if(!(c instanceof Object))throw TypeError("Object expected");a(c)}),1)}}),n[tD("iterator")]=()=>n,i("next"),"throw"in e?i("throw"):n.throw=s=>{throw s},"return"in e&&i("return"),n},bO=(r=>(r.POINTER="pointer",r.NODE="node",r))(bO||{});sa({},{day:()=>xI,friday:()=>d_,hour:()=>OI,millisecond:()=>EO,minute:()=>RO,monday:()=>PO,month:()=>II,saturday:()=>NO,second:()=>sD,sunday:()=>aD,thursday:()=>c_,tuesday:()=>IO,utcDay:()=>u_,utcHour:()=>X1,utcMinute:()=>K1,utcMonth:()=>GO,utcYear:()=>cD,wednesday:()=>FO,year:()=>lD});var a_=new Map;function l_(r,e){a_.has(e)||(a_.set(e,!0),r())}function EI(r){return r}function wO(r,e=0,t){const{leading:i=!0,trailing:n=!0}=t??{};let s,o,a=!1;function c(){n&&o?(s=setTimeout(c,e),r(...o)):a=!1,o=null}return Object.assign(function u(...p){a?o=p:(a=!0,s=setTimeout(c,e),i?r(...p):o=p)},{cancel(){clearTimeout(s),a=!1,o=null}})}l_.clear=()=>a_.clear();var tt={log(...r){console.log(...r)},warn(r,...e){console.warn(`AG Charts - ${r}`,...e)},error(r,...e){"object"==typeof r?console.error("AG Charts error",r,...e):console.error(`AG Charts - ${r}`,...e)},table(...r){console.table(...r)},warnOnce(r,...e){l_(()=>tt.warn(r,...e),`Logger.warn: ${r}`)},errorOnce(r,...e){l_(()=>tt.error(r,...e),`Logger.error: ${r}`)}},AC=class{constructor(r,e,t){this._encode=r,this._decode=e,this._rangeCallback=t}floor(r){const e=new Date(r),t=this._encode(e);return this._decode(t)}ceil(r){const e=new Date(Number(r)-1),t=this._encode(e);return this._decode(t+1)}range(r,e,t){var i;const n=null==(i=this._rangeCallback)?void 0:i.call(this,r,e),s=this._encode(t?this.floor(r):this.ceil(r)),o=this._encode(t?this.ceil(e):this.floor(e));if(o<s)return[];const a=[];for(let c=s;c<=o;c++){const u=this._decode(c);a.push(u)}return n?.(),a}},rn=class extends AC{getOffset(r,e){const t="number"==typeof r||r instanceof Date?this._encode(new Date(r)):0;return Math.floor(t)%e}every(r,e){let i,t=0;const n=r;n!==(r=Math.max(1,Math.round(r)))&&tt.warnOnce(`interval step of [${n}] rounded to [${r}].`);const{snapTo:s="start"}=e??{};if("string"==typeof s){const c=t;i=(u,p)=>(t=this.getOffset("start"===s?u:p,r),()=>t=c)}else"number"==typeof s?t=this.getOffset(new Date(s),r):s instanceof Date&&(t=this.getOffset(s,r));return new AC(c=>{const u=this._encode(c);return Math.floor((u-t)/r)},c=>this._decode(c*r+t),i)}},EO=new rn(function DI(r){return r.getTime()},function iD(r){return new Date(r)}),TI=EO,lr=6e4,$l=60*lr,qc=24*$l,Lg=7*qc,OC=30*qc,MC=365*qc,TO=(new Date).getTimezoneOffset()*lr,sD=new rn(function nD(r){return Math.floor((r.getTime()-TO)/1e3)},function bu(r){return new Date(TO+1e3*r)}),rD=sD,Kl=(new Date).getTimezoneOffset()*lr,RO=new rn(function RI(r){return Math.floor((r.getTime()-Kl)/lr)},function W1(r){return new Date(Kl+r*lr)}),j1=RO,AO=(new Date).getTimezoneOffset()*lr,OI=new rn(function AI(r){return Math.floor((r.getTime()-AO)/$l)},function OO(r){return new Date(AO+r*$l)}),MO=OI,xI=new rn(function MI(r){const e=r.getTimezoneOffset()*lr;return Math.floor((r.getTime()-e)/qc)},function xO(r){const e=new Date(1970,0,1);return e.setDate(e.getDate()+r),e}),oD=xI;function _u(r){const t=(7+r-4)%7;return new rn(function i(s){const o=s.getTimezoneOffset()*lr;return Math.floor((s.getTime()-o)/Lg-t/7)},function n(s){const o=new Date(1970,0,1);return o.setDate(o.getDate()+7*s+t),o})}var aD=_u(0),PO=_u(1),IO=_u(2),FO=_u(3),c_=_u(4),d_=_u(5),NO=_u(6),PI=aD,II=new rn(function LO(r){return 12*r.getFullYear()+r.getMonth()},function kO(r){const e=Math.floor(r/12);return new Date(e,r-12*e,1)}),FI=II,lD=new rn(function z1(r){return r.getFullYear()},function $1(r){const e=new Date;return e.setFullYear(r),e.setMonth(0,1),e.setHours(0,0,0,0),e}),NI=lD,K1=new rn(function LI(r){return Math.floor(r.getTime()/lr)},function kI(r){return new Date(r*lr)}),X1=new rn(function Y1(r){return Math.floor(r.getTime()/$l)},function q1(r){return new Date(r*$l)}),u_=new rn(function Z1(r){return Math.floor(r.getTime()/qc)},function GI(r){const e=new Date(0);return e.setUTCDate(e.getUTCDate()+r),e.setUTCHours(0,0,0,0),e}),GO=new rn(function VI(r){return 12*r.getUTCFullYear()+r.getUTCMonth()},function BI(r){const e=Math.floor(r/12);return new Date(Date.UTC(e,r-12*e,1))}),cD=new rn(function fp(r){return r.getUTCFullYear()},function VO(r){const e=new Date;return e.setUTCFullYear(r),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0),e}),wu={isEnterprise:!1},dD=class{constructor(){this.destroyFns=[]}destroy(){for(const r of this.destroyFns)r()}},ra=[];function Eo(r){const e=ra.find(t=>r.type===t.type&&r.optionsKey===t.optionsKey&&r.identifier===t.identifier);if(e){if("enterprise"===r.packageType&&"community"===e.packageType){const t=ra.indexOf(e);ra.splice(t,1,r)}}else ra.push(r)}function kg(){return ra.some(r=>"enterprise"===r.packageType)}var uD={};function HI(r,e){uD[r]=e}function J1(r,e){const t=uD[r];if(t)return new t(e);throw new Error(`AG Charts - unknown axis type: ${r}`)}var BO={has:r=>Object.hasOwn(uD,r),get axesTypes(){return Object.keys(uD)}},hD={};function HO(r,e){hD[r]=e}function UI(r){var e;return null!=(e=hD[r])?e:{}}var h_=Symbol("BREAK"),Gg="__decorator_config";function pD(r,e){null==Object.getOwnPropertyDescriptor(r,Gg)&&Object.defineProperty(r,Gg,{value:{}});const t=r[Gg],i=e.toString();if(typeof t[i]<"u")return t[i];const n=new WeakMap;t[i]={setters:[],getters:[],observers:[],valuesMap:n};const s=Object.getOwnPropertyDescriptor(r,e),o=s?.set,a=s?.get;return Object.defineProperty(r,e,{set:function(p){const{setters:g,observers:m}=t[i];let y;g.some(b=>b.length>2)&&(y=a?a.call(this):n.get(this));for(const b of g)if((p=b(this,e,p,y))===h_)return;o?o.call(this,p):n.set(this,p);for(const b of m)b(this,p,y)},get:function(){let p=a?a.call(this):n.get(this);for(const g of t[i].getters)if(p=g(this,e,p),p===h_)return;return p},enumerable:!0,configurable:!1}),t[i]}function Yl(r,e,t){return(i,n)=>{const s=pD(i,n);s.setters.push(r),e&&s.getters.unshift(e),t&&Object.assign(s,t)}}function p_(r){return typeof r<"u"&&Gg in r}function Vg(r){const e=new Set;for(;p_(r);)e.add(r?.[Gg]),r=Object.getPrototypeOf(r);return Array.from(e).flatMap(t=>Object.keys(t))}function WO(r){return Vg(r).reduce((e,t)=>{var i;return e[t]=null!=(i=r[t])?i:null,e},{})}function jO(r){return null!=r}function Dn(r){return Array.isArray(r)}function f_(r){return"boolean"==typeof r}function g_(r){return r instanceof Date}function xC(r){return g_(r)&&!isNaN(Number(r))}function WI(r){return r instanceof RegExp}function PC(r){return"function"==typeof r}function ql(r){return"object"==typeof r&&null!==r&&!Dn(r)}function jI(r){return Dn(r)||oa(r)}function oa(r){return"object"==typeof r&&null!==r&&r.constructor===Object}function Ja(r){return"string"==typeof r}function Xl(r){return"number"==typeof r}function Ei(r){return Xl(r)&&Number.isFinite(r)}function zI(r){return typeof window<"u"&&r instanceof HTMLElement}function Q1(r,e){return Ja(e)&&Object.keys(r).includes(e)}function zO(r,e){return Object.values(r).includes(e)}function $I(r){return"symbol"==typeof r}function ek(...r){return ri(...r.reverse())}function ri(...r){const t={};for(const i of r){if(!ql(i))continue;const n=p_(i)?Vg(i):Object.keys(i);for(const s of n)oa(t[s])&&oa(i[s])?t[s]=ri(t[s],i[s]):null!=t[s]||(t[s]=i[s])}return t}function $O(r,...e){return e&&Dn(r)?r.map(t=>ri(t,...e)):r}function KI(r,e){return Object.entries(r).reduce((t,[i,n])=>(t[i]=e(n,i,r),t),{})}function YI(r,e){return(Dn(e)?e:e.split(".")).reduce((i,n)=>i[n],r)}function l(r,e,t){const i=Dn(e)?e.slice():e.split("."),n=i.pop();i.reduce((o,a)=>o[a],r)[n]=t}function d(r,e,t){if(void 0===t)return e;for(const i of r){const n=t[i];void 0!==n&&(e[i]=n)}return e}var h={},f={},v={has:r=>Object.hasOwn(h,r),isCartesian:r=>"cartesian"===h[r],isPolar:r=>"polar"===h[r],isHierarchy:r=>"hierarchy"===h[r],get seriesTypes(){return Object.keys(h)},get cartesianTypes(){return this.seriesTypes.filter(r=>this.isCartesian(r))},get polarTypes(){return this.seriesTypes.filter(r=>this.isPolar(r))},get hierarchyTypes(){return this.seriesTypes.filter(r=>this.isHierarchy(r))}};function w(r,e){f[r]=ri(e,f[r])}function T(r){var e;return null!=(e=f[r])?e:{}}var V=[{type:"root",optionsKey:"animation",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"background",chartTypes:["cartesian","polar","hierarchy"],optionsInnerKey:"image"},{type:"root",optionsKey:"contextMenu",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"dataSource",chartTypes:["cartesian","polar","hierarchy"]},{type:"root",optionsKey:"sync",chartTypes:["cartesian"]},{type:"root",optionsKey:"zoom",chartTypes:["cartesian"]},{type:"legend",optionsKey:"gradientLegend",chartTypes:["cartesian","polar","hierarchy"],identifier:"gradient"},{type:"root",optionsKey:"navigator",chartTypes:["cartesian"],optionsInnerKey:"miniChart"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"angle-number"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-category"},{type:"axis",optionsKey:"axes[]",chartTypes:["polar"],identifier:"radius-number"},{type:"axis-option",optionsKey:"crosshair",chartTypes:["cartesian"]},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"box-plot"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"bullet"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"heatmap"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"nightingale"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-area"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radar-line"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-bar"},{type:"series",optionsKey:"series[]",chartTypes:["polar"],identifier:"radial-column"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-area"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"range-bar"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"sunburst"},{type:"series",optionsKey:"series[]",chartTypes:["hierarchy"],identifier:"treemap"},{type:"series",optionsKey:"series[]",chartTypes:["cartesian"],identifier:"waterfall"},{type:"series-option",optionsKey:"errorBar",chartTypes:["cartesian"],identifier:"error-bars"}];function W(r){return V.some(e=>"series"===e.type&&e.identifier===r)}function Q(r){var e;return null==(e=V.find(t=>"series"===t.type&&t.identifier===r))?void 0:e.chartTypes}function de(r){var e,t;return(null!=(t=null==(e=V.find(i=>"series"===i.type&&i.identifier===r))?void 0:e.useCount)?t:0)>0}function dt(r){if(!function Qe(r){return"enterprise"===r.packageType}(r))throw new Error("AG Charts - internal configuration error, only enterprise modules need verification.");const t=V.find(i=>i.type===r.type&&i.optionsKey===r.optionsKey&&i.identifier===r.identifier&&r.chartTypes.every(n=>i.chartTypes.includes(n)));return t&&(null!=t.useCount||(t.useCount=0),t.useCount++),null!=t}function ke(r){var e,t,i;return null!=(i=null==(t=null==(e=r.series)?void 0:e[0])?void 0:t.type)?i:"line"}function mt(r){const e=ke(r);return null==e||("cartesian"===e?(tt.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):v.isCartesian(e)||function we(r){var e;return"cartesian"===(null==(e=Q(r))?void 0:e.find(i=>"cartesian"===i))}(e))}function pi(r){const e=ke(r);return null!=e&&("hierarchy"===e?(tt.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):v.isHierarchy(e)||function $e(r){var e;return"hierarchy"===(null==(e=Q(r))?void 0:e.find(i=>"hierarchy"===i))}(e))}function Bi(r){const e=ke(r);return null!=e&&("polar"===e?(tt.warnOnce(`type '${e}' is deprecated, use a series type instead`),!0):v.isPolar(e)||function Fe(r){var e;return"polar"===(null==(e=Q(r))?void 0:e.find(i=>"polar"===i))}(e))}function mD(r){return null!=r&&BO.has(r)}var Di=class{constructor(r){this.className=r}set(r){const e=new Set(Object.keys(r));for(const t of Vg(this))if(e.has(t)){const i=r[t],n=this;n[t]=Rr(n[t])?n[t]instanceof mp?n[t].reset(i):n[t].set(i):i,e.delete(t)}for(const t of e){const{className:i=this.constructor.name}=this.constructor;tt.warn(`unable to set [${t}] in ${i} - property is unknown`)}return this}isValid(){return Vg(this).every(r=>{const{optional:e}=function fD(r,e){const t=e.toString();for(;p_(r);){const i=r[Gg];if(Object.hasOwn(i,t))return i[t];r=Object.getPrototypeOf(r)}}(this,r);return e||typeof this[r]<"u"})}toJson(){return Vg(this).reduce((r,e)=>{const t=this[e];return r[e]=Rr(t)?t.toJson():t,r},{})}},mp=class J2 extends Array{constructor(e,...t){super(t.length),Object.defineProperty(this,"itemFactory",{value:e,enumerable:!1,configurable:!1}),this.set(t)}set(e){if(Dn(e)){this.length=e.length;for(let t=0;t<e.length;t++)this[t]=(new this.itemFactory).set(e[t])}return this}reset(e){return new J2(this.itemFactory,...e)}toJson(){return this.slice()}};function Rr(r){return r instanceof Di||r instanceof mp}var Bg="class-instance";function Ar(r,e){if(Dn(e)){if(!Dn(r)||r.length!==e.length||e.some((t,i)=>null!=Ar(r[i],t)))return e}else{if(oa(e)){if(!oa(r))return e;const t={},i=new Set([...Object.keys(r),...Object.keys(e)]);for(const n of i)if(r[n]!==e[n])if(typeof r[n]!=typeof e[n])t[n]=e[n];else{const s=Ar(r[n],e[n]);null!==s&&(t[n]=s)}return Object.keys(t).length?t:null}if(r!==e)return e}return null}function Cs(r,e){return Dn(r)?r.map(t=>Cs(t,e)):oa(r)?Object.entries(r).reduce((t,[i,n])=>{var s;return t[i]=null!=(s=e?.shallow)&&s.includes(i)?KO(n):Cs(n,e),t},{}):KO(r)}function KO(r){return Dn(r)?[...r]:oa(r)?Re({},r):g_(r)?new Date(r):WI(r)?new RegExp(r.source,r.flags):r}function Eu(r,e,t,...i){var n;if(Dn(r))e(r,...i),r.forEach((s,o)=>{Eu(s,e,t,...tk(i,o))});else if(oa(r)){e(r,...i);for(const s of Object.keys(r)){if(null!=(n=t?.skip)&&n.includes(s))continue;const o=r[s];(Dn(o)||oa(o))&&Eu(o,e,t,...tk(i,s))}}}function Hg(r,e,t={}){var i,n,s;const{path:o,matcherPath:a=(o?o.replace(/(\[[0-9+]+])/i,"[]"):void 0),skip:c=[],constructors:u={},constructedArrays:p=new WeakMap,allowedTypes:g={},idx:m}=t;if(null==r)throw new Error(`AG Charts - target is uninitialised: ${o??"<root>"}`);if(null==e)return r;if(Rr(r))return r.set(e);const y=r;null!=m&&"_declarationOrder"in y&&(y._declarationOrder=m);const b=qI(r);for(const _ in e){const E=`${a?a+".":""}${_}`;if(c.indexOf(E)>=0)continue;const D=e[_],R=`${o?o+".":""}${_}`,O=y.constructor,L=y[_];let k=null!=(i=u[E])?i:u[_];try{const U=qI(L),j=qI(D);if(b===Bg&&!(_ in r)&&!Object.hasOwn(y,_)){tt.warn(`unable to set [${R}] in ${O?.name} - property is unknown`);continue}const q=null!=(n=g[E])?n:[U];if((U!==Bg||"object"!==j)&&null!=U&&null!=j&&!q.includes(j)){tt.warn(`unable to set [${R}] in ${O?.name} - can't apply type of [${j}], allowed types are: [${q}]`);continue}if("array"===j)k=null!=(s=k??p.get(L))?s:u[`${E}[]`],Rr(y[_])?y[_].set(D):y[_]=null!=k?D.map((me,ye)=>Hg(new k,me,nt(Re({},t),{path:R,matcherPath:E+"[]",idx:ye}))):D;else if(j===Bg)y[_]=D;else if("object"===j)if(Rr(L))y[_].set(D);else if(null!=L)Hg(L,D,nt(Re({},t),{path:R,matcherPath:E,idx:void 0}));else if(null!=k){const J=new k;y[_]=Rr(J)?J.set(D):Hg(J,D,nt(Re({},t),{path:R,matcherPath:E,idx:void 0}))}else y[_]=D;else Rr(y[_])?y[_].set(D):y[_]=D}catch(U){tt.warn(`unable to set [${R}] in [${O?.name}]; nested error is: ${U.message}`)}}return r}function tk(r,e){return r.map(t=>t?.[e])}function qI(r){return null==r?null:zI(r)||g_(r)?"primitive":Dn(r)?"array":ql(r)?oa(r)?"object":Bg:PC(r)?"function":"primitive"}var ik={},nk={},XI={},sk={},rk={},ok=new Set,ak=new Set,lk=new Set,ck=new Set,ZI={};function bU({identifier:r,chartTypes:[e],instanceConstructor:t,seriesDefaults:i,themeTemplate:n,enterpriseThemeTemplate:s,paletteFactory:o,solo:a,stackable:c,groupable:u,stackedByDefault:p,swapDefaultAxesCondition:g}){ik[r]=t,nk[r]=i,dk(r,n,s),o&&function DU(r,e){rk[r]=e}(r,o),a&&function xU(r){ok.add(r)}(r),c&&function PU(r){ak.add(r)}(r),u&&function MU(r){lk.add(r)}(r),p&&function IU(r){ck.add(r)}(r),g&&function FU(r,e){ZI[r]=e}(r,g),function S(r,e){h[r]=e}(r,e)}function dk(r,e,t={}){const i=XI[r];XI[r]=ri(e,i),sk[r]=ri(t,e,i)}function _U(r,e){const t=ik[r];if(t)return new t(e);throw new Error(`AG Charts - unknown series type: ${r}`)}function EU(r){return wu.isEnterprise?sk[r]:XI[r]}function JI(r){return ok.has(r)}var LU={},uk={};function hk(r,e,t,i){LU[r]=t,uk[r]=e,pk[e]=i}var pk={},fk=(r=>(r[r.SMALL=12]="SMALL",r[r.MEDIUM=13]="MEDIUM",r[r.LARGE=17]="LARGE",r))(fk||{}),gk=(r=>(r.NORMAL="normal",r.BOLD="bold",r.BOLDER="bolder",r.LIGHTER="lighter",r))(gk||{}),mk=(r=>(r.TOP="top",r.RIGHT="right",r.BOTTOM="bottom",r.LEFT="left",r))(mk||{}),vk=(r=>(r.CATEGORY="category",r.NUMBER="number",r.TIME="time",r.LOG="log",r))(vk||{}),Ck=(r=>(r.ANGLE_CATEGORY="angle-category",r.ANGLE_NUMBER="angle-number",r.RADIUS_CATEGORY="radius-category",r.RADIUS_NUMBER="radius-number",r))(Ck||{}),yk=(r=>(r.CIRCLE="circle",r.POLYGON="polygon",r))(yk||{}),Du={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},IC={BLUE:"#2b5c95",ORANGE:"#cc6f10",GREEN:"#1e652e",CYAN:"#18859e",YELLOW:"#a69400",VIOLET:"#603c88",GRAY:"#575757",MAGENTA:"#7d2f6d",BROWN:"#4f3508",RED:"#a82529"},FC=Symbol("is-dark-theme"),Sk=Symbol("extends-chart-defaults"),bk=Symbol("extends-legend-defaults"),_k=Symbol("extends-legend-item-defaults"),wk=Symbol("extends-legend-item-marker-defaults"),Ek=Symbol("extends-axes-defaults"),Dk=Symbol("extends-axes-label-defaults"),Tk=Symbol("extends-axes-line-defaults"),Rk=Symbol("extends-axes-tick-defaults"),Ak=Symbol("extends-axes-grid-line-defaults"),vp=Symbol("extends-series-defaults"),m_=Symbol("extends-cartesian-marker-defaults"),Ok=Symbol("override-series-label-defaults"),Vs=Symbol("default-font"),Pi=Symbol("default-label-colour"),Mk=Symbol("default-inverted-label-colour"),v_=Symbol("default-inside-series-label-colour"),C_=Symbol("default-muted-label-colour"),YO=Symbol("default-axis-grid-colour"),qO=Symbol("default-axis-line-colour"),CD=Symbol("default-cross-lines-colour"),yD=Symbol("default-background-colour"),y_=Symbol("default-shadow-colour"),Xc=Symbol("default-waterfall-series-positive-colors"),Zc=Symbol("default-waterfall-series-negative-colors"),Jc=Symbol("default-waterfall-series-total-colors"),Qc=Symbol("default-waterfall-series-connector-line-stroke"),QI=Symbol("default-polar-series-stroke"),ed=Symbol("default-diverging-series-colour-range"),eF=Symbol("default-hierarchy-fills"),tF=Symbol("default-hierarchy-strokes"),iF="white",VU={fills:Object.values(Du),strokes:Object.values(IC)},nF={get cartesian(){return{seriesTypes:v.cartesianTypes,commonOptions:["zoom","navigator"]}},get polar(){return{seriesTypes:v.polarTypes,commonOptions:[]}},get hierarchy(){return{seriesTypes:v.hierarchyTypes,commonOptions:[]}}},BU=Object.values(nF).reduce((r,{commonOptions:e})=>[...r,...e],[]),NC=class Kn{getPalette(){return VU}static getAxisDefaults(e){return ri(e,{top:{},right:{},bottom:{},left:{},title:{enabled:!1,text:"Axis Title",spacing:25,fontWeight:"normal",fontSize:13,fontFamily:Vs,color:Pi},label:{fontSize:12,fontFamily:Vs,padding:5,color:Pi,avoidCollisions:!0},line:{enabled:!0,width:1,color:qO},tick:{enabled:!1,width:1,color:qO},gridLine:{enabled:!0,style:[{stroke:YO,lineDash:[]}]},crossLines:{enabled:!1,fill:CD,stroke:CD,fillOpacity:.1,strokeWidth:1,label:{enabled:!1,fontSize:12,fontFamily:Vs,padding:5,color:Pi}}})}static getSeriesDefaults(){return{tooltip:{enabled:!0},visible:!0,showInLegend:!0,highlightStyle:{item:{fill:"rgba(255,255,255, 0.33)",stroke:"rgba(0, 0, 0, 0.4)",strokeWidth:2},series:{dimOpacity:1},text:{color:"black"}},nodeClickRange:"exact"}}static getCartesianSeriesMarkerDefaults(){return{enabled:!0,shape:"circle",size:7,strokeWidth:1}}static getLegendItemMarkerDefaults(){return{size:15,padding:8}}static getCaptionWrappingDefaults(){return"hyphenate"}static getChartDefaults(){return{background:{visible:!0,fill:yD},padding:{top:20,right:20,bottom:20,left:20},title:{enabled:!1,text:"Title",fontWeight:"normal",fontSize:17,fontFamily:Vs,color:Pi,wrapping:Kn.getCaptionWrappingDefaults()},subtitle:{enabled:!1,text:"Subtitle",spacing:20,fontSize:13,fontFamily:Vs,color:C_,wrapping:Kn.getCaptionWrappingDefaults()},footnote:{enabled:!1,text:"Footnote",spacing:20,fontSize:13,fontFamily:Vs,color:"rgb(140, 140, 140)",wrapping:Kn.getCaptionWrappingDefaults()},legend:{position:"bottom",spacing:30,listeners:{},item:{paddingX:16,paddingY:8,marker:Kn.getLegendItemMarkerDefaults(),toggleSeriesVisible:!0,label:{color:Pi,fontSize:12,fontFamily:Vs}},reverseOrder:!1,pagination:{marker:{size:12},activeStyle:{fill:Pi},inactiveStyle:{fill:C_},highlightStyle:{fill:Pi},label:{color:Pi}}},tooltip:{enabled:!0,darkTheme:FC,range:"nearest",delay:0},overlays:{loading:{darkTheme:FC},noData:{darkTheme:FC},noVisibleSeries:{darkTheme:FC}},listeners:{}}}constructor(e){var t;e=Cs(e??{});const{overrides:i=null,palette:n=null}=e,s=this.createChartConfigPerChartType(this.getDefaults());if(i){const{common:a}=i,c=(u,p)=>{if(p)for(const g of u)s[g]=ri(p,s[g])};for(const[,{seriesTypes:u,commonOptions:p}]of Object.entries(nF)){const g=Re({},a);for(const m of BU)p.includes(m)||delete g[m];c(u,g)}v.seriesTypes.forEach(u=>{i[u]&&(s[u]=ri(i[u],s[u]))})}const o=this.getPalette();this.palette=null!=(t=function HU(r,e){var t,i;return null==r?null:{fills:null!=(t=r.fills)?t:e.fills,strokes:null!=(i=r.strokes)?i:e.strokes}}(n,o))?t:o,this.config=Object.freeze(this.templateTheme(s))}createChartConfigPerChartType(e){return Object.entries(nF).forEach(([t,{seriesTypes:i}])=>{const n=T(t);i.forEach(s=>{e[s]||(e[s]=Cs(n))})}),e}getDefaults(){const t=(i,n)=>{var s;const o=(i=>Re(Re(Re({axes:{}},function kU(){return pk}()),Kn.getChartDefaults()),T(i)))(i),a={};for(const c of n){a[c]=ri(EU(c),null!=(s=a[c])?s:Cs(o));const{axes:u}=a[c];for(const p of BO.axesTypes)u[p]=ri(u[p],UI(p),"cartesian"===i&&Kn.cartesianAxisDefault[p])}return a};return ri(t("cartesian",v.cartesianTypes),t("polar",v.polarTypes),t("hierarchy",v.hierarchyTypes))}templateTheme(e){const t=Cs(e),{extensions:i,properties:n}=this.getTemplateParameters();return Eu(t,s=>{if(s.__extends__){const o=s.__extends__,a=i.get(o);if(null==a)throw new Error(`AG Charts - no template variable provided for: ${o}`);Object.keys(a).forEach(c=>{c in s?ql(s[c])&&(s[c]=ri(s[c],a[c])):s[c]=a[c]}),delete s.__extends__}if(s.__overrides__){const o=s.__overrides__,a=i.get(o);if(null==a)throw new Error(`AG Charts - no template variable provided for: ${o}`);Object.assign(s,a),delete s.__overrides__}if(Dn(s))for(let o=0;o<s.length;o++){const a=s[o];n.has(a)&&(s[o]=n.get(a))}else for(const[o,a]of Object.entries(s))n.has(a)&&(s[o]=n.get(a))}),Cs(t)}static getWaterfallSeriesDefaultPositiveColors(){return{fill:Du.BLUE,stroke:IC.BLUE,label:{color:Pi}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:Du.ORANGE,stroke:IC.ORANGE,label:{color:Pi}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:Du.GRAY,stroke:IC.GRAY,label:{color:Pi}}}getTemplateParameters(){const e=new Map;e.set(Sk,Kn.getChartDefaults()),e.set(Ek,Kn.getAxisDefaults()),e.set(bk,Kn.getChartDefaults().legend),e.set(_k,Kn.getChartDefaults().legend.item),e.set(wk,Kn.getLegendItemMarkerDefaults()),e.set(Dk,Kn.getAxisDefaults().label),e.set(Tk,Kn.getAxisDefaults().line),e.set(Rk,Kn.getAxisDefaults().tick),e.set(Ak,Kn.getAxisDefaults().gridLine),e.set(vp,Kn.getSeriesDefaults()),e.set(Ok,{}),e.set(m_,Kn.getCartesianSeriesMarkerDefaults());const t=new Map;return t.set(FC,!1),t.set(Vs,"Verdana, sans-serif"),t.set(Pi,"rgb(70, 70, 70)"),t.set(Mk,"white"),t.set(C_,"rgb(140, 140, 140)"),t.set(YO,"rgb(224,234,241)"),t.set(qO,"rgb(195, 195, 195)"),t.set(CD,"rgb(70, 70, 70)"),t.set(v_,iF),t.set(yD,iF),t.set(y_,"rgba(0, 0, 0, 0.5)"),t.set(ed,[Du.ORANGE,Du.YELLOW,Du.GREEN]),t.set(eF,["#ffffff","#e0e5ea","#c1ccd5","#a3b4c1","#859cad"]),t.set(tF,["#ffffff","#c5cbd1","#a4b1bd","#8498a9","#648096"]),t.set(QI,iF),t.set(Xc,Kn.getWaterfallSeriesDefaultPositiveColors()),t.set(Zc,Kn.getWaterfallSeriesDefaultNegativeColors()),t.set(Jc,Kn.getWaterfallSeriesDefaultTotalColors()),t.set(Qc,Kn.getWaterfallSeriesDefaultTotalColors().stroke),{extensions:e,properties:t}}};NC.cartesianAxisDefault={number:NC.getAxisDefaults({line:{enabled:!1}}),log:NC.getAxisDefaults({base:10,line:{enabled:!1}}),category:NC.getAxisDefaults({groupPaddingInner:.1,label:{autoRotate:!0},gridLine:{enabled:!1}}),time:NC.getAxisDefaults({gridLine:{enabled:!1}}),"grouped-category":NC.getAxisDefaults()};var Cp=NC,sF="#192232",LC={BLUE:"#5090dc",ORANGE:"#ffa03a",GREEN:"#459d55",CYAN:"#34bfe1",YELLOW:"#e1cc00",VIOLET:"#9669cb",GRAY:"#b5b5b5",MAGENTA:"#bd5aa7",BROWN:"#8a6224",RED:"#ef5452"},XO={BLUE:"#74a8e6",ORANGE:"#ffbe70",GREEN:"#6cb176",CYAN:"#75d4ef",YELLOW:"#f6e559",VIOLET:"#aa86d8",GRAY:"#a1a1a1",MAGENTA:"#ce7ab9",BROWN:"#997b52",RED:"#ff7872"},UU={fills:Object.values(LC),strokes:Object.values(XO)},SD=class GT extends Cp{static getWaterfallSeriesDefaultPositiveColors(){return{fill:LC.BLUE,stroke:XO.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:LC.ORANGE,stroke:XO.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:LC.GRAY,stroke:XO.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(FC,!0),e.properties.set(Xc,GT.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Zc,GT.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(Jc,GT.getWaterfallSeriesDefaultTotalColors()),e.properties.set(Qc,GT.getWaterfallSeriesDefaultTotalColors().stroke),e.properties.set(QI,sF),e.properties.set(Pi,"white"),e.properties.set(C_,"#7D91A0"),e.properties.set(YO,"#545A6E"),e.properties.set(CD,"white"),e.properties.set(ed,[LC.ORANGE,LC.YELLOW,LC.GREEN]),e.properties.set(eF,["#192834","#253746","#324859","#3f596c","#4d6a80"]),e.properties.set(tF,["#192834","#3b5164","#496275","#577287","#668399"]),e.properties.set(yD,sF),e.properties.set(v_,sF),e}getPalette(){return UU}constructor(e){super(e)}},kC={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},ZO={BLUE:"#90CAF9",ORANGE:"#FFCC80",GREEN:"#A5D6A7",CYAN:"#80DEEA",YELLOW:"#FFF9C4",VIOLET:"#B39DDB",GRAY:"#E0E0E0",MAGENTA:"#F48FB1",BROWN:"#A1887F",RED:"#EF9A9A"},WU={fills:Object.values(kC),strokes:Object.values(ZO)},jU=class VT extends SD{static getWaterfallSeriesDefaultPositiveColors(){return{fill:kC.BLUE,stroke:ZO.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:kC.RED,stroke:ZO.RED,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:kC.GRAY,stroke:ZO.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(Xc,VT.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Zc,VT.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(Jc,VT.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ed,[kC.ORANGE,kC.YELLOW,kC.GREEN]),e.properties.set(Qc,VT.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return WU}},GC={BLUE:"#2196F3",ORANGE:"#FF9800",GREEN:"#4CAF50",CYAN:"#00BCD4",YELLOW:"#FFEB3B",VIOLET:"#7E57C2",GRAY:"#9E9E9E",MAGENTA:"#F06292",BROWN:"#795548",RED:"#F44336"},JO={BLUE:"#1565C0",ORANGE:"#E65100",GREEN:"#2E7D32",CYAN:"#00838F",YELLOW:"#F9A825",VIOLET:"#4527A0",GRAY:"#616161",MAGENTA:"#C2185B",BROWN:"#4E342E",RED:"#B71C1C"},zU={fills:Object.values(GC),strokes:Object.values(JO)},$U=class BT extends Cp{static getWaterfallSeriesDefaultPositiveColors(){return{fill:GC.BLUE,stroke:JO.BLUE,label:{color:Pi}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:GC.RED,stroke:JO.RED,label:{color:Pi}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:GC.GRAY,stroke:JO.GRAY,label:{color:Pi}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(Xc,BT.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Zc,BT.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(Jc,BT.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ed,[GC.ORANGE,GC.YELLOW,GC.GREEN]),e.properties.set(Qc,BT.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return zU}},bD={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},rF={BLUE:"#6698ff",PURPLE:"#c0a3ff",MAGENTA:"#fc8dfc",PINK:"#ff82b1",RED:"#ff9b70",ORANGE:"#ffcf4e",YELLOW:"#ffff58",GREEN:"#58dd70",CYAN:"#51e2c9",MODERATE_BLUE:"#4fd7ff"},qU={fills:Object.values(bD),strokes:Object.values(rF)},XU=class HT extends SD{static getWaterfallSeriesDefaultPositiveColors(){return{fill:bD.BLUE,stroke:rF.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:bD.RED,stroke:rF.RED,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#eeeeee",label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(Xc,HT.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Zc,HT.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(Jc,HT.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ed,[bD.BLUE,bD.RED]),e.properties.set(Qc,HT.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return qU}},_D={BLUE:"#436ff4",PURPLE:"#9a7bff",MAGENTA:"#d165d2",PINK:"#f0598b",RED:"#f47348",ORANGE:"#f2a602",YELLOW:"#e9e201",GREEN:"#21b448",CYAN:"#00b9a2",MODERATE_BLUE:"#00aee4"},oF={BLUE:"#2346c9",PURPLE:"#7653d4",MAGENTA:"#a73da9",PINK:"#c32d66",RED:"#c84b1c",ORANGE:"#c87f00",YELLOW:"#c1b900",GREEN:"#008c1c",CYAN:"#00927c",MODERATE_BLUE:"#0087bb"},QU={fills:Object.values(_D),strokes:Object.values(oF)},eW=class UT extends Cp{static getWaterfallSeriesDefaultPositiveColors(){return{fill:_D.BLUE,stroke:oF.BLUE,label:{color:Pi}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:_D.RED,stroke:oF.RED,label:{color:Pi}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:"#bbbbbb",stroke:"#888888",label:{color:Pi}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(Xc,UT.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Zc,UT.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(Jc,UT.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ed,[_D.BLUE,_D.RED]),e.properties.set(Qc,UT.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return QU}},VC={BLUE:"#4472C4",ORANGE:"#ED7D31",GRAY:"#A5A5A5",YELLOW:"#FFC000",MODERATE_BLUE:"#5B9BD5",GREEN:"#70AD47",DARK_GRAY:"#7B7B7B",DARK_BLUE:"#264478",VERY_DARK_GRAY:"#636363",DARK_YELLOW:"#997300"},QO={BLUE:"#6899ee",ORANGE:"#ffa55d",GRAY:"#cdcdcd",YELLOW:"#ffea53",MODERATE_BLUE:"#82c3ff",GREEN:"#96d56f",DARK_GRAY:"#a1a1a1",DARK_BLUE:"#47689f",VERY_DARK_GRAY:"#878787",DARK_YELLOW:"#c0993d"},tW={fills:Object.values(VC),strokes:Object.values(QO)},iW=class WT extends SD{static getWaterfallSeriesDefaultPositiveColors(){return{fill:VC.BLUE,stroke:QO.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:VC.ORANGE,stroke:QO.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:VC.GRAY,stroke:QO.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(Xc,WT.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Zc,WT.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(Jc,WT.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ed,[VC.ORANGE,VC.YELLOW,VC.GREEN]),e.properties.set(Qc,WT.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return tW}},BC={BLUE:"#5281d5",ORANGE:"#ff8d44",GRAY:"#b5b5b5",YELLOW:"#ffd02f",MODERATE_BLUE:"#6aabe6",GREEN:"#7fbd57",DARK_GRAY:"#8a8a8a",DARK_BLUE:"#335287",VERY_DARK_GRAY:"#717171",DARK_YELLOW:"#a98220"},eM={BLUE:"#214d9b",ORANGE:"#c25600",GRAY:"#7f7f7f",YELLOW:"#d59800",MODERATE_BLUE:"#3575ac",GREEN:"#4b861a",DARK_GRAY:"#575757",DARK_BLUE:"#062253",VERY_DARK_GRAY:"#414141",DARK_YELLOW:"#734f00"},nW={fills:Object.values(BC),strokes:Object.values(eM)},sW=class jT extends Cp{static getWaterfallSeriesDefaultPositiveColors(){return{fill:BC.BLUE,stroke:eM.BLUE,label:{color:Pi}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:BC.ORANGE,stroke:eM.ORANGE,label:{color:Pi}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:BC.GRAY,stroke:eM.GRAY,label:{color:Pi}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(Xc,jT.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Zc,jT.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(Jc,jT.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ed,[BC.ORANGE,BC.YELLOW,BC.GREEN]),e.properties.set(Qc,jT.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return nW}},HC={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},tM={BLUE:"#67b7ff",ORANGE:"#ffc24d",GREEN:"#5cc86f",CYAN:"#54ebff",VIOLET:"#c18aff",YELLOW:"#fff653",GRAY:"#aeaeae",MAGENTA:"#f078d4",BROWN:"#ba8438",RED:"#ff726e"},rW={fills:Object.values(HC),strokes:Object.values(tM)},oW=class zT extends SD{static getWaterfallSeriesDefaultPositiveColors(){return{fill:HC.BLUE,stroke:tM.BLUE,label:{color:"white"}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:HC.ORANGE,stroke:tM.ORANGE,label:{color:"white"}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:HC.GRAY,stroke:tM.GRAY,label:{color:"white"}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(Xc,zT.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Zc,zT.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(Jc,zT.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ed,[HC.ORANGE,HC.YELLOW,HC.GREEN]),e.properties.set(Qc,zT.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return rW}},UC={BLUE:"#0083ff",ORANGE:"#ff6600",GREEN:"#00af00",CYAN:"#00ccff",YELLOW:"#f7c700",VIOLET:"#ac26ff",GRAY:"#a7a7b7",MAGENTA:"#e800c5",BROWN:"#b54300",RED:"#ff0000"},iM={BLUE:"#0f68c0",ORANGE:"#d47100",GREEN:"#007922",CYAN:"#009ac2",VIOLET:"#bca400",YELLOW:"#753cac",GRAY:"#646464",MAGENTA:"#9b2685",BROWN:"#6c3b00",RED:"#cb0021"},aW={fills:Object.values(UC),strokes:Object.values(iM)},lW=class $T extends Cp{static getWaterfallSeriesDefaultPositiveColors(){return{fill:UC.BLUE,stroke:iM.BLUE,label:{color:Pi}}}static getWaterfallSeriesDefaultNegativeColors(){return{fill:UC.ORANGE,stroke:iM.ORANGE,label:{color:Pi}}}static getWaterfallSeriesDefaultTotalColors(){return{fill:UC.GRAY,stroke:iM.GRAY,label:{color:Pi}}}getTemplateParameters(){const e=super.getTemplateParameters();return e.properties.set(Xc,$T.getWaterfallSeriesDefaultPositiveColors()),e.properties.set(Zc,$T.getWaterfallSeriesDefaultNegativeColors()),e.properties.set(Jc,$T.getWaterfallSeriesDefaultTotalColors()),e.properties.set(ed,[UC.ORANGE,UC.YELLOW,UC.GREEN]),e.properties.set(Qc,$T.getWaterfallSeriesDefaultTotalColors().stroke),e}getPalette(){return aW}},wD=()=>new Cp,aF=()=>new SD,cW={undefined:wD,null:wD,"ag-default":wD,"ag-sheets":()=>new sW,"ag-polychroma":()=>new eW,"ag-vivid":()=>new lW,"ag-material":()=>new $U},xk=Re(Re({},{undefined:aF,null:aF,"ag-default-dark":aF,"ag-sheets-dark":()=>new iW,"ag-polychroma-dark":()=>new XU,"ag-vivid-dark":()=>new oW,"ag-material-dark":()=>new jU}),cW);function lF(r){let e=function hW(r){return void 0===r||"string"==typeof r||r instanceof Cp?r:"object"==typeof r?function uW(r){if(null===r)return;let e=!0;const{baseTheme:t,palette:i,overrides:n}=r;if(void 0!==t&&"string"!=typeof t&&"object"!=typeof t&&(tt.warn(`invalid theme.baseTheme type ${typeof t}, expected (string | object).`),e=!1),void 0!==n&&"object"!=typeof n&&(tt.warn(`invalid theme.overrides type ${typeof n}, expected object.`),e=!1),"object"==typeof i){if(null!==i){const{fills:s,strokes:o}=i;void 0!==s&&!Array.isArray(s)&&(tt.warn("theme.overrides.fills must be undefined or an array"),e=!1),void 0!==o&&!Array.isArray(o)&&(tt.warn("theme.overrides.strokes must be undefined or an array"),e=!1)}}else void 0!==i&&(tt.warn(`invalid theme.palette type ${typeof i}, expected object.`),e=!1);return e?r:void 0}(r):void tt.warn(`invalid theme value type ${typeof r}, expected object or string.`)}(r);if(e instanceof Cp)return e;if(void 0===e||"string"==typeof e){const o=xk[e];return o?o():(tt.warnOnce(`the theme [${e}] is invalid, using [ag-default] instead.`),wD())}const t=[];let i;for(;"object"==typeof e;)t.push(e.overrides),i??(i=e.palette),e=e.baseTheme;const n={baseTheme:e,overrides:ri(...t),palette:i};return new((n.baseTheme?lF(n.baseTheme):wD()).constructor)(n)}function Tu(r){if(0===r.length)return;let e=1/0,t=-1/0;for(let n of r)n instanceof Date&&(n=n.getTime()),"number"==typeof n&&(n<e&&(e=n),n>t&&(t=n));const i=[e,t];return i.every(isFinite)?i:void 0}function Pk(r,e,t){return ED(r,e,t).extent}function ED(r,e,t){var i;let n=!1;return r.length>2&&(r=null!=(i=Tu(r))?i:[NaN,NaN]),isNaN(e)||(n||(n=e>r[0]),r=[e,r[1]]),isNaN(t)||(n||(n=t<r[1]),r=[r[0],t]),r[0]>r[1]&&(r=[]),{extent:r,clipped:n}}function DD(r,e){if(null==r||null==e||r.length!==e.length)return!1;for(let t=0;t<r.length;t++)if(Array.isArray(r[t])&&Array.isArray(e[t])){if(!DD(r[t],e[t]))return!1}else if(r[t]!==e[t])return!1;return!0}function nM(r){return typeof r>"u"?[]:Array.isArray(r)?r:[r]}function cF(r){return Array.from(new Set(r))}function dF(r,e){return r.reduce((t,i)=>{const s=e(i);return null!=t[s]||(t[s]=[]),t[s].push(i),t},{})}function uF(r,e,t=0){if(0===r.length)return[];const i=[];for(let n=0;n<e;n++)i.push(r.at((n+t)%r.length));return i}function hF(r){return(typeof window<"u"?window:void 0)?.[r]}var Ik=Date.now(),Un={create:(...r)=>Object.assign((...t)=>{Un.check(...r)&&("function"==typeof t[0]&&(t=nM(t[0]())),(()=>{const r=Date.now()-Ik;if(r>2e3){const e=(Math.floor(r/100)/10).toFixed(1);tt.log(`**** ${e}s since last log message ****`)}Ik=Date.now()})(),tt.log(...t))},{check:()=>Un.check(...r)}),check:(...r)=>(0===r.length&&r.push(!0),nM(hF("agChartsDebug")).some(t=>r.includes(t)))},Fk=class{constructor(r,e){var t,i;const s={shallow:["data"]},o=Cs(r,s),a=this.optionsType(o);this.sanityCheckAndCleanup(o),this.userOptions=o,this.activeTheme=lF(o.theme),this.seriesDefaults=this.getOptionsDefaults(o),this.specialOverrides=this.specialOverridesDefaults(Re({},e));const c=this.getSeriesThemeConfig(a),{axes:u={}}=c,g=rs(c,["axes","series"]);this.processedOptions=Cs(ri(this.userOptions,g,this.seriesDefaults),s),this.processAxesOptions(this.processedOptions,u),this.processSeriesOptions(this.processedOptions),(mt(this.processedOptions)||function gp(r){const e=ke(r);return Bi(r)&&"pie"!==e&&"donut"!==e}(this.processedOptions))&&null==(null==(t=this.processedOptions.legend)?void 0:t.enabled)&&(null!=(i=this.processedOptions).legend||(i.legend={}),this.processedOptions.legend.enabled=this.processedOptions.series.length>1),this.enableConfiguredOptions(this.processedOptions),wu.isEnterprise||function vD(r){var e,t,i,n;const s=[],o=function M(r){var e;return null!=(e=h[r])?e:"unknown"}(ke(r));for(const{type:a,chartTypes:c,optionsKey:u,optionsInnerKey:p,identifier:g}of V)if("unknown"===o||c.includes(o))if("root"===a||"legend"===a){const m=r[u];if(null==m)continue;p?m[p]&&(s.push(`${u}.${p}`),delete m[p]):(s.push(u),delete r[u])}else if("axis"===a){if(!("axes"in r)||null==(e=r.axes)||!e.some(m=>m.type===g))continue;s.push(`axis[type=${g}]`),r.axes=r.axes.filter(m=>m.type!==g)}else if("axis-option"===a){if(!("axes"in r)||null==(t=r.axes)||!t.some(m=>m[u]))continue;s.push(`axis.${u}`),r.axes.forEach(m=>{m[u]&&delete m[u]})}else if("series"===a){if(null==(i=r.series)||!i.some(m=>m.type===g))continue;s.push(`series[type=${g}]`),r.series=r.series.filter(m=>m.type!==g)}else if("series-option"===a){if(null==(n=r.series)||!n.some(m=>m[u]))continue;s.push(`series.${u}`),r.series.forEach(m=>{m[u]&&delete m[u]})}s.length&&tt.warnOnce(["unable to use these enterprise features as 'ag-charts-enterprise' has not been loaded:\n","",...s,"","See: https://charts.ag-grid.com/javascript/installation/"].join("\n"))}(this.processedOptions)}getOptions(){var r;return null!=(r=this.processedOptions)?r:{}}diffOptions(r){return Ar(r,this.processedOptions)}getSeriesThemeConfig(r){var e,t;return Cs(null!=(t=null==(e=this.activeTheme)?void 0:e.config[r])?t:{})}getOptionsDefaults(r){const t=function wU(r){var e;return Cs(null!=(e=nk[r])?e:{})}(this.optionsType(r));return function NU(r){var e,t;let i;for(const n of null!=(e=r.series)?e:[]){const{type:s="line"}=n,o=null==(t=ZI[s])?void 0:t.call(ZI,n);if(null!=o){if(null!=i&&i!=o)throw new Error("AG Charts - The provided series have incompatible directions");i=o}}return i}(r)&&this.swapAxesPosition(t),t}optionsType(r){var e,t,i;return null!=(i=null==(t=null==(e=r.series)?void 0:e[0])?void 0:t.type)?i:"line"}sanityCheckAndCleanup(r){var e;this.deprecationWarnings(r),this.axesTypeIntegrity(r),this.seriesTypeIntegrity(r),this.soloSeriesIntegrity(r),this.removeDisabledOptions(r),this.removeLeftoverSymbols(r),(null==(e=r.series)?void 0:e.some(t=>"bullet"===t.type))&&null!=r.sync&&!1!==r.sync.enabled&&(tt.warnOnce("bullet series cannot be synced, disabling synchronization."),delete r.sync)}swapAxesPosition(r){var e;if(mt(r)){const[t,i]=null!=(e=r.axes)?e:[];r.axes=[nt(Re({},t),{position:i.position}),nt(Re({},i),{position:t.position})]}}processAxesOptions(r,e){"axes"in r&&(r.axes=r.axes.map(t=>{var i,n,s,o;const a=ri(null==(i=this.seriesDefaults.axes)?void 0:i.find(({type:D})=>D===t.type),null==(n=e[t.type])?void 0:n[t.position],e[t.type]),{crossLines:c}=a,u=rs(a,["crossLines"]);t.crossLines&&(t.crossLines=$O(t.crossLines,c));const p=null==(s=u.gridLine)?void 0:s.style;(null==(o=t.gridLine)?void 0:o.style)&&p?.length&&(t.gridLine.style=t.gridLine.style.map((D,R)=>null!=D.stroke||null!=D.lineDash?ri(D,p.at(R%p.length)):D));const g=ri(t,u);return rs(g,["top","right","bottom","left"])}))}processSeriesOptions(r){const e=this.getDefaultSeriesType(r),t=this.getTooltipPositionDefaults(r),i={colourIndex:0,userPalette:Boolean(ql(r.theme)&&r.theme.palette)},n=r.series.map(s=>{var a;null!=s.type||(s.type=e);const c=null!=(a=this.getSeriesThemeConfig(s.type).series)?a:{},{innerLabels:u}=c,p=rs(c,["innerLabels"]),g=ri(this.getSeriesGroupingOptions(s),s,t,p,this.getSeriesPalette(s.type,i));return g.innerLabels&&(g.innerLabels=$O(g.innerLabels,u)),this.activeTheme.templateTheme(g)});r.series=this.setSeriesGroupingOptions(n)}getSeriesPalette(r,e){const t=function TU(r){return rk[r]}(r),{colourIndex:i,userPalette:n}=e,{fills:s=[],strokes:o=[]}=this.activeTheme.palette;return t?.({userPalette:n,colorsCount:Math.max(s.length,o.length),themeTemplateParameters:this.activeTheme.getTemplateParameters(),takeColors:a=>(e.colourIndex+=a,{fills:uF(s,a,i),strokes:uF(o,a,i)})})}getSeriesGroupingOptions(r){const e=function AU(r){return lk.has(r)}(r.type),t=function RU(r){return ak.has(r)}(r.type),i=function OU(r){return ck.has(r)}(r.type);r.grouped&&!e&&tt.warnOnce(`unsupported grouping of series type "${r.type}".`),(r.stacked||r.stackGroup)&&!t&&tt.warnOnce(`unsupported stacking of series type "${r.type}".`);let{grouped:n,stacked:s}=r;return s??(s=(i||null!=r.stackGroup)&&!(e&&n)),n??(n=!0),{stacked:t&&s,grouped:e&&n&&!(t&&s)}}setSeriesGroupingOptions(r){const e=this.getSeriesGrouping(r);Un.create(!0,"opts")("setSeriesGroupingOptions() - series grouping: ",e);const t={},i=e.reduce((n,s)=>{var o;return"default"===s.groupType||(null!=n[o=s.seriesType]||(n[o]=0),n[s.seriesType]+="stack"===s.groupType?1:s.series.length),n},{});return e.flatMap(n=>{var s;switch(null!=t[s=n.seriesType]||(t[s]=0),n.groupType){case"stack":const a=t[n.seriesType]++;return n.series.map((c,u)=>Object.assign(c,{seriesGrouping:{groupIndex:a,groupCount:i[n.seriesType],stackIndex:u,stackCount:n.series.length}}));case"group":return n.series.map(c=>Object.assign(c,{seriesGrouping:{groupIndex:t[n.seriesType]++,groupCount:i[n.seriesType],stackIndex:0,stackCount:0}}))}return n.series}).map(n=>rs(n,["stacked","grouped"]))}getSeriesGroupId(r){var e;return r.stacked||r.grouped?[r.type,r.xKey,r.stacked?null!=(e=r.stackGroup)?e:"stacked":"grouped"].filter(Boolean).join("-"):"default-ag-charts-group"}getSeriesGrouping(r){const e=new Map;return r.reduce((t,i)=>{const n=i.type;if(i.stacked||i.grouped){const s=this.getSeriesGroupId(i);if(!e.has(s)){const a={groupType:i.stacked?"stack":"group",seriesType:n,series:[]};e.set(s,a),t.push(a)}e.get(s).series.push(i)}else t.push({groupType:"default",seriesType:n,series:[i]});return t},[])}getDefaultSeriesType(r){if(mt(r))return"line";if(pi(r))return"treemap";if(Bi(r))return"pie";throw new Error("Invalid chart options type detected.")}getTooltipPositionDefaults(r){var e;const t=null==(e=r.tooltip)?void 0:e.position;if(!oa(t))return;const{type:i,xOffset:n,yOffset:s}=t,o={};return Ja(i)&&zO(bO,i)&&(o.type=i),Ei(n)&&(o.xOffset=n),Ei(s)&&(o.yOffset=s),{tooltip:{position:o}}}deprecationWarnings(r){Object.entries({yKeys:"yKey",yNames:"yName"}).forEach(([t,i])=>{var n;null!=(n=r.series)&&n.some(s=>null!=s[t])&&tt.warnOnce(`Property [series.${t}] is deprecated, please use [series.${i}] and multiple series instead.`)})}axesTypeIntegrity(r){var e;if("axes"in r){const t=null!=(e=r.axes)?e:[];for(const{type:i}of t)mD(i)||(delete r.axes,tt.warnOnce(`unknown axis type: ${i}; expected one of: ${BO.axesTypes.join(", ")}, ignoring.`))}}seriesTypeIntegrity(r){var e;const t=null!=(e=r.series)?e:[];r.series=t.filter(({type:i})=>{if(null==i||function gD(r){return null!=r&&v.has(r)}(i)||W(i))return!0;tt.warnOnce(`unknown series type: ${i}; expected one of: ${v.seriesTypes.join(", ")}`)})}soloSeriesIntegrity(r){const e=r.series;if(e&&e.length>1&&e.some(t=>JI(t.type))){const t=this.optionsType(r);if(JI(t))tt.warn(`series[0] of type '${t}' is incompatible with other series types. Only processing series[0]`),r.series=e.slice(0,1);else{const{solo:i,nonSolo:n}=dF(e,o=>JI(o.type)?"solo":"nonSolo"),s=cF(i.map(o=>o.type)).join(", ");tt.warn(`Unable to mix these series types with the lead series type: ${s}`),r.series=n}}}enableConfiguredOptions(r){Eu(this.userOptions,(e,t)=>{t&&"enabled"in t&&!t._enabledFromTheme&&null==e.enabled&&(t.enabled=!0)},{skip:["data","theme"]},r),Eu(r,e=>{null!=e._enabledFromTheme&&delete e._enabledFromTheme},{skip:["data","theme"]})}removeDisabledOptions(r){Eu(r,e=>{"enabled"in e&&!1===e.enabled&&Object.keys(e).forEach(t=>{"enabled"!==t&&delete e[t]})},{skip:["data","theme"]})}removeLeftoverSymbols(r){Eu(r,e=>{if(e&&ql(e))for(const[t,i]of Object.entries(e))$I(i)&&delete e[t]},{skip:["data"]})}specialOverridesDefaults(r){if(null==r.window)if(typeof window<"u")r.window=window;else{if(!(typeof global<"u"))throw new Error("AG Charts - unable to resolve global window");r.window=global.window}if(null==r.document)if(typeof document<"u")r.document=document;else{if(!(typeof global<"u"))throw new Error("AG Charts - unable to resolve global document");r.document=global.document}return r}};function sM(){return(r,e)=>{const t=[`Property [${r}] is deprecated.`,e].filter(Boolean).join(" ");tt.warnOnce(t)}}function WC(r,e){const t=sM(),i=e?.default;return Yl((n,s,o)=>(o!==i&&t(s.toString(),r),o))}function gW(r,e){const t=sM();return Yl((i,n,s)=>(s!==i[r]&&(t(n.toString(),`Use [${r}] instead.`),i[r]=e?e(s):s),h_),(i,n)=>(t(n.toString(),`Use [${r}] instead.`),i[r]))}var Nk={};function pF(r,e){const t={};if(Array.isArray(e))for(let i=0;i<r.length;i++)t[`${r[i]}`]=e[i];else for(let i=0;i<r.length;i++)t[`${r[i]}`]=e;return t}sa(Nk,{NODE_UPDATE_PHASES:()=>qk,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Do,fromToMotion:()=>cn,staticFromToMotion:()=>Ou});var fF=new Map;function Lk(){fF.clear()}function Ru(r){var e;const t=r.constructor,i=Object.hasOwn(t,"className")?t.className:t.name;if(!i)throw new Error(`The ${t} is missing the 'className' property.`);const n=(null!=(e=fF.get(i))?e:0)+1;return fF.set(i,n),`${i}-${n}`}var Ug=(r=>(r[r.NONE=0]="NONE",r[r.TRIVIAL=1]="TRIVIAL",r[r.MINOR=2]="MINOR",r[r.MAJOR=3]="MAJOR",r))(Ug||{}),vW=function mW(){try{return new Function("return true"),!0}catch{return!1}}();function at(r){const{changeCb:e,convertor:t}=r??{};return function(i,n){const s=`__${n}`;i[n]||(vW&&null==e&&null==t?function CW(r,e,t,i){const{redraw:n=1,type:s="normal",checkDirtyOnAssignment:o=!1}=i??{},a=new Function("value",`\n        const oldValue = this.${t};\n        if (value !== oldValue) {\n            this.${t} = value;\n            ${"normal"===s?`this.markDirty(this, ${n});`:""}\n            ${"transform"===s?`this.markDirtyTransform(${n});`:""}\n            ${"path"===s?`if (!this._dirtyPath) { this._dirtyPath = true; this.markDirty(this, ${n}); }`:""}\n            ${"font"===s?`if (!this._dirtyFont) { this._dirtyFont = true; this.markDirty(this, ${n}); }`:""}\n        }\n        ${o?"if (value != null && value._dirty > 0) { this.markDirty(value, value._dirty); }":""}\n`),c=new Function(`return this.${t};`);Object.defineProperty(r,e,{set:a,get:c,enumerable:!0,configurable:!0})}(i,n,s,r):function yW(r,e,t,i){const{redraw:n=1,type:s="normal",changeCb:o,convertor:a,checkDirtyOnAssignment:c=!1}=i??{};Object.defineProperty(r,e,{set:function(g){const m=this[t];(g=a?a(g):g)!==m&&(this[t]=g,"normal"===s&&this.markDirty(this,n),"transform"===s&&this.markDirtyTransform(n),"path"===s&&!this._dirtyPath&&(this._dirtyPath=!0,this.markDirty(this,n)),"font"===s&&!this._dirtyFont&&(this._dirtyFont=!0,this.markDirty(this,n)),o&&o(this)),c&&null!=g&&g._dirty>0&&this.markDirty(g,g._dirty)},get:function(){return this[t]},enumerable:!0,configurable:!0})}(i,n,s,r))}}function Ti(r,e,t){return Math.min(t,Math.max(r,e))}function rM(r,e){const[t,i]=yp(e);return Ti(t,r,i)}function yp(r){return r.length?[Math.min(...r),Math.max(...r)]:[]}function S_(r){const[e,t]=yp(r);return t-e}function jC(r,e,t=1e-10){return Math.abs(r-e)<t}function TD(r){return-1===Math.sign(r)||Object.is(r,-0)}function gF(r,e=2){const t=Yt(10,e);return Math.round(r*t)/t}function oM(r,e=2){const t=Math.floor(Math.log(Math.abs(r))/Math.LN10);return t>=0||!isFinite(t)?r.toFixed(e):r.toFixed(Math.abs(t)-1+e)}function aM(r,e){return Math.floor(r%e+(r<0?e:0))}function mF(r,e=10){const[,t=""]=(Math.abs(r)%1).toLocaleString("en-GB",{minimumFractionDigits:0,maximumFractionDigits:e}).split(".");return t.length}function kk(r,e,t=1/0){const i={nearest:void 0,distanceSquared:t};for(const n of e){const s=n.distanceSquared(r);if(0===s)return{nearest:n,distanceSquared:0};s<i.distanceSquared&&(i.nearest=n,i.distanceSquared=s)}return i}function bW(r,e,t=1/0){const i=e.transformPoint(r.x,r.y),n={nearest:void 0,distanceSquared:t};for(const s of e.children){const{nearest:o,distanceSquared:a}=s.nearestSquared(i,n.distanceSquared);if(0===a)return{nearest:o,distanceSquared:a};a<n.distanceSquared&&(n.nearest=o,n.distanceSquared=a)}return n}var vF=class $L{constructor(e,t,i,n){this.x=e,this.y=t,this.width=i,this.height=n}clone(){const{x:e,y:t,width:i,height:n}=this;return new $L(e,t,i,n)}equals(e){return this.x===e.x&&this.y===e.y&&this.width===e.width&&this.height===e.height}containsPoint(e,t){return e>=this.x&&e<=this.x+this.width&&t>=this.y&&t<=this.y+this.height}collidesBBox(e){return this.x<e.x+e.width&&this.x+this.width>e.x&&this.y<e.y+e.height&&this.y+this.height>e.y}isInfinite(){return Math.abs(this.x)===1/0||Math.abs(this.y)===1/0||Math.abs(this.width)===1/0||Math.abs(this.height)===1/0}distanceSquared(e){if(this.containsPoint(e.x,e.y))return 0;const t=e.x-Ti(this.x,e.x,this.x+this.width),i=e.y-Ti(this.y,e.y,this.y+this.height);return t*t+i*i}static nearestBox(e,t){return kk(e,t)}shrink(e,t){const i=(n,s)=>{switch(n){case"top":this.y+=s;case"bottom":this.height-=s;break;case"left":this.x+=s;case"right":this.width-=s;break;case"vertical":this.y+=s,this.height-=2*s;break;case"horizontal":this.x+=s,this.width-=2*s;break;case void 0:this.x+=s,this.width-=2*s,this.y+=s,this.height-=2*s}};return"number"==typeof e?i(t,e):"object"==typeof e&&Object.entries(e).forEach(([n,s])=>i(n,s)),this}grow(e,t){if("number"==typeof e)this.shrink(-e,t);else{const i=Re({},e);for(const n in i)i[n]*=-1;this.shrink(i)}return this}static merge(e){let t=1/0,i=1/0,n=-1/0,s=-1/0;return e.forEach(o=>{o.x<t&&(t=o.x),o.y<i&&(i=o.y),o.x+o.width>n&&(n=o.x+o.width),o.y+o.height>s&&(s=o.y+o.height)}),new $L(t,i,n-t,s-i)}};vF.zero=new vF(0,0,0,0);var Bt=vF,CF=class KT{get e(){return[...this.elements]}constructor(e=[1,0,0,1,0,0]){this.elements=e}setElements(e){const t=this.elements;return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],this}get identity(){const e=this.elements;return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]}AxB(e,t,i){const s=e[1]*t[0]+e[3]*t[1],o=e[0]*t[2]+e[2]*t[3],a=e[1]*t[2]+e[3]*t[3],c=e[0]*t[4]+e[2]*t[5]+e[4],u=e[1]*t[4]+e[3]*t[5]+e[5];(i=i??e)[0]=e[0]*t[0]+e[2]*t[1],i[1]=s,i[2]=o,i[3]=a,i[4]=c,i[5]=u}multiplySelf(e){return this.AxB(this.elements,e.elements),this}multiply(e){const t=new Array(6);return this.AxB(this.elements,e.elements,t),new KT(t)}preMultiplySelf(e){return this.AxB(e.elements,this.elements,this.elements),this}inverse(){const e=this.elements;let t=e[0],i=e[1],n=e[2],s=e[3];const o=e[4],a=e[5],c=1/(t*s-i*n);return t*=c,i*=c,n*=c,s*=c,new KT([s,-i,-n,t,n*a-s*o,i*o-t*a])}inverseTo(e){const t=this.elements;let i=t[0],n=t[1],s=t[2],o=t[3];const a=t[4],c=t[5],u=1/(i*o-n*s);return i*=u,n*=u,s*=u,o*=u,e.setElements([o,-n,-s,i,s*c-o*a,n*a-i*c]),this}invertSelf(){const e=this.elements;let t=e[0],i=e[1],n=e[2],s=e[3];const o=e[4],a=e[5],c=1/(t*s-i*n);return t*=c,i*=c,n*=c,s*=c,e[0]=s,e[1]=-i,e[2]=-n,e[3]=t,e[4]=n*a-s*o,e[5]=i*o-t*a,this}transformPoint(e,t){const i=this.elements;return{x:e*i[0]+t*i[2]+i[4],y:e*i[1]+t*i[3]+i[5]}}transformBBox(e,t){const i=this.elements,n=i[0],s=i[1],o=i[2],a=i[3],c=.5*e.width,u=.5*e.height,p=e.x+c,g=e.y+u,m=Math.abs(c*n)+Math.abs(u*o),y=Math.abs(c*s)+Math.abs(u*a);return t||(t=new Bt(0,0,0,0)),t.x=p*n+g*o+i[4]-m,t.y=p*s+g*a+i[5]-y,t.width=m+m,t.height=y+y,t}toContext(e){if(this.identity)return;const t=this.elements;e.transform(t[0],t[1],t[2],t[3],t[4],t[5])}static flyweight(e){return KT.instance.setElements(e.elements)}static updateTransformMatrix(e,t,i,n,s,o,a){const[c,u]=[0,0],p=t,g=i;let m,y;1===p&&1===g?(m=0,y=0):(m=a?.scalingCenterX??c,y=a?.scalingCenterY??u);const b=n,_=Math.cos(b),E=Math.sin(b);let D,R;0===b?(D=0,R=0):(D=a?.rotationCenterX??c,R=a?.rotationCenterY??u);const k=m*(1-p)-D,U=y*(1-g)-R;return e.setElements([_*p,E*p,-E*g,_*g,_*k-E*U+D+s,E*k+_*U+R+o]),e}static fromContext(e){const t=e.getTransform();return new KT([t.a,t.b,t.c,t.d,t.e,t.f])}};CF.instance=new CF;var td=CF,Gk=(r=>(r[r.All=0]="All",r[r.None=1]="None",r))(Gk||{}),Vk=r=>{r.parent&&(r.parent.dirtyZIndex=!0),r.zIndexChanged()},aa=class Q2 extends class{constructor(){this._dirty=3}markDirty(r,e=1){this._dirty<e&&(this._dirty=e)}markClean(r){this._dirty=0}isDirty(){return this._dirty>0}}{constructor({isVirtual:e,tag:t}={}){super(),this.serialNumber=Q2._nextSerialNumber++,this.id=Ru(this),this.isContainerNode=!1,this._virtualChildren=[],this._children=[],this.childSet={},this.matrix=new td,this.inverseMatrix=new td,this.dirtyTransform=!1,this.scalingX=1,this.scalingY=1,this.scalingCenterX=null,this.scalingCenterY=null,this.rotationCenterX=null,this.rotationCenterY=null,this.rotation=0,this.translationX=0,this.translationY=0,this.visible=!0,this.dirtyZIndex=!1,this.zIndex=0,this.zIndexSubOrder=void 0,this.pointerEvents=0,this.isVirtual=e??!1,this.tag=t??NaN}get datum(){var e,t;return null!=(t=this._datum)?t:null==(e=this._parent)?void 0:e.datum}get previousDatum(){return this._previousDatum}set datum(e){this._datum!==e&&(this._previousDatum=this._datum),this._datum=e}_setLayerManager(e){this._layerManager=e,this._debug=e?.debug;for(const t of this._children)t._setLayerManager(e);for(const t of this._virtualChildren)t._setLayerManager(e)}get layerManager(){return this._layerManager}get parent(){return this._parent}get children(){if(0===this._virtualChildren.length)return this._children;const e=[...this._children];for(const t of this._virtualChildren)e.push(...t.children);return e}get virtualChildren(){return this._virtualChildren}hasVirtualChildren(){return this._virtualChildren.length>0}setProperties(e,t){const i=t??Object.keys(e);for(const n of i)this[n]=e[n];return this}append(e){Array.isArray(e)||(e=[e]);for(const t of e){if(t.parent)throw new Error(`${t} already belongs to another parent: ${t.parent}.`);if(t.layerManager)throw new Error(`${t} already belongs to a scene: ${t.layerManager}.`);if(this.childSet[t.id])throw new Error(`Duplicate ${t.constructor.name} node: ${t}`);t.isVirtual?this._virtualChildren.push(t):this._children.push(t),this.childSet[t.id]=!0,t._parent=this,t._setLayerManager(this.layerManager)}this.dirtyZIndex=!0,this.markDirty(this,3)}appendChild(e){return this.append(e),e}removeChild(e){const t=()=>{throw new Error("The node to be removed is not a child of this node.")};if(e.parent!==this&&t(),e.isVirtual){const i=this._virtualChildren.indexOf(e);i<0&&t(),this._virtualChildren.splice(i,1)}else{const i=this._children.indexOf(e);i<0&&t(),this._children.splice(i,1)}return delete this.childSet[e.id],e._parent=void 0,e._setLayerManager(),this.dirtyZIndex=!0,this.markDirty(e,3),e}calculateCumulativeMatrix(){this.computeTransformMatrix();const e=td.flyweight(this.matrix);let t=this.parent;for(;t;)t.computeTransformMatrix(),e.preMultiplySelf(t.matrix),t=t.parent;return e}transformPoint(e,t){return this.calculateCumulativeMatrix().invertSelf().transformPoint(e,t)}inverseTransformPoint(e,t){return this.calculateCumulativeMatrix().transformPoint(e,t)}transformBBox(e){return this.calculateCumulativeMatrix().invertSelf().transformBBox(e)}inverseTransformBBox(e){return this.calculateCumulativeMatrix().transformBBox(e)}markDirtyTransform(){this.dirtyTransform=!0,this.markDirty(this,3)}containsPoint(e,t){return!1}pickNode(e,t){var i;if(!this.visible||1===this.pointerEvents||!this.containsPoint(e,t))return;const n=this.children;if(n.length>1e3)for(let s=n.length-1;s>=0;s--){const o=n[s],c=(null==(i=o.computeTransformedBBox())?void 0:i.containsPoint(e,t))?o.pickNode(e,t):void 0;if(c)return c}else if(n.length)for(let s=n.length-1;s>=0;s--){const o=n[s].pickNode(e,t);if(o)return o}else if(!this.isContainerNode)return this}findNodes(e){const t=e(this)?[this]:[];for(const i of this.children){const n=i.findNodes(e);n&&t.push(...n)}return t}computeBBox(){}computeTransformedBBox(){const e=this.computeBBox();if(!e)return;this.computeTransformMatrix();const t=td.flyweight(this.matrix);let i=this.parent;for(;i;)i.computeTransformMatrix(),t.preMultiplySelf(i.matrix),i=i.parent;return t.transformBBox(e,e),e}computeTransformMatrix(){if(!this.dirtyTransform)return;const{matrix:e,scalingX:t,scalingY:i,rotation:n,translationX:s,translationY:o,scalingCenterX:a,scalingCenterY:c,rotationCenterX:u,rotationCenterY:p}=this;td.updateTransformMatrix(e,t,i,n,s,o,{scalingCenterX:a,scalingCenterY:c,rotationCenterX:u,rotationCenterY:p}),e.inverseTo(this.inverseMatrix),this.dirtyTransform=!1}render(e){const{stats:t}=e;this._dirty=0,t&&t.nodesRendered++}clearBBox(e){const t=this.computeBBox();if(null==t)return;const{x:i,y:n,width:s,height:o}=t,a=this.transformPoint(i,n),c=this.transformPoint(i+s,n+o);e.clearRect(a.x,a.y,c.x-a.x,c.y-a.y)}markDirty(e,t=1,i=t){this._dirty>t||this._dirty===t&&t===i||(this._dirty=t,this.parent?this.parent.markDirty(this,i):this.layerManager&&this.layerManager.markDirty())}get dirty(){return this._dirty}markClean(e){const{force:t=!1,recursive:i=!0}=e??{};if(0!==this._dirty||t){if(this._dirty=0,!1!==i)for(const n of this._virtualChildren)n.markClean({force:t});if(!0===i)for(const n of this._children)n.markClean({force:t})}}visibilityChanged(){}get nodeCount(){let e=1,t=this._dirty>=0||this.dirtyTransform?1:0,i=this.visible?1:0;const n=s=>{const{count:o,visibleCount:a,dirtyCount:c}=s.nodeCount;e+=o,i+=a,t+=c};for(const s of this._children)n(s);for(const s of this._virtualChildren)n(s);return{count:e,visibleCount:i,dirtyCount:t}}zIndexChanged(){}};aa._nextSerialNumber=0,I([at({type:"transform"})],aa.prototype,"scalingX",2),I([at({type:"transform"})],aa.prototype,"scalingY",2),I([at({type:"transform"})],aa.prototype,"scalingCenterX",2),I([at({type:"transform"})],aa.prototype,"scalingCenterY",2),I([at({type:"transform"})],aa.prototype,"rotationCenterX",2),I([at({type:"transform"})],aa.prototype,"rotationCenterY",2),I([at({type:"transform"})],aa.prototype,"rotation",2),I([at({type:"transform"})],aa.prototype,"translationX",2),I([at({type:"transform"})],aa.prototype,"translationY",2),I([at({redraw:3,changeCb:r=>r.visibilityChanged()})],aa.prototype,"visible",2),I([at({redraw:1,changeCb:Vk})],aa.prototype,"zIndex",2),I([at({redraw:1,changeCb:Vk})],aa.prototype,"zIndexSubOrder",2);var b_=aa,yF=r=>{const e=r<0?-1:1,t=Math.abs(r);return t<=.04045?r/12.92:e*Yt((t+.055)/1.055,2.4)},SF=r=>{const e=r<0?-1:1,t=Math.abs(r);return t>.0031308?e*(1.055*Yt(t,1/2.4)-.055):12.92*r},bF=class bi{constructor(e,t,i,n=1){this.r=Ti(0,e||0,1),this.g=Ti(0,t||0,1),this.b=Ti(0,i||0,1),this.a=Ti(0,n||0,1)}static validColorString(e){return e.indexOf("#")>=0?!!bi.parseHex(e):e.indexOf("rgb")>=0?!!bi.stringToRgba(e):!!bi.nameToHex[e.toLowerCase()]}static fromString(e){if(e.indexOf("#")>=0)return bi.fromHexString(e);const t=bi.nameToHex[e.toLowerCase()];if(t)return bi.fromHexString(t);if(e.indexOf("rgb")>=0)return bi.fromRgbaString(e);throw new Error(`Invalid color string: '${e}'`)}static tryParseFromString(e){try{return bi.fromString(e)}catch{return tt.warnOnce(`invalid color string: '${e}'.`),bi.fromArray([0,0,0])}}static parseHex(e){let t;switch((e=e.replace(/ /g,"").slice(1)).length){case 6:case 8:t=[];for(let i=0;i<e.length;i+=2)t.push(parseInt(`${e[i]}${e[i+1]}`,16));break;case 3:case 4:t=e.split("").map(i=>parseInt(i,16)).map(i=>i+16*i)}if(t?.length>=3&&t.every(i=>i>=0))return 3===t.length&&t.push(255),t}static fromHexString(e){const t=bi.parseHex(e);if(t){const[i,n,s,o]=t;return new bi(i/255,n/255,s/255,o/255)}throw new Error(`Malformed hexadecimal color string: '${e}'`)}static stringToRgba(e){let[t,i]=[NaN,NaN];for(let a=0;a<e.length;a++){const c=e[a];if(t||"("!==c){if(")"===c){i=a;break}}else t=a}const n=t&&i&&e.substring(t+1,i);if(!n)return;const s=n.split(","),o=[];for(let a=0;a<s.length;a++){const c=s[a];let u=parseFloat(c);if(isNaN(u))return;c.indexOf("%")>=0?(u=Ti(0,u,100),u/=100):3===a?u=Ti(0,u,1):(u=Ti(0,u,255),u/=255),o.push(u)}return o}static fromRgbaString(e){const t=bi.stringToRgba(e);if(t){if(3===t.length)return new bi(t[0],t[1],t[2]);if(4===t.length)return new bi(t[0],t[1],t[2],t[3])}throw new Error(`Malformed rgb/rgba color string: '${e}'`)}static fromArray(e){if(4===e.length)return new bi(e[0],e[1],e[2],e[3]);if(3===e.length)return new bi(e[0],e[1],e[2]);throw new Error("The given array should contain 3 or 4 color components (numbers).")}static fromHSB(e,t,i,n=1){const s=bi.HSBtoRGB(e,t,i);return new bi(s[0],s[1],s[2],n)}static fromHSL(e,t,i,n=1){const s=bi.HSLtoRGB(e,t,i);return new bi(s[0],s[1],s[2],n)}static fromOKLCH(e,t,i,n=1){const s=bi.OKLCHtoRGB(e,t,i);return new bi(s[0],s[1],s[2],n)}static padHex(e){return 1===e.length?"0"+e:e}toHexString(){let e="#"+bi.padHex(Math.round(255*this.r).toString(16))+bi.padHex(Math.round(255*this.g).toString(16))+bi.padHex(Math.round(255*this.b).toString(16));return this.a<1&&(e+=bi.padHex(Math.round(255*this.a).toString(16))),e}toRgbaString(e=3){const t=[Math.round(255*this.r),Math.round(255*this.g),Math.round(255*this.b)],i=Math.pow(10,e);return 1!==this.a?(t.push(Math.round(this.a*i)/i),`rgba(${t.join(", ")})`):`rgb(${t.join(", ")})`}toString(){return 1===this.a?this.toHexString():this.toRgbaString()}toHSB(){return bi.RGBtoHSB(this.r,this.g,this.b)}static RGBtoOKLCH(e,t,i){const n=yF(e),s=yF(t),o=yF(i),a=Math.cbrt(.4122214708*n+.5363325363*s+.0514459929*o),c=Math.cbrt(.2119034982*n+.6806995451*s+.1073969566*o),u=Math.cbrt(.0883024619*n+.2817188376*s+.6299787005*o),p=.2104542553*a+.793617785*c-.0040720468*u,g=1.9779984951*a-2.428592205*c+.4505937099*u,m=.0259040371*a+.7827717662*c-.808675766*u,y=180*Math.atan2(m,g)/Math.PI;return[p,Math.hypot(g,m),y>=0?y:y+360]}static OKLCHtoRGB(e,t,i){const n=e,s=t*Math.cos(i*Math.PI/180),o=t*Math.sin(i*Math.PI/180),a=Yt(n+.3963377774*s+.2158037573*o,3),c=Yt(n-.1055613458*s-.0638541728*o,3),u=Yt(n-.0894841775*s-1.291485548*o,3),g=-1.2684380046*a+2.6097574011*c-.3413193965*u,m=-.0041960863*a-.7034186147*c+1.707614701*u;return[SF(4.0767416621*a-3.3077115913*c+.2309699292*u),SF(g),SF(m)]}static RGBtoHSL(e,t,i){const n=Math.min(e,t,i),s=Math.max(e,t,i),o=(s+n)/2;let a,c;if(s===n)a=NaN,c=0;else{const u=s-n;c=o>.5?u/(2-s-n):u/(s+n),a=s===e?(t-i)/u+(t<i?6:0):s===t?(i-e)/u+2:(e-t)/u+4,a*=60}return[a,c,o]}static HSLtoRGB(e,t,i){if(0===t)return[i,i,i];const n=i<.5?i*(1+t):i+t-i*t,s=2*i-n;function o(p){return p<0&&(p+=1),p>1&&(p-=1),p<1/6?s+6*(n-s)*p:p<.5?n:p<2/3?s+(n-s)*(2/3-p)*6:s}return[o(e/360+1/3),o(e/360),o(e/360-1/3)]}static RGBtoHSB(e,t,i){const n=Math.min(e,t,i),s=Math.max(e,t,i);let a=NaN;if(n!==s){const c=s-n,u=(s-e)/c,p=(s-t)/c,g=(s-i)/c;a=e===s?g-p:t===s?2+u-g:4+p-u,a/=6,a<0&&(a+=1)}return[360*a,0!==s?(s-n)/s:0,s]}static HSBtoRGB(e,t,i){isNaN(e)&&(e=0),e=(e%360+360)%360/360;let n=0,s=0,o=0;if(0===t)n=s=o=i;else{const a=6*(e-Math.floor(e)),c=a-Math.floor(a),u=i*(1-t),p=i*(1-t*c),g=i*(1-t*(1-c));switch(a>>0){case 0:n=i,s=g,o=u;break;case 1:n=p,s=i,o=u;break;case 2:n=u,s=i,o=g;break;case 3:n=u,s=p,o=i;break;case 4:n=g,s=u,o=i;break;case 5:n=i,s=u,o=p}}return[n,s,o]}derive(e,t,i,n){const s=bi.RGBtoHSB(this.r,this.g,this.b);let o=s[2];0==o&&i>1&&(o=.05);const a=((s[0]+e)%360+360)%360,c=Ti(0,s[1]*t,1);o=Ti(0,o*i,1);const u=Ti(0,this.a*n,1),p=bi.HSBtoRGB(a,c,o);return p.push(u),bi.fromArray(p)}brighter(){return this.derive(0,1,1/.7,1)}darker(){return this.derive(0,1,.7,1)}static interpolate(e,t){const i=bi.tryParseFromString(e),n=bi.tryParseFromString(t);return s=>{const o=(c,u)=>c*(1-s)+u*s;return new bi(o(i.r,n.r),o(i.g,n.g),o(i.b,n.b),o(i.a,n.a)).toString()}}};bF.didDebug=!1,bF.nameToHex=Object.freeze({aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aqua:"#00FFFF",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blue:"#0000FF",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",fuchsia:"#FF00FF",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",gray:"#808080",green:"#008000",greenyellow:"#ADFF2F",grey:"#808080",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgray:"#D3D3D3",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",lime:"#00FF00",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",maroon:"#800000",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",navy:"#000080",oldlace:"#FDF5E6",olive:"#808000",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",purple:"#800080",rebeccapurple:"#663399",red:"#FF0000",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",silver:"#C0C0C0",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",teal:"#008080",thistle:"#D8BFD8",tomato:"#FF6347",transparent:"#00000000",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",white:"#FFFFFF",whitesmoke:"#F5F5F5",yellow:"#FFFF00",yellowgreen:"#9ACD32"});var Au=bF;function RD(r,e){return t=>Number(r)*(1-t)+Number(e)*t}var _F={};sa(_F,{easeIn:()=>wW,easeInOut:()=>EW,easeInOutQuad:()=>RW,easeInQuad:()=>DW,easeOut:()=>AD,easeOutQuad:()=>TW,inverseEaseOut:()=>Hk,linear:()=>Bk});var Bk=r=>r,wW=r=>1-Math.cos(r*Math.PI/2),AD=r=>Math.sin(r*Math.PI/2),EW=r=>-(Math.cos(r*Math.PI)-1)/2,DW=r=>r*r,TW=r=>1-Yt(1-r,2),RW=r=>r<.5?2*r*r:1-Yt(-2*r+2,2)/2,Hk=r=>2*Math.asin(r)/Math.PI,Uk={animationDuration:1,animationDelay:0},Wk={animationDuration:.25,animationDelay:0},jk={animationDuration:.5,animationDelay:.25},wF={animationDuration:.25,animationDelay:.75},zk={animationDuration:.2,animationDelay:1},zC=["initial","remove","update","add","trailing","end"],$k={initial:Uk,add:wF,remove:Wk,update:jk,trailing:zk,end:{animationDelay:1.2,animationDuration:0}},Kk=(r=>(r.Loop="loop",r.Reverse="reverse",r))(Kk||{});function cM(r){return function AW(r){return r.every(e=>e instanceof b_)}(r)?{nodes:r,selections:[]}:{nodes:[],selections:r}}var Yk=class{constructor(r){var e,t,i,n,s,o,a,c;this.isComplete=!1,this.elapsed=0,this.iteration=0,this.isPlaying=!1,this.isReverse=!1,this.id=r.id,this.groupId=r.groupId,this.autoplay=null==(e=r.autoplay)||e,this.ease=null!=(t=r.ease)?t:Bk,this.phase=r.phase;const u=null!=(i=r.duration)?i:$k[this.phase].animationDuration;this.duration=u*r.defaultDuration,this.delay=(null!=(n=r.delay)?n:0)*r.defaultDuration,this.onComplete=r.onComplete,this.onPlay=r.onPlay,this.onStop=r.onStop,this.onUpdate=r.onUpdate,this.interpolate=this.createInterpolator(r.from,r.to),!0===r.skip?(null==(s=this.onUpdate)||s.call(this,r.to,!1,this),null==(o=this.onStop)||o.call(this,this),null==(a=this.onComplete)||a.call(this,this),this.isComplete=!0):this.autoplay&&(this.play(),null==(c=this.onUpdate)||c.call(this,r.from,!0,this)),!1!==r.collapsable&&(this.duration=this.checkCollapse(r,this.duration))}checkCollapse(r,e){let t=r.from===r.to;return t||(t="object"==typeof r.from&&null==Ar(r.from,r.to)),t?0:e}play(){var r;!this.isPlaying&&!this.isComplete&&(this.isPlaying=!0,null==(r=this.onPlay)||r.call(this,this))}pause(){this.isPlaying&&(this.isPlaying=!1)}stop(){var r;this.isPlaying&&(this.isPlaying=!1,this.isComplete=!0,null==(r=this.onStop)||r.call(this,this))}update(r){var e,t;const i=this.elapsed;if(this.elapsed+=r,this.delay>this.elapsed)return 0;const n=this.interpolate(this.isReverse?1-this.delta:this.delta);null==(e=this.onUpdate)||e.call(this,n,!1,this);const s=this.delay+this.duration;return this.elapsed>=s?(this.stop(),this.isComplete=!0,null==(t=this.onComplete)||t.call(this,this),r-(s-i)):0}get delta(){return this.ease(Ti(0,(this.elapsed-this.delay)/this.duration,1))}createInterpolator(r,e){if("object"!=typeof e)return this.interpolateValue(r,e);const t=[];for(const i in e){const n=this.interpolateValue(r[i],e[i]);null!=n&&t.push([i,n])}return i=>{const n={};for(const[s,o]of t)n[s]=o(i);return n}}interpolateValue(r,e){if(void 0!==r&&void 0!==e){try{switch(typeof r){case"number":return RD(r,e);case"string":return function _W(r,e){if("string"==typeof r)try{r=Au.fromString(r)}catch{r=Au.fromArray([0,0,0])}if("string"==typeof e)try{e=Au.fromString(e)}catch{e=Au.fromArray([0,0,0])}const t=RD(r.r,e.r),i=RD(r.g,e.g),n=RD(r.b,e.b),s=RD(r.a,e.a);return o=>Au.fromArray([t(o),i(o),n(o),s(o)]).toRgbaString()}(r,e)}}catch{}throw new Error(`Unable to interpolate values: ${r}, ${e}`)}}},qk=["removed","updated","added"],Do={added:"add",updated:"update",removed:"remove",unknown:"initial"};function cn(r,e,t,i,n,s,o){const{fromFn:a,toFn:c,intermediateFn:u}=n,{nodes:p,selections:g}=cM(i),m={added:{},removed:{}};s&&o&&(m.added=pF(o.added,!0),m.removed=pF(o.removed,!0));const y=(_,E)=>{var D;let R,O=0,L=0;for(const k of E){const U=_[O]===k,j={last:L>=E.length-1,lastLive:O>=_.length-1,prev:E[L-1],prevFromProps:R,prevLive:_[O-1],next:E[L+1],nextLive:_[O+(U?1:0)]},q=`${r}_${e}_${k.id}`;t.stopByAnimationId(q);let J="unknown";U?s&&o&&(J=OW(k,k.datum,s,m)):J="removed";const me=a(k,k.datum,J,j),{phase:ye,start:Ae,finish:Pe,delay:Le,duration:Xe}=me,Je=rs(me,["phase","start","finish","delay","duration"]),ht=c(k,k.datum,J,j),{phase:Dt,start:Ft,finish:Mt,delay:Nt,duration:Ht}=ht,Tn=rs(ht,["phase","start","finish","delay","duration"]);t.animate({id:q,groupId:r,phase:null!=(D=ye??Dt)?D:"update",duration:Xe??Ht,delay:Le??Nt,from:Je,to:Tn,ease:AD,collapsable:null==Pe&&null==Mt,onPlay:()=>{k.setProperties(Re(Re({},Ae),Ft))},onUpdate(Rn){k.setProperties(Rn),u&&k.setProperties(u(k,k.datum,J,j))},onStop:()=>{k.setProperties(Re(Re(Re({},Tn),Pe),Mt))}}),U&&O++,L++,R=Je}};let b=0;for(const _ of g){const E=_.nodes();y(E.filter(R=>!_.isGarbage(R)),E),t.animate({id:`${r}_${e}_selection_${b}`,groupId:r,phase:"end",from:0,to:1,ease:AD,onStop(){_.cleanup()}}),b++}y(p,p)}function Ou(r,e,t,i,n,s,o){const{nodes:a,selections:c}=cM(i),{start:u={},finish:p,phase:g}=o;t.animate({id:`${r}_${e}`,groupId:r,phase:g??"update",from:n,to:s,ease:AD,collapsable:null==p,onPlay:()=>{for(const y of a)y.setProperties(u);for(const y of c)for(const b of y.nodes())b.setProperties(u)},onUpdate(y){for(const b of a)b.setProperties(y);for(const b of c)for(const _ of b.nodes())_.setProperties(y)},onStop:()=>{for(const y of a)y.setProperties(Re(Re({},s),p));for(const y of c)for(const b of y.nodes())b.setProperties(Re(Re({},s),p))}})}function OW(r,e,t,i){const n=t(r,e);return i.added[n]?"added":"updated"}var Mu=2*Math.PI;function os(r){return r%=Mu,(r+=Mu)%Mu}function MW(r){return r%=Mu,(r+=Mu)!==Mu&&(r%=Mu),r}function OD(r){return(r%=Mu)<-Math.PI?r+=Mu:r>=Math.PI&&(r-=Mu),r}function io(r){return r/180*Math.PI}function xW(r){return r/Math.PI*180}function EF(r,e){return r=os(r),(e=os(e))-r+(r>e?2*Math.PI:0)}var la=(r,e)=>{const t=Symbol(String(e));r[t]=void 0,Object.defineProperty(r,e,{get(){return this[t]},set(i){this[t]!==i&&(this[t]=i,this.invalid=!0)},enumerable:!0,configurable:!1})},xu=class{constructor(){this.type="band",this.invalid=!0,this.interval=1,this.index=new Map,this.ordinalRange=[],this._domain=[],this.range=[0,1],this._bandwidth=1,this._step=1,this._rawBandwidth=1,this._paddingInner=0,this._paddingOuter=0,this.round=!1}refresh(){!this.invalid||(this.invalid=!1,this.update(),this.invalid&&tt.warnOnce("Expected update to not invalidate scale"))}set domain(r){this.invalid=!0;const e=[];this.index=new Map;const t=this.index;r.forEach(i=>{void 0===t.get(i)&&t.set(i,e.push(i)-1)}),this._domain=e}get domain(){return this._domain}ticks(){this.refresh();const{interval:r=1}=this,e=Math.abs(Math.round(r));return this._domain.filter((t,i)=>i%e==0)}convert(r){this.refresh();const e=this.index.get(r);if(void 0===e)return NaN;const t=this.ordinalRange[e];return void 0===t?NaN:t}invert(r){this.refresh();const e=this.ordinalRange.findIndex(t=>t===r);return this.domain[e]}get bandwidth(){return this.refresh(),this._bandwidth}get step(){return this.refresh(),this._step}get rawBandwidth(){return this.refresh(),this._rawBandwidth}set padding(r){r=Ti(0,r,1),this._paddingInner=r,this._paddingOuter=r}get padding(){return this._paddingInner}set paddingInner(r){this._paddingInner=Ti(0,r,1)}get paddingInner(){return this._paddingInner}set paddingOuter(r){this._paddingOuter=Ti(0,r,1)}get paddingOuter(){return this._paddingOuter}update(){const r=this._domain.length;if(0===r)return;const e=this.round,t=this._paddingInner,i=this._paddingOuter,[n,s]=this.range,o=s-n,a=o/Math.max(1,r+2*i-t),c=e?Math.floor(a):a,p=n+(o-c*(r-t))/2,g=e?Math.round(p):p,m=c*(1-t),y=e?Math.round(m):m,b=a*(1-t),_=[];for(let E=0;E<r;E++)_.push(g+c*E);this._bandwidth=y,this._rawBandwidth=b,this._step=c,this.ordinalRange=_}};function H(r,e={}){const{optional:t=!1}=e;return Yl((i,n,s)=>{var o;const a=nt(Re({},e),{target:i,property:n});if(t&&typeof s>"u"||r(s,a))return Rr(i[n])&&!Rr(s)?(i[n].set(s),i[n]):s;const c=String(n).replace(/^_*/,""),u=null!=(o=i.constructor.className)?o:i.constructor.name.replace(/Properties$/,"");return tt.warn(`Property [${c}] of [${u}] cannot be set to [${FD(s)}]${r.message?`; expecting ${ID(r,a)}`:""}, ignoring.`),h_},void 0,{optional:t})}I([la],xu.prototype,"interval",2),I([la],xu.prototype,"range",2),I([la],xu.prototype,"round",2);var Pu=(...r)=>{const e=[];return zi((t,i)=>(e.length=0,r.every(n=>{const s=n(t,i);return s||e.push(ID(n,i)),s})),()=>e.filter(Boolean).join(" AND "))},$C=(...r)=>zi((e,t)=>r.some(i=>i(e,t)),e=>r.map(function GW(r){return e=>ID(e,r)}(e)).filter(Boolean).join(" OR ")),Ct=function HW(r){return Object.assign(r,{restrict(e){const t=i=>Rr(i)&&i instanceof e;return zi((i,n)=>t(i)||ql(i)&&t(n.target[n.property]),i=>{var n;return null!=(n=ID(r,i))?n:"an object"})}})}(zi((r,e)=>Rr(r)||ql(r)&&Rr(e.target[e.property]),"an object")),Ot=zi(f_,"a boolean"),Zl=zi(PC,"a function"),et=zi(Ja,"a string"),Xi=function BW(r){return Object.assign(r,{restrict({min:e,max:t}={}){const i=["a number"],n=Xl(e),s=Xl(t);return n&&s?i.push(`between ${e} and ${t} inclusive`):n?i.push(`greater than or equal to ${e}`):s&&i.push(`less than or equal to ${t}`),zi(o=>Ei(o)&&(!n||o>=e)&&(!s||o<=t),i.join(" "))}})}(zi(Ei,"a number")),dM=zi(r=>Xl(r)&&isNaN(r),"NaN"),qe=Xi.restrict({min:0}),Fi=Xi.restrict({min:0,max:1}),Wg=Xi.restrict({min:-360,max:360}),__=$C(Xi,dM),MD=function VW(r){return Object.assign(r,{restrict:({length:e,minLength:t}={})=>zi(i=>Dn(i)&&(!Xl(e)||i.length===e)&&(!Xl(t)||i.length>=t),Xl(t)&&t>0?"a non-empty array":Xl(e)?`an array of length ${e}`:"an array")})}(zi(Dn,"an array")),Sp=(r,e)=>zi((t,i)=>Dn(t)&&t.every(n=>r(n,i)),t=>{var i;const n=null!=(i=ID(MD,t))?i:"";return e?`${n} of ${e}`:n}),uM=r=>Ei(r)||xC(r),xD=r=>zi((e,t)=>!uM(e)||!uM(t.target[r])||e<t.target[r],`expected to be less than ${r}`),PD=r=>zi((e,t)=>!uM(e)||!uM(t.target[r])||e>t.target[r],`expected to be greater than ${r}`),DF=zi(xC,"Date object"),TF=$C(DF,qe),Xk="A color string can be in one of the following formats to be valid: #rgb, #rrggbb, rgb(r, g, b), rgba(r, g, b, a) or a CSS color name such as 'white', 'orange', 'cyan', etc",Si=zi(r=>Ja(r)&&Au.validColorString(r),`color String. ${Xk}`),Jl=zi(Sp(Si),`color strings. ${Xk}`),PW=Sp(Ot,"boolean values"),hM=Sp(Xi,"numbers"),Zk=Sp(et,"strings"),IW=zi(Sp(DF),"Date objects"),RF=zi(Sp(Ct),"objects"),Jk=as(["butt","round","square"],"a line cap"),FW=as(["round","bevel","miter"],"a line join"),bp=zi(Sp(qe),"numbers specifying the length in pixels of alternating dashes and gaps, for example, [6, 3] means dashes with a length of 6 pixels with gaps between of 3 pixels."),AF=as(["top","right","bottom","left"],"a position"),jg=as(["normal","italic","oblique"],"a font style"),zg=$C(as(["normal","bold","bolder","lighter"],"a font weight"),Xi.restrict({min:1,max:1e3})),pM=as(["never","always","hyphenate","on-space"],"a text wrap strategy"),Qk=as(["left","center","right"],"a text align"),NW=as(["top","middle","bottom"],"a vertical align"),LW=as(["ellipsis","hide"],"an overflow strategy"),eG=as(["horizontal","vertical"],"a direction"),tG=as(["inside","outside"],"a placement"),OF=$C(as(["exact","nearest"],"interaction range"),Xi);function as(r,e="a"){return zi(t=>r.includes(t),`${e} keyword such as ${function kW(r){const e=r.map(i=>`'${i}'`);if(1===e.length)return e[0];const t=e.pop();return`${e.join(", ")} or ${t}`}(r)}`)}var iG=$C(Pu(Xi.restrict({min:1}),xD("maxSpacing")),dM),MF=$C(Pu(Xi.restrict({min:1}),PD("minSpacing")),dM);function zi(r,e){return r.message=e,r}function ID(r,e){return PC(r.message)?r.message(e):r.message}function FD(r){if("number"==typeof r){if(isNaN(r))return"NaN";if(r===1/0)return"Infinity";if(r===-1/0)return"-Infinity"}return JSON.stringify(r)}var nG=(r=>(r.X="x",r.Y="y",r))(nG||{});function sG(){if(typeof navigator>"u")return!1;const r=navigator.userAgent.match(/\(iPhone; CPU iPhone OS (\d+_\d+_\d+) like Mac OS X\)/);if(null==r)return!1;const e=r[1].split("_"),t=Number(e[0]);return!(t>16)&&(16!==t||Number(e[1])<6)}var xF=class KL{constructor(e){this._enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0;const{document:t,window:i,width:n=600,height:s=300,domLayer:o=!1,zIndex:a=0,name:c,overrideDevicePixelRatio:u}=e;this.document=t,this.window=i,KL.document=t,this.element=t.createElement("canvas"),this.element.width=n,this.element.height=s,this.realContext=this.element.getContext("2d"),this.imageSource=this.realContext.canvas;const{style:p}=this.element;p.userSelect="none",p.display="block",o&&(p.position="absolute",p.zIndex=String(a),p.top="0",p.left="0",p.pointerEvents="none",p.opacity="1",c&&(this.element.id=c)),this.context=this.setPixelRatio(u),this.resize(n,s)}set container(e){this._container!==e&&(this.remove(),e&&e.appendChild(this.element),this._container=e)}get container(){return this._container}set enabled(e){this.element.style.display=e?"block":"none",this._enabled=!!e}get enabled(){return this._enabled}remove(){const{parentNode:e}=this.element;e?.removeChild(this.element)}destroy(){this.element.remove(),this.element.width=0,this.element.height=0,this.context.clearRect(0,0,0,0),Object.freeze(this)}snapshot(){}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}toImage(){const e=this.document.createElement("img");return e.src=this.getDataURL(),e}getDataURL(e){return this.element.toDataURL(e)}download(e,t="image/png"){e=(e??"").trim()||"image";const i=this.getDataURL(t),n=this.document,s=n.createElement("a");s.href=i,s.download=e,s.style.display="none",n.body.appendChild(s),s.click(),n.body.removeChild(s)}get pixelRatio(){return this._pixelRatio}setPixelRatio(e){let t=e??this.window.devicePixelRatio;return sG()&&(t=1),this._pixelRatio=t,KL.overrideScale(this.realContext,t)}set pixelated(e){this.element.style.imageRendering=e?"pixelated":"auto"}get pixelated(){return"pixelated"===this.element.style.imageRendering}get width(){return this._width}get height(){return this._height}resize(e,t){if(!(e>0&&t>0))return;const{element:i,context:n,pixelRatio:s}=this;i.width=Math.round(e*s),i.height=Math.round(t*s),i.style.width=e+"px",i.style.height=t+"px",n.resetTransform(),this._width=e,this._height=t}static get textMeasuringContext(){if(this._textMeasuringContext)return this._textMeasuringContext;const e=this.document.createElement("canvas");return this._textMeasuringContext=e.getContext("2d"),this._textMeasuringContext}static get svgText(){if(this._svgText)return this._svgText;const e="http://www.w3.org/2000/svg",t=document.createElementNS(e,"svg");t.setAttribute("width","100"),t.setAttribute("height","100"),t.classList?t.classList.add("text-measuring-svg"):t.setAttribute("class","text-measuring-svg"),t.style.position="absolute",t.style.top="-1000px",t.style.visibility="hidden";const i=document.createElementNS(e,"text");return i.setAttribute("x","0"),i.setAttribute("y","30"),i.setAttribute("text","black"),t.appendChild(i),document.body.appendChild(t),this._svgText=i,i}static get has(){if(this._has)return this._has;const e=typeof navigator>"u"||navigator.userAgent.indexOf("Chrome")>-1,t=typeof navigator<"u"&&navigator.userAgent.indexOf("Firefox")>-1,i=!e&&typeof navigator<"u"&&navigator.userAgent.indexOf("Safari")>-1;return this._has=Object.freeze({textMetrics:void 0!==this.textMeasuringContext.measureText("test").actualBoundingBoxDescent&&!t&&!i,getTransform:void 0!==this.textMeasuringContext.getTransform}),this._has}static measureText(e,t,i,n){const s=this.textMeasuringContext;return s.font=t,s.textBaseline=i,s.textAlign=n,s.measureText(e)}static getTextSize(e,t){if(this.has.textMetrics){const i=this.textMeasuringContext;i.font=t;const n=i.measureText(e);return{width:n.width,height:n.actualBoundingBoxAscent+n.actualBoundingBoxDescent}}return this.measureSvgText(e,t)}static measureSvgText(e,t){const i=this.textSizeCache,n=i[t];if(n){const c=n[e];if(c)return c}else i[t]={};const s=this.svgText;s.style.font=t,s.textContent=e;const o=s.getBBox(),a={width:o.width,height:o.height};return i[t][e]=a,a}static overrideScale(e,t){let i=0;const n={save(){this.$save(),i++},restore(){if(!(i>0))throw new Error("AG Charts - Unable to restore() past depth 0");this.$restore(),i--},setTransform(s,o,a,c,u,p){"object"==typeof s?this.$setTransform(s):this.$setTransform(s*t,o*t,a*t,c*t,u*t,p*t)},resetTransform(){this.$setTransform(t,0,0,t,0,0)},verifyDepthZero(){if(0!==i)throw new Error("AG Charts - Save/restore depth is non-zero: "+i)}};for(const s in n)Object.hasOwn(n,s)&&(e["$"+s]||(e["$"+s]=e[s]),e[s]=n[s]);return e}};xF.document=globalThis.document,xF.textSizeCache={};var Wn=xF,jW=/^linear-gradient\((.*?)deg,\s*(.*?)\s*\)$/i,Qa=class Zu extends b_{constructor(){super(...arguments),this.fillOpacity=1,this.strokeOpacity=1,this.fill=Zu.defaultStyles.fill,this.stroke=Zu.defaultStyles.stroke,this.strokeWidth=Zu.defaultStyles.strokeWidth,this.lineDash=Zu.defaultStyles.lineDash,this.lineDashOffset=Zu.defaultStyles.lineDashOffset,this.lineCap=Zu.defaultStyles.lineCap,this.lineJoin=Zu.defaultStyles.lineJoin,this.opacity=Zu.defaultStyles.opacity,this.fillShadow=Zu.defaultStyles.fillShadow}restoreOwnStyles(){const e=this.constructor.defaultStyles,t=Object.getOwnPropertyNames(e);for(let i=0,n=t.length;i<n;i++){const s=t[i];this[s]=e[s]}}updateGradient(){const{fill:e}=this;let t;if(e?.startsWith("linear-gradient")&&(t=jW.exec(e))){const i=parseFloat(t[1]),n=[],s=t[2],o=/(#[0-9a-f]+)|(rgba?\(.+?\))|([a-z]+)/gi;let a;for(;a=o.exec(s);)n.push(a[0]);this.gradient=new class extends class{constructor(){this.stops=[]}}{constructor(){super(...arguments),this.angle=0}createGradient(r,e){const{stops:i,angle:n}=this,s=os(io(n+90)),o=Math.cos(s),a=Math.sin(s),c=e.width,u=e.height,p=e.x+.5*c,g=e.y+.5*u;if(c>0&&u>0){const m=Math.sqrt(u*u+c*c)/2,y=Math.atan2(u,c);let b;b=s<Math.PI/2?s:s<Math.PI?Math.PI-s:s<3*Math.PI/2?s-Math.PI:2*Math.PI-s;const _=m*Math.abs(Math.cos(b-y)),E=r.createLinearGradient(p+o*_,g+a*_,p-o*_,g-a*_);return i.forEach(D=>{E.addColorStop(D.offset,D.color)}),E}return"black"}},this.gradient.angle=i,this.gradient.stops=n.map((c,u)=>({offset:u/(n.length-1),color:c}))}else this.gradient=void 0}align(e,t){var i,n,s;const o=null!=(s=null==(n=null==(i=this.layerManager)?void 0:i.canvas)?void 0:n.pixelRatio)?s:1,a=Math.round(e*o)/o;return null==t?a:0===t?0:t<1?Math.ceil(t*o)/o:Math.round((t+e)*o)/o-a}fillStroke(e){this.renderFill(e),this.renderStroke(e)}renderFill(e){if(this.fill){const{globalAlpha:t}=e;this.applyFill(e),this.applyFillAlpha(e),this.applyShadow(e),e.fill(),e.globalAlpha=t}e.shadowColor="rgba(0, 0, 0, 0)"}applyFill(e){e.fillStyle=this.gradient?this.gradient.createGradient(e,this.computeBBox()):this.fill}applyFillAlpha(e){const{globalAlpha:t}=e;e.globalAlpha=t*this.opacity*this.fillOpacity}applyShadow(e){var t,i;const n=null!=(i=null==(t=this.layerManager)?void 0:t.canvas.pixelRatio)?i:1,s=this.fillShadow;s?.enabled&&(e.shadowColor=s.color,e.shadowOffsetX=s.xOffset*n,e.shadowOffsetY=s.yOffset*n,e.shadowBlur=s.blur*n)}renderStroke(e){if(this.stroke&&this.strokeWidth){const{globalAlpha:t}=e;e.strokeStyle=this.stroke,e.globalAlpha=t*this.opacity*this.strokeOpacity,e.lineWidth=this.strokeWidth,this.lineDash&&e.setLineDash(this.lineDash),this.lineDashOffset&&(e.lineDashOffset=this.lineDashOffset),this.lineCap&&(e.lineCap=this.lineCap),this.lineJoin&&(e.lineJoin=this.lineJoin),e.stroke(),e.globalAlpha=t}}containsPoint(e,t){return this.isPointInPath(e,t)}};Qa.defaultStyles=Object.assign({},{fill:"black",stroke:void 0,strokeWidth:0,lineDash:void 0,lineDashOffset:0,lineCap:void 0,lineJoin:void 0,opacity:1,fillShadow:void 0}),I([at({redraw:2})],Qa.prototype,"fillOpacity",2),I([at({redraw:2})],Qa.prototype,"strokeOpacity",2),I([at({redraw:2,changeCb:r=>r.updateGradient()})],Qa.prototype,"fill",2),I([at({redraw:2})],Qa.prototype,"stroke",2),I([at({redraw:2})],Qa.prototype,"strokeWidth",2),I([at({redraw:2})],Qa.prototype,"lineDash",2),I([at({redraw:2})],Qa.prototype,"lineDashOffset",2),I([at({redraw:2})],Qa.prototype,"lineCap",2),I([at({redraw:2})],Qa.prototype,"lineJoin",2),I([at({redraw:2,convertor:r=>Ti(0,r,1)})],Qa.prototype,"opacity",2),I([at({redraw:2,checkDirtyOnAssignment:!0})],Qa.prototype,"fillShadow",2);var Ql=Qa;function fM(r){const{redraw:e=3,changeCb:t}=r??{};return at({redraw:e,type:"font",changeCb:t})}var no=class ll extends Ql{constructor(){super(...arguments),this.x=0,this.y=0,this.lines=[],this.text=void 0,this._dirtyFont=!0,this.fontSize=10,this.fontFamily="sans-serif",this.textAlign=ll.defaultStyles.textAlign,this.textBaseline=ll.defaultStyles.textBaseline,this.lineHeight=void 0}_setLines(){this.lines=lG(this.text)}get font(){return(null==this._font||this._dirtyFont)&&(this._dirtyFont=!1,this._font=$g(this)),this._font}computeBBox(){return Wn.has.textMetrics?rG(this.lines,this.x,this.y,this):oG(this.lines,this.x,this.y,this)}getLineHeight(e){var t,i;if(this.lineHeight)return this.lineHeight;if(Wn.has.textMetrics){const n=Wn.measureText(e,this.font,this.textBaseline,this.textAlign);return(null!=(t=n.fontBoundingBoxAscent)?t:n.emHeightAscent)+(null!=(i=n.fontBoundingBoxDescent)?i:n.emHeightDescent)}return Wn.getTextSize(e,this.font).height}isPointInPath(e,t){const i=this.transformPoint(e,t),n=this.computeBBox();return!!n&&n.containsPoint(i.x,i.y)}render(e){const{ctx:t,forceRender:i,stats:n}=e;if(0===this.dirty&&!i)return void(n&&(n.nodesSkipped+=this.nodeCount.count));if(!this.lines.length||!this.layerManager)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(t);const{fill:s,stroke:o,strokeWidth:a}=this;t.font=this.font,t.textAlign=this.textAlign,t.textBaseline=this.textBaseline;const c=this.layerManager.canvas.pixelRatio||1,{globalAlpha:u}=t;if(s){t.fillStyle=s,t.globalAlpha=u*this.opacity*this.fillOpacity;const{fillShadow:p}=this;p?.enabled&&(t.shadowColor=p.color,t.shadowOffsetX=p.xOffset*c,t.shadowOffsetY=p.yOffset*c,t.shadowBlur=p.blur*c),this.renderLines((g,m,y)=>t.fillText(g,m,y))}if(o&&a){t.strokeStyle=o,t.lineWidth=a,t.globalAlpha=u*this.opacity*this.strokeOpacity;const{lineDash:p,lineDashOffset:g,lineCap:m,lineJoin:y}=this;p&&t.setLineDash(p),g&&(t.lineDashOffset=g),m&&(t.lineCap=m),y&&(t.lineJoin=y),this.renderLines((b,_,E)=>t.strokeText(b,_,E))}super.render(e)}renderLines(e){const{lines:t,x:i,y:n}=this,s=this.lines.map(c=>this.getLineHeight(c));let a=-(s.reduce((c,u)=>c+u,0)-s[0])*aG(this.textBaseline);for(let c=0;c<t.length;c++)e(t[c],i,n+a),a+=s[c]}static wrapLines(e,t,i,n,s,o){const a="hide"!==o,u=function zW(r){const e=new Map,t=n=>Wn.getTextSize(n,r);return{size:t,width:n=>{if(e.has(n))return e.get(n);const{width:s}=t(n);return e.set(n,s),s}}}($g(n)),p=e.split(/\r?\n/g);if(0===p.length)return{lines:void 0,truncated:!1};if("never"===s){const{text:b,truncated:_}=ll.truncateLine(p[0],t,u,a?"auto":"never");return{lines:null!=b?[b]:void 0,truncated:_}}const g=[];let m=0,y=!1;for(const b of p){const _=ll.wrapLine(b,t,i,u,n,s,m,a);if(null==_)return{lines:void 0,truncated:!1};if(g.push(..._.result),m=_.cumulativeHeight,_.truncated){y=!0;break}}return{lines:g,truncated:y}}static wrap(e,t,i,n,s,o="ellipsis"){const{lines:a,truncated:c}=ll.wrapLines(e,t,i,n,s,o);return{text:null!=a?a.join("\n").trim():"",truncated:c}}static wrapLine(e,t,i,n,s,o,a,c){if(!(e=e.trim()))return{result:[],truncated:!1,cumulativeHeight:a};const u=n.size(e);if(u.width<=t)return{result:[e],truncated:!1,cumulativeHeight:a+u.height};if(u.height>i||n.width("W")>t)return c?{result:[],truncated:!0,cumulativeHeight:a}:void 0;const p=e.split(/\s+/g),g=ll.wrapLineSequentially(p,t,i,n,s,o,a,c);if(null==g)return;a=g.cumulativeHeight;let{lines:m}=g;if(!g.wordsBrokenOrTruncated&&!g.linesTruncated){const _=ll.wrapLineBalanced(p,t,n,g.lines.length);_.length===m.length&&(m=_)}return{result:m.map(b=>b.join(" ")),truncated:g.linesTruncated,cumulativeHeight:a}}static breakWord(e,t,i,n,s){const o=y=>ll.punctuationMarks.includes(e[y]),a=n?s.width("-"):0,c=[];let u=0,p=0;for(let y=0;y<e.length;y++){const _=s.width(e[y]);u+_+a>(0===p?t:i)&&(c.push(y),u=0,p++),u+=_}const g=[];let m=0;for(const y of c){let b=e.substring(m,y);n&&b.length>0&&!o(y-1)&&!o(y)&&(b+="-"),g.push(b),m=y}return g.push(e.substring(m)),g}static truncateLine(e,t,i,n){e=e.trimEnd();const s=i.width(e);if(s>t&&"never"===n)return{text:void 0,truncated:!1};if(s<=t&&"force"!==n)return{text:e,truncated:!1};const o=i.width("\u2026");let a=e,c=s;for(;a.length>0&&c+o>t;)a=a.slice(0,-1).trimEnd(),c=i.width(a);return c+o<=t?{text:`${a}\u2026`,truncated:!0}:{text:void 0,truncated:!1}}static wrapLineSequentially(e,t,i,n,s,o,a,c){const{fontSize:u=0,lineHeight:p=u*ll.defaultLineHeightRatio}=s,g="always"===o||"hyphenate"===o,m="hyphenate"===o,y=n.width(" ");let b=!1,_=!1;const E=[];let D=[],R=0;const O=()=>({lines:E,linesTruncated:_,wordsBrokenOrTruncated:b,cumulativeHeight:a}),L=()=>{if(!c)return;const U=D.join(" "),{text:j}=ll.truncateLine(U,t,n,"force");return null!=j?(D.splice(0,D.length,j),_=!0,O()):void 0},k=()=>{const U=a+p;return!(U>=i||(D=[],R=0,a=U,E.push(D),0))};if(!k())return L();for(let U=0;U<e.length;U++){const j=e[U],q=n.width(j),J=0===D.length?0:y,me=R+J+q;if(me<=t)D.push(j),R=me;else if(q<=t){if(!k())return L();D.push(j),R=q}else{if(b=!0,!g){if(c){if(!k())return L();const{text:ye}=ll.truncateLine(j,t,n,"force");if(null==ye)return;D.push(ye),U<e.length-1&&(_=!0);break}return}{const Ae=ll.breakWord(j,t-R-J,t,m,n);for(let Pe=0;Pe<Ae.length;Pe++){const Le=Ae[Pe];if(Le&&D.push(Le),Pe===Ae.length-1)R=n.width(Le);else if(!k())return L()}}}}return O()}static wrapLineBalanced(e,t,i,n){const s=e.reduce((y,b)=>y+i.width(b),0),o=i.width(" "),c=(s+o*(e.length-n-2))/n,u=[];let p=[],g=i.width(e[0]),m=!0;for(const y of e){const b=i.width(y);if(m){p=[],p.push(y),g=b,m=!1,u.push(p);continue}const _=g+o+b;_<=c?(p.push(y),g=_):_<=t?(p.push(y),m=!0):(p=[y],g=b,u.push(p))}return u}setFont(e){this.fontFamily=e.fontFamily,this.fontSize=e.fontSize,this.fontStyle=e.fontStyle,this.fontWeight=e.fontWeight}setAlign(e){this.textAlign=e.textAlign,this.textBaseline=e.textBaseline}};no.className="Text",no.defaultLineHeightRatio=1.15,no.defaultStyles=Object.assign({},Ql.defaultStyles,{textAlign:"start",fontStyle:void 0,fontWeight:void 0,fontSize:10,fontFamily:"sans-serif",textBaseline:"alphabetic"}),no.ellipsis="\u2026",no.punctuationMarks=[".",",","-",":",";","!","?","'",'"',"(",")"],I([at({redraw:3})],no.prototype,"x",2),I([at({redraw:3})],no.prototype,"y",2),I([at({redraw:3,changeCb:r=>r._setLines()})],no.prototype,"text",2),I([fM()],no.prototype,"fontStyle",2),I([fM()],no.prototype,"fontWeight",2),I([fM()],no.prototype,"fontSize",2),I([fM()],no.prototype,"fontFamily",2),I([at({redraw:3})],no.prototype,"textAlign",2),I([at({redraw:3})],no.prototype,"textBaseline",2),I([at({redraw:3})],no.prototype,"lineHeight",2);var Ri=no;function $g(r){const{fontFamily:e,fontSize:t,fontStyle:i,fontWeight:n}=r;return[i??"",n??"",t+"px",e].join(" ").trim()}function $W(r,e,t,i){return Wn.has.textMetrics?rG(r,e,t,i):oG(r,e,t,i)}function rG(r,e,t,i){var n,s;let o=0,a=0,c=0,u=0,p=0;const g=$g(i),{lineHeight:m,textBaseline:y=Ri.defaultStyles.textBaseline,textAlign:b=Ri.defaultStyles.textAlign}=i;for(let _=0;_<r.length;_++){const E=Wn.measureText(r[_],g,y,b);o=Math.max(o,E.actualBoundingBoxLeft),c=Math.max(c,E.width),0==_?(a+=E.actualBoundingBoxAscent,u+=E.actualBoundingBoxAscent):p+=null!=(n=E.fontBoundingBoxAscent)?n:E.emHeightAscent,_==r.length-1?u+=E.actualBoundingBoxDescent:p+=null!=(s=E.fontBoundingBoxDescent)?s:E.emHeightDescent}return void 0!==m&&(p=(r.length-1)*m),u+=p,a+=p*aG(y),new Bt(e-o,t-a,c,u)}function oG(r,e,t,i){let n=0,s=0,o=0;const a=$g(i),{lineHeight:c,textBaseline:u=Ri.defaultStyles.textBaseline,textAlign:p=Ri.defaultStyles.textAlign}=i;if(r.length>0){const g=Wn.getTextSize(r[0],a);n=g.width,s=g.height}for(let g=1;g<r.length;g++){const m=Wn.getTextSize(r[g],a);n=Math.max(n,m.width),o+=c??m.height}switch(p){case"end":case"right":e-=n;break;case"center":e-=n/2}switch(u){case"alphabetic":t-=.7*s+.5*o;break;case"middle":t-=.45*s+.5*o;break;case"ideographic":case"bottom":t-=s+o;break;case"hanging":t-=.2*s+.5*o}return new Bt(e,t,n,s+o)}function aG(r){switch(r){case"top":case"hanging":return 0;case"bottom":case"alphabetic":case"ideographic":return 1;case"middle":return.5}}function lG(r){return"string"==typeof r?r.split(/\r?\n/g):[]}function Kg(r){const e=Dn(r)?r:r.split(".");if(1===e.length){const[t]=e;return Yl((i,n,s)=>i[t]=s,i=>i[t])}return Yl((t,i,n)=>l(t,e,n),t=>YI(t,e))}function KW(r){return Yl((e,t,i)=>e[r]=i)}function Qi(r,e){return Yl((t,i,n)=>t[r][e??i]=n)}function Bs(r){const{newValue:e,oldValue:t,changeValue:i}=r;return Yl((n,s,o,a)=>(o!==a&&(void 0!==a&&t?.call(n,a),void 0!==o&&e?.call(n,o),i?.call(n,o,a)),o))}function w_(r){return function UO(r){return(e,t)=>{pD(e,t).observers.push(r)}}(r)}function gM(r,e){const t=r.createElement("style");t.innerHTML=e,r.head.insertBefore(t,r.head.querySelector("style"))}var ys="ag-chart-tooltip",qW=`\n.${ys} {\n    transition: transform 0.1s ease;\n    max-width: 100%;\n    position: fixed;\n    left: 0px;\n    top: 0px;\n    z-index: 99999;\n    font: 12px Verdana, sans-serif;\n    color: rgb(70, 70, 70);\n    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.08);\n}\n\n.${ys}-wrap-always {\n    overflow-wrap: break-word;\n    word-break: break-word;\n    hyphens: none;\n}\n\n.${ys}-wrap-hyphenate {\n    overflow-wrap: break-word;\n    word-break: break-word;\n    hyphens: auto;\n}\n\n.${ys}-wrap-on-space {\n    overflow-wrap: normal;\n    word-break: normal;\n}\n\n.${ys}-wrap-never {\n    white-space: pre;\n    text-overflow: ellipsis;\n}\n\n.${ys}-no-interaction {\n    pointer-events: none;\n    user-select: none;\n}\n\n.${ys}-no-animation {\n    transition: none !important;\n}\n\n.${ys}-hidden {\n    visibility: hidden;\n}\n\n.${ys}-title {\n    overflow: hidden;\n    position: relative;\n    padding: 8px 14px;\n    border-top-left-radius: 2px;\n    border-top-right-radius: 2px;\n    color: white;\n    background-color: #888888;\n    z-index: 1;\n    text-overflow: inherit;\n}\n\n.${ys}-title:only-child {\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n}\n\n.${ys}-content {\n    overflow: hidden;\n    padding: 6px 14px;\n    line-height: 1.7em;\n    background: white;\n    border-bottom-left-radius: 2px;\n    border-bottom-right-radius: 2px;\n    border: 1px solid rgba(0, 0, 0, 0.15);\n    overflow: hidden;\n    text-overflow: inherit;\n}\n\n.${ys}-arrow::before {\n    content: "";\n\n    position: absolute;\n    top: 100%;\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid #d9d9d9;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.${ys}-arrow::after {\n    content: "";\n\n    position: absolute;\n    top: calc(100% - 1px);\n    left: 50%;\n    transform: translateX(-50%);\n\n    border: 5px solid white;\n\n    border-left-color: transparent;\n    border-right-color: transparent;\n    border-bottom-color: transparent;\n\n    width: 0;\n    height: 0;\n\n    margin: 0 auto;\n}\n\n.ag-chart-wrapper {\n    box-sizing: border-box;\n    overflow: hidden;\n}\n`;function ND(r,e){var t,i,n;if("string"==typeof r)return r;const{content:s=(null!=(t=e?.content)?t:""),title:o=e?.title,color:a=(null!=(i=e?.color)?i:"white"),backgroundColor:c=(null!=(n=e?.backgroundColor)?n:"#888")}=r;return`${o?`<div class="${ys}-title"\n        style="color: ${a}; background-color: ${c}">${o}</div>`:""}${s?`<div class="${ys}-content">${s}</div>`:""}`}var LD=class extends Di{constructor(){super(...arguments),this.type="pointer",this.xOffset=0,this.yOffset=0}};I([H(as(["pointer","node"],"a position type"))],LD.prototype,"type",2),I([H(Xi)],LD.prototype,"xOffset",2),I([H(Xi)],LD.prototype,"yOffset",2);var _p=class YL{constructor(e,t,i,n){this.enableInteraction=!1,this.enabled=!0,this.showArrow=void 0,this.class=void 0,this.lastClass=void 0,this.delay=0,this.range="nearest",this.wrapping="hyphenate",this.darkTheme=!1,this.lastVisibilityChange=Date.now(),this.position=new LD,this.showTimeout=0,this._showArrow=!0,this.tooltipRoot=n,this.window=i;const s=t.createElement("div");if(this.element=this.tooltipRoot.appendChild(s),this.element.classList.add(ys),this.canvasElement=e,typeof IntersectionObserver<"u"){const o=new IntersectionObserver(a=>{for(const c of a)c.target===this.canvasElement&&0===c.intersectionRatio&&this.toggle(!1)},{root:this.tooltipRoot});o.observe(this.canvasElement),this.observer=o}YL.tooltipDocuments.indexOf(t)<0&&(gM(t,qW),YL.tooltipDocuments.push(t))}destroy(){const{parentNode:e}=this.element;e&&e.removeChild(this.element),this.observer&&this.observer.unobserve(this.canvasElement)}isVisible(){const{element:e}=this;return!e.classList.contains(ys+"-hidden")}updateClass(e,t,i=!0){const{element:n,class:s,lastClass:o,enableInteraction:a,lastVisibilityChange:c}=this,u=this.isVisible(),p=!!e;let g=1/0;if(u!==p){const E=Date.now();g=E-c,this.lastVisibilityChange=E}const m=(E,D)=>{const R=`${ys}-${E}`;D?n.classList.add(R):n.classList.remove(R)};g>5&&m("no-animation",!u&&p&&g>100),m("no-interaction",!a),m("hidden",!e),m("arrow",!!t),n.classList.toggle("ag-chart-dark-tooltip",this.darkTheme),this.updateWrapping(),i?(s!==o&&(o&&n.classList.remove(o),s&&n.classList.add(s)),this.lastClass=s):(o&&n.classList.remove(o),this.lastClass=void 0)}updateWrapping(){const{element:e,wrapping:t}=this,i={always:!1,hyphenate:!1,"on-space":!1,never:!1};i[t]=!0,Object.entries(i).forEach(([n,s])=>{e.classList.toggle(`${ys}-wrap-${n}`,s)})}show(e,t,i=!1){var n,s,o,a,c,u,p;const{element:g,canvasElement:m}=this;if(void 0!==t)g.innerHTML=t;else if(!g.innerHTML)return void this.toggle(!1);const y=null!=(s=null==(n=e.position)?void 0:n.xOffset)?s:0,b=null!=(a=null==(o=e.position)?void 0:o.yOffset)?a:0,_=m.getBoundingClientRect(),E=_.left+e.offsetX-g.clientWidth/2+y,D=_.top+e.offsetY-g.clientHeight-8+b,R=this.getWindowBoundingBox(),L=R.y+R.height-g.clientHeight,k=Ti(R.x,E,R.x+R.width-g.clientWidth-1),U=Ti(R.y,D,L),J=null!=(u=null!=(c=e.showArrow)?c:this.showArrow)?u:!(k!==E||U!==D||y||b);if(this.updateShowArrow(J),g.style.transform=`translate(${Math.round(k)}px, ${Math.round(U)}px)`,this.enableInteraction=null!=(p=e.enableInteraction)&&p,this.delay>0&&!i)return this.toggle(!1),void(this.showTimeout=this.window.setTimeout(()=>{this.toggle(!0,e.addCustomClass)},this.delay));this.toggle(!0,e.addCustomClass)}getWindowBoundingBox(){return new Bt(0,0,this.window.innerWidth,this.window.innerHeight)}toggle(e,t){e||this.window.clearTimeout(this.showTimeout),this.updateClass(e,this._showArrow,t)}pointerLeftOntoTooltip(e){var t;if(!this.enableInteraction)return!1;const i=null==(t=e.sourceEvent.relatedTarget)?void 0:t.classList,s=Boolean(["","-title","-content"].filter(o=>i?.contains(`${ys}${o}`)));return void 0!==i&&s}updateShowArrow(e){this._showArrow=e}};_p.tooltipDocuments=[],I([H(Ot)],_p.prototype,"enabled",2),I([H(Ot,{optional:!0})],_p.prototype,"showArrow",2),I([H(et,{optional:!0})],_p.prototype,"class",2),I([H(qe)],_p.prototype,"delay",2),I([H(OF)],_p.prototype,"range",2),I([H(pM)],_p.prototype,"wrapping",2),I([H(Ot)],_p.prototype,"darkTheme",2);var cG=_p,gn=class extends Di{constructor(){super(...arguments),this.id=Ru(this),this.node=(new Ri).setProperties({textAlign:"center",pointerEvents:1}),this.enabled=!1,this.textAlign="center",this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always",this.truncated=!1}registerInteraction(r){return r.interactionManager.addListener("hover",e=>this.handleMouseMove(r,e))}computeTextWrap(r,e){var t,i;const{text:n,wrapping:s}=this,o=Math.min(null!=(t=this.maxWidth)?t:1/0,r),a=null!=(i=this.maxHeight)?i:e;if(!isFinite(o)&&!isFinite(a))return void(this.node.text=n);const{text:c,truncated:u}=Ri.wrap(n??"",o,a,this,s);this.node.text=c,this.truncated=u}handleMouseMove(r,e){if(!this.enabled)return;const{offsetX:t,offsetY:i}=e,n=this.node.computeBBox(),s=this.node.visible&&n.containsPoint(t,i);s&&e.consume(),this.truncated&&s?r.tooltipManager.updateTooltip(this.id,{offsetX:t,offsetY:i,lastPointerEvent:e,showArrow:!1,addCustomClass:!1},ND({content:this.text})):r.tooltipManager.removeTooltip(this.id)}};gn.SMALL_PADDING=10,gn.LARGE_PADDING=20,I([H(Ot)],gn.prototype,"enabled",2),I([H(et,{optional:!0}),Qi("node")],gn.prototype,"text",2),I([H(Qk,{optional:!0}),Qi("node")],gn.prototype,"textAlign",2),I([H(jg,{optional:!0}),Qi("node")],gn.prototype,"fontStyle",2),I([H(zg,{optional:!0}),Qi("node")],gn.prototype,"fontWeight",2),I([H(qe),Qi("node")],gn.prototype,"fontSize",2),I([H(et),Qi("node")],gn.prototype,"fontFamily",2),I([H(Si,{optional:!0}),Qi("node","fill")],gn.prototype,"color",2),I([H(qe,{optional:!0})],gn.prototype,"spacing",2),I([H(qe,{optional:!0})],gn.prototype,"lineHeight",2),I([H(qe,{optional:!0})],gn.prototype,"maxWidth",2),I([H(qe,{optional:!0})],gn.prototype,"maxHeight",2),I([H(pM)],gn.prototype,"wrapping",2);var id=class{constructor(){this.enabled=!1,this.spacing=gn.SMALL_PADDING,this.fontSize=10,this.fontFamily="sans-serif",this.wrapping="always"}};I([H(Ot)],id.prototype,"enabled",2),I([H(et,{optional:!0})],id.prototype,"text",2),I([H(qe,{optional:!0})],id.prototype,"spacing",2),I([H(jg,{optional:!0})],id.prototype,"fontStyle",2),I([H(zg,{optional:!0})],id.prototype,"fontWeight",2),I([H(qe)],id.prototype,"fontSize",2),I([H(et)],id.prototype,"fontFamily",2),I([H(Si,{optional:!0})],id.prototype,"color",2),I([H(pM)],id.prototype,"wrapping",2),I([H(Zl,{optional:!0})],id.prototype,"formatter",2);var dG={constructedArrays:new WeakMap};function uG(r,e){var t;null==(t=dG.constructedArrays)||t.set(r,e)}var hG={constructors:{"axes[].title":id},allowedTypes:{"legend.pagination.marker.shape":["primitive","function"],"axis[].tick.count":["primitive","class-instance"]}},Iu=class qL{constructor(e,t){this.invalid=!0,this.nice=!1,this.interval=void 0,this.tickCount=qL.defaultTickCount,this.minTickCount=0,this.maxTickCount=1/0,this.niceDomain=[],this.defaultClampMode="raw",this.domain=e,this.range=t}static is(e){return e instanceof qL}transform(e){return e}transformInvert(e){return e}calcBandwidth(e=1){const{range:t}=this,i=this.getDomain(),n=Math.abs(t[1]-t[0]),s=Math.abs(i[1]-i[0])/e+1,o=Math.floor(n),a=Math.min(s,o);return n/Math.max(1,a)}fromDomain(e){return"number"==typeof e?e:e instanceof Date?e.getTime():NaN}getDomain(){return this.nice&&(this.refresh(),this.niceDomain.length)?this.niceDomain:this.domain}convert(e,t){var i;const n=null!=(i=t?.clampMode)?i:this.defaultClampMode;if(!this.domain||this.domain.length<2)return NaN;this.refresh();const s=this.getDomain().map(g=>this.transform(g)),[o,a]=s,{range:c}=this,[u,p]=c;if(e=this.transform(e),"clamped"===n){const g=Math.min(this.fromDomain(o),this.fromDomain(a)),m=Math.max(this.fromDomain(o),this.fromDomain(a));if(this.fromDomain(e)<g)return u;if(this.fromDomain(e)>m)return p}return o===a?(u+p)/2:e===o?u:e===a?p:u+(this.fromDomain(e)-this.fromDomain(o))/(this.fromDomain(a)-this.fromDomain(o))*(p-u)}invert(e){this.refresh();const t=this.getDomain().map(m=>this.transform(m)),[i,n]=t,{range:s}=this,[o,a]=s,c=o>a;let g;return e<(c?a:o)?c?n:i:e>(c?o:a)?c?i:n:(g=this.toDomain(o===a?(this.fromDomain(i)+this.fromDomain(n))/2:this.fromDomain(i)+(e-o)/(a-o)*(this.fromDomain(n)-this.fromDomain(i))),this.transformInvert(g))}refresh(){!this.invalid||(this.invalid=!1,this.update(),this.invalid&&tt.warnOnce("Expected update to not invalidate scale"))}getPixelRange(){const e=this.range.slice().sort((t,i)=>t-i);return e[1]-e[0]}isDenseInterval({start:e,stop:t,interval:i,count:n}){return n??(n=(t-e)/("number"==typeof i?i:1)),n>=this.getPixelRange()&&(tt.warn("the configured interval results in more than 1 item per pixel, ignoring. Supply a larger interval or omit this configuration"),!0)}};Iu.defaultTickCount=5,Iu.defaultMaxTickCount=6,I([la],Iu.prototype,"domain",2),I([la],Iu.prototype,"range",2),I([la],Iu.prototype,"nice",2),I([la],Iu.prototype,"interval",2),I([la],Iu.prototype,"tickCount",2),I([la],Iu.prototype,"minTickCount",2),I([la],Iu.prototype,"maxTickCount",2);var $i=Iu;function pG(r,e){let t=0;return"number"==typeof r&&"number"==typeof e?t=r-e:"string"==typeof r&&"string"==typeof e?t=r.localeCompare(e):null==r&&null==e||(t=null==r?-1:null==e?1:String(r).localeCompare(String(e))),t}function fG(r,e,t){const i=n=>"function"==typeof n?n():n;for(const n in r){const s=t(i(r[n]),i(e[n]));if(0!==s)return s}return 0}var IF=class XL extends b_{constructor(e){var t;super({isVirtual:e?.isVirtual}),this.opts=e,this.opacity=1,this.lastBBox=void 0;const{zIndex:i,zIndexSubOrder:n}=e??{};this.isContainerNode=!0,void 0!==i&&(this.zIndex=i),void 0!==n&&(this.zIndexSubOrder=n),this.name=null==(t=this.opts)?void 0:t.name}zIndexChanged(){var e;this.layer&&(null==(e=this._layerManager)||e.moveLayer(this.layer,this.zIndex,this.zIndexSubOrder))}isLayer(){return null!=this.layer}_setLayerManager(e){var t,i;if(this._layerManager&&this.layer&&(this._layerManager.removeLayer(this.layer),this.layer=void 0),this.layer)throw new Error("AG Charts - unable to deregister scene rendering layer!");if(super._setLayerManager(e),e&&(null==(t=this.opts)?void 0:t.layer)){const{zIndex:n,zIndexSubOrder:s,name:o}=null!=(i=this.opts)?i:{};this.layer=e.addLayer({zIndex:n,zIndexSubOrder:s,name:o,getComputedOpacity:()=>this.getComputedOpacity(),getVisibility:()=>this.getVisibility()})}}getComputedOpacity(){let e=1,t=this;do{t instanceof XL&&(e*=t.opacity)}while(t=t.parent);return e}getVisibility(){let e=this,t=this.visible;for(;e=e.parent;)e.visible||(t=e.visible);return t}visibilityChanged(){this.layer&&(this.layer.enabled=this.visible)}markDirty(e,t=1){if(this.isVirtual)return void super.markDirty(e,t);let i=t;(t<2||null!=this.layer)&&(i=1),super.markDirty(e,t,i)}containsPoint(e,t){return!0}computeBBox(){return this.computeTransformMatrix(),XL.computeBBox(this.children)}computeTransformedBBox(){return this.computeBBox()}render(e){var t,i;const{opts:{name:n}={},_debug:s=(()=>{})}=this,{dirty:o,dirtyZIndex:a,layer:c,children:u,clipRect:p,dirtyTransform:g}=this;let{ctx:m,forceRender:y,clipBBox:b}=e;const{resized:_,stats:E}=e,D=m.getTransform(),R=o>=2||a||_;let O=R,L=!1;for(const me of u)if(O||(O=null==me.layerManager&&me.dirty>=1),L||(L=null!=me.layerManager&&me.dirty>=1),O)break;if(n&&s({name:n,group:this,isDirty:R,isChildDirty:O,dirtyTransform:g,renderCtx:e,forceRender:y}),g)y="dirtyTransform";else if(c){const me=this.computeBBox();(void 0===this.lastBBox||!this.lastBBox.equals(me))&&(y="dirtyTransform",this.lastBBox=me)}if(!(R||O||L||y))return n&&E&&s({name:n,result:"skipping",renderCtx:e,counts:this.nodeCount,group:this}),c&&E&&(E.layersSkipped++,E.nodesSkipped+=this.nodeCount.count),void this.markClean({recursive:!1});const k=this.visible;if(c){if(m=c.context,m.save(),m.resetTransform(),"dirtyTransform"!==y&&(y=O||a),y&&c.clear(),b){const{width:me,height:ye,x:Ae,y:Pe}=b;s(()=>({name:n,clipBBox:b,ctxTransform:m.getTransform(),renderCtx:e,group:this})),this.clipCtx(m,Ae,Pe,me,ye)}m.setTransform(D)}else m.globalAlpha*=this.opacity;if(this.computeTransformMatrix(),this.matrix.toContext(m),p){const{x:me,y:ye,width:Ae,height:Pe}=p;m.save(),s(()=>({name:n,clipRect:p,ctxTransform:m.getTransform(),renderCtx:e,group:this})),this.clipCtx(m,me,ye,Ae,Pe),b=this.matrix.transformBBox(p)}const U=this.hasVirtualChildren();a?(this.sortChildren(u),"dirtyTransform"!==y&&(y=!0)):U&&this.sortChildren(u);const q=y!==e.forceRender||b!==e.clipBBox||m!==e.ctx?nt(Re({},e),{ctx:m,forceRender:y,clipBBox:b}):e;let J=0;for(const me of u)me.visible&&k?y||0!==me.dirty?(m.save(),me.render(q),m.restore()):E&&(J+=me.nodeCount.count):(me.markClean(),E&&(J+=me.nodeCount.count));if(E&&(E.nodesSkipped+=J),super.render(e),p&&m.restore(),U)for(const me of this.virtualChildren)me.markClean({recursive:"virtual"});c&&(E&&E.layersRendered++,m.restore(),y&&c.snapshot(),null==(i=(t=c.context).verifyDepthZero)||i.call(t)),n&&E&&s({name:n,result:"rendered",skipped:J,renderCtx:e,counts:this.nodeCount,group:this})}sortChildren(e){this.dirtyZIndex=!1,e.sort((t,i)=>{var n,s;return fG([t.zIndex,...null!=(n=t.zIndexSubOrder)?n:[void 0,void 0],t.serialNumber],[i.zIndex,...null!=(s=i.zIndexSubOrder)?s:[void 0,void 0],i.serialNumber],pG)})}clipCtx(e,t,i,n,s){e.beginPath(),e.moveTo(t,i),e.lineTo(t+n,i),e.lineTo(t+n,i+s),e.lineTo(t,i+s),e.closePath(),e.clip()}static computeBBox(e){let t=1/0,i=-1/0,n=1/0,s=-1/0;return e.forEach(o=>{if(!o.visible)return;const a=o.computeTransformedBBox();if(!a)return;const c=a.x,u=a.y;c<t&&(t=c),u<n&&(n=u),c+a.width>i&&(i=c+a.width),u+a.height>s&&(s=u+a.height)}),new Bt(t,n,i-t,s-n)}setClipRectInGroupCoordinateSpace(e){this.clipRect=e?this.transformBBox(e):void 0}};IF.className="Group",I([at({redraw:3,convertor:r=>Ti(0,r,1)})],IF.prototype,"opacity",2);var vt=IF,Fu=class extends Ql{constructor(r={}){super(r),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.startLine=!1,this.endLine=!1,this.isRange=!1,this.restoreOwnStyles()}computeBBox(){return new Bt(this.x1,this.y1,this.x2-this.x1,this.y2-this.y1)}isPointInPath(r,e){return!1}render(r){var e;const{ctx:t,forceRender:i,stats:n}=r;if(0===this.dirty&&!i)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(t);let{x1:s,y1:o,x2:a,y2:c}=this;s=this.align(s),o=this.align(o),a=this.align(a),c=this.align(c);const{fill:u,opacity:p,isRange:g}=this;if(g&&u){const{fillOpacity:R}=this;t.fillStyle=u,t.globalAlpha=p*R,t.beginPath(),t.moveTo(s,o),t.lineTo(a,o),t.lineTo(a,c),t.lineTo(s,c),t.closePath(),t.fill()}const{stroke:y,strokeWidth:b,startLine:_,endLine:E}=this;if((_||E)&&y&&b){const{strokeOpacity:R,lineDash:O,lineDashOffset:L,lineCap:k,lineJoin:U}=this;t.strokeStyle=y,t.globalAlpha=p*R,t.lineWidth=b,O&&t.setLineDash(O),L&&(t.lineDashOffset=L),k&&(t.lineCap=k),U&&(t.lineJoin=U),t.beginPath(),_&&(t.moveTo(s,o),t.lineTo(a,o)),E&&(t.moveTo(a,c),t.lineTo(s,c)),t.stroke()}null==(e=this.fillShadow)||e.markClean(),super.render(r)}};Fu.className="Range",Fu.defaultStyles=nt(Re({},Ql.defaultStyles),{strokeWidth:1}),I([at({redraw:2})],Fu.prototype,"x1",2),I([at({redraw:2})],Fu.prototype,"y1",2),I([at({redraw:2})],Fu.prototype,"x2",2),I([at({redraw:2})],Fu.prototype,"y2",2),I([at({redraw:2})],Fu.prototype,"startLine",2),I([at({redraw:2})],Fu.prototype,"endLine",2),I([at({redraw:2})],Fu.prototype,"isRange",2);var Ss=class extends Di{constructor(){super(...arguments),this.enabled=!0,this.color="#464646",this.fontSize=12,this.fontFamily="Verdana, sans-serif"}getFont(){return $g(this)}};function mM(r){const{parallelFlipRotation:e=0,regularFlipRotation:t=0}=r,i=r.rotation?os(io(r.rotation)):0,n=!i&&e>=0&&e<=Math.PI?-1:1,s=!i&&t>=0&&t<=Math.PI?-1:1;let o=0;return r.parallel?o=n*Math.PI/2:-1===s&&(o=Math.PI),{configuredRotation:i,defaultRotation:o,parallelFlipFlag:n,regularFlipFlag:s}}function FF(r,e,t,i,n){const s=e>0&&e<=Math.PI,o=t>0&&t<=Math.PI;if(r){if(!e&&!t)return"center";if(i*(s||o?-1:1)==-1)return"end"}else if(i*n==-1)return"end";return"start"}function JW(r,e,t,i,n){const{width:s,height:o}=e,a=new Bt(t,i,0,0);n.transformBBox(a,e);const{x:c=0,y:u=0}=e;return e.width=s,e.height=o,{point:{x:c,y:u,size:0},label:{width:s,height:o,text:r}}}I([H(Ot)],Ss.prototype,"enabled",2),I([H(Si)],Ss.prototype,"color",2),I([H(jg,{optional:!0})],Ss.prototype,"fontStyle",2),I([H(zg,{optional:!0})],Ss.prototype,"fontWeight",2),I([H(qe)],Ss.prototype,"fontSize",2),I([H(et)],Ss.prototype,"fontFamily",2),I([H(Zl,{optional:!0})],Ss.prototype,"formatter",2);var gG=(r=>(r[r.SERIES_BACKGROUND_ZINDEX=0]="SERIES_BACKGROUND_ZINDEX",r[r.AXIS_GRID_ZINDEX=1]="AXIS_GRID_ZINDEX",r[r.AXIS_ZINDEX=2]="AXIS_ZINDEX",r[r.SERIES_CROSSLINE_RANGE_ZINDEX=3]="SERIES_CROSSLINE_RANGE_ZINDEX",r[r.SERIES_LAYER_ZINDEX=4]="SERIES_LAYER_ZINDEX",r[r.AXIS_FOREGROUND_ZINDEX=5]="AXIS_FOREGROUND_ZINDEX",r[r.SERIES_CROSSHAIR_ZINDEX=6]="SERIES_CROSSHAIR_ZINDEX",r[r.SERIES_LABEL_ZINDEX=7]="SERIES_LABEL_ZINDEX",r[r.SERIES_CROSSLINE_LINE_ZINDEX=8]="SERIES_CROSSLINE_LINE_ZINDEX",r[r.LEGEND_ZINDEX=9]="LEGEND_ZINDEX",r))(gG||{}),NF=r=>!!r&&Object.hasOwn(r,"toString")&&Ja(r.toString()),LF=r=>Ei(r)||(r=>!!r&&Object.hasOwn(r,"valueOf")&&Ei(r.valueOf()))(r)||xC(r);function kD(r,e){return e&&LF(r)?r:e?void 0:Ja(r)||NF(r)?r:String(r)}function E_(r){return NF(r)&&Object.hasOwn(r,"id")?r.id:r}var kF=r=>"value"===r?zi((e,t)=>"line"===t.target.type,e=>"range"===e.target.type?"crossLine type 'range' to have a 'range' property instead of 'value'":"crossLine property 'type' to be 'line'"):zi((e,t)=>"range"===t.target.type,e=>"line"===e.target.type?"crossLine type 'line' to have a 'value' property instead of 'range'":"crossLine property 'type' to be 'range'"),mG=(r,e,t,i)=>{const n="line"===r&&void 0!==e,s="range"===r&&void 0!==t;if(!n&&!s)return!0;const[o,a]=t??[e,void 0],c=$i.is(i),u=null!=kD(o,c)&&!isNaN(i.convert(o)),p=null!=kD(a,c)&&!isNaN(i.convert(a));if(n&&u||s&&u&&p)return!0;const g=["Expecting crossLine"];return s?(u||g.push(`range start ${FD(o)}`),p||g.push(`${u?"":"and "}range end ${FD(a)}`)):g.push(`value ${FD(o)}`),g.push("to match the axis scale domain."),tt.warnOnce(g.join(" ")),!1},e3={top:{xTranslationDirection:0,yTranslationDirection:-1},bottom:{xTranslationDirection:0,yTranslationDirection:1},left:{xTranslationDirection:-1,yTranslationDirection:0},right:{xTranslationDirection:1,yTranslationDirection:0},topLeft:{xTranslationDirection:1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:-1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:1},bottomRight:{xTranslationDirection:-1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:1,yTranslationDirection:0},insideRight:{xTranslationDirection:-1,yTranslationDirection:0},insideTop:{xTranslationDirection:0,yTranslationDirection:1},insideBottom:{xTranslationDirection:0,yTranslationDirection:-1},insideTopLeft:{xTranslationDirection:1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomRight:{xTranslationDirection:-1,yTranslationDirection:-1}},t3={top:{xTranslationDirection:1,yTranslationDirection:0},bottom:{xTranslationDirection:-1,yTranslationDirection:0},left:{xTranslationDirection:0,yTranslationDirection:-1},right:{xTranslationDirection:0,yTranslationDirection:1},topLeft:{xTranslationDirection:-1,yTranslationDirection:-1},topRight:{xTranslationDirection:-1,yTranslationDirection:1},bottomLeft:{xTranslationDirection:1,yTranslationDirection:-1},bottomRight:{xTranslationDirection:1,yTranslationDirection:1},inside:{xTranslationDirection:0,yTranslationDirection:0},insideLeft:{xTranslationDirection:0,yTranslationDirection:1},insideRight:{xTranslationDirection:0,yTranslationDirection:-1},insideTop:{xTranslationDirection:-1,yTranslationDirection:0},insideBottom:{xTranslationDirection:1,yTranslationDirection:0},insideTopLeft:{xTranslationDirection:-1,yTranslationDirection:1},insideBottomLeft:{xTranslationDirection:1,yTranslationDirection:1},insideTopRight:{xTranslationDirection:-1,yTranslationDirection:-1},insideBottomRight:{xTranslationDirection:1,yTranslationDirection:-1}};function vG({yDirection:r,padding:e=0,position:t="top",bbox:i}){const n=r?e3:t3,{xTranslationDirection:s,yTranslationDirection:o}=n[t];return{xTranslation:s*(e+(r?i.width:i.height)/2),yTranslation:o*(e+(r?i.height:i.width)/2)}}var GF=({yDirection:r,xEnd:e,yStart:t,yEnd:i})=>r?{x:e/2,y:t}:{x:e,y:isNaN(i)?t:(t+i)/2},CG=({yDirection:r,xStart:e,xEnd:t,yStart:i,yEnd:n})=>r?{x:e,y:isNaN(n)?i:(i+n)/2}:{x:t/2,y:i},yG=({yDirection:r,xEnd:e,yStart:t,yEnd:i})=>r?{x:e,y:isNaN(i)?t:(t+i)/2}:{x:e/2,y:isNaN(i)?t:i},SG=({yDirection:r,xStart:e,xEnd:t,yStart:i,yEnd:n})=>r?{x:t/2,y:isNaN(n)?i:n}:{x:e,y:isNaN(n)?i:(i+n)/2},bG=({yDirection:r,xStart:e,xEnd:t,yStart:i})=>r?{x:e/2,y:i}:{x:t,y:i},_G=({yDirection:r,xStart:e,yStart:t,yEnd:i})=>r?{x:e,y:isNaN(i)?t:i}:{x:e,y:t},wG=({yDirection:r,xEnd:e,yStart:t,yEnd:i})=>r?{x:e,y:t}:{x:e,y:isNaN(i)?t:i},EG=({yDirection:r,xStart:e,xEnd:t,yStart:i,yEnd:n})=>r?{x:t,y:isNaN(n)?i:n}:{x:e,y:isNaN(n)?i:n},r3={top:{c:GF},bottom:{c:SG},left:{c:CG},right:{c:yG},topLeft:{c:bG},topRight:{c:wG},bottomLeft:{c:_G},bottomRight:{c:EG},inside:{c:({xEnd:r,yStart:e,yEnd:t})=>({x:r/2,y:isNaN(t)?e:(e+t)/2})},insideLeft:{c:CG},insideRight:{c:yG},insideTop:{c:GF},insideBottom:{c:SG},insideTopLeft:{c:bG},insideBottomLeft:{c:_G},insideTopRight:{c:wG},insideBottomRight:{c:EG}},o3=as(["top","left","right","bottom","topLeft","topRight","bottomLeft","bottomRight","inside","insideLeft","insideRight","insideTop","insideBottom","insideTopLeft","insideBottomLeft","insideTopRight","insideBottomRight"],"crossLine label position"),ec=class{constructor(){this.enabled=void 0,this.text=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=14,this.fontFamily="Verdana, sans-serif",this.padding=5,this.color="rgba(87, 87, 87, 1)",this.position=void 0,this.rotation=void 0,this.parallel=void 0}};I([H(Ot,{optional:!0})],ec.prototype,"enabled",2),I([H(et,{optional:!0})],ec.prototype,"text",2),I([H(jg,{optional:!0})],ec.prototype,"fontStyle",2),I([H(zg,{optional:!0})],ec.prototype,"fontWeight",2),I([H(qe)],ec.prototype,"fontSize",2),I([H(et)],ec.prototype,"fontFamily",2),I([H(Xi)],ec.prototype,"padding",2),I([H(Si,{optional:!0})],ec.prototype,"color",2),I([H(o3,{optional:!0})],ec.prototype,"position",2),I([H(Wg,{optional:!0})],ec.prototype,"rotation",2),I([H(Ot,{optional:!0})],ec.prototype,"parallel",2);var To=class YT{constructor(){this.id=Ru(this),this.enabled=void 0,this.type=void 0,this.range=void 0,this.value=void 0,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=void 0,this.strokeOpacity=void 0,this.lineDash=void 0,this.label=new ec,this.scale=void 0,this.clippedRange=[-1/0,1/0],this.gridLength=0,this.sideFlag=-1,this.parallelFlipRotation=0,this.regularFlipRotation=0,this.direction="x",this.group=new vt({name:`${this.id}`,layer:!0,zIndex:YT.LINE_LAYER_ZINDEX}),this.labelGroup=new vt({name:`${this.id}`,layer:!0,zIndex:YT.LABEL_LAYER_ZINDEX}),this.crossLineRange=new Fu,this.crossLineLabel=new Ri,this.labelPoint=void 0,this.data=[],this.startLine=!1,this.endLine=!1,this.isRange=!1;const{group:e,labelGroup:t,crossLineRange:i,crossLineLabel:n}=this;e.append(i),t.append(n),i.pointerEvents=1}update(e){const{enabled:t,data:i,type:n,value:s,range:o,scale:a}=this;if(!(n&&a&&t&&e&&mG(n,s,o,a)&&0!==i.length))return this.group.visible=!1,void(this.labelGroup.visible=!1);this.group.visible=e,this.labelGroup.visible=e,this.group.zIndex=this.getZIndex(this.isRange),this.updateNodes()}calculateLayout(e,t){if(!e||!this.createNodeData(t))return;const{sideFlag:n,gridLength:s,data:o}=this,a=[],u=n*s,p=o[0],g=o[1],m=new Bt(Math.min(0,u),Math.min(p,g),Math.abs(0-u),Math.abs(p-g));a.push(m);const y=this.computeLabelBBox();return y&&a.push(y),Bt.merge(a)}updateNodes(){this.updateRangeNode(),this.label.enabled&&(this.updateLabel(),this.positionLabel())}createNodeData(e){var t,i,n;const{scale:s,gridLength:o,sideFlag:a,direction:c,label:{position:u="top"},clippedRange:p,strokeWidth:g=0}=this;if(this.data=[],!s)return!1;const m=null!=(t=s.bandwidth)?t:0,y=null!=(i=s.step)?i:0,b=(e?-1:1)*(s instanceof xu?(y-m)/2:0),[_,E]=[0,a*o];let[D,R]=this.getRange(),[O,L]=[Number(s.convert(D,{clampMode:"clamped"}))-b,s.convert(R,{clampMode:"clamped"})+m+b];O=rM(O,p),L=rM(L,p),[D,R]=[Number(s.convert(D)),s.convert(R)+m];const k=(D===O||R===L||O!==L)&&Math.abs(L-O)>0;if(k&&O>L&&([O,L]=[L,O],[D,R]=[R,D]),D-b>=O&&(D-=b),R+b<=L&&(R+=b),this.isRange=k,this.startLine=g>0&&D>=O&&D<=O+b,this.endLine=g>0&&R>=L-m-b&&R<=L,!k&&!this.startLine&&!this.endLine)return!1;if(this.data=[O,L],this.label.enabled){const U="y"===c,{c:j=GF}=null!=(n=r3[u])?n:{},{x:q,y:J}=j({yDirection:U,xStart:_,xEnd:E,yStart:O,yEnd:L});this.labelPoint={x:q,y:J}}return!0}updateRangeNode(){var e;const{crossLineRange:t,sideFlag:i,gridLength:n,data:s,startLine:o,endLine:a,isRange:c,fill:u,fillOpacity:p,stroke:g,strokeWidth:m,lineDash:y}=this;t.x1=0,t.x2=i*n,t.y1=s[0],t.y2=s[1],t.startLine=o,t.endLine=a,t.isRange=c,t.fill=u,t.fillOpacity=p??1,t.stroke=g,t.strokeWidth=m??1,t.strokeOpacity=null!=(e=this.strokeOpacity)?e:1,t.lineDash=y}updateLabel(){const{crossLineLabel:e,label:t}=this;!t.text||(e.fontStyle=t.fontStyle,e.fontWeight=t.fontWeight,e.fontSize=t.fontSize,e.fontFamily=t.fontFamily,e.fill=t.color,e.text=t.text)}positionLabel(){const{crossLineLabel:e,labelPoint:{x:t,y:i}={},label:{parallel:n,rotation:s,position:o="top",padding:a=0},direction:c,parallelFlipRotation:u,regularFlipRotation:p}=this;if(void 0===t||void 0===i)return;const{defaultRotation:g,configuredRotation:m}=mM({rotation:s,parallel:n,regularFlipRotation:p,parallelFlipRotation:u});e.rotation=g+m,e.textBaseline="middle",e.textAlign="center";const y=e.computeTransformedBBox();if(!y)return;const b="y"===c,{xTranslation:_,yTranslation:E}=vG({yDirection:b,padding:a,position:o,bbox:y});e.translationX=t+_,e.translationY=i+E}getZIndex(e=!1){return e?YT.RANGE_LAYER_ZINDEX:YT.LINE_LAYER_ZINDEX}getRange(){var e;const{value:t,range:i,scale:n}=this,s=$i.is(n),o=null!=(e=i?.[0])?e:t;let a=i?.[1];return!s&&void 0===a&&(a=o),s&&o===a&&(a=void 0),[o,a]}computeLabelBBox(){const{label:e}=this;if(!e.enabled)return;const t=new Ri;t.fontFamily=e.fontFamily,t.fontSize=e.fontSize,t.fontStyle=e.fontStyle,t.fontWeight=e.fontWeight,t.text=e.text;const{labelPoint:{x:i,y:n}={},label:{parallel:s,rotation:o,position:a="top",padding:c=0},direction:u,parallelFlipRotation:p,regularFlipRotation:g}=this;if(void 0===i||void 0===n)return;const{configuredRotation:m}=mM({rotation:o,parallel:s,regularFlipRotation:g,parallelFlipRotation:p});t.rotation=m,t.textBaseline="middle",t.textAlign="center";const y=t.computeTransformedBBox();if(!y)return;const b="y"===u,{xTranslation:_,yTranslation:E}=vG({yDirection:b,padding:c,position:a,bbox:y});return t.translationX=i+_,t.translationY=n+E,t.computeTransformedBBox()}calculatePadding(e){var t,i,n,s,o,a,c,u;const{isRange:p,startLine:g,endLine:m,direction:y,label:{padding:b=0,position:_="top"}}=this;if(!p&&!g&&!m)return;const E=this.computeLabelBBox();if(null==E?.x||null==E?.y)return;const D=function n3({yDirection:r,bbox:e,padding:t=0,position:i="top"}){const n={};return i.startsWith("inside")||("top"!==i||r?"bottom"!==i||r?"left"===i&&r?n.left=t+e.width:"right"===i&&r&&(n.right=t+e.width):n.bottom=t+e.height:n.top=t+e.height),n}({yDirection:"y"===y,padding:b,position:_,bbox:E});e.left=Math.max(null!=(t=e.left)?t:0,null!=(i=D.left)?i:0),e.right=Math.max(null!=(n=e.right)?n:0,null!=(s=D.right)?s:0),e.top=Math.max(null!=(o=e.top)?o:0,null!=(a=D.top)?a:0),e.bottom=Math.max(null!=(c=e.bottom)?c:0,null!=(u=D.bottom)?u:0)}};To.LINE_LAYER_ZINDEX=8,To.RANGE_LAYER_ZINDEX=3,To.LABEL_LAYER_ZINDEX=7,To.className="CrossLine",I([H(Ot,{optional:!0})],To.prototype,"enabled",2),I([H(as(["range","line"],"a crossLine type"),{optional:!0})],To.prototype,"type",2),I([H(Pu(kF("range"),MD.restrict({length:2})),{optional:!0})],To.prototype,"range",2),I([H(kF("value"),{optional:!0})],To.prototype,"value",2),I([H(Si,{optional:!0})],To.prototype,"fill",2),I([H(Fi,{optional:!0})],To.prototype,"fillOpacity",2),I([H(Si,{optional:!0})],To.prototype,"stroke",2),I([H(Xi,{optional:!0})],To.prototype,"strokeWidth",2),I([H(Fi,{optional:!0})],To.prototype,"strokeOpacity",2),I([H(bp,{optional:!0})],To.prototype,"lineDash",2);var VF=To,DG=class{constructor(){this.moduleMap=new Map}addModule(r,e){if(this.moduleMap.has(r.optionsKey))throw new Error(`AG Charts - module already initialised: ${r.optionsKey}`);this.moduleMap.set(r.optionsKey,e(r))}removeModule(r){var e;const t=Ja(r)?r:r.optionsKey;null==(e=this.moduleMap.get(t))||e.destroy(),this.moduleMap.delete(t)}isModuleEnabled(r){return this.moduleMap.has(Ja(r)?r:r.optionsKey)}getModule(r){return this.moduleMap.get(Ja(r)?r:r.optionsKey)}get modules(){return this.moduleMap.values()}mapValues(r){return Array.from(this.moduleMap.values()).map(r)}destroy(){for(const r of this.moduleMap.keys())this.removeModule({optionsKey:r})}},TG={};function Hs(r,e){const{nodes:t,selections:i}=cM(r);for(const n of i){for(const s of n.nodes()){const o=e(s,s.datum);s.setProperties(o)}n.cleanup()}for(const n of t){const s=e(n,n.datum);n.setProperties(s)}}sa(TG,{resetMotion:()=>Hs});var GD=class{constructor(r,e,t){this.states=e,this.preTransitionCb=t,this.debug=Un.create(!0,"animation"),this.state=r,this.debug(`%c${this.constructor.name} | init -> ${r}`,"color: green")}transition(r,e){var t,i;const s=this.states[this.state]?.[r];if(!s)return void this.debug(`%c${this.constructor.name} | ${this.state} -> ${r} -> ${this.state}`,"color: grey");let o=this.state;return"string"==typeof s?o=s:"object"==typeof s&&(o=s.target),this.debug(`%c${this.constructor.name} | ${this.state} -> ${r} -> ${o}`,"color: green"),null==(t=this.preTransitionCb)||t.call(this,this.state,o),this.state=o,"function"==typeof s?s(e):"object"==typeof s&&(null==(i=s.action)||i.call(s,e)),this.state}},D_=r=>`(${r})`,wp=r=>`${D_(r)}?`,RG=r=>wp(`?:${r}`),a3=new RegExp(["^",RG(`${wp(".")}${D_("[<>=^]")}`),wp("[+\\-( ]"),wp("[$\u20ac\xa3\xa5\u20a3\u20b9#]"),wp("0"),wp("\\d+"),wp(","),RG(`\\.${D_("\\d+")}`),wp("~"),wp("[%a-z]"),"$"].join(""),"i"),l3=new RegExp(["^",D_(".*?"),`#\\{${D_(".+?")}\\}`,D_(".*?"),"$"].join(""));function AG(r){let e,t;const i=l3.exec(r);i&&([,e,r,t]=i);const n=a3.exec(r);if(!n)throw new Error(`The number formatter is invalid: ${r}`);const[,s,o,a,c,u,p,g,m,y,b]=n;return{fill:s,align:o,sign:a,symbol:c,zero:u,width:parseInt(p),comma:g,precision:parseInt(m),trim:Boolean(y),type:b,prefix:e,suffix:t}}function OG(r){const e="string"==typeof r?AG(r):r,{fill:t,align:i,sign:n="-",symbol:s,zero:o,width:a,comma:c,type:u,prefix:p="",suffix:g="",precision:m}=e;let{trim:y}=e;const b=void 0===m||isNaN(m);let _,E;if(u)if(u in el&&u in T_)_=b?T_[u]:el[u];else if(u in el)_=el[u];else{if(!(u in T_))throw new Error(`The number formatter type is invalid: ${u}`);_=T_[u]}else _=el.g,y=!0;return E=null==m||b?u?6:12:m,D=>{let R=_(D,E);return y&&(R=function c3(r){return r.replace(/\.0+$/,"").replace(/(\.[1-9])0+$/,"$1")}(R)),c&&(R=function d3(r,e){let t=r.indexOf(".");t<0&&(t=r.length);const i=r.substring(0,t).split(""),n=r.substring(t);for(let s=i.length-3;s>0;s-=3)i.splice(s,0,e);return`${i.join("")}${n}`}(R,c)),R=function f3(r,e,t=""){if("("===t)return r>=0?e:`(${e})`;return`${r>=0?"+"===t?"+":"":"\u2212"}${e}`}(D,R,n),s&&"#"!==s&&(R=`${s}${R}`),"#"===s&&"x"===u&&(R=`0x${R}`),"s"===u&&(R=`${R}${function u3(r){return h3[MG(r)]}(D)}`),("%"===u||"p"===u)&&(R=`${R}%`),null!=a&&!isNaN(a)&&(R=function g3(r,e,t=" ",i=">"){let n=r;if(">"!==i&&i){if("<"===i)n=n.padEnd(e,t);else if("^"===i){const s=Math.max(0,e-n.length),o=Math.ceil(s/2),a=Math.floor(s/2);n=n.padStart(o+n.length,t),n=n.padEnd(a+n.length,t)}}else n=n.padStart(e,t);return n}(R,a,t??o,i)),R=`${p}${R}${g}`,R}}var vM=r=>Math.floor(Math.abs(r)),T_={b:r=>vM(r).toString(2),c:r=>String.fromCharCode(r),d:r=>Math.round(Math.abs(r)).toFixed(0),o:r=>vM(r).toString(8),x:r=>vM(r).toString(16),X:r=>T_.x(r).toUpperCase(),n:r=>T_.d(r),"%":r=>`${vM(100*r).toFixed(0)}`},el={e:(r,e)=>Math.abs(r).toExponential(e),E:(r,e)=>el.e(r,e).toUpperCase(),f:(r,e)=>Math.abs(r).toFixed(e),F:(r,e)=>el.f(r,e).toUpperCase(),g:(r,e)=>{if(0===r)return"0";const t=Math.abs(r),i=Math.floor(Math.log10(t));return i>=-4&&i<e?t.toFixed(e-1-i):t.toExponential(e-1)},G:(r,e)=>el.g(r,e).toUpperCase(),n:(r,e)=>el.g(r,e),p:(r,e)=>el.r(100*r,e),r:(r,e)=>{if(0===r)return"0";const t=Math.abs(r),n=Math.floor(Math.log10(t))-(e-1);if(n<=0)return t.toFixed(-n);const s=Math.pow(10,n);return(Math.round(t/s)*s).toFixed()},s:(r,e)=>{const t=MG(r);return el.r(r/Math.pow(10,t),e)},"%":(r,e)=>el.f(100*r,e)};function MG(r){return Ti(xG,3*Math.floor(Math.log10(Math.abs(r))/3),PG)}var xG=-24,PG=24,h3={[xG]:"y",[-21]:"z",[-18]:"a",[-15]:"f",[-12]:"p",[-9]:"n",[-6]:"\xb5",[-3]:"m",0:"",3:"k",6:"M",9:"G",12:"T",15:"P",18:"E",21:"Z",[PG]:"Y"};function IG(r,e){const t=AG(e??",f"),{precision:i}=t;(null==i||isNaN(i))&&("f"===t.type||"%"===t.type?t.precision=Math.max(...r.map(s=>{if("number"!=typeof s||0===s)return 0;const o=Math.floor(Math.log10(Math.abs(s))),c=s.toExponential((t.type?6:12)-1).replace(/\.?0+e/,"e"),u=c.indexOf(".");if(u<0)return o>=0?0:-o;const p=c.indexOf("e")-u;return Math.max(0,p-o-1)})):(!t.type||t.type in el)&&(t.precision=Math.max(...r.map(s=>{if("number"!=typeof s)return 0;const o=s.toExponential((t.type?6:12)-1).replace(/\.?0+e/,"e");return o.substring(0,o.indexOf("e")).replace(".","").length}))));const n=OG(t);return s=>n(Number(s))}var VD=(r,e=[])=>Object.assign(e,{fractionDigits:r});function CM(r,e,t,i,n){if(t<2)return BD(r,e,e-r);const s=R_(r,e,t,i,n);return isNaN(s)?VD(0):BD(r=Math.ceil(r/s)*s,e=Math.floor(e/s)*s,s)}var FG=[1,2,5,10];function R_(r,e,t,i=0,n=1/0){const s=Math.abs(e-r),a=Math.floor(Math.log10(s/t)),c=Math.pow(10,a),u=FG.map(p=>{const m=Math.ceil(s/(p*c));return{multiplier:p,isWithinBounds:m>=i&&m<=n,diffCount:Math.abs(m-t)}}).sort((p,g)=>p.isWithinBounds!==g.isWithinBounds?p.isWithinBounds?-1:1:p.diffCount-g.diffCount)[0].multiplier;return!u||isNaN(u)?NaN:u*c}function BD(r,e,t){const i=Math.min(r,e),n=Math.max(r,e),s=mF(t),o=Math.pow(10,s),a=Math.ceil((n-i)/t),c=VD(s);for(let u=0;u<=a;u++)c.push(Math.round((i+t*u)*o)/o);return c}var NG=class ZL extends $i{constructor(){super([1,10],[0,1]),this.type="log",this.base=10,this.baseLog=EI,this.basePow=EI,this.log=e=>Math.min(...this.domain)>=0?this.baseLog(e):-this.baseLog(-e),this.pow=e=>Math.min(...this.domain)>=0?this.basePow(e):-this.basePow(-e),this.defaultClampMode="clamped"}toDomain(e){return e}transform(e){return Math.min(...this.domain)>=0?Math.log(e):-Math.log(-e)}transformInvert(e){return Math.min(...this.domain)>=0?Math.exp(e):-Math.exp(-e)}refresh(){this.base<=0&&(this.base=0,tt.warnOnce("expecting a finite Number greater than to 0")),super.refresh()}update(){!this.domain||this.domain.length<2||(this.baseLog=ZL.getBaseLogMethod(this.base),this.basePow=ZL.getBasePowerMethod(this.base),this.nice&&this.updateNiceDomain())}updateNiceDomain(){const[e,t]=this.domain,i=e>t?Math.ceil:Math.floor,n=e>t?Math.floor:Math.ceil,s=this.pow(i(this.log(e))),o=this.pow(n(this.log(t)));this.niceDomain=[s,o]}ticks(){var e;const t=null!=(e=this.tickCount)?e:10;if(!this.domain||this.domain.length<2||t<1)return[];this.refresh();const i=this.base,[n,s]=this.getDomain(),o=Math.min(n,s),a=Math.max(n,s);let c=this.log(o),u=this.log(a);if(this.interval){const E=Math.abs(this.interval),D=Math.abs(u-c);let R=BD(c,u,Math.min(D,E));if(R=VD(R.fractionDigits,R.map(O=>this.pow(O)).filter(O=>O>=o&&O<=a)),!this.isDenseInterval({start:o,stop:a,interval:E,count:R.length}))return R}if(i%1!=0||u-c>=t){let E=CM(c,u,Math.min(u-c,t));return E=VD(E.fractionDigits,E.map(D=>this.pow(D))),E}const m=[],y=o>0;c=Math.floor(c)-1,u=Math.round(u)+1;const b=S_(this.range)/t;let _=1/0;for(let E=c;E<=u;E++){const D=this.convert(this.pow(E+1));for(let R=1;R<i;R++){const O=y?R:i-R+1,L=this.pow(E)*O,k=this.convert(L),U=Math.abs(_-k),j=Math.abs(k-D),q=U>=b&&j>=b;L>=o&&L<=a&&(1===R||q)&&(m.push(L),_=k)}}return m}tickFormat({count:e,ticks:t,specifier:i}){return e!==1/0&&null==t&&this.ticks(),i??(i=10===this.base?".0e":","),Ja(i)?OG(i):i}static getBaseLogMethod(e){switch(e){case 10:return Math.log10;case Math.E:return Math.log;case 2:return Math.log2;default:const t=Math.log(e);return i=>Math.log(i)/t}}static getBasePowerMethod(e){switch(e){case 10:return t=>t>=0?Yt(10,t):1/Yt(10,-t);case Math.E:return Math.exp;default:return t=>Yt(e,t)}}};I([la],NG.prototype,"base",2);var BF=NG,yM={periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]};function HF(r,e=new Date(r.getFullYear(),0,1)){const t=r.getTimezoneOffset()-e.getTimezoneOffset(),i=r.getTime()-e.getTime()+6e4*t;return Math.floor(i/864e5)}function LG(r,e){const n=(e-new Date(r.getFullYear(),0,1).getDay()+7)%7,s=new Date(r.getFullYear(),0,n+1);return s<=r?Math.floor(HF(r,s)/7)+1:0}function VG(r,e=r.getFullYear()){const i=new Date(e,0,1).getDay(),s=new Date(e,0,(4-i+7)%7-3+1);return s<=r?Math.floor(HF(r,s)/7)+1:VG(r,e-1)}var y3={a:r=>yM.shortDays[r.getDay()],A:r=>yM.days[r.getDay()],b:r=>yM.shortMonths[r.getMonth()],B:r=>yM.months[r.getMonth()],c:"%x, %X",d:(r,e)=>Or(r.getDate(),2,e??"0"),e:"%_d",f:(r,e)=>Or(1e3*r.getMilliseconds(),6,e??"0"),H:(r,e)=>Or(r.getHours(),2,e??"0"),I:(r,e)=>{const t=r.getHours()%12;return 0===t?"12":Or(t,2,e??"0")},j:(r,e)=>Or(HF(r)+1,3,e??"0"),m:(r,e)=>Or(r.getMonth()+1,2,e??"0"),M:(r,e)=>Or(r.getMinutes(),2,e??"0"),L:(r,e)=>Or(r.getMilliseconds(),3,e??"0"),p:r=>r.getHours()<12?"AM":"PM",Q:r=>String(r.getTime()),s:r=>String(Math.floor(r.getTime()/1e3)),S:(r,e)=>Or(r.getSeconds(),2,e??"0"),u:r=>{let e=r.getDay();return e<1&&(e+=7),String(e%7)},U:(r,e)=>Or(LG(r,0),2,e??"0"),V:(r,e)=>Or(VG(r),2,e??"0"),w:(r,e)=>Or(r.getDay(),2,e??"0"),W:(r,e)=>Or(LG(r,1),2,e??"0"),x:"%-m/%-d/%Y",X:"%-I:%M:%S %p",y:(r,e)=>Or(r.getFullYear()%100,2,e??"0"),Y:(r,e)=>Or(r.getFullYear(),4,e??"0"),Z:r=>function C3(r){const e=r.getTimezoneOffset(),t=Math.abs(e);return`${e>0?"-":"+"}${Or(Math.floor(t/60),2,"0")}${Or(Math.floor(t%60),2,"0")}`}(r),"%":()=>"%"},S3={_:" ",0:"0","-":""};function Or(r,e,t){const i=String(Math.floor(r));return i.length>=e?i:`${t.repeat(e-i.length)}${i}`}function UF(r){const e=[];for(;r.length>0;){let t=r.indexOf("%");if(0!==t){const a=t>0?r.substring(0,t):r;e.push(a)}if(t<0)break;const n=S3[r[t+1]];null!=n&&t++;const s=r[t+1],o=y3[s];if("function"==typeof o)e.push([o,n]);else if("string"==typeof o){const a=UF(o);e.push([a,n])}else e.push(`${n??""}${s}`);r=r.substring(t+2)}return t=>{const i="number"==typeof t?new Date(t):t;return e.map(n=>"string"==typeof n?n:n[0](i,n[1])).join("")}}var KC={0:".%L",1:":%S",2:"%I:%M",3:"%I %p",4:"%a",5:"%b %d",6:"%B",7:"%y",8:"%Y"};function tc(r){return r instanceof Date?r.getTime():r}var WF=class extends $i{constructor(){super([],[0,1]),this.type="time",this.year=NI,this.month=FI,this.week=PI,this.day=oD,this.hour=MO,this.minute=j1,this.second=rD,this.millisecond=TI,this.tickIntervals=[[this.second,1,1e3],[this.second,5,5e3],[this.second,15,15e3],[this.second,30,3e4],[this.minute,1,lr],[this.minute,5,5*lr],[this.minute,15,15*lr],[this.minute,30,30*lr],[this.hour,1,$l],[this.hour,3,3*$l],[this.hour,6,6*$l],[this.hour,12,12*$l],[this.day,1,qc],[this.day,2,2*qc],[this.week,1,Lg],[this.week,2,2*Lg],[this.week,3,3*Lg],[this.month,1,OC],[this.month,2,2*OC],[this.month,3,3*OC],[this.month,4,4*OC],[this.month,6,6*OC],[this.year,1,MC]]}toDomain(r){return new Date(r)}calculateDefaultTickFormat(r=[]){let e=8;const t=c=>{c<e&&(e=c)};for(const c of r)t(this.getLowestGranularityFormat(c));const i=tc(r[0]),n=tc(r.at(-1)),s=new Date(i).getFullYear(),a=new Date(n).getFullYear()-s>0;return this.buildFormatString(e,a)}buildFormatString(r,e){let t=[KC[r]],i=0;const s=S_(this.getDomain().map(tc));switch(r){case 1:s/lr>1&&t.push(KC[2]);case 2:s/$l>1&&t.push(KC[3]);case 3:i=t.length,s/qc>1&&t.push(KC[4]);case 4:if(s/Lg>1||e){const o=t.indexOf(KC[4]);o>-1&&t.splice(o,1,KC[5])}case 5:case 6:(s/MC>1||e)&&t.push(KC[8])}return i<t.length&&(t=[...t.slice(0,i),t.slice(i).join(" ")]),i>0&&(t=[...t.slice(0,i).reverse(),...t.slice(i)],i<t.length&&t.splice(i,0," ")),t.join("")}getLowestGranularityFormat(r){return this.second.floor(r)<r?0:this.minute.floor(r)<r?1:this.hour.floor(r)<r?2:this.day.floor(r)<r?3:this.month.floor(r)<r?this.week.floor(r)<r?4:5:this.year.floor(r)<r?6:8}defaultTickFormat(r){const e=this.calculateDefaultTickFormat(r);return t=>UF(e)(t)}getTickInterval({start:r,stop:e,count:t,minCount:i,maxCount:n}){const{tickIntervals:s}=this;let o,a;const c=t??$i.defaultTickCount,u=Math.abs(e-r)/Math.max(c,1);let p=0;for(;p<s.length&&u>s[p][2];)p++;if(0===p)a=Math.max(R_(r,e,c,i,n),1),o=this.millisecond;else if(p===s.length)a=R_(r/MC,e/MC,c,i,n),o=this.year;else{const y=u-s[p-1][2]<s[p][2]-u?p-1:p;[o,a]=s[y]}return o.every(a)}invert(r){return new Date(super.invert(r))}ticks(){if(!this.domain||this.domain.length<2)return[];this.refresh();const[r,e]=this.getDomain().map(tc),t=Math.min(r,e),i=Math.max(r,e);if(void 0!==this.interval)return this.getTicksForInterval({start:t,stop:i});if(this.nice){const{tickCount:n}=this;if(2===n)return this.niceDomain;if(1===n)return this.niceDomain.slice(0,1)}return this.getDefaultTicks({start:t,stop:i})}getDefaultTicks({start:r,stop:e}){const t=this.getTickInterval({start:r,stop:e,count:this.tickCount,minCount:this.minTickCount,maxCount:this.maxTickCount});return t?t.range(new Date(r),new Date(e)):[]}getTicksForInterval({start:r,stop:e}){const{interval:t,tickIntervals:i}=this;if(!t)return[];if(t instanceof AC){const p=t.range(new Date(r),new Date(e));return this.isDenseInterval({start:r,stop:e,interval:t,count:p.length})?this.getDefaultTicks({start:r,stop:e}):p}const n=Math.abs(t);if(this.isDenseInterval({start:r,stop:e,interval:n}))return this.getDefaultTicks({start:r,stop:e});const s=[...i];s.reverse();const o=s.find(p=>n%p[2]==0);if(o)return o[0].every(n/(o[2]/o[1])).range(new Date(r),new Date(e));let a=new Date(r);const c=new Date(e),u=[];for(;a<=c;)u.push(a),a=new Date(a),a.setMilliseconds(a.getMilliseconds()+n);return u}tickFormat({ticks:r,specifier:e}){return null==e?this.defaultTickFormat(r):UF(e)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}updateNiceDomain(){let[e,t]=this.domain;for(let i=0;i<4;i++){this.updateNiceDomainIteration(e,t);const[n,s]=this.niceDomain;if(tc(e)===tc(n)&&tc(t)===tc(s))break;e=n,t=s}}updateNiceDomainIteration(r,e){const t=Math.min(tc(r),tc(e)),i=Math.max(tc(r),tc(e)),n=r>e,{interval:s}=this;let o;if(s instanceof AC)o=s;else{const a="number"==typeof s?(i-t)/Math.max(s,1):this.tickCount;o=this.getTickInterval({start:t,stop:i,count:a,minCount:this.minTickCount,maxCount:this.maxTickCount})}if(o){const a=o.range(new Date(t),new Date(i),!0),c=n?[...a].reverse():a,u=c[0],p=c.at(-1);this.niceDomain=[u,p]}}},dn=class Ey{constructor(e,t,i=!0){this.parentNode=e,this.autoCleanup=i,this.garbageBin=new Set,this._nodesMap=new Map,this._nodes=[],this.data=[],this.debug=Un.create(!0,"scene","scene:selections"),this.nodeFactory=Object.prototype.isPrototypeOf.call(b_,t)?()=>new t:t}static select(e,t,i=!0){return new Ey(e,t,i)}static selectAll(e,t){const i=[],n=s=>{t(s)&&i.push(s),s.children.forEach(n)};return n(e),i}static selectByClass(e,t){return Ey.selectAll(e,i=>i instanceof t)}static selectByTag(e,t){return Ey.selectAll(e,i=>i.tag===t)}createNode(e,t,i){const n=this.nodeFactory(e);return n.datum=e,t?.(n),null!=i?this._nodes.splice(i,0,n):this._nodes.push(n),this.parentNode.appendChild(n),n}update(e,t,i){if(this.garbageBin.size>0&&this.debug(`Selection - update() called with pending garbage: ${e}`),i){const n=new Map(e.map((s,o)=>[i(s),[s,o]]));for(const[s,o]of this._nodesMap.entries())if(n.has(o)){const[a]=n.get(o);s.datum=a,this.garbageBin.delete(s),n.delete(o)}else this.garbageBin.add(s);for(const[s,[o,a]]of n.entries())this._nodesMap.set(this.createNode(o,t,a),s)}else{const n=Math.max(e.length,this.data.length);for(let s=0;s<n;s++)s>=e.length?this.garbageBin.add(this._nodes[s]):s>=this._nodes.length?this.createNode(e[s],t):(this._nodes[s].datum=e[s],this.garbageBin.delete(this._nodes[s]))}return this.data=e.slice(),this.autoCleanup&&this.cleanup(),this}cleanup(){return 0===this.garbageBin.size||(this._nodes=this._nodes.filter(e=>!this.garbageBin.has(e)||(this._nodesMap.delete(e),this.garbageBin.delete(e),this.parentNode.removeChild(e),!1))),this}clear(){return this.update([]),this}isGarbage(e){return this.garbageBin.has(e)}hasGarbage(){return this.garbageBin.size>0}each(e){return this._nodes.forEach((t,i)=>e(t,t.datum,i)),this}*[Symbol.iterator](){for(let e=0;e<this._nodes.length;e++){const t=this._nodes[e],i=this._nodes[e].datum;yield{node:t,datum:i,index:e}}}select(e){return Ey.selectAll(this.parentNode,e)}selectByClass(e){return Ey.selectByClass(this.parentNode,e)}selectByTag(e){return Ey.selectByTag(this.parentNode,e)}nodes(){return this._nodes}},Us=class extends Ql{constructor(r={}){super(r),this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.restoreOwnStyles()}set x(r){this.x1=r,this.x2=r}set y(r){this.y1=r,this.y2=r}computeBBox(){return new Bt(Math.min(this.x1,this.x2),Math.min(this.y1,this.y2),Math.abs(this.x2-this.x1),Math.abs(this.y2-this.y1))}isPointInPath(r,e){if(this.x1===this.x2||this.y1===this.y2){const{x:t,y:i}=this.transformPoint(r,e);return this.computeBBox().grow(this.strokeWidth/2).containsPoint(t,i)}return!1}render(r){var e;const{ctx:t,forceRender:i,stats:n,devicePixelRatio:s}=r;if(0===this.dirty&&!i)return void(n&&(n.nodesSkipped+=this.nodeCount.count));this.computeTransformMatrix(),this.matrix.toContext(t);let{x1:o,y1:a,x2:c,y2:u}=this;if(o===c){const{strokeWidth:p}=this,g=Math.round(o*s)/s+Math.trunc(p*s)%2/(2*s);o=g,c=g}else if(a===u){const{strokeWidth:p}=this,g=Math.round(a*s)/s+Math.trunc(p*s)%2/(2*s);a=g,u=g}t.beginPath(),t.moveTo(o,a),t.lineTo(c,u),this.fillStroke(t),null==(e=this.fillShadow)||e.markClean(),super.render(r)}};function b3(r,e,t,i,n){let s=r.x;r.x<e?s=e:r.x>e+i&&(s=e+i);let o=r.y;r.y<t?o=t:r.y>t+n&&(o=t+n);const a=r.x-s,c=r.y-o;return Math.sqrt(a*a+c*c)<=.5*r.size}function BG(r,e,t,i,n){return r.x+r.width>e&&r.x<e+i&&r.y+r.height>t&&r.y<t+n}function _3(r,e,t,i,n){return e+i<r.x+r.width&&e>r.x&&t>r.y&&t+n<r.y+r.height}function w3(r){return null!=r&&"object"==typeof r.point&&"object"==typeof r.label}function T3(r,e){return r.length===e.length&&r.every((t,i)=>Number(t)===Number(e[i]))}Us.className="Line",Us.defaultStyles=Object.assign({},Ql.defaultStyles,{fill:void 0,strokeWidth:1}),I([at({redraw:3})],Us.prototype,"x1",2),I([at({redraw:3})],Us.prototype,"y1",2),I([at({redraw:3})],Us.prototype,"x2",2),I([at({redraw:3})],Us.prototype,"y2",2);var R3=["stroke","lineDash"],A3=Sp(r=>ql(r)&&Object.keys(r).every(e=>R3.includes(e)),"objects with gridline style properties such as 'stroke' or 'lineDash'"),SM=class{constructor(){this.enabled=!0,this.width=1,this.style=[{stroke:void 0,lineDash:[]}]}};function Ep(r,e=[void 0]){return Yl((t,i,n)=>e.includes(n)?PC(r)?r(n):r:n)}I([H(Ot)],SM.prototype,"enabled",2),I([H(qe)],SM.prototype,"width",2),I([H(A3)],SM.prototype,"style",2);var bs=class{constructor(){this.enabled=!0,this.autoWrap=!1,this.maxWidth=void 0,this.maxHeight=void 0,this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.padding=5,this.minSpacing=NaN,this.color="rgba(87, 87, 87, 1)",this.rotation=void 0,this.avoidCollisions=!0,this.mirrored=!1,this.parallel=!1,this.formatter=void 0}getSideFlag(){return this.mirrored?1:-1}getFont(){return $g(this)}};I([H(Ot)],bs.prototype,"enabled",2),I([H(Ot,{optional:!0})],bs.prototype,"autoWrap",2),I([H(qe,{optional:!0})],bs.prototype,"maxWidth",2),I([H(qe,{optional:!0})],bs.prototype,"maxHeight",2),I([H(jg,{optional:!0})],bs.prototype,"fontStyle",2),I([H(zg,{optional:!0})],bs.prototype,"fontWeight",2),I([H(Xi.restrict({min:1}))],bs.prototype,"fontSize",2),I([H(et)],bs.prototype,"fontFamily",2),I([H(qe)],bs.prototype,"padding",2),I([H(__),Ep(NaN)],bs.prototype,"minSpacing",2),I([H(Si,{optional:!0})],bs.prototype,"color",2),I([H(Wg,{optional:!0})],bs.prototype,"rotation",2),I([H(Ot)],bs.prototype,"avoidCollisions",2),I([H(Ot)],bs.prototype,"mirrored",2),I([H(Ot)],bs.prototype,"parallel",2),I([H(et,{optional:!0})],bs.prototype,"format",2);var HD=class{constructor(){this.enabled=!0,this.width=1,this.color=void 0}};I([H(Ot)],HD.prototype,"enabled",2),I([H(qe)],HD.prototype,"width",2),I([H(Si,{optional:!0})],HD.prototype,"color",2);var O3=zi(r=>Ei(r)&&r>0||r instanceof AC,"a non-zero positive Number value or, for a time axis, a Time Interval such as 'agCharts.time.month'"),nd=class{constructor(){this.enabled=!0,this.width=1,this.size=6,this.color=void 0,this.interval=void 0,this.values=void 0,this.minSpacing=NaN}};function jF(r){const[e,t]=yp(r.range),i=Math.floor(e),n=Math.ceil(t);return{min:i,max:n,visible:i!==n}}I([H(Ot)],nd.prototype,"enabled",2),I([H(qe)],nd.prototype,"width",2),I([H(qe)],nd.prototype,"size",2),I([H(Si,{optional:!0})],nd.prototype,"color",2),I([H(O3,{optional:!0})],nd.prototype,"interval",2),I([H(MD,{optional:!0})],nd.prototype,"values",2),I([H(iG),Ep(NaN)],nd.prototype,"minSpacing",2);var zF=2*Math.PI,M3=zF/2;function HG(r){const e=(o,a)=>{const[c=r.min,u=r.max]=yp(a??[]);return o<c||o>u};return{tick:{fromFn(o,a,c){let u=o.y1+o.translationY,p=o.opacity;return("added"===c||e(o.datum.translationY,o.datum.range))&&(u=a.translationY,p=0),{y:0,translationY:u,opacity:p,phase:Do[c]}},toFn(o,a,c){const u=a.translationY;let p=1;return"removed"===c&&(p=0),{y:0,translationY:u,opacity:p,finish:{y:u,translationY:0}}},intermediateFn:(o,a,c)=>({visible:!e(o.y)})},line:{fromFn(o,a){var c;return nt(Re({},null!=(c=o.previousDatum)?c:a),{phase:Do.updated})},toFn:(o,a)=>Re({},a)},label:{fromFn(o,a,c){var u;const p=null!=(u=o.previousDatum)?u:a,g=p.x,m=p.y,y=p.rotationCenterX;let b=Math.round(o.translationY),_=p.rotation,E=o.opacity;return"removed"===c||e(p.y,p.range)||("added"===c||e(o.datum.y,o.datum.range))&&(b=Math.round(p.translationY),E=0,_=a.rotation),{x:g,y:m,rotationCenterX:y,translationY:b,rotation:_,opacity:E,phase:Do[c]}},toFn(o,a,c){var u,p;const g=a.x,m=a.y,y=a.rotationCenterX,b=Math.round(a.translationY);let _=0,E=1;return"added"===c?(E=1,_=a.rotation):"removed"===c?(E=0,_=a.rotation):_=function x3(r,e){return Math.abs(e-r)<M3?e:r>e?e+zF:e-zF}(null!=(p=null==(u=o.previousDatum)?void 0:u.rotation)?p:a.rotation,a.rotation),{x:g,y:m,rotationCenterX:y,translationY:b,rotation:_,opacity:E,finish:{rotation:a.rotation}}}},group:{fromFn(o,a){const{rotation:c,translationX:u,translationY:p}=o;return{rotation:c,translationX:u,translationY:p,phase:Do.updated}},toFn(o,a){const{rotation:c,translationX:u,translationY:p}=a;return{rotation:c,translationX:u,translationY:p}}}}}function UG(){return(r,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})}function WG(r){const{visible:e,min:t,max:i}=r;return(n,s)=>{const o=s.translationY;return{y:o,translationY:0,opacity:1,visible:e&&o>=t&&o<=i}}}function jG(){return(r,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})}function zG(){return(r,e)=>Re({},e)}var $G=(r=>(r[r.TickLine=0]="TickLine",r[r.TickLabel=1]="TickLabel",r[r.GridLine=2]="GridLine",r[r.GridArc=3]="GridArc",r[r.AxisLine=4]="AxisLine",r))($G||{}),YC=class eU{constructor(e,t,i){let n;this.moduleCtx=e,this.scale=t,this.id=Ru(this),this.nice=!0,this.reverse=!1,this.keys=[],this.dataDomain={domain:[],clipped:!1},this.boundSeries=[],this.includeInvisibleDomains=!1,this.interactionEnabled=!0,this.axisGroup=new vt({name:`${this.id}-axis`,zIndex:2}),this.lineNode=this.axisGroup.appendChild(new Us),this.tickLineGroup=this.axisGroup.appendChild(new vt({name:`${this.id}-Axis-tick-lines`,zIndex:2})),this.tickLabelGroup=this.axisGroup.appendChild(new vt({name:`${this.id}-Axis-tick-labels`,zIndex:2})),this.crossLineGroup=new vt({name:`${this.id}-CrossLines`}),this.gridGroup=new vt({name:`${this.id}-Axis-grid`}),this.gridLineGroup=this.gridGroup.appendChild(new vt({name:`${this.id}-gridLines`,zIndex:1})),this.tickLineGroupSelection=dn.select(this.tickLineGroup,Us,!1),this.tickLabelGroupSelection=dn.select(this.tickLabelGroup,Ri,!1),this.gridLineGroupSelection=dn.select(this.gridLineGroup,Us,!1),this.line=new HD,this.tick=this.createTick(),this.gridLine=new SM,this.label=this.createLabel(),this.defaultTickMinSpacing=eU.defaultTickMinSpacing,this.translation={x:0,y:0},this.rotation=0,this.layout={label:{fractionDigits:0,padding:this.label.padding,format:this.label.format}},this.destroyFns=[],this.range=[0,1],this.visibleRange=[0,1],this.title=void 0,this._titleCaption=new gn,this.gridLength=0,this.fractionDigits=0,this.gridPadding=0,this.seriesAreaPadding=0,this.tickGenerationResult=void 0,this.maxThickness=1/0,this.moduleMap=new DG,this.refreshScale(),this._titleCaption.registerInteraction(this.moduleCtx),this._titleCaption.node.rotation=-Math.PI/2,this.axisGroup.appendChild(this._titleCaption.node),this.destroyFns.push(e.interactionManager.addListener("hover",s=>this.checkAxisHover(s))),this.animationManager=e.animationManager,this.animationState=new GD("empty",{empty:{update:{target:"ready",action:()=>this.resetSelectionNodes()},reset:"empty"},ready:{update:s=>this.animateReadyUpdate(s),resize:()=>this.resetSelectionNodes(),reset:"empty"}}),this._crossLines=[],this.assignCrossLineArrayConstructor(this._crossLines),this.destroyFns.push(e.layoutService.addListener("layout-complete",s=>{null!=n&&null!=Ar(s.chart,n)&&this.animationState.transition("resize"),n=Re({},s.chart)})),!1!==i?.respondsToZoom&&this.destroyFns.push(e.updateService.addListener("update-complete",s=>{this.minRect=s.minRect}))}get type(){var e;return null!=(e=this.constructor.type)?e:""}set crossLines(e){var t,i;null==(t=this._crossLines)||t.forEach(n=>this.detachCrossLine(n)),e&&this.assignCrossLineArrayConstructor(e),this._crossLines=e,null==(i=this._crossLines)||i.forEach(n=>{this.attachCrossLine(n),this.initCrossLine(n)})}get crossLines(){return this._crossLines}resetAnimation(e){"initial"===e&&this.animationState.transition("reset")}attachCrossLine(e){this.crossLineGroup.appendChild(e.group),this.crossLineGroup.appendChild(e.labelGroup)}detachCrossLine(e){this.crossLineGroup.removeChild(e.group),this.crossLineGroup.removeChild(e.labelGroup)}destroy(){this.moduleMap.destroy(),this.destroyFns.forEach(e=>e())}refreshScale(){var e;this.range=this.scale.range.slice(),null==(e=this.crossLines)||e.forEach(this.initCrossLine,this)}updateRange(){var e;const{range:t,visibleRange:i,scale:n}=this,s=(t[1]-t[0])/(i[1]-i[0]),a=t[0]-s*i[0];n.range=[a,a+s],null==(e=this.crossLines)||e.forEach(c=>{c.clippedRange=[t[0],t[1]]})}setCrossLinesVisible(e){this.crossLineGroup.visible=e}attachAxis(e,t){t.appendChild(this.gridGroup),e.appendChild(this.axisGroup),e.appendChild(this.crossLineGroup)}detachAxis(e,t){t.removeChild(this.gridGroup),e.removeChild(this.axisGroup),e.removeChild(this.crossLineGroup)}inRange(e,t=0,i=0){const[n,s]=yp(this.range);return e+t>=n-i&&e<=s+i}onLabelFormatChange(e,t){const{scale:i,fractionDigits:n}=this,o=!(i instanceof BF)&&n>0?a=>"number"==typeof a?a.toFixed(n):String(a):a=>String(a);if(t&&i&&i.tickFormat)try{this.labelFormatter=i.tickFormat({ticks:e,specifier:t})}catch{this.labelFormatter=o,tt.warnOnce(`the axis label format string ${t} is invalid. No formatting will be applied`)}else this.labelFormatter=o}setTickInterval(e){var t;this.scale.interval=null!=(t=this.tick.interval)?t:e}setTickCount(e,t,i){const{scale:n}=this;if(e&&$i.is(n)){if("number"==typeof e)return n.tickCount=e,n.minTickCount=t??0,void(n.maxTickCount=i??1/0);n instanceof WF&&this.setTickInterval(e)}}onGridLengthChange(e,t){var i;(t&&!e||!t&&e)&&this.onGridVisibilityChange(),null==(i=this.crossLines)||i.forEach(this.initCrossLine,this)}onGridVisibilityChange(){this.gridLineGroupSelection.clear()}createTick(){return new nd}createLabel(){return new bs}checkAxisHover(e){!this.interactionEnabled||!this.computeBBox().containsPoint(e.offsetX,e.offsetY)||this.moduleCtx.chartEventManager.axisHover(this.id,this.direction)}update(e=0,t=!0){if(!this.tickGenerationResult)return;const{rotation:i,parallelFlipRotation:n,regularFlipRotation:s}=this.calculateRotations(),o=this.label.getSideFlag();this.updatePosition();const a=this.getAxisLineCoordinates(),{tickData:c,combinedRotation:u,textBaseline:p,textAlign:g,primaryTickCount:m}=this.tickGenerationResult,y=this.tickLabelGroupSelection.nodes().map(b=>b.datum.tickId);if(this.updateSelections(a,c.ticks,{combinedRotation:u,textAlign:g,textBaseline:p,range:this.scale.range}),!t||this.animationManager.isSkipped())this.resetSelectionNodes();else{const b=this.calculateUpdateDiff(y,c);this.animationState.transition("update",b)}return this.updateAxisLine(),this.updateLabels(),this.updateVisibility(),this.updateGridLines(o),this.updateTickLines(),this.updateTitle({anyTickVisible:c.ticks.length>0}),this.updateCrossLines({rotation:i,parallelFlipRotation:n,regularFlipRotation:s}),this.updateLayoutState(),m}getAxisLineCoordinates(){const[e,t]=yp(this.range);return{x:0,y1:e,y2:t}}getTickLineCoordinates(e){const i=this.label.getSideFlag()*this.getTickSize(),n=Math.min(0,i);return{x1:n,x2:n+Math.abs(i),y:e.translationY}}getTickLabelProps(e,t){const{label:i}=this,{combinedRotation:n,textBaseline:s,textAlign:o,range:a}=t,c=e.tickLabel,p=i.getSideFlag()*(this.getTickSize()+i.padding+this.seriesAreaPadding);return{tickId:e.tickId,translationY:e.translationY,fill:i.color,fontFamily:i.fontFamily,fontSize:i.fontSize,fontStyle:i.fontStyle,fontWeight:i.fontWeight,rotation:n,rotationCenterX:p,text:c,textAlign:o,textBaseline:s,visible:""!==c&&null!=c,x:p,y:0,range:a}}getTickSize(){return this.tick.enabled?this.tick.size:this.createTick().size}setTitleProps(e,t){var i;const{title:n}=this;if(n){if(e.color=n.color,e.fontFamily=n.fontFamily,e.fontSize=n.fontSize,e.fontStyle=n.fontStyle,e.fontWeight=n.fontWeight,e.enabled=n.enabled,e.wrapping=n.wrapping,n.enabled){const s=e.node,o=(null!=(i=n.spacing)?i:0)+t.spacing,a=this.label.getSideFlag(),c=os(this.rotation),u=-1===a&&c>Math.PI&&c<2*Math.PI?-1:1,p=u*a*Math.PI/2,g=1===u?"bottom":"top",{range:m}=this,y=Math.floor(u*a*(m[0]+m[1])/2),b=Math.floor(-1===a?u*-o:-o),{callbackCache:_}=this.moduleCtx,{formatter:E=(R=>R.defaultValue)}=n,D=_.call(E,this.getTitleFormatterParams());s.setProperties({rotation:p,text:D,textBaseline:g,visible:!0,x:y,y:b})}}else e.enabled=!1}calculateLayout(e){var t,i;const{rotation:n,parallelFlipRotation:s,regularFlipRotation:o}=this.calculateRotations(),a=this.label.getSideFlag(),c=a*(this.getTickSize()+this.label.padding+this.seriesAreaPadding);this.updateScale(),this.tickGenerationResult=this.generateTicks({primaryTickCount:e,parallelFlipRotation:s,regularFlipRotation:o,labelX:c,sideFlag:a}),this.updateLayoutState();const u=this.tickGenerationResult,{tickData:p,combinedRotation:g,textBaseline:m,textAlign:y}=u,b=rs(u,["tickData","combinedRotation","textBaseline","textAlign"]),_=[],{x:E,y1:D,y2:R}=this.getAxisLineCoordinates(),O=new Bt(E+Math.min(a*this.seriesAreaPadding,0),D,this.seriesAreaPadding,R-D);if(_.push(O),this.tick.enabled&&p.ticks.forEach(q=>{const{x1:J,x2:me,y:ye}=this.getTickLineCoordinates(q),Ae=new Bt(J,ye,me-J,0);_.push(Ae)}),this.label.enabled){const q=new Ri;p.ticks.forEach(J=>{const me=this.getTickLabelProps(J,{combinedRotation:g,textAlign:y,textBaseline:m,range:this.scale.range});if(!me.visible)return;q.setProperties(nt(Re({},me),{translationY:Math.round(J.translationY)}));const ye=q.computeTransformedBBox();ye&&_.push(ye)})}if(null!=(t=this.title)&&t.enabled){const q=new gn,J=Bt.merge(_).width;this.setTitleProps(q,{spacing:J});const ye=q.node.computeTransformedBBox();ye&&_.push(ye)}const U=(q=>{const J=new td,{rotation:me,translationX:ye,translationY:Ae,rotationCenterX:Pe,rotationCenterY:Le}=this.getAxisTransform();return td.updateTransformMatrix(J,1,1,me,ye,Ae,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:Pe,rotationCenterY:Le}),J.transformBBox(q)})(Bt.merge(_)),j=this.isAnySeriesActive();return null==(i=this.crossLines)||i.forEach(q=>{var J;q.sideFlag=-a,q.direction=n===-Math.PI/2?"x":"y",q instanceof VF&&(q.label.parallel=null!=(J=q.label.parallel)?J:this.label.parallel),q.parallelFlipRotation=s,q.regularFlipRotation=o,q.calculateLayout(j,this.reverse)}),{primaryTickCount:e=b.primaryTickCount,bbox:U}}updateLayoutState(){this.layout.label={fractionDigits:this.fractionDigits,padding:this.label.padding,format:this.label.format}}setDomain(e){this.dataDomain=this.normaliseDataDomain(e),this.reverse&&this.dataDomain.domain.reverse(),this.scale.domain=this.dataDomain.domain}updateScale(){this.updateRange(),this.calculateDomain(),this.setTickInterval(this.tick.interval);const{scale:e,nice:t}=this;!$i.is(e)||(e.nice=t,e.update())}calculateRotations(){const e=io(this.rotation);return{rotation:e,parallelFlipRotation:os(e),regularFlipRotation:os(e-Math.PI/2)}}generateTicks({primaryTickCount:e,parallelFlipRotation:t,regularFlipRotation:i,labelX:n,sideFlag:s}){var o;const{scale:a,tick:c,label:{parallel:u,rotation:p,fontFamily:g,fontSize:m,fontStyle:y,fontWeight:b}}=this,_=void 0!==e,{defaultRotation:E,configuredRotation:D,parallelFlipFlag:R,regularFlipFlag:O}=mM({rotation:p,parallel:u,regularFlipRotation:i,parallelFlipRotation:t}),L=D+E,k=new td,{maxTickCount:U}=this.estimateTickCount({minSpacing:c.minSpacing,maxSpacing:null!=(o=c.maxSpacing)?o:NaN}),q=!$i.is(a)||isNaN(U)?10:U;let J=FF(u,D,0,s,O);const me=function ZW(r,e,t,i){return r&&!e?t*i==-1?"hanging":"bottom":"middle"}(u,D,s,R),ye={fontFamily:g,fontSize:m,fontStyle:y,fontWeight:b,textBaseline:me,textAlign:J};let Ae={rawTicks:[],ticks:[],labelCount:0},Pe=0,Le=0,Xe=!0,Je=!1;for(;Xe&&Pe<=q&&!Je;){Le=0,J=FF(u,D,0,s,O);const Dt=this.getTickStrategies({secondaryAxis:_,index:Pe});for(const Ft of Dt){({tickData:Ae,index:Pe,autoRotation:Le,terminate:Je}=Ft({index:Pe,tickData:Ae,textProps:ye,labelOverlap:Xe,terminate:Je,primaryTickCount:e}));const Mt=0!==D||0!==Le,Nt=L+Le;J=FF(u,D,Le,s,O),Xe=this.checkLabelOverlap(Nt,Mt,k,Ae.ticks,n,nt(Re({},ye),{textAlign:J}))}}return!_&&Ae.rawTicks.length>0&&(e=Ae.rawTicks.length),{tickData:Ae,primaryTickCount:e,combinedRotation:E+D+Le,textBaseline:me,textAlign:J}}getTickStrategies({index:e,secondaryAxis:t}){const{scale:i,label:n,tick:s}=this,o=$i.is(i),a=n.enabled&&n.avoidCollisions,u=!0===n.autoRotate&&void 0===n.rotation,p=[];let g;return g=this.tick.values?3:t?1:!o&&0!==e&&a?2:0,p.push(({index:y,tickData:b,primaryTickCount:_,terminate:E})=>this.createTickData(g,y,b,E,_)),o||isNaN(s.minSpacing)||p.push(({index:b,tickData:_,primaryTickCount:E,terminate:D})=>this.createTickData(2,b,_,D,E)),a?(n.autoWrap?p.push(({index:b,tickData:_,textProps:E})=>this.wrapLabels(_,b,E)):u&&p.push(({index:b,tickData:_,labelOverlap:E,terminate:D})=>({index:b,tickData:_,autoRotation:this.getAutoRotation(E),terminate:D})),p):p}createTickData(e,t,i,n,s){var o;const{scale:a,tick:c}=this,{maxTickCount:u,minTickCount:p,defaultTickCount:g}=this.estimateTickCount({minSpacing:c.minSpacing,maxSpacing:null!=(o=c.maxSpacing)?o:NaN}),m=$i.is(a),y=!m||isNaN(u)?10:u;let b=m?Math.max(g-t,p):u;const _=void 0===c.interval&&void 0===c.values&&b>p&&(m||2===e);let E=!0;for(;E&&t<=y;){const R=i.rawTicks;b=m?Math.max(g-t,p):u;const{rawTicks:O,ticks:L,labelCount:k}=this.getTicks({tickGenerationType:e,previousTicks:R,tickCount:b,minTickCount:p,maxTickCount:u,primaryTickCount:s});i.rawTicks=O,i.ticks=L,i.labelCount=k,E=!!_&&T3(O,R),t++}return n||(n=void 0!==c.interval||void 0!==c.values),{tickData:i,index:t,autoRotation:0,terminate:n}}checkLabelOverlap(e,t,i,n,s,o){td.updateTransformMatrix(i,1,1,e,0,0);const a=this.createLabelData(n,s,o,i),c=function XW(r,e){return isNaN(r)?e?0:10:r}(this.label.minSpacing,t);return function D3(r,e){const t=[];for(let i=0;i<r.length;i++){const n=r[i],{point:{x:s,y:o},label:{text:a}}=n;let{label:{width:c,height:u}}=n;if(c+=e??0,u+=e??0,t.some(g=>BG(g,s,o,c,u)))return!0;t.push({index:i,text:a,x:s,y:o,width:c,height:u,datum:n})}return!1}(a,c)}createLabelData(e,t,i,n){const s=[];for(const o of e){const{tickLabel:a,translationY:c}=o;if(""===a||null==a)continue;const u=lG(a),{width:p,height:g}=$W(u,t,c,i),y=JW(a,new Bt(t,c,p,g),t,c,n);s.push(y)}return s}getAutoRotation(e){var t;return e?os(io(null!=(t=this.label.autoRotateAngle)?t:0)):0}getTicks({tickGenerationType:e,previousTicks:t,tickCount:i,minTickCount:n,maxTickCount:s,primaryTickCount:o}){var a;const{range:c,scale:u,visibleRange:p}=this;let g;switch(e){case 3:if($i.is(u)){const R=u.getDomain(),O=u.fromDomain(R[0]),L=u.fromDomain(R[1]),k=Math.min(O,L),U=Math.max(O,L);g=this.tick.values.filter(j=>j>=k&&j<=U).sort((j,q)=>j-q)}else g=this.tick.values;break;case 1:g=this.updateSecondaryAxisTicks(o);break;case 2:g=this.filterTicks(t,i);break;default:g=this.createTicks(i,n,s)}this.fractionDigits=g.fractionDigits>=0?g.fractionDigits:0,this.onLabelFormatChange(g,this.label.format);const m=(null!=(a=u.bandwidth)?a:0)/2,y=[];let b=0;const _=new Map,E=Math.max(0,Math.floor(p[0]*g.length)),D=Math.min(g.length,Math.ceil(p[1]*g.length));for(let R=E;R<D;R++){const O=g[R],L=u.convert(O)+m;if(c.length>0&&!this.inRange(L,0,.001))continue;const k=this.formatTick(O,R);let U=k;if(_.has(U)){const j=_.get(U);_.set(U,j+1),U=`${U}_${j}`}else _.set(U,1);y.push({tick:O,tickId:U,tickLabel:k,translationY:L}),""!==k&&null!=k&&b++}return{rawTicks:g,ticks:y,labelCount:b}}filterTicks(e,t){var i;const s=isNaN(this.tick.minSpacing)&&isNaN(null!=(i=this.tick.maxSpacing)?i:NaN)?2:Math.ceil(e.length/t);return e.filter((o,a)=>a%s==0)}createTicks(e,t,i){var n,s,o;return this.setTickCount(e,t,i),null!=(o=null==(s=(n=this.scale).ticks)?void 0:s.call(n))?o:[]}estimateTickCount({minSpacing:e,maxSpacing:t}){const{minRect:i}=this,n=this.calculateRangeWithBleed(),s=Math.max(this.defaultTickMinSpacing,n/$i.defaultMaxTickCount);let o=!isNaN(t);isNaN(e)&&(e=s),isNaN(t)&&(t=n),e>t&&(e===s?e=t:t=e);const a=i?"x"===this.direction?i.width:i.height:1;o&&(o=a<s);const c=Ti(1,Math.floor(n/e),o?Math.floor(n/a):1/0),u=Math.min(c,Math.ceil(n/t));return{minTickCount:u,maxTickCount:c,defaultTickCount:Ti(u,$i.defaultTickCount,c)}}updateVisibility(){this.moduleCtx.animationManager.isSkipped()&&this.resetSelectionNodes(),this.tickLineGroup.visible=this.tick.enabled,this.gridLineGroup.visible=this.gridLine.enabled,this.tickLabelGroup.visible=this.label.enabled}updateCrossLines({rotation:e,parallelFlipRotation:t,regularFlipRotation:i}){var n;const s=this.label.getSideFlag(),o=this.isAnySeriesActive();null==(n=this.crossLines)||n.forEach(a=>{var c;a.sideFlag=-s,a.direction=e===-Math.PI/2?"x":"y",a instanceof VF&&(a.label.parallel=null!=(c=a.label.parallel)?c:this.label.parallel),a.parallelFlipRotation=t,a.regularFlipRotation=i,a.update(o)})}updateTickLines(){const{tick:e,label:t}=this,i=t.getSideFlag();this.tickLineGroupSelection.each(n=>{n.strokeWidth=e.width,n.stroke=e.color,n.x1=i*this.getTickSize(),n.x2=0})}calculateAvailableRange(){return S_(this.range)}calculateRangeWithBleed(){const e=1/S_(this.visibleRange);return gF(this.calculateAvailableRange()*e,2)}calculateDomain(){const t=this.boundSeries.filter(i=>this.includeInvisibleDomains||i.isEnabled()).flatMap(i=>i.getDomain(this.direction));this.setDomain(t)}getAxisTransform(){return{rotation:io(this.rotation),rotationCenterX:0,rotationCenterY:0,translationX:Math.floor(this.translation.x),translationY:Math.floor(this.translation.y)}}updatePosition(){const{crossLineGroup:e,axisGroup:t,gridGroup:i,translation:n,gridLineGroupSelection:s,gridPadding:o,gridLength:a}=this,{rotation:c}=this.calculateRotations(),u=this.label.getSideFlag(),p=Math.floor(n.x),g=Math.floor(n.y);e.setProperties({rotation:c,translationX:p,translationY:g}),i.setProperties({rotation:c,translationX:p,translationY:g}),t.datum=this.getAxisTransform(),s.each(m=>{m.x1=o,m.x2=-u*a+o})}updateSecondaryAxisTicks(e){throw new Error("AG Charts - unexpected call to updateSecondaryAxisTicks() - check axes configuration.")}updateSelections(e,t,i){this.lineNode.datum=e,this.gridLineGroupSelection.update(this.gridLength?t:[],n=>n.append(new Us({tag:2})),n=>n.tickId),this.tickLineGroupSelection.update(t,n=>n.appendChild(new Us({tag:0})),n=>n.tickId),this.tickLabelGroupSelection.update(t.map(n=>this.getTickLabelProps(n,i)),n=>n.appendChild(new Ri({tag:1})),n=>n.tickId)}updateAxisLine(){const{line:e}=this;this.lineNode.setProperties({stroke:e.color,strokeWidth:e.enabled?e.width:0})}updateGridLines(e){const{gridLine:{style:t,width:i},gridPadding:n,gridLength:s}=this;0===s||0===t.length||this.gridLineGroupSelection.each((o,a,c)=>{const{stroke:u,lineDash:p}=t[c%t.length];o.setProperties({x1:n,x2:-e*s+n,fill:void 0,stroke:u,strokeWidth:i,lineDash:p})})}updateLabels(){const{label:e}=this;!e.enabled||this.tickLabelGroupSelection.each((t,i)=>{t.setProperties(i,["fill","fontFamily","fontSize","fontStyle","fontWeight","text","textAlign","textBaseline"])})}wrapLabels(e,t,i){const{parallel:n,maxWidth:s,maxHeight:o}=this.label;let a=this.maxThickness,c=Math.round(this.calculateAvailableRange()/e.labelCount);return n&&([a,c]=[c,a]),e.ticks.forEach(u=>{const{text:p}=Ri.wrap(u.tickLabel,s??a,o??c,i,"hyphenate");u.tickLabel=p}),{tickData:e,index:t,autoRotation:0,terminate:!0}}updateTitle(e){const{rotation:t,title:i,_titleCaption:n,lineNode:s,tickLineGroup:o,tickLabelGroup:a}=this;if(!i)return void(n.enabled=!1);let c=0;if(i.enabled&&e.anyTickVisible){const u=vt.computeBBox([o,a,s]);c+=(0===t?u.width:u.height)+(this.tickLabelGroup.visible?0:this.seriesAreaPadding)}this.setTitleProps(n,{spacing:c})}formatTick(e,t){var i,n;const{label:s,labelFormatter:o,fractionDigits:a,moduleCtx:{callbackCache:c}}=this;if(s.formatter){const u=a>0?e:String(e);return null!=(i=c.call(s.formatter,{value:u,index:t,fractionDigits:a,formatter:o}))?i:u}return o&&null!=(n=c.call(o,e))?n:String(e)}formatDatum(e){return String(e)}computeBBox(){return this.axisGroup.computeBBox()}initCrossLine(e){e.scale=this.scale,e.gridLength=this.gridLength}isAnySeriesActive(){return this.boundSeries.some(e=>this.includeInvisibleDomains||e.isEnabled())}clipTickLines(e,t,i,n){this.tickLineGroup.setClipRectInGroupCoordinateSpace(new Bt(e,t,i,n))}clipGrid(e,t,i,n){this.gridGroup.setClipRectInGroupCoordinateSpace(new Bt(e,t,i,n))}calculatePadding(e,t,i){const n=.01*Math.abs(i?t:e);return[n,n]}getTitleFormatterParams(){var e;const t=this.boundSeries.reduce((i,n)=>{const s=n.getKeys(this.direction),o=n.getNames(this.direction);for(let a=0;a<s.length;a++)i.push({key:s[a],name:o[a]});return i},[]);return{direction:this.direction,boundSeries:t,defaultValue:null==(e=this.title)?void 0:e.text}}normaliseDataDomain(e){return{domain:[...e],clipped:!1}}getLayoutState(){return Re({rect:this.computeBBox(),gridPadding:this.gridPadding,seriesAreaPadding:this.seriesAreaPadding,tickSize:this.getTickSize()},this.layout)}getModuleMap(){return this.moduleMap}createModuleContext(){return null!=this.axisContext||(this.axisContext=this.createAxisContext()),nt(Re({},this.moduleCtx),{parent:this.axisContext})}createAxisContext(){return{axisId:this.id,direction:this.direction,continuous:$i.is(this.scale),keys:()=>this.boundSeries.flatMap(e=>e.getKeys(this.direction)),scaleValueFormatter:e=>{var t,i;return null==(i=(t=this.scale).tickFormat)?void 0:i.call(t,{specifier:e})},scaleBandwidth:()=>{var e;return null!=(e=this.scale.bandwidth)?e:0},scaleConvert:e=>this.scale.convert(e),scaleInvert:e=>{var t,i;return null==(i=(t=this.scale).invert)?void 0:i.call(t,e)}}}animateReadyUpdate(e){const{animationManager:t}=this.moduleCtx,n=HG(jF(this));cn(this.id,"axis-group",t,[this.axisGroup],n.group),cn(this.id,"line",t,[this.lineNode],n.line),cn(this.id,"line-paths",t,[this.gridLineGroupSelection,this.tickLineGroupSelection],n.tick,(s,o)=>o.tickId,e),cn(this.id,"tick-labels",t,[this.tickLabelGroupSelection],n.label,(s,o)=>o.tickId,e)}resetSelectionNodes(){const{gridLineGroupSelection:e,tickLineGroupSelection:t,tickLabelGroupSelection:i,lineNode:n}=this,s=jF(this);Hs([this.axisGroup],(r,e)=>({rotation:e.rotation,rotationCenterX:e.rotationCenterX,rotationCenterY:e.rotationCenterY,translationX:e.translationX,translationY:e.translationY})),Hs([e,t],WG(s)),Hs([i],(r,e)=>({x:e.x,y:e.y,translationY:e.translationY,rotation:e.rotation,rotationCenterX:e.rotationCenterX})),Hs([n],zG())}calculateUpdateDiff(e,t){const i=new Set,n=new Set,s={},o=Math.max(e.length,t.ticks.length);for(let a=0;a<o;a++){const c=t.ticks[a],u=e[a],p=c?.tickId;s[p??u]=c,u!==p&&(n.has(p)?n.delete(p):p&&i.add(p),i.has(u)?i.delete(u):u&&n.add(u))}return{changed:i.size>0||n.size>0,added:Array.from(i.values()),removed:Array.from(n.values())}}isReversed(){return this.reverse}};YC.defaultTickMinSpacing=50,I([H(Ot)],YC.prototype,"nice",2),I([H(Ot)],YC.prototype,"reverse",2),I([H(Zk)],YC.prototype,"keys",2),I([H(zi(r=>"object"==typeof r,"Title object"),{optional:!0})],YC.prototype,"title",2),I([w_((r,e,t)=>r.onGridLengthChange(e,t))],YC.prototype,"gridLength",2);var $F=YC,KF=class extends bs{constructor(){super(...arguments),this.autoRotateAngle=335}};I([H(Ot,{optional:!0})],KF.prototype,"autoRotate",2),I([H(Wg)],KF.prototype,"autoRotateAngle",2);var YF=class tU extends $F{constructor(){super(...arguments),this.thickness=0,this.position="left"}static is(e){return e instanceof tU}get direction(){return["top","bottom"].includes(this.position)?"x":"y"}updateDirection(){switch(this.position){case"top":this.rotation=-90,this.label.mirrored=!0,this.label.parallel=!0;break;case"right":this.rotation=0,this.label.mirrored=!0,this.label.parallel=!1;break;case"bottom":this.rotation=-90,this.label.mirrored=!1,this.label.parallel=!0;break;case"left":this.rotation=0,this.label.mirrored=!1,this.label.parallel=!1}this.axisContext&&(this.axisContext.position=this.position,this.axisContext.direction=this.direction)}update(e,t){return this.updateDirection(),super.update(e,t)}calculateLayout(e){return this.updateDirection(),super.calculateLayout(e)}createAxisContext(){return nt(Re({},super.createAxisContext()),{position:this.position})}assignCrossLineArrayConstructor(e){uG(e,VF)}createLabel(){return new KF}};I([H(qe)],YF.prototype,"thickness",2),I([H(AF)],YF.prototype,"position",2);var UD=YF,Dp=class extends UD{constructor(r){super(r,new xu),this._paddingOverrideEnabled=!1,this.groupPaddingInner=.1,this.includeInvisibleDomains=!0}set paddingInner(r){this._paddingOverrideEnabled=!0,this.scale.paddingInner=r}get paddingInner(){return this._paddingOverrideEnabled=!0,this.scale.paddingInner}set paddingOuter(r){this.scale.paddingOuter=r}get paddingOuter(){return this.scale.paddingOuter}normaliseDataDomain(r){const e=[],t=new Set;for(const i of r){const n=i instanceof Date?i.getTime():i;t.has(n)||(t.add(n),e.push(i))}return{domain:e,clipped:!1}}calculateDomain(){if(!this._paddingOverrideEnabled){const r=this.boundSeries.map(e=>{var t;return null==(t=e.getBandScalePadding)?void 0:t.call(e)}).filter(e=>null!=e);r.length>0&&(this.scale.paddingInner=Math.min(...r.map(e=>e.inner)),this.scale.paddingOuter=Math.max(...r.map(e=>e.outer)))}return super.calculateDomain()}};Dp.className="CategoryAxis",Dp.type="category",I([H(Fi)],Dp.prototype,"groupPaddingInner",2);var KG=class{constructor(r="",e,t=0){this.x=0,this.y=0,this.subtreeLeft=NaN,this.subtreeRight=NaN,this.screenX=0,this.screenY=0,this.children=[],this.leafCount=0,this.prelim=0,this.mod=0,this.ancestor=this,this.change=0,this.shift=0,this.label=r,this.parent=e,this.depth=e?e.depth+1:0,this.number=t}getLeftSibling(){return this.number>0&&this.parent?this.parent.children[this.number-1]:void 0}getLeftmostSibling(){return this.number>0&&this.parent?this.parent.children[0]:void 0}nextLeft(){return this.children?this.children[0]:this.thread}nextRight(){return this.children?this.children[this.children.length-1]:this.thread}getSiblings(){return this.parent?this.parent.children.filter((r,e)=>e!==this.number):[]}};function F3(r,e,t){const n=t/(e.number-r.number);e.change-=n,e.shift+=t,r.change+=n,e.prelim+=t,e.mod+=t}function N3(r,e,t){return e.getSiblings().indexOf(r.ancestor)>=0?r.ancestor:t}function YG(r,e){const t=r.children;if(t.length){let i=t[0];t.forEach(o=>{YG(o,e),i=function k3(r,e,t){const i=r.getLeftSibling();if(i){let n=r,s=r,o=i,a=s.getLeftmostSibling(),c=s.mod,u=n.mod,p=o.mod,g=a.mod;for(;o.nextRight()&&s.nextLeft();){o=o.nextRight(),s=s.nextLeft(),a=a.nextLeft(),n=n.nextRight(),n.ancestor=r;const m=o.prelim+p-(s.prelim+c)+t;m>0&&(F3(N3(o,r,e),r,m),c+=m,u+=m),p+=o.mod,c+=s.mod,g+=a.mod,u+=n.mod}o.nextRight()&&!n.nextRight()?(n.thread=o.nextRight(),n.mod+=p-u):(s.nextLeft()&&!a.nextLeft()&&(a.thread=s.nextLeft(),a.mod+=c-g),e=r)}return e}(o,i,e)}),function L3(r){const e=r.children;if(e){let t=0,i=0;for(let n=e.length-1;n>=0;n--){const s=e[n];s.prelim+=t,s.mod+=t,i+=s.change,t+=s.shift+i}}}(r);const n=(t[0].prelim+t.at(-1).prelim)/2,s=r.getLeftSibling();s?(r.prelim=s.prelim+e,r.mod=r.prelim-n):r.prelim=n}else{const i=r.getLeftSibling();r.prelim=i?i.prelim+e:0}}var qG=class{constructor(){this.top=1/0,this.right=-1/0,this.bottom=-1/0,this.left=1/0}update(r,e){const{x:t,y:i}=e(r);t>this.right&&(this.right=t),t<this.left&&(this.left=t),i>this.bottom&&(this.bottom=i),i<this.top&&(this.top=i)}};function XG(r,e,t){r.x=r.prelim+e,r.y=r.depth,t.update(r),r.children.forEach(i=>XG(i,e+r.mod,t))}function ZG(r){const e=r.children;let t=0;e.forEach(i=>{ZG(i),i.children.length?t+=i.leafCount:t++}),r.leafCount=t,e.length?(r.subtreeLeft=e[0].subtreeLeft,r.subtreeRight=e[r.children.length-1].subtreeRight,r.x=(r.subtreeLeft+r.subtreeRight)/2):(r.subtreeLeft=r.x,r.subtreeRight=r.x)}function G3(r){const e=new V3;return YG(r,1),XG(r,-r.prelim,e),ZG(r),e}var V3=class{constructor(){this.dimensions=new qG,this.leafCount=0,this.nodes=[],this.leafNodes=[],this.nonLeafNodes=[],this.depth=0}update(r){this.dimensions.update(r,e=>({x:e.x,y:e.y})),r.children.length?this.nonLeafNodes.push(r):(this.leafCount++,this.leafNodes.push(r)),r.depth>this.depth&&(this.depth=r.depth),this.nodes.push(r)}resize(r,e,t=0,i=0,n=!1){const s=this.leafCount-1,o=this.depth,a=this.dimensions;let c=1,u=1;r>0&&s&&(c=r/s/((a.right-a.left)/s),n&&(c=-c)),e>0&&o&&(u=e/o/((a.bottom-a.top)/o));const p=new qG;this.nodes.forEach(y=>{y.screenX=y.x*c,y.screenY=y.y*u,p.update(y,b=>({x:b.screenX,y:b.screenY}))});const g=-p.left,m=-p.top;this.nodes.forEach(y=>{y.screenX+=g+t,y.screenY+=m+i})}},JG=class extends bs{constructor(){super(...arguments),this.grid=!1}};I([H(Ot)],JG.prototype,"grid",2);var Yg=class extends UD{constructor(r){super(r,new xu),this.tickScale=new xu,this.line=new HD,this.label=new JG,this.labelColor="rgba(87, 87, 87, 1)",this.includeInvisibleDomains=!0;const{tickLineGroup:e,tickLabelGroup:t,gridLineGroup:i,tickScale:n,scale:s}=this;s.paddingOuter=.1,s.paddingInner=2*s.paddingOuter,this.refreshScale(),n.paddingInner=1,n.paddingOuter=0,this.gridLineSelection=dn.select(i,Us),this.axisLineSelection=dn.select(e,Us),this.separatorSelection=dn.select(e,Us),this.labelSelection=dn.select(t,Ri)}updateRange(){const{range:r,visibleRange:e,scale:t}=this,i=(r[1]-r[0])/(e[1]-e[0]),s=r[0]-i*e[0];this.tickScale.range=t.range=[s,s+i],this.resizeTickTree()}resizeTickTree(){var r;const e=this.scale,t=e.domain.length?[e.convert(e.domain[0]),e.convert(e.domain[e.domain.length-1])]:e.range,i=this.tickTreeLayout,n=this.lineHeight;i&&i.resize(Math.abs(t[1]-t[0]),i.depth*n,(Math.min(t[0],t[1])||0)+(null!=(r=e.bandwidth)?r:0)/2,-i.depth*n,t[1]-t[0]<0)}get lineHeight(){return 1.5*this.label.fontSize}onGridVisibilityChange(){this.gridLineSelection.clear(),this.labelSelection.clear()}calculateDomain(){var r;const{direction:e}=this;let t=null;const i=this.boundSeries.filter(s=>s.visible).flatMap(s=>{if("y"===e||t)return s.getDomain(e);if(null===t){const o=s.getDomain(e);return t=Xl(o[0]),o}return[]});this.setDomain(null!=(r=Tu(i))?r:cF(i));const{domain:n}=this.dataDomain;this.tickTreeLayout=G3(function P3(r,e=!0){const t=new KG;let i=0;return e&&r.forEach(n=>i=Math.max(i,n.labels.length)),r.forEach(n=>{if(e)for(;n.labels.length<i;)n.labels.unshift("");!function I3(r,e){const t=e.labels.slice().reverse(),i=t.length-1;t.forEach((n,s)=>{const o=r.children,a=o.find(u=>u.label===n),c=s!==i;if(a&&c)r=a;else{const u=new KG(n,r);u.number=o.length,o.push(u),c&&(r=u)}})}(t,n)}),t}(n)),this.tickScale.domain=n.concat(""),this.resizeTickTree()}update(){!this.computedLayout||(this.updatePosition(),this.updateTitleCaption(),this.updateCategoryLabels(),this.updateSeparators(),this.updateAxisLines(),this.updateCategoryGridLines(),this.resetSelectionNodes())}updateTitleCaption(){const{_titleCaption:r}=this;r.node.visible=!1}updateCategoryLabels(){if(!this.computedLayout)return;const{tickLabelLayout:r}=this.computedLayout;this.labelSelection.update(r).each((t,i)=>{t.setProperties(i)})}updateSeparators(){if(!this.computedLayout)return;const{separatorLayout:r}=this.computedLayout,{range:e}=this;this.separatorSelection.update(r).each((n,s)=>{n.x1=s.x1,n.x2=s.x2,n.y1=s.y,n.y2=s.y,n.visible=s.y>=e[0]-1e-7&&s.y<=e[1]+1e-7,n.stroke=this.tick.color,n.fill=void 0,n.strokeWidth=1})}updateAxisLines(){if(!this.computedLayout)return;const{axisLineLayout:r}=this.computedLayout;this.axisLineSelection.update(r).each((t,i)=>{t.setProperties(nt(Re({},i),{stroke:this.line.color,strokeWidth:this.line.width})),t.x1=i.x,t.x2=i.x,t.y1=i.y1,t.y2=i.y2,t.strokeWidth=this.line.width,t.stroke=this.line.color})}updateCategoryGridLines(){const{gridLength:r,gridLine:e,label:t,range:i,tickScale:n}=this,s=n.ticks(),o=t.getSideFlag(),a=this.gridLineSelection.update(r?s:[]);if(r){const{width:c,style:u}=e,p=u.length;a.each((g,m,y)=>{const b=Math.round(n.convert(m));g.x1=0,g.x2=-o*r,g.y1=b,g.y2=b,g.visible=b>=i[0]&&b<=i[1];const{stroke:_,lineDash:E}=u[y%p];g.stroke=_,g.strokeWidth=c,g.lineDash=E,g.fill=void 0})}}computeLayout(){this.updateDirection(),this.calculateDomain(),this.updateRange();const{scale:r,label:e,label:{parallel:t},moduleCtx:{callbackCache:i},range:n,title:s,title:{formatter:o=(rt=>rt.defaultValue)}={}}=this,a=r.range[0],c=r.range[1],p=Math.abs(c-a)/r.domain.length||0,g=Math.ceil(e.fontSize/p),m=io(this.rotation),y=Math.abs(Math.cos(m))<1e-8,b=e.getSideFlag(),_=this.lineHeight,E=this.tickTreeLayout,D=r.ticks(),R=E?E.nodes:[],O=!!E&&E.depth>1,{defaultRotation:L,configuredRotation:k,parallelFlipFlag:U}=mM({rotation:e.rotation,parallel:t,regularFlipRotation:os(m-Math.PI/2),parallelFlipRotation:os(m)}),j=[],J=new Map;let me=0;const ye=new Ri,Ae=(rt,ui)=>{var Li;if(ye.setProperties({fill:e.color,fontFamily:e.fontFamily,fontSize:e.fontSize,fontStyle:e.fontStyle,fontWeight:e.fontWeight,textAlign:"center",textBaseline:-1===U?"bottom":"hanging",translationX:rt.screenY-.25*e.fontSize,translationY:rt.screenX}),0===ui){if(!(s?.enabled&&D.length>0))return!1;const zn=i.call(o,this.getTitleFormatterParams());ye.setProperties({fill:s.color,fontFamily:s.fontFamily,fontSize:s.fontSize,fontStyle:s.fontStyle,fontWeight:s.fontWeight,text:zn,textBaseline:"hanging",translationX:rt.screenY-.25*e.fontSize,translationY:rt.screenX})}else{if(ui%g!=0)return!1;if(!(rt.screenX>=n[0]&&rt.screenX<=n[1]))return!1;ye.text=e.formatter&&null!=(Li=i.call(e.formatter,{value:String(rt.label),index:ui}))?Li:String(rt.label)}return!0};R.forEach((rt,ui)=>{if(!Ae(rt,ui))return;const en=ye.computeTransformedBBox();en&&(J.set(ui,en),!rt.children.length&&en.width>me&&(me=en.width))});const Pe=b*e.padding,Le=this.label.grid,Xe=[];R.forEach((rt,ui)=>{let Li=Ae(rt,ui);const en=ui;ye.x=Pe,ye.rotationCenterX=Pe;const zn=!rt.children.length;if(zn)ye.rotation=k,ye.textAlign="end",ye.textBaseline="middle";else{ye.translationX-=me-_+this.label.padding;const Ds=rt.leafCount*p,Ir=J.get(en);Ir&&Ir.width>Ds?(Li=!1,J.delete(en)):ye.rotation=y?L:-Math.PI/2}if(rt.parent&&O){const Ds=zn?rt.screenX-p/2:rt.screenX-rt.leafCount*p/2;if(zn)(rt.number!==rt.children.length-1||Le)&&Xe.push({y:Ds,x1:0,x2:-me-2*this.label.padding});else{const Ir=-me-2*this.label.padding+rt.screenY;Xe.push({y:Ds,x1:Ir+_,x2:Ir})}}let lo;if(Li){const Ds=ye.computeTransformedBBox();Ds&&J.set(ui,Ds),lo=nt(Re({},(rt=>({fill:rt.fill,fontFamily:rt.fontFamily,fontSize:rt.fontSize,fontStyle:rt.fontStyle,fontWeight:rt.fontWeight,rotation:rt.rotation,rotationCenterX:rt.rotationCenterX,rotationCenterY:rt.rotationCenterY,text:rt.text,textAlign:rt.textAlign,textBaseline:rt.textBaseline,translationX:rt.translationX,translationY:rt.translationY,visible:rt.visible,x:rt.x,y:rt.y}))(ye)),{visible:Li})}else J.delete(ui),lo={visible:Li};j.push(lo)});let Je=0;Xe.forEach(rt=>Je=Math.min(Je,rt.x2)),Xe.push({y:Math.max(a,c),x1:0,x2:Je});const ht=[],Dt=[];Xe.forEach(rt=>{if(rt.y>=n[0]-1e-7&&rt.y<=n[1]+1e-7){const{x1:ui,x2:Li,y:en}=rt,zn=new Bt(Math.min(ui,Li),en,Math.abs(ui-Li),0);Dt.push(zn),ht.push({x1:ui,x2:Li,y:en})}});const Mt=[],Nt=[],Ht=E?E.depth+1:1;for(let rt=0;rt<Ht;rt++){const ui=D.length>0&&(0===rt||Le&&O),Li=rt>0?-me-2*this.label.padding-(rt-1)*_:0,en=new Bt(Li,Math.min(...n),0,Math.abs(n[1]-n[0]));Nt.push(en),Mt.push({x:Li,y1:n[0],y2:n[1],visible:ui})}return{bbox:(rt=>{const ui=new td,{rotation:Li,translationX:en,translationY:zn,rotationCenterX:lo,rotationCenterY:Ds}=this.getAxisTransform();return td.updateTransformMatrix(ui,1,1,Li,en,zn,{scalingCenterX:0,scalingCenterY:0,rotationCenterX:lo,rotationCenterY:Ds}),ui.transformBBox(rt)})(Bt.merge([...J.values(),...Dt,...Nt])),tickLabelLayout:j,separatorLayout:ht,axisLineLayout:Mt}}calculateLayout(){const{axisLineLayout:r,separatorLayout:e,tickLabelLayout:t,bbox:i}=this.computeLayout();return this.computedLayout={axisLineLayout:r,separatorLayout:e,tickLabelLayout:t},{bbox:i,primaryTickCount:void 0}}};Yg.className="GroupedCategoryAxis",Yg.type="grouped-category",I([H(Si,{optional:!0})],Yg.prototype,"labelColor",2);var QG=class{constructor({width:r=600,height:e=300,overrideDevicePixelRatio:t}){this.enabled=!0,this._pixelRatio=NaN,this._width=0,this._height=0,this.canvas=new OffscreenCanvas(r,e),this.realContext=this.canvas.getContext("2d"),this.imageSource=this.canvas.transferToImageBitmap(),this.context=this.setPixelRatio(t),this.resize(r,e)}static isSupported(){return typeof OffscreenCanvas<"u"&&null!=OffscreenCanvas.prototype.transferToImageBitmap}snapshot(){this.imageSource.close(),this.imageSource=this.canvas.transferToImageBitmap()}destroy(){this.imageSource.close(),this.canvas.width=0,this.canvas.height=0,this.context.clearRect(0,0,0,0)}clear(){this.context.save(),this.context.resetTransform(),this.context.clearRect(0,0,this.width,this.height),this.context.restore()}get pixelRatio(){return this._pixelRatio}setPixelRatio(r){let e=r??window.devicePixelRatio;return sG()&&(e=1),this._pixelRatio=e,Wn.overrideScale(this.realContext,e)}get width(){return this._width}get height(){return this._height}resize(r,e){if(!(r>0&&e>0))return;const{canvas:t,context:i,pixelRatio:n}=this;t.width=Math.round(r*n),t.height=Math.round(e*n),i.resetTransform(),this._width=r,this._height=e}},qF="adv-composite",XF="dom-composite",ZF=class{constructor(r){var e;this.id=Ru(this),this.layers=[],this._nextZIndex=0,this._nextLayerId=0,this._dirty=!1,this._root=null,this.debug=Un.create(!0,"scene");const{document:t,window:i,mode:n=(null!=(e=hF("agChartsSceneRenderModel"))?e:qF),width:s,height:o,overrideDevicePixelRatio:a}=r;this.overrideDevicePixelRatio=a,this.opts={document:t,window:i,mode:n},this.canvas=new Wn({document:t,window:i,width:s,height:o,overrideDevicePixelRatio:a})}set container(r){this.canvas.container=r}get container(){return this.canvas.container}download(r,e){this.canvas.download(r,e)}getDataURL(r){return this.canvas.getDataURL(r)}get width(){return this.pendingSize?this.pendingSize[0]:this.canvas.width}get height(){return this.pendingSize?this.pendingSize[1]:this.canvas.height}resize(r,e){r=Math.round(r),e=Math.round(e);const t=r<=0||e<=0,i=isNaN(r)||isNaN(e);return!(r===this.width&&e===this.height||i||t||(this.pendingSize=[r,e],this.markDirty(),0))}addLayer(r){var e;const{mode:t}=this.opts;if(!["composite",XF,qF].includes(t))return;const{zIndex:n=this._nextZIndex++,name:s,zIndexSubOrder:o,getComputedOpacity:a,getVisibility:c}=r,{width:u,height:p,overrideDevicePixelRatio:g}=this,m=t===XF,b=t===qF&&QG.isSupported()?new QG({width:u,height:p,overrideDevicePixelRatio:g}):new Wn({document:this.opts.document,window:this.opts.window,width:u,height:p,domLayer:m,zIndex:n,name:s,overrideDevicePixelRatio:g}),_={id:this._nextLayerId++,name:s,zIndex:n,zIndexSubOrder:o,canvas:b,getComputedOpacity:a,getVisibility:c};if(n>=this._nextZIndex&&(this._nextZIndex=n+1),this.layers.push(_),this.sortLayers(),m){const E=this.layers.map(O=>O.canvas).filter(O=>O instanceof Wn),D=E.findIndex(O=>O===b);(null!=(e=E[D-1])?e:this.canvas).element.insertAdjacentElement("afterend",b.element)}return this.debug("Scene.addLayer() - layers",this.layers),_.canvas}removeLayer(r){const e=this.layers.findIndex(t=>t.canvas===r);e>=0&&(this.layers.splice(e,1),r.destroy(),this.markDirty(),this.debug("Scene.removeLayer() -  layers",this.layers))}moveLayer(r,e,t){const i=this.layers.find(n=>n.canvas===r);i&&(i.zIndex=e,i.zIndexSubOrder=t,this.sortLayers(),this.markDirty(),this.debug("Scene.moveLayer() -  layers",this.layers))}sortLayers(){this.layers.sort((r,e)=>{var t,i;return fG([r.zIndex,...null!=(t=r.zIndexSubOrder)?t:[void 0,void 0],r.id],[e.zIndex,...null!=(i=e.zIndexSubOrder)?i:[void 0,void 0],e.id],pG)})}markDirty(){this._dirty=!0}get dirty(){return this._dirty}set root(r){var e;r!==this._root&&(null==(e=this._root)||e._setLayerManager(),this._root=r,r&&r._setLayerManager({addLayer:t=>this.addLayer(t),moveLayer:(...t)=>this.moveLayer(...t),removeLayer:(...t)=>this.removeLayer(...t),markDirty:()=>this.markDirty(),canvas:this.canvas,debug:Un.create("scene")}),this.markDirty())}get root(){return this._root}strip(){const{layers:r}=this;for(const e of r)e.canvas.destroy(),delete e.canvas;r.splice(0,r.length),this.root=null,this._dirty=!1,this.canvas.context.resetTransform()}destroy(){this.container=void 0,this.strip(),this.canvas.destroy(),Object.assign(this,{canvas:void 0,ctx:void 0})}render(r){return Be(this,null,function*(){var e,t;const{debugSplitTimes:i={start:performance.now()},extraDebugStats:n={}}=r??{},{canvas:s,canvas:{context:o},root:a,layers:c,pendingSize:u,opts:{mode:p}}=this;if(u&&(this.canvas.resize(...u),this.layers.forEach(y=>y.canvas.resize(...u)),this.pendingSize=void 0),a&&!a.visible)return void(this._dirty=!1);if(a&&!this.dirty)return this.debug("Scene.render() - no-op",{redrawType:Ug[a.dirty],tree:this.buildTree(a)}),void this.debugStats(i,o,void 0,n);const g={ctx:o,devicePixelRatio:null!=(e=this.canvas.pixelRatio)?e:1,forceRender:!0,resized:!!u,debugNodes:{}};Un.check("scene:stats:verbose")&&(g.stats={layersRendered:0,layersSkipped:0,nodesRendered:0,nodesSkipped:0});let m=!1;if((!a||a.dirty>=1)&&(m=!0,s.clear()),a&&Un.check("scene:dirtyTree")){const{dirtyTree:y,paths:b}=this.buildDirtyTree(a);Un.create("scene:dirtyTree")("Scene.render() - dirtyTree",{dirtyTree:y,paths:b})}a&&m&&(this.debug("Scene.render() - before",{redrawType:Ug[a.dirty],canvasCleared:m,tree:this.buildTree(a)}),a.visible&&(o.save(),a.render(g),o.restore())),i["\u270d\ufe0f"]=performance.now(),p!==XF&&c.length>0&&m&&(this.sortLayers(),o.save(),o.setTransform(1/s.pixelRatio,0,0,1/s.pixelRatio,0,0),c.forEach(({canvas:{imageSource:y,enabled:b},getComputedOpacity:_,getVisibility:E})=>{!b||!E()||(o.globalAlpha=_(),o.drawImage(y,0,0))}),o.restore(),i["\u26d9"]=performance.now()),null==(t=o.verifyDepthZero)||t.call(o),this._dirty=!1,this.debugStats(i,o,g.stats,n),this.debugSceneNodeHighlight(o,g.debugNodes),a&&this.debug("Scene.render() - after",{redrawType:Ug[a.dirty],canvasCleared:m,tree:this.buildTree(a)})})}debugStats(r,e,t,i={}){if(Un.check("scene:stats","scene:stats:verbose")){const n=performance.now(),s=r.start;r.end=performance.now();const o=(k,U)=>{const j=k+U;return`${k} / ${j} (${Math.round(100*k/j)}%)`},a=(k,U,j)=>`${k}: ${Math.round(100*(j-U))/100}ms`,{layersRendered:c=0,layersSkipped:u=0,nodesRendered:p=0,nodesSkipped:g=0}=t??{};let m=0;const y=Object.entries(r).filter(([k])=>"end"!==k).map(([k,U],j)=>{const q=j>0?a(k,m,U):null;return m=U,q}).filter(k=>null!=k).join(" + "),b=Object.entries(i).map(([k,U])=>`${k}: ${U}`).join(" ; "),_=Un.check("scene:stats:verbose"),D=[`${a("\u23f1\ufe0f",s,n)} (${y})`,`${b}`,`Layers: ${_?o(c,u):this.layers.length}`,_?`Nodes: ${o(p,g)}`:null].filter(k=>null!=k).map(k=>[k,Wn.getTextSize(k,e.font)]),R=Math.max(...D.map(([,{width:k}])=>k)),O=D.reduce((k,[,{height:U}])=>k+U,0);e.save(),e.fillStyle="white",e.fillRect(0,0,R,O),e.fillStyle="black";let L=0;for(const[k,U]of D)L+=U.height,e.fillText(k,2,L);e.restore()}}debugSceneNodeHighlight(r,e){var t;const i=o=>a=>!!o.test(a.id)||a instanceof vt&&null!=a.name&&o.test(a.name),n=o=>a=>o===a.id||a instanceof vt&&null!=a.name&&o===a.name,s=nM(hF("agChartsSceneDebug")).flatMap(o=>"layout"===o?["seriesRoot","legend","root",/.*Axis-\d+-axis.*/]:o);for(const o of s){if("string"==typeof o&&null!=e[o])continue;const a="string"==typeof o?n(o):i(o),c=null==(t=this.root)?void 0:t.findNodes(a);if(c&&0!==c.length)for(const u of c)u instanceof vt&&u.name?e[u.name]=u:e[u.id]=u;else tt.log(`Scene.render() - no debugging node with id [${o}] in scene graph.`)}r.save();for(const[o,a]of Object.entries(e)){const c=a.computeTransformedBBox();c?(r.globalAlpha=.8,r.strokeStyle="red",r.lineWidth=1,r.strokeRect(c.x,c.y,c.width,c.height),r.fillStyle="red",r.strokeStyle="white",r.font="16px sans-serif",r.textBaseline="top",r.textAlign="left",r.lineWidth=2,r.strokeText(o,c.x,c.y,c.width),r.fillText(o,c.x,c.y,c.width)):tt.log(`Scene.render() - no bbox for debugged node [${o}].`)}r.restore()}buildTree(r){var e,t;const i=null!=(e=r instanceof vt?r.name:null)?e:r.id;return this.debug.check()?Re(Re({name:i,node:r,dirty:Ug[r.dirty]},null!=(t=r.parent)&&t.isVirtual?{virtualParentDirty:Ug[r.parent.dirty],virtualParent:r.parent}:{}),r.children.map(n=>this.buildTree(n)).reduce((n,s)=>{let{name:o}=s;const{node:{visible:a,opacity:c,zIndex:u,zIndexSubOrder:p},node:g,virtualParent:m}=s;(!a||c<=0)&&(o=`(${o})`),g instanceof vt&&g.isLayer()&&(o=`*${o}*`);const y=[`${o??"<unknown>"}`,`z: ${u}`,p&&`zo: ${p.map(E=>"function"==typeof E?`${E()} (fn)`:E).join(" / ")}`,m&&"(virtual parent)"].filter(E=>!!E).join(" ");let b=y,_=1;for(;null!=n[b]&&_<100;)b=`${y} (${_++})`;return n[b]=s,n},{})):{}}buildDirtyTree(r){var e;if(0===r.dirty)return{dirtyTree:{},paths:[]};const t=r.children.map(s=>this.buildDirtyTree(s)).filter(s=>s.paths.length>0),i=null!=(e=r instanceof vt?r.name:null)?e:r.id,n=0===t.length?[i]:t.map(s=>s.paths).reduce((s,o)=>s.concat(o),[]).map(s=>`${i}.${s}`);return{dirtyTree:Re({name:i,node:r,dirty:Ug[r.dirty]},t.map(s=>s.dirtyTree).filter(s=>void 0!==s.dirty).reduce((s,o)=>{var a;return s[null!=(a=o.name)?a:"<unknown>"]=o,s},{})),paths:n}}};function B3(r){return new Promise(e=>{setTimeout(()=>e(void 0),r)})}ZF.className="Scene";var eV=class{constructor(){this.eventListeners=new Map}addEventListener(r,e){if("function"!=typeof e)throw new Error("AG Charts - listener must be a Function");const t=this.eventListeners.get(r);t?t.add(e):this.eventListeners.set(r,new Set([e]))}removeEventListener(r,e){var t;null==(t=this.eventListeners.get(r))||t.delete(e),0===this.eventListeners.size&&this.eventListeners.delete(r)}hasEventListener(r){return this.eventListeners.has(r)}clearEventListeners(){this.eventListeners.clear()}fireEvent(r){var e;null==(e=this.eventListeners.get(r.type))||e.forEach(t=>t(r))}},qg=class extends Di{constructor(r=0,e=r,t=r,i=e){super(),this.top=r,this.right=e,this.bottom=t,this.left=i}clear(){this.top=this.right=this.bottom=this.left=0}};function tV(r,e){let n,s,t=0,i=!1;const o=()=>i,a=()=>{i=!1,s?.(),s=void 0,n=void 0,t>0&&r(c)},c=()=>{const u=t;t=0,i=!0;const p=e({count:u});p?p.then(a,a):a()};return{schedule(u){0===t&&!o()&&r(c,u),t++},await(){return Be(this,null,function*(){if(o())for(null==n&&(n=new Promise(u=>{s=u}));o();)yield n})}}}I([H(qe)],qg.prototype,"top",2),I([H(qe)],qg.prototype,"right",2),I([H(qe)],qg.prototype,"bottom",2),I([H(qe)],qg.prototype,"left",2);var ic=class{static init(e){if(typeof ResizeObserver>"u")for(const[t,i]of this.elements)this.checkClientSize(t,i);else this.resizeObserver=new ResizeObserver(t=>{for(const i of t){const{width:n,height:s}=i.contentRect;this.checkSize(this.elements.get(i.target),i.target,n,s)}}),this.ownerDocument=e,this.ready=!0,this.documentReady="loading"!==e.readyState,this.documentReady||e.addEventListener("DOMContentLoaded",this.onContentLoaded)}static destroy(){var e,t;null==(e=this.ownerDocument)||e.removeEventListener("DOMContentLoaded",this.onContentLoaded),null==(t=this.resizeObserver)||t.disconnect(),delete this.resizeObserver,delete this.ownerDocument,this.ready=!1}static checkSize(e,t,i,n){var s,o;!e||(i!==(null==(s=e.size)?void 0:s.width)||n!==(null==(o=e.size)?void 0:o.height))&&(e.size={width:i,height:n},e.cb(e.size,t))}static observe(e,t){var i;this.ready||this.init(e.ownerDocument),this.documentReady?(this.elements.has(e)?this.removeFromQueue(e):null==(i=this.resizeObserver)||i.observe(e),this.elements.set(e,{cb:t})):this.queuedObserveRequests.push([e,t])}static unobserve(e){var t;null==(t=this.resizeObserver)||t.unobserve(e),this.elements.delete(e),this.removeFromQueue(e),this.elements.size||this.destroy()}static removeFromQueue(e){this.queuedObserveRequests=this.queuedObserveRequests.filter(([t])=>t!==e)}static checkClientSize(e,t){var i,n;const s=null!=(i=e.clientWidth)?i:0,o=null!=(n=e.clientHeight)?n:0;this.checkSize(t,e,s,o)}};ic.elements=new Map,ic.ready=!1,ic.documentReady=!1,ic.queuedObserveRequests=[],ic.onContentLoaded=()=>{var r;const e="loading"!==(null==(r=ic.ownerDocument)?void 0:r.readyState),t=ic.documentReady;ic.documentReady=e,e&&e!==t&&(ic.queuedObserveRequests.forEach(([i,n])=>ic.observe(i,n)),ic.queuedObserveRequests=[])};var iV=ic,nV=class{constructor(){this.range="tooltip"}};I([H(as(["tooltip","node"],"a range"))],nV.prototype,"range",2);var WD=(r=>(r[r.FULL=0]="FULL",r[r.UPDATE_DATA=1]="UPDATE_DATA",r[r.PROCESS_DATA=2]="PROCESS_DATA",r[r.PERFORM_LAYOUT=3]="PERFORM_LAYOUT",r[r.SERIES_UPDATE=4]="SERIES_UPDATE",r[r.TOOLTIP_RECALCULATION=5]="TOOLTIP_RECALCULATION",r[r.SCENE_RENDER=6]="SCENE_RENDER",r[r.NONE=7]="NONE",r))(WD||{}),JF=class{constructor(r){this.type=r,this.continuousDomain=[1/0,-1/0],this.discreteDomain=new Set}extend(r){"discrete"===this.type?this.discreteDomain.add(r):"continuous"===this.type&&(this.continuousDomain[0]>r&&(this.continuousDomain[0]=r),this.continuousDomain[1]<r&&(this.continuousDomain[1]=r))}getDomain(){if("discrete"===this.type)return this.discreteDomain;if("continuous"===this.type)return this.continuousDomain;throw new Error("AG Charts - Unsupported data domain type: "+this.type)}};function jD(r,e=[1/0,-1/0]){for(const t of r)"number"==typeof t&&(t<e[0]&&(e[0]=t),t>e[1]&&(e[1]=t));return e}function z3(r){return r.map(e=>ql(e)?JSON.stringify(e):e).join("-")}function $3(r){return Number.isInteger(r)?r:Math.abs(r)>1e4?Math.trunc(r):Math.round(1e4*r)/1e4}function Ro(r,e){var t;const i=function K3(r){if(void 0===r)return[];let[e,t]=r;return e=Number(e),t=Number(t),0===e&&0===t?[0,1]:e===1/0&&t===-1/0?[]:(e===1/0&&(e=0),t===-1/0&&(t=0),Ei(e)&&Ei(t)?[e,t]:[])}(r);if(0===i.length)return i;let[n,s]=i;if(n===s){const[o,a]=null!=(t=e?.calculatePadding(n,s,e.isReversed()))?t:[1,1];n-=o,s+=a}return[n,s]}function sV(){return new Map([[void 0,0]])}function QF(r,e){var t;return void 0===e?0:null!=(t=e.get(r.id))?t:0}var qC=Symbol("invalid"),rV=class{constructor(r){this.debug=Un.create(!0,"data-model");const{props:e,mode:t="standalone"}=r;this.mode=t;let i=!0;for(const o of e){if("key"===o.type&&!i)throw new Error("AG Charts - internal config error: keys must come before values.");"value"===o.type&&i&&(i=!1)}this.opts=Re({dataVisible:!0},r),this.keys=e.filter(o=>"key"===o.type).map((o,a)=>nt(Re({},o),{index:a,missing:sV()})),this.values=e.filter(o=>"value"===o.type).map((o,a)=>nt(Re({},o),{index:a,missing:sV()})),this.aggregates=e.filter(o=>"aggregate"===o.type).map((o,a)=>nt(Re({},o),{index:a})),this.groupProcessors=e.filter(o=>"group-value-processor"===o.type).map((o,a)=>nt(Re({},o),{index:a})),this.propertyProcessors=e.filter(o=>"property-value-processor"===o.type).map((o,a)=>nt(Re({},o),{index:a})),this.reducers=e.filter(o=>"reducer"===o.type).map((o,a)=>nt(Re({},o),{index:a})),this.processors=e.filter(o=>"processor"===o.type).map((o,a)=>nt(Re({},o),{index:a}));for(const o of this.values)if(null==o.property)throw new Error(`AG Charts - internal config error: no properties specified for value definitions: ${JSON.stringify(o)}`);const n=({matchGroupIds:o})=>{for(const a of o??[])if(!this.values.some(c=>c.groupId===a))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${a}).`)},s=({matchIds:o})=>{for(const a of o??[])if(!this.values.some(c=>{var u;return null==(u=c.ids)?void 0:u.some(([p,g])=>p===a[0]&&g===a[1])}))throw new Error(`AG Charts - internal config error: matchGroupIds properties must match defined groups (${a}).`)};for(const o of[...this.groupProcessors,...this.aggregates])s(o),n(o)}resolveProcessedDataIndexById(r,e){var t;const{index:i,def:n}=null!=(t=this.resolveProcessedDataDefById(r,e))?t:{};return{index:i,def:n}}resolveProcessedDataIndicesById(r,e){return this.resolveProcessedDataDefsById(r,e).map(({index:t,def:i})=>({index:t,def:i}))}resolveProcessedDataDefById(r,e){return this.resolveProcessedDataDefsById(r,e)[0]}resolveProcessedDataDefsByIds(r,e){const t=[];for(const i of e)t.push([i,this.resolveProcessedDataDefsById(r,i)]);return t}resolveProcessedDataDefsValues(r,{keys:e,values:t}){const i={};for(const[n,[{index:s,def:o}]]of r)i[n]=("key"===o.type?e:t)[s];return i}resolveProcessedDataDefsById(r,e){const{keys:t,values:i,aggregates:n,groupProcessors:s,reducers:o}=this,a=p=>{const{ids:g,scopes:m}=p;return!(null==g||null!=r&&!m?.some(y=>y===r.id))&&g.some(([y,b])=>y===r.id&&("string"==typeof e?b===e:e.test(b)))},c=[t,i,n,s,o],u=[];for(const p of c)u.push(...p.filter(a).map(g=>({index:g.index,def:g})));if(u.length>0)return u;throw new Error(`AG Charts - didn't find property definition for [${e}, ${r.id}]`)}getDomain(r,e,t="value",i){var n,s,o,a;let c,u;try{c=this.resolveProcessedDataIndicesById(r,e)}catch(m){if("string"!=typeof e&&/didn't find property definition/.test(m.message))return[];throw m}switch(t){case"key":u="keys";break;case"value":u="values";break;case"aggregate":u="aggValues";break;case"group-value-processor":u="groups";break;default:return[]}const p=null!=(s=null==(n=i.domain[u])?void 0:n[c[0].index])?s:[];if(1===c.length)return p;const g=[...p];for(const m of c.slice(1))jD(null!=(a=null==(o=i.domain[u])?void 0:o[m.index])?a:[],g);return g}processData(r,e){const{opts:{groupByKeys:t,groupByFn:i},aggregates:n,groupProcessors:s,reducers:o,processors:a,propertyProcessors:c}=this,u=performance.now();if(t&&0===this.keys.length)return;let p=this.extractData(r,e);t?p=this.groupData(p):i&&(p=this.groupData(p,i(p))),s.length>0&&this.postProcessGroups(p),n.length>0&&this.aggregateData(p),c.length>0&&this.postProcessProperties(p),o.length>0&&this.reduceData(p),a.length>0&&this.postProcessData(p);for(const m of[...this.keys,...this.values])if(r.length>0)for(const[y,b]of m.missing)b>=r.length&&tt.warnOnce(`the key '${m.property}' was not found in any data element${void 0===y?"":` for ${y}`}.`);const g=performance.now();return p.time=g-u,this.debug.check()&&function Y3(r){var e,t;const i=(n,s)=>{s.length>0&&(tt.log(`DataModel.processData() - ${n}`),tt.table(s))};if(tt.log("DataModel.processData() - processedData",r),i("Key Domains",r.domain.keys),i("Group Domains",null!=(e=r.domain.groups)?e:[]),i("Value Domains",r.domain.values),i("Aggregate Domains",null!=(t=r.domain.aggValues)?t:[]),"grouped"===r.type){const n=r.data.reduce((s,o)=>{var a,c;const u=null!=(a=o.keys)?a:[],p=null!=(c=o.aggValues)?c:[],g=o.keys.map(()=>{}),m=p?.map(()=>{});return s.push(...o.values.map((y,b)=>[...0===b?u:g,...y??[],...0==b?p:m])),s},[]);i("Values",n)}else{const n=r.data.reduce((s,o)=>{var a;const c=null!=(a=o.aggValues)?a:[];return s.push([...o.keys,...o.values,...c]),s},[]);i("Values",n)}}(p),p}valueGroupIdxLookup({matchGroupIds:r,matchIds:e}){return this.values.map((t,i)=>({def:t,index:i})).filter(({def:t})=>!(r&&(null==t.groupId||!r.includes(t.groupId)))&&(!e||null!=t.ids&&e.some(([i,n])=>{var s;return null==(s=t.ids)?void 0:s.some(([o,a])=>o===i&&a===n)}))).map(({index:t})=>t)}valueIdxLookup(r,e){const t=null==r||0===r.length,i=a=>null==a||(t===(null==a||0===a.length)||a?.some(p=>r.includes(p))),n="string"==typeof e?e:e.id,o=this.values.findIndex(a=>{var c;return i(a.scopes)&&((null==(c=a.ids)?void 0:c.some(u=>(([a,c])=>i([a])&&c===n)(u)))||a.property===n||a.id===n)});if(o>=0)return o;throw new Error(`AG Charts - configuration error, unknown property ${JSON.stringify(e)} in scope(s) ${JSON.stringify(r)}`)}extractData(r,e){var t,i,n,a;const{keys:c,values:u,opts:{dataVisible:p}}=this,{dataDomain:g,processValue:m,scopes:y,allScopesHaveSameDefs:b}=this.initDataDomainProcessor(),_=new Array(p?r.length:0);let E=0,D=0;for(const[O,L]of r.entries()){const k={},U=y.size>0?new Set(y):void 0,j=p?new Array(c.length):void 0;let J,q=0;for(const Pe of c){if(J=m(Pe,L,J),J===qC)break;j&&(j[q++]=J)}if(J===qC)continue;const me=p&&u.length>0?new Array(u.length):void 0;let ye;const Ae={};for(const Pe of e??[])Ae[Pe.id]=Pe;for(const[Pe,Le]of u.entries()){for(const Xe of null!=(t=Le.scopes)?t:y){const Je=Ae[Xe];ye=m(Le,null!=(i=Je?.data[O])?i:L,ye,Xe),ye!==qC&&me&&(void 0!==Je&&(null!=k[n=Je.id]||(k[n]={}),k[Je.id][Le.property]=ye),Le.useScopedValues?(null!=me[Pe]||(me[Pe]={}),me[Pe][Xe]=ye):me[Pe]=ye)}if(ye===qC){if(b)break;for(const Xe of null!=(a=Le.scopes)?a:y)U?.delete(Xe);if(0===U?.size)break}}if((ye!==qC||!b)&&0!==U?.size&&p){const Pe={datum:Re(Re({},L),k),keys:j,values:me};!b&&U&&U.size<y.size&&(D++,Pe.validScopes=[...U]),_[E++]=Pe}}_.length=E;const R=O=>{const L=g.get(O).getDomain();return Array.isArray(L)&&L[0]>L[1]?[]:[...L]};return{type:"ungrouped",input:{count:r.length},data:_,domain:{keys:c.map(O=>R(O)),values:u.map(O=>R(O))},defs:{allScopesHaveSameDefs:b,keys:c,values:u},partialValidDataCount:D,time:0}}groupData(r,e){var t,i,n,s;const o=new Map;for(const p of r.data){const{keys:g,values:m,datum:y,validScopes:b}=p,_=e?e(p):g,E=z3(_);if(o.has(E)){const D=o.get(E);if(D.values.push(m),D.datum.push(y),null!=b)for(let R=0;R<(null!=(i=null==(t=D.validScopes)?void 0:t.length)?i:0);R++){const O=null==(n=D.validScopes)?void 0:n[R];b.some(L=>L===O)||null==(s=D.validScopes)||s.splice(R,1)}}else o.set(E,{keys:_,values:[m],datum:[y],validScopes:b})}const a=new Array(o.size),c=new Array(o.size);let u=0;for(const[,{keys:p,values:g,datum:m,validScopes:y}]of o.entries())0!==y?.length&&(c[u]=p,a[u++]={keys:p,values:g,datum:m,validScopes:y});return nt(Re({},r),{type:"grouped",data:a,domain:nt(Re({},r.domain),{groups:c})})}aggregateData(r){var t,i,n,s,o,a,c;const{aggregates:u}=this;if(!u)return;const p=u.map(()=>[1/0,-1/0]),g=u.map(_=>this.valueGroupIdxLookup(_)),m=u.map(_=>_.aggregateFunction),y=u.map(_=>_.groupAggregateFunction),b=u.map(_=>_.finalFunction);for(const _ of r.data){let{values:E}=_;const{validScopes:D}=_;null!=_.aggValues||(_.aggValues=new Array(g.length)),"ungrouped"===r.type&&(E=[E]);let R=0;for(const O of g){if(null!=(t=D?.some(j=>{var q;return null==(q=u[R].matchScopes)?void 0:q.some(J=>j===J)}))&&!t){R++;continue}let k=null!=(n=null==(i=y[R])?void 0:i.call(y))?n:jD([]);for(const j of E){const q=O.map(me=>j[me]),J=m[R](q,_.keys);J&&(k=null!=(o=null==(s=y[R])?void 0:s.call(y,J,k))?o:jD(J,k))}const U=(null!=(c=null==(a=b[R])?void 0:a.call(b,k))?c:k).map(j=>$3(j));jD(U,p[R]),_.aggValues[R++]=U}}r.domain.aggValues=p}postProcessGroups(r){var e,t,i,n,s;const{groupProcessors:o}=this;if(!o)return;const a=new Set,c=new Map,u=new Map,p=new Map;for(const m of o){const y=this.valueGroupIdxLookup(m);u.set(m,y),p.set(m,m.adjust());for(const b of y){const _=this.values[b];a.add(b),c.set(b,new JF("category"===_.valueType?"discrete":"continuous"))}}const g=m=>{var y;for(const b of a)null==(y=c.get(b))||y.extend(m[b])};for(const m of r.data){for(const y of o){if(null!=(t=null==(e=m.validScopes)?void 0:e.some(D=>{var R;return null==(R=y.matchScopes)?void 0:R.some(O=>D===O)}))&&!t)continue;const _=null!=(i=u.get(y))?i:[],E=null!=(s=null==(n=p.get(y))?void 0:n())?s:()=>{};if("grouped"!==r.type)m.values&&E(m.values,_);else for(const D of m.values)D&&E(D,_)}if("grouped"===r.type)for(const y of m.values)g(y);else g(m.values)}for(const[m,y]of c)r.domain.values[m]=[...y.getDomain()]}postProcessProperties(r){const{propertyProcessors:e}=this;if(e)for(const{adjust:t,property:i,scopes:n}of e)t()(r,this.valueIdxLookup(n??[],i))}reduceData(r){var e,t;const{reducers:n}=this,s=n.map(c=>c.scopes),o=n.map(c=>c.reducer()),a=n.map(c=>c.initialValue);for(const c of r.data){let u=0;for(const p of o)null==(t=null==(e=c.validScopes)?void 0:e.some(m=>{var y;return null==(y=s[u])?void 0:y.some(b=>m===b)}))||t?(a[u]=p(a[u],c),u++):u++}for(let c=0;c<a.length;c++)null!=r.reduced||(r.reduced={}),r.reduced[n[c].property]=a[c]}postProcessData(r){const{processors:t}=this;for(const i of t)null!=r.reduced||(r.reduced={}),r.reduced[i.property]=i.calculate(r)}initDataDomainProcessor(){var r;const{keys:e,values:t}=this,i=new Set;for(const m of t)for(const y of null!=(r=m.scopes)?r:[])i.add(y);const n=i.size,s=new Map,o=new Map;let a=!0;const c=(m,y,b=s)=>{var _;"category"===y?b.set(m,new JF("discrete")):(b.set(m,new JF("continuous")),a&&(a=(null!=(_=m.scopes)?_:[]).length===n))},u=()=>{e.forEach(m=>c(m,m.valueType)),t.forEach(m=>c(m,m.valueType))};u();const p=this.buildAccessors(...e,...t);return{dataDomain:s,processValue:(m,y,b,_)=>{var E,D,R,O,L;let j,U=!1;if(m.property in p){try{j=p[m.property](y)}catch{}U=void 0!==j}else U=m.property in y,j=U?y[m.property]:m.missingValue;if(null!=m.forceValue&&(j=U&&TD(j)?-1*m.forceValue:m.forceValue,U=!0),!U&&!("missingValue"in m)){const J=null!=(E=m.missing.get(_))?E:0;m.missing.set(_,J+1)}if(s.has(m)||u(),U&&null!=(R=null==(D=m.validation)?void 0:D.call(m,j,y))&&!R){if(!("invalidValue"in m))return"integrated"!==this.mode&&tt.warnOnce(`invalid value of type [${typeof j}] ignored:`,`[${j}]`),qC;j=m.invalidValue}return m.processor&&(o.has(m)||o.set(m,m.processor()),j=null==(O=o.get(m))?void 0:O(j,b!==qC?b:void 0)),null==(L=s.get(m))||L.extend(j),j},initDataDomain:u,scopes:i,allScopesHaveSameDefs:a}}buildAccessors(...r){const e={};if("integrated"===this.mode)return e;for(const t of r){if(!(t.property.indexOf(".")>=0||t.property.indexOf("[")>=0))continue;let n;n=t.property.startsWith("[")?`return datum${t.property};`:`return datum.${t.property};`,e[t.property]=new Function("datum",n)}return e}},oV=class{constructor(r){this.mode=r,this.debug=Un.create(!0,"data-model"),this.requested=[],this.status="setup"}request(r,e,t){return Be(this,null,function*(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");return new Promise((i,n)=>{this.requested.push({id:r,opts:t,data:e,resultCb:i,reject:n})})})}execute(){if("setup"!==this.status)throw new Error("AG Charts - data request after data setup phase.");this.status="executed",this.debug("DataController.execute() - requested",this.requested);const{valid:r,invalid:e}=this.validateRequests(this.requested);this.debug("DataController.execute() - validated",r);const t=this.mergeRequested(r);this.debug("DataController.execute() - merged",t),this.debug.check()&&(window.processedData=[]);const i=r.some(n=>null!=n.data);for(const{opts:n,data:s,resultCbs:o,rejects:a,ids:c}of t){const u=i||n.props.some(p=>{var g;return("value"===p.type||"key"===p.type)&&null!=(g=p.useScopedValues)&&g});try{const p=new rV(nt(Re({},n),{mode:this.mode})),g=p.processData(s,r);this.debug.check()&&window.processedData.push(g),g&&0===g.partialValidDataCount?o.forEach((m,y)=>{let _=g;u&&(_=this.extractScopedData(c[y],g)),m({dataModel:p,processedData:_})}):g?this.splitResult(p,g,c,o):a.forEach(m=>m(new Error("AG Charts - no processed data generated")))}catch(p){a.forEach(g=>g(p))}}e.forEach(({error:n,reject:s})=>s(n))}extractScopedData(r,e){const t=n=>Array.isArray(n)?n.map(t):Re(Re({},n),n[r]),i=n=>{var s;return Array.isArray(n)?n.map(i):null!=(s=n?.[r])?s:n};return nt(Re({},e),{data:e.data.map(n=>nt(Re({},n),{datum:t(n.datum),values:n.values.map(i)}))})}validateRequests(r){const e=[],t=[];for(const[i,n]of r.entries())i>0&&n.data.length!==r[0].data.length&&!1===n.opts.groupByData?t.push(nt(Re({},n),{error:new Error("all series[].data arrays must be of the same length and have matching keys.")})):e.push(n);return{valid:e,invalid:t}}mergeRequested(r){const e=[],t=c=>c.filter(u=>"key"===u.type).map(u=>u.property).join(";"),i=({opts:c,data:u})=>p=>(!1===c.groupByData||p[0].data===u)&&p[0].opts.groupByKeys===c.groupByKeys&&p[0].opts.dataVisible===c.dataVisible&&p[0].opts.groupByFn===c.groupByFn&&t(p[0].opts.props)===t(c.props),n=c=>u=>{var p;if(u.type!==c.type)return!1;const g=null!=(p=Ar(u,c))?p:{};return delete g.scopes,delete g.id,delete g.ids,"useScopedValues"in g&&delete g.useScopedValues,0===Object.keys(g).length},s=c=>{var u;if("key"!==c.type&&"value"!==c.type)return;const p=new Set(null!=(u=c.scopes)?u:[]);c.useScopedValues=p.size>1},o=c=>nt(Re({},c[0]),{props:c.reduce((u,p)=>{var m,b,_,E;for(const D of p.props){if(null!=D.id){null!=D.ids||(D.ids=[]);for(const O of null!=(m=D.scopes)?m:[])D.ids.push([O,D.id])}const R=u.find(n(D));R?(null!=R.scopes||(R.scopes=[]),R.scopes.push(...null!=(b=D.scopes)?b:[]),s(D),("key"===R.type||"value"===R.type)&&(null==(_=D.ids)?void 0:_.length)&&(null==(E=R.ids)||E.push(...D.ids))):(s(D),u.push(D))}return u},[])});for(const c of r){const u=e.find(i(c));u?u.push(c):e.push([c])}return e.map(c=>({ids:c.map(({id:u})=>u),resultCbs:c.map(({resultCb:u})=>u),rejects:c.map(({reject:u})=>u),data:c[0].data,opts:o(c.map(({opts:u})=>u))}))}splitResult(r,e,t,i){for(let n=0;n<t.length;n++){const s=t[n];(0,i[n])({dataModel:r,processedData:nt(Re({},e),{data:e.data.filter(({validScopes:a})=>null==a||a.some(c=>c===s))})})}}},A_=class{constructor(){this.registeredListeners=new Map}addListener(r,e){const t={symbol:Symbol(r),handler:e};return this.registeredListeners.has(r)?this.registeredListeners.get(r).push(t):this.registeredListeners.set(r,[t]),()=>this.removeListener(t.symbol)}removeListener(r){for(const[e,t]of this.registeredListeners.entries()){const i=t.findIndex(n=>n.symbol===r);if(i>=0){t.splice(i,1),0===t.length&&this.registeredListeners.delete(e);break}}}dispatch(r,...e){for(const t of this.getListenersByType(r))try{t.handler(...e)}catch(i){tt.errorOnce(i)}}dispatchWrapHandlers(r,e,...t){for(const i of this.getListenersByType(r))try{e(i.handler,...t)}catch(n){tt.errorOnce(n)}}getListenersByType(r){var e;return null!=(e=this.registeredListeners.get(r))?e:[]}destroy(){this.registeredListeners.clear()}},bM=class extends A_{constructor(r){super(),this.animationManager=r,this.dispatchOnlyLatest=!0,this.dispatchThrottle=0,this.requestThrottle=300,this.isLoadingInitialData=!1,this.freshRequests=[],this.requestCounter=0,this.debug=Un.create(!0,"data-model","data-source"),this.throttledFetch=this.createThrottledFetch(this.requestThrottle),this.throttledDispatch=this.createThrottledDispatch(this.dispatchThrottle)}updateCallback(r){"function"==typeof r&&(this.debug("DataService - updated data source callback"),this.dataSourceCallback=r,this.isLoadingInitialData=!0,this.animationManager.skip(),this.dispatch("data-source-change"))}clearCallback(){this.dataSourceCallback=void 0}load(r){this.throttledFetch(r)}isLazy(){return null!=this.dataSourceCallback}isLoading(){return this.isLazy()&&(this.isLoadingInitialData||this.freshRequests.length>0)}createThrottledFetch(r){return wO(e=>this.fetch(e),r,{leading:!1,trailing:!0})}createThrottledDispatch(r){return wO((e,t)=>{this.debug(`DataService - dispatching 'data-load' | ${e}`),this.dispatch("data-load",{type:"data-load",data:t})},r,{leading:!0,trailing:!0})}fetch(r){return Be(this,null,function*(){if(!this.dataSourceCallback)throw new Error("DataService - [dataSource.getData] callback not initialised");const e=performance.now(),t=this.requestCounter++;let i;this.debug(`DataService - requesting | ${t}`),this.freshRequests.push(t);try{i=yield this.dataSourceCallback(r),this.debug(`DataService - response | ${performance.now()-e}ms | ${t}`)}catch(s){this.debug(`DataService - request failed | ${t}`),tt.errorOnce(`DataService - request failed | [${s}]`)}this.isLoadingInitialData=!1;const n=this.freshRequests.findIndex(s=>s===t);-1===n||this.dispatchOnlyLatest&&n!==this.freshRequests.length-1?this.debug(`DataService - discarding stale request | ${t}`):(this.freshRequests=this.freshRequests.slice(n+1),Array.isArray(i)?this.throttledDispatch(t,i):this.dispatch("data-error"))})}};I([Bs({newValue(r){this.throttledDispatch=this.createThrottledDispatch(r)}})],bM.prototype,"dispatchThrottle",2),I([Bs({newValue(r){this.throttledFetch=this.createThrottledFetch(r)}})],bM.prototype,"requestThrottle",2);var q3=[!0,"animation"],aV=class{constructor(){this.stoppedCbs=new Set,this.controllers=new Map,this.debug=Un.create(...q3),this.currentPhase=0,this.phases=new Map(zC.map(r=>[r,[]])),this.skipAnimations=!1}get size(){return this.controllers.size}isActive(){return this.controllers.size>0}getActiveControllers(){var r;return null!=(r=this.phases.get(zC[this.currentPhase]))?r:[]}checkOverlappingId(r){null!=r&&this.controllers.has(r)&&(this.controllers.get(r).stop(),this.debug(`Skipping animation batch due to update of existing animation: ${r}`),this.skip())}addAnimation(r){var e;if(!r.isComplete)return zC.indexOf(r.phase)<this.currentPhase?(this.debug("Skipping animation due to being for an earlier phase",r.id),void r.stop()):(this.controllers.set(r.id,r),void(null==(e=this.phases.get(r.phase))||e.push(r)))}removeAnimation(r){this.controllers.delete(r.id);const e=this.phases.get(r.phase),t=e?.indexOf(r);null!=t&&t>=0&&e?.splice(t,1)}progress(r){const e=zC[this.currentPhase];let t=[...this.getActiveControllers()];this.debug(`AnimationBatch - progressing by ${r}; current phase ${e} with ${t?.length} active controllers of ${this.controllers.size} total`,this.phases);let n=0===r?.01:r;const s=()=>null==zC[this.currentPhase],o=()=>{for(t=[...this.getActiveControllers()];!s()&&0===t.length;)this.currentPhase++,t=[...this.getActiveControllers()],this.debug(`AnimationBatch - phase changing to ${zC[this.currentPhase]}`,{unusedTime:n},t)};for(;n>0&&!s();){o();const a=n;let c=0;for(const u of t)n=Math.min(u.update(a),n),u.isComplete&&(c++,this.removeAnimation(u));this.debug(`AnimationBatch - updated ${t.length} controllers; ${c} completed`)}}skip(r=!0){if(!1===this.skipAnimations&&!0===r){for(const e of this.controllers.values())e.stop();this.controllers.clear()}this.skipAnimations=r}play(){for(const r of this.controllers.values())r.play()}pause(){for(const r of this.controllers.values())r.pause()}stop(){for(const r of this.controllers.values())try{r.stop(),this.removeAnimation(r)}catch(e){tt.error("Error during animation stop",e)}this.dispatchStopped()}stopByAnimationId(r){if(null!=r&&this.controllers.has(r)){const e=this.controllers.get(r);e&&(e.stop(),this.removeAnimation(e))}}stopByAnimationGroupId(r){for(const e of this.controllers.values())e.groupId===r&&this.stopByAnimationId(e.id)}dispatchStopped(){this.stoppedCbs.forEach(r=>r()),this.stoppedCbs.clear()}isSkipped(){return this.skipAnimations}destroy(){}},XC=class{constructor(){this.listeners=new A_}addListener(r,e){return this.listeners.addListener(r,e)}removeListener(r){this.listeners.removeListener(r)}destroy(){this.listeners.destroy()}},lV=["click","dblclick","contextmenu","hover","drag-start","drag","drag-end","leave","page-left","wheel"],cV=["pagehide","mousemove","mouseup"],dV=["click","dblclick","contextmenu","mousedown","mouseout","mouseenter","touchstart","touchmove","touchend","touchcancel","wheel"],_M=(r=>(r[r.Default=8]="Default",r[r.ZoomDrag=4]="ZoomDrag",r[r.ContextMenu=2]="ContextMenu",r[r.Animation=1]="Animation",r[r.All=15]="All",r))(_M||{}),Z3=[!0,"interaction"],eN=class qT extends XC{constructor(e,t,i){super(),this.debug=Un.create(...Z3),this.eventHandler=n=>this.processEvent(n),this.mouseDown=!1,this.touchDown=!1,this.stateQueue=8,this.rootElement=t.body,this.element=e,this.window=i;for(const n of dV)n.startsWith("touch")?e.addEventListener(n,this.eventHandler,{passive:!0}):"wheel"===n?e.addEventListener(n,this.eventHandler,{passive:!1}):e.addEventListener(n,this.eventHandler);for(const n of cV)this.window.addEventListener(n,this.eventHandler);qT.interactionDocuments.includes(t)||(gM(t,"\n.ag-chart-wrapper {\n    touch-action: none;\n}\n"),qT.interactionDocuments.push(t))}destroy(){super.destroy();for(const e of cV)this.window.removeEventListener(e,this.eventHandler);for(const e of dV)this.element.removeEventListener(e,this.eventHandler)}addListener(e,t,i=8){return super.addListener(e,n=>{this.getState()&i&&t(n)})}pushState(e){this.stateQueue|=e}popState(e){this.stateQueue&=~e}getState(){return this.stateQueue&-this.stateQueue}processEvent(e){const t=this.decideInteractionEventTypes(e);t.length>0&&this.dispatchEvent(e,t).catch(i=>tt.errorOnce(i))}dispatchEvent(e,t){return Be(this,null,function*(){const i=this.calculateCoordinates(e);if(null!=i)for(const n of t)this.listeners.dispatchWrapHandlers(n,(s,o)=>{o.consumed||s(o)},this.buildEvent(Re({type:n,event:e},i)))})}decideInteractionEventTypes(e){const t="drag-start";switch(e.type){case"click":case"dblclick":case"contextmenu":case"wheel":return[e.type];case"mousedown":return this.mouseDown=!0,this.dragStartElement=e.target,[t];case"touchstart":return this.touchDown=!0,this.dragStartElement=e.target,[t];case"touchmove":case"mousemove":return this.mouseDown||this.touchDown||this.isEventOverElement(e)?this.mouseDown||this.touchDown?["drag"]:["hover"]:[];case"mouseup":return this.mouseDown||this.isEventOverElement(e)?(this.mouseDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"touchend":return this.touchDown||this.isEventOverElement(e)?(this.touchDown=!1,this.dragStartElement=void 0,["drag-end"]):[];case"mouseout":case"touchcancel":return["leave"];case"mouseenter":const i=e instanceof MouseEvent&&1==(1&e.buttons);return this.mouseDown!==i?(this.mouseDown=i,[i?t:"drag-end"]):[];case"pagehide":return["page-left"]}return[]}isEventOverElement(e){var t;return e.target===this.element||(null==(t=e.target)?void 0:t.parentElement)===this.element}calculateCoordinates(e){var t;if(e instanceof MouseEvent)return this.getMouseEventCoords(e);if(typeof TouchEvent<"u"&&e instanceof TouchEvent){const i=null!=(t=e.touches[0])?t:e.changedTouches[0],{clientX:n,clientY:s,pageX:o,pageY:a}=i;return nt(Re({},qT.NULL_COORDS),{clientX:n,clientY:s,pageX:o,pageY:a})}return e instanceof PageTransitionEvent?e.persisted?void 0:qT.NULL_COORDS:void 0}getMouseEventCoords(e){const{clientX:t,clientY:i,pageX:n,pageY:s}=e;let{offsetX:o,offsetY:a}=e;const c=u=>{let p=0,g=0;for(;u;)p+=u.offsetLeft,g+=u.offsetTop,u=u.offsetParent;return{x:p,y:g}};if(null!=this.dragStartElement&&e.target!==this.dragStartElement){const u=c(this.dragStartElement),p=c(e.target);o-=u.x-p.x,a-=u.y-p.y}return{clientX:t,clientY:i,pageX:n,pageY:s,offsetX:o,offsetY:a}}isWheelEvent(e){return"wheel"===e.type}buildEvent(e){const{type:t,event:i,clientX:n,clientY:s}=e;let{offsetX:o,offsetY:a,pageX:c,pageY:u}=e;if(!Ei(o)||!Ei(a)){const b=this.element.getBoundingClientRect();o=n-b.left,a=s-b.top}if(!Ei(c)||!Ei(u)){const b=this.rootElement.getBoundingClientRect();c=n-b.left,u=s-b.top}const p=b=>{const R=Math.sign(b);return(3*Math.log10(Math.abs(b)/60+.1)+3)*R};let[g,m]=[NaN,NaN];if(this.isWheelEvent(i)){const b=0===i.deltaMode?p:_=>_;g=b(i.deltaX),m=b(i.deltaY)}const y={type:t,offsetX:o,offsetY:a,pageX:c,pageY:u,deltaX:g,deltaY:m,sourceEvent:i,consumed:!1,consume(){y.consumed=!0}};return this.debug("InteractionManager - builtEvent: ",y),y}};eN.interactionDocuments=[],eN.NULL_COORDS={clientX:-1/0,clientY:-1/0,pageX:-1/0,pageY:-1/0,offsetX:-1/0,offsetY:-1/0};var uV=eN,J3=[!0,"animation"],hV=class extends XC{constructor(r,e){super(),this.interactionManager=r,this.chartUpdateMutex=e,this.defaultDuration=1e3,this.batch=new aV,this.debug=Un.create(...J3),this.rafAvailable=typeof requestAnimationFrame<"u",this.isPlaying=!1,this.requestId=null,this.skipAnimations=!1}animate(r){var n,e=r,{disableInteractions:t=!0}=e,i=rs(e,["disableInteractions"]);const s=this.batch;try{s.checkOverlappingId(i.id)}catch(u){return void this.failsafeOnError(u)}const o=null!=(n=i.id)?n:Math.random().toString(),a=this.isSkipped();a&&this.debug("AnimationManager - skipping animation");const c=new Yk(nt(Re({},i),{id:o,skip:a,autoplay:!!this.isPlaying&&i.autoplay,phase:i.phase,defaultDuration:this.defaultDuration}));if(!this.forceTimeJump(c,this.defaultDuration))return this.batch.addAnimation(c),c}play(){if(!this.isPlaying){this.isPlaying=!0,this.debug("AnimationManager.play()");try{this.batch.play()}catch(r){this.failsafeOnError(r)}this.requestAnimation()}}pause(){if(this.isPlaying){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.pause()");try{this.batch.pause()}catch(r){this.failsafeOnError(r)}}}stop(){this.isPlaying=!1,this.cancelAnimation(),this.debug("AnimationManager.stop()"),this.batch.stop()}stopByAnimationId(r){try{this.batch.stopByAnimationId(r)}catch(e){this.failsafeOnError(e)}}stopByAnimationGroupId(r){try{this.batch.stopByAnimationGroupId(r)}catch(e){this.failsafeOnError(e)}}reset(){this.isPlaying?(this.stop(),this.play()):this.stop()}skip(r=!0){this.skipAnimations=r}isSkipped(){return!this.rafAvailable||this.skipAnimations||this.batch.isSkipped()}isActive(){return this.isPlaying&&this.batch.isActive()}skipCurrentBatch(){this.debug.check()&&this.debug("AnimationManager - skipCurrentBatch()",{stack:(new Error).stack}),this.batch.skip()}isSkippingFrames(){return!0}scheduleAnimationFrame(r){this.requestId=requestAnimationFrame(r)}forceTimeJump(r,e){return!1}requestAnimation(){if(!this.rafAvailable||!this.batch.isActive()||null!==this.requestId)return;let r;const e=t=>Be(this,null,function*(){const i=()=>Be(this,null,function*(){const n=t-(r??t);r=t,this.debug("AnimationManager - onAnimationFrame()",{controllersCount:this.batch.size,deltaTime:n}),this.interactionManager.pushState(1);try{this.batch.progress(n)}catch(s){this.failsafeOnError(s)}this.listeners.dispatch("animation-frame",{type:"animation-frame",deltaMs:n})});this.isSkippingFrames()?yield this.chartUpdateMutex.acquireImmediately(i):yield this.chartUpdateMutex.acquire(i),this.batch.isActive()?this.scheduleAnimationFrame(e):this.batch.stop()});this.scheduleAnimationFrame(e)}cancelAnimation(){null!==this.requestId&&(cancelAnimationFrame(this.requestId),this.requestId=null,this.startBatch())}failsafeOnError(r,e=!0){tt.error("Error during animation, skipping animations",r),e&&this.cancelAnimation()}startBatch(r){this.debug(`AnimationManager - startBatch() with skipAnimations=${r}.`),this.reset(),this.batch.stop(),this.batch.destroy(),this.batch=new aV,!0===r&&this.batch.skip()}endBatch(){this.debug(`AnimationManager - endBatch() with ${this.batch.size} animations; skipped: ${this.batch.isSkipped()}.`),this.batch.isActive()||this.interactionManager.popState(1),this.batch.isSkipped()&&!this.batch.isActive()&&this.batch.skip(!1),this.requestAnimation()}onBatchStop(r){this.batch.stoppedCbs.add(r)}},pV=class extends XC{legendItemClick(r,e,t,i){this.listeners.dispatch("legend-item-click",{type:"legend-item-click",series:r,itemId:e,enabled:t,legendItemName:i})}legendItemDoubleClick(r,e,t,i,n){this.listeners.dispatch("legend-item-double-click",{type:"legend-item-double-click",series:r,itemId:e,enabled:t,legendItemName:n,numVisibleItems:i})}axisHover(r,e){this.listeners.dispatch("axis-hover",{type:"axis-hover",axisId:r,direction:e})}},fV=class{constructor(){this.defaultActions=[],this.disabledActions=new Set}copyDefaultAction(){return[...this.defaultActions]}registerDefaultAction(r){r.id&&this.defaultActions.find(({id:e})=>e===r.id)||this.defaultActions.push(r)}enableAction(r){this.disabledActions.delete(r)}disableAction(r){this.disabledActions.add(r)}isDisabled(r){return this.disabledActions.has(r)}},gV=class{constructor(r){this.states={},this.element=r}updateCursor(r,e){delete this.states[r],null!=e&&(this.states[r]={style:e}),this.applyStates()}applyStates(){let r="default";Object.entries(this.states).reverse().slice(0,1).forEach(([e,{style:t}])=>r=t),this.element.style.cursor=r}getCursor(){return this.element.style.cursor}};function mV(r,e){return Math.sqrt(function Q3(r,e){const t=r.screenX-e.screenX,i=r.screenY-e.screenY;return t*t+i*i}(r,e))}var vV=class extends XC{constructor(r){super(),this.touchstart=e=>this.onTouchStart(e),this.touchmove=e=>this.onTouchMove(e),this.touchend=e=>this.onTouchEnd(e),this.touchcancel=e=>this.onTouchCancel(e),this.pinch={finger1:{identifier:NaN,screenX:NaN,screenY:NaN},finger2:{identifier:NaN,screenX:NaN,screenY:NaN},origin:{x:NaN,y:NaN},distance:NaN,status:0},this.element=r,r.addEventListener("touchstart",this.touchstart,{passive:!0}),r.addEventListener("touchmove",this.touchmove,{passive:!0}),r.addEventListener("touchend",this.touchend),r.addEventListener("touchcancel",this.touchcancel)}destroy(){const{element:r}=this;r.removeEventListener("touchstart",this.touchstart),r.removeEventListener("touchmove",this.touchmove),r.removeEventListener("touchend",this.touchend),r.removeEventListener("touchcancel",this.touchcancel)}findPinchTouches(r){const{touches:e}=r,{finger1:t,finger2:i}=this.pinch;if(0!==this.pinch.status&&2===e.length){if(e[0].identifier===t.identifier&&e[1].identifier===i.identifier)return[e[0],e[1]];if(e[0].identifier===i.identifier&&e[1].identifier===t.identifier)return[e[1],e[0]]}}copyTouchData(r){const e=["identifier","screenX","screenY"];d(e,this.pinch.finger1,r.touches[0]),d(e,this.pinch.finger2,r.touches[1]),this.pinch.distance=mV(this.pinch.finger1,this.pinch.finger2)}dispatchPinchEvent(r,e){const{finger1:t,finger2:i,origin:n}=this.pinch;this.listeners.dispatch(r,{type:r,finger1:t,finger2:i,deltaDistance:e,origin:n})}onTouchStart(r){this.stopPinchTracking();const{pinch:e}=this;2===r.touches.length&&(e.status=1,this.copyTouchData(r),e.origin.x=(r.touches[0].clientX+r.touches[1].clientX)/2,e.origin.y=(r.touches[0].clientY+r.touches[1].clientY)/2)}onTouchMove(r){const e=this.findPinchTouches(r);if(void 0!==e){const[t,i]=e,{pinch:n}=this,s=mV(t,i),o=s-n.distance;1===n.status?Math.abs(o)>1&&(n.status=2,this.copyTouchData(r),this.dispatchPinchEvent("pinch-start",0)):2===n.status?(n.distance=s,this.copyTouchData(r),this.dispatchPinchEvent("pinch-move",o)):tt.error(`unexpected pinch.status: ${n.status}`)}}onTouchEnd(r){this.stopPinchTracking()}onTouchCancel(r){this.stopPinchTracking()}stopPinchTracking(){const{pinch:r}=this;2===r.status&&this.dispatchPinchEvent("pinch-end",0),this.pinch.status=0}},tN=class extends XC{constructor(){super(...arguments),this.highlightStates=new Map,this.pickedStates=new Map}updateHighlight(r,e){this.highlightStates.delete(r),null!=e&&this.highlightStates.set(r,e),this.applyHighlightStates()}getActiveHighlight(){return this.activeHighlight}updatePicked(r,e){this.pickedStates.delete(r),null!=e&&this.pickedStates.set(r,e),this.applyPickedStates()}getActivePicked(){return this.activePicked}applyHighlightStates(){const{activeHighlight:r}=this;this.activeHighlight=Array.from(this.highlightStates.values()).pop(),this.isEqual(this.activeHighlight,r)||this.listeners.dispatch("highlight-change",{type:"highlight-change",currentHighlight:this.activeHighlight,previousHighlight:r})}applyPickedStates(){this.activePicked=Array.from(this.pickedStates.values()).pop()}isEqual(r,e){return r===e||r?.series===e?.series&&r?.itemId===e?.itemId&&r?.datum===e?.datum}};function CV(r){var e;const{width:t=0,height:i=0}=null!=(e=r.bbox.computeBBox())?e:{};return t*i}var ij=class{constructor(){this.nodes=[]}add(r,e){this.nodes.push({value:r,bbox:e})}find(r,e){return this.nodes.filter(t=>function tj(r,e,t){var i,n;return null!=(n=null==(i=r.bbox.computeBBox())?void 0:i.containsPoint(e,t))&&n}(t,r,e)).sort((t,i)=>CV(t)-CV(i)).map(t=>t.value)}*[Symbol.iterator](){for(const{value:r}of Object.values(this.nodes))yield r}clear(){this.nodes.length=0}},nj=class extends A_{},iN=class Dy extends XC{constructor(e){super(),this.chart=e}subscribe(e=Dy.DEFAULT_GROUP){let t=this.get(e);return t||(t=new Set,Dy.chartsGroups.set(e,t)),t.add(this.chart),this}unsubscribe(e=Dy.DEFAULT_GROUP){var t;return null==(t=this.get(e))||t.delete(this.chart),this}getChart(){return this.chart}getGroup(e=Dy.DEFAULT_GROUP){const t=this.get(e);return t?Array.from(t):[]}getGroupSiblings(e=Dy.DEFAULT_GROUP){return this.getGroup(e).filter(t=>t!==this.chart)}get(e){return Dy.chartsGroups.get(e)}};iN.chartsGroups=new Map,iN.DEFAULT_GROUP=Symbol("sync-group-default");var rj=iN,nN=class{constructor(r,e){this.states={},this.exclusiveAreas={},this.destroyFns=[],this.tooltip=r,this.destroyFns.push(e.addListener("hover",t=>this.checkExclusiveRects(t)))}getRange(){return this.tooltip.range}updateTooltip(r,e,t){var i;null==t&&(t=null==(i=this.states[r])?void 0:i.content),this.states[r]={content:t,meta:e},this.applyStates()}updateExclusiveRect(r,e){e?this.exclusiveAreas[r]=e:delete this.exclusiveAreas[r]}removeTooltip(r){delete this.states[r],this.applyStates()}getTooltipMeta(r){var e;return null==(e=this.states[r])?void 0:e.meta}destroy(){for(const r of this.destroyFns)r()}checkExclusiveRects(r){let e;for(const[t,i]of Object.entries(this.exclusiveAreas))if(i.containsPoint(r.offsetX,r.offsetY)){e=t;break}e!==this.appliedExclusiveArea&&(this.appliedExclusiveArea=e,this.applyStates())}applyStates(){var r;const e=this.appliedExclusiveArea?[this.appliedExclusiveArea]:Object.keys(this.states);let t,i;if(e.reverse(),e.slice(0,1).forEach(n=>{var s;const{content:o,meta:a}=null!=(s=this.states[n])?s:{};t=o,i=a}),void 0===i||void 0===t)return this.appliedState=void 0,void this.tooltip.toggle(!1);if((null==(r=this.appliedState)?void 0:r.content)===t){const n=this.tooltip.isVisible();this.tooltip.show(i,void 0,n)}else this.tooltip.show(i,t);this.appliedState={content:t,meta:i}}static makeTooltipMeta(r,e){var t,i,n,s;const{offsetX:o,offsetY:a}=r,{tooltip:c}=e.series.properties,p={offsetX:o,offsetY:a,lastPointerEvent:{offsetX:o,offsetY:a},showArrow:c.showArrow,position:{xOffset:c.position.xOffset,yOffset:c.position.yOffset}},g=null!=(i=null==(t=e.yBar)?void 0:t.upperPoint)?i:e.midPoint;if("node"===c.position.type&&g){const{x:m,y}=g,b=e.series.contentGroup.inverseTransformPoint(m,y);return nt(Re({},p),{offsetX:Math.round(b.x),offsetY:Math.round(b.y)})}return p.enableInteraction=null!=(s=null==(n=c.interaction)?void 0:n.enabled)&&s,p}},yV=class extends XC{constructor(){super(...arguments),this.axisZoomManagers=new Map}updateAxes(r){var e;const t=new Map(r.map(i=>[i.id,this.axisZoomManagers.get(i.id)]));this.axisZoomManagers.clear();for(const i of r)this.axisZoomManagers.set(i.id,null!=(e=t.get(i.id))?e:new oj(i));this.initialZoom&&(this.updateZoom(this.initialZoom),this.initialZoom=void 0)}updateZoom(r){0!==this.axisZoomManagers.size?(this.axisZoomManagers.forEach(e=>{e.updateZoom(r?.[e.getDirection()])}),this.applyChanges()):this.initialZoom=r}updateAxisZoom(r,e){var t;null==(t=this.axisZoomManagers.get(r))||t.updateZoom(e),this.applyChanges()}getZoom(){let r,e;if(this.axisZoomManagers.forEach(t=>{"x"===t.getDirection()?r??(r=t.getZoom()):"y"===t.getDirection()&&(e??(e=t.getZoom()))}),r||e)return{x:r,y:e}}getAxisZoom(r){var e,t;return null!=(t=null==(e=this.axisZoomManagers.get(r))?void 0:e.getZoom())?t:{min:0,max:1}}getAxisZooms(){const r={};for(const[e,t]of this.axisZoomManagers.entries())r[e]={direction:t.getDirection(),zoom:t.getZoom()};return r}applyChanges(){if(!Array.from(this.axisZoomManagers.values()).map(t=>t.applyChanges()).some(Boolean))return;const e={};for(const[t,i]of this.axisZoomManagers.entries())e[t]=i.getZoom();this.listeners.dispatch("zoom-change",nt(Re({type:"zoom-change"},this.getZoom()),{axes:e}))}},oj=class{constructor(r){this.pendingZoom=null,this.axis=r;const[e=0,t=1]=r.visibleRange;this.initialZoom=this.currentZoom={min:e,max:t}}getDirection(){return this.axis.direction}updateZoom(r){this.pendingZoom=r?Re({},r):null}getZoom(){return Cs(this.currentZoom)}applyChanges(){var r;const e=this.currentZoom;return this.currentZoom=null!=(r=this.pendingZoom)?r:this.initialZoom,e.min!==this.currentZoom.min||e.max!==this.currentZoom.max}},SV=class extends A_{constructor(){super(...arguments),this.layoutComplete="layout-complete"}addListener(r,e){if(this.isLayoutStage(r)||this.isLayoutComplete(r))return super.addListener(r,e);throw new Error(`AG Charts - unsupported listener type: ${r}`)}dispatchPerformLayout(r,e){return this.isLayoutStage(r)?this.getListenersByType(r).reduce((t,i)=>{try{return i.handler(t)}catch(n){return tt.errorOnce(n),t}},e):e}dispatchLayoutComplete(r){this.dispatch(this.layoutComplete,r)}isLayoutStage(r){return r!==this.layoutComplete}isLayoutComplete(r){return r===this.layoutComplete}};function aj({orientation:r,bboxes:e,maxHeight:t,maxWidth:i,itemPaddingY:n=0,itemPaddingX:s=0,forceResult:o=!1}){const a="horizontal"===r,c={max:a?i:t,fn:a?m=>m.width:m=>m.height,padding:a?s:n},u={max:a?t:i,fn:a?m=>m.height:m=>m.width,padding:a?n:s};let p=0;const g=[];for(;p<e.length;){const y=lj(e.slice(p),p,c,u,o);if(!y)return;p+=y.processedBBoxCount,g.push(y.pageIndices)}return function dj(r,e,t,i,n){let s=0,o=0;return{pages:r.map(c=>{"horizontal"===e&&(c=function uj(r){const e=[];for(const t of r[0])e.push([]);return r.forEach((t,i)=>{t.forEach((n,s)=>{e[s][i]=n})}),e}(c));let u=0;const p=c.map(y=>{const b=y.map(D=>(u=Math.max(D,u),t[D]));let _=0,E=0;return b.forEach(D=>{_+=D.height+i,E=Math.max(E,D.width+n)}),{indices:y,bboxes:b,columnHeight:Math.ceil(_),columnWidth:Math.ceil(E)}});let g=0,m=0;return p.forEach(y=>{g+=y.columnWidth,m=Math.max(m,y.columnHeight)}),s=Math.max(g,s),o=Math.max(m,o),{columns:p,startIndex:c[0][0],endIndex:u,pageWidth:g,pageHeight:m}}),maxPageWidth:s,maxPageHeight:o}}(g,r,e,n,s)}function lj(r,e,t,i,n){let o=function hj(r,e){const t=r.length;let i=0;for(let n=0;n<t;n++)if(i+=e.fn(r[n])+e.padding,i>e.max)return t/n<2?Math.ceil(t/2):n;return t}(r,t);if(o<1){if(!n)return;o=1}for(let a=o;a>=1;a--){const c=cj(r,e,a,t,i,n);if(null==c&&a<=1)return;if(null!=c){if("number"!=typeof c)return{processedBBoxCount:c.length*c[0].length,pageIndices:c};if(c<=1)return;a=c<a&&c>1?c:a}}}function cj(r,e,t,i,n,s){var o;const a=[];let c=0,u=0,p=[];const g=[];for(let m=0;m<r.length;m++){const y=(m+t)%t;0===y&&(c+=u,u=0,p.length>0&&a.push(p),p=[]);const b=i.fn(r[m])+i.padding;g[y]=Math.max(null!=(o=g[y])?o:0,b),u=Math.max(u,n.fn(r[m])+n.padding);const E=!s||a.length>0;if(c+u>n.max&&E){p=[];break}if(g.reduce((R,O)=>R+O,0)>i.max&&!s)return g.length<t?g.length:void 0;p.push(m+e)}return p.length>0&&a.push(p),a.length>0?a:void 0}function zD(r,e,t,i,n,s,o,a){const c=(t-r)*(a-s)-(i-e)*(o-n);if(0===c)return null;const u=((o-n)*(e-s)-(r-n)*(a-s))/c,p=((t-r)*(e-s)-(i-e)*(r-n))/c;return u>=0&&u<=1&&p>=0&&p<=1?{x:r+u*(t-r),y:e+u*(i-e)}:null}function mj(r,e,t,i,n,s,o,a,c,u,p,g){const m=[],y=u-g,b=p-c,_=c*(g-u)-u*(p-c),E=bV(r,t,n,o),D=bV(e,i,s,a),U=function gj(r,e,t,i){if(0===r)return function fj(r,e,t){if(0===r)return function pj(r,e){const t=-e/r;return 0!==r&&t>=0&&t<=1?[t]:[]}(e,t);const i=e*e-4*r*t,n=[];if(0===i){const s=-e/(2*r);s>=0&&s<=1&&n.push(s)}else if(i>0){const s=Math.sqrt(i),o=(-e-s)/(2*r),a=(-e+s)/(2*r);o>=0&&o<=1&&n.push(o),a>=0&&a<=1&&n.push(a)}return n}(e,t,i);const n=e/r,s=t/r,a=(3*s-n*n)/9,c=(9*n*s-i/r*27-2*n*n*n)/54,u=a*a*a+c*c,p=1/3,g=[];if(u>=0){const m=Math.sqrt(u),y=Math.sign(c+m)*Math.pow(Math.abs(c+m),p),b=Math.sign(c-m)*Math.pow(Math.abs(c-m),p),_=Math.abs(Math.sqrt(3)*(y-b)/2),E=-p*n+(y+b);if(E>=0&&E<=1&&g.push(E),0===_){const D=-p*n-(y+b)/2;D>=0&&D<=1&&g.push(D)}}else{const m=Math.acos(c/Math.sqrt(-a*a*a)),y=p*n,b=2*Math.sqrt(-a),_=b*Math.cos(p*m)-y,E=b*Math.cos(p*(m+2*Math.PI))-y,D=b*Math.cos(p*(m+4*Math.PI))-y;_>=0&&_<=1&&g.push(_),E>=0&&E<=1&&g.push(E),D>=0&&D<=1&&g.push(D)}return g}(y*E[0]+b*D[0],y*E[1]+b*D[1],y*E[2]+b*D[2],y*E[3]+b*D[3]+_);for(const j of U){const q=j*j,J=j*q,me=E[0]*J+E[1]*q+E[2]*j+E[3],ye=D[0]*J+D[1]*q+D[2]*j+D[3];let Ae;Ae=c!==p?(me-c)/(p-c):(ye-u)/(g-u),Ae>=0&&Ae<=1&&m.push({x:me,y:ye})}return m}function bV(r,e,t,i){return[3*e-r-3*t+i,3*r-6*e+3*t,-3*r+3*e,r]}function _V(r,e,t,i,n,s,o,a,c,u){const p=(u-a)/(c-o),g=a-p*o,m=Math.pow(p,2)+1,y=2*(p*(g-e)-r),b=Math.pow(r,2)+Math.pow(g-e,2)-Math.pow(t,2),_=Math.pow(y,2)-4*m*b;if(_<0)return[];const E=(-y+Math.sqrt(_))/2/m,D=(-y-Math.sqrt(_))/2/m,R=[];return[E,D].forEach(O=>{if(!(O>=Math.min(o,c)&&O<=Math.max(o,c)))return;const k=p*O+g,U=os(i);let j=os(n),q=os(Math.atan2(k,O));j<=U&&(j+=2*Math.PI),q<U&&(q+=2*Math.PI),s!==(q>=U&&q<=j)&&R.push({x:O,y:k})}),R}var O_=class{constructor(){this.previousCommands=[],this.previousParams=[],this.previousClosedPath=!1,this.commands=[],this.params=[],this._closedPath=!1}isDirty(){if(this._closedPath!==this.previousClosedPath||this.previousCommands.length!==this.commands.length||this.previousParams.length!==this.params.length)return!0;for(let r=0;r<this.commands.length;r++)if(this.commands[r]!==this.previousCommands[r])return!0;for(let r=0;r<this.params.length;r++)if(this.params[r]!==this.previousParams[r])return!0;return!1}draw(r){const e=this.commands,t=this.params;let i=0;r.beginPath();for(const n of e)switch(n){case 0:r.moveTo(t[i++],t[i++]);break;case 1:r.lineTo(t[i++],t[i++]);break;case 3:r.bezierCurveTo(t[i++],t[i++],t[i++],t[i++],t[i++],t[i++]);break;case 2:r.arc(t[i++],t[i++],t[i++],t[i++],t[i++],1===t[i++]);break;case 4:r.closePath()}0===e.length&&r.closePath()}moveTo(r,e){this.xy?(this.xy[0]=r,this.xy[1]=e):this.xy=[r,e],this.commands.push(0),this.params.push(r,e)}lineTo(r,e){this.xy?(this.commands.push(1),this.params.push(r,e),this.xy[0]=r,this.xy[1]=e):this.moveTo(r,e)}rect(r,e,t,i){this.moveTo(r,e),this.lineTo(r+t,e),this.lineTo(r+t,e+i),this.lineTo(r,e+i),this.closePath()}roundRect(r,e,t,i,n){n=Math.min(n,t/2,i/2),this.moveTo(r,e+n),this.arc(r+n,e+n,n,Math.PI,3*Math.PI/2),this.lineTo(r+n,e),this.lineTo(r+t-n,e),this.arc(r+t-n,e+n,n,3*Math.PI/2,2*Math.PI),this.lineTo(r+t,e+n),this.lineTo(r+t,e+i-n),this.arc(r+t-n,e+i-n,n,0,Math.PI/2),this.lineTo(r+t-n,e+i),this.lineTo(r+n,e+i),this.arc(r+ +n,e+i-n,n,Math.PI/2,Math.PI),this.lineTo(r,e+i-n),this.closePath()}arc(r,e,t,i,n,s=!1){const o=r+t*Math.cos(n),a=e+t*Math.sin(n);this.xy?(this.xy[0]=o,this.xy[1]=a):this.xy=[o,a],this.commands.push(2),this.params.push(r,e,t,i,n,s?1:0)}cubicCurveTo(r,e,t,i,n,s){this.xy||this.moveTo(r,e),this.commands.push(3),this.params.push(r,e,t,i,n,s),this.xy&&(this.xy[0]=n,this.xy[1]=s)}get closedPath(){return this._closedPath}closePath(){this.xy&&(this.xy=void 0,this.commands.push(4),this._closedPath=!0)}clear({trackChanges:r}={trackChanges:!1}){r?(this.previousCommands=this.commands,this.previousParams=this.params,this.previousClosedPath=this._closedPath,this.commands=[],this.params=[]):(this.commands.length=0,this.params.length=0),this.xy=void 0,this._closedPath=!1}isPointInPath(r,e){const t=this.commands,i=this.params,n=t.length,s=-1e4,o=-1e4;let a=NaN,c=NaN,u=0,p=0,g=0;for(let m=0,y=0;m<n;m++)switch(t[m]){case 0:!isNaN(a)&&zD(a,c,u,p,s,o,r,e)&&g++,u=i[y++],a=u,p=i[y++],c=p;break;case 1:zD(u,p,i[y++],i[y++],s,o,r,e)&&g++,u=i[y-2],p=i[y-1];break;case 3:g+=mj(u,p,i[y++],i[y++],i[y++],i[y++],i[y++],i[y++],s,o,r,e).length,u=i[y-2],p=i[y-1];break;case 2:const b=i[y++],_=i[y++],E=i[y++],D=i[y++],R=i[y++];g+=_V(b,_,E,D,R,Boolean(i[y++]),s,o,r,e).length,u=b+Math.cos(R)*E,p=_+Math.sin(R)*E;break;case 4:!isNaN(a)&&zD(a,c,u,p,s,o,r,e)&&g++}return g%2==1}getPoints(){const{commands:r,params:e}=this,t=[];let i=0;for(let n=0;n<r.length;n++)switch(r[n]){case 0:case 1:t.push({x:e[i++],y:e[i++]});break;case 3:i+=4,t.push({x:e[i++],y:e[i++]});break;case 2:t.push({x:e[i++],y:e[i++]}),i+=4}return t}};function Jt(r){const{redraw:e=3,changeCb:t,convertor:i}=r??{};return at({redraw:e,type:"path",convertor:i,changeCb:t})}var tl=class extends Ql{constructor(){super(...arguments),this.path=new O_,this._clipX=NaN,this._clipY=NaN,this._dirtyPath=!0}set clipX(r){this._clipX=r,this.dirtyPath=!0}set clipY(r){this._clipY=r,this.dirtyPath=!0}set dirtyPath(r){this._dirtyPath!==r&&(this._dirtyPath=r,r&&this.markDirty(this,3))}get dirtyPath(){return this._dirtyPath}checkPathDirty(){var r,e,t,i;this._dirtyPath||(this.dirtyPath=this.path.isDirty()||null!=(e=null==(r=this.fillShadow)?void 0:r.isDirty())&&e||null!=(i=null==(t=this._clipPath)?void 0:t.isDirty())&&i)}isPointInPath(r,e){const t=this.transformPoint(r,e);return this.path.closedPath&&this.path.isPointInPath(t.x,t.y)}isDirtyPath(){return!1}updatePath(){}render(r){var t,i,n,s;const{ctx:o,forceRender:a,stats:c}=r;if(0!==this.dirty||a){if(this.computeTransformMatrix(),this.matrix.toContext(o),(this.dirtyPath||this.isDirtyPath())&&(this.updatePath(),this.dirtyPath=!1),isNaN(this._clipX)||isNaN(this._clipY)||null==this.clipMode)this.path.draw(o),this.fillStroke(o);else{o.save();const u=this.strokeWidth/2;if(null!=this._clipPath||(this._clipPath=new O_),this._clipPath.clear(),this._clipPath.rect(-u,-u,this._clipX+u,this._clipY+u+u),"normal"===this.clipMode&&(null==(t=this._clipPath)||t.draw(o),o.clip()),this._clipX>0&&this._clipY>0&&(this.path.draw(o),this.fillStroke(o)),"punch-out"===this.clipMode){null==(i=this._clipPath)||i.draw(o),o.clip();const{x:p=-1e4,y:g=-1e4,width:m=2e4,height:y=2e4}=null!=(n=this.computeBBox())?n:{};o.clearRect(p,g,m,y)}o.restore()}null==(s=this.fillShadow)||s.markClean(),super.render(r)}else c&&(c.nodesSkipped+=this.nodeCount.count)}};tl.className="Path",I([Jt()],tl.prototype,"clipMode",2),I([Jt()],tl.prototype,"clipX",1),I([Jt()],tl.prototype,"clipY",1);var nc=class extends tl{constructor(){super(...arguments),this.x=0,this.y=0,this.size=12}computeBBox(){const{x:r,y:e,size:t}=this,i=t/2;return new Bt(r-i,e-i,t,t)}applyPath(r,e){const{path:t}=this;let{x:i,y:n}=this;t.clear();for(const{x:s,y:o,t:a}of e)i+=s*r,n+=o*r,"move"===a?t.moveTo(i,n):t.lineTo(i,n);t.closePath()}};I([Jt()],nc.prototype,"x",2),I([Jt()],nc.prototype,"y",2),I([Jt({convertor:Math.abs})],nc.prototype,"size",2);var Nu=class extends nc{updatePath(){const{x:r,y:e,path:t,size:i}=this,n=i/2;t.clear(),t.arc(r,e,n,0,2*Math.PI),t.closePath()}};Nu.className="Circle";var sN=class iU extends nc{updatePath(){super.applyPath(this.size/4.2,iU.moves)}};sN.className="Cross",sN.moves=[{x:-1,y:0,t:"move"},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:-1,y:1},{x:-1,y:-1}];var vj=sN,rN=class nU extends nc{updatePath(){super.applyPath(this.size/2,nU.moves)}};rN.className="Diamond",rN.moves=[{x:0,y:-1,t:"move"},{x:1,y:1},{x:-1,y:1},{x:-1,y:-1},{x:1,y:-1}];var wV=rN,EV=class extends nc{rad(r){return r/180*Math.PI}updatePath(){const{x:r,path:e,size:t,rad:i}=this,n=t/4,s=this.y+n/2;e.clear(),e.arc(r-n,s-n,n,i(130),i(330)),e.arc(r+n,s-n,n,i(220),i(50)),e.lineTo(r,s+n),e.closePath()}};EV.className="Heart";var oN=class sU extends nc{updatePath(){super.applyPath(this.size/3,sU.moves)}};oN.className="Plus",oN.moves=[{x:-.5,y:-.5,t:"move"},{x:0,y:-1},{x:1,y:0},{x:0,y:1},{x:1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:1},{x:-1,y:0},{x:0,y:-1},{x:-1,y:0},{x:0,y:-1}];var Cj=oN,M_=class extends nc{updatePath(){const{path:r,x:e,y:t}=this,i=this.size/2;r.clear(),r.moveTo(this.align(e-i),this.align(t-i)),r.lineTo(this.align(e+i),this.align(t-i)),r.lineTo(this.align(e+i),this.align(t+i)),r.lineTo(this.align(e-i),this.align(t+i)),r.closePath()}};M_.className="Square";var aN=class rU extends nc{updatePath(){super.applyPath(1.1*this.size,rU.moves)}};aN.className="Triangle",aN.moves=[{x:0,y:-.48,t:"move"},{x:.5,y:.87},{x:-1,y:0}];var x_=aN,DV={circle:Nu,cross:vj,diamond:wV,heart:EV,plus:Cj,square:M_,triangle:x_},yj=Object.keys(DV);function TV(r){return"string"==typeof r&&yj.includes(r)}function Xg(r=M_){return TV(r)?DV[r]:"function"==typeof r?r:M_}var _s=class extends vt{constructor(){super({name:"markerLabelGroup"}),this.label=new Ri,this.line=new Us,this._marker=new M_,this._markerSize=15,this._spacing=8;const{marker:r,label:e,line:t}=this;e.textBaseline="middle",e.fontSize=12,e.fontFamily="Verdana, sans-serif",e.fill="black",e.y=Wn.has.textMetrics?1:0,this.append([t,r,e]),this.update()}set marker(r){this._marker!==r&&(this.removeChild(this._marker),this._marker=r,this.appendChild(r),this.update())}get marker(){return this._marker}set markerSize(r){this._markerSize!==r&&(this._markerSize=r,this.update())}get markerSize(){return this._markerSize}set spacing(r){this._spacing!==r&&(this._spacing=r,this.update())}get spacing(){return this._spacing}setSeriesStrokeOffset(r){const e=this.marker.size/2+r;this.line.x1=-e,this.line.x2=e,this.line.y1=0,this.line.y2=0,this.line.markDirtyTransform(),this.update()}update(){this.marker.size=this.markerSize,this.label.x=Math.max(this.line.visible?this.line.x2:-1/0,this.markerSize/2)+this.spacing}render(r){this.marker.opacity=this.opacity,this.label.opacity=this.opacity,this.line.opacity=this.opacity,super.render(r)}};_s.className="MarkerLabel",I([Qi("label")],_s.prototype,"text",2),I([Qi("label")],_s.prototype,"fontStyle",2),I([Qi("label")],_s.prototype,"fontWeight",2),I([Qi("label")],_s.prototype,"fontSize",2),I([Qi("label")],_s.prototype,"fontFamily",2),I([Qi("label","fill")],_s.prototype,"color",2),I([Qi("marker","fill")],_s.prototype,"markerFill",2),I([Qi("marker","stroke")],_s.prototype,"markerStroke",2),I([Qi("marker","strokeWidth")],_s.prototype,"markerStrokeWidth",2),I([Qi("marker","fillOpacity")],_s.prototype,"markerFillOpacity",2),I([Qi("marker","strokeOpacity")],_s.prototype,"markerStrokeOpacity",2),I([Qi("marker","visible")],_s.prototype,"markerVisible",2),I([Qi("line","stroke")],_s.prototype,"lineStroke",2),I([Qi("line","strokeWidth")],_s.prototype,"lineStrokeWidth",2),I([Qi("line","strokeOpacity")],_s.prototype,"lineStrokeOpacity",2),I([Qi("line","lineDash")],_s.prototype,"lineLineDash",2),I([Qi("line","visible")],_s.prototype,"lineVisible",2);var P_=class extends Di{constructor(){super(...arguments),this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif"}};I([H(Si)],P_.prototype,"color",2),I([H(jg,{optional:!0})],P_.prototype,"fontStyle",2),I([H(zg,{optional:!0})],P_.prototype,"fontWeight",2),I([H(qe)],P_.prototype,"fontSize",2),I([H(et)],P_.prototype,"fontFamily",2);var Tp=class extends Di{constructor(){super(...arguments),this.size=15,this.fill=void 0,this.fillOpacity=void 0,this.stroke=void 0,this.strokeWidth=1,this.strokeOpacity=1}};I([H(qe)],Tp.prototype,"size",2),I([H(Si,{optional:!0})],Tp.prototype,"fill",2),I([H(Fi,{optional:!0})],Tp.prototype,"fillOpacity",2),I([H(Si,{optional:!0})],Tp.prototype,"stroke",2),I([H(qe)],Tp.prototype,"strokeWidth",2),I([H(Fi)],Tp.prototype,"strokeOpacity",2);var wM=class extends Di{constructor(r){super(),this.parent=r,this.shape=x_,this.size=15,this.padding=8}};I([Bs({changeValue(){this.parent.marker===this&&this.parent.onMarkerShapeChange()}})],wM.prototype,"shape",2),I([H(qe)],wM.prototype,"size",2),I([H(qe)],wM.prototype,"padding",2);var ZC=class extends Di{constructor(r,e,t,i){super(),this.chartUpdateCallback=r,this.pageUpdateCallback=e,this.regionManager=t,this.cursorManager=i,this.id=Ru(this),this.marker=new wM(this),this.activeStyle=new Tp,this.inactiveStyle=new Tp,this.highlightStyle=new Tp,this.label=new P_,this.group=new vt({name:"pagination"}),this.labelNode=new Ri,this.destroyFns=[],this.totalPages=0,this.currentPage=0,this.translationX=0,this.translationY=0,this.nextButtonDisabled=!1,this.previousButtonDisabled=!1,this._visible=!0,this._enabled=!0,this._orientation="vertical",this._nextButton=new x_,this._previousButton=new x_,this.labelNode.setProperties({textBaseline:"middle",fontSize:12,fontFamily:"Verdana, sans-serif",fill:"black",y:Wn.has.textMetrics?1:0}),this.group.append([this.nextButton,this.previousButton,this.labelNode]);const n=this.regionManager.addRegion("pagination",this.group);this.destroyFns.push(n.addListener("click",s=>this.onPaginationClick(s)),n.addListener("hover",s=>this.onPaginationMouseMove(s))),this.update(),this.updateMarkers()}destroy(){this.destroyFns.forEach(r=>r())}set visible(r){this._visible=r,this.updateGroupVisibility()}get visible(){return this._visible}set enabled(r){this._enabled=r,this.updateGroupVisibility()}get enabled(){return this._enabled}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible}set orientation(r){"horizontal"===(this._orientation=r,r)?(this.previousButton.rotation=-Math.PI/2,this.nextButton.rotation=Math.PI/2):(this.previousButton.rotation=0,this.nextButton.rotation=Math.PI)}get orientation(){return this._orientation}set nextButton(r){this._nextButton!==r&&(this.group.removeChild(this._nextButton),this._nextButton=r,this.group.appendChild(r))}get nextButton(){return this._nextButton}set previousButton(r){this._previousButton!==r&&(this.group.removeChild(this._previousButton),this._previousButton=r,this.group.appendChild(r))}get previousButton(){return this._previousButton}update(){this.updateLabel(),this.updatePositions(),this.enableOrDisableButtons()}updatePositions(){this.group.translationX=this.translationX,this.group.translationY=this.translationY,this.updateLabelPosition(),this.updateNextButtonPosition()}updateLabelPosition(){const{size:r,padding:e}=this.marker;this.nextButton.size=r,this.previousButton.size=r,this.labelNode.x=r/2+e}updateNextButtonPosition(){const r=this.labelNode.computeBBox();this.nextButton.translationX=r.x+r.width+this.marker.size/2+this.marker.padding}updateLabel(){const{currentPage:r,totalPages:e,labelNode:t,label:{color:i,fontStyle:n,fontWeight:s,fontSize:o,fontFamily:a}}=this;t.text=`${r+1} / ${e}`,t.fill=i,t.fontStyle=n,t.fontWeight=s,t.fontSize=o,t.fontFamily=a}updateMarkers(){const{nextButton:r,previousButton:e,nextButtonDisabled:t,previousButtonDisabled:i,activeStyle:n,inactiveStyle:s,highlightStyle:o,highlightActive:a}=this,c=(u,p)=>p?s:u===a?o:n;this.updateMarker(r,c("next",t)),this.updateMarker(e,c("previous",i))}updateMarker(r,e){var t;const{size:i}=this.marker;r.size=i,r.fill=e.fill,r.fillOpacity=null!=(t=e.fillOpacity)?t:1,r.stroke=e.stroke,r.strokeWidth=e.strokeWidth,r.strokeOpacity=e.strokeOpacity}enableOrDisableButtons(){const{currentPage:r,totalPages:e}=this,t=0===e,n=0===r;this.nextButtonDisabled=r===e-1||t,this.previousButtonDisabled=n||t}nextButtonContainsPoint(r,e){return!this.nextButtonDisabled&&this.nextButton.containsPoint(r,e)}previousButtonContainsPoint(r,e){return!this.previousButtonDisabled&&this.previousButton.containsPoint(r,e)}onPaginationClick(r){const{offsetX:e,offsetY:t}=r;this.nextButtonContainsPoint(e,t)?(this.incrementPage(),this.onPaginationChanged(),r.consume()):this.previousButtonContainsPoint(e,t)&&(this.decrementPage(),this.onPaginationChanged(),r.consume())}onPaginationMouseMove(r){const{offsetX:e,offsetY:t}=r;this.nextButtonContainsPoint(e,t)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="next"):this.previousButtonContainsPoint(e,t)?(this.cursorManager.updateCursor(this.id,"pointer"),this.highlightActive="previous"):(this.cursorManager.updateCursor(this.id),this.highlightActive=void 0),this.updateMarkers(),this.chartUpdateCallback(6)}onPaginationChanged(){this.pageUpdateCallback(this.currentPage)}incrementPage(){this.currentPage=Math.min(this.currentPage+1,this.totalPages-1)}decrementPage(){this.currentPage=Math.max(this.currentPage-1,0)}onMarkerShapeChange(){const r=Xg(this.marker.shape||x_);this.previousButton=new r,this.nextButton=new r,this.updatePositions(),this.updateMarkers(),this.chartUpdateCallback(6)}attachPagination(r){r.append(this.group)}computeBBox(){return this.group.computeBBox()}};ZC.className="Pagination",I([H(Ct)],ZC.prototype,"marker",2),I([H(Ct)],ZC.prototype,"activeStyle",2),I([H(Ct)],ZC.prototype,"inactiveStyle",2),I([H(Ct)],ZC.prototype,"highlightStyle",2),I([H(Ct)],ZC.prototype,"label",2);var Zg=class extends Di{constructor(){super(...arguments),this.maxLength=void 0,this.color="black",this.fontStyle=void 0,this.fontWeight=void 0,this.fontSize=12,this.fontFamily="Verdana, sans-serif",this.formatter=void 0}};I([H(qe,{optional:!0})],Zg.prototype,"maxLength",2),I([H(Si)],Zg.prototype,"color",2),I([H(jg,{optional:!0})],Zg.prototype,"fontStyle",2),I([H(zg,{optional:!0})],Zg.prototype,"fontWeight",2),I([H(qe)],Zg.prototype,"fontSize",2),I([H(et)],Zg.prototype,"fontFamily",2),I([H(Zl,{optional:!0})],Zg.prototype,"formatter",2);var I_=class extends Di{constructor(){super(...arguments),this.size=15,this.padding=8,this.enabled=!0}};I([w_(r=>{var e;return null==(e=r.parent)?void 0:e.onMarkerShapeChange()})],I_.prototype,"shape",2),I([H(qe)],I_.prototype,"size",2),I([H(qe)],I_.prototype,"padding",2),I([H(qe,{optional:!0})],I_.prototype,"strokeWidth",2),I([H(Ot)],I_.prototype,"enabled",2);var lN=class extends Di{};I([H(qe,{optional:!0})],lN.prototype,"strokeWidth",2),I([H(qe,{optional:!0})],lN.prototype,"length",2);var Rp=class extends Di{constructor(){super(...arguments),this.paddingX=16,this.paddingY=8,this.toggleSeriesVisible=!0,this.showSeriesStroke=!1,this.marker=new I_,this.label=new Zg,this.line=new lN}};I([H(qe,{optional:!0})],Rp.prototype,"maxWidth",2),I([H(qe)],Rp.prototype,"paddingX",2),I([H(qe)],Rp.prototype,"paddingY",2),I([H(Ot)],Rp.prototype,"toggleSeriesVisible",2),I([H(Ot)],Rp.prototype,"showSeriesStroke",2),I([H(Ct)],Rp.prototype,"marker",2),I([H(Ct)],Rp.prototype,"label",2),I([H(Ct)],Rp.prototype,"line",2);var cN=class extends Di{};I([H(Zl,{optional:!0})],cN.prototype,"legendItemClick",2),I([H(Zl,{optional:!0})],cN.prototype,"legendItemDoubleClick",2);var ca=class extends Di{constructor(r){super(),this.ctx=r,this.id=Ru(this),this.group=new vt({name:"legend",layer:!0,zIndex:9}),this.itemSelection=dn.select(this.group,_s),this.oldSize=[0,0],this.pages=[],this.maxPageSize=[0,0],this.paginationTrackingIndex=0,this.truncatedItems=new Set,this._data=[],this.item=new Rp,this.listeners=new cN,this.enabled=!0,this.position="bottom",this.spacing=20,this.characterWidths=new Map,this.destroyFns=[],this.size=[0,0],this._visible=!0,this.item.marker.parent=this,this.pagination=new ZC(i=>r.updateService.update(i),i=>this.updatePageNumber(i),r.regionManager,r.cursorManager),this.pagination.attachPagination(this.group),this.item.marker.parent=this;const t=r.regionManager.addRegion("legend",this.group);this.destroyFns.push(t.addListener("click",i=>this.checkLegendClick(i),9),t.addListener("dblclick",i=>this.checkLegendDoubleClick(i),9),t.addListener("hover",i=>this.handleLegendMouseMove(i)),t.addListener("leave",i=>this.handleLegendMouseExit(i)),r.layoutService.addListener("start-layout",i=>this.positionLegend(i.shrinkRect)),()=>this.detachLegend())}set data(r){this._data=r,this.updateGroupVisibility()}get data(){return this._data}destroy(){this.destroyFns.forEach(r=>r()),this.pagination.destroy()}onMarkerShapeChange(){this.itemSelection.clear(),this.group.markDirty(this.group,2)}getOrientation(){if(void 0!==this.orientation)return this.orientation;switch(this.position){case"right":case"left":return"vertical";case"bottom":case"top":return"horizontal"}}getCharacterWidths(r){const{characterWidths:e}=this;if(e.has(r))return e.get(r);const t={"...":Wn.getTextSize("...",r).width};return e.set(r,t),t}set visible(r){this._visible=r,this.updateGroupVisibility()}get visible(){return this._visible}updateGroupVisibility(){this.group.visible=this.enabled&&this.visible&&this.data.length>0}attachLegend(r){r.append(this.group)}detachLegend(){var r;null==(r=this.group.parent)||r.removeChild(this.group)}getItemLabel(r){const{ctx:{callbackCache:e}}=this,{formatter:t}=this.item.label;return t?e.call(t,{itemId:r.itemId,value:r.label.text,seriesId:r.seriesId}):r.label.text}performLayout(r,e){const{paddingX:t,paddingY:i,label:n,maxWidth:s,marker:{size:o,padding:a,shape:c},label:{maxLength:u=1/0,fontStyle:p,fontWeight:g,fontSize:m,fontFamily:y},line:b,showSeriesStroke:_}=this.item,E=[...this.data];this.reverseOrder&&E.reverse(),this.itemSelection.update(E);const D=[],R=$g(n),L=s??.8*r,k=o+a+t;if(this.itemSelection.each((Pe,Le)=>{var Xe,Je,ht;const Dt=Xg(c??Le.marker.shape),Ft=null!=(Xe=Le.marker.enabled)?Xe:this.item.marker.enabled;Pe.marker&&Pe.marker instanceof Dt||(Pe.marker=new Dt),Pe.markerSize=o,Pe.spacing=a,Pe.fontStyle=p,Pe.fontWeight=g,Pe.fontSize=m,Pe.fontFamily=y;const Mt=null!=(Je=Le.itemId)?Je:Le.id,Ht=(this.getItemLabel(Le)??"<unknown>").replace(/\r?\n/g," ");Pe.text=this.truncate(Ht,u,L,k,R,Mt),_&&void 0!==Le.line?(Pe.lineVisible=!0,Pe.markerVisible=Ft,Pe.setSeriesStrokeOffset(null!=(ht=b.length)?ht:5)):(Pe.lineVisible=!1,Pe.markerVisible=!0),D.push(Pe.computeBBox())}),r=Math.max(1,r),e=Math.max(1,e),!isFinite(r))return!1;const U=this.size,j=this.oldSize;U[0]=r,U[1]=e,(U[0]!==j[0]||U[1]!==j[1])&&(j[0]=U[0],j[1]=U[1]);const{pages:q,maxPageHeight:J,maxPageWidth:me}=this.updatePagination(D,r,e);this.pages=q,this.maxPageSize=[me-t,J-i];const ye=this.pagination.currentPage;this.pages.length<1||!this.pages[ye]?this.visible=!1:(this.visible=!0,this.updatePositions(ye),this.update())}truncate(r,e,t,i,n,s){const a=r.split("");let c=!1;if(r.length>e&&(r=`${r.substring(0,e)}`,c=!0),Math.floor(i+Wn.getTextSize(r,n).width)>t){let p="";const g=this.getCharacterWidths(n);let m=i+g["..."];for(const y of a){if(g[y]||(g[y]=Wn.getTextSize(y,n).width),m+=g[y],m>t)break;p+=y}r=p,c=!0}return c?(r+="...",this.truncatedItems.add(s)):this.truncatedItems.delete(s),r}updatePagination(r,e,t){const i=this.getOrientation(),n=Math.min(this.paginationTrackingIndex,r.length);this.pagination.orientation=i,this.pagination.translationX=0,this.pagination.translationY=0;const{pages:s,maxPageHeight:o,maxPageWidth:a,paginationBBox:c,paginationVertical:u}=this.calculatePagination(r,e,t),p=s.findIndex(R=>R.endIndex>=n);this.pagination.currentPage=Ti(0,p,s.length-1);const{paddingX:g,paddingY:m}=this.item,_=o-m;let E=0,D=-c.y-this.item.marker.size/2;return u?D+=_+8:(E+=a-g-c.x+8,D+=(_-c.height)/2),this.pagination.translationX=E,this.pagination.translationY=D,this.pagination.update(),this.pagination.updateMarkers(),{maxPageHeight:o,maxPageWidth:a,pages:s}}calculatePagination(r,e,t){var i,n,s;const{paddingX:o,paddingY:a}=this.item,c=this.getOrientation(),u=["left","right"].includes(this.position);let p=this.pagination.computeBBox(),g=new Bt(0,0,0,0),m=[],y=0,b=0,_=0;const E=R=>{const{width:O,height:L}=R;return O===p.width&&L===p.height},D=void 0!==this.maxWidth||void 0!==this.maxHeight;do{if(_++>10){tt.warn("unable to find stable legend layout.");break}p=g;const L=aj({orientation:c,bboxes:r,maxHeight:t-(u?p.height:0),maxWidth:e-(u?0:p.width),itemPaddingY:a,itemPaddingX:o,forceResult:D});m=null!=(i=L?.pages)?i:[],y=null!=(n=L?.maxPageWidth)?n:0,b=null!=(s=L?.maxPageHeight)?s:0;const k=m.length;if(this.pagination.visible=k>1,this.pagination.totalPages=k,this.pagination.update(),g=this.pagination.computeBBox(),!this.pagination.visible)break}while(!E(g));return{maxPageWidth:y,maxPageHeight:b,pages:m,paginationBBox:p,paginationVertical:u}}updatePositions(r=0){const{item:{paddingY:e},itemSelection:t,pages:i}=this;if(i.length<1||!i[r])return;const{columns:n,startIndex:s,endIndex:o}=i[r];let a=0,c=0;const u=n.length,p=n[0].indices.length,g="horizontal"===this.getOrientation(),m=n[0].bboxes[0].height+e,y=[];t.each((b,_,E)=>{var D,R;if(E<s||E>o)return void(b.visible=!1);const O=E-s;let L=0,k=0;g?(L=O%u,k=Math.floor(O/u)):(L=Math.floor(O/p),k=O%p),b.visible=!0;const U=n[L];!U||(c=m*k,a=null!=(D=y[k])?D:0,y[k]=(null!=(R=y[k])?R:0)+U.columnWidth,b.translationX=Math.floor(a),b.translationY=Math.floor(c))})}updatePageNumber(r){const{pages:e}=this,{startIndex:t,endIndex:i}=e[r];this.paginationTrackingIndex=0===t?0:r===e.length-1?i:Math.floor((t+i)/2),this.pagination.update(),this.pagination.updateMarkers(),this.updatePositions(r),this.ctx.updateService.update(6)}update(){const{label:{color:r},marker:e,line:t,showSeriesStroke:i}=this.item;this.itemSelection.each((n,s)=>{var o,a;const c=s.marker;n.markerFill=c.fill,n.markerStroke=c.stroke,n.markerStrokeWidth=null!=(o=e.strokeWidth)?o:Math.min(2,c.strokeWidth),n.markerFillOpacity=c.fillOpacity,n.markerStrokeOpacity=c.strokeOpacity,n.opacity=s.enabled?1:.5,n.color=r;const{line:u}=s;i&&void 0!==u&&(n.lineStroke=u.stroke,n.lineStrokeOpacity=u.strokeOpacity,n.lineStrokeWidth=null!=(a=t.strokeWidth)?a:Math.min(2,u.strokeWidth),n.lineLineDash=u.lineDash)})}getDatumForPoint(r,e){const t=[],i={dist:1/0,datum:void 0};for(const s of this.group.children){if(!(s.visible&&s instanceof _s))continue;const o=s.computeBBox();if(o.grow(this.item.paddingX/2,"horizontal"),o.grow(this.item.paddingY/2,"vertical"),o.containsPoint(r,e))return s.datum;const a=r-o.x-this.item.paddingX/2,c=e-o.y-this.item.paddingY/2,u=Yt(a,2)+Yt(c,2);a>=0&&c>=0&&u<i.dist&&(i.dist=u,i.datum=s.datum),t.push(o)}if(Bt.merge(t).containsPoint(r,e))return i.datum}computePagedBBox(){const r=this.group.computeBBox();if(this.pages.length<=1)return r;const[e,t]=this.maxPageSize;return r.height=Math.max(t,r.height),r.width=Math.max(e,r.width),r}checkLegendClick(r){const{listeners:{legendItemClick:e},ctx:{chartService:t,highlightManager:i},item:{toggleSeriesVisible:n},preventHidingAll:s}=this,o=this.getDatumForPoint(r.offsetX,r.offsetY);if(!o)return;const{id:a,itemId:c,enabled:u}=o,p=t.series.find(m=>m.id===a);if(!p)return;r.consume();let g=u;n&&(g=!u,s&&!g&&t.series.flatMap(y=>y.getLegendData("category")).filter(y=>y.enabled).length<2&&(g=!0),this.ctx.chartEventManager.legendItemClick(p,c,g,o.legendItemName)),g?i.updateHighlight(this.id,{series:p,itemId:c,datum:void 0}):i.updateHighlight(this.id),this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),e?.({type:"click",enabled:g,itemId:c,seriesId:p.id})}checkLegendDoubleClick(r){var e;const{listeners:{legendItemDoubleClick:t},ctx:{chartService:i},item:{toggleSeriesVisible:n}}=this;if("integrated"===i.mode)return;const s=this.getDatumForPoint(r.offsetX,r.offsetY);if(!s)return;const{id:o,itemId:a,seriesId:c}=s,u=i.series.find(p=>p.id===o);if(u){if(r.consume(),n){const p=i.series.flatMap(y=>y.getLegendData("category")),g=p.filter(y=>y.enabled).length,m=p.find(y=>y.itemId===a&&y.seriesId===c);this.ctx.chartEventManager.legendItemDoubleClick(u,a,null!=(e=m?.enabled)&&e,g,m?.legendItemName)}this.ctx.updateService.update(2,{forceNodeDataRefresh:!0}),t?.({type:"dblclick",enabled:!0,itemId:a,seriesId:u.id})}}handleLegendMouseMove(r){var e;const{enabled:t,item:{toggleSeriesVisible:i},listeners:n}=this;if(!t)return;const{offsetX:s,offsetY:o}=r;r.consume();const a=this.getDatumForPoint(s,o);if(void 0===a)return this.ctx.cursorManager.updateCursor(this.id),void this.ctx.highlightManager.updateHighlight(this.id);const c=a?this.ctx.chartService.series.find(u=>u.id===a?.id):void 0;a&&this.truncatedItems.has(null!=(e=a.itemId)?e:a.id)?this.ctx.tooltipManager.updateTooltip(this.id,{offsetX:s,offsetY:o,lastPointerEvent:r,showArrow:!1,addCustomClass:!1},ND({content:this.getItemLabel(a)})):this.ctx.tooltipManager.removeTooltip(this.id),(i||null!=n.legendItemClick||null!=n.legendItemDoubleClick)&&this.ctx.cursorManager.updateCursor(this.id,"pointer"),a?.enabled&&c?this.ctx.highlightManager.updateHighlight(this.id,{series:c,itemId:a?.itemId,datum:void 0}):this.ctx.highlightManager.updateHighlight(this.id)}handleLegendMouseExit(r){this.ctx.cursorManager.updateCursor(this.id),this.ctx.highlightManager.updateHighlight(this.id),this.ctx.tooltipManager.removeTooltip(this.id)}positionLegend(r){const e=r.clone();if(!this.enabled||!this.data.length)return{shrinkRect:e};const[t,i]=this.calculateLegendDimensions(r);this.group.translationX=0,this.group.translationY=0,this.performLayout(t,i);const n=this.computePagedBBox(),s=()=>{switch(this.position){case"top":case"left":return 0;case"bottom":return r.height-n.height;default:return r.width-n.width}};if(this.visible){let o,a;switch(this.position){case"top":case"bottom":o=(r.width-n.width)/2,a=s(),e.shrink(n.height,this.position);break;default:o=s(),a=(r.height-n.height)/2,e.shrink(n.width,this.position)}this.group.translationX=Math.floor(-n.x+r.x+o),this.group.translationY=Math.floor(-n.y+r.y+a)}if(this.visible&&this.enabled&&this.data.length){e.shrink(this.spacing,this.position);const a=n.clone();a.x+=this.group.translationX,a.y+=this.group.translationY,this.ctx.tooltipManager.updateExclusiveRect(this.id,a)}else this.ctx.tooltipManager.updateExclusiveRect(this.id);return{shrinkRect:e}}calculateLegendDimensions(r){const{width:e,height:t}=r,i=e/t;let a,c;switch(this.position){case"top":case"bottom":const u=i<1?Math.min(.5,1/i*.2):.2;a=this.maxWidth?Math.min(this.maxWidth,e):e,c=this.maxHeight?Math.min(this.maxHeight,t):Math.round(t*u);break;default:const p=i>1?Math.min(.5,.25*i):.25;a=this.maxWidth?Math.min(this.maxWidth,e):Math.round(e*p),c=this.maxHeight?Math.min(this.maxHeight,t):t}return[a,c]}};ca.className="Legend",I([H(Ct)],ca.prototype,"pagination",2),I([H(Ct)],ca.prototype,"item",2),I([H(Ct)],ca.prototype,"listeners",2),I([w_(r=>r.updateGroupVisibility()),H(Ot)],ca.prototype,"enabled",2),I([H(AF)],ca.prototype,"position",2),I([H(qe,{optional:!0})],ca.prototype,"maxWidth",2),I([H(qe,{optional:!0})],ca.prototype,"maxHeight",2),I([H(Ot,{optional:!0})],ca.prototype,"reverseOrder",2),I([H(as(["horizontal","vertical"],"an orientation"),{optional:!0})],ca.prototype,"orientation",2),I([H(Ot,{optional:!0})],ca.prototype,"preventHidingAll",2),I([H(qe)],ca.prototype,"spacing",2);var Sj=["top","right","bottom","left"],RV=["category","grouped-category","number","log","time"],Ap="ag-chart-overlay",dN="ag-chart-dark-overlay",F_=class{constructor(r,e,t){this.className=r,this.parentElement=e,this.animationManager=t,this.darkTheme=!1}show(r){var e,t;this.element||(this.element=this.createElement("div"),this.element.classList.add(this.className,Ap)),this.element.classList.toggle(dN,this.darkTheme);const{element:i}=this;if(i.style.position="absolute",i.style.left=`${r.x}px`,i.style.top=`${r.y}px`,i.style.width=`${r.width}px`,i.style.height=`${r.height}px`,this.renderer)i.innerHTML=this.renderer();else{const n=this.createElement("div");n.style.alignItems="center",n.style.boxSizing="border-box",n.style.display="flex",n.style.justifyContent="center",n.style.margin="8px",n.style.height="100%",n.style.font="12px Verdana, sans-serif",n.innerText=null!=(e=this.text)?e:"No data to display",i.replaceChildren(n),this.animationManager.animate({from:0,to:1,phase:"add",id:"overlay",groupId:"opacity",onUpdate(s){i.style.opacity=String(s)},onStop(){i.style.opacity="1"}})}null==(t=this.parentElement)||t.append(i)}hide(){if(!this.element)return;const r=this.element;this.animationManager.animate({from:1,to:0,phase:"remove",id:"overlay",groupId:"opacity",onUpdate(e){r.style.opacity=String(e)},onStop(){r.remove()}}),this.element=void 0}createElement(r,e){return this.parentElement.ownerDocument.createElement(r,e)}};I([H(Zl,{optional:!0})],F_.prototype,"renderer",2),I([H(et,{optional:!0})],F_.prototype,"text",2),I([H(Ot)],F_.prototype,"darkTheme",2);var Tj=`\n.${Ap} {\n    color: #181d1f;\n}\n\n.${Ap}.${dN} {\n    color: #ffffff;\n}\n\n.${Ap}--loading {\n    color: rgb(140, 140, 140); /* DEFAULT_MUTED_LABEL_COLOUR */\n}\n\n.${Ap}__loading-background {\n    background: white; /* DEFAULT_BACKGROUND_FILL */\n}\n\n.${Ap}.${dN} .${Ap}__loading-background {\n    background: #192232; /* DEFAULT_DARK_BACKGROUND_FILL */\n}\n`,AV=class JL{constructor(e,t){this.loading=new F_("ag-chart-loading-overlay",e,t),this.loading.text="Loading data...",this.loading.renderer=()=>this.renderLoadingSpinner(e,t),this.noData=new F_("ag-chart-no-data-overlay",e,t),this.noVisibleSeries=new F_("ag-chart-no-visible-series",e,t),this.noVisibleSeries.text="No visible series",JL.overlayDocuments.indexOf(e.ownerDocument)<0&&(gM(e.ownerDocument,Tj),JL.overlayDocuments.push(e.ownerDocument))}destroy(){this.loading.hide(),this.noData.hide(),this.noVisibleSeries.hide()}renderLoadingSpinner(e,t){var i;const n=this.createElement(e,"div");n.className=`${Ap}--loading`,n.style.display="flex",n.style.alignItems="center",n.style.justifyContent="center",n.style.flexDirection="column",n.style.height="100%",n.style.boxSizing="border-box",n.style.font="13px Verdana, sans-serif",n.style.userSelect="none",n.style.animation=`ag-charts-loading ${wF.animationDuration*t.defaultDuration}ms linear 50ms both`;const s=this.createElement(n,"span");s.style.width="45px",s.style.height="40px",s.style.backgroundImage=`${["linear-gradient(#0000 calc(1 * 100% / 6), #ccc 0 calc(3 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(2 * 100% / 6), #ccc 0 calc(4 * 100% / 6), #0000 0), ","linear-gradient(#0000 calc(3 * 100% / 6), #ccc 0 calc(5 * 100% / 6), #0000 0)"].join("")}`,s.style.backgroundSize="10px 400%",s.style.backgroundRepeat="no-repeat",s.style.animation="ag-charts-loading-matrix 1s infinite linear";const o=this.createElement(n,"p");o.style.marginTop="1em",o.innerText=null!=(i=this.loading.text)?i:"Loading data...";const a=this.createElement(e,"div");a.className=`${Ap}__loading-background`,a.style.position="absolute",a.style.top="0",a.style.right="0",a.style.bottom="0",a.style.left="0",a.style.opacity="0.5",a.style.zIndex="-1";const c=this.createElement(n,"style");return c.innerText=["@keyframes ag-charts-loading { from { opacity: 0 } to { opacity: 1 } }","@keyframes ag-charts-loading-matrix {","0% { background-position: 0% 0%, 50% 0%, 100% 0%; }","100% { background-position: 0% 100%, 50% 100%, 100% 100%; }","}"].join(" "),n.replaceChildren(c,s,o,a),n.outerHTML}createElement(e,t,i){return e.ownerDocument.createElement(t,i)}};AV.overlayDocuments=[];var Rj=AV;function EM(r,e=[0,0]){for(const t of r)"number"==typeof t&&(t<0&&(e[0]+=t),t>0&&(e[1]+=t));return e}function Aj(r,e,t){return{id:e,scopes:[r.id],matchGroupIds:[t],type:"aggregate",aggregateFunction:n=>EM(n)}}function OV(r,e,t){return{id:e,scopes:[r.id],type:"aggregate",matchGroupIds:t?[t]:void 0,aggregateFunction:i=>EM(i),groupAggregateFunction:(i,n=[0,0])=>{var s,o;return n[0]+=null!=(s=i?.[0])?s:0,n[1]+=null!=(o=i?.[1])?o:0,n}}}function MV(r,e,t){return{id:e,scopes:[r.id],matchGroupIds:[t],type:"aggregate",aggregateFunction:n=>jD(n)}}function Oj(r,e){return{id:e,scopes:[r.id],type:"aggregate",aggregateFunction:()=>[0,1]}}function uN(r,e){return{id:e,scopes:[r.id],type:"aggregate",aggregateFunction:()=>[0,1],groupAggregateFunction:(t,i=[0,0])=>{var n,s;return i[0]+=null!=(n=t?.[0])?n:0,i[1]+=null!=(s=t?.[1])?s:0,i}}}function Mj(r,e,t){return{id:e,scopes:[r.id],matchGroupIds:[t],type:"aggregate",aggregateFunction:n=>EM(n).map(s=>s/n.length)}}function xV(r,e,t){return{id:e,scopes:[r.id],matchGroupIds:t?[t]:void 0,type:"aggregate",aggregateFunction:n=>EM(n),groupAggregateFunction:(n,s=[0,0,-1])=>{var o,a;return s[0]+=null!=(o=n?.[0])?o:0,s[1]+=null!=(a=n?.[1])?a:0,s[2]++,s},finalFunction:(n=[0,0,0])=>{const s=n[0]+n[1];return s>=0?[0,s/n[2]]:[s/n[2],0]}}}function hN(r,e,t,i){const n={id:e,scopes:[r.id],matchGroupIds:i?[i]:void 0,type:"aggregate",aggregateFunction:(s,o=[])=>{const a=o[1]-o[0];return t.aggregateFunction(s).map(c=>c/a)}};return t.groupAggregateFunction&&(n.groupAggregateFunction=t.groupAggregateFunction),n}function PV(r){return()=>{let e=0;return t=>Ei(t)?(e+=r?Math.max(0,t):t,e):t}}function IV(){return()=>{let r=0;return e=>{if(!Ei(e))return e;const t=r;return r+=e,t}}}var $D=new Map;function DM(r,e){var t,i,n;const s=JSON.stringify(r,null,0);return $D.has(e)||$D.set(e,new Map),null!=(t=$D.get(e))&&t.has(s)||null==(i=$D.get(e))||i.set(s,e(r)),null==(n=$D.get(e))?void 0:n.get(s)}var pN={type:"reducer",property:"smallestKeyInterval",initialValue:1/0,reducer:()=>{let r=NaN;return(e=1/0,t)=>{const i=t.keys[0],n=Math.abs(i-r);return r=i,!isNaN(n)&&n>0&&n<e?n:e}}},xj={type:"processor",property:"aggValuesExtent",calculate:r=>{var e,t,i,n;const s=[...null!=(t=null==(e=r.domain.aggValues)?void 0:e[0])?t:[0,0]];for(const[o,a]of null!=(n=null==(i=r.domain.aggValues)?void 0:i.slice(1))?n:[])o<s[0]&&(s[0]=o),a>s[1]&&(s[1]=a);return s}},FV={type:"processor",property:"sortedGroupDomain",calculate:({domain:{groups:r}})=>{if(null!=r)return[...r].sort((e,t)=>{for(let i=0;i<e.length;i++){const n=e[i]-t[i];if(0!==n)return n}return 0})}};function Pj({normaliseTo:r,mode:e}){const t=(i,n)=>{const s=i*r/n;return s>=0?Math.min(r,s):Math.max(-r,s)};return()=>()=>(i,n)=>{const s=[0,0];for(const a of n){const c=i[a],u=c<0?0:1;"sum"===e?s[u]+=c:s[u]=0===u?Math.min(s[u],c):Math.max(s[u],c)}const o=Math.max(Math.abs(s[0]),s[1]);for(const a of n)i[a]=t(i[a],o)}}function TM(r,e,t,i="sum"){return{scopes:[r.id],type:"group-value-processor",matchGroupIds:e,adjust:DM({normaliseTo:t,mode:i},Pj)}}function Ij({normaliseTo:r,zeroDomain:e,rangeMin:t,rangeMax:i}){const n=r[1]-r[0],s=(o,a,c)=>{const u=r[0]+(o-a)/c*n;return 0===c?e:u>=r[1]?r[1]:u<r[0]?r[0]:u};return()=>(o,a)=>{let[c,u]=o.domain.values[a];null!=t&&(c=t),null!=i&&(u=i);const p=u-c;o.domain.values[a]=[r[0],r[1]];for(const g of o.data){let m=g.values;"ungrouped"===o.type&&(m=[m]);for(const y of m)y[a]=s(y[a],c,p)}}}function KD(r,e,t,i,n,s){return{scopes:[r.id],type:"property-value-processor",property:e,adjust:DM({normaliseTo:t,rangeMin:n,rangeMax:s,zeroDomain:i},Ij)}}function N_(r,e=[]){return{type:"processor",scopes:[r.id],property:"animationValidation",calculate(t){var i;const{keys:n,values:s}=t.defs,{input:o,data:a}=t;let c=!0,u=!0;const p=[];for(let m=0;m<s.length;m++)null==(i=s[m].scopes)||!i.some(y=>y===r.id)||!e.some(y=>s[m].id===y)||p.push([m,s[m]]);const g=(m,y,b)=>{var _;if("category"===y.valueType){const D=t.domain[b][m];return void(c&&(c=D.length===o.count))}let E=null==(_=a[0])?void 0:_[b][m];for(let D=1;(c||u)&&D<a.length;D++){const R=a[D][b][m];u&&(u=E<=R),c&&(c=E!==R),E=R}};for(let m=0;(c||u)&&m<n.length;m++)g(m,n[m],"keys");for(let m=0;(c||u)&&m<p.length;m++){const[y,b]=p[m];g(y,b,"values")}return{uniqueKeys:c,orderedKeys:u}}}}function Fj({mode:r,separateNegative:e}){return()=>()=>(t,i)=>{const n=[0,0];for(const s of i){const o=t[s],a=TD(o)&&e?0:1;!Ei(o)||("normal"===r&&(n[a]+=o),t[s]=n[a],"trailing"===r&&(n[a]+=o))}}}function Nj({mode:r,sum:e}){return()=>{const t=[];let i=!0;return()=>(n,s)=>{let o=0;for(const a of s){const c=n[a],u=i&&"current"===e?0:t[a];t[a]=c;const p="current"===e?c:u;Ei(c)&&Ei(u)?("normal"===r&&(o+=p),n[a]=o,"trailing"===r&&(o+=p)):n[a]=o}i=!1}}}function NV(r,e,t,i,n=!1){let s;return s=t.startsWith("window")?DM({mode:t.endsWith("-trailing")?"trailing":"normal",sum:i},Nj):DM({mode:t,separateNegative:n},Fj),{scopes:[r.id],type:"group-value-processor",matchGroupIds:[e],adjust:s}}function JC(r,e=!0){return{type:"processor",property:"diff",calculate:t=>{const i={changed:!1,moved:[],added:[],updated:[],removed:[],addedIndices:[],updatedIndices:[],removedIndices:[]},n=new Map,s=new Map,o=new Map,a=new Map,c=new Map,u=new Map,p=new Map;for(let g=0;g<Math.max(r.data.length,t.data.length);g++){const m=r.data[g],y=t.data[g],b=m?Jg(m.keys):"",_=y?Jg(y.keys):"";b!==_?(a.has(_)?((e||!DD(a.get(_).values,y.values))&&(o.set(_,y),u.set(_,g),n.set(_,y)),a.delete(_),p.delete(_)):y&&(s.set(_,y),c.set(_,g)),s.has(b)?((e||!DD(s.get(b).values,m.values))&&(o.set(b,m),u.set(b,g),n.set(b,m)),s.delete(b),c.delete(b)):m&&(o.delete(b),u.delete(b),a.set(b,m),p.set(b,g))):DD(m.values,y.values)||(o.set(_,y),u.set(_,g))}return i.added=Array.from(s.keys()),i.updated=Array.from(o.keys()),i.removed=Array.from(a.keys()),i.moved=Array.from(n.keys()),i.addedIndices=Array.from(c.values()),i.updatedIndices=Array.from(u.values()),i.removedIndices=Array.from(p.values()),i.changed=i.added.length>0||i.updated.length>0||i.removed.length>0,i}}}function Jg(r){return Dn(r)?r.map(e=>E_(e)).join("___"):E_(r)}var LV=(r=>(r[r.EXACT_SHAPE_MATCH=0]="EXACT_SHAPE_MATCH",r[r.NEAREST_BY_MAIN_AXIS_FIRST=1]="NEAREST_BY_MAIN_AXIS_FIRST",r[r.NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST=2]="NEAREST_BY_MAIN_CATEGORY_AXIS_FIRST",r[r.NEAREST_NODE=3]="NEAREST_NODE",r))(LV||{});function fN(r){return null!=kD(r,!0)}function kV(r){return null!=kD(r,!1)}function Mr(r,e,t,i={}){return Re({scopes:[r.id],property:e,type:"key",valueType:t?"range":"category",validation:t?fN:kV},i)}function Ki(r,e,t,i={}){return Re({scopes:[r.id],property:e,type:"value",valueType:t?"range":"category",validation:t?fN:kV},i)}function gN(r,e,t={}){const i=t,{min:n=-1/0,max:s=1/0}=i,o=rs(i,["min","max"]);return Re({scopes:[r.id],type:"value",property:e,valueType:"range",validation:fN,processor:()=>a=>Ei(a)?Ti(n,a,s):a},o)}function Lj(r,e,t,i={}){return nt(Re({},Ki(r,e,t,i)),{processor:()=>{let r=0;return e=>{const t=r;return r=e,t}}})}function GV(){return()=>{let r=0;return e=>{const t=r;return r=e,t}}}function mN(r,e,t,i={}){const n=i,{onlyPositive:s}=n,o=rs(n,["onlyPositive"]);return nt(Re({},Ki(r,e,t,o)),{processor:PV(s)})}function kj(r,e,t,i={}){return nt(Re({},Ki(r,e,t,i)),{processor:IV()})}function Qg(r,e,t,i,n="current",s){return[Ki(r,e,t,s),NV(r,s.groupId,i,n,s.separateNegative),...null!=s.rangeId?[MV(r,s.rangeId,s.groupId)]:[]]}var YD=class{constructor(r,e,{datum:t},i){this.type=r,this.event=e,this.datum=t,this.seriesId=i.id}},vN=class{constructor(r,e,t){this.series=r,this.seriesGrouping=e,this.oldGrouping=t,this.type="groupingChanged"}},L_=class extends eV{constructor(r){super(),this.destroyFns=[],this.seriesGrouping=void 0,this.NodeClickEvent=YD,this.internalId=Ru(this),this.rootGroup=new vt({name:"seriesRoot",isVirtual:!0}),this.axes={x:void 0,y:void 0},this.directions=["x","y"],this.nodeDataRefresh=!0,this.moduleMap=new DG,this._declarationOrder=-1,this.seriesListeners=new A_;const{moduleCtx:e,useLabelLayer:t=!1,pickModes:i=[1],directionKeys:n={},directionNames:s={},contentGroupVirtual:o=!0,canHaveAxes:a=!1}=r;this.ctx=e,this.directionKeys=n,this.directionNames=s,this.canHaveAxes=a,this.contentGroup=this.rootGroup.appendChild(new vt({name:`${this.internalId}-content`,layer:!o,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data")})),this.highlightGroup=new vt({name:`${this.internalId}-highlight`,layer:!o,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("highlight")}),this.highlightNode=this.highlightGroup.appendChild(new vt({name:"highlightNode",zIndex:0})),this.highlightLabel=this.highlightGroup.appendChild(new vt({name:"highlightLabel",zIndex:10})),this.pickModes=i,this.labelGroup=this.rootGroup.appendChild(new vt({name:`${this.internalId}-series-labels`,layer:t,zIndex:7})),this.annotationGroup=new vt({name:`${this.id}-annotation`,layer:!o,isVirtual:o,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("annotation")})}get id(){var r,e;return null!=(e=null==(r=this.properties)?void 0:r.id)?e:this.internalId}get type(){var r;return null!=(r=this.constructor.type)?r:""}set data(r){this._data=r,this.onDataChange()}get data(){var r;return null!=(r=this._data)?r:this._chartData}set visible(r){this.properties.visible=r,this.visibleChanged()}get visible(){return this.properties.visible}onDataChange(){this.nodeDataRefresh=!0}setChartData(r){this._chartData=r,this.data===r&&this.onDataChange()}onSeriesGroupingChange(r,e){const{internalId:t,type:i,visible:n}=this;r&&this.ctx.seriesStateManager.deregisterSeries({id:t,type:i}),e&&this.ctx.seriesStateManager.registerSeries({id:t,type:i,visible:n,seriesGrouping:e}),this.fireEvent(new vN(this,e,r))}getBandScalePadding(){return{inner:1,outer:0}}getGroupZIndexSubOrder(r,e=0){let t=0;switch(r){case"data":case"paths":break;case"labels":t+=2e4;break;case"marker":t+=1e4;break;case"highlight":e+=15e3;break;case"annotation":t+=15e3}return[()=>this._declarationOrder+t,e]}addListener(r,e){return this.seriesListeners.addListener(r,e)}dispatch(r,e){this.seriesListeners.dispatch(r,e)}addChartEventListeners(){}destroy(){this.destroyFns.forEach(r=>r()),this.destroyFns=[],this.ctx.seriesStateManager.deregisterSeries(this)}getDirectionValues(r,e){const i=e?.[this.resolveKeyDirection(r)],n=[];if(!i)return n;const s=(...o)=>{for(const a of o)Array.isArray(a)?s(...a):"object"==typeof a?s(...Object.values(a)):n.push(a)};return s(...i.map(o=>this.properties[o])),n}getKeys(r){return this.getDirectionValues(r,this.directionKeys)}getNames(r){return this.getDirectionValues(r,this.directionNames)}resolveKeyDirection(r){return r}getDomain(r){const e=this.getSeriesDomain(r),t=this.moduleMap.mapValues(i=>i.getDomain(r));return e.concat(t.flat())}markNodeDataDirty(){this.nodeDataRefresh=!0}visibleChanged(){this.ctx.seriesStateManager.registerSeries(this)}getOpacity(){const{dimOpacity:e=1,enabled:t=!0}=this.properties.highlightStyle.series;if(!t||1===e)return 1;switch(this.isItemIdHighlighted()){case 0:case 1:return 1;default:return e}}getStrokeWidth(r){const{strokeWidth:e,enabled:t=!0}=this.properties.highlightStyle.series;if(!t||void 0===e)return r;switch(this.isItemIdHighlighted()){case 1:return e;case 0:case 2:return r}}isItemIdHighlighted(){var r,e;const{series:t}=null!=(e=null==(r=this.ctx.highlightManager)?void 0:r.getActiveHighlight())?e:{};return null==t?0:t!==this?2:1}getModuleTooltipParams(){return this.moduleMap.mapValues(e=>e.getTooltipParams()).reduce((e,t)=>Re(Re({},t),e),{})}pickNode(r,e){const{pickModes:t,visible:i,rootGroup:n}=this;if(i&&n.visible)for(const s of t){if(e&&!e.includes(s))continue;let o;switch(s){case 0:o=this.pickNodeExactShape(r);break;case 1:case 2:o=this.pickNodeMainAxisFirst(r,2===s);break;case 3:o=this.pickNodeClosestDatum(r)}if(o)return{pickMode:s,match:o.datum,distance:o.distance}}}pickNodeExactShape(r){const e=this.contentGroup.pickNode(r.x,r.y);return e&&{datum:e.datum,distance:0}}pickNodeClosestDatum(r){throw new Error("AG Charts - Series.pickNodeClosestDatum() not implemented")}pickNodeMainAxisFirst(r,e){throw new Error("AG Charts - Series.pickNodeMainAxisFirst() not implemented")}fireNodeClickEvent(r,e){this.fireEvent(new this.NodeClickEvent("nodeClick",r,e,this))}fireNodeDoubleClickEvent(r,e){this.fireEvent(new this.NodeClickEvent("nodeDoubleClick",r,e,this))}toggleSeriesItem(r,e){this.visible=e,this.nodeDataRefresh=!0,this.dispatch("visibility-changed",{itemId:r,enabled:e})}isEnabled(){return this.visible}getModuleMap(){return this.moduleMap}createModuleContext(){return nt(Re({},this.ctx),{series:this})}getLabelText(r,e,t=String){var i;return r.formatter&&null!=(i=this.ctx.callbackCache.call(r.formatter,Re({seriesId:this.id},e)))?i:t(e.value)}getMarkerStyle(r,e,t=r.getStyle()){var i,n;const o=ri({size:null!=(n=null==(i=e.datum.point)?void 0:i.size)?n:0},t);return r.formatter?ri(this.ctx.callbackCache.call(r.formatter,nt(Re(Re({seriesId:this.id},o),e),{datum:e.datum.datum})),o):o}updateMarkerStyle(r,e,t,i=e.getStyle(),{applyTranslation:n=!0}={}){const{point:s}=t.datum,o=this.getMarkerStyle(e,t,i),a=this.visible&&o.size>0&&s&&!isNaN(s.x)&&!isNaN(s.y);r.setProperties(n?nt(Re({visible:a},o),{translationX:s?.x,translationY:s?.y}):Re({visible:a},o)),"function"==typeof e.shape&&!r.dirtyPath&&(r.path.clear({trackChanges:!0}),r.updatePath(),r.checkPathDirty())}getMinRect(){}get nodeDataDependencies(){var r;return null!=(r=this._nodeDataDependencies)?r:{seriesRectWidth:NaN,seriesRectHeight:NaN}}checkResize(r){const{width:e,height:t}=r??{width:NaN,height:NaN},i=r?{seriesRectWidth:e,seriesRectHeight:t}:void 0,n=null!=Ar(this.nodeDataDependencies,i);return n&&(this._nodeDataDependencies=i,this.markNodeDataDirty()),n}};L_.highlightedZIndex=1e12,I([Bs({changeValue:function(r,e){this.onSeriesGroupingChange(e,r)}})],L_.prototype,"seriesGrouping",2);var Bj=class{constructor(r,e){this.chartLike=r,this.layoutService=e,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",t=>this.layoutComplete(t)),this.layoutService.addListener("start-layout",t=>this.positionPadding(t.shrinkRect)),this.layoutService.addListener("start-layout",t=>this.positionCaptions(t.shrinkRect)))}destroy(){this.destroyFns.forEach(r=>r())}layoutComplete({clipSeries:r,series:{paddedRect:e}}){const{seriesArea:t,seriesRoot:i}=this.chartLike;t.clip||r?i.setClipRectInGroupCoordinateSpace(e):i.setClipRectInGroupCoordinateSpace()}positionPadding(r){const{padding:e}=this.chartLike;return r.shrink(e.left,"left"),r.shrink(e.top,"top"),r.shrink(e.right,"right"),r.shrink(e.bottom,"bottom"),{shrinkRect:r}}positionCaptions(r){var e,t,i,n;const{title:s,subtitle:o,footnote:a}=this.chartLike,c=r.clone(),u=y=>{var b;const E=null!=(b=y.lineHeight)?b:y.fontSize*Ri.defaultLineHeightRatio,D=r.width,R=Math.max(E,r.height/10);y.computeTextWrap(D,R)},p=y=>"left"===y?c.x:"right"===y?c.x+c.width:("center"!==y&&tt.error(`invalid textAlign value: ${y}`),c.x+c.width/2),g=(y,b)=>{const _=c.y;y.node.x=p(y.textAlign),y.node.y=_,y.node.textBaseline="top",u(y);const E=y.node.computeBBox(),D=Math.ceil(E.y-_+E.height+b);c.shrink(D,"top")};if(o&&(o.node.visible=null!=(e=o.enabled)&&e),s&&(s.node.visible=s.enabled,s.node.visible)){const y=o?.node.visible?gn.SMALL_PADDING:gn.LARGE_PADDING;g(s,null!=(t=s.spacing)?t:y)}return o&&o.node.visible&&g(o,null!=(i=o.spacing)?i:0),a&&(a.node.visible=a.enabled,a.node.visible&&((y,b)=>{const _=c.y+c.height;y.node.x=p(y.textAlign),y.node.y=_,y.node.textBaseline="bottom",u(y);const E=y.node.computeBBox(),D=Math.ceil(_-E.y+b);c.shrink(D,"bottom")})(a,null!=(n=a.spacing)?n:0)),{shrinkRect:c}}},Hj=class{constructor(r,e,t,i){this.chart=r,this.dataService=e,this.updateService=t,this.zoomManager=i,this.dirtyZoom=!1,this.dirtyDataSource=!1,this.lastAxisZooms=new Map,this.destroyFns=[],this.destroyFns.push(this.dataService.addListener("data-source-change",()=>this.onDataSourceChange()),this.dataService.addListener("data-load",()=>this.onDataLoad()),this.dataService.addListener("data-error",()=>this.onDataError()),this.updateService.addListener("update-complete",()=>this.onUpdateComplete()),this.zoomManager.addListener("zoom-change",()=>this.onZoomChange()))}destroy(){this.destroyFns.forEach(r=>r())}onDataLoad(){this.updateService.update(1)}onDataError(){this.updateService.update(3)}onDataSourceChange(){this.dirtyDataSource=!0}onUpdateComplete(){!this.dirtyZoom&&!this.dirtyDataSource||this.updateWindow()}onZoomChange(){this.dirtyZoom=!0}updateWindow(){return Be(this,null,function*(){if(!this.dataService.isLazy())return;const r=this.getValidAxis();let e,t=!0;if(r){const i=this.zoomManager.getAxisZoom(r.id);e=this.getAxisWindow(r,i),t=this.shouldRefresh(r,i)}this.dirtyZoom=!1,this.dirtyDataSource=!1,t&&this.dataService.load({windowStart:e?.min,windowEnd:e?.max})})}getValidAxis(){return this.chart.axes.find(r=>"time"===r.type)}shouldRefresh(r,e){if(this.dirtyDataSource)return!0;if(!this.dirtyZoom)return!1;const t=this.lastAxisZooms.get(r.id);return!(t&&e.min===t.min&&e.max===t.max||(this.lastAxisZooms.set(r.id,e),0))}getAxisWindow(r,e){var t,i;const n=null==(i=(t=r.scale).getDomain)?void 0:i.call(t);if(!e||!n||0===n.length||isNaN(Number(n[0])))return;const s=Number(n[1])-Number(n[0]);return{min:new Date(Number(n[0])+s*e.min),max:new Date(Number(n[0])+s*e.max)}}},Uj=class{constructor(r,e,t,i){this.chartLike=r,this.overlays=e,this.dataService=t,this.layoutService=i,this.destroyFns=[],this.destroyFns.push(this.layoutService.addListener("layout-complete",n=>this.onLayoutComplete(n)))}destroy(){this.destroyFns.forEach(r=>r())}onLayoutComplete({series:{rect:r}}){const e=this.dataService.isLoading(),t=this.chartLike.series.some(n=>{var s;return null==(s=n.data)?void 0:s.length}),i=this.chartLike.series.some(n=>n.visible);this.toggleOverlay(this.overlays.loading,r,e),this.toggleOverlay(this.overlays.noData,r,!e&&!t),this.toggleOverlay(this.overlays.noVisibleSeries,r,t&&!i)}toggleOverlay(r,e,t){t&&e?r.show(e):r.hide()}},BV=class extends A_{constructor(r){super(),this.updateCallback=r}update(r=0,e){this.updateCallback(r,e)}dispatchUpdateComplete(r){this.dispatch("update-complete",{type:"update-complete",minRect:r})}},sd=Un.create(!0,"opts"),CN=class extends Di{constructor(){super(...arguments),this.padding=new qg(0)}};I([H(Ot,{optional:!0})],CN.prototype,"clip",2),I([H(Ct)],CN.prototype,"padding",2);var ws=class oU extends eV{constructor(e,t){var i;super(),this.id=Ru(this),this.seriesRoot=new vt({name:`${this.id}-Series-root`}),this.debug=Un.create(),this.extraDebugStats={},this.data=[],this._firstAutoSize=!0,this.padding=new qg(20),this.seriesArea=new CN,this.mode="standalone",this.destroyed=!1,this._skipSync=!1,this._destroyFns=[],this.chartAnimationPhase="initial",this.highlightManager=new tN,this.syncManager=new rj(this),this.zoomManager=new yV,this.modules=new Map,this.legends=new Map,this.processors=[],this.processedOptions={},this.userOptions={},this.queuedUserOptions=[],this._pendingFactoryUpdatesCount=0,this._performUpdateNoRenderCount=0,this._performUpdateSkipAnimations=!1,this.performUpdateType=7,this.updateShortcutCount=0,this.seriesToUpdate=new Set,this.updateMutex=new class{constructor(){this.available=!0,this.acquireQueue=[]}acquire(r){return new Promise(e=>{this.acquireQueue.push([r,e]),this.available&&this.dispatchNext()})}acquireImmediately(r){return Be(this,null,function*(){return!!this.available&&(yield this.acquire(r),!0)})}waitForClearAcquireQueue(){return Be(this,null,function*(){return this.acquire(()=>Be(this,null,function*(){}))})}dispatchNext(){return Be(this,null,function*(){var r,e;this.available=!1;let[t,i]=null!=(r=this.acquireQueue.shift())?r:[];for(;t;){try{yield t(),i?.()}catch(n){tt.error("mutex callback error",n),i?.()}[t,i]=null!=(e=this.acquireQueue.shift())?e:[]}this.available=!0})}},this.updateRequestors={},this.performUpdateTrigger=function j3(r){return tV((e,t=0)=>setTimeout(e,t),r)}(g=>Be(this,[g],function*({count:m}){this.destroyed||this.updateMutex.acquire(()=>Be(this,null,function*(){try{yield this.performUpdate(m)}catch(y){tt.error("update error",y)}}))})),this.axes=[],this.series=[],this.lastInteractionEvent=void 0,this.pointerScheduler=function W3(r){return tV((e,t)=>requestAnimationFrame(e),r)}(()=>{this.lastInteractionEvent&&(this.handlePointer(this.lastInteractionEvent,!1),this.lastInteractionEvent=void 0)}),this.onSeriesNodeClick=g=>{const m=nt(Re({},g),{type:"seriesNodeClick"});Object.defineProperty(m,"series",{enumerable:!1,get:()=>g.series}),this.fireEvent(m)},this.onSeriesNodeDoubleClick=g=>{const m=nt(Re({},g),{type:"seriesNodeDoubleClick"});this.fireEvent(m)},this.seriesGroupingChanged=g=>{if(!(g instanceof vN))return;const{series:m,seriesGrouping:y,oldGrouping:b}=g;null!=m.rootGroup.parent&&this.seriesLayerManager.changeGroup({internalId:m.internalId,type:m.type,rootGroup:m.rootGroup,highlightGroup:m.highlightGroup,annotationGroup:m.annotationGroup,getGroupZIndexSubOrder:_=>m.getGroupZIndexSubOrder(_),seriesGrouping:y,oldGrouping:b})},this.chartOptions=e;const{window:n,document:s}=e.specialOverrides,o=t?.scene,a=null!=(i=t?.element)?i:s.createElement("div"),c=t?.container,u=new vt({name:"root"});u.visible=!1,u.append(this.seriesRoot),this.axisGridGroup=new vt({name:"Axes-Grids",layer:!0,zIndex:1}),u.appendChild(this.axisGridGroup),this.axisGroup=new vt({name:"Axes",layer:!0,zIndex:2}),u.appendChild(this.axisGroup),this.element=a,a.classList.add("ag-chart-wrapper"),a.style.position="relative",this.scene=o??new ZF(this.chartOptions.specialOverrides),this.scene.root=u,this.scene.container=a,this.autoSize=!0,this.chartEventManager=new pV,this.contextMenuRegistry=new fV,this.cursorManager=new gV(a),this.highlightManager=new tN,this.interactionManager=new uV(a,s,n),this.regionManager=new class{constructor(r){this.interactionManager=r,this.eventHandler=e=>this.processEvent(e),this.regions=new ij,this.destroyFns=[],lV.forEach(e=>this.destroyFns.push(r.addListener(e,this.eventHandler,15)))}destroy(){this.destroyFns.forEach(r=>r()),this.currentRegion=void 0;for(const r of this.regions)r.listeners.destroy();this.regions.clear()}pushRegion(r,e){const t={name:r,listeners:new nj};return this.regions.add(t,e),t}addRegion(r,e){const t=this.pushRegion(r,e),{interactionManager:i}=this;return new class n{addListener(o,a,c=8){return t.listeners.addListener(o,u=>{u.consumed||i.getState()&c&&a(u)})}}}processEvent(r){const{currentRegion:e}=this,t=this.pickRegion(r.offsetX,r.offsetY);void 0!==e&&t?.name!==e.name&&e?.listeners.dispatch("leave",nt(Re({},r),{type:"leave"})),void 0!==t&&(()=>Be(this,null,function*(){return t.listeners.dispatch(r.type,r)}))().catch(n=>tt.errorOnce(n)),this.currentRegion=t}pickRegion(r,e){const t=this.regions.find(r,e);return t.length>0?t[0]:void 0}}(this.interactionManager),this.gestureDetector=new vV(a),this.layoutService=new SV,this.updateService=new BV((g=0,m)=>this.update(g,m)),this.seriesStateManager=new class{constructor(){this.groups={}}registerSeries({id:r,seriesGrouping:e,visible:t,type:i}){var n;!e||(null!=(n=this.groups)[i]||(n[i]={}),this.groups[i][r]={grouping:e,visible:t})}deregisterSeries({id:r,type:e}){this.groups[e]&&delete this.groups[e][r],this.groups[e]&&0===Object.keys(this.groups[e]).length&&delete this.groups[e]}getVisiblePeerGroupIndex({type:r,seriesGrouping:e,visible:t}){var i;if(!e)return{visibleGroupCount:t?1:0,visibleSameStackCount:t?1:0,index:0};const n=new Set,s=new Set;for(const[a,c]of Object.entries(null!=(i=this.groups[r])?i:{}))!c.visible||(n.add(c.grouping.groupIndex),c.grouping.groupIndex===e.groupIndex&&s.add(c.grouping.stackIndex));const o=[...n.values()];return o.sort((a,c)=>a-c),{visibleGroupCount:o.length,visibleSameStackCount:s.size,index:o.indexOf(e.groupIndex)}}},this.seriesLayerManager=new class{constructor(r){this.groups={},this.series={},this.expectedSeriesCount=1,this.mode="normal",this.rootGroup=r}setSeriesCount(r){this.expectedSeriesCount=r}requestGroup(r){var e,i,n;const{internalId:s,type:o,rootGroup:a,highlightGroup:c,annotationGroup:u,seriesGrouping:p}=r,{groupIndex:g=s}=p??{};if(null!=this.series[s])throw new Error(`AG Charts - series already has an allocated layer: ${this.series[s]}`);0===Object.keys(this.series).length&&(this.mode=this.expectedSeriesCount>=30?"aggressive-grouping":"normal"),null!=(e=this.groups)[o]||(e[o]={});const m=this.lookupIdx(g);let y=this.groups[o][m];return y||(y=null!=(n=(i=this.groups[o])[m])?n:i[m]={seriesIds:[],group:this.rootGroup.appendChild(new vt({name:`${o}-content`,layer:!0,zIndex:4,zIndexSubOrder:r.getGroupZIndexSubOrder("data")})),highlight:this.rootGroup.appendChild(new vt({name:`${o}-highlight`,layer:!0,zIndex:4,zIndexSubOrder:r.getGroupZIndexSubOrder("highlight")})),annotation:this.rootGroup.appendChild(new vt({name:`${o}-annotation`,layer:!0,zIndex:4,zIndexSubOrder:r.getGroupZIndexSubOrder("annotation")}))}),this.series[s]={layerState:y,seriesConfig:r},y.seriesIds.push(s),y.group.appendChild(a),y.highlight.appendChild(c),y.annotation.appendChild(u),y.group}changeGroup(r){var e,t;const{internalId:i,seriesGrouping:n,type:s,rootGroup:o,highlightGroup:a,annotationGroup:c,oldGrouping:u}=r,{groupIndex:p=i}=n??{};null!=(t=null==(e=this.groups[s])?void 0:e[p])&&t.seriesIds.includes(i)||(null!=this.series[i]&&this.releaseGroup({internalId:i,seriesGrouping:u,type:s,rootGroup:o,highlightGroup:a,annotationGroup:c}),this.requestGroup(r))}releaseGroup(r){var e,t,i,n,s;const{internalId:o,seriesGrouping:a,rootGroup:c,highlightGroup:u,annotationGroup:p,type:g}=r,{groupIndex:m=o}=a??{};if(null==this.series[o])throw new Error(`AG Charts - series doesn't have an allocated layer: ${o}`);const y=this.lookupIdx(m),b=null!=(i=null==(e=this.groups[g])?void 0:e[y])?i:null==(t=this.series[o])?void 0:t.layerState;if(b&&(b.seriesIds=b.seriesIds.filter(_=>_!==o),b.group.removeChild(c),b.highlight.removeChild(u),b.annotation.removeChild(p)),0===b?.seriesIds.length)this.rootGroup.removeChild(b.group),this.rootGroup.removeChild(b.highlight),this.rootGroup.removeChild(b.annotation),delete this.groups[g][y],delete this.groups[g][o];else if(b?.seriesIds.length>0){const _=null==(s=this.series[null==(n=b?.seriesIds)?void 0:n[0]])?void 0:s.seriesConfig;b.group.zIndexSubOrder=_?.getGroupZIndexSubOrder("data"),b.highlight.zIndexSubOrder=_?.getGroupZIndexSubOrder("highlight"),b.annotation.zIndexSubOrder=_?.getGroupZIndexSubOrder("annotation")}delete this.series[o]}lookupIdx(r){return"normal"===this.mode?r:"string"!=typeof r||(r=Number(r.split("-").slice(-1)[0]))?Math.floor(30*Math.max(Math.min(r/this.expectedSeriesCount,1),0)):0}destroy(){for(const r of Object.values(this.groups))for(const e of Object.values(r))this.rootGroup.removeChild(e.group),this.rootGroup.removeChild(e.highlight),this.rootGroup.removeChild(e.annotation);this.groups={},this.series={}}}(this.seriesRoot),this.callbackCache=new class{constructor(){this.cache=new WeakMap}call(r,...e){let t,i=this.cache.get(r);const n=()=>{try{const s=r(...e);return i&&null!=t&&i.set(t,s),s}catch(s){return void tt.warnOnce("User callback errored, ignoring",s)}};try{t=JSON.stringify(e)}catch{return n()}return null==i&&(i=new Map,this.cache.set(r,i)),i.has(t)?i.get(t):n()}invalidateCache(){this.cache=new WeakMap}},this.animationManager=new hV(this.interactionManager,this.updateMutex),this.animationManager.skip(),this.animationManager.play(),this.dataService=new bM(this.animationManager),this.overlays=new Rj(this.element,this.animationManager),this.processors=[new Bj(this,this.layoutService),new Hj(this,this.dataService,this.updateService,this.zoomManager),new Uj(this,this.overlays,this.dataService,this.layoutService)],this.tooltip=new cG(this.scene.canvas.element,s,n,s.body),this.tooltipManager=new nN(this.tooltip,this.interactionManager),this.highlight=new nV,this.container=c,this.attachLegend("category",ca),this.legend=this.legends.get("category");const{All:p}=_M;iV.observe(this.element,g=>this.rawResize(g)),this._destroyFns.push(this.dataService.addListener("data-load",g=>{this.data=g.data}),this.interactionManager.addListener("click",g=>this.onClick(g)),this.interactionManager.addListener("dblclick",g=>this.onDoubleClick(g)),this.interactionManager.addListener("hover",g=>this.onMouseMove(g)),this.interactionManager.addListener("leave",g=>this.onLeave(g)),this.interactionManager.addListener("page-left",()=>this.destroy()),this.interactionManager.addListener("wheel",()=>this.resetPointer()),this.interactionManager.addListener("drag",()=>this.resetPointer()),this.interactionManager.addListener("contextmenu",g=>this.onContextMenu(g),p),this.animationManager.addListener("animation-frame",()=>{this.update(6)}),this.highlightManager.addListener("highlight-change",g=>this.changeHighlightDatum(g)),this.zoomManager.addListener("zoom-change",()=>this.update(2,{forceNodeDataRefresh:!0,skipAnimations:!0})))}static getInstance(e){return oU.chartsInstances.get(e)}onAutoSizeChange(e){const{style:t}=this.element;if(e){if(t.display="block",t.width="100%",t.height="100%",!this._lastAutoSize)return;this.resize(void 0,void 0,"autoSize option")}else t.display="inline-block",t.width="auto",t.height="auto"}download(e,t){this.scene.download(e,t)}getOptions(){var e;return null!=(e=this.queuedUserOptions.at(-1))?e:this.userOptions}addModule(e){if(this.modules.has(e.optionsKey))throw new Error(`AG Charts - module already initialised: ${e.optionsKey}`);const t=new e.instanceConstructor(this.getModuleContext());if("legend"===e.type){const i=t;this.legends.set(e.identifier,i),i.attachLegend(this.scene.root)}this.modules.set(e.optionsKey,t)}removeModule(e){var t;"legend"===e.type&&this.legends.delete(e.identifier),null==(t=this.modules.get(e.optionsKey))||t.destroy(),this.modules.delete(e.optionsKey)}attachLegend(e,t){const i=new t(this.getModuleContext());this.legends.set(e,i),i.attachLegend(this.scene.root)}isModuleEnabled(e){return this.modules.has(e.optionsKey)}getModuleContext(){return{window:this.chartOptions.specialOverrides.window,document:this.chartOptions.specialOverrides.document,scene:this.scene,animationManager:this.animationManager,chartEventManager:this.chartEventManager,contextMenuRegistry:this.contextMenuRegistry,cursorManager:this.cursorManager,highlightManager:this.highlightManager,interactionManager:this.interactionManager,regionManager:this.regionManager,gestureDetector:this.gestureDetector,tooltipManager:this.tooltipManager,syncManager:this.syncManager,zoomManager:this.zoomManager,chartService:this,dataService:this.dataService,layoutService:this.layoutService,updateService:this.updateService,seriesStateManager:this.seriesStateManager,callbackCache:this.callbackCache}}resetAnimations(){var e;this.chartAnimationPhase="initial";for(const t of this.series)t.resetAnimation(this.chartAnimationPhase);for(const t of this.axes)t.resetAnimation(this.chartAnimationPhase);this.animationRect=void 0,null==(e=this.animationManager)||e.reset()}skipAnimations(){this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0}destroy(e){if(this.destroyed)return;const t=e?.keepTransferableResources;let i;this.performUpdateType=7,this._destroyFns.forEach(n=>n()),this.processors.forEach(n=>n.destroy()),this.tooltipManager.destroy(),this.tooltip.destroy(),this.legends.forEach(n=>n.destroy()),this.legends.clear(),this.overlays.destroy(),iV.unobserve(this.element);for(const n of this.modules.values())n?.destroy();return this.modules.clear(),this.regionManager.destroy(),this.interactionManager.destroy(),this.animationManager.stop(),this.animationManager.destroy(),this.chartEventManager.destroy(),this.highlightManager.destroy(),this.zoomManager.destroy(),t?(this.scene.strip(),i={container:this.container,scene:this.scene,element:this.element}):(this.scene.destroy(),this.container=void 0),this.destroySeries(this.series),this.seriesLayerManager.destroy(),this.axes.forEach(n=>n.destroy()),this.axes=[],this.callbackCache.invalidateCache(),this.animationRect=void 0,this.animationManager.reset(),this.syncManager.destroy(),this.destroyed=!0,Object.freeze(this),i}resetPointer(e=!1){e||this.tooltipManager.removeTooltip(this.id),this.highlightManager.updateHighlight(this.id),this.lastInteractionEvent=void 0}requestFactoryUpdate(e){this.destroyed||(this._pendingFactoryUpdatesCount++,this.updateMutex.acquire(()=>Be(this,null,function*(){this.destroyed||(yield e(this),!this.destroyed&&this._pendingFactoryUpdatesCount--)})))}update(e=0,t){var i,n;const{forceNodeDataRefresh:s=!1,skipAnimations:o,seriesToUpdate:a=this.series,newAnimationBatch:c}=t??{};s&&this.series.forEach(u=>u.markNodeDataDirty());for(const u of a)this.seriesToUpdate.add(u);if(o&&(this.animationManager.skipCurrentBatch(),this._performUpdateSkipAnimations=!0),c&&this.animationManager.isActive()&&(this._performUpdateSkipAnimations=!0),this._skipSync=null!=(i=t?.skipSync)&&i,this.debug.check()){let u=null!=(n=(new Error).stack)?n:"<unknown>";u=u.replace(/\([^)]*/g,""),this.updateRequestors[u]=e}e<this.performUpdateType&&(this.performUpdateType=e,this.performUpdateTrigger.schedule(t?.backOffMs))}performUpdate(e){return Be(this,null,function*(){const{performUpdateType:t,extraDebugStats:i}=this,n=[...this.seriesToUpdate];this.performUpdateType=7,this.seriesToUpdate.clear(),0===this.updateShortcutCount&&t<6&&(this.animationManager.startBatch(this._performUpdateSkipAnimations),this.animationManager.onBatchStop(()=>this.chartAnimationPhase="ready")),this.debug("Chart.performUpdate() - start",WD[t]);const s={start:performance.now()};switch(t){case 0:case 1:yield this.updateData(),s["\u2b07\ufe0f"]=performance.now();case 2:yield this.processData(),this.resetPointer(!0),s["\u{1f3ed}"]=performance.now();case 3:if(this.checkUpdateShortcut(3)||!this.checkFirstAutoSize(n))break;yield this.processLayout(),s["\u2316"]=performance.now();case 4:if(this.checkUpdateShortcut(4))break;const{seriesRect:a}=this;yield Promise.all(n.map(u=>u.update({seriesRect:a}))),s["\u{1f914}"]=performance.now();case 5:if(this.checkUpdateShortcut(5))break;const c=this.tooltipManager.getTooltipMeta(this.id);t<=4&&void 0!==c&&this.handlePointer(c.lastPointerEvent,!0),s["\u2196"]=performance.now();case 6:if(this.checkUpdateShortcut(6))break;i.updateShortcutCount=this.updateShortcutCount,yield this.scene.render({debugSplitTimes:s,extraDebugStats:i}),this.extraDebugStats={};case 7:this.updateShortcutCount=0,this.updateRequestors={},this._performUpdateSkipAnimations=!1,this.animationManager.endBatch()}this.updateService.dispatchUpdateComplete(this.getMinRect());const o=performance.now();this.debug("Chart.performUpdate() - end",{chart:this,durationMs:Math.round(100*(o-s.start))/100,count:e,performUpdateType:WD[t]})})}checkUpdateShortcut(e){return this.updateShortcutCount>3?(tt.warn("exceeded the maximum number of simultaneous updates (4), discarding changes and rendering",this.updateRequestors),!1):this.performUpdateType<=e&&(this.updateShortcutCount++,!0)}checkFirstAutoSize(e){if(this.autoSize&&!this._lastAutoSize){const t=this._performUpdateNoRenderCount++,i=10*Yt(t,2);if(t<8)return this.update(3,{seriesToUpdate:e,backOffMs:i}),this.debug("Chart.checkFirstAutoSize() - backing off until first size update",i),!1;this.debug("Chart.checkFirstAutoSize() - timeout for first size update.")}return this._performUpdateNoRenderCount=0,!0}onSeriesChange(e,t){var i,n;const s=null!=(i=t?.filter(o=>!e.includes(o)))?i:[];this.destroySeries(s),null==(n=this.seriesLayerManager)||n.setSeriesCount(e.length);for(const o of e){if(t?.includes(o))continue;null==o.rootGroup.parent&&this.seriesLayerManager.requestGroup(o);const a=this;o.chart={get mode(){return a.mode},get isMiniChart(){return!1},get seriesRect(){return a.seriesRect},placeLabels:()=>a.placeLabels()},o.resetAnimation(this.chartAnimationPhase),this.addSeriesListeners(o),o.addChartEventListeners()}}destroySeries(e){e?.forEach(t=>{t.removeEventListener("nodeClick",this.onSeriesNodeClick),t.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),t.removeEventListener("groupingChanged",this.seriesGroupingChanged),t.destroy(),this.seriesLayerManager.releaseGroup(t),t.chart=void 0})}addSeriesListeners(e){this.hasEventListener("seriesNodeClick")&&e.addEventListener("nodeClick",this.onSeriesNodeClick),this.hasEventListener("seriesNodeDoubleClick")&&e.addEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),e.addEventListener("groupingChanged",this.seriesGroupingChanged)}updateAllSeriesListeners(){this.series.forEach(e=>{e.removeEventListener("nodeClick",this.onSeriesNodeClick),e.removeEventListener("nodeDoubleClick",this.onSeriesNodeDoubleClick),this.addSeriesListeners(e)})}assignSeriesToAxes(){this.axes.forEach(e=>{e.boundSeries=this.series.filter(t=>t.axes[e.direction]===e)})}assignAxesToSeries(){const e=dF(this.axes,t=>t.direction);this.series.forEach(t=>{t.directions.forEach(i=>{const n=e[i];if(!n)return void tt.warnOnce(`no available axis for direction [${i}]; check series and axes configuration.`);const s=t.getKeys(i),o=this.findMatchingAxis(n,s);o?t.axes[i]=o:tt.warnOnce(`no matching axis for direction [${i}] and keys [${s}]; check series and axes configuration.`)})})}findMatchingAxis(e,t){for(const i of e){if(!i.keys.length)return i;if(t)for(const n of t)if(i.keys.includes(n))return i}}rawResize(e){var t;let{width:i,height:n}=e;if(i=Math.floor(i),n=Math.floor(n),!this.autoSize||0===i&&0===n)return;const[s=0,o=0]=null!=(t=this._lastAutoSize)?t:[];s===i&&o===n||(this._lastAutoSize=[i,n],this.resize(void 0,void 0,"SizeMonitor"))}resize(e,t,i){var n,s,o,a;if(e??(e=null!=(s=this.width)?s:this.autoSize?null==(n=this._lastAutoSize)?void 0:n[0]:this.scene.canvas.width),t??(t=null!=(a=this.height)?a:this.autoSize?null==(o=this._lastAutoSize)?void 0:o[1]:this.scene.canvas.height),this.debug(`Chart.resize() from ${i}`,{width:e,height:t,stack:(new Error).stack}),e&&t&&Ei(e)&&Ei(t)&&this.scene.resize(e,t)){this.resetPointer(),this.animationManager.reset();let c=!0;this.autoSize&&this._firstAutoSize&&(c=!1,this._firstAutoSize=!1),this.update(3,{forceNodeDataRefresh:!0,skipAnimations:c})}}updateData(){return Be(this,null,function*(){this.series.forEach(t=>t.setChartData(this.data));const e=Array.from(this.modules.values(),t=>{var i;return null==(i=t.updateData)?void 0:i.call(t,{data:this.data})});yield Promise.all(e)})}processData(){return Be(this,null,function*(){if(this.series.some(n=>n.canHaveAxes)){this.assignAxesToSeries(),this.assignSeriesToAxes();const n=this.modules.get("sync");n?.enabled&&n.syncAxes(this._skipSync)}const e=new oV(this.mode),t=this.series.map(n=>n.processData(e)),i=Array.from(this.modules.values(),n=>{var s;return null==(s=n.processData)?void 0:s.call(n,{dataController:e})});e.execute(),yield Promise.all([...t,...i]),yield this.updateLegend()})}placeLabels(){const e=[],t=[];for(const u of this.series){if(!u.visible)continue;const p=u.getLabelData();w3(p?.[0])&&(t.push(p),e.push(u))}const{seriesRect:i}=this,{top:n,right:s,bottom:o,left:a}=this.seriesArea.padding,c=i&&t.length>0?function E3(r,e,t=5){const i=[];r=r.map(n=>n.slice().sort((s,o)=>o.point.size-s.point.size));for(let n=0;n<r.length;n++){const s=i[n]=[],o=r[n];if(o?.length&&o[0].label)for(let a=0,c=o.length;a<c;a++){const u=o[a],p=u.label,m=u.point.x-.5*p.width,y=u.point.y-.5*u.point.size-p.height-t,{width:b,height:_}=p;e&&!_3(e,m,y,b,_)||r.some(O=>O.some(L=>b3(L.point,m,y,b,_)))||i.some(O=>O.some(L=>BG(L,m,y,b,_)))||s.push({index:a,text:p.text,x:m,y,width:b,height:_,datum:u})}}return i}(t,{x:-a,y:-n,width:i.width+a+s,height:i.height+n+o}):[];return new Map(c.map((u,p)=>[e[p],u]))}updateLegend(){return Be(this,null,function*(){this.legends.forEach((e,t)=>{const n=this.series.filter(s=>s.properties.showInLegend).flatMap(s=>s.getLegendData(t));n.every(o=>"category"===o.legendType)&&"integrated"!==this.mode&&this.validateCategoryLegendData(n),e.data=n})})}validateCategoryLegendData(e){const t={};e.forEach(i=>{var n,o,a;const u=null==(n=this.series.find(p=>p.id===i.seriesId))?void 0:n.type;!u||(null!=t[u]||(t[u]={}),null!=(o=t[u])[a=i.label.text]||(o[a]=new Set),null!=i.marker.fill&&t[u][i.label.text].add(i.marker.fill))});for(const i of Object.values(t))for(const[n,s]of Object.entries(i))s.size>1&&tt.warnOnce(`legend item '${n}' has multiple fill colors, this may cause unexpected behaviour.`)}processLayout(){return Be(this,null,function*(){var e;const t=this.animationRect;yield this.performLayout(),t&&!(null!=(e=this.animationRect)&&e.equals(t))&&this.animationManager.skipCurrentBatch(),this.debug("Chart.performUpdate() - seriesRect",this.seriesRect)})}performLayout(){return Be(this,null,function*(){this.scene.root&&(this.scene.root.visible=!0);const{width:e,height:t}=this.scene;let i={shrinkRect:new Bt(0,0,e,t)};i=this.layoutService.dispatchPerformLayout("start-layout",i),i=this.layoutService.dispatchPerformLayout("before-series",i);const n=Array.from(this.modules.values(),s=>Be(this,null,function*(){var o;null!=s.performLayout&&(i=yield null==(o=s.performLayout)?void 0:o.call(s,i))}));return yield Promise.all(n),i.shrinkRect})}pickSeriesNode(e,t,i){var n,s;const o=performance.now(),a=t?[0]:void 0,c=[...this.series].reverse();let u;for(const p of c){if(!p.visible||!p.rootGroup.visible)continue;const{match:g,distance:m}=null!=(n=p.pickNode(e,a))?n:{};if(g&&null!=m&&((!u||u.distance>m)&&m<=(i??1/0)&&(u={series:p,distance:m,datum:g}),0===m))break}return this.extraDebugStats.pickSeriesNode=Math.round((null!=(s=this.extraDebugStats.pickSeriesNode)?s:0)+(performance.now()-o)),u}onMouseMove(e){this.lastInteractionEvent=e,this.pointerScheduler.schedule(),this.extraDebugStats.mouseX=e.offsetX,this.extraDebugStats.mouseY=e.offsetY,this.update(6)}onLeave(e){this.tooltip.pointerLeftOntoTooltip(e)||(this.resetPointer(),this.update(6))}onContextMenu(e){this.tooltipManager.removeTooltip(this.id);const{Default:t,ContextMenu:i}=_M;this.interactionManager.getState()&(t|i)&&this.checkSeriesNodeRange(e,(n,s)=>{this.highlightManager.updateHighlight(this.id,s)})}handlePointer(e,t){if(8!==this.interactionManager.getState())return;const{lastPick:i,hoverRect:n}=this,{offsetX:s,offsetY:o}=e,a=(c=!1)=>{i&&this.resetPointer(c)};t&&this.animationManager.isActive()?a():n?.containsPoint(s,o)?(this.handlePointerTooltip(e,a),this.handlePointerNode(e)):a()}handlePointerTooltip(e,t){const{lastPick:i,tooltip:n}=this,{range:s}=n,{offsetX:o,offsetY:a}=e;let c;Ei(s)&&(c=s);const u=this.pickSeriesNode({x:o,y:a},"exact"===s,c);if(!u)return this.tooltipManager.removeTooltip(this.id),void("tooltip"===this.highlight.range&&t(!0));const p="node"===this.highlight.range||!i||i!==u.datum;let g;p&&(g=u.series.getTooltipHtml(u.datum),"tooltip"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,u.datum));const E=this.tooltip.enabled&&u.series.properties.tooltip.enabled&&("nearest"===s||null!=c||"exact"===s&&0===u.distance)&&(!p||void 0!==g),D=nN.makeTooltipMeta(e,u.datum);E&&this.tooltipManager.updateTooltip(this.id,D,g)}handlePointerNode(e){this.checkSeriesNodeRange(e,(i,n)=>{(i.hasEventListener("nodeClick")||i.hasEventListener("nodeDoubleClick"))&&this.cursorManager.updateCursor("chart","pointer"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id,n)})||(this.cursorManager.updateCursor("chart"),"node"===this.highlight.range&&this.highlightManager.updateHighlight(this.id))}onClick(e){this.checkSeriesNodeClick(e)?this.update(4):this.fireEvent({type:"click",event:e.sourceEvent})}onDoubleClick(e){this.checkSeriesNodeDoubleClick(e)?this.update(4):this.fireEvent({type:"doubleClick",event:e.sourceEvent})}checkSeriesNodeClick(e){return this.checkSeriesNodeRange(e,(t,i)=>t.fireNodeClickEvent(e.sourceEvent,i))}checkSeriesNodeDoubleClick(e){return this.checkSeriesNodeRange(e,(t,i)=>t.fireNodeDoubleClickEvent(e.sourceEvent,i))}checkSeriesNodeRange(e,t){const n=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!1)?.datum,s=n?.series.properties.nodeClickRange;let o;Ei(s)&&(o=s);let a=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!0);return a?this.highlightManager.updatePicked(this.id,a.datum):this.highlightManager.updatePicked(this.id),n&&"nearest"===s?(t(n.series,n),!0):("exact"!==s&&(a=this.pickSeriesNode({x:e.offsetX,y:e.offsetY},!1,o)),!!a&&!(null==o&&("exact"!==s||0!==a.distance)||(t(a.series,a.datum),0)))}changeHighlightDatum(e){var t,i;const n=new Set,{series:s,datum:o}=null!=(t=e.currentHighlight)?t:{},{series:a,datum:c}=null!=(i=e.previousHighlight)?i:{};a&&n.add(a),s&&n.add(s),a?.properties.cursor&&c&&this.cursorManager.updateCursor(a.id),s?.properties.cursor&&o&&this.cursorManager.updateCursor(s.id,s.properties.cursor),this.lastPick=e.currentHighlight,null==s||null==a?this.update(4):this.update(4,{seriesToUpdate:n})}waitForUpdate(e=5e3){return Be(this,null,function*(){const t=performance.now();for(this._pendingFactoryUpdatesCount>0&&(yield this.updateMutex.waitForClearAcquireQueue());7!==this.performUpdateType;){if(performance.now()-t>e)throw new Error("waitForUpdate() timeout reached.");yield B3(5)}yield this.updateMutex.waitForClearAcquireQueue()})}getMinRect(){const e=this.series.map(t=>t.getMinRect()).filter(t=>void 0!==t);if(e.length)return new Bt(0,0,e.reduce((t,i)=>Math.max(t,i.width),0),e.reduce((t,i)=>Math.max(t,i.height),0))}filterMiniChartSeries(e){return null!=e?e.filter(t=>!1!==t.showInMiniChart):e}applyOptions(e){var t,i,n,s,o,a;const c=this.processedOptions,u=e.diffOptions(c),p=e.userOptions;if(null==u)return;sd("AgChartV2.updateDelta() - applying delta",u);const g=ri(u,c),m=this.applyModules(g),y=["type","data","series","listeners","theme","legend.listeners","navigator.miniChart.label"];(mt(u)||Bi(u))&&y.push("axes"),u.listeners&&this.registerListeners(this,u.listeners),this.applyOptionValues(this,u,{skip:y});let b=!1,_="no-op";u.series&&u.series.length>0&&(_=this.applySeries(this,u.series,c?.series),b=!0),"replaced"===_&&this.resetAnimations(),this.applyAxes(this,g,c,_)&&(b=!0);const E=!!u.data||"data-change"===_||"replaced"===_,D=function GU(){return uk}(),R=Object.values(D).some(J=>null!=u[J]);b=b||E||R||null!=u.title&&null!=u.subtitle,u.data&&(this.data=u.data),null!=(t=u.legend)&&t.listeners&&Object.assign(this.legend.listeners,u.legend.listeners),u.listeners&&this.updateAllSeriesListeners(),this.chartOptions=e,this.processedOptions=g,this.userOptions=ri(p,this.userOptions);const L=this.modules.get("navigator"),k=this.modules.get("zoom");!L?.enabled&&!k?.enabled&&this.zoomManager.updateZoom();const U=L?.miniChart;if(!0===U?.enabled&&null!=u?.series){const J=this.applySeries(U,this.filterMiniChartSeries(u.series),this.filterMiniChartSeries(c?.series));this.applyAxes(U,u,c,J,["axes[].tick","axes[].thickness","axes[].title","axes[].crosshair","axes[].gridLine","axes[].label"]);const me=U.axes,ye=me.find(Ae=>"x"===Ae.direction);for(const Ae of me)Ae.gridLine.enabled=!1,Ae.label.enabled=Ae===ye,Ae.tick.enabled=!1,Ae.interactionEnabled=!1;if(null!=ye){const Ae=null==(n=null==(i=u.navigator)?void 0:i.miniChart)?void 0:n.label,Pe=null==(a=null==(o=null==(s=u.navigator)?void 0:s.miniChart)?void 0:o.label)?void 0:a.interval;Hg(ye.label,Ae,{path:"navigator.miniChart.label",skip:["navigator.miniChart.label.interval","navigator.miniChart.label.rotation","navigator.miniChart.label.minSpacing","navigator.miniChart.label.autoRotate","navigator.miniChart.label.autoRotateAngle"]}),Hg(ye.tick,Pe,{path:"navigator.miniChart.interval",skip:["navigator.miniChart.interval.enabled","navigator.miniChart.interval.width","navigator.miniChart.interval.size","navigator.miniChart.interval.color","navigator.miniChart.interval.interval","navigator.miniChart.interval.step"]});const Le=Pe?.step;null!=Le&&(ye.tick.interval=Le)}}else!1===U?.enabled&&(U.series=[],U.axes=[]);const q=b||m?1:3;sd("AgChartV2.applyChartOptions() - update type",WD[q]),this.update(q,{forceNodeDataRefresh:b,newAnimationBatch:!0})}applyModules(e){let t=!1;for(const i of ra){if("root"!==i.type&&"legend"!==i.type)continue;const n=e[i.optionsKey],s=i.chartTypes.includes(this.constructor.type)&&null!=n;s!==this.isModuleEnabled(i)&&(s?(this.addModule(i),this[i.optionsKey]=this.modules.get(i.optionsKey)):(this.removeModule(i),delete this[i.optionsKey]),t=!0)}return t}applySeries(e,t,i){if(!t)return"no-change";const n=function Dj(r,e,t){var i,n,s;const o=["direction","xKey","yKey","sizeKey","angleKey","radiusKey","normalizedTo"],a=(b,_)=>{const E=[b];for(const D of o)D in _&&null!=_[D]&&E.push(`${D}=${_[D]}`);return E.join(";")},c=new Map;let u=0;for(const b of r){const _=a(b.type,b.properties);c.has(_)||c.set(_,[]),null==(i=c.get(_))||i.push([b,u++])}const p=new Map;for(const b of e){const _=a(b.type,b);p.has(_)||p.set(_,[]),null==(n=p.get(_))||n.push(b)}if(![...c.keys()].some(b=>p.has(b)))return{status:"no-overlap",oldKeys:c.keys(),newKeys:p.keys()};const m=[];let y=-1;for(const[b,_]of p.entries())for(const E of _){y++;const D=c.get(b);if(null==D||D.length<1){m.push({opts:E,idx:y,status:"add"}),c.delete(b);continue}const[R,O]=D.shift(),k=Ar(null!=(s=t?.[O])?s:{},E??{});m.push(k?{opts:E,series:R,diff:k,idx:O,status:"update"}:{opts:E,series:R,idx:O,status:"no-op"}),0===D.length&&c.delete(b)}for(const b of c.values())for(const[_,E]of b)m.push({series:_,idx:E,status:"remove"});return{status:"overlap",changes:m}}(e.series,t,i);if("no-overlap"===n.status)return sd(`AgChartV2.applySeries() - creating new series instances, status: ${n.status}`,n),e.series=this.createSeries(t),"replaced";sd("AgChartV2.applySeries() - matchResult",n);const s=[];for(const c of n.changes){if("add"===c.status){const m=this.createSeries([c.opts])[0];s.push(m),sd("AgChartV2.applySeries() - created new series",m);continue}if("remove"===c.status){sd(`AgChartV2.applySeries() - removing series at previous idx ${c.idx}`,c.series);continue}if("no-op"===c.status){s.push(c.series),sd(`AgChartV2.applySeries() - no change to series at previous idx ${c.idx}`,c.series);continue}const{series:u,diff:p,idx:g}=c;sd(`AgChartV2.applySeries() - applying series diff previous idx ${g}`,p,u),this.applySeriesValues(u,p),u.markNodeDataDirty(),s.push(u)}for(let c=0;c<s.length;c++)s[c]._declarationOrder=c;sd("AgChartV2.applySeries() - final series instances",s),e.series=s;const o=n.changes.some(({diff:c})=>c&&(null!=c.seriesGrouping||null!=c.data)),a=n.changes.every(c=>"no-op"===c.status);return o?"data-change":a?"no-op":"updated"}applyAxes(e,t,i,n,s=[]){if(!("axes"in t)||!t.axes)return!1;s=["axes[].type",...s];const{axes:o}=t;return"replaced"!==n&&e.axes.length===o.length&&e.axes.every((u,p)=>u.type===o[p].type)&&mt(i)?(e.axes.forEach((u,p)=>{var g,m;const b=Ar(null!=(m=null==(g=i.axes)?void 0:g[p])?m:{},o[p]);sd(`AgChartV2.applyAxes() - applying axis diff idx ${p}`,b),this.applyOptionValues(u,b,{path:`axes[${p}]`,skip:s})}),!0):(sd(`AgChartV2.applyAxes() - creating new axes instances; seriesStatus: ${n}`),e.axes=this.createAxis(o,s),!0)}createSeries(e){var t;const i=[],n=this.getModuleContext();for(const s of e??[]){const o=null!=(t=s.type)?t:"unknown";if(W(o)&&!de(o))continue;const a=_U(o,n);this.applySeriesOptionModules(a,s),this.applySeriesValues(a,s),i.push(a)}return i}applySeriesOptionModules(e,t){const i=e.createModuleContext(),n=e.getModuleMap();for(const s of ra)"series-option"===s.type&&s.optionsKey in t&&s.seriesTypes.includes(e.type)&&n.addModule(s,o=>new o.instanceConstructor(i))}applySeriesValues(e,t){const i=e.getModuleMap(),n=t,{seriesGrouping:u}=n,g=rs(n,["type","data","errorBar","listeners","seriesGrouping","showInMiniChart"]);e.properties.set(g),"data"in t&&(e.data=t.data),"errorBar"in t&&i.isModuleEnabled("errorBar")&&i.getModule("errorBar").properties.set(t.errorBar),t?.listeners&&this.registerListeners(e,t.listeners),u&&(e.seriesGrouping=Re(Re({},e.seriesGrouping),u))}createAxis(e,t){const i=new class{constructor(){this.result=[],this.valid=[],this.invalid=[]}push(r,e){const{result:t,valid:i,invalid:n}=this;(function _j(r){return RV.includes(r.type)})(e)&&(function wj(r){return"string"==typeof r&&Sj.includes(r)}(e.position)?i.push(r):n.push(r)),t.push(r)}guessInvalidPositions(){const r=this.valid.filter(t=>function bj(r){return RV.includes(r.type)}(t)).map(t=>t.position).filter(t=>void 0!==t),e=["top","right","bottom","left"];for(const t of this.invalid){let i=e.pop();for(;r.includes(i)&&void 0!==i;)i=e.pop();if(void 0===i)break;t.position=i}return this.result}},n=this.getModuleContext();let s=0;for(const o of e??[]){const a=J1(o.type,n),c=`axes[${s++}]`;this.applyAxisModules(a,o),this.applyOptionValues(a,o,{path:c,skip:t}),i.push(a,o)}return i.guessInvalidPositions()}applyAxisModules(e,t){let i=!1;const n=ra.filter(o=>"axis-option"===o.type),s=e.createModuleContext();for(const o of n){const a=null!=t[o.optionsKey],c=e.getModuleMap();a!==c.isModuleEnabled(o)&&(i=!0,a?(c.addModule(o,p=>new p.instanceConstructor(s)),e[o.optionsKey]=c.getModule(o)):(c.removeModule(o),delete e[o.optionsKey]))}return i}applyOptionValues(e,t,{skip:i,path:n}={}){const s=this.getModuleContext();class o extends gn{constructor(){super(),this.registerInteraction(s)}}return Hg(e,t,{constructors:nt(Re({},hG.constructors),{title:o,subtitle:o,footnote:o}),constructedArrays:dG.constructedArrays,allowedTypes:Re({},hG.allowedTypes),skip:i,path:n})}registerListeners(e,t){e.clearEventListeners();for(const[i,n]of Object.entries(t))PC(n)&&e.addEventListener(i,n)}};ws.chartsInstances=new WeakMap,ws.NodeValueChangeOptions={newValue(r){var e;null==(e=this.scene.root)||e.appendChild(r.node)},oldValue(r){var e;null==(e=this.scene.root)||e.removeChild(r.node)}},I([Bs({newValue(r){this.destroyed||(r.setAttribute("data-ag-charts",""),r.appendChild(this.element),ws.chartsInstances.set(r,this))},oldValue(r){r.removeAttribute("data-ag-charts"),r.removeChild(this.element),ws.chartsInstances.delete(r)}})],ws.prototype,"container",2),I([Bs({newValue(r){this.resize(r,void 0,"width option")}})],ws.prototype,"width",2),I([Bs({newValue(r){this.resize(void 0,r,"height option")}})],ws.prototype,"height",2),I([Bs({newValue(r){this.onAutoSizeChange(r)}}),H(Ot)],ws.prototype,"autoSize",2),I([H(Ct)],ws.prototype,"padding",2),I([H(Ct)],ws.prototype,"seriesArea",2),I([Bs(ws.NodeValueChangeOptions)],ws.prototype,"title",2),I([Bs(ws.NodeValueChangeOptions)],ws.prototype,"subtitle",2),I([Bs(ws.NodeValueChangeOptions)],ws.prototype,"footnote",2),I([H(as(["standalone","integrated"],"a chart mode"))],ws.prototype,"mode",2),I([Bs({changeValue(r,e=[]){for(const t of e)r.includes(t)||(t.detachAxis(this.axisGroup,this.axisGridGroup),t.destroy());for(const t of r)e?.includes(t)||t.attachAxis(this.axisGroup,this.axisGridGroup);this.zoomManager.updateAxes(r)}})],ws.prototype,"axes",2),I([Bs({changeValue(r,e){this.onSeriesChange(r,e)}})],ws.prototype,"series",2);var RM=ws,HV=class extends L_{isContinuous(){var r,e;return{isContinuousX:$i.is(null==(r=this.axes.x)?void 0:r.scale),isContinuousY:$i.is(null==(e=this.axes.y)?void 0:e.scale)}}getModulePropertyDefinitions(){return this.moduleMap.mapValues(r=>r.getPropertyDefinitions(this.isContinuous())).flat()}requestDataModel(r,e,t){return Be(this,null,function*(){t.props.push(...this.getModulePropertyDefinitions());const{dataModel:i,processedData:n}=yield r.request(this.id,e??[],t);return this.dataModel=i,this.processedData=n,this.dispatch("data-processed",{dataModel:i,processedData:n}),{dataModel:i,processedData:n}})}isProcessedDataAnimatable(){var r,e;const t=null==(e=null==(r=this.processedData)?void 0:r.reduced)?void 0:e.animationValidation;if(!t)return!0;const{orderedKeys:i,uniqueKeys:n}=t;return i&&n}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}},Op=class extends Di{constructor(){super(...arguments),this.fill="rgba(255,255,255, 0.33)",this.stroke="rgba(0, 0, 0, 0.4)",this.strokeWidth=2}};I([H(Si,{optional:!0})],Op.prototype,"fill",2),I([H(Fi,{optional:!0})],Op.prototype,"fillOpacity",2),I([H(Si,{optional:!0})],Op.prototype,"stroke",2),I([H(qe,{optional:!0})],Op.prototype,"strokeWidth",2),I([H(Fi,{optional:!0})],Op.prototype,"strokeOpacity",2),I([H(bp,{optional:!0})],Op.prototype,"lineDash",2),I([H(qe,{optional:!0})],Op.prototype,"lineDashOffset",2);var AM=class extends Di{};I([H(qe,{optional:!0})],AM.prototype,"strokeWidth",2),I([H(Fi,{optional:!0})],AM.prototype,"dimOpacity",2),I([H(Ot,{optional:!0})],AM.prototype,"enabled",2);var UV=class extends Di{constructor(){super(...arguments),this.color="black"}};I([H(Si,{optional:!0})],UV.prototype,"color",2);var qD=class extends Di{constructor(){super(...arguments),this.item=new Op,this.series=new AM,this.text=new UV}};I([H(Ct)],qD.prototype,"item",2),I([H(Ct)],qD.prototype,"series",2),I([H(Ct)],qD.prototype,"text",2);var rd=class extends Di{constructor(){super(...arguments),this.visible=!0,this.showInLegend=!0,this.cursor="default",this.nodeClickRange="exact",this.highlightStyle=new qD}};I([H(et,{optional:!0})],rd.prototype,"id",2),I([H(Ot)],rd.prototype,"visible",2),I([H(Ot)],rd.prototype,"showInLegend",2),I([H(et)],rd.prototype,"cursor",2),I([H(OF)],rd.prototype,"nodeClickRange",2),I([H(Ct)],rd.prototype,"highlightStyle",2);var Wj={x:["xKey"],y:["yKey"]},jj={x:["xName"],y:["yName"]},yN=class extends YD{constructor(r,e,t,i){super(r,e,t,i),this.xKey=i.properties.xKey,this.yKey=i.properties.yKey}},em=class extends rd{};I([H(et,{optional:!0})],em.prototype,"legendItemName",2);var tm=class extends HV{constructor(r){var e=r,{pathsPerSeries:t=1,hasMarkers:i=!1,hasHighlightedLabels:n=!1,pathsZIndexSubOrderOffset:s=[],directionKeys:o=Wj,directionNames:a=jj,datumSelectionGarbageCollection:c=!0,markerSelectionGarbageCollection:u=!0,animationAlwaysUpdateSelections:p=!1,animationResetFns:g}=e,m=rs(e,["pathsPerSeries","hasMarkers","hasHighlightedLabels","pathsZIndexSubOrderOffset","directionKeys","directionNames","datumSelectionGarbageCollection","markerSelectionGarbageCollection","animationAlwaysUpdateSelections","animationResetFns"]);super(Re({directionKeys:o,directionNames:a,useSeriesGroupLayer:!0,canHaveAxes:!0},m)),this._contextNodeData=[],this.NodeClickEvent=yN,this.highlightSelection=dn.select(this.highlightNode,()=>this.opts.hasMarkers?this.markerFactory():this.nodeFactory()),this.highlightLabelSelection=dn.select(this.highlightLabel,Ri),this.annotationSelections=new Set,this.subGroups=[],this.subGroupId=0,this.debug=Un.create(),this.opts={pathsPerSeries:t,hasMarkers:i,hasHighlightedLabels:n,pathsZIndexSubOrderOffset:s,directionKeys:o,directionNames:a,animationResetFns:g,animationAlwaysUpdateSelections:p,datumSelectionGarbageCollection:c,markerSelectionGarbageCollection:u},this.animationState=new GD("empty",{empty:{update:{target:"ready",action:y=>this.animateEmptyUpdateReady(y)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:y=>this.animateReadyHighlight(y),highlightMarkers:y=>this.animateReadyHighlightMarkers(y),resize:y=>this.animateReadyResize(y),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:y=>this.animateWaitingUpdateReady(y)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:y=>this.animateClearingUpdateEmpty(y)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}get contextNodeData(){return this._contextNodeData.slice()}resetAnimation(r){"initial"===r?this.animationState.transition("reset"):"ready"===r&&this.animationState.transition("skip")}addChartEventListeners(){this.destroyFns.push(this.ctx.chartEventManager.addListener("legend-item-click",r=>this.onLegendItemClick(r)),this.ctx.chartEventManager.addListener("legend-item-double-click",r=>this.onLegendItemDoubleClick(r)))}destroy(){super.destroy(),this._contextNodeData.splice(0,this._contextNodeData.length),this.subGroups.splice(0,this.subGroups.length)}update(r){return Be(this,arguments,function*({seriesRect:e}){var t,i;const{visible:n,_contextNodeData:s}=this,{series:o}=null!=(i=null==(t=this.ctx.highlightManager)?void 0:t.getActiveHighlight())?i:{},a=o?o===this:void 0,c=this.checkResize(e),u=yield this.updateHighlightSelection(a);yield this.updateSelections(n),yield this.updateNodes(u,a,n);const p=this.getAnimationData(e,s);c&&this.animationState.transition("resize",p),this.animationState.transition("update",p)})}updateSelections(r){return Be(this,null,function*(){const e=!this.opts.animationAlwaysUpdateSelections&&this.ctx.animationManager.isSkipped();if((r||!e)&&(this.nodeDataRefresh||this.isPathOrSelectionDirty())){if(this.nodeDataRefresh){this.nodeDataRefresh=!1,this.debug("CartesianSeries.updateSelections() - calling createNodeData() for",this.id),this._contextNodeData=yield this.createNodeData();const t=this.isProcessedDataAnimatable();this._contextNodeData.forEach(s=>{null!=s.animationValid||(s.animationValid=t)}),yield this.updateSeriesGroups();const{dataModel:i,processedData:n}=this;void 0!==i&&void 0!==n&&this.dispatch("data-update",{dataModel:i,processedData:n})}yield Promise.all(this.subGroups.map((t,i)=>this.updateSeriesGroupSelections(t,i)))}})}updateSeriesGroupSelections(r,e,t){return Be(this,null,function*(){const{datumSelection:i,labelSelection:n,markerSelection:s,paths:o}=r,a=this._contextNodeData[e],{nodeData:c,labelData:u,itemId:p}=a;yield this.updatePaths({seriesHighlighted:t,itemId:p,contextData:a,paths:o,seriesIdx:e}),r.datumSelection=yield this.updateDatumSelection({nodeData:c,datumSelection:i,seriesIdx:e}),r.labelSelection=yield this.updateLabelSelection({labelData:u,labelSelection:n,seriesIdx:e}),s&&(r.markerSelection=yield this.updateMarkerSelection({nodeData:c,markerSelection:s,seriesIdx:e}))})}markerFactory(){return new(Xg())}updateSeriesGroups(){return Be(this,null,function*(){const{_contextNodeData:r,contentGroup:e,subGroups:t,opts:{pathsPerSeries:i,hasMarkers:n,datumSelectionGarbageCollection:s,markerSelectionGarbageCollection:o}}=this;if(r.length===t.length)return;r.length<t.length&&t.splice(r.length).forEach(({dataNodeGroup:c,markerGroup:u,labelGroup:p,paths:g})=>{e.removeChild(c),u&&e.removeChild(u),p&&e.removeChild(p);for(const m of g)e.removeChild(m)});const a=r.length;for(;a>t.length;){const u=this.subGroupId++,p=new vt({name:`${this.id}-series-sub${u}-dataNodes`,layer:!1,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("data",u)}),g=n?new vt({name:`${this.id}-series-sub${this.subGroupId++}-markers`,layer:!1,zIndex:4,zIndexSubOrder:this.getGroupZIndexSubOrder("marker",u)}):void 0,m=new vt({name:`${this.id}-series-sub${this.subGroupId++}-labels`,layer:!1,zIndex:7,zIndexSubOrder:this.getGroupZIndexSubOrder("labels",u)});e.appendChild(p),e.appendChild(m),g&&e.appendChild(g);const y=[];for(let b=0;b<i;b++)y[b]=new tl,y[b].zIndex=4,y[b].zIndexSubOrder=this.getGroupZIndexSubOrder("paths",b),e.appendChild(y[b]);t.push({paths:y,dataNodeGroup:p,markerGroup:g,labelGroup:m,labelSelection:dn.select(m,Ri),datumSelection:dn.select(p,()=>this.nodeFactory(),s),markerSelection:g?dn.select(g,()=>this.markerFactory(),o):void 0})}})}getGroupZIndexSubOrder(r,e=0){var t;const i=super.getGroupZIndexSubOrder(r,e);if("paths"===r){const n=null!=(t=this.opts.pathsZIndexSubOrderOffset[e])?t:0,s=i[0];i[0]="function"==typeof s?()=>+s()+n:+s+n}return i}updateNodes(r,e,t){return Be(this,null,function*(){var i;const{highlightSelection:n,highlightLabelSelection:s,opts:{hasMarkers:o,hasHighlightedLabels:a}}=this,c=!this.ctx.animationManager.isSkipped(),u=this.visible&&(null==(i=this._contextNodeData)?void 0:i.length)>0&&t;this.rootGroup.visible=c||u,this.contentGroup.visible=c||u,this.highlightGroup.visible=(c||u)&&!!e;const p=this.getOpacity();o?(yield this.updateMarkerNodes({markerSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlightMarkers",n)):(yield this.updateDatumNodes({datumSelection:n,isHighlight:!0,seriesIdx:-1}),this.animationState.transition("highlight",n)),a&&(yield this.updateLabelNodes({labelSelection:s,seriesIdx:-1})),yield Promise.all(this.subGroups.map((g,m)=>Be(this,null,function*(){const{dataNodeGroup:y,markerGroup:b,datumSelection:_,labelSelection:E,markerSelection:D,paths:R,labelGroup:O}=g,{itemId:L}=this.contextNodeData[m],k=u;y.opacity=p,y.visible=c||k,O.visible=k,b&&(b.opacity=p,b.zIndex=y.zIndex>=4?y.zIndex:y.zIndex+1,b.visible=k),O&&(O.opacity=p),yield this.updatePathNodes({seriesHighlighted:e,itemId:L,paths:R,seriesIdx:m,opacity:p,visible:k,animationEnabled:c}),y.visible&&(yield this.updateDatumNodes({datumSelection:_,highlightedItems:r,isHighlight:!1,seriesIdx:m}),yield this.updateLabelNodes({labelSelection:E,seriesIdx:m}),o&&D&&(yield this.updateMarkerNodes({markerSelection:D,isHighlight:!1,seriesIdx:m})))})))})}getHighlightLabelData(r,e){const t=r.filter(i=>i.datum===e.datum&&i.itemId===e.itemId);return 0!==t.length?t:void 0}getHighlightData(r,e){return e?[e]:void 0}updateHighlightSelection(r){return Be(this,null,function*(){var e;const{highlightSelection:t,highlightLabelSelection:i,_contextNodeData:n}=this,s=null==(e=this.ctx.highlightManager)?void 0:e.getActiveHighlight(),o=r&&s?.datum?s:void 0;let a,c;if(null!=o){const u=this.isLabelEnabled();for(const{labelData:p,nodeData:g}of n)if(c=this.getHighlightData(g,o),a=u?this.getHighlightLabelData(p,o):void 0,(!u||null!=a)&&null!=c)break}return this.highlightSelection=yield this.updateHighlightSelectionItem({items:c,highlightSelection:t}),this.highlightLabelSelection=yield this.updateHighlightSelectionLabel({items:a,highlightLabelSelection:i}),c})}pickNodeExactShape(r){var e;const t=super.pickNodeExactShape(r);if(t)return t;const{x:i,y:n}=r,{opts:{hasMarkers:s}}=this;for(const{dataNodeGroup:a,markerGroup:c}of this.subGroups){let u=a.pickNode(i,n);if(!u&&s&&(u=c?.pickNode(i,n)),u)break}for(const a of this.moduleMap.modules){const{datum:c}=null!=(e=a.pickNodeExact(r))?e:{};if(void 0!==c)return{datum:c,distance:0}}}pickNodeClosestDatum(r){var e,t;const{x:i,y:n}=r,{axes:s,rootGroup:o,_contextNodeData:a}=this,c=s.x,u=s.y,p=o.transformPoint(i,n);let m,g=1/0;for(const y of a)for(const b of y.nodeData){const{point:{x:_=NaN,y:E=NaN}={}}=b;if(isNaN(_)||isNaN(E)||!c?.inRange(_)||!u?.inRange(E))continue;const R=Math.max(Yt(p.x-_,2)+Yt(p.y-E,2),0);R<g&&(g=R,m=b)}for(const y of this.moduleMap.modules){const b=y.pickNodeNearest(r);if(void 0!==b&&b.distanceSquared<g){g=b.distanceSquared,m=b.datum;break}}if(m)return{datum:m,distance:Math.max(Math.sqrt(g)-(null!=(t=null==(e=m.point)?void 0:e.size)?t:0),0)}}pickNodeMainAxisFirst(r,e){var t,i;const{x:n,y:s}=r,{axes:o,rootGroup:a,_contextNodeData:c}=this,u=o.x,p=o.y,g=[u,p].filter(D=>D instanceof Dp).map(D=>D.direction);if(e&&0===g.length)return;const[m="x"]=g,y=a.transformPoint(n,s),b="x"===m?[y.x,y.y]:[y.y,y.x],_=[1/0,1/0];let E;for(const D of c)for(const R of D.nodeData){const{point:{x:O=NaN,y:L=NaN}={}}=R;if(isNaN(O)||isNaN(L)||!u?.inRange(O)||!p?.inRange(L))continue;const U="x"===m?[O,L]:[L,O];let j=!0;for(let q=0;q<U.length;q++){const J=Math.abs(U[q]-b[q]);if(J>_[q]){j=!1;break}J<_[q]&&(_[q]=J,_.fill(1/0,q+1,_.length))}j&&(E=R)}if(E){let D=Math.max(Yt(_[0],2)+Yt(_[1],2)-(null!=(i=null==(t=E.point)?void 0:t.size)?i:0),0);for(const R of this.moduleMap.modules){const O=R.pickNodeMainAxisFirst(r);if(void 0!==O&&O.distanceSquared<D){E=O.datum,D=O.distanceSquared;break}}return{datum:E,distance:Math.sqrt(D)}}}onLegendItemClick(r){const{legendItemName:e}=this.properties,{enabled:t,itemId:i,series:n}=r;(n.id===this.id||null!=e&&e===r.legendItemName)&&this.toggleSeriesItem(i,t)}onLegendItemDoubleClick(r){const{enabled:e,itemId:t,series:i,numVisibleItems:n}=r,{legendItemName:s}=this.properties;this.toggleSeriesItem(t,!!(i.id===this.id||null!=s&&s===r.legendItemName||e&&1===n))}isPathOrSelectionDirty(){return!1}getLabelData(){return[]}shouldFlipXY(){return!1}getMinRect(){const[r]=this._contextNodeData;if(!r?.nodeData.length)return;const e=r.nodeData.map(({midPoint:i})=>{var n;return null!=(n=i?.x)?n:0}).sort((i,n)=>i-n).reduce((i,n,s,o)=>s>0?Math.max(i,n-o[s-1]):i,0),t=r.nodeData.map(({midPoint:i})=>{var n;return null!=(n=i?.y)?n:0}).sort((i,n)=>i-n).reduce((i,n,s,o)=>s>0?Math.max(i,n-o[s-1]):i,0);return new Bt(0,0,e,t)}updateHighlightSelectionItem(r){return Be(this,null,function*(){const{opts:{hasMarkers:e}}=this,{items:t,highlightSelection:i}=r,n=t??[];return e?this.updateMarkerSelection({nodeData:n,markerSelection:i,seriesIdx:-1}):this.updateDatumSelection({nodeData:n,datumSelection:i,seriesIdx:-1})})}updateHighlightSelectionLabel(r){return Be(this,null,function*(){var e;return this.updateLabelSelection({labelData:null!=(e=r.items)?e:[],labelSelection:r.highlightLabelSelection,seriesIdx:-1})})}updateDatumSelection(r){return Be(this,null,function*(){return r.datumSelection})}updateDatumNodes(r){return Be(this,null,function*(){})}updateMarkerSelection(r){return Be(this,null,function*(){return r.markerSelection})}updateMarkerNodes(r){return Be(this,null,function*(){})}updatePaths(r){return Be(this,null,function*(){r.paths.forEach(e=>e.visible=!1)})}updatePathNodes(r){return Be(this,null,function*(){const{paths:e,opacity:t,visible:i}=r;for(const n of e)n.opacity=t,n.visible=i})}resetAllAnimation(r){var e,t;const{path:i,datum:n,label:s,marker:o}=null!=(t=null==(e=this.opts)?void 0:e.animationResetFns)?t:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),i&&r.paths.forEach(a=>{Hs(a,i)}),n&&Hs(r.datumSelections,n),s&&Hs(r.labelSelections,s),o&&Hs(r.markerSelections,o),r.contextData.some(a=>!1===a.animationValid)&&this.ctx.animationManager.skipCurrentBatch()}animateEmptyUpdateReady(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(r)}animateWaitingUpdateReady(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(r)}animateReadyHighlight(r){var e,t;const{datum:i}=null!=(t=null==(e=this.opts)?void 0:e.animationResetFns)?t:{};i&&Hs([r],i)}animateReadyHighlightMarkers(r){var e,t;const{marker:i}=null!=(t=null==(e=this.opts)?void 0:e.animationResetFns)?t:{};i&&Hs([r],i)}animateReadyResize(r){this.resetAllAnimation(r)}animateClearingUpdateEmpty(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(r)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(r,e){return{datumSelections:this.subGroups.map(({datumSelection:i})=>i),markerSelections:this.subGroups.filter(({markerSelection:i})=>void 0!==i).map(({markerSelection:i})=>i),labelSelections:this.subGroups.map(({labelSelection:i})=>i),annotationSelections:[...this.annotationSelections],contextData:this._contextNodeData,previousContextData:e,paths:this.subGroups.map(({paths:i})=>i),seriesRect:r}}calculateScaling(){const r={},e=t=>{const i=this.axes[t];if(i)if(i.scale instanceof BF){const{range:n,domain:s}=i.scale;r[t]={type:"log",convert:o=>i.scale.convert(o),domain:[s[0],s[1]],range:[n[0],n[1]]}}else if(i.scale instanceof $i){const{range:n}=i.scale,s=i.scale.getDomain();r[t]={type:"continuous",domain:[s[0],s[1]],range:[n[0],n[1]]}}else if(i.scale){const{domain:n}=i.scale;r[t]={type:"category",domain:n,range:n.map(s=>i.scale.convert(s))}}};return e("x"),e("y"),r}},zj=["top","right","bottom","left"],SN=class aU extends RM{constructor(e,t){super(e,t),this.paired=!0,this.firstSeriesTranslation=!0,this._lastCrossLineIds=void 0,this._lastAxisWidths={top:0,bottom:0,left:0,right:0},this._lastVisibility={crossLines:!0,series:!0}}destroySeries(e){super.destroySeries(e),this.firstSeriesTranslation=!0}performLayout(){return Be(this,null,function*(){const e=yield yu(aU.prototype,this,"performLayout").call(this),{firstSeriesTranslation:t,seriesRoot:i}=this,{animationRect:n,seriesRect:s,visibility:o,clipSeries:a}=this.updateAxes(e);this.seriesRoot.visible=o.series,this.seriesRect=s,this.animationRect=n;const{x:c,y:u}=s;if(t)i.translationX=Math.floor(c),i.translationY=Math.floor(u),this.firstSeriesTranslation=!1;else{const{translationX:m,translationY:y}=i;Ou(this.id,"seriesRect",this.animationManager,[this.seriesRoot],{translationX:m,translationY:y},{translationX:Math.floor(c),translationY:Math.floor(u)},{phase:"update"})}const p=s.clone().grow(this.seriesArea.padding);this.hoverRect=p,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:a,series:{rect:s,paddedRect:p,visible:o.series,shouldFlipXY:this.shouldFlipXY()},axes:this.axes.map(m=>Re({id:m.id},m.getLayoutState()))});const g=Array.from(this.modules.values(),m=>{var y;return null==(y=m.performCartesianLayout)?void 0:y.call(m,{seriesRect:s})});return yield Promise.all(g),e})}updateAxes(e){var t;const i=this.axes.flatMap(D=>{var R;return null!=(R=D.crossLines)?R:[]}).map(D=>D.id);let s,o;null!=this._lastCrossLineIds&&this._lastCrossLineIds.length===i.length&&this._lastCrossLineIds.every((D,R)=>i[R]===D)?(s=Re({},this._lastAxisWidths),o=Re({},this._lastVisibility)):(s={top:0,bottom:0,left:0,right:0},o={crossLines:!0,series:!0},this._lastCrossLineIds=i);const a=new Set(this.axes.map(D=>D.position));for(const D of Object.keys(s))a.has(D)||delete s[D];const c=(D,R)=>!Object.keys(D).some(O=>null==s[O])&&o.crossLines===R.crossLines&&o.series===R.series&&Object.entries(s).every(([O,L])=>{const k=D[O];return null==L&&null==k||L===k}),u=D=>KI(D,R=>R&&Math.abs(R)===1/0?0:null!=R?Math.ceil(R):R);let p={},g={},m=!1,y=null==(t=this.seriesRect)?void 0:t.clone(),b=0,_={};do{Object.assign(s,p),Object.assign(o,g);const D=this.updateAxesPass(s,e.clone(),y);if(p=u(D.axisWidths),g=D.visibility,m=D.clipSeries,y=D.seriesRect,_=D.primaryTickCounts,b++>10){tt.warn("unable to find stable axis layout.");break}}while(!c(p,g));return this.axes.forEach(D=>{D.update(_[D.direction])}),this.axes.forEach(D=>{if(D.setCrossLinesVisible(o.crossLines),y)switch(D.clipGrid(y.x,y.y,y.width+5,y.height+5),D.position){case"left":case"right":D.clipTickLines(e.x,y.y,e.width+5,y.height+5);break;case"top":case"bottom":D.clipTickLines(y.x,e.y,y.width+5,e.height+5)}}),this._lastAxisWidths=s,this._lastVisibility=o,{seriesRect:y,animationRect:e,visibility:o,clipSeries:m}}updateAxesPass(e,t,i){const n={},s={},o={series:!0,crossLines:!0};let a=!1;const c={},u=this.applySeriesPadding(t),p=i?this.buildCrossLinePadding(e):{},g=this.buildAxisBound(u,e,p,o),m=this.buildSeriesRect(g,e);return this.axes.forEach(y=>{var b,_;const{position:E="left"}=y,{clipSeries:D,axisThickness:R,axisOffset:O}=this.calculateAxisDimensions({axis:y,seriesRect:m,paddedBounds:u,axisWidths:e,newAxisWidths:s,primaryTickCounts:c,clipSeries:a,addInterAxisPadding:(null!=(b=n[E])?b:0)>0});n[E]=(null!=(_=n[E])?_:0)+1,a=a||D,this.positionAxis({axis:y,axisBound:g,axisOffset:O,axisThickness:R,axisWidths:e,primaryTickCounts:c,seriesRect:m})}),{clipSeries:a,seriesRect:m,axisWidths:s,visibility:o,primaryTickCounts:c}}buildCrossLinePadding(e){var t;const i={};this.axes.forEach(n=>{n.crossLines&&n.crossLines.forEach(s=>{s.calculatePadding(i)})});for(const[n,s=0]of Object.entries(i))i[n]=Math.max(s-(null!=(t=e[n])?t:0),0);return i}applySeriesPadding(e){const t=e.clone(),i=this.axes.slice().reverse();return zj.forEach(n=>{const s=this.seriesArea.padding[n],o=i.find(a=>a.position===n);o?o.seriesAreaPadding=s:t.shrink(s,n)}),t}buildAxisBound(e,t,i,n){var s,o,a,c;const u=e.clone(),{top:p=0,right:g=0,bottom:m=0,left:y=0}=i,b=y+g,_=p+m,E=(null!=(s=t.left)?s:0)+(null!=(o=t.right)?o:0)+b,D=(null!=(a=t.top)?a:0)+(null!=(c=t.bottom)?c:0)+_;return u.width<=E||u.height<=D?(n.crossLines=!1,n.series=!1,u):(u.x+=y,u.y+=p,u.width-=b,u.height-=_,u)}buildSeriesRect(e,t){const i=e.clone(),{top:n,bottom:s,left:o,right:a}=t;return i.x+=o??0,i.y+=n??0,i.width-=(o??0)+(a??0),i.height-=(n??0)+(s??0),i.width=Math.max(0,i.width),i.height=Math.max(0,i.height),i}clampToOutsideSeriesRect(e,t,i,n){const{x:s,y:o,width:a,height:c}=e;return(1===n?Math.min:Math.max)(t,[s,o,s+a,o+c][("x"===i?0:1)+(1===n?0:2)])}calculateAxisDimensions(e){var t,n,s,o;const{axis:a,seriesRect:c,paddedBounds:u,axisWidths:p,newAxisWidths:g,primaryTickCounts:m,addInterAxisPadding:y}=e;let{clipSeries:b}=e;const{position:_="left",direction:E}=a,R=null!=(t=g[_])?t:0;switch(_){case"top":case"bottom":a.range=[0,c.width],a.gridLength=c.height;break;case"right":case"left":a.range=(ye=a)instanceof Dp||ye instanceof Yg?[0,c.height]:[c.height,0],a.gridLength=c.width}var ye;const{min:O,max:L}=this.zoomManager.getAxisZoom(a.id);a.visibleRange=[O,L],b||(b=a.dataDomain.clipped||a.visibleRange[0]>0||a.visibleRange[1]<1);let k=a.nice?m[E]:void 0;const U="y"===E;a.maxThickness=a.thickness||.3*(U?u.width:u.height);const q=a.calculateLayout(k);let J;if(k=q.primaryTickCount,null!=m[E]||(m[E]=k),null!=a.thickness&&a.thickness>0)J=a.thickness;else{const{bbox:ye}=q;J=U?ye.width:ye.height}return y&&(J+=15),J=Math.ceil(J),g[_]=(null!=(n=g[_])?n:0)+J,a.gridPadding=(null!=(s=p[_])?s:0)-(null!=(o=g[_])?o:0),{clipSeries:b,axisThickness:J,axisOffset:R,primaryTickCount:k}}positionAxis(e){var t,i,n,s;const{axis:o,axisBound:a,axisWidths:c,seriesRect:u,axisOffset:p,axisThickness:g}=e,{position:m}=o;switch(m){case"top":o.translation.x=a.x+(null!=(t=c.left)?t:0),o.translation.y=this.clampToOutsideSeriesRect(u,a.y+1+p+g,"y",1);break;case"bottom":o.translation.x=a.x+(null!=(i=c.left)?i:0),o.translation.y=this.clampToOutsideSeriesRect(u,a.y+a.height+1-g-p,"y",-1);break;case"left":o.translation.y=a.y+(null!=(n=c.top)?n:0),o.translation.x=this.clampToOutsideSeriesRect(u,a.x+p+g,"x",1);break;case"right":o.translation.y=a.y+(null!=(s=c.top)?s:0),o.translation.x=this.clampToOutsideSeriesRect(u,a.x+a.width-g-p,"x",-1)}o.updatePosition({rotation:io(o.rotation),sideFlag:o.label.getSideFlag()})}shouldFlipXY(){return!this.series.some(e=>!(e instanceof tm&&e.shouldFlipXY()))}};SN.className="CartesianChart",SN.type="cartesian";var $j=SN,XD=class lU{static isInstance(e){var t;return e instanceof lU||"AgChartInstanceProxy"===(null==(t=e.constructor)?void 0:t.name)&&null!=e.chart||null!=e.chart&&this.validateImplementation(e)}static validateImplementation(e){var t;const n=Object.keys(null!=(t=Object.getPrototypeOf(e))?t:{});return["getOptions","destroy"].every(s=>n.includes(s))}constructor(e){this.chart=e}getOptions(){return Cs(this.chart.getOptions())}resetAnimations(){this.chart.resetAnimations()}skipAnimations(){this.chart.skipAnimations()}destroy(){this.chart.destroy()}};XD.chartInstances=new WeakMap,I([Bs({oldValue(r){XD.chartInstances.delete(r)},newValue(r){XD.chartInstances.set(r,this)}})],XD.prototype,"chart",2);var k_=XD,Lu=class extends $i{constructor(){super([0,1],[0,1]),this.type="linear"}toDomain(r){return r}ticks(){var r;const e=null!=(r=this.tickCount)?r:$i.defaultTickCount;if(!this.domain||this.domain.length<2||e<1||this.domain.some(s=>!isFinite(s)))return[];this.refresh();const[t,i]=this.getDomain(),{interval:n}=this;if(n){const s=Math.abs(n);if(!this.isDenseInterval({start:t,stop:i,interval:s}))return BD(t,i,s)}return CM(t,i,e,this.minTickCount,this.maxTickCount)}update(){!this.domain||this.domain.length<2||this.nice&&this.updateNiceDomain()}getTickStep(r,e){var t,i;const n=null!=(t=this.tickCount)?t:$i.defaultTickCount;return null!=(i=this.interval)?i:R_(r,e,n,this.minTickCount,this.maxTickCount)}updateNiceDomain(){var r;const e=null!=(r=this.tickCount)?r:$i.defaultTickCount;if(e<1)return void(this.niceDomain=[...this.domain]);let[t,i]=this.domain;if(1===e)[t,i]=function m3(r,e){const t=Math.abs(e-r),i=Math.floor(Math.log10(t)),n=Math.pow(10,i),s=r>e?Math.ceil:Math.floor,o=e<r?Math.floor:Math.ceil;return FG.map(a=>{const c=a*n,u=s(r/c)*c,p=o(e/c)*c;return{error:1-t/Math.abs(p-u),domain:[u,p]}}).sort((a,c)=>a.error-c.error)[0].domain}(t,i);else{const n=t>i?Math.ceil:Math.floor,s=i<t?Math.floor:Math.ceil,o=4;for(let a=0;a<o;a++){const c=t,u=i,p=this.getTickStep(t,i),[g,m]=this.domain;if(p>=1)t=n(g/p)*p,i=s(m/p)*p;else{const y=1/p;t=n(g*y)/y,i=s(m*y)/y}if(t===c&&i===u)break}}this.niceDomain=[t,i]}tickFormat({ticks:r,specifier:e}){return IG(r??this.ticks(),e)}};var WV=class extends nd{constructor(){super(...arguments),this.maxSpacing=NaN}};I([H(MF),Ep(NaN)],WV.prototype,"maxSpacing",2);var QC=class extends UD{constructor(r,e=new Lu){super(r,e),this.min=NaN,this.max=NaN}normaliseDataDomain(r){const{min:e,max:t}=this,{extent:i,clipped:n}=ED(r,e,t);return{domain:i,clipped:n}}formatDatum(r){return"number"==typeof r?r.toFixed(2):(tt.warnOnce("data contains Date objects which are being plotted against a number axis, please only use a number axis for numbers."),String(r))}createTick(){return new WV}updateSecondaryAxisTicks(r){if(null==this.dataDomain)throw new Error("AG Charts - dataDomain not calculated, cannot perform tick calculation.");if(0===this.dataDomain.domain.length)return[];const[e,t]=function Kj(r,e,t){let[i,n]=yp(r);i=function Yj(r,e,t){const i=Math.abs(e-r)/(t-1),n=Math.floor(Math.log10(i)),s=Math.pow(10,n);return Math.floor(r/s)*s}(Math.floor(i),n,e);const s=function Xj(r,e,t){return function Zj(r){const e=Math.floor(Math.log10(r)),t=Math.pow(10,e),i=r/t*10;return i>0&&i<=1?t/10:i>1&&i<=2?2*t/10:i>1&&i<=5?5*t/10:i>5&&i<=10?10*t/10:i>10&&i<=20?20*t/10:i>20&&i<=40?40*t/10:i>40&&i<=50?50*t/10:i>50&&i<=100?100*t/10:i}((e-r)/(t-1))}(i,n,e);n=i+(e-1)*s;const a=t?[n,i]:[i,n],c=function qj(r,e,t){const i=Math.floor(Math.log10(e)),n=e>0&&e<1?Math.abs(i):0,s=Math.pow(10,n),o=VD(n);for(let a=0;a<t;a++)o[a]=Math.round((r+e*a)*s)/s;return o}(i,s,e);return[a,c]}(this.dataDomain.domain,r??0,this.reverse);return this.scale.nice=!1,this.scale.domain=e,this.scale.update(),t}};QC.className="NumberAxis",QC.type="number",I([H(Pu(__,xD("max"))),Ep(NaN)],QC.prototype,"min",2),I([H(Pu(__,PD("min"))),Ep(NaN)],QC.prototype,"max",2);var jV=zi(r=>Xl(r)&&0!==r,"a non-zero number"),im=class extends QC{constructor(r){super(r,new BF),this.min=NaN,this.max=NaN}normaliseDataDomain(r){const{min:e,max:t}=this,{extent:i,clipped:n}=ED(r,e,t),o=i[0]<0&&i[1]>0,a=0===i[0]&&0===i[1];return(i[0]>i[1]||o||a)&&(r=[],o?tt.warn("the data domain crosses zero, the chart data cannot be rendered. See log axis documentation for more information."):a&&tt.warn("the data domain has 0 extent, no data is rendered.")),0===i[0]&&(i[0]=1),0===i[1]&&(i[1]=-1),{domain:i,clipped:n}}set base(r){this.scale.base=r}get base(){return this.scale.base}};im.className="LogAxis",im.type="log",I([H(Pu(__,jV,xD("max"))),Ep(NaN)],im.prototype,"min",2),I([H(Pu(__,jV,PD("min"))),Ep(NaN)],im.prototype,"max",2);var zV=class extends nd{constructor(){super(...arguments),this.maxSpacing=NaN}};I([H(MF),Ep(NaN)],zV.prototype,"maxSpacing",2);var ey=class extends UD{constructor(r){super(r,new WF),this.datumFormat="%m/%d/%y, %H:%M:%S",this.min=void 0,this.max=void 0;const{scale:e}=this;this.refreshScale(),this.datumFormatter=e.tickFormat({specifier:this.datumFormat})}normaliseDataDomain(r){var e;let{min:t,max:i}=this,n=!1;return"number"==typeof t&&(t=new Date(t)),"number"==typeof i&&(i=new Date(i)),r.length>2&&(r=(null!=(e=Tu(r))?e:[0,1e3]).map(s=>new Date(s))),t instanceof Date&&(n||(n=t>r[0]),r=[t,r[1]]),i instanceof Date&&(n||(n=i<r[1]),r=[r[0],i]),r[0]>r[1]&&(r=[]),{domain:r,clipped:n}}createTick(){return new zV}onLabelFormatChange(r,e){e?super.onLabelFormatChange(r,e):this.labelFormatter=this.scale.tickFormat({ticks:r})}formatDatum(r){var e;return null!=(e=this.moduleCtx.callbackCache.call(this.datumFormatter,r))?e:String(r)}calculatePadding(r,e,t){return t?[1,0]:[0,1]}};ey.className="TimeAxis",ey.type="time",I([H(Pu(TF,xD("max")),{optional:!0})],ey.prototype,"min",2),I([H(Pu(TF,PD("min")),{optional:!0})],ey.prototype,"max",2);var OM=(r,e,t,i,n)=>{let s=!1,o=!1,a=i-Math.sqrt(Math.max(Yt(n,2)-Yt(t,2),0)),c=0,u=0,p=t-Math.sqrt(Math.max(Yt(n,2)-Yt(i,2),0));return a>r?(s=!0,a=r,c=t-Math.sqrt(Math.max(Yt(n,2)-Yt(i-r,2)))):a<1e-6&&(a=0),p>e?(o=!0,u=i-Math.sqrt(Math.max(Yt(n,2)-Yt(t-e,2))),p=e):p<1e-6&&(p=0),{leading0:a,leading1:c,trailing0:u,trailing1:p,leadingClipped:s,trailingClipped:o}},MM=(r,{x0:e,y0:t,x1:i,y1:n,cx:s,cy:o},a,c)=>{if(c&&r.moveTo(e,t),e!==i||t!==n){const u=Math.atan2(t-o,e-s),p=Math.atan2(n-o,i-s);r.arc(s,o,a,u,p)}else r.lineTo(e,t)},bN=(r,e,t,i,n,s,o)=>{let{topLeft:a,topRight:c,bottomRight:u,bottomLeft:p}=s;const g=Math.max(a+p,c+u),m=Math.max(a+c,p+u);if(g<=0&&m<=0)return void r.rect(e,t,i,n);if(null==o&&a===c&&a===u&&a===p)return void r.roundRect(e,t,i,n,a);if(i<0&&(e+=i,i=Math.abs(i)),n<0&&(t+=n,n=Math.abs(n)),null!=o){const j=Math.max(e,o.x),q=Math.min(e+i,o.x+o.width),J=Math.max(t,o.y),me=Math.min(t+n,o.y+o.height);e=j,t=J,i=q-j,n=me-J}if(i<=0||n<=0)return;o??(o=new Bt(e,t,i,n));const y=Math.max(g/o.height,m/o.width,1);y>1&&(a/=y,c/=y,u/=y,p/=y);let R,O,L,k,b=!0,_=!0,E=!0,D=!0;if(b){const j=OM(n,i,Math.max(o.x+a-e,0),Math.max(o.y+a-t,0),a);j.leadingClipped&&(D=!1),j.trailingClipped&&(_=!1),R={x0:Math.max(e+j.leading1,e),y0:Math.max(t+j.leading0,t),x1:Math.max(e+j.trailing1,e),y1:Math.max(t+j.trailing0,t),cx:o.x+a,cy:o.y+a}}if(_){const j=OM(i,n,Math.max(o.y+c-t,0),Math.max(e+i-(o.x+o.width-c),0),c);j.leadingClipped&&(b=!1),j.trailingClipped&&(E=!1),O={x0:Math.min(e+i-j.leading0,e+i),y0:Math.max(t+j.leading1,t),x1:Math.min(e+i-j.trailing0,e+i),y1:Math.max(t+j.trailing1,t),cx:o.x+o.width-c,cy:o.y+c}}if(E){const j=OM(n,i,Math.max(e+i-(o.x+o.width-u),0),Math.max(t+n-(o.y+o.height-u),0),u);j.leadingClipped&&(_=!1),j.trailingClipped&&(D=!1),L={x0:Math.min(e+i-j.leading1,e+i),y0:Math.min(t+n-j.leading0,t+n),x1:Math.min(e+i-j.trailing1,e+i),y1:Math.min(t+n-j.trailing0,t+n),cx:o.x+o.width-u,cy:o.y+o.height-u}}if(D){const j=OM(i,n,Math.max(t+n-(o.y+o.height-p),0),Math.max(o.x+p-e,0),p);j.leadingClipped&&(E=!1),j.trailingClipped&&(b=!1),k={x0:Math.max(e+j.leading0,e),y0:Math.min(t+n-j.leading1,t+n),x1:Math.max(e+j.trailing0,e),y1:Math.min(t+n-j.trailing1,t+n),cx:o.x+p,cy:o.y+o.height-p}}let U=!1;b&&null!=R&&(MM(r,R,a,!U),U||(U=!0)),_&&null!=O&&(MM(r,O,c,!U),U||(U=!0)),E&&null!=L&&(MM(r,L,u,!U),U||(U=!0)),D&&null!=k&&(MM(r,k,p,!U),U||(U=!0)),r.closePath()},so=class extends tl{constructor(){super(...arguments),this.borderPath=new O_,this.x=0,this.y=0,this.width=10,this.height=10,this.topLeftCornerRadius=0,this.topRightCornerRadius=0,this.bottomRightCornerRadius=0,this.bottomLeftCornerRadius=0,this.cornerRadiusBbox=void 0,this.crisp=!1,this.lastUpdatePathStrokeWidth=Ql.defaultStyles.strokeWidth,this.effectiveStrokeWidth=Ql.defaultStyles.strokeWidth,this.microPixelEffectOpacity=1}set cornerRadius(r){this.topLeftCornerRadius=r,this.topRightCornerRadius=r,this.bottomRightCornerRadius=r,this.bottomLeftCornerRadius=r}isDirtyPath(){return this.lastUpdatePathStrokeWidth!==this.strokeWidth||!(!this.path.isDirty()&&!this.borderPath.isDirty())}updatePath(){var r,e,t;const{path:i,borderPath:n,crisp:s,topLeftCornerRadius:o,topRightCornerRadius:a,bottomRightCornerRadius:c,bottomLeftCornerRadius:u}=this;let{x:p,y:g,width:m,height:y,strokeWidth:b,cornerRadiusBbox:_}=this;const D=1/(null!=(e=null==(r=this.layerManager)?void 0:r.canvas.pixelRatio)?e:1);let R=1;if(i.clear({trackChanges:!0}),n.clear({trackChanges:!0}),s&&(m<=D&&(R*=m/D),y<=D&&(R*=y/D),m=this.align(p,m),y=this.align(g,y),p=this.align(p),g=this.align(g),_=null!=_?new Bt(this.align(_.x),this.align(_.y),this.align(_.x,_.width),this.align(_.y,_.height)):void 0),b)if(m<D){const O=p+D/2;n.moveTo(O,g),n.lineTo(O,g+y),b=D,this.borderClipPath=void 0}else if(y<D){const O=g+D/2;n.moveTo(p,O),n.lineTo(p+m,O),b=D,this.borderClipPath=void 0}else if(b<m&&b<y){const O=b/2;p+=O,g+=O,m-=b,y-=b;const L=_?.clone().shrink(O),k={topLeft:o>0?o-b:0,topRight:a>0?a-b:0,bottomRight:c>0?c-b:0,bottomLeft:u>0?u-b:0};this.borderClipPath=void 0,bN(i,p,g,m,y,k,L),bN(n,p,g,m,y,k,L)}else this.borderClipPath=null!=(t=this.borderClipPath)?t:new O_,this.borderClipPath.clear({trackChanges:!0}),this.borderClipPath.rect(p,g,m,y),n.rect(p,g,m,y);else{const O={topLeft:o,topRight:a,bottomRight:c,bottomLeft:u};this.borderClipPath=void 0,bN(i,p,g,m,y,O,_)}this.effectiveStrokeWidth=b,this.lastUpdatePathStrokeWidth=b,this.microPixelEffectOpacity=R}computeBBox(){const{x:r,y:e,width:t,height:i}=this;return new Bt(r,e,t,i)}isPointInPath(r,e){const t=this.transformPoint(r,e);return this.computeBBox().containsPoint(t.x,t.y)}applyFillAlpha(r){const{fillOpacity:e,microPixelEffectOpacity:t,opacity:i}=this,{globalAlpha:n}=r;r.globalAlpha=n*i*e*t}renderStroke(r){const{stroke:e,effectiveStrokeWidth:t,borderPath:i,borderClipPath:n,opacity:s,microPixelEffectOpacity:o}=this;if(e&&t){const{strokeOpacity:c,lineDash:u,lineDashOffset:p,lineCap:g,lineJoin:m}=this;n&&(n.draw(r),r.clip()),i.draw(r);const{globalAlpha:y}=r;r.strokeStyle=e,r.globalAlpha=y*s*c*o,r.lineWidth=t,u&&r.setLineDash(u),p&&(r.lineDashOffset=p),g&&(r.lineCap=g),m&&(r.lineJoin=m),r.stroke(),r.globalAlpha=y}}};so.className="Rect",I([Jt()],so.prototype,"x",2),I([Jt()],so.prototype,"y",2),I([Jt()],so.prototype,"width",2),I([Jt()],so.prototype,"height",2),I([Jt()],so.prototype,"topLeftCornerRadius",2),I([Jt()],so.prototype,"topRightCornerRadius",2),I([Jt()],so.prototype,"bottomRightCornerRadius",2),I([Jt()],so.prototype,"bottomLeftCornerRadius",2),I([Jt()],so.prototype,"cornerRadiusBbox",2),I([Jt()],so.prototype,"crisp",2);var ZD=class extends dD{constructor(r){var e;super(),this.node=new vt({name:"background",zIndex:0}),this.rectNode=new so,this.visible=!0,this.fill="white",this.image=void 0,this.node.appendChild(this.rectNode),null==(e=r.scene.root)||e.appendChild(this.node),this.destroyFns.push(()=>{var t;return null==(t=r.scene.root)?void 0:t.removeChild(this.node)},r.layoutService.addListener("layout-complete",t=>this.onLayoutComplete(t)))}onLayoutComplete(r){const{width:e,height:t}=r.chart;this.rectNode.width=e,this.rectNode.height=t}};I([H(Ot),Qi("node","visible")],ZD.prototype,"visible",2),I([H(Si,{optional:!0}),Qi("rectNode","fill")],ZD.prototype,"fill",2),I([H(Ct,{optional:!0})],ZD.prototype,"image",2);var KV={type:"root",optionsKey:"background",packageType:"community",chartTypes:["cartesian","polar","hierarchy"],instanceConstructor:ZD},od=class extends tl{constructor(){super(...arguments),this._fill="#f2f2f2",this._stroke="#999999",this._strokeWidth=1,this._lineCap="square",this._centerX=0,this._centerY=0,this._width=8,this._gripLineGap=2,this._gripLineLength=8,this._height=16}set centerX(r){this._centerX!==r&&(this._centerX=r,this.dirtyPath=!0)}get centerX(){return this._centerX}set centerY(r){this._centerY!==r&&(this._centerY=r,this.dirtyPath=!0)}get centerY(){return this._centerY}set width(r){this._width!==r&&(this._width=r,this.dirtyPath=!0)}get width(){return this._width}set gripLineGap(r){this._gripLineGap!==r&&(this._gripLineGap=r,this.dirtyPath=!0)}get gripLineGap(){return this._gripLineGap}set gripLineLength(r){this._gripLineLength!==r&&(this._gripLineLength=r,this.dirtyPath=!0)}get gripLineLength(){return this._gripLineLength}set height(r){this._height!==r&&(this._height=r,this.dirtyPath=!0)}get height(){return this._height}computeBBox(){const{centerX:r,centerY:e,width:t,height:i}=this;return new Bt(r-t/2,e-i/2,t,i)}isPointInPath(r,e){const t=this.transformPoint(r,e);return this.computeBBox().containsPoint(t.x,t.y)}updatePath(){const{path:r,centerX:e,centerY:t,width:i,height:n}=this;r.clear();const s=e-i/2,o=t-n/2,a=this.align(s),c=this.align(o),u=a+this.align(s,i),p=c+this.align(o,n);r.moveTo(a,c),r.lineTo(u,c),r.lineTo(u,p),r.lineTo(a,p),r.closePath();const g=this.gripLineGap/2,m=this.gripLineLength/2;r.moveTo(this.align(e-g),this.align(t-m)),r.lineTo(this.align(e-g),this.align(t+m)),r.moveTo(this.align(e+g),this.align(t-m)),r.lineTo(this.align(e+g),this.align(t+m))}};function xM(r,e){r!==e&&(this.dirtyPath=!0)}od.className="RangeHandle",I([H(Si)],od.prototype,"_fill",2),I([H(Si)],od.prototype,"_stroke",2),I([H(qe)],od.prototype,"_strokeWidth",2),I([H(Jk)],od.prototype,"_lineCap",2),I([H(qe)],od.prototype,"_width",2),I([H(qe)],od.prototype,"_gripLineGap",2),I([H(qe)],od.prototype,"_gripLineLength",2),I([H(qe)],od.prototype,"_height",2);var nm=class extends tl{constructor(){super(...arguments),this.x=0,this.y=0,this.width=200,this.height=30,this.minRange=.001,this._min=0,this._max=1}set min(r){var e;r=Ti(0,r,this.max-this.minRange),this._min!==r&&!isNaN(r)&&(this._min=r,this.dirtyPath=!0,null==(e=this.onRangeChange)||e.call(this))}get min(){return this._min}set max(r){var e;r=Ti(this.min+this.minRange,r,1),this._max!==r&&!isNaN(r)&&(this._max=r,this.dirtyPath=!0,null==(e=this.onRangeChange)||e.call(this))}get max(){return this._max}computeBBox(){const{x:r,y:e,width:t,height:i}=this;return new Bt(r,e,t,i)}computeVisibleRangeBBox(){const{x:r,y:e,width:t,height:i,min:n,max:s}=this,o=r+t*n;return new Bt(o,e,r+t*s-o,i)}updatePath(){const{path:r,x:e,y:t,width:i,height:n,min:s,max:o}=this;r.clear();const a=this.align(e),c=this.align(t),u=a+this.align(e,i),p=c+this.align(t,n);r.moveTo(a,c),r.lineTo(u,c),r.lineTo(u,p),r.lineTo(a,p),r.lineTo(a,c);const g=this.align(e+i*s),m=this.align(e+i*o);r.moveTo(g,c),r.lineTo(g,p),r.lineTo(m,p),r.lineTo(m,c),r.lineTo(g,c)}};nm.className="RangeMask",I([Bs({changeValue:xM}),H(qe)],nm.prototype,"x",2),I([Bs({changeValue:xM}),H(qe)],nm.prototype,"y",2),I([Bs({changeValue:xM}),H(qe)],nm.prototype,"width",2),I([Bs({changeValue:xM}),H(qe)],nm.prototype,"height",2),I([H(Xi)],nm.prototype,"_min",2),I([H(Xi)],nm.prototype,"_max",2);var JD=class cU extends vt{constructor(){super({name:"rangeSelectorGroup",layer:!0}),this.minHandle=new od,this.maxHandle=new od,this.background=(()=>{const e=new vt({name:"navigator-background"});return e.zIndex=1,this.appendChild(e),e})(),this.mask=(()=>{const{x:e,y:t,width:i,height:n,min:s,max:o}=cU.defaults,a=new nm;a.x=e,a.y=t,a.width=i,a.height=n,a.min=s,a.max=o,a.zIndex=2;const{minHandle:c,maxHandle:u}=this;return c.centerX=e,u.centerX=e+i,c.centerY=u.centerY=t+n/2,c.zIndex=4,u.zIndex=3,this.append([a,c,u]),a.onRangeChange=()=>{var p;this.updateHandles(),null==(p=this.onRangeChange)||p.call(this)},a})(),this.isContainerNode=!0}layout(e,t,i,n){this.mask.x=e,this.mask.y=t,this.mask.width=i,this.mask.height=n,this.updateHandles(),this.background.translationX=e,this.background.translationY=t}updateHandles(){const{x:e,y:t,width:i,height:n}=this.mask,{minHandle:s,maxHandle:o,min:a,max:c}=this;s.centerX=e+i*a,o.centerX=e+i*c,s.centerY=o.centerY=t+n/2,a+(c-a)/2<.5?(s.zIndex=3,o.zIndex=4):(s.zIndex=4,o.zIndex=3)}computeBBox(){return this.mask.computeBBox()}computeVisibleRangeBBox(){return this.mask.computeVisibleRangeBBox()}};JD.className="Range",JD.defaults={x:0,y:0,width:200,height:30,min:0,max:1},I([Kg("mask.min")],JD.prototype,"min",2),I([Kg("mask.max")],JD.prototype,"max",2);var Jj=JD,ad=class extends dD{constructor(r){var e;super(),this.ctx=r,this.rs=new Jj,this.miniChart=void 0,this.minHandleDragging=!1,this.maxHandleDragging=!1,this.panHandleOffset=NaN,this.enabled=!1,this.height=30,this.margin=10,this.visible=!0,this.x=0,this.y=0,this.width=0,this.rs.onRangeChange=function Za(r,e=0,t){const{leading:i=!1,trailing:n=!0,maxWait:s=1/0}=t??{};let o,a;if(s<e)throw new Error("Value of maxWait cannot be lower than waitMs.");return Object.assign(function c(...u){if(i&&!a)return a=Date.now(),o=setTimeout(()=>a=null,e),void r(...u);let p=e;if(s!==1/0&&a){const g=Date.now()-a;e>s-g&&(p=s-g)}clearTimeout(o),a??(a=Date.now()),o=setTimeout(()=>{a=null,n&&r(...u)},p)},{cancel(){clearTimeout(o),a=null}})}(()=>this.onRangeChange()),null==(e=r.scene.root)||e.appendChild(this.rs),this.destroyFns.push(r.interactionManager.addListener("drag-start",i=>this.onDragStart(i),13),r.interactionManager.addListener("drag",i=>this.onDrag(i),13),r.interactionManager.addListener("hover",i=>this.onDrag(i),13),r.interactionManager.addListener("drag-end",()=>this.onDragStop(),13),r.zoomManager.addListener("zoom-change",()=>this.onZoomChange()),()=>{var i;return null==(i=r.scene.root)?void 0:i.removeChild(this.rs)},()=>delete this.rs.onRangeChange),this.updateGroupVisibility()}updateGroupVisibility(){const r=Boolean(this.enabled&&this.visible);r!==this.rs.visible&&(this.rs.visible=r,r&&this.onRangeChange())}performLayout(r){return Be(this,arguments,function*({shrinkRect:e}){return this.enabled?(e.shrink(this.height+this.margin,"bottom"),this.y=e.y+e.height+this.margin):this.y=0,{shrinkRect:e}})}performCartesianLayout(r){return Be(this,null,function*(){const{x:e,width:t}=r.seriesRect;if(this.enabled){const{y:n,height:s}=this;this.rs.layout(e,n,t,s)}this.visible=!0,this.x=e,this.width=t})}onRangeChange(){var r,e;const{min:t,max:i}=this.rs,n=this.ctx.zoomManager.getZoom();((null==(r=n?.x)?void 0:r.min)!==t||(null==(e=n?.x)?void 0:e.max)!==i)&&this.ctx.zoomManager.updateZoom({x:{min:t,max:i},y:n?.y})}onZoomChange(){const r=this.ctx.zoomManager.getZoom();r&&r.x&&(this.min=r.x.min,this.max=r.x.max)}onDragStart(r){if(!this.enabled)return;const{offsetX:e,offsetY:t}=r,{rs:i}=this,{minHandle:n,maxHandle:s,min:o}=i,{x:a,width:c}=this,u=i.computeVisibleRangeBBox();this.minHandleDragging||this.maxHandleDragging||(n.zIndex<s.zIndex?s.containsPoint(e,t)?this.maxHandleDragging=!0:n.containsPoint(e,t)&&(this.minHandleDragging=!0):n.containsPoint(e,t)?this.minHandleDragging=!0:s.containsPoint(e,t)&&(this.maxHandleDragging=!0),!this.minHandleDragging&&!this.maxHandleDragging&&u.containsPoint(e,t)&&(this.panHandleOffset=(e-a)/c-o))}onDrag(r){if(!this.enabled)return;const{rs:e,panHandleOffset:t}=this,{minHandle:i,maxHandle:n}=e,{x:s,y:o,width:a,height:c}=this,{offsetX:u,offsetY:p}=r,g=s+a*e.min,y=new Bt(g,o,s+a*e.max-g,c),b=()=>Ti(0,(u-s)/a,1);if(i.containsPoint(u,p)||n.containsPoint(u,p)?this.ctx.cursorManager.updateCursor("navigator","ew-resize"):y.containsPoint(u,p)?this.ctx.cursorManager.updateCursor("navigator","grab"):this.ctx.cursorManager.updateCursor("navigator"),this.minHandleDragging)e.min=b();else if(this.maxHandleDragging)e.max=b();else if(!isNaN(t)){const _=e.max-e.min,E=Math.min(b()-t,1-_);E<=e.min?(e.min=E,e.max=e.min+_):(e.max=E+_,e.min=e.max-_)}}onDragStop(){this.stopHandleDragging()}stopHandleDragging(){this.minHandleDragging=this.maxHandleDragging=!1,this.panHandleOffset=NaN}};I([H(Ct,{optional:!0})],ad.prototype,"miniChart",2),I([H(Ot),w_(r=>r.updateGroupVisibility())],ad.prototype,"enabled",2),I([Kg("rs.mask")],ad.prototype,"mask",2),I([Kg("rs.minHandle")],ad.prototype,"minHandle",2),I([Kg("rs.maxHandle")],ad.prototype,"maxHandle",2),I([Kg("rs.min")],ad.prototype,"min",2),I([Kg("rs.max")],ad.prototype,"max",2),I([H(qe)],ad.prototype,"margin",2),I([H(Ot),w_(r=>r.updateGroupVisibility())],ad.prototype,"visible",2);var YV={type:"root",optionsKey:"navigator",packageType:"community",chartTypes:["cartesian"],instanceConstructor:ad,themeTemplate:{navigator:{enabled:!1,height:30,mask:{fill:"#999999",stroke:"#999999",strokeWidth:1,fillOpacity:.2},minHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8},maxHandle:{fill:"#f2f2f2",stroke:"#999999",strokeWidth:1,width:8,height:16,gripLineGap:2,gripLineLength:8}}}},_N=({takeColors:r})=>{const{fills:[e],strokes:[t]}=r(1);return{fill:e,stroke:t}},QD=r=>{const{fill:e,stroke:t}=_N(r);return{marker:{fill:e,stroke:t}}};function qV(r,e,t,i,n){const{addPhaseFn:s,updatePhaseFn:o,removePhaseFn:a}=n,c=(u,p,g)=>{t.animate({id:`${r}_${e}_${p.id}_${u}`,groupId:r,from:0,to:1,ease:AD,onUpdate(m,y){y&&"removed"!==u||(p.path.clear({trackChanges:!0}),g(m,p),p.checkPathDirty())},onStop(){"added"===u&&(p.path.clear({trackChanges:!0}),g(1,p),p.checkPathDirty())},phase:Do[u]})};for(const u of i)t.isSkipped()||(c("removed",u,a),c("updated",u,o)),c("added",u,s)}var eT=null;function un(r){if(null!=r)return""===r?"":(eT??(eT=document.createElement("div")),eT.textContent=String(r),eT.innerHTML)}function Ni({id:r},e,t,i){Ou(r,e,t,i,{opacity:0},{opacity:1},{phase:"trailing"})}function ty({id:r},e,t,i){Ou(r,e,t,i,{opacity:1},{opacity:0},{phase:"remove"})}function Mp(r){return{opacity:1}}var XV=class extends Di{constructor(){super(...arguments),this._dirty=3}markDirty(r,e=1){this._dirty<e&&(this._dirty=e)}markClean(r){this._dirty=0}isDirty(){return this._dirty>0}},ld=class extends XV{constructor(){super(...arguments),this.enabled=!0,this.color="rgba(0, 0, 0, 0.5)",this.xOffset=0,this.yOffset=0,this.blur=5}};I([H(Ot),at({redraw:3})],ld.prototype,"enabled",2),I([H(Si),at({redraw:3})],ld.prototype,"color",2),I([H(Xi),at({redraw:3})],ld.prototype,"xOffset",2),I([H(Xi),at({redraw:3})],ld.prototype,"yOffset",2),I([H(qe),at({redraw:3})],ld.prototype,"blur",2);var Qj=zi(r=>TV(r)||Object.getPrototypeOf(r)===nc,"a marker shape keyword such as 'circle', 'diamond' or 'square' or an object extending the Marker class"),da=class extends XV{constructor(){super(...arguments),this.enabled=!0,this.shape=Nu,this.size=6,this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1}getStyle(){const{size:r,fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s}=this;return{size:r,fill:e,fillOpacity:t,stroke:i,strokeWidth:n,strokeOpacity:s}}getDiameter(){return this.size+this.strokeWidth}};I([H(Ot),at({redraw:3})],da.prototype,"enabled",2),I([H(Qj),at({redraw:3})],da.prototype,"shape",2),I([H(qe),at({redraw:3})],da.prototype,"size",2),I([H(Si,{optional:!0}),at({redraw:3})],da.prototype,"fill",2),I([H(Fi),at({redraw:3})],da.prototype,"fillOpacity",2),I([H(Si,{optional:!0}),at({redraw:3})],da.prototype,"stroke",2),I([H(qe),at({redraw:3})],da.prototype,"strokeWidth",2),I([H(Fi),at({redraw:3})],da.prototype,"strokeOpacity",2),I([H(Zl,{optional:!0}),at({redraw:3})],da.prototype,"formatter",2);var ZV=class extends Di{constructor(){super(...arguments),this.enabled=!1}};I([H(Ot)],ZV.prototype,"enabled",2);var ua=class extends Di{constructor(){super(...arguments),this.enabled=!0,this.interaction=new ZV,this.position=new LD}toTooltipHtml(r,e){return this.renderer?ND(this.renderer(e),r):ND(r)}};I([H(Ot)],ua.prototype,"enabled",2),I([H(Ot,{optional:!0})],ua.prototype,"showArrow",2),I([H(Zl,{optional:!0})],ua.prototype,"renderer",2),I([H(Ct)],ua.prototype,"interaction",2),I([H(Ct)],ua.prototype,"position",2);var cr=class extends em{constructor(){super(...arguments),this.xName=void 0,this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.shadow=new ld,this.marker=new da,this.label=new Ss,this.tooltip=new ua,this.connectMissingData=!1}};function tT({id:r},e,t,i){Ou(r,"markers",e,t,{opacity:0},{opacity:1},{phase:i?Do[i]:"trailing"}),t.forEach(s=>s.cleanup())}function wN({id:r},e,t){Ou(r,"markers",e,t,{scalingX:0,scalingY:0},{scalingX:1,scalingY:1},{phase:"initial"}),t.forEach(i=>i.cleanup())}function EN({id:r,nodeDataDependencies:e},t,i){const n=e.seriesRectWidth;cn(r,"markers",t,i,{fromFn:(a,c)=>{var u,p;const g=null!=(p=null==(u=c.midPoint)?void 0:u.x)?p:n;return{scalingX:0,scalingY:0,delay:Ti(0,Hk(g/n),1),duration:.2,phase:"initial"}},toFn:()=>({scalingX:1,scalingY:1})})}function iT(r){return{opacity:1,scalingX:1,scalingY:1}}function nT(r,e){var t,i,n,s;return{translationX:null!=(i=null==(t=e.point)?void 0:t.x)?i:NaN,translationY:null!=(s=null==(n=e.point)?void 0:n.y)?s:NaN}}function DN(r,e){const t=(o,a)=>{const c=r[a][o];return Array.isArray(c)?c[0]:c},i=o=>{const{xValue:a}=o;return r.moved[a]?{point:t(a,"moved"),status:"updated"}:r.removed[a]?{point:t(a,"removed"),status:"removed"}:r.added[a]?{point:t(a,"added"),status:"added"}:{status:"unknown"}};return{fromFn:(o,a)=>{var c,u,p,g,m,y;const{status:b,point:_}=i(a);if("unknown"===b)return{opacity:0};const E={translationX:null!=(u=null==(c=_?.from)?void 0:c.x)?u:o.translationX,translationY:null!=(g=null==(p=_?.from)?void 0:p.y)?g:o.translationY,opacity:o.opacity,phase:Do[b]};return"added"===e?nt(Re({},E),{opacity:0,translationX:null==(m=_?.to)?void 0:m.x,translationY:null==(y=_?.to)?void 0:y.y,phase:Do.added}):("added"===b&&(E.opacity=0),E)},toFn:(o,a)=>{var c,u;const{status:p,point:g}=i(a);if("unknown"===p)return{opacity:0};const m={translationX:a.point.x,translationY:a.point.y,opacity:1,phase:Do[p]};return"removed"===p||"removed"===e?nt(Re({},m),{translationX:null==(c=g?.to)?void 0:c.x,translationY:null==(u=g?.to)?void 0:u.y,opacity:0,phase:Do.removed}):m}}}function TN(r){return r.reduce(({min:e,max:t},i)=>((null==e||e.point.x>i.point.x)&&(e=i),(null==t||t.point.x<i.point.x)&&(t=i),{min:e,max:t}),{})}function JV(r,e,t){return{x:t,y:(e.y-r.y)/(e.x-r.x)*(t-r.x)+r.y}}function QV(r,e,t,i){let n=-1,s=0;const o=[];for(;s<r.length;)r[s].change!==e?r[s].change!==t?(o.length>0&&(i(o,n,s),o.length=0),n=s,s++):s++:(o.push(r[s]),s++);o.length>0&&i(o,n,s)}function RN(r,e){QV(r,"out","in",(t,i,n)=>{var s,o;-1===i&&r[n]?t.forEach(a=>a.to=r[n].from):n===r.length&&r[i]?t.forEach(a=>a.to=r[i].from):"intersect"===e&&(null==(s=r[i])?void 0:s.from)&&(null==(o=r[n])?void 0:o.from)?t.forEach(a=>a.to=JV(r[i].from,r[n].from,a.from.x)):t.forEach(a=>a.to=a.from)}),QV(r,"in","out",(t,i,n)=>{var s,o;-1===i&&r[n]?t.forEach(a=>a.from=r[n].to):n===r.length&&r[i]?t.forEach(a=>a.from=r[i].to):"intersect"===e&&(null==(s=r[i])?void 0:s.to)&&(null==(o=r[n])?void 0:o.to)?t.forEach(a=>a.from=JV(r[i].to,r[n].to,a.to.x)):t.forEach(a=>a.from=a.to)})}function eB(r,e,t){const i=isNaN(r.x)?e.x:r.x,n=isNaN(r.y)?e.y:r.y,s=e.x-r.x,o=e.y-r.y;return{x:i+(isNaN(s)?0:s*t),y:n+(isNaN(o)?0:o*t)}}function AN(r,e,t){const{path:i}=t;let n;for(const s of r){const{from:o,to:a}=s,c=e[s.change];if(null==c||null==o||null==a)continue;const{x:u,y:p}=eB(o,a,c);if(!1===s.moveTo)i.lineTo(u,p);else if(!0!==s.moveTo&&n){if(n){const g="in"===s.moveTo?c:1-c,{x:m,y}=eB(n,{x:u,y:p},g);i.lineTo(m,y),i.moveTo(u,p)}}else i.moveTo(u,p);n={x:u,y:p}}}function ON({id:r,visible:e,nodeDataDependencies:t},i,n){const{seriesRectWidth:s,seriesRectHeight:o}=t;Ou(r,"path_properties",i,n,{clipX:0},{clipX:s},{phase:"initial",start:{clipMode:"normal",clipY:o,visible:e},finish:{clipMode:void 0,visible:e}})}function sT({id:r},e,t,i,n="add"){Ou(r,e,t,i,{opacity:0},{opacity:1},{phase:n})}function ez({id:r},e,t,i){Ou(r,e,t,i,{opacity:1},{opacity:0},{phase:"remove"})}function MN(r){return e=>({opacity:r.getOpacity(),clipScalingX:1,clipMode:void 0})}function PM({nodeDataDependencies:r},e){const t=i=>isFinite(i)?i:0;e.clipX=t(r.seriesRectWidth),e.clipY=t(r.seriesRectHeight)}function tB(r){return"continuous"===r.type||"log"===r.type}function iB(r){return"category"===r.type}function nB(r,e){return r.domain.length===e.domain.length&&r.range.length===e.range.length&&r.domain.every((t,i)=>t===e.domain[i])&&r.range.every((t,i)=>t===e.range[i])}function sB(r,e){return void 0===r||void 0===e?void 0!==r||void 0!==e:tB(r)&&tB(e)?r.type===e.type&&nB(r,e):!(!iB(r)||!iB(e))&&nB(r,e)}function IM(r,e){if(!e)return NaN;if(r instanceof Date&&(r=r.getTime()),"continuous"===e.type&&"number"==typeof r)return(r-e.domain[0])/(e.domain[1]-e.domain[0])*(e.range[1]-e.range[0])+e.range[0];if("log"===e.type&&"number"==typeof r)return e.convert(r);const t=e.domain.findIndex(i=>i===r);return t>=0?e.range[t]:NaN}function iz(r,e){const t=Number(r),i=Number(e);return isNaN(t)||isNaN(i)?r===e:Math.abs(i-t)<.25}function rB(r=!1,e=!1){return r===e?!!r:r?"in":"out"}function rT(r,e,t={}){var i,n,s,o;const{backfillSplitMode:a="intersect"}=t,c=O=>{var L,k;return{x:IM(null!=(L=O.xValue)?L:NaN,r.scales.x),y:IM(null!=(k=O.yValue)?k:NaN,r.scales.y)}},u=O=>{var L,k;return{x:IM(null!=(L=O.xValue)?L:NaN,e.scales.x),y:IM(null!=(k=O.yValue)?k:NaN,e.scales.y)}},p=[],g={added:{},moved:{},removed:{}},m=(O,L,k,U="move")=>{O&&(isNaN(O.point.x)||isNaN(O.point.y))&&(O=L);const j={from:O?.point,to:L?.point,moveTo:rB(O?.point.moveTo,L?.point.moveTo),change:U};"move"===U?(g.moved[k]=j,D++,R++):"in"===U?(g.added[k]=j,R++):"out"===U&&(g.removed[k]=j,D++),p.push(j)},{min:y,max:b}=TN(e.nodeData),{min:_,max:E}=TN(r.nodeData);let D=0,R=0;for(;D<e.nodeData.length||R<r.nodeData.length;){const O=e.nodeData[D],L=r.nodeData[R],k=O?c(O):void 0,U=L?u(L):void 0,j=void 0;if(k&&iz(k.x,L?.point.x))m(O,L,L.xValue,"move");else if(k&&k.x<(null!=(i=_?.point.x)?i:-1/0))m(O,j,O.xValue,"out");else if(k&&k.x>(null!=(n=E?.point.x)?n:1/0))m(O,j,O.xValue,"out");else if(U&&U.x<(null!=(s=y?.point.x)?s:-1/0))m(j,L,L.xValue,"in");else if(U&&U.x>(null!=(o=b?.point.x)?o:1/0))m(j,L,L.xValue,"in");else if(k&&k.x<L?.point.x)m(O,j,O.xValue,"out");else if(U&&U.x<O?.point.x)m(j,L,L.xValue,"in");else if(O)m(O,j,O.xValue,"out");else{if(!L)throw new Error("Unable to process points");m(j,L,L.xValue,"in")}}return RN(p,a),{result:p,resultMap:g}}function oT(r,e,t,i={}){var n,s,o;const{backfillSplitMode:a="intersect",multiDatum:c=!1}=i,u=[],p={added:{},moved:{},removed:{}},g={added:{},moved:{},removed:{}};let m,y;const b=(O,L)=>{var k;const j="move"===L.change?"moved":"in"===L.change?"added":"removed";c?(null!=(k=g[j])[O]||(k[O]=[]),g[j][O].push(L)):p[j][O]=L,m=L,y=E_(O)};let _=0,E=0,D=!1;for(;_<e.nodeData.length||E<r.nodeData.length;){const O=e.nodeData[_],L=r.nodeData[E],k=E_(O?.xValue),U=E_(L?.xValue);let j;if(k===U)j={change:"move",moveTo:rB(null!=(n=O.point.moveTo)&&n,L.point.moveTo),from:O.point,to:L.point},b(O?.xValue,j),_++,E++;else if(void 0!==t&&t.removed.indexOf(String(k))>=0)j={change:"out",moveTo:null!=(s=O.point.moveTo)&&s,from:O.point},b(O?.xValue,j),_++;else if(void 0!==t&&t.added.indexOf(String(U))>=0)j={change:"in",moveTo:null!=(o=L.point.moveTo)&&o,to:L.point},b(L?.xValue,j),E++;else if(c&&m&&y===k)j=Re({},m),b(O?.xValue,j),_++;else{if(!c||!m||y!==U){D=!0;break}j=Re({},m),b(L?.xValue,j),E++}u.push(j)}let R=-1/0;return D||(D=u.some(O=>{const{change:L,to:{x:k=-1/0}={}}=O;if("out"===L)return;const U=k<R;return R=k,U})),D?{result:void 0,resultMap:void 0}:(RN(u,a),c?{result:u,resultMap:g}:{result:u,resultMap:p})}function oB(r,e){let t="updated";const i=n=>n.visible;return!i(e)&&i(r)?t="added":i(e)&&!i(r)&&(t="removed"),t}function xN(r,e,t,i,n){const s=oB(r,e),u=function nz(r,e){const t="none"===e?"updated":r,i={fromFn:n=>{let s;return s="removed"===r?{finish:{visible:!1}}:"added"===r?{start:{visible:!0}}:{},Re({phase:Do[t]},s)},toFn:n=>({phase:Do[t]})};return"fade"===e?{fromFn:n=>Re({opacity:"added"===r?0:n.opacity},i.fromFn(n)),toFn:n=>Re({opacity:"removed"===r?0:1},i.toFn(n))}:i}(s,i);return{status:s,path:{addPhaseFn:(p,g)=>{n(t,{move:1,in:p},g)},updatePhaseFn:(p,g)=>{n(t,{move:p},g)},removePhaseFn:(p,g)=>{n(t,{move:0,out:p},g)}},pathProperties:u}}function aB(r,e,t){var i,n,s;const o="category"===(null==(i=r.scales.x)?void 0:i.type);if(o!==("category"===(null==(n=e.scales.x)?void 0:n.type)))return;const{result:c,resultMap:u}=o?oT(r,e,t):rT(r,e);let p="updated";if(e.visible&&!r.visible?p="removed":!e.visible&&r.visible&&(p="added"),void 0===c||void 0===u)return;const g=null==(s=t?.changed)||s||function tz(r,e){return!sB(r.scales.x,e.scales.x)||!sB(r.scales.y,e.scales.y)}(r,e)||"updated"!==p,m=xN(r,e,c,"fade",AN),y=DN(u,p);return nt(Re({},m),{marker:y,hasMotion:g})}I([H(et)],cr.prototype,"xKey",2),I([H(et,{optional:!0})],cr.prototype,"xName",2),I([H(et)],cr.prototype,"yKey",2),I([H(et,{optional:!0})],cr.prototype,"yName",2),I([H(qe,{optional:!0})],cr.prototype,"normalizedTo",2),I([H(Si)],cr.prototype,"fill",2),I([H(Fi)],cr.prototype,"fillOpacity",2),I([H(Si)],cr.prototype,"stroke",2),I([H(qe)],cr.prototype,"strokeWidth",2),I([H(Fi)],cr.prototype,"strokeOpacity",2),I([H(bp)],cr.prototype,"lineDash",2),I([H(qe)],cr.prototype,"lineDashOffset",2),I([H(Ct)],cr.prototype,"shadow",2),I([H(Ct)],cr.prototype,"marker",2),I([H(Ct)],cr.prototype,"label",2),I([H(Ct)],cr.prototype,"tooltip",2),I([H(Ot)],cr.prototype,"connectMissingData",2);var lB=(r=>(r[r.Fill=0]="Fill",r[r.Stroke=1]="Stroke",r[r.Marker=2]="Marker",r[r.Label=3]="Label",r))(lB||{});function FM(r){const{points:e}=r.fillData;return{top:e.slice(0,e.length/2),bottom:e.slice(e.length/2).reverse()}}function sm(r,e,t){return{scales:e.scales,nodeData:t[r],visible:e.visible}}function cB(r,e,t){var i,n;const s="category"===(null==(i=r.scales.x)?void 0:i.type);if(s!==("category"===(null==(n=e.scales.x)?void 0:n.type)))return;let a="updated";e.visible&&!r.visible?a="removed":!e.visible&&r.visible&&(a="added");const{resultMap:p}=s?oT(r,e,t,{backfillSplitMode:"static",multiDatum:!0}):rT(r,e,{backfillSplitMode:"static"}),{top:g,bottom:m}=s?function sz(r,e,t){const i=FM(e),n=FM(r),s={multiDatum:!0};return{top:oT(sm("top",r,n),sm("top",e,i),t,s),bottom:oT(sm("bottom",r,n),sm("bottom",e,i),t,s)}}(r,e,t):function rz(r,e){const t=FM(e),i=FM(r);return{top:rT(sm("top",r,i),sm("top",e,t)),bottom:rT(sm("bottom",r,i),sm("bottom",e,t))}}(r,e);if(void 0===p||void 0===g.result||void 0===m.result)return;return{fill:xN(r,e,[...g.result,...m.result.reverse()],e.stackVisible&&r.stackVisible?"none":"fade",AN),marker:DN(p,a)}}var PN=class dU extends tm{constructor(e){super({moduleCtx:e,pathsPerSeries:2,pathsZIndexSubOrderOffset:[0,1e3],hasMarkers:!0,markerSelectionGarbageCollection:!1,pickModes:[1,0],animationResetFns:{path:MN({getOpacity:()=>this.getOpacity()}),label:Mp,marker:(t,i)=>Re(Re({},{opacity:1,scalingX:1,scalingY:1}),nT(0,i))}}),this.properties=new cr}processData(e){return Be(this,null,function*(){if(null==this.data||!this.properties.isValid())return;const{data:t,visible:i,seriesGrouping:{groupIndex:n=this.id,stackCount:s=1}={}}=this,{xKey:o,yKey:a,connectMissingData:c,normalizedTo:u}=this.properties,p=!this.ctx.animationManager.isSkipped(),{isContinuousX:g,isContinuousY:m}=this.isContinuous(),y=[`area-stack-${n}-yValues`,`area-stack-${n}-yValues-trailing`,`area-stack-${n}-yValues-prev`,`area-stack-${n}-yValues-trailing-prev`,`area-stack-${n}-yValues-marker`],b=[];jO(u)&&(b.push(TM(this,[y[0],y[1],y[4]],u,"range")),b.push(TM(this,[y[2],y[3]],u,"range"))),!g&&p&&this.processedData&&b.push(JC(this.processedData)),p&&b.push(N_(this));const _={invalidValue:null};c&&s>1&&(_.invalidValue=0),i||(_.forceValue=0),yield this.requestDataModel(e,t,{props:[Mr(this,o,g,{id:"xValue"}),Ki(this,a,m,Re({id:"yValueRaw"},_)),...Qg(this,a,m,"window","current",nt(Re({id:"yValueEnd"},_),{groupId:y[0]})),...Qg(this,a,m,"window-trailing","current",nt(Re({id:"yValueStart"},_),{groupId:y[1]})),...Qg(this,a,m,"window","last",nt(Re({id:"yValuePreviousEnd"},_),{groupId:y[2]})),...Qg(this,a,m,"window-trailing","last",nt(Re({id:"yValuePreviousStart"},_),{groupId:y[3]})),...Qg(this,a,m,"normal","current",nt(Re({id:"yValueCumulative"},_),{groupId:y[4]})),...b],groupByKeys:!0,groupByData:!1}),this.animationState.transition("updateData")})}getSeriesDomain(e){const{processedData:t,dataModel:i,axes:n}=this;if(!t||!i||0===t.data.length)return[];const s=n.x,o=n.y,a=i.resolveProcessedDataDefById(this,"xValue"),c=i.getDomain(this,"xValue","key",t),u=i.getDomain(this,"yValueEnd","value",t);return"x"===e?"key"===a?.def.type&&"category"===a.def.valueType?c:Ro(Tu(c),s):Ro(o instanceof im||o instanceof ey?u:[u[0]>0?0:u[0],u[1]<0?0:u[1]],o)}createNodeData(){return Be(this,null,function*(){var e;const{axes:t,data:i,processedData:{data:n}={},dataModel:s}=this,o=t.x,a=t.y;if(!(o&&a&&i&&s&&this.properties.isValid()))return[];const{yKey:c,xKey:u,marker:p,label:g,fill:m,stroke:y,connectMissingData:b}=this.properties,{scale:_}=o,{scale:E}=a,D=$i.is(E),R=(null!=(e=_.bandwidth)?e:0)/2,O=s.resolveProcessedDataDefsByIds(this,["yValueStart","yValueEnd","yValueRaw","yValuePreviousStart","yValuePreviousEnd","yValueCumulative"]),L=Dt=>{const Ft=Dt,{point:Mt}=Ft,Nt=rs(Ft,["point"]);return nt(Re({},Nt),{point:nt(Re({},Mt),{moveTo:!0})})},k=(Dt,Ft,Mt)=>{const Nt=_.convert(Dt)+R,Ht=E.convert(Ft);return[{point:{x:Nt,y:E.convert(Mt)},yValue:Mt,xValue:Dt},{point:{x:Nt,y:Ht},yValue:Ft,xValue:Dt}]},U=(Dt,Ft,Mt)=>{let Nt;return(jO(this.properties.normalizedTo)?D&&LF(Mt):!isNaN(Mt))&&(Nt=Ft),{x:_.convert(Dt)+R,y:E.convert(Nt),size:p.size}},j=c,q=[],J=[],{visibleSameStackCount:me}=this.ctx.seriesStateManager.getVisiblePeerGroupIndex(this),ye={itemId:j,fillData:{itemId:j,points:[]},strokeData:{itemId:j,points:[]},labelData:q,nodeData:J,scales:yu(dU.prototype,this,"calculateScaling").call(this),visible:this.visible,stackVisible:me>0},Ae=ye.fillData.points,Pe=[],Le=ye.strokeData.points;let Je,Xe=-1,ht=-1/0;return n?.forEach(Dt=>{const{keys:Ft,keys:[Mt],datum:Nt,values:Ht}=Dt;Ht.forEach((Tn,jn)=>{var Rn,rt,ui;Xe++;const Li=Nt[jn],en=s.resolveProcessedDataDefsValues(O,{keys:Ft,values:Tn}),{yValueRaw:zn,yValueCumulative:lo}=en;let{yValueStart:Ds,yValueEnd:Ir,yValuePreviousStart:ol,yValuePreviousEnd:Hp}=en;const ur=null!=zn,al=U(Mt,+lo,zn);if(ur&&p&&J.push({index:Xe,series:this,itemId:j,datum:Li,midPoint:{x:al.x,y:al.y},cumulativeValue:Ir,yValue:zn,xValue:Mt,yKey:c,xKey:u,point:al,fill:null!=(Rn=p.fill)?Rn:m,stroke:null!=(rt=p.stroke)?rt:y,strokeWidth:null!=(ui=p.strokeWidth)?ui:this.getStrokeWidth(this.properties.strokeWidth)}),ur&&g){const Dm=this.getLabelText(g,{value:zn,datum:Li,xKey:u,yKey:c,xName:this.properties.xName,yName:this.properties.yName},Tm=>Ei(Tm)?Tm.toFixed(2):String(Tm));q.push({index:Xe,series:this,itemId:c,datum:Li,x:al.x,y:al.y,label:Dm?{text:Dm,fontStyle:g.fontStyle,fontWeight:g.fontWeight,fontSize:g.fontSize,fontFamily:g.fontFamily,textAlign:"center",textBaseline:"bottom",fill:g.color}:void 0})}const _m=null!=Je&&null!=Mt,wm=null!=ht&&ur;wm||(Ds=Ds??0,Ir=Ds??0,ol=ol??0,Hp=ol??0);const[$n,Em]=k(Je,ol,Hp),[wy,lw]=k(Mt,Ds,Ir);_m&&(!b||wm)&&(Ae.push($n),Pe.push(Em),Ae.push(wy),Pe.push(lw)),wm&&Xe>0&&(Le.push(L($n)),Le.push(wy)),Je=Mt,ht=zn})}),Le.length>0&&(Le[0]=L(Le[0])),Pe.reverse(),Ae.push(...Pe),[ye]})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:e}=this.properties.marker;return new(Xg(e))}updatePathNodes(e){return Be(this,null,function*(){const{opacity:t,visible:i,animationEnabled:n}=e,[s,o]=e.paths,a=this.getStrokeWidth(this.properties.strokeWidth);o.setProperties({tag:1,fill:void 0,lineJoin:o.lineCap="round",pointerEvents:1,stroke:this.properties.stroke,strokeWidth:a,strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,opacity:t,visible:i}),s.setProperties({tag:0,stroke:void 0,lineJoin:"round",pointerEvents:1,fill:this.properties.fill,fillOpacity:this.properties.fillOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset,strokeOpacity:this.properties.strokeOpacity,fillShadow:this.properties.shadow,opacity:t,visible:i||n,strokeWidth:a}),PM(this,o),PM(this,s)})}updatePaths(e){return Be(this,null,function*(){this.updateAreaPaths([e.paths],[e.contextData])})}updateAreaPaths(e,t){this.updateFillPath(e,t),this.updateStrokePath(e,t)}updateFillPath(e,t){t.forEach(({fillData:i},n)=>{const[s]=e[n],{path:o}=s;o.clear({trackChanges:!0});for(const{point:a}of i.points)a.moveTo?o.moveTo(a.x,a.y):o.lineTo(a.x,a.y);o.closePath(),s.checkPathDirty()})}updateStrokePath(e,t){t.forEach(({strokeData:i},n)=>{const[,s]=e[n],{path:o}=s;o.clear({trackChanges:!0});for(const{point:a}of i.points)a.moveTo?o.moveTo(a.x,a.y):o.lineTo(a.x,a.y);s.checkPathDirty()})}updateMarkerSelection(e){return Be(this,null,function*(){const{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])})}updateMarkerNodes(e){return Be(this,null,function*(){const{markerSelection:t,isHighlight:i}=e,{xKey:n,yKey:s,marker:o,fill:a,stroke:c,strokeWidth:u,fillOpacity:p,strokeOpacity:g,highlightStyle:m}=this.properties,y=ri(i&&m.item,o.getStyle(),{fill:a,stroke:c,strokeWidth:u,fillOpacity:p,strokeOpacity:g});t.each((b,_)=>{this.updateMarkerStyle(b,o,{datum:_,highlighted:i,xKey:n,yKey:s},y)}),i||this.properties.marker.markClean()})}updateLabelSelection(e){return Be(this,null,function*(){const{labelData:t,labelSelection:i}=e;return i.update(t,n=>{n.tag=3})})}updateLabelNodes(e){return Be(this,null,function*(){const{labelSelection:t}=e,{enabled:i,fontStyle:n,fontWeight:s,fontSize:o,fontFamily:a,color:c}=this.properties.label;t.each((u,p)=>{const{x:g,y:m,label:y}=p;y&&i&&this.visible?(u.fontStyle=n,u.fontWeight=s,u.fontSize=o,u.fontFamily=a,u.textAlign=y.textAlign,u.textBaseline=y.textBaseline,u.text=y.text,u.x=g,u.y=m-10,u.fill=c,u.visible=!0):u.visible=!1})})}getTooltipHtml(e){const{id:t,axes:i,dataModel:n}=this,{xKey:s,xName:o,yName:a,tooltip:c,marker:u}=this.properties,{yKey:p,xValue:g,yValue:m,datum:y}=e,b=i.x,_=i.y;if(!this.properties.isValid()||!(b&&_&&Ei(m))||!n)return"";const E=b.formatDatum(g),D=_.formatDatum(m),R=un(a),O=un(E+": "+D),L=ri({fill:this.properties.fill},u.getStyle(),{stroke:this.properties.stroke,strokeWidth:this.properties.strokeWidth}),{fill:k}=this.getMarkerStyle(u,{datum:e,xKey:s,yKey:p,highlighted:!1},L);return c.toTooltipHtml({title:R,content:O,backgroundColor:k},{datum:y,xKey:s,xName:o,yKey:p,yName:a,color:k,title:R,seriesId:t})}getLegendData(e){var t,i,n,s;if(null==(t=this.data)||!t.length||!this.properties.isValid()||"category"!==e)return[];const{yKey:o,yName:a,fill:c,stroke:u,fillOpacity:p,strokeOpacity:g,strokeWidth:m,lineDash:y,marker:b,visible:_}=this.properties,E=!b.enabled||void 0===b.fill;return[{legendType:e,id:this.id,itemId:o,seriesId:this.id,enabled:_,label:{text:a??o},marker:{shape:b.shape,fill:E?c:b.fill,fillOpacity:E?p:b.fillOpacity,stroke:null!=(i=b.stroke)?i:u,strokeOpacity:null!=(n=b.strokeOpacity)?n:g,strokeWidth:null!=(s=b.strokeWidth)?s:0,enabled:b.enabled||m<=0},line:{stroke:u,strokeOpacity:g,strokeWidth:m,lineDash:y}}]}animateEmptyUpdateReady(e){const{markerSelections:t,labelSelections:i,contextData:n,paths:s}=e,{animationManager:o}=this.ctx;this.updateAreaPaths(s,n),ON(this,o,s.flat()),Hs(t,nT),EN(this,o,t),Ni(this,"labels",o,i)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateAreaPaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){var t,i;const{animationManager:n}=this.ctx,{markerSelections:s,labelSelections:o,contextData:a,paths:c,previousContextData:u}=e,[[p,g]]=c;super.resetAllAnimation(e);const m=()=>{this.updateAreaPaths(c,a),this.updateStrokePath(c,a)};if(0===a.length||0===u?.length)return m(),tT(this,n,s,"added"),sT(this,"fill_path_properties",n,[p]),sT(this,"stroke",n,[g],"trailing"),void Ni(this,"labels",n,o);const[b]=a,[_]=u??[],E=cB(b,_,null==(i=null==(t=this.processedData)?void 0:t.reduced)?void 0:i.diff);if(void 0===E)return n.skipCurrentBatch(),void m();tT(this,n,s),cn(this.id,"fill_path_properties",n,[p],E.fill.pathProperties),qV(this.id,"fill_path_update",n,[p],E.fill.path),this.updateStrokePath(c,a),sT(this,"stroke",n,[g],"trailing"),Ni(this,"labels",n,o)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new vt}};PN.className="AreaSeries",PN.type="area";var az={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"area",instanceConstructor:PN,stackable:!0,seriesDefaults:{axes:[{type:"number",position:"left"},{type:"category",position:"bottom"}]},themeTemplate:{series:{__extends__:vp,nodeClickRange:"nearest",tooltip:{position:{type:"node"}},fillOpacity:.8,strokeOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,shadow:{enabled:!1,color:y_,xOffset:3,yOffset:3,blur:5},marker:{__extends__:m_,enabled:!1,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Vs,color:Pi,formatter:void 0}}},paletteFactory:r=>{const{marker:e}=QD(r);return{fill:e.fill,stroke:e.stroke,marker:e}}},IN=class extends em{constructor(){super(...arguments),this.direction="vertical"}};I([H(eG)],IN.prototype,"direction",2);var dB=class extends tm{getBandScalePadding(){return{inner:.2,outer:.1}}shouldFlipXY(){return!this.isVertical()}isVertical(){return"vertical"===this.properties.direction}getBarDirection(){return this.shouldFlipXY()?"x":"y"}getCategoryDirection(){return this.shouldFlipXY()?"y":"x"}getValueAxis(){const r=this.getBarDirection();return this.axes[r]}getCategoryAxis(){const r=this.getCategoryDirection();return this.axes[r]}},uB=class extends Ss{constructor(){super(...arguments),this.placement="inside"}};I([H(tG)],uB.prototype,"placement",2);var Ws=class extends IN{constructor(){super(...arguments),this.fill="#c16068",this.fillOpacity=1,this.stroke="#874349",this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.cornerRadius=0,this.shadow=new ld,this.label=new uB,this.tooltip=new ua}};function hB({rect:r,config:e}){const{crisp:t=!0,fill:i,stroke:n,strokeWidth:s,fillOpacity:o,strokeOpacity:a,lineDash:c,lineDashOffset:u,fillShadow:p,cornerRadius:g=0,topLeftCornerRadius:m,topRightCornerRadius:y,bottomRightCornerRadius:b,bottomLeftCornerRadius:_,cornerRadiusBbox:E,visible:D=!0}=e;r.crisp=t,r.fill=i,r.stroke=n,r.strokeWidth=s,r.fillOpacity=o,r.strokeOpacity=a,r.lineDash=c,r.lineDashOffset=u,r.fillShadow=p,r.topLeftCornerRadius=m?g:0,r.topRightCornerRadius=y?g:0,r.bottomRightCornerRadius=b?g:0,r.bottomLeftCornerRadius=_?g:0,r.cornerRadiusBbox=E,r.visible=D}function pB(r){var p,g,m,y,b,_,e=r,{datum:t,isHighlighted:i,style:n,highlightStyle:s,formatter:o,seriesId:a,ctx:{callbackCache:c}}=e,u=rs(e,["datum","isHighlighted","style","highlightStyle","formatter","seriesId","ctx"]);const{fill:E,fillOpacity:D,stroke:R,strokeWidth:O}=ri(i&&s,n),{strokeOpacity:L,fillShadow:k,lineDash:U,lineDashOffset:j,cornerRadius:q=0,topLeftCornerRadius:J=!0,topRightCornerRadius:me=!0,bottomRightCornerRadius:ye=!0,bottomLeftCornerRadius:Ae=!0,cornerRadiusBbox:Pe}=n;let Le;return o&&(Le=c.call(o,Re({datum:t.datum,xKey:t.xKey,fill:E,stroke:R,strokeWidth:O,cornerRadius:q,highlighted:i,seriesId:a},u))),{fill:null!=(p=Le?.fill)?p:E,stroke:null!=(g=Le?.stroke)?g:R,strokeWidth:null!=(m=Le?.strokeWidth)?m:O,fillOpacity:null!=(y=Le?.fillOpacity)?y:D,strokeOpacity:null!=(b=Le?.strokeOpacity)?b:L,lineDash:U,lineDashOffset:j,fillShadow:k,cornerRadius:null!=(_=Le?.cornerRadius)?_:q,topLeftCornerRadius:J,topRightCornerRadius:me,bottomRightCornerRadius:ye,bottomLeftCornerRadius:Ae,cornerRadiusBbox:Pe}}function fB(r=[]){const[e,t]=r;return!(0!==e||1!==t)}I([H(et)],Ws.prototype,"xKey",2),I([H(et,{optional:!0})],Ws.prototype,"xName",2),I([H(et)],Ws.prototype,"yKey",2),I([H(et,{optional:!0})],Ws.prototype,"yName",2),I([H(et,{optional:!0})],Ws.prototype,"stackGroup",2),I([H(Xi,{optional:!0})],Ws.prototype,"normalizedTo",2),I([H(Si)],Ws.prototype,"fill",2),I([H(Fi)],Ws.prototype,"fillOpacity",2),I([H(Si)],Ws.prototype,"stroke",2),I([H(qe)],Ws.prototype,"strokeWidth",2),I([H(Fi)],Ws.prototype,"strokeOpacity",2),I([H(bp)],Ws.prototype,"lineDash",2),I([H(qe)],Ws.prototype,"lineDashOffset",2),I([H(qe)],Ws.prototype,"cornerRadius",2),I([H(Zl,{optional:!0})],Ws.prototype,"formatter",2),I([H(Ct,{optional:!0})],Ws.prototype,"shadow",2),I([H(Ct)],Ws.prototype,"label",2),I([H(Ct)],Ws.prototype,"tooltip",2);var gB=r=>{var e;return TD(null!=(e=r.yValue)?e:0)};function aT(r,e,t){const{startingX:i,startingY:n}=function cz(r,e){const t=e[r?"y":"x"];let i=1/0,n=0;return t?(r?n=t.scale.convert($i.is(t.scale)?0:Math.max(...t.range)):i=t.scale.convert($i.is(t.scale)?0:Math.min(...t.range)),{startingX:i,startingY:n}):{startingX:i,startingY:n}}(r,e);return{isVertical:r,calculate:(o,a)=>{let c=r?o.x:i,u=r?n:o.y,p=r?o.width:0,g=r?0:o.height;const m=o.opacity;return a&&(isNaN(c)||isNaN(u))&&(({x:c,y:u}=a),p=r?a.width:0,g=r?0:a.height,r&&!gB(a)?u+=a.height:!r&&gB(a)&&(c+=a.width)),{x:c,y:u,width:p,height:g,opacity:m}},mode:t}}function lz(r,e){return{isVertical:r,calculate:t=>({x:r?t.x:t.x+t.width/2,y:r?t.y+t.height/2:t.y,width:r?t.width:0,height:r?0:t.height,opacity:t.opacity}),mode:e}}function lT(r){const e=n=>null==n||isNaN(n.x)||isNaN(n.y);return{toFn:(n,s,o)=>"removed"===o&&null==n.datum&&"fade"===r.mode?nt(Re({},cT(0,s)),{opacity:0}):"removed"===o||e(s)?r.calculate(s,n.previousDatum):{x:s.x,y:s.y,width:s.width,height:s.height,opacity:s.opacity},fromFn:(n,s,o)=>{"updated"===o&&e(s)?o="removed":"updated"===o&&e(n.previousDatum)&&(o="added");let a={x:n.x,y:n.y,width:n.width,height:n.height,opacity:n.opacity};"added"===o&&null==n.previousDatum&&"fade"===r.mode?a=nt(Re({},cT(0,s)),{opacity:0}):("unknown"===o||"added"===o)&&(a=r.calculate(s,n.previousDatum));const c=Do[o];return nt(Re({},a),{phase:c})}}}function cT(r,{x:e,y:t,width:i,height:n,opacity:s}){return{x:e,y:t,width:i,height:n,opacity:s}}function mB(r,e,t){if(e.enabled&&t){const{x:i,y:n,text:s,textAlign:o,textBaseline:a}=t,{color:c,fontStyle:u,fontWeight:p,fontSize:g,fontFamily:m}=e;r.setProperties({visible:!0,x:i,y:n,text:s,fill:c,fontStyle:u,fontWeight:p,fontSize:g,fontFamily:m,textAlign:o,textBaseline:a})}else r.visible=!1}function vB({isPositive:r,isVertical:e,placement:t,padding:i=0,rect:n}){let s=n.x+n.width/2,o=n.y+n.height/2,a="center",c="middle";switch(t){case"start":e?(o=r?n.y+n.height+i:n.y-i,c=r?"top":"bottom"):(s=r?n.x-i:n.x+n.width+i,a=r?"start":"end");break;case"outside":case"end":e?(o=r?n.y-i:n.y+n.height+i,c=r?"bottom":"top"):(s=r?n.x+n.width+i:n.x-i,a=r?"start":"end")}return{x:s,y:o,textAlign:a,textBaseline:c}}var FN=class uU extends dB{constructor(e){super({moduleCtx:e,pickModes:[0],pathsPerSeries:0,hasHighlightedLabels:!0,datumSelectionGarbageCollection:!1,animationAlwaysUpdateSelections:!0,animationResetFns:{datum:cT,label:Mp}}),this.properties=new Ws,this.groupScale=new xu,this.smallestDataInterval=void 0}resolveKeyDirection(e){return"x"===this.getBarDirection()?"x"===e?"y":"x":e}processData(e){return Be(this,null,function*(){var t,i,n,s;if(!this.properties.isValid()||!this.data)return;const{seriesGrouping:{groupIndex:o=this.id}={},data:a=[]}=this,{xKey:c,yKey:u,normalizedTo:p}=this.properties,g=!this.ctx.animationManager.isSkipped(),m=Math.abs(p??NaN),y=$i.is(null==(t=this.getCategoryAxis())?void 0:t.scale),b=$i.is(null==(i=this.getValueAxis())?void 0:i.scale),_=`bar-stack-${o}-yValues`,E=`${_}-trailing`,D=m&&isFinite(m)?m:void 0,R=[];D&&R.push(TM(this,[_,E],D,"range")),g&&this.processedData&&R.push(JC(this.processedData)),g&&R.push(N_(this));const O=this.visible?{}:{forceValue:0},{processedData:L}=yield this.requestDataModel(e,a,{props:[Mr(this,c,y,{id:"xValue"}),Ki(this,u,b,Re({id:"yValue-raw",invalidValue:null},O)),...Qg(this,u,b,"normal","current",Re({id:"yValue-end",rangeId:"yValue-range",invalidValue:null,missingValue:0,groupId:_,separateNegative:!0},O)),...Qg(this,u,b,"trailing","current",Re({id:"yValue-start",invalidValue:null,missingValue:0,groupId:E,separateNegative:!0},O)),...y?[pN]:[],...R],groupByKeys:!0,groupByData:!1});this.smallestDataInterval={x:null!=(s=null==(n=L.reduced)?void 0:n.smallestKeyInterval)?s:1/0,y:1/0},this.animationState.transition("updateData")})}getSeriesDomain(e){var t;const{processedData:i,dataModel:n}=this;if(!i||!n||0===i.data.length)return[];const{reduced:{[pN.property]:s}={}}=i,o=this.getCategoryAxis(),a=this.getValueAxis(),c=n.resolveProcessedDataDefById(this,"xValue"),u=n.getDomain(this,"xValue","key",i),p=n.getDomain(this,"yValue-end","value",i);if(e===this.getCategoryDirection()){if("key"===c?.def.type&&"category"===c?.def.valueType)return u;const g=null!=s&&isFinite(s)?s:0,m=null!=(t=Tu(u))?t:[NaN,NaN],y=o?.isReversed();return Ro("y"===e?[m[0]+(y?0:-g),m[1]+(y?g:0)]:[m[0]+(y?-g:0),m[1]+(y?0:g)],o)}return this.getValueAxis()instanceof im?Ro(p,a):Ro([p[0]>0?0:p[0],p[1]<0?0:p[1]],a)}createNodeData(){return Be(this,null,function*(){const{dataModel:e}=this,t=this.getCategoryAxis(),i=this.getValueAxis();if(!(e&&t&&i&&this.properties.isValid()))return[];const n=t.scale,s=i.scale,{groupScale:o,processedData:a,smallestDataInterval:c,ctx:{seriesStateManager:u}}=this,{xKey:p,yKey:g,xName:m,yName:y,fill:b,stroke:_,strokeWidth:E,cornerRadius:D,legendItemName:R,label:O}=this.properties,L=i.isReversed(),k=$i.is(n)?n.calcBandwidth(c?.x):n.bandwidth,U=[],{index:j,visibleGroupCount:q}=u.getVisiblePeerGroupIndex(this);for(let ht=0;ht<q;ht++)U.push(String(ht));o.domain=U,o.range=[0,k??0],t instanceof Dp?o.paddingInner=t.groupPaddingInner:o.padding=t instanceof Yg?.1:0,o.round=0!==o.padding;const J=o.bandwidth>=1?o.bandwidth:o.rawBandwidth,me=e.resolveProcessedDataIndexById(this,"xValue").index,ye=e.resolveProcessedDataIndexById(this,"yValue-raw").index,Ae=e.resolveProcessedDataIndexById(this,"yValue-start").index,Pe=e.resolveProcessedDataIndexById(this,"yValue-end").index,Le=e.resolveProcessedDataDefById(this,"yValue-range").index,Xe=!this.ctx.animationManager.isSkipped(),Je=[];return a?.data.forEach(({keys:ht,datum:Dt,values:Ft,aggValues:Mt})=>{Ft.forEach((Nt,Ht)=>{var jn;null!=Je[Ht]||(Je[Ht]={itemId:g,nodeData:[],labelData:[],scales:yu(uU.prototype,this,"calculateScaling").call(this),visible:this.visible||Xe});const Rn=ht[me],rt=n.convert(Rn),ui=+Nt[Pe],Li=+Nt[Ae],en=Nt[ye],zn=en>=0,lo=zn!==L,Ds=null!=(jn=Mt?.[Le][zn?1:0])?jn:0,Ir=rt+o.convert(String(j));if(isNaN(ui))return;const ol=s.convert(ui),Hp=s.convert(Li),ur="x"===this.getBarDirection(),al=s.convert(Ds),_m=s.convert(0),wm=new Bt(ur?Math.min(_m,al):Ir,ur?Ir:Math.min(_m,al),ur?Math.abs(_m-al):J,ur?J:Math.abs(_m-al)),$n={x:ur?Math.min(ol,Hp):Ir,y:ur?Ir:Math.min(ol,Hp),width:ur?Math.abs(Hp-ol):J,height:ur?J:Math.abs(Hp-ol),cornerRadiusBbox:wm},{fontStyle:Em,fontWeight:wy,fontSize:lw,fontFamily:Dm,color:Tm,placement:yx}=O,kT=this.getLabelText(this.properties.label,{datum:Dt[Ht],value:en,xKey:p,yKey:g,xName:m,yName:y,legendItemName:R},Z2=>Ei(Z2)?Z2.toFixed(2):""),Sx=kT?Re({text:kT,fill:Tm,fontStyle:Em,fontWeight:wy,fontSize:lw,fontFamily:Dm},vB({isPositive:zn,isVertical:!ur,placement:yx,rect:$n})):void 0,q2=this.shouldFlipXY()?$n.height:$n.width,X2={series:this,itemId:g,datum:Dt[Ht],cumulativeValue:ui,xValue:Rn,yValue:en,yKey:g,xKey:p,capDefaults:{lengthRatioMultiplier:q2,lengthMax:q2},x:$n.x,y:$n.y,width:$n.width,height:$n.height,midPoint:{x:$n.x+$n.width/2,y:$n.y+$n.height/2},fill:b,stroke:_,opacity:1,strokeWidth:E,cornerRadius:D,topLeftCornerRadius:ur!==lo,topRightCornerRadius:lo,bottomRightCornerRadius:ur===lo,bottomLeftCornerRadius:!lo,cornerRadiusBbox:wm,label:Sx};Je[Ht].nodeData.push(X2),Je[Ht].labelData.push(X2)})}),Je})}nodeFactory(){return new so}updateDatumSelection(e){return Be(this,null,function*(){return e.datumSelection.update(e.nodeData,t=>{t.tag=0},t=>Jg(t.xValue))})}updateDatumNodes(e){return Be(this,null,function*(){if(!this.properties.isValid())return;const{yKey:t,stackGroup:i,fill:n,fillOpacity:s,stroke:o,strokeWidth:a,strokeOpacity:c,lineDash:u,lineDashOffset:p,formatter:g,shadow:m,highlightStyle:{item:y}}=this.properties,_=fB(this.axes.x?.visibleRange),E="x"===this.getCategoryDirection();e.datumSelection.each((D,R)=>{const O={fill:n,stroke:o,fillOpacity:s,strokeOpacity:c,lineDash:u,lineDashOffset:p,fillShadow:m,strokeWidth:this.getStrokeWidth(a),cornerRadius:R.cornerRadius,topLeftCornerRadius:R.topLeftCornerRadius,topRightCornerRadius:R.topRightCornerRadius,bottomRightCornerRadius:R.bottomRightCornerRadius,bottomLeftCornerRadius:R.bottomLeftCornerRadius,cornerRadiusBbox:R.cornerRadiusBbox},L=E?R.width>0:R.height>0,k=pB({datum:R,ctx:this.ctx,seriesId:this.id,isHighlighted:e.isHighlight,highlightStyle:y,yKey:t,style:O,formatter:g,stackGroup:i});k.crisp=_,k.visible=L,hB({rect:D,config:k})})})}updateLabelSelection(e){return Be(this,null,function*(){const t=this.isLabelEnabled()?e.labelData:[];return e.labelSelection.update(t,i=>{i.tag=1,i.pointerEvents=1})})}updateLabelNodes(e){return Be(this,null,function*(){e.labelSelection.each((t,i)=>{mB(t,this.properties.label,i.label)})})}getTooltipHtml(e){var t;const{id:i,processedData:n,ctx:{callbackCache:s}}=this,o=this.getCategoryAxis(),a=this.getValueAxis();if(!(n&&this.properties.isValid()&&o&&a))return"";const{xKey:c,yKey:u,xName:p,yName:g,fill:m,stroke:y,strokeWidth:b,tooltip:_,formatter:E,stackGroup:D}=this.properties,{xValue:R,yValue:O,datum:L}=e,k=o.formatDatum(R),U=a.formatDatum(O),j=un(g),q=un(k+": "+U);let J;E&&(J=s.call(E,{seriesId:i,datum:L,xKey:c,yKey:u,stackGroup:D,fill:m,stroke:y,strokeWidth:this.getStrokeWidth(b),highlighted:!1}));const me=null!=(t=J?.fill)?t:m;return _.toTooltipHtml({title:j,content:q,backgroundColor:me},Re({seriesId:i,datum:L,xKey:c,yKey:u,xName:p,yName:g,stackGroup:D,title:j,color:me},this.getModuleTooltipParams()))}getLegendData(e){var t,i;const{showInLegend:n}=this.properties;if("category"!==e||null==(t=this.data)||!t.length||!this.properties.isValid()||!n)return[];const{yKey:s,yName:o,fill:a,stroke:c,strokeWidth:u,fillOpacity:p,strokeOpacity:g,legendItemName:m,visible:y}=this.properties;return[{legendType:"category",id:this.id,itemId:s,seriesId:this.id,enabled:y,label:{text:null!=(i=m??o)?i:s},marker:{fill:a,fillOpacity:p,stroke:c,strokeWidth:u,strokeOpacity:g},legendItemName:m}]}animateEmptyUpdateReady({datumSelections:e,labelSelections:t,annotationSelections:i}){const n=lT(aT(this.isVertical(),this.axes,"normal"));cn(this.id,"nodes",this.ctx.animationManager,e,n),Ni(this,"labels",this.ctx.animationManager,t),Ni(this,"annotations",this.ctx.animationManager,i)}animateWaitingUpdateReady(e){var t,i,n;const{datumSelections:s,labelSelections:o,annotationSelections:a,previousContextData:c}=e;this.ctx.animationManager.stopByAnimationGroupId(this.id);const u=null==(i=null==(t=this.processedData)?void 0:t.reduced)?void 0:i.diff,p=0===c?.length?"fade":"normal",g=lT(aT(this.isVertical(),this.axes,p));cn(this.id,"nodes",this.ctx.animationManager,s,g,(y,b)=>Jg(b.xValue),u),(null==(n=u?.changed)||n)&&(Ni(this,"labels",this.ctx.animationManager,o),Ni(this,"annotations",this.ctx.animationManager,a))}isLabelEnabled(){return this.properties.label.enabled}};FN.className="BarSeries",FN.type="bar";var uz={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bar",instanceConstructor:FN,stackable:!0,groupable:!0,seriesDefaults:{axes:[{type:"number",position:"left"},{type:"category",position:"bottom"}]},swapDefaultAxesCondition:r=>"horizontal"===r?.direction,themeTemplate:{series:{__extends__:vp,direction:"vertical",fillOpacity:1,strokeWidth:0,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:Vs,color:v_,formatter:void 0,placement:"inside"},shadow:{enabled:!1,color:y_,xOffset:3,yOffset:3,blur:5}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:.3}}}},paletteFactory:_N},CB=r=>{const e=Au.fromString(r),[t,i,n]=Au.RGBtoOKLCH(e.r,e.g,e.b);return{l:t,c:i,h:n,a:e.a}},iy=class{constructor(){this.invalid=!0,this.domain=[0,1],this.range=["red","blue"],this.parsedRange=this.range.map(CB)}update(){const{domain:r,range:e}=this;r.length<2&&(tt.warnOnce("`colorDomain` should have at least 2 values."),0===r.length?r.push(0,1):1===r.length&&r.push(r[0]+1));for(let t=1;t<r.length;t++)if(r[t-1]>=r[t]){tt.warnOnce("`colorDomain` values should be supplied in ascending order."),r.sort((s,o)=>s-o);break}if(e.length<r.length)for(let t=e.length;t<r.length;t++)e.push(e.length>0?e[0]:"black");this.parsedRange=this.range.map(CB)}convert(r){this.refresh();const{domain:e,range:t,parsedRange:i}=this,n=e[0],s=e.at(-1);if(r<=n)return t[0];if(r>=s)return t[t.length-1];let c,u;if(2===e.length){const m=(r-n)/(s-n),y=1/(t.length-1);c=t.length<=2?0:Math.min(Math.floor(m*(t.length-1)),t.length-2),u=(m-c*y)/y}else{for(c=0;c<e.length-2&&!(r<e[c+1]);c++);const m=e[c];u=(r-m)/(e[c+1]-m)}return((r,e,t)=>{let i,n;if(t=Ti(0,t,1),Number.isNaN(r.h)&&Number.isNaN(e.h))i=0,n=0;else if(Number.isNaN(r.h))i=e.h,n=e.c;else if(Number.isNaN(e.h))i=r.h,n=r.c;else{let c=e.h;const u=e.h-r.h;u>180?c-=360:u<-180&&(c+=360),i=r.h*(1-t)+c*t,n=r.c*(1-t)+e.c*t}return Au.fromOKLCH(r.l*(1-t)+e.l*t,n,i,r.a*(1-t)+e.a*t)})(i[c],i[c+1],u).toRgbaString()}refresh(){!this.invalid||(this.invalid=!1,this.update(),this.invalid&&tt.warnOnce("Expected update to not invalidate scale"))}};I([la],iy.prototype,"domain",2),I([la],iy.prototype,"range",2);var NN=class extends da{constructor(){super(...arguments),this.maxSize=30}};I([H(qe),at({redraw:3})],NN.prototype,"maxSize",2),I([H(hM,{optional:!0}),at({redraw:3})],NN.prototype,"domain",2);var xr=class extends em{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new NN,this.label=new Ss,this.tooltip=new ua}};I([H(et)],xr.prototype,"xKey",2),I([H(et)],xr.prototype,"yKey",2),I([H(et)],xr.prototype,"sizeKey",2),I([H(et,{optional:!0})],xr.prototype,"labelKey",2),I([H(et,{optional:!0})],xr.prototype,"colorKey",2),I([H(et,{optional:!0})],xr.prototype,"xName",2),I([H(et,{optional:!0})],xr.prototype,"yName",2),I([H(et,{optional:!0})],xr.prototype,"sizeName",2),I([H(et,{optional:!0})],xr.prototype,"labelName",2),I([H(et,{optional:!0})],xr.prototype,"colorName",2),I([H(hM,{optional:!0})],xr.prototype,"colorDomain",2),I([H(Jl)],xr.prototype,"colorRange",2),I([H(et,{optional:!0})],xr.prototype,"title",2),I([H(Ct)],xr.prototype,"marker",2),I([H(Ct)],xr.prototype,"label",2),I([H(Ct)],xr.prototype,"tooltip",2);var pz=class extends yN{constructor(r,e,t,i){super(r,e,t,i),this.sizeKey=i.properties.sizeKey}},LN=class hU extends tm{constructor(e){super({moduleCtx:e,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{label:Mp,marker:iT}}),this.NodeClickEvent=pz,this.properties=new xr,this.sizeScale=new Lu,this.colorScale=new iy}processData(e){return Be(this,null,function*(){var t,i;if(!this.properties.isValid()||null==this.data)return;const{isContinuousX:n,isContinuousY:s}=this.isContinuous(),{xKey:o,yKey:a,sizeKey:c,labelKey:u,colorDomain:p,colorRange:g,colorKey:m,marker:y}=this.properties,{dataModel:b,processedData:_}=yield this.requestDataModel(e,this.data,{props:[Mr(this,o,n,{id:"xKey-raw"}),Mr(this,a,s,{id:"yKey-raw"}),...u?[Mr(this,u,!1,{id:"labelKey-raw"})]:[],Ki(this,o,n,{id:"xValue"}),Ki(this,a,s,{id:"yValue"}),Ki(this,c,!0,{id:"sizeValue"}),...m?[Ki(this,m,!0,{id:"colorValue"})]:[],...u?[Ki(this,u,!1,{id:"labelValue"})]:[]],dataVisible:this.visible}),E=b.resolveProcessedDataIndexById(this,"sizeValue").index,D=null!=(t=_.domain.values[E])?t:[];if(this.sizeScale.domain=y.domain?y.domain:D,m){const R=b.resolveProcessedDataIndexById(this,"colorValue").index;this.colorScale.domain=null!=(i=p??_.domain.values[R])?i:[],this.colorScale.range=g,this.colorScale.update()}this.animationState.transition("updateData")})}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];const n="x"===e?"xValue":"yValue",s=t.resolveProcessedDataDefById(this,n),o=t.getDomain(this,n,"value",i);if("value"===s?.def.type&&"category"===s?.def.valueType)return o;const a=this.axes[e];return Ro(Tu(o),a)}createNodeData(){return Be(this,null,function*(){var e,t,i;const{axes:n,dataModel:s,processedData:o,colorScale:a,sizeScale:c}=this,{xKey:u,yKey:p,sizeKey:g,labelKey:m,xName:y,yName:b,sizeName:_,labelName:E,label:D,colorKey:R,marker:O,visible:L}=this.properties,k=n.x,U=n.y;if(!(s&&o&&L&&k&&U))return[];const j=s.resolveProcessedDataIndexById(this,"xValue").index,q=s.resolveProcessedDataIndexById(this,"yValue").index,J=g?s.resolveProcessedDataIndexById(this,"sizeValue").index:-1,me=R?s.resolveProcessedDataIndexById(this,"colorValue").index:-1,ye=m?s.resolveProcessedDataIndexById(this,"labelValue").index:-1,Ae=k.scale,Pe=U.scale,Le=(null!=(e=Ae.bandwidth)?e:0)/2,Xe=(null!=(t=Pe.bandwidth)?t:0)/2,Je=[];c.range=[O.size,O.maxSize];const ht=D.getFont();for(const{values:Dt,datum:Ft}of null!=(i=o.data)?i:[]){const Mt=Dt[j],Nt=Dt[q],Ht=Ae.convert(Mt)+Le,Tn=Pe.convert(Nt)+Xe,jn=this.getLabelText(D,{value:m?Dt[ye]:Nt,datum:Ft,xKey:u,yKey:p,sizeKey:g,labelKey:m,xName:y,yName:b,sizeName:_,labelName:E}),Rn=Wn.getTextSize(String(jn),ht),rt=g?c.convert(Dt[J]):O.size,ui=R?a.convert(Dt[me]):void 0;Je.push({series:this,itemId:p,yKey:p,xKey:u,datum:Ft,xValue:Mt,yValue:Nt,sizeValue:Dt[J],point:{x:Ht,y:Tn,size:rt},midPoint:{x:Ht,y:Tn},fill:ui,label:Re({text:jn},Rn)})}return[{itemId:p,nodeData:Je,labelData:Je,scales:yu(hU.prototype,this,"calculateScaling").call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var e;return null==(e=this.contextNodeData)?void 0:e.reduce((t,i)=>t.concat(i.labelData),[])}markerFactory(){const{shape:e}=this.properties.marker;return new(Xg(e))}updateMarkerSelection(e){return Be(this,null,function*(){const{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[],void 0,s=>Jg([s.xValue,s.yValue,s.label.text]))})}updateMarkerNodes(e){return Be(this,null,function*(){const{markerSelection:t,isHighlight:i}=e,{xKey:n,yKey:s,sizeKey:o,labelKey:a,marker:c}=this.properties,u=ri(i&&this.properties.highlightStyle.item,c.getStyle());this.sizeScale.range=[c.size,c.maxSize],t.each((p,g)=>{this.updateMarkerStyle(p,c,{datum:g,highlighted:i,xKey:n,yKey:s,sizeKey:o,labelKey:a},u)}),i||this.properties.marker.markClean()})}updateLabelSelection(e){return Be(this,null,function*(){var t,i;const n=this.properties.label.enabled&&null!=(i=null==(t=this.chart)?void 0:t.placeLabels().get(this))?i:[];return e.labelSelection.update(n.map(s=>nt(Re({},s.datum),{point:{x:s.x,y:s.y,size:s.datum.point.size}})))})}updateLabelNodes(e){return Be(this,null,function*(){const{label:t}=this.properties;e.labelSelection.each((i,n)=>{var s,o,a,c;i.text=n.label.text,i.fill=t.color,i.x=null!=(o=null==(s=n.point)?void 0:s.x)?o:0,i.y=null!=(c=null==(a=n.point)?void 0:a.y)?c:0,i.fontStyle=t.fontStyle,i.fontWeight=t.fontWeight,i.fontSize=t.fontSize,i.fontFamily=t.fontFamily,i.textAlign="left",i.textBaseline="top"})})}getTooltipHtml(e){var t;const i=this.axes.x,n=this.axes.y;if(!this.properties.isValid()||!i||!n)return"";const{xKey:s,yKey:o,sizeKey:a,labelKey:c,xName:u,yName:p,sizeName:g,labelName:m,marker:y,tooltip:b}=this.properties,_=null!=(t=this.properties.title)?t:p,E=ri({fill:e.fill,strokeWidth:this.getStrokeWidth(y.strokeWidth)},y.getStyle()),{fill:D="gray"}=this.getMarkerStyle(y,{datum:e,highlighted:!1,xKey:s,yKey:o,sizeKey:a,labelKey:c},E),{datum:R,xValue:O,yValue:L,sizeValue:k,label:{text:U}}=e,j=un(i.formatDatum(O)),q=un(n.formatDatum(L));let J=`<b>${un(u??s)}</b>: ${j}<br><b>${un(p??o)}</b>: ${q}`;return a&&(J+=`<br><b>${un(g??a)}</b>: ${un(String(k))}`),c&&(J=`<b>${un(m??c)}</b>: ${un(U)}<br>`+J),b.toTooltipHtml({title:_,content:J,backgroundColor:D},{datum:R,xKey:s,xName:u,yKey:o,yName:p,sizeKey:a,sizeName:g,labelKey:c,labelName:m,title:_,color:D,seriesId:this.id})}getLegendData(){var e,t;if(null==(e=this.data)||!e.length||!this.properties.isValid())return[];const{yKey:i,yName:n,title:s,marker:o,visible:a}=this.properties,{shape:c,fill:u,stroke:p,fillOpacity:g,strokeOpacity:m,strokeWidth:y}=o;return[{legendType:"category",id:this.id,itemId:i,seriesId:this.id,enabled:a,label:{text:null!=(t=s??n)?t:i},marker:{shape:c,fill:u??"rgba(0, 0, 0, 0)",stroke:p??"rgba(0, 0, 0, 0)",fillOpacity:g??1,strokeOpacity:m??1,strokeWidth:y??0}}]}animateEmptyUpdateReady({markerSelections:e,labelSelections:t}){wN(this,this.ctx.animationManager,e),Ni(this,"labels",this.ctx.animationManager,t)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new vt}};LN.className="BubbleSeries",LN.type="bubble";var gz={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"bubble",instanceConstructor:LN,seriesDefaults:{axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]},themeTemplate:{series:{__extends__:vp,tooltip:{position:{type:"node"}},marker:{__extends__:m_,maxSize:30,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Vs,color:Pi}}},paletteFactory:QD},js=class extends em{constructor(){super(...arguments),this.fillOpacity=1,this.strokeWidth=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.areaPlot=!1,this.aggregation="sum",this.shadow=new ld,this.label=new Ss,this.tooltip=new ua}};I([H(et)],js.prototype,"xKey",2),I([H(et,{optional:!0})],js.prototype,"yKey",2),I([H(et,{optional:!0})],js.prototype,"xName",2),I([H(et,{optional:!0})],js.prototype,"yName",2),I([H(Si,{optional:!0})],js.prototype,"fill",2),I([H(Fi)],js.prototype,"fillOpacity",2),I([H(Si,{optional:!0})],js.prototype,"stroke",2),I([H(qe)],js.prototype,"strokeWidth",2),I([H(Fi)],js.prototype,"strokeOpacity",2),I([H(bp)],js.prototype,"lineDash",2),I([H(qe)],js.prototype,"lineDashOffset",2),I([H(Ot)],js.prototype,"areaPlot",2),I([H(MD,{optional:!0})],js.prototype,"bins",2),I([H(as(["count","sum","mean"],"a histogram aggregation"))],js.prototype,"aggregation",2),I([H(qe,{optional:!0})],js.prototype,"binCount",2),I([H(Ct)],js.prototype,"shadow",2),I([H(Ct)],js.prototype,"label",2),I([H(Ct)],js.prototype,"tooltip",2);var kN=class pU extends tm{constructor(e){super({moduleCtx:e,pickModes:[0],datumSelectionGarbageCollection:!1,animationResetFns:{datum:cT,label:Mp}}),this.properties=new js,this.calculatedBins=[]}deriveBins(e){if(this.properties.binCount)return this.calculateNiceBins(e,this.properties.binCount);const t=CM(e[0],e[1],10),i=R_(e[0],e[1],10),[n]=t;return[[n-i,n],...t.map(o=>[o,o+i])]}calculateNiceBins(e,t){const i=Math.floor(e[0]),n=e[1],s=t||1,{start:o,binSize:a}=this.calculateNiceStart(i,n,s);return this.getBins(o,n,a,s)}getBins(e,t,i,n){const s=[],o=this.calculatePrecision(i);for(let a=0;a<n;a++){const c=Math.round((e+a*i)*o)/o;let u=Math.round((e+(a+1)*i)*o)/o;a===n-1&&(u=Math.max(u,t)),s[a]=[c,u]}return s}calculatePrecision(e){let t=10;if(isFinite(e)&&e>0)for(;e<1;)t*=10,e*=10;return t}calculateNiceStart(e,t,i){const n=Math.abs(t-e)/i,s=Math.floor(Math.log10(n)),o=Math.pow(10,s);return{start:Math.floor(e/o)*o,binSize:n}}processData(e){return Be(this,null,function*(){var t;const{xKey:i,yKey:n,areaPlot:s,aggregation:o}=this.properties,a=[Mr(this,i,!0),FV];if(n){let u=uN(this,"groupCount");"count"===o||("sum"===o?u=OV(this,"groupAgg"):"mean"===o&&(u=xV(this,"groupAgg"))),s&&(u=hN(this,"groupAgg",u)),a.push(Ki(this,n,!0,{invalidValue:void 0}),u)}else{let u=uN(this,"groupAgg");s&&(u=hN(this,"groupAgg",u)),a.push(u)}!this.ctx.animationManager.isSkipped()&&this.processedData&&a.push(JC(this.processedData,!1)),yield this.requestDataModel(e,null!=(t=this.data)?t:[],{props:a,dataVisible:this.visible,groupByFn:u=>{var p;const g=Ro(u.domain.keys[0]);if(0===g.length)return u.domain.groups=[],()=>[];const m=null!=(p=this.properties.bins)?p:this.deriveBins(g),y=m.length;return this.calculatedBins=[...m],b=>{const _=b.keys[0];for(let E=0;E<y;E++){const D=m[E];if(_>=D[0]&&_<D[1]||E===y-1&&_<=D[1])return D}return[]}}}),this.animationState.transition("updateData")})}getSeriesDomain(e){var t,i,n,s;const{processedData:o,dataModel:a}=this;if(!o||!a||!this.calculatedBins.length)return[];const c=a.getDomain(this,"groupAgg","aggregate",o),u=null==(t=this.calculatedBins)?void 0:t[0][0],p=null==(s=this.calculatedBins)?void 0:s[(null!=(n=null==(i=this.calculatedBins)?void 0:i.length)?n:0)-1][1];return Ro("x"===e?[u,p]:c)}createNodeData(){return Be(this,null,function*(){var e;const{id:t,axes:i,processedData:n,ctx:{callbackCache:s}}=this,o=i.x,a=i.y;if(!(this.visible&&o&&a&&n&&"grouped"===n.type))return[];const{scale:c}=o,{scale:u}=a,{xKey:p,yKey:g,xName:m,yName:y,fill:b,stroke:_,strokeWidth:E}=this.properties,{formatter:D=(q=>String(q.value)),fontStyle:R,fontWeight:O,fontSize:L,fontFamily:k,color:U}=this.properties.label,j=[];return n.data.forEach(q=>{var J;const{aggValues:[[me,ye]]=[[0,0]],datum:Ae,datum:{length:Pe},keys:Le,keys:[Xe,Je]}=q,ht=c.convert(Xe),Dt=c.convert(Je),Ft=me+ye,Mt=u.convert(0),Nt=u.convert(Ft),Ht=Math.abs(Dt-ht),Tn=Math.abs(Nt-Mt),jn=Math.min(ht,Dt),Rn=Math.min(Mt,Nt),rt=0!==Ft?{text:null!=(J=s.call(D,{value:Ft,datum:Ae,seriesId:t,xKey:p,yKey:g,xName:m,yName:y}))?J:String(Ft),fontStyle:R,fontWeight:O,fontSize:L,fontFamily:k,fill:U,x:jn+Ht/2,y:Rn+Tn/2}:void 0;j.push({series:this,datum:Ae,aggregatedValue:Ft,frequency:Pe,domain:Le,yKey:g,xKey:p,x:jn,y:Rn,xValue:ht,yValue:Nt,width:Ht,height:Tn,midPoint:{x:jn+Ht/2,y:Rn+Tn/2},fill:b,stroke:_,opacity:1,strokeWidth:E,label:rt})}),[{itemId:null!=(e=this.properties.yKey)?e:this.id,nodeData:j,labelData:j,scales:yu(pU.prototype,this,"calculateScaling").call(this),animationValid:!0,visible:this.visible}]})}nodeFactory(){return new so}updateDatumSelection(e){return Be(this,null,function*(){const{nodeData:t,datumSelection:i}=e;return i.update(t,n=>{n.tag=0,n.crisp=!0},n=>n.domain.join("_"))})}updateDatumNodes(e){return Be(this,null,function*(){const{isHighlight:t}=e,{fillOpacity:i,strokeOpacity:n,lineDash:s,lineDashOffset:o,shadow:a,highlightStyle:{item:{fill:c,fillOpacity:u=i,stroke:p,strokeWidth:g}}}=this.properties;e.datumSelection.each((m,y,b)=>{var _,E;const D=t&&void 0!==g?g:y.strokeWidth,R=t?u:i;m.fill=null!=(_=t?c:void 0)?_:y.fill,m.stroke=null!=(E=t?p:void 0)?E:y.stroke,m.fillOpacity=R,m.strokeOpacity=n,m.strokeWidth=D,m.lineDash=s,m.lineDashOffset=o,m.fillShadow=a,m.zIndex=t?L_.highlightedZIndex:b,m.visible=y.height>0})})}updateLabelSelection(e){return Be(this,null,function*(){const{labelData:t,labelSelection:i}=e;return i.update(t,n=>{n.tag=1,n.pointerEvents=1,n.textAlign="center",n.textBaseline="middle"})})}updateLabelNodes(e){return Be(this,null,function*(){const t=this.isLabelEnabled();e.labelSelection.each((i,n)=>{const s=n.label;s&&t?(i.text=s.text,i.x=s.x,i.y=s.y,i.fontStyle=s.fontStyle,i.fontWeight=s.fontWeight,i.fontSize=s.fontSize,i.fontFamily=s.fontFamily,i.fill=s.fill,i.visible=!0):i.visible=!1})})}getTooltipHtml(e){const t=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!t||!i)return"";const{xKey:n,yKey:s,xName:o,yName:a,fill:c,aggregation:u,tooltip:p}=this.properties,{aggregatedValue:g,frequency:m,domain:[y,b]}=e,_=`${un(o??n)}: ${t.formatDatum(y)} - ${t.formatDatum(b)}`;let E=s?`<b>${un(a??s)} (${u})</b>: ${i.formatDatum(g)}<br>`:"";return E+=`<b>Frequency</b>: ${m}`,p.toTooltipHtml({title:_,backgroundColor:c,content:E},{datum:{data:e.datum,aggregatedValue:e.aggregatedValue,domain:e.domain,frequency:e.frequency},xKey:n,xName:o,yKey:s,yName:a,color:c,title:_,seriesId:this.id})}getLegendData(e){var t,i;if(null==(t=this.data)||!t.length||"category"!==e)return[];const{xKey:n,yName:s,fill:o,fillOpacity:a,stroke:c,strokeWidth:u,strokeOpacity:p,visible:g}=this.properties;return[{legendType:"category",id:this.id,itemId:n,seriesId:this.id,enabled:g,label:{text:null!=(i=s??n)?i:"Frequency"},marker:{fill:o??"rgba(0, 0, 0, 0)",stroke:c??"rgba(0, 0, 0, 0)",fillOpacity:a,strokeOpacity:p,strokeWidth:u}}]}animateEmptyUpdateReady({datumSelections:e,labelSelections:t}){const i=lT(aT(!0,this.axes,"normal"));cn(this.id,"datums",this.ctx.animationManager,e,i),Ni(this,"labels",this.ctx.animationManager,t)}animateWaitingUpdateReady(e){var t,i;const n=null==(i=null==(t=this.processedData)?void 0:t.reduced)?void 0:i.diff,s=lT(aT(!0,this.axes,"normal"));cn(this.id,"datums",this.ctx.animationManager,e.datumSelections,s,(o,a)=>Jg(a.domain),n),Ni(this,"labels",this.ctx.animationManager,e.labelSelections)}isLabelEnabled(){return this.properties.label.enabled}};kN.className="HistogramSeries",kN.type="histogram";var vz={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"histogram",instanceConstructor:kN,seriesDefaults:{axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]},themeTemplate:{series:{__extends__:vp,strokeWidth:1,fillOpacity:1,strokeOpacity:1,lineDash:[0],lineDashOffset:0,label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Vs,color:v_,formatter:void 0},shadow:{enabled:!1,color:y_,xOffset:3,yOffset:3,blur:5}}},paletteFactory:({takeColors:r})=>{const{fills:[e],strokes:[t]}=r(1);return{fill:e,stroke:t}}},Ao=class extends em{constructor(){super(...arguments),this.stroke="#874349",this.strokeWidth=2,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.marker=new da,this.label=new Ss,this.tooltip=new ua,this.connectMissingData=!1}};I([H(et)],Ao.prototype,"xKey",2),I([H(et)],Ao.prototype,"yKey",2),I([H(et,{optional:!0})],Ao.prototype,"xName",2),I([H(et,{optional:!0})],Ao.prototype,"yName",2),I([H(et,{optional:!0})],Ao.prototype,"title",2),I([H(Si)],Ao.prototype,"stroke",2),I([H(qe)],Ao.prototype,"strokeWidth",2),I([H(Fi)],Ao.prototype,"strokeOpacity",2),I([H(bp)],Ao.prototype,"lineDash",2),I([H(qe)],Ao.prototype,"lineDashOffset",2),I([H(Ct)],Ao.prototype,"marker",2),I([H(Ct)],Ao.prototype,"label",2),I([H(Ct)],Ao.prototype,"tooltip",2),I([H(Ot)],Ao.prototype,"connectMissingData",2);var GN=class fU extends tm{constructor(e){super({moduleCtx:e,hasMarkers:!0,pickModes:[2,3,0],markerSelectionGarbageCollection:!1,animationResetFns:{path:MN({getOpacity:()=>this.getOpacity()}),label:Mp,marker:(t,i)=>Re(Re({},{opacity:1,scalingX:1,scalingY:1}),nT(0,i))}}),this.properties=new Ao}processData(e){return Be(this,null,function*(){if(!this.properties.isValid()||null==this.data)return;const{xKey:t,yKey:i}=this.properties,n=!this.ctx.animationManager.isSkipped(),{isContinuousX:s,isContinuousY:o}=this.isContinuous(),a=[];s||(a.push(Mr(this,t,s,{id:"xKey"})),n&&this.processedData&&a.push(JC(this.processedData))),n&&a.push(N_(this,s?["xValue"]:[])),a.push(Ki(this,t,s,{id:"xValue"}),Ki(this,i,o,{id:"yValue",invalidValue:void 0})),yield this.requestDataModel(e,this.data,{props:a}),this.animationState.transition("updateData")})}getSeriesDomain(e){const{axes:t,dataModel:i,processedData:n}=this;if(!n||!i)return[];const s=t.x,o=t.y,a=i.resolveProcessedDataDefById(this,"xValue");if("x"===e){const c=i.getDomain(this,"xValue","value",n);return"value"===a?.def.type&&"category"===a.def.valueType?c:Ro(Tu(c),s)}return Ro(i.getDomain(this,"yValue","value",n),o)}createNodeData(){return Be(this,null,function*(){var e,t,i;const{processedData:n,dataModel:s,axes:o}=this,a=o.x,c=o.y;if(!(n&&s&&a&&c))return[];const{xKey:u,yKey:p,xName:g,yName:m,marker:y,label:b,connectMissingData:_}=this.properties,E=a.scale,D=c.scale,R=(null!=(e=E.bandwidth)?e:0)/2,O=(null!=(t=D.bandwidth)?t:0)/2,L=[],k=y.enabled?y.size:0,U=s.resolveProcessedDataIndexById(this,"xValue").index,j=s.resolveProcessedDataIndexById(this,"yValue").index;let J,q=!0;for(let me=0;me<n.data.length;me++){const{datum:ye,values:Ae}=J??n.data[me],Pe=Ae[U],Le=Ae[j];if(void 0===Le)q=!_;else{const Xe=E.convert(Pe)+R;if(isNaN(Xe)){q=!_,J=void 0;continue}J=void 0===(null==(i=n.data[me+1])?void 0:i.values[j])?void 0:n.data[me+1];const Je=D.convert(Le)+O,ht=this.getLabelText(b,{value:Le,datum:ye,xKey:u,yKey:p,xName:g,yName:m},Dt=>Ei(Dt)?Dt.toFixed(2):String(Dt));L.push({series:this,datum:ye,yKey:p,xKey:u,point:{x:Xe,y:Je,moveTo:q,size:k},midPoint:{x:Xe,y:Je},yValue:Le,xValue:Pe,capDefaults:{lengthRatioMultiplier:this.properties.marker.getDiameter(),lengthMax:1/0},label:ht?{text:ht,fontStyle:b.fontStyle,fontWeight:b.fontWeight,fontSize:b.fontSize,fontFamily:b.fontFamily,textAlign:"center",textBaseline:"bottom",fill:b.color}:void 0}),q=!1}}return[{itemId:p,nodeData:L,labelData:L,scales:yu(fU.prototype,this,"calculateScaling").call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}markerFactory(){const{shape:e}=this.properties.marker;return new(Xg(e))}updatePathNodes(e){return Be(this,null,function*(){const{paths:[t],opacity:i,visible:n,animationEnabled:s}=e;t.setProperties({fill:void 0,lineJoin:"round",pointerEvents:1,opacity:i,stroke:this.properties.stroke,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.properties.strokeOpacity,lineDash:this.properties.lineDash,lineDashOffset:this.properties.lineDashOffset}),s||(t.visible=n),PM(this,t)})}updateMarkerSelection(e){return Be(this,null,function*(){let{nodeData:t}=e;const{markerSelection:i}=e,{shape:n,enabled:s}=this.properties.marker;return t=n&&s?t:[],this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(t,void 0,o=>Jg(o.xValue))})}updateMarkerNodes(e){return Be(this,null,function*(){const{markerSelection:t,isHighlight:i}=e,{xKey:n,yKey:s,stroke:o,strokeWidth:a,strokeOpacity:c,marker:u,highlightStyle:p}=this.properties,g=ri(i&&p.item,u.getStyle(),{stroke:o,strokeWidth:a,strokeOpacity:c}),m=this.ctx.animationManager.isSkipped();t.each((y,b)=>{this.updateMarkerStyle(y,u,{datum:b,highlighted:i,xKey:n,yKey:s},g,{applyTranslation:m})}),i||u.markClean()})}updateLabelSelection(e){return Be(this,null,function*(){return e.labelSelection.update(this.isLabelEnabled()?e.labelData:[])})}updateLabelNodes(e){return Be(this,null,function*(){const{enabled:t,fontStyle:i,fontWeight:n,fontSize:s,fontFamily:o,color:a}=this.properties.label;e.labelSelection.each((c,u)=>{const{point:p,label:g}=u;u&&g&&t?(c.fontStyle=i,c.fontWeight=n,c.fontSize=s,c.fontFamily=o,c.textAlign=g.textAlign,c.textBaseline=g.textBaseline,c.text=g.text,c.x=p.x,c.y=p.y-10,c.fill=a,c.visible=!0):c.visible=!1})})}getTooltipHtml(e){var t;const i=this.axes.x,n=this.axes.y;if(!this.properties.isValid()||!i||!n)return"";const{xKey:s,yKey:o,xName:a,yName:c,strokeWidth:u,marker:p,tooltip:g}=this.properties,{datum:m,xValue:y,yValue:b}=e,_=i.formatDatum(y),E=n.formatDatum(b),D=un(null!=(t=this.properties.title)?t:c),R=un(_+": "+E),O=ri({fill:p.stroke},p.getStyle(),{strokeWidth:u}),{fill:L}=this.getMarkerStyle(p,{datum:e,xKey:s,yKey:o,highlighted:!1},O);return g.toTooltipHtml({title:D,content:R,backgroundColor:L},Re({datum:m,xKey:s,xName:a,yKey:o,yName:c,title:D,color:L,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(e){var t,i,n,s,o,a,c,u,p;if(!(null==(t=this.data)?void 0:t.length)||!this.properties.isValid()||"category"!==e)return[];const{yKey:g,yName:m,stroke:y,strokeOpacity:b,strokeWidth:_,lineDash:E,title:D,marker:R,visible:O}=this.properties,L="rgba(0, 0, 0, 0)";return[{legendType:"category",id:this.id,itemId:g,seriesId:this.id,enabled:O,label:{text:null!=(i=D??m)?i:g},marker:{shape:R.shape,fill:null!=(n=R.fill)?n:L,stroke:null!=(o=null!=(s=R.stroke)?s:y)?o:L,fillOpacity:null!=(a=R.fillOpacity)?a:1,strokeOpacity:null!=(u=null!=(c=R.strokeOpacity)?c:b)?u:1,strokeWidth:null!=(p=R.strokeWidth)?p:0,enabled:R.enabled},line:{stroke:y??L,strokeOpacity:b,strokeWidth:_,lineDash:E}}]}updatePaths(e){return Be(this,null,function*(){this.updateLinePaths([e.paths],[e.contextData])})}updateLinePaths(e,t){t.forEach(({nodeData:i},n)=>{const[s]=e[n],{path:o}=s;o.clear({trackChanges:!0});for(const a of i)a.point.moveTo?o.moveTo(a.point.x,a.point.y):o.lineTo(a.point.x,a.point.y);s.checkPathDirty()})}animateEmptyUpdateReady(e){const{markerSelections:t,labelSelections:i,annotationSelections:n,contextData:s,paths:o}=e,{animationManager:a}=this.ctx;this.updateLinePaths(o,s),ON(this,a,o.flat()),Hs(t,nT),EN(this,a,t),Ni(this,"labels",a,i),Ni(this,"annotations",a,n)}animateReadyResize(e){const{contextData:t,paths:i}=e;this.updateLinePaths(i,t),super.animateReadyResize(e)}animateWaitingUpdateReady(e){var t,i;const{animationManager:n}=this.ctx,{markerSelections:s,labelSelections:o,annotationSelections:a,contextData:c,paths:u,previousContextData:p}=e,[g]=u;super.resetAllAnimation(e);const m=()=>{this.updateLinePaths(u,c)};if(0===c.length||0===p?.length)return m(),tT(this,n,s,"added"),sT(this,"path_properties",n,g??[]),Ni(this,"labels",n,o),void Ni(this,"annotations",n,a);const[b]=c,[_]=p??[],E=aB(b,_,null==(i=null==(t=this.processedData)?void 0:t.reduced)?void 0:i.diff);if(void 0===E)return n.skipCurrentBatch(),void m();tT(this,n,s),cn(this.id,"path_properties",n,g,E.pathProperties),qV(this.id,"path_update",n,g,E.path),E.hasMotion&&(Ni(this,"labels",n,o),Ni(this,"annotations",n,a))}isLabelEnabled(){return this.properties.label.enabled}getBandScalePadding(){return{inner:1,outer:.1}}nodeFactory(){return new vt}};GN.className="LineSeries",GN.type="line";var yz={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"line",instanceConstructor:GN,seriesDefaults:{axes:[{type:"number",position:"left"},{type:"category",position:"bottom"}]},themeTemplate:{series:{__extends__:vp,tooltip:{position:{type:"node"}},strokeWidth:2,strokeOpacity:1,lineDash:[0],lineDashOffset:0,marker:{__extends__:m_,fillOpacity:1,strokeOpacity:1,strokeWidth:0},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Vs,color:Pi,formatter:void 0}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:r=>{const{marker:e}=QD(r);return{stroke:e.fill,marker:e}}},Oo=class extends em{constructor(){super(...arguments),this.colorRange=["#ffff00","#00ff00","#0000ff"],this.marker=new da,this.label=new Ss,this.tooltip=new ua}};I([H(et)],Oo.prototype,"xKey",2),I([H(et)],Oo.prototype,"yKey",2),I([H(et,{optional:!0})],Oo.prototype,"labelKey",2),I([H(et,{optional:!0})],Oo.prototype,"colorKey",2),I([H(et,{optional:!0})],Oo.prototype,"xName",2),I([H(et,{optional:!0})],Oo.prototype,"yName",2),I([H(et,{optional:!0})],Oo.prototype,"labelName",2),I([H(et,{optional:!0})],Oo.prototype,"colorName",2),I([H(hM,{optional:!0})],Oo.prototype,"colorDomain",2),I([H(Jl)],Oo.prototype,"colorRange",2),I([H(et,{optional:!0})],Oo.prototype,"title",2),I([H(Ct)],Oo.prototype,"marker",2),I([H(Ct)],Oo.prototype,"label",2),I([H(Ct)],Oo.prototype,"tooltip",2);var VN=class gU extends tm{constructor(e){super({moduleCtx:e,pickModes:[2,3,0],pathsPerSeries:0,hasMarkers:!0,markerSelectionGarbageCollection:!1,animationResetFns:{marker:iT,label:Mp}}),this.properties=new Oo,this.colorScale=new iy}processData(e){return Be(this,null,function*(){var t;if(!this.properties.isValid()||null==this.data)return;const{isContinuousX:i,isContinuousY:n}=this.isContinuous(),{xKey:s,yKey:o,labelKey:a,colorKey:c,colorDomain:u,colorRange:p}=this.properties,{dataModel:g,processedData:m}=yield this.requestDataModel(e,this.data,{props:[Mr(this,s,i,{id:"xKey-raw"}),Mr(this,o,n,{id:"yKey-raw"}),...a?[Mr(this,a,!1,{id:"labelKey-raw"})]:[],Ki(this,s,i,{id:"xValue"}),Ki(this,o,n,{id:"yValue"}),...c?[Ki(this,c,!0,{id:"colorValue"})]:[],...a?[Ki(this,a,!1,{id:"labelValue"})]:[]],dataVisible:this.visible});if(c){const y=g.resolveProcessedDataIndexById(this,"colorValue").index;this.colorScale.domain=null!=(t=u??m.domain.values[y])?t:[],this.colorScale.range=p,this.colorScale.update()}this.animationState.transition("updateData")})}getSeriesDomain(e){const{dataModel:t,processedData:i}=this;if(!i||!t)return[];const n="x"===e?"xValue":"yValue",s=t.resolveProcessedDataDefById(this,n),o=t.getDomain(this,n,"value",i);if("value"===s?.def.type&&"category"===s?.def.valueType)return o;const a=this.axes[e];return Ro(Tu(o),a)}createNodeData(){return Be(this,null,function*(){var e,t,i;const{axes:n,dataModel:s,processedData:o,colorScale:a}=this,{xKey:c,yKey:u,labelKey:p,colorKey:g,xName:m,yName:y,labelName:b,marker:_,label:E,visible:D}=this.properties,R=n.x,O=n.y;if(!(s&&o&&D&&R&&O))return[];const L=s.resolveProcessedDataIndexById(this,"xValue").index,k=s.resolveProcessedDataIndexById(this,"yValue").index,U=g?s.resolveProcessedDataIndexById(this,"colorValue").index:-1,j=p?s.resolveProcessedDataIndexById(this,"labelValue").index:-1,q=R.scale,J=O.scale,me=(null!=(e=q.bandwidth)?e:0)/2,ye=(null!=(t=J.bandwidth)?t:0)/2,Ae=[],Pe=E.getFont();for(const{values:Le,datum:Xe}of null!=(i=o.data)?i:[]){const Je=Le[L],ht=Le[k],Dt=q.convert(Je)+me,Ft=J.convert(ht)+ye,Mt=this.getLabelText(E,{value:p?Le[j]:ht,datum:Xe,xKey:c,yKey:u,labelKey:p,xName:m,yName:y,labelName:b}),Nt=Wn.getTextSize(Mt,Pe),Ht=g?a.convert(Le[U]):void 0;Ae.push({series:this,itemId:u,yKey:u,xKey:c,datum:Xe,xValue:Je,yValue:ht,capDefaults:{lengthRatioMultiplier:_.getDiameter(),lengthMax:1/0},point:{x:Dt,y:Ft,size:_.size},midPoint:{x:Dt,y:Ft},fill:Ht,label:Re({text:Mt},Nt)})}return[{itemId:u,nodeData:Ae,labelData:Ae,scales:yu(gU.prototype,this,"calculateScaling").call(this),visible:this.visible}]})}isPathOrSelectionDirty(){return this.properties.marker.isDirty()}getLabelData(){var e;return null==(e=this.contextNodeData)?void 0:e.reduce((t,i)=>t.concat(i.labelData),[])}markerFactory(){const{shape:e}=this.properties.marker;return new(Xg(e))}updateMarkerSelection(e){return Be(this,null,function*(){const{nodeData:t,markerSelection:i}=e;return this.properties.marker.isDirty()&&(i.clear(),i.cleanup()),i.update(this.properties.marker.enabled?t:[])})}updateMarkerNodes(e){return Be(this,null,function*(){const{markerSelection:t,isHighlight:i}=e,{xKey:n,yKey:s,labelKey:o,marker:a,highlightStyle:c}=this.properties,u=ri(i&&c.item,a.getStyle());t.each((p,g)=>{this.updateMarkerStyle(p,a,{datum:g,highlighted:i,xKey:n,yKey:s,labelKey:o},u)}),i||a.markClean()})}updateLabelSelection(e){return Be(this,null,function*(){var t,i;const n=this.isLabelEnabled()&&null!=(i=null==(t=this.chart)?void 0:t.placeLabels().get(this))?i:[];return e.labelSelection.update(n.map(({datum:s,x:o,y:a})=>nt(Re({},s),{point:{x:o,y:a,size:s.point.size}})),s=>{s.pointerEvents=1})})}updateLabelNodes(e){return Be(this,null,function*(){const{label:t}=this.properties;e.labelSelection.each((i,n)=>{var s,o,a,c;i.text=n.label.text,i.fill=t.color,i.x=null!=(o=null==(s=n.point)?void 0:s.x)?o:0,i.y=null!=(c=null==(a=n.point)?void 0:a.y)?c:0,i.fontStyle=t.fontStyle,i.fontWeight=t.fontWeight,i.fontSize=t.fontSize,i.fontFamily=t.fontFamily,i.textAlign="left",i.textBaseline="top"})})}getTooltipHtml(e){const t=this.axes.x,i=this.axes.y;if(!this.properties.isValid()||!t||!i)return"";const{xKey:n,yKey:s,labelKey:o,xName:a,yName:c,labelName:u,title:p=c,marker:g,tooltip:m}=this.properties,{datum:y,xValue:b,yValue:_,label:E}=e,D=ri({fill:e.fill,strokeWidth:this.getStrokeWidth(g.strokeWidth)},g.getStyle()),{fill:R="gray"}=this.getMarkerStyle(g,{datum:e,highlighted:!1,xKey:n,yKey:s,labelKey:o},D),O=un(t.formatDatum(b)),L=un(i.formatDatum(_));let k=`<b>${un(a??n)}</b>: ${O}<br><b>${un(c??s)}</b>: ${L}`;return o&&(k=`<b>${un(u??o)}</b>: ${un(E.text)}<br>`+k),m.toTooltipHtml({title:p,content:k,backgroundColor:R},Re({datum:y,xKey:n,xName:a,yKey:s,yName:c,labelKey:o,labelName:u,title:p,color:R,seriesId:this.id},this.getModuleTooltipParams()))}getLegendData(e){var t,i,n,s,o,a;const{yKey:c,yName:u,title:p,marker:g,visible:m}=this.properties,{fill:y,stroke:b,fillOpacity:_,strokeOpacity:E,strokeWidth:D}=g;return null!=(t=this.data)&&t.length&&this.properties.isValid()&&"category"===e?[{legendType:"category",id:this.id,itemId:c,seriesId:this.id,enabled:m,label:{text:null!=(i=p??u)?i:c},marker:{shape:g.shape,fill:null!=(s=null!=(n=g.fill)?n:y)?s:"rgba(0, 0, 0, 0)",stroke:null!=(a=null!=(o=g.stroke)?o:b)?a:"rgba(0, 0, 0, 0)",fillOpacity:_??1,strokeOpacity:E??1,strokeWidth:D??0}}]:[]}animateEmptyUpdateReady(e){const{markerSelections:t,labelSelections:i,annotationSelections:n}=e;wN(this,this.ctx.animationManager,t),Ni(this,"labels",this.ctx.animationManager,i),Ni(this,"annotations",this.ctx.animationManager,n)}isLabelEnabled(){return this.properties.label.enabled}nodeFactory(){return new vt}};VN.className="ScatterSeries",VN.type="scatter";var bz={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["cartesian"],identifier:"scatter",instanceConstructor:VN,seriesDefaults:{axes:[{type:"number",position:"bottom"},{type:"number",position:"left"}]},themeTemplate:{series:{__extends__:vp,tooltip:{position:{type:"node"}},marker:{__extends__:m_,fillOpacity:.8},label:{enabled:!1,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Vs,color:Pi}}},enterpriseThemeTemplate:{series:{errorBar:{cap:{lengthRatio:1}}}},paletteFactory:QD};function BN(r,e,t){const i=Math.sqrt(Math.pow(r,2)+Math.pow(e,2)),{innerRadius:n,outerRadius:s}=t;if(t.startAngle===t.endAngle||i<Math.min(n,s)||i>Math.max(n,s))return!1;const o=OD(t.startAngle),a=OD(t.endAngle),c=Math.atan2(e,r);return o<a?c<=a&&c>=o:c<=a&&c>=-Math.PI||c>=o&&c<=Math.PI}function SB(r,e){const{startAngle:t,endAngle:i,innerRadius:n,outerRadius:s}=e,o={x:s*Math.cos(t),y:s*Math.sin(t)},a={x:s*Math.cos(i),y:s*Math.sin(i)},c=0===n?{x:0,y:0}:{x:n*Math.cos(t),y:n*Math.sin(t)},u=0===n?{x:0,y:0}:{x:n*Math.cos(i),y:n*Math.sin(i)};return null!=zD(r.start.x,r.start.y,r.end.x,r.end.y,o.x,o.y,c.x,c.y)||null!=zD(r.start.x,r.start.y,r.end.x,r.end.y,a.x,a.y,u.x,u.y)||_V(0,0,s,t,i,!0,r.start.x,r.start.y,r.end.x,r.end.y).length>0}function bB(r,e){const n={x:r.x,y:r.y+r.height},s={x:r.x+r.width,y:r.y+r.height};return SB({start:{x:r.x,y:r.y},end:{x:r.x+r.width,y:r.y}},e)||SB({start:n,end:s},e)}var sc=class extends tl{constructor(){super(...arguments),this.centerX=0,this.centerY=0,this.innerRadius=10,this.outerRadius=20,this.startAngle=0,this.endAngle=2*Math.PI,this.angleOffset=0,this.inset=0}computeBBox(){const r=this.outerRadius;return new Bt(this.centerX-r,this.centerY-r,2*r,2*r)}updatePath(){const r=this.path,{angleOffset:e,inset:t}=this,i=this.startAngle+e,n=this.endAngle+e,s=i<=n?n-i:2*Math.PI-(i-n),o=Math.max(Math.min(this.innerRadius,this.outerRadius)+t,0),a=Math.max(Math.max(this.innerRadius,this.outerRadius)-t,0),c=s>=2*Math.PI,u=this.centerX,p=this.centerY;if(r.clear(),c)r.arc(u,p,a,i,n),o>t&&(r.moveTo(u+o*Math.cos(n),p+o*Math.sin(n)),r.arc(u,p,o,n,i,!0));else{const g=o>0?t/o:0,m=a>0?t/a:0;if(s<2*m)return;const b=o<=t||s<2*g;if(b){const _=s<.5*Math.PI?t*(1+Math.cos(s))/Math.sin(s):NaN;let E;E=_>0&&_<a?Math.max(Math.hypot(t,_),o):o;const D=i+.5*s;r.moveTo(u+E*Math.cos(D),p+E*Math.sin(D))}else r.moveTo(u+o*Math.cos(i+g),p+o*Math.sin(i+g));r.arc(u,p,a,i+m,n-m),b||(o>0?r.arc(u,p,o,n-g,i+g,!0):r.lineTo(u,p))}r.closePath(),this.dirtyPath=!1}isPointInPath(r,e){const{angleOffset:t}=this,i=this.startAngle+t,n=this.endAngle+t,s=Math.min(this.innerRadius,this.outerRadius),o=Math.max(this.innerRadius,this.outerRadius),a=this.transformPoint(r,e);return BN(a.x,a.y,{startAngle:i,endAngle:n,innerRadius:s,outerRadius:o})}};sc.className="Sector",I([Jt()],sc.prototype,"centerX",2),I([Jt()],sc.prototype,"centerY",2),I([Jt()],sc.prototype,"innerRadius",2),I([Jt()],sc.prototype,"outerRadius",2),I([Jt()],sc.prototype,"startAngle",2),I([Jt()],sc.prototype,"endAngle",2),I([Jt()],sc.prototype,"angleOffset",2),I([Jt()],sc.prototype,"inset",2);var _B=class extends gn{constructor(){super(...arguments),this.showInLegend=!1}};I([H(Ot)],_B.prototype,"showInLegend",2);var HN=class extends Ss{constructor(){super(...arguments),this.margin=2}set(r,e){return super.set(r)}};I([H(et)],HN.prototype,"text",2),I([H(Xi)],HN.prototype,"margin",2);var UN=class extends Di{constructor(){super(...arguments),this.fill="transparent",this.fillOpacity=1}};I([H(Si)],UN.prototype,"fill",2),I([H(Fi)],UN.prototype,"fillOpacity",2);var G_=class extends Ss{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};I([H(qe)],G_.prototype,"offset",2),I([H(Wg)],G_.prototype,"minAngle",2),I([H(qe)],G_.prototype,"minSpacing",2),I([H(qe)],G_.prototype,"maxCollisionOffset",2),I([H(Ot)],G_.prototype,"avoidCollisions",2);var WN=class extends Ss{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};I([H(Xi)],WN.prototype,"positionOffset",2),I([H(Fi)],WN.prototype,"positionRatio",2);var NM=class extends Di{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};I([H(Jl,{optional:!0})],NM.prototype,"colors",2),I([H(qe)],NM.prototype,"length",2),I([H(qe)],NM.prototype,"strokeWidth",2);var fi=class extends rd{constructor(){super(...arguments),this.fills=Object.values(Du),this.strokes=Object.values(IC),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new mp(HN),this.title=new _B,this.innerCircle=new UN,this.shadow=new ld,this.calloutLabel=new G_,this.sectorLabel=new WN,this.calloutLine=new NM,this.tooltip=new ua,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}isValid(){const r=super.isValid();return null==this.innerRadiusRatio&&null==this.innerRadiusOffset?(tt.warnOnce("Either an [innerRadiusRatio] or an [innerRadiusOffset] must be set to render a donut series."),!1):r}};function V_(r,e,t,i){const n=[t.convert(0),t.convert(1)],s=[i.convert(0),i.convert(1)],o=Math.PI/-2+io(e);return{nodes:{toFn:(y,b,_,{prevLive:E})=>{var D,R;let{startAngle:O,endAngle:L,innerRadius:k,outerRadius:U}=b;const{stroke:j,fill:q}=b.sectorFormat;if("removed"===_&&E?(O=null==(D=E.datum)?void 0:D.endAngle,L=null==(R=E.datum)?void 0:R.endAngle):"removed"===_&&!E&&(O=o,L=o),"removed"===_){const J=(({radius:y})=>({innerRadius:n[0],outerRadius:n[0]+(n[1]-n[0])*y}))(b);k=J.innerRadius,U=J.outerRadius}return{startAngle:O,endAngle:L,outerRadius:U,innerRadius:k,stroke:j,fill:q}},fromFn:(y,b,_,{prevFromProps:E})=>{var D,R,O,L,k,U;let{startAngle:j,endAngle:q,innerRadius:J,outerRadius:me}=y,{fill:ye,stroke:Ae}=b.sectorFormat;if("unknown"===_||"added"===_&&!E?(j=o,q=o,J=b.innerRadius,me=b.outerRadius):"added"===_&&E&&(j=null!=(D=E.endAngle)?D:o,q=null!=(R=E.endAngle)?R:o,J=null!=(O=E.innerRadius)?O:b.innerRadius,me=null!=(L=E.outerRadius)?L:b.outerRadius),"added"===_&&!r){const Pe=(({radius:y})=>({innerRadius:s[0],outerRadius:s[0]+(s[1]-s[0])*y}))(b);J=Pe.innerRadius,me=Pe.outerRadius}return"updated"===_&&(ye=null!=(k=y.fill)?k:ye,Ae=null!=(U=y.stroke)?U:Ae),{startAngle:j,endAngle:q,innerRadius:J,outerRadius:me,fill:ye,stroke:Ae,phase:"initial"}}},innerCircle:{fromFn:(y,b)=>{var _,E,D;return{size:null!=(D=null!=(E=null==(_=y.previousDatum)?void 0:_.radius)?E:y.size)?D:0,phase:"initial"}},toFn:(y,b)=>{var _;return{size:null!=(_=b.radius)?_:0}}}}}function wB(r,e){return{startAngle:e.startAngle,endAngle:e.endAngle,innerRadius:e.innerRadius,outerRadius:e.outerRadius,fill:e.sectorFormat.fill,stroke:e.sectorFormat.stroke}}I([H(et)],fi.prototype,"angleKey",2),I([H(et,{optional:!0})],fi.prototype,"angleName",2),I([H(et,{optional:!0})],fi.prototype,"radiusKey",2),I([H(et,{optional:!0})],fi.prototype,"radiusName",2),I([H(qe,{optional:!0})],fi.prototype,"radiusMin",2),I([H(qe,{optional:!0})],fi.prototype,"radiusMax",2),I([H(et,{optional:!0})],fi.prototype,"calloutLabelKey",2),I([H(et,{optional:!0})],fi.prototype,"calloutLabelName",2),I([H(et,{optional:!0})],fi.prototype,"sectorLabelKey",2),I([H(et,{optional:!0})],fi.prototype,"sectorLabelName",2),I([H(et,{optional:!0})],fi.prototype,"legendItemKey",2),I([H(Jl)],fi.prototype,"fills",2),I([H(Jl)],fi.prototype,"strokes",2),I([H(Fi)],fi.prototype,"fillOpacity",2),I([H(Fi)],fi.prototype,"strokeOpacity",2),I([H(bp)],fi.prototype,"lineDash",2),I([H(qe)],fi.prototype,"lineDashOffset",2),I([H(Zl,{optional:!0})],fi.prototype,"formatter",2),I([H(Wg)],fi.prototype,"rotation",2),I([H(Xi)],fi.prototype,"outerRadiusOffset",2),I([H(Fi)],fi.prototype,"outerRadiusRatio",2),I([H(Xi,{optional:!0})],fi.prototype,"innerRadiusOffset",2),I([H(Fi,{optional:!0})],fi.prototype,"innerRadiusRatio",2),I([H(qe)],fi.prototype,"strokeWidth",2),I([H(qe,{optional:!0})],fi.prototype,"sectorSpacing",2),I([H(RF)],fi.prototype,"innerLabels",2),I([H(Ct)],fi.prototype,"title",2),I([H(Ct)],fi.prototype,"innerCircle",2),I([H(Ct)],fi.prototype,"shadow",2),I([H(Ct)],fi.prototype,"calloutLabel",2),I([H(Ct)],fi.prototype,"sectorLabel",2),I([H(Ct)],fi.prototype,"calloutLine",2),I([H(Ct)],fi.prototype,"tooltip",2),I([H(et,{optional:!0})],fi.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2);var LM=class extends HV{constructor(r){var e=r,{useLabelLayer:t=!1,pickModes:i=[0],canHaveAxes:n=!1,animationResetFns:s}=e,o=rs(e,["useLabelLayer","pickModes","canHaveAxes","animationResetFns"]);super(nt(Re({},o),{useLabelLayer:t,pickModes:i,contentGroupVirtual:!1,directionKeys:{x:["angleKey"],y:["radiusKey"]},directionNames:{x:["angleName"],y:["radiusName"]},canHaveAxes:n})),this.itemGroup=this.contentGroup.appendChild(new vt),this.itemSelection=dn.select(this.itemGroup,()=>this.nodeFactory(),!1),this.labelSelection=dn.select(this.labelGroup,Ri,!1),this.highlightSelection=dn.select(this.highlightGroup,()=>this.nodeFactory()),this.centerX=0,this.centerY=0,this.radius=0,this.itemGroup.zIndexSubOrder=[()=>this._declarationOrder,1],this.animationResetFns=s,this.animationState=new GD("empty",{empty:{update:{target:"ready",action:a=>this.animateEmptyUpdateReady(a)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:a=>this.animateReadyHighlight(a),highlightMarkers:a=>this.animateReadyHighlightMarkers(a),resize:a=>this.animateReadyResize(a),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:a=>this.animateWaitingUpdateReady(a)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:a=>this.animateClearingUpdateEmpty(a)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(r){"initial"===r?this.animationState.transition("reset"):"ready"===r&&this.animationState.transition("skip")}getLabelData(){return[]}computeLabelsBBox(r,e){return null}resetAllAnimation(){var r;const{item:e,label:t}=null!=(r=this.animationResetFns)?r:{};this.ctx.animationManager.stopByAnimationGroupId(this.id),e&&Hs([this.itemSelection,this.highlightSelection],e),t&&Hs([this.labelSelection],t),this.itemSelection.cleanup(),this.labelSelection.cleanup(),this.highlightSelection.cleanup()}animateEmptyUpdateReady(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateWaitingUpdateReady(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animateReadyHighlight(r){var e;const{item:t}=null!=(e=this.animationResetFns)?e:{};t&&Hs([this.highlightSelection],t)}animateReadyHighlightMarkers(r){}animateReadyResize(r){this.resetAllAnimation()}animateClearingUpdateEmpty(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation()}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(r){return{seriesRect:r}}},_z=class extends YD{constructor(r,e,t,i){super(r,e,t,i),this.angleKey=i.properties.angleKey,this.radiusKey=i.properties.radiusKey,this.calloutLabelKey=i.properties.calloutLabelKey,this.sectorLabelKey=i.properties.sectorLabelKey}},kM=class extends LM{constructor(r){super({moduleCtx:r,useLabelLayer:!0,animationResetFns:{item:wB,label:Mp}}),this.properties=new fi,this.previousRadiusScale=new Lu,this.radiusScale=new Lu,this.backgroundGroup=this.rootGroup.appendChild(new vt({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new vt({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Nu),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Nu),this.innerCircleGroup=this.backgroundGroup.appendChild(new vt({name:`${this.id}-innerCircle`})),this.nodeData=[],this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeClickEvent=_z,this.angleScale=new Lu,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(n=>n+Math.PI/2);const e=new vt({name:"pieCalloutLabels"}),t=new vt({name:"pieSectorLabels"}),i=new vt({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(t),this.labelGroup.append(i),this.calloutLabelSelection=dn.select(e,vt),this.sectorLabelSelection=dn.select(t,Ri),this.innerLabelsSelection=dn.select(i,Ri),this.innerCircleSelection=dn.select(this.innerCircleGroup,Nu);for(const n of[this.zerosumInnerRing,this.zerosumOuterRing])n.fillOpacity=0,n.stroke=this.properties.calloutLabel.color,n.strokeWidth=1,n.strokeOpacity=1}addChartEventListeners(){var r;this.destroyFns.push(null==(r=this.ctx.chartEventManager)?void 0:r.addListener("legend-item-click",e=>this.onLegendItemClick(e)))}visibleChanged(){this.processSeriesItemEnabled()}get visible(){return this.seriesItemEnabled.length?this.seriesItemEnabled.some(r=>r):super.visible}processSeriesItemEnabled(){var r;const{data:e,visible:t}=this;this.seriesItemEnabled=null!=(r=e?.map(()=>t))?r:[]}nodeFactory(){return new sc}getSeriesDomain(r){return"x"===r?this.angleScale.domain:this.radiusScale.domain}processData(r){return Be(this,null,function*(){var e,t,i,n,s;if(null==this.data||!this.properties.isValid())return;let{data:o}=this;const{seriesItemEnabled:a}=this,{angleKey:c,radiusKey:u,calloutLabelKey:p,sectorLabelKey:g,legendItemKey:m}=this.properties,y=!this.ctx.animationManager.isSkipped(),b=[],_=[];m?b.push(Mr(this,m,!1,{id:"legendItemKey"})):p?b.push(Mr(this,p,!1,{id:"calloutLabelKey"})):g&&b.push(Mr(this,g,!1,{id:"sectorLabelKey"})),u&&_.push(gN(this,u,{id:"radiusValue",min:null!=(e=this.properties.radiusMin)?e:0,max:this.properties.radiusMax}),Ki(this,u,!0,{id:"radiusRaw"}),KD(this,{id:"radiusValue"},[0,1],1,null!=(t=this.properties.radiusMin)?t:0,this.properties.radiusMax)),p&&_.push(Ki(this,p,!1,{id:"calloutLabelValue"})),g&&_.push(Ki(this,g,!1,{id:"sectorLabelValue"})),m&&_.push(Ki(this,m,!1,{id:"legendItemValue"})),y&&this.processedData&&b.length>0&&_.push(JC(this.processedData)),_.push(N_(this)),o=o.map((E,D)=>a[D]?E:nt(Re({},E),{[c]:0})),yield this.requestDataModel(r,o,{props:[...b,mN(this,c,!0,{id:"angleValue",onlyPositive:!0}),Ki(this,c,!0,{id:"angleRaw"}),KD(this,{id:"angleValue"},[0,1],0,0),..._]});for(const E of null!=(s=null==(n=null==(i=this.processedData)?void 0:i.defs)?void 0:n.values)?s:[]){const{id:D,missing:R,property:O}=E,L=QF(this,R);"angleRaw"!==D&&L>0&&tt.warnOnce(`no value was found for the key '${String(O)}' on ${L} data element${L>1?"s":""}`)}this.animationState.transition("updateData")})}maybeRefreshNodeData(){return Be(this,null,function*(){if(!this.nodeDataRefresh)return;const[{nodeData:r=[]}={}]=yield this.createNodeData();this.nodeData=r,this.nodeDataRefresh=!1})}getProcessedDataIndexes(r){return{angleIdx:r.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.properties.radiusKey?r.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.properties.calloutLabelKey?r.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.properties.sectorLabelKey?r.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.properties.legendItemKey?r.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}}createNodeData(){return Be(this,null,function*(){const{id:r,processedData:e,dataModel:t,angleScale:i}=this,{rotation:n,innerRadiusRatio:s}=this.properties;if(!this.properties.isValid())return this.zerosumOuterRing.visible=!0,this.zerosumInnerRing.visible=!0,[{itemId:r,nodeData:[],labelData:[]}];if(!e||!t||"ungrouped"!==e.type)return[];const{angleIdx:o,radiusIdx:a,calloutLabelIdx:c,sectorLabelIdx:u,legendItemIdx:p}=this.getProcessedDataIndexes(t);let g=0,m=0;const y=e.data.map((b,_)=>{var E;const{datum:D,values:R}=b,O=R[o],L=i.convert(g)+io(n);g=O,m+=O;const k=i.convert(g)+io(n),U=Math.abs(k-L),j=L+U/2,q=R[o+1],J=a>=0&&null!=(E=R[a])?E:1,me=a>=0?R[a+1]:void 0,ye=p>=0?R[p]:void 0,Ae=this.getLabels(D,j,U,!0,R[c],R[u],ye),Pe=this.getSectorFormat(D,_,!1);return Re({itemId:_,series:this,datum:D,index:_,angleValue:q,midAngle:j,midCos:Math.cos(j),midSin:Math.sin(j),startAngle:L,endAngle:k,sectorFormat:Pe,radiusValue:me,radius:J,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(J),0),legendItemValue:ye},Ae)});return this.zerosumOuterRing.visible=0===m,this.zerosumInnerRing.visible=0===m&&null!=s&&1!==s&&s>0,[{itemId:r,nodeData:y,labelData:y}]})}getLabels(r,e,t,i,n,s,o){const{calloutLabel:a,sectorLabel:c,legendItemKey:u}=this.properties,p=!i||a.enabled?this.properties.calloutLabelKey:void 0,g=!i||c.enabled?this.properties.sectorLabelKey:void 0;if(!p&&!g&&!u)return{};const m={datum:r,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},y={};return p&&t>io(a.minAngle)&&(y.calloutLabel=nt(Re({},this.getTextAlignment(e)),{text:this.getLabelText(a,nt(Re({},m),{value:n})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),g&&(y.sectorLabel={text:this.getLabelText(c,nt(Re({},m),{value:s}))}),null!=u&&null!=o&&(y.legendItem={key:u,text:o}),y}getTextAlignment(r){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],t=OD(r),i=-3*Math.PI/4;return e[aM(Math.floor((t-i)/(Math.PI/2)),e.length)]}getSectorFormat(r,e,t){var i,n,s,o,a;const{callbackCache:c,highlightManager:u}=this.ctx,{angleKey:p,radiusKey:g,fills:m,strokes:y,formatter:b,sectorSpacing:_,__BACKGROUND_COLOR_DO_NOT_USE:E}=this.properties,D=u.getActiveHighlight(),R=t&&D?.series===this&&e===D.itemId,{fill:O,fillOpacity:L,stroke:k,strokeWidth:U,strokeOpacity:j}=ri(R&&this.properties.highlightStyle.item,{fill:m.length>0?m[e%m.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:null!=_?y.length>0?y[e%y.length]:void 0:y.length>0?y[e%y.length]:E,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()});let q;return b&&(q=c.call(b,{datum:r,angleKey:p,radiusKey:g,fill:O,stroke:k,fills:m,strokes:y,strokeWidth:U,highlighted:R,seriesId:this.id})),{fill:null!=(i=q?.fill)?i:O,fillOpacity:null!=(n=q?.fillOpacity)?n:L,stroke:null!=(s=q?.stroke)?s:k,strokeWidth:null!=(o=q?.strokeWidth)?o:U,strokeOpacity:null!=(a=q?.strokeOpacity)?a:j}}getInnerRadius(){const{radius:r}=this,{innerRadiusRatio:e=1,innerRadiusOffset:t=0}=this.properties,i=r*e+t;return i===r||i<0?0:i}getOuterRadius(){const{outerRadiusRatio:r,outerRadiusOffset:e}=this.properties;return Math.max(this.radius*r+e,0)}updateRadiusScale(r){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,r&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map(t=>{var i=t,{radius:n}=i,s=rs(i,["radius"]);return nt(Re({},s),{radius:n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n),0)})})}getTitleTranslationY(){var r,e;const t=Math.max(0,this.radiusScale.range[1]);return 0===t?NaN:-t-(2+(null!=(e=null==(r=this.properties.title)?void 0:r.spacing)?e:0))-Math.max(0,-t)}update(r){return Be(this,arguments,function*({seriesRect:e}){const{title:t}=this.properties,i={seriesRectWidth:e?.width,seriesRectHeight:e?.height},n=null!=Ar(this.nodeDataDependencies,i);if(n&&(this._nodeDataDependencies=i),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t){const s=this.getTitleTranslationY(),o=t.node.computeBBox();t.node.visible=t.enabled&&isFinite(s)&&!this.bboxIntersectsSurroundingSeries(o,0,s),t.node.translationY=isFinite(s)?s:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(e)})}updateTitleNodes(){var r,e;const{oldTitle:t}=this,{title:i}=this.properties;t!==i&&(t&&(null==(r=this.labelGroup)||r.removeChild(t.node)),i&&(i.node.textBaseline="bottom",null==(e=this.labelGroup)||e.appendChild(i.node)),this.oldTitle=i)}updateNodeMidPoint(){this.nodeData.forEach(r=>{const e=r.innerRadius+(r.outerRadius-r.innerRadius)/2;r.midPoint={x:r.midCos*Math.max(0,e),y:r.midSin*Math.max(0,e)}})}updateSelections(){return Be(this,null,function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()})}updateGroupSelection(){return Be(this,null,function*(){const{itemSelection:r,highlightSelection:e,calloutLabelSelection:t,sectorLabelSelection:i,innerLabelsSelection:n}=this,s=(o,a)=>{let c=this.nodeData;a&&(c=c.map(u=>nt(Re({},u),{sectorFormat:Re({},u.sectorFormat)}))),o.update(c,void 0,u=>this.getDatumId(u)),this.ctx.animationManager.isSkipped()&&o.cleanup()};s(r,!1),s(e,!0),t.update(this.nodeData,o=>{const a=new Us;a.tag=1,a.pointerEvents=1,o.appendChild(a);const c=new Ri;c.tag=2,c.pointerEvents=1,o.appendChild(c)}),i.update(this.nodeData,o=>{o.pointerEvents=1}),n.update(this.properties.innerLabels,o=>{o.pointerEvents=1})})}updateInnerCircleSelection(){const{innerCircle:r}=this.properties;let e=0;const t=this.getInnerRadius();if(t>0){const n=Math.min(t,this.getOuterRadius());e=Math.ceil(2*n+1)}this.innerCircleSelection.update(r?[{radius:e}]:[])}updateNodes(r){return Be(this,null,function*(){const e=this.ctx.highlightManager.getActiveHighlight(),t=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=t,this.backgroundGroup.visible=t,this.contentGroup.visible=t,this.highlightGroup.visible=t&&e?.series===this,this.labelGroup&&(this.labelGroup.visible=t),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((n,{radius:s})=>{var o,a;n.setProperties({fill:null==(o=this.properties.innerCircle)?void 0:o.fill,opacity:null==(a=this.properties.innerCircle)?void 0:a.fillOpacity,size:s})});const i=(n,s,o,a)=>{const c=this.getSectorFormat(s.datum,s.itemId,a);s.sectorFormat.fill=c.fill,s.sectorFormat.stroke=c.stroke;const u=this.ctx.animationManager.isSkipped();u&&(n.startAngle=s.startAngle,n.endAngle=s.endAngle,n.innerRadius=s.innerRadius,n.outerRadius=s.outerRadius),(a||u)&&(n.fill=c.fill,n.stroke=c.stroke),n.strokeWidth=c.strokeWidth,n.fillOpacity=c.fillOpacity,n.strokeOpacity=this.properties.strokeOpacity,n.lineDash=this.properties.lineDash,n.lineDashOffset=this.properties.lineDashOffset,n.fillShadow=this.properties.shadow,n.inset=null!=this.properties.sectorSpacing?(this.properties.sectorSpacing+(null!=c.stroke?c.strokeWidth:0))/2:0,n.lineJoin=null!=this.properties.sectorSpacing?"miter":"round"};this.itemSelection.each((n,s,o)=>i(n,s,0,!1)),this.highlightSelection.each((n,s,o)=>{const a=e?.series===this&&n.datum.itemId===e.itemId;i(n,s,0,!0),n.visible=a}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(r),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")})}updateCalloutLineNodes(){var r;const{calloutLine:e}=this.properties,t=e.length,i=e.strokeWidth,n=null!=(r=e.colors)?r:this.properties.strokes,{offset:s}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(1).forEach((o,a)=>{const c=o.datum,{calloutLabel:u,outerRadius:p}=c;if(u?.text&&!u.hidden&&0!==p){o.visible=!0,o.strokeWidth=i,o.stroke=n[a%n.length],o.fill=void 0;const g=c.midCos*p,m=c.midSin*p;let y=c.midCos*(p+t),b=c.midSin*(p+t);if((u.collisionTextAlign||0!==u.collisionOffsetY)&&null!=u.box){const E=u.box;let D=y,R=b;y<E.x?D=E.x:y>E.x+E.width&&(D=E.x+E.width),b<E.y?R=E.y:b>E.y+E.height&&(R=E.y+E.height);const O=D-y,L=R-b,k=Math.sqrt(Math.pow(O,2)+Math.pow(L,2)),U=k-s;U>0&&(y+=O*U/k,b+=L*U/k)}o.x1=g,o.y1=m,o.x2=y,o.y2=b}else o.visible=!1})}getLabelOverflow(r,e,t){const i=t.x-this.centerX,n=t.x+t.width-this.centerX;let c=1;e.x+1<i?c=(e.x+e.width-i)/e.width:e.x+e.width-1>n&&(c=(n-e.x)/e.width);const u=e.y+1<t.y-this.centerY||e.y+e.height-1>t.y+t.height-this.centerY;return{textLength:1===c?r.length:Math.floor(r.length*c)-1,hasVerticalOverflow:u,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(r,e=0,t=0){const{surroundingRadius:i}=this;if(null==i)return!1;const n=[{x:r.x+e,y:r.y+t},{x:r.x+r.width+e,y:r.y+t},{x:r.x+r.width+e,y:r.y+r.height+t},{x:r.x+e,y:r.y+r.height+t}],s=Yt(i,2);return n.some(o=>Yt(o.x,2)+Yt(o.y,2)>s)}computeCalloutLabelCollisionOffsets(){const{radiusScale:r}=this,{calloutLabel:e,calloutLine:t}=this.properties,{offset:i,minSpacing:n}=e,s=r.convert(0),a=this.nodeData,c=this.nodeData.filter(R=>!(R=>!R.calloutLabel||0===R.outerRadius)(R));if(c.forEach(R=>{const O=R.calloutLabel;null!=O&&(O.hidden=!1,O.collisionTextAlign=void 0,O.collisionOffsetY=0)}),c.length<=1)return;const u=c.filter(R=>R.midCos<0).sort((R,O)=>R.midSin-O.midSin),p=c.filter(R=>R.midCos>=0).sort((R,O)=>R.midSin-O.midSin),g=c.filter(R=>{var O;return R.midSin<0&&"center"===(null==(O=R.calloutLabel)?void 0:O.textAlign)}).sort((R,O)=>R.midCos-O.midCos),m=c.filter(R=>{var O;return R.midSin>=0&&"center"===(null==(O=R.calloutLabel)?void 0:O.textAlign)}).sort((R,O)=>R.midCos-O.midCos),y=new Ri,b=R=>{var O;const L=R.calloutLabel;if(null==L)return new Bt(0,0,0,0);const k=R.outerRadius+t.length+i,U=R.midCos*k,j=R.midSin*k+L.collisionOffsetY;return y.text=L.text,y.x=U,y.y=j,y.setFont(this.properties.calloutLabel),y.setAlign({textAlign:null!=(O=L.collisionTextAlign)?O:L.textAlign,textBaseline:L.textBaseline}),y.computeBBox()},_=(R,O,L)=>{const k=b(R).grow(n/2),U=b(O).grow(n/2);k.x<U.x+U.width&&k.x+k.width>U.x&&("to-top"===L?k.y<U.y+U.height:k.y+k.height>U.y)&&(O.calloutLabel.collisionOffsetY="to-top"===L?k.y-U.y-U.height:k.y+k.height-U.y)},E=R=>{const O=R.slice().sort((k,U)=>Math.abs(k.midSin)-Math.abs(U.midSin))[0],L=R.indexOf(O);for(let k=L-1;k>=0;k--)_(R[k+1],R[k],"to-top");for(let k=L+1;k<R.length;k++)_(R[k-1],R[k],"to-bottom")},D=R=>{const O=c.some(J=>0!==J.calloutLabel.collisionOffsetY),L=R.map(J=>b(J)),k=L.map(J=>J.clone().grow(n/2));let U=!1;for(let J=0;J<k.length&&!U;J++){const me=k[J];for(let ye=J+1;ye<R.length;ye++)if(me.collidesBBox(k[ye])){U=!0;break}}const j=a.map(J=>{const{startAngle:me,endAngle:ye,outerRadius:Ae}=J;return{startAngle:me,endAngle:ye,innerRadius:s,outerRadius:Ae}}),q=L.some(J=>j.some(me=>bB(J,me)));!U&&!O&&!q||R.filter(J=>"center"===J.calloutLabel.textAlign).forEach(J=>{J.calloutLabel.collisionTextAlign=J.midCos<0?"right":J.midCos>0?"left":"center"})};E(u),E(p),D(g),D(m)}updateCalloutLabelNodes(r){const{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,n=i.length,{offset:s,color:o}=t,a=new Ri;this.calloutLabelSelection.selectByTag(2).forEach(c=>{var u;const{datum:p}=c,g=p.calloutLabel,m=e.convert(p.radius),y=Math.max(0,m);if(!g?.text||0===y||g.hidden)return void(c.visible=!1);const b=y+n+s,_=p.midCos*b,E=p.midSin*b+g.collisionOffsetY,D={textAlign:null!=(u=g.collisionTextAlign)?u:g.textAlign,textBaseline:g.textBaseline};a.text=g.text,a.x=_,a.y=E,a.setFont(this.properties.calloutLabel),a.setAlign(D);const R=a.computeBBox();let O=g.text,L=!0;if(t.avoidCollisions){const{textLength:k,hasVerticalOverflow:U}=this.getLabelOverflow(g.text,R,r);O=g.text.length===k?g.text:`${g.text.substring(0,k)}\u2026`,L=!U}c.text=O,c.x=_,c.y=E,c.setFont(this.properties.calloutLabel),c.setAlign(D),c.fill=o,c.visible=L})}computeLabelsBBox(r,e){return Be(this,null,function*(){const{calloutLabel:t,calloutLine:i}=this.properties,n=i.length,{offset:s,maxCollisionOffset:o,minSpacing:a}=t;if(!t.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const c=[],u=new Ri;let p;const{title:g}=this.properties;if(g?.text&&g.enabled){const m=this.getTitleTranslationY();isFinite(m)&&(u.text=g.text,u.x=0,u.y=m,u.setFont(g),u.setAlign({textBaseline:"bottom",textAlign:"center"}),p=u.computeBBox(),c.push(p))}return this.nodeData.forEach(m=>{var y;const b=m.calloutLabel;if(!b||0===m.outerRadius)return null;const _=m.outerRadius+n+s,E=m.midCos*_,D=m.midSin*_+b.collisionOffsetY;u.text=b.text,u.x=E,u.y=D,u.setFont(this.properties.calloutLabel),u.setAlign({textAlign:null!=(y=b.collisionTextAlign)?y:b.textAlign,textBaseline:b.textBaseline});const R=u.computeBBox();if(b.box=R,Math.abs(b.collisionOffsetY)>o)b.hidden=!0;else{if(p){const O=e.y-this.centerY,L=new Bt(p.x-a,O,p.width+2*a,p.y+p.height+a-O);if(R.collidesBBox(L))return void(b.hidden=!0)}if(r.hideWhenNecessary){const{textLength:O,hasVerticalOverflow:L,hasSurroundingSeriesOverflow:k}=this.getLabelOverflow(b.text,R,e),U=b.text.length>2&&O<2;if(L||U||k)return void(b.hidden=!0)}b.hidden=!1,c.push(R)}}),0===c.length?null:Bt.merge(c)})}updateSectorLabelNodes(){const{radiusScale:r}=this,e=r.convert(0),{fontSize:t,fontStyle:i,fontWeight:n,fontFamily:s,positionOffset:o,positionRatio:a,color:c}=this.properties.sectorLabel;this.sectorLabelSelection.each((u,p)=>{const{sectorLabel:g,outerRadius:m}=p;let y=!1;if(g&&0!==m){const b=e*(1-a)+m*a+o;u.fill=c,u.fontStyle=i,u.fontWeight=n,u.fontSize=t,u.fontFamily=s,u.text=g.text,u.x=p.midCos*b,u.y=p.midSin*b,u.textAlign="center",u.textBaseline="middle";const _=u.computeBBox(),E=[[_.x,_.y],[_.x+_.width,_.y],[_.x+_.width,_.y+_.height],[_.x,_.y+_.height]],{startAngle:D,endAngle:R}=p,O={startAngle:D,endAngle:R,innerRadius:e,outerRadius:m};E.every(([L,k])=>BN(L,k,O))&&(y=!0)}u.visible=y})}updateInnerLabelNodes(){const r=[],e=[];this.innerLabelsSelection.each((p,g)=>{const{fontStyle:m,fontWeight:y,fontSize:b,fontFamily:_,color:E}=g;p.fontStyle=m,p.fontWeight=y,p.fontSize=b,p.fontFamily=_,p.text=g.text,p.x=0,p.y=0,p.fill=E,p.textAlign="center",p.textBaseline="alphabetic",r.push(p.computeBBox()),e.push(g.margin)});const t=p=>0===p?0:e[p],i=p=>p===e.length-1?0:e[p],n=r.reduce((p,g,m)=>p+g.height+t(m)+i(m),0),s=Math.max(...r.map(p=>p.width)),o=this.getInnerRadius(),c=Math.sqrt(Math.pow(s/2,2)+Math.pow(n/2,2))<=(o>0?o:this.getOuterRadius()),u=[];for(let p=0,g=-n/2;p<r.length;p++){const y=r[p].height+g+t(p);u.push(y),g=y+i(p)}this.innerLabelsSelection.each((p,g,m)=>{p.y=u[m],p.visible=c})}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}getDatumLegendName(r){const{angleKey:e,calloutLabelKey:t,sectorLabelKey:i,legendItemKey:n}=this.properties,{sectorLabel:s,calloutLabel:o,legendItem:a}=r;return n&&void 0!==a?a.text:t&&t!==e&&void 0!==o?.text?o.text:i&&i!==e&&void 0!==s?.text?s.text:void 0}getTooltipHtml(r){var e;if(!this.properties.isValid())return"";const{datum:t,angleValue:i,sectorFormat:{fill:n}}=r,s=un(null==(e=this.properties.title)?void 0:e.text),o=Ei(i)?oM(i):String(i),a=this.getDatumLegendName(r);return this.properties.tooltip.toTooltipHtml({title:s??a,content:s&&a?`${a}: ${o}`:o,backgroundColor:n},{datum:t,title:s,color:n,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName})}getLegendData(r){var e,t,i,n,s;const{processedData:o,dataModel:a}=this;if(!a||!o?.data.length||!this.properties.isValid()||"category"!==r)return[];const{angleKey:c,calloutLabelKey:u,sectorLabelKey:p,legendItemKey:g}=this.properties;if(!(g||u&&u!==c||p&&p!==c))return[];const{calloutLabelIdx:m,sectorLabelIdx:y,legendItemIdx:b}=this.getProcessedDataIndexes(a),_=(null==(e=this.properties.title)?void 0:e.showInLegend)&&this.properties.title.text,E=[];for(let D=0;D<o.data.length;D++){const{datum:R,values:O}=o.data[D],L=[];_&&L.push(_);const k=this.getLabels(R,2*Math.PI,2*Math.PI,!1,O[m],O[y],O[b]);if(g&&void 0!==k.legendItem?L.push(k.legendItem.text):u&&u!==c&&void 0!==(null==(t=k.calloutLabel)?void 0:t.text)?L.push(null==(i=k.calloutLabel)?void 0:i.text):p&&p!==c&&void 0!==(null==(n=k.sectorLabel)?void 0:n.text)&&L.push(null==(s=k.sectorLabel)?void 0:s.text),0===L.length)continue;const U=this.getSectorFormat(R,D,!1);E.push({legendType:"category",id:this.id,itemId:D,seriesId:this.id,enabled:this.seriesItemEnabled[D],label:{text:L.join(" - ")},marker:{fill:U.fill,stroke:U.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},legendItemName:null!=g?R[g]:void 0})}return E}onLegendItemClick(r){const{enabled:e,itemId:t,series:i,legendItemName:n}=r;i.id===this.id?this.toggleSeriesItem(t,e):null!=n&&this.toggleOtherSeriesItems(n,e)}toggleSeriesItem(r,e){this.seriesItemEnabled[r]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(r,e){var t;if(!this.properties.legendItemKey||!this.dataModel)return;const i=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue").index;null==(t=this.processedData)||t.data.forEach(({values:n},s)=>{n[i]===r&&this.toggleSeriesItem(s,e)})}animateEmptyUpdateReady(r){const{animationManager:e}=this.ctx,t=V_(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);cn(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],t.nodes),cn(this.id,"innerCircle",e,[this.innerCircleSelection],t.innerCircle),Ni(this,"callout",e,[this.calloutLabelSelection]),Ni(this,"sector",e,[this.sectorLabelSelection]),Ni(this,"inner",e,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var r,e,t,i,n,s;const{itemSelection:o,highlightSelection:a,processedData:c,radiusScale:u,previousRadiusScale:p}=this,{animationManager:g}=this.ctx,m=null==(r=c?.reduced)?void 0:r.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const y=0===(null!=(e=m?.moved.length)?e:0)&&m?.addedIndices.every(D=>!m.removedIndices.includes(D)),b=(null!=(t=c?.defs.keys.length)?t:0)>0,_=null==(s=null==(n=null==(i=c?.reduced)?void 0:i.animationValidation)?void 0:n.uniqueKeys)||s;(!y||!b||!_)&&this.ctx.animationManager.skipCurrentBatch();const E=V_(!1,this.properties.rotation,u,p);cn(this.id,"nodes",g,[o,a],E.nodes,(D,R)=>this.getDatumId(R),m),cn(this.id,"innerCircle",g,[this.innerCircleSelection],E.innerCircle),Ni(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Ni(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Ni(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:r,highlightSelection:e,radiusScale:t,previousRadiusScale:i}=this,{animationManager:n}=this.ctx,s=V_(!1,this.properties.rotation,t,i);cn(this.id,"nodes",n,[r,e],s.nodes),cn(this.id,"innerCircle",n,[this.innerCircleSelection],s.innerCircle),ty(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),ty(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),ty(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(r){var e,t,i;const{calloutLabelKey:n,sectorLabelKey:s,legendItemKey:o}=this.properties;if(null!=(i=null==(t=null==(e=this.processedData)?void 0:e.reduced)?void 0:t.animationValidation)&&i.uniqueKeys){if(o)return r[o];if(n)return r[n];if(s)return r[s]}}getDatumId(r){var e;const{index:t}=r;return null!=(e=this.getDatumIdFromData(r.datum))?e:`${t}`}onDataChange(){this.processSeriesItemEnabled()}};kM.className="DonutSeries",kM.type="donut";var EB={series:{__extends__:vp,title:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:14,fontFamily:Vs,color:C_,spacing:5},calloutLabel:{enabled:!0,fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Vs,color:Pi,offset:3,minAngle:0},sectorLabel:{enabled:!0,fontStyle:void 0,fontWeight:"normal",fontSize:12,fontFamily:Vs,color:v_,positionOffset:0,positionRatio:.5},calloutLine:{length:10,strokeWidth:2},fillOpacity:1,strokeOpacity:1,strokeWidth:1,lineDash:[0],lineDashOffset:0,rotation:0,shadow:{enabled:!1,color:y_,xOffset:3,yOffset:3,blur:5},innerLabels:{fontStyle:void 0,fontWeight:void 0,fontSize:12,fontFamily:Vs,color:Pi,margin:2},__BACKGROUND_COLOR_DO_NOT_USE:yD}},DB=({takeColors:r,colorsCount:e,userPalette:t})=>{const{fills:i,strokes:n}=r(e);return{fills:i,strokes:t?n:[],calloutLine:{colors:n}}},wz={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"donut",instanceConstructor:kM,seriesDefaults:{},themeTemplate:EB,paletteFactory:DB},TB=class extends gn{constructor(){super(...arguments),this.showInLegend=!1}};I([H(Ot)],TB.prototype,"showInLegend",2);var jN=class extends Ss{set(r,e){return super.set(r)}};I([WC("Use a Donut Series instead"),H(et,{optional:!0})],jN.prototype,"text",2),I([WC("Use a Donut Series instead"),H(Xi,{optional:!0})],jN.prototype,"margin",2);var zN=class extends Di{};I([WC("Use a Donut Series instead"),H(Si,{optional:!0})],zN.prototype,"fill",2),I([WC("Use a Donut Series instead"),H(Fi,{optional:!0})],zN.prototype,"fillOpacity",2);var B_=class extends Ss{constructor(){super(...arguments),this.offset=3,this.minAngle=0,this.minSpacing=4,this.maxCollisionOffset=50,this.avoidCollisions=!0}};I([H(qe)],B_.prototype,"offset",2),I([H(Wg)],B_.prototype,"minAngle",2),I([H(qe)],B_.prototype,"minSpacing",2),I([H(qe)],B_.prototype,"maxCollisionOffset",2),I([H(Ot)],B_.prototype,"avoidCollisions",2);var $N=class extends Ss{constructor(){super(...arguments),this.positionOffset=0,this.positionRatio=.5}};I([H(Xi)],$N.prototype,"positionOffset",2),I([H(Fi)],$N.prototype,"positionRatio",2);var GM=class extends Di{constructor(){super(...arguments),this.length=10,this.strokeWidth=1}};I([H(Jl,{optional:!0})],GM.prototype,"colors",2),I([H(qe)],GM.prototype,"length",2),I([H(qe)],GM.prototype,"strokeWidth",2);var gi=class extends rd{constructor(){super(...arguments),this.fills=Object.values(Du),this.strokes=Object.values(IC),this.fillOpacity=1,this.strokeOpacity=1,this.lineDash=[0],this.lineDashOffset=0,this.rotation=0,this.outerRadiusOffset=0,this.outerRadiusRatio=1,this.strokeWidth=1,this.sectorSpacing=void 0,this.innerLabels=new mp(jN),this.title=new TB,this.innerCircle=new zN,this.shadow=new ld,this.calloutLabel=new B_,this.sectorLabel=new $N,this.calloutLine=new GM,this.tooltip=new ua,this.__BACKGROUND_COLOR_DO_NOT_USE=void 0}};I([H(et)],gi.prototype,"angleKey",2),I([H(et,{optional:!0})],gi.prototype,"angleName",2),I([H(et,{optional:!0})],gi.prototype,"radiusKey",2),I([H(et,{optional:!0})],gi.prototype,"radiusName",2),I([H(qe,{optional:!0})],gi.prototype,"radiusMin",2),I([H(qe,{optional:!0})],gi.prototype,"radiusMax",2),I([H(et,{optional:!0})],gi.prototype,"calloutLabelKey",2),I([H(et,{optional:!0})],gi.prototype,"calloutLabelName",2),I([H(et,{optional:!0})],gi.prototype,"sectorLabelKey",2),I([H(et,{optional:!0})],gi.prototype,"sectorLabelName",2),I([H(et,{optional:!0})],gi.prototype,"legendItemKey",2),I([H(Jl)],gi.prototype,"fills",2),I([H(Jl)],gi.prototype,"strokes",2),I([H(Fi)],gi.prototype,"fillOpacity",2),I([H(Fi)],gi.prototype,"strokeOpacity",2),I([H(bp)],gi.prototype,"lineDash",2),I([H(qe)],gi.prototype,"lineDashOffset",2),I([H(Zl,{optional:!0})],gi.prototype,"formatter",2),I([H(Wg)],gi.prototype,"rotation",2),I([H(Xi)],gi.prototype,"outerRadiusOffset",2),I([H(Fi)],gi.prototype,"outerRadiusRatio",2),I([WC("Use a Donut Series instead"),H(Xi,{optional:!0})],gi.prototype,"innerRadiusOffset",2),I([WC("Use a Donut Series instead"),H(Fi,{optional:!0})],gi.prototype,"innerRadiusRatio",2),I([H(qe)],gi.prototype,"strokeWidth",2),I([H(qe,{optional:!0})],gi.prototype,"sectorSpacing",2),I([H(RF)],gi.prototype,"innerLabels",2),I([H(Ct)],gi.prototype,"title",2),I([H(Ct)],gi.prototype,"innerCircle",2),I([H(Ct)],gi.prototype,"shadow",2),I([H(Ct)],gi.prototype,"calloutLabel",2),I([H(Ct)],gi.prototype,"sectorLabel",2),I([H(Ct)],gi.prototype,"calloutLine",2),I([H(Ct)],gi.prototype,"tooltip",2),I([H(et,{optional:!0})],gi.prototype,"__BACKGROUND_COLOR_DO_NOT_USE",2);var Ez=class extends YD{constructor(r,e,t,i){super(r,e,t,i),this.angleKey=i.properties.angleKey,this.radiusKey=i.properties.radiusKey,this.calloutLabelKey=i.properties.calloutLabelKey,this.sectorLabelKey=i.properties.sectorLabelKey}},VM=class extends LM{constructor(r){super({moduleCtx:r,useLabelLayer:!0,animationResetFns:{item:wB,label:Mp}}),this.properties=new gi,this.previousRadiusScale=new Lu,this.radiusScale=new Lu,this.backgroundGroup=this.rootGroup.appendChild(new vt({name:`${this.id}-background`,layer:!0,zIndex:0})),this.zerosumRingsGroup=this.backgroundGroup.appendChild(new vt({name:`${this.id}-zerosumRings`})),this.zerosumOuterRing=this.zerosumRingsGroup.appendChild(new Nu),this.zerosumInnerRing=this.zerosumRingsGroup.appendChild(new Nu),this.innerCircleGroup=this.backgroundGroup.appendChild(new vt({name:`${this.id}-innerCircle`})),this.nodeData=[],this.seriesItemEnabled=[],this.surroundingRadius=void 0,this.NodeClickEvent=Ez,this.angleScale=new Lu,this.angleScale.domain=[0,1],this.angleScale.range=[-Math.PI,Math.PI].map(n=>n+Math.PI/2);const e=new vt({name:"pieCalloutLabels"}),t=new vt({name:"pieSectorLabels"}),i=new vt({name:"innerLabels"});this.labelGroup.append(e),this.labelGroup.append(t),this.labelGroup.append(i),this.calloutLabelSelection=dn.select(e,vt),this.sectorLabelSelection=dn.select(t,Ri),this.innerLabelsSelection=dn.select(i,Ri),this.innerCircleSelection=dn.select(this.innerCircleGroup,Nu);for(const n of[this.zerosumInnerRing,this.zerosumOuterRing])n.fillOpacity=0,n.stroke=this.properties.calloutLabel.color,n.strokeWidth=1,n.strokeOpacity=1}addChartEventListeners(){var r;this.destroyFns.push(null==(r=this.ctx.chartEventManager)?void 0:r.addListener("legend-item-click",e=>this.onLegendItemClick(e)))}visibleChanged(){this.processSeriesItemEnabled()}get visible(){return this.seriesItemEnabled.length?this.seriesItemEnabled.some(r=>r):super.visible}processSeriesItemEnabled(){var r;const{data:e,visible:t}=this;this.seriesItemEnabled=null!=(r=e?.map(()=>t))?r:[]}nodeFactory(){return new sc}getSeriesDomain(r){return"x"===r?this.angleScale.domain:this.radiusScale.domain}processData(r){return Be(this,null,function*(){var e,t,i,n,s;if(null==this.data||!this.properties.isValid())return;let{data:o}=this;const{seriesItemEnabled:a}=this,{angleKey:c,radiusKey:u,calloutLabelKey:p,sectorLabelKey:g,legendItemKey:m}=this.properties,y=!this.ctx.animationManager.isSkipped(),b=[],_=[];m?b.push(Mr(this,m,!1,{id:"legendItemKey"})):p?b.push(Mr(this,p,!1,{id:"calloutLabelKey"})):g&&b.push(Mr(this,g,!1,{id:"sectorLabelKey"})),u&&_.push(gN(this,u,{id:"radiusValue",min:null!=(e=this.properties.radiusMin)?e:0,max:this.properties.radiusMax}),Ki(this,u,!0,{id:"radiusRaw"}),KD(this,{id:"radiusValue"},[0,1],1,null!=(t=this.properties.radiusMin)?t:0,this.properties.radiusMax)),p&&_.push(Ki(this,p,!1,{id:"calloutLabelValue"})),g&&_.push(Ki(this,g,!1,{id:"sectorLabelValue"})),m&&_.push(Ki(this,m,!1,{id:"legendItemValue"})),y&&this.processedData&&b.length>0&&_.push(JC(this.processedData)),_.push(N_(this)),o=o.map((E,D)=>a[D]?E:nt(Re({},E),{[c]:0})),yield this.requestDataModel(r,o,{props:[...b,mN(this,c,!0,{id:"angleValue",onlyPositive:!0}),Ki(this,c,!0,{id:"angleRaw"}),KD(this,{id:"angleValue"},[0,1],0,0),..._]});for(const E of null!=(s=null==(n=null==(i=this.processedData)?void 0:i.defs)?void 0:n.values)?s:[]){const{id:D,missing:R,property:O}=E,L=QF(this,R);"angleRaw"!==D&&L>0&&tt.warnOnce(`no value was found for the key '${String(O)}' on ${L} data element${L>1?"s":""}`)}this.animationState.transition("updateData")})}maybeRefreshNodeData(){return Be(this,null,function*(){if(!this.nodeDataRefresh)return;const[{nodeData:r=[]}={}]=yield this.createNodeData();this.nodeData=r,this.nodeDataRefresh=!1})}getProcessedDataIndexes(r){return{angleIdx:r.resolveProcessedDataIndexById(this,"angleValue").index,radiusIdx:this.properties.radiusKey?r.resolveProcessedDataIndexById(this,"radiusValue").index:-1,calloutLabelIdx:this.properties.calloutLabelKey?r.resolveProcessedDataIndexById(this,"calloutLabelValue").index:-1,sectorLabelIdx:this.properties.sectorLabelKey?r.resolveProcessedDataIndexById(this,"sectorLabelValue").index:-1,legendItemIdx:this.properties.legendItemKey?r.resolveProcessedDataIndexById(this,"legendItemValue").index:-1}}createNodeData(){return Be(this,null,function*(){const{id:r,processedData:e,dataModel:t,angleScale:i}=this,{rotation:n}=this.properties;if(!e||!t||"ungrouped"!==e.type)return[];const{angleIdx:s,radiusIdx:o,calloutLabelIdx:a,sectorLabelIdx:c,legendItemIdx:u}=this.getProcessedDataIndexes(t);let p=0,g=0;const m=e.data.map((b,_)=>{var E;const{datum:D,values:R}=b,O=R[s],L=i.convert(p)+io(n);p=O,g+=O;const k=i.convert(p)+io(n),U=Math.abs(k-L),j=L+U/2,q=R[s+1],J=o>=0&&null!=(E=R[o])?E:1,me=o>=0?R[o+1]:void 0,ye=u>=0?R[u]:void 0,Ae=this.getLabels(D,j,U,!0,R[a],R[c],ye),Pe=this.getSectorFormat(D,_,!1);return Re({itemId:_,series:this,datum:D,index:_,angleValue:q,midAngle:j,midCos:Math.cos(j),midSin:Math.sin(j),startAngle:L,endAngle:k,sectorFormat:Pe,radiusValue:me,radius:J,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(J),0),legendItemValue:ye},Ae)});this.zerosumOuterRing.visible=0===g;const{innerRadiusRatio:y=1}=this.properties;return this.zerosumInnerRing.visible=0===g&&1!==y&&y>0,[{itemId:r,nodeData:m,labelData:m}]})}getLabels(r,e,t,i,n,s,o){const{calloutLabel:a,sectorLabel:c,legendItemKey:u}=this.properties,p=!i||a.enabled?this.properties.calloutLabelKey:void 0,g=!i||c.enabled?this.properties.sectorLabelKey:void 0;if(!p&&!g&&!u)return{};const m={datum:r,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName,legendItemKey:this.properties.legendItemKey},y={};return p&&t>io(a.minAngle)&&(y.calloutLabel=nt(Re({},this.getTextAlignment(e)),{text:this.getLabelText(a,nt(Re({},m),{value:n})),hidden:!1,collisionTextAlign:void 0,collisionOffsetY:0,box:void 0})),g&&(y.sectorLabel={text:this.getLabelText(c,nt(Re({},m),{value:s}))}),null!=u&&null!=o&&(y.legendItem={key:u,text:o}),y}getTextAlignment(r){const e=[{textAlign:"center",textBaseline:"bottom"},{textAlign:"left",textBaseline:"middle"},{textAlign:"center",textBaseline:"hanging"},{textAlign:"right",textBaseline:"middle"}],t=OD(r),i=-3*Math.PI/4;return e[aM(Math.floor((t-i)/(Math.PI/2)),e.length)]}getSectorFormat(r,e,t){var i,n,s,o,a;const{callbackCache:c,highlightManager:u}=this.ctx,{angleKey:p,radiusKey:g,fills:m,strokes:y,formatter:b,sectorSpacing:_,__BACKGROUND_COLOR_DO_NOT_USE:E}=this.properties,D=u.getActiveHighlight(),R=t&&D?.series===this&&e===D.itemId,{fill:O,fillOpacity:L,stroke:k,strokeWidth:U,strokeOpacity:j}=ri(R&&this.properties.highlightStyle.item,{fill:m.length>0?m[e%m.length]:void 0,fillOpacity:this.properties.fillOpacity,stroke:null!=_?y.length>0?y[e%y.length]:void 0:y.length>0?y[e%y.length]:E,strokeWidth:this.getStrokeWidth(this.properties.strokeWidth),strokeOpacity:this.getOpacity()});let q;return b&&(q=c.call(b,{datum:r,angleKey:p,radiusKey:g,fill:O,stroke:k,fills:m,strokes:y,strokeWidth:U,highlighted:R,seriesId:this.id})),{fill:null!=(i=q?.fill)?i:O,fillOpacity:null!=(n=q?.fillOpacity)?n:L,stroke:null!=(s=q?.stroke)?s:k,strokeWidth:null!=(o=q?.strokeWidth)?o:U,strokeOpacity:null!=(a=q?.strokeOpacity)?a:j}}getInnerRadius(){const{radius:r}=this,{innerRadiusRatio:e=1,innerRadiusOffset:t=0}=this.properties,i=r*e+t;return i===r||i<0?0:i}getOuterRadius(){return Math.max(this.radius*this.properties.outerRadiusRatio+this.properties.outerRadiusOffset,0)}updateRadiusScale(r){const e=[this.getInnerRadius(),this.getOuterRadius()];this.radiusScale.range=e,r&&(this.previousRadiusScale.range=e),this.nodeData=this.nodeData.map(t=>{var i=t,{radius:n}=i,s=rs(i,["radius"]);return nt(Re({},s),{radius:n,innerRadius:Math.max(this.radiusScale.convert(0),0),outerRadius:Math.max(this.radiusScale.convert(n),0)})})}getTitleTranslationY(){var r,e;const t=Math.max(0,this.radiusScale.range[1]);return 0===t?NaN:-t-(2+(null!=(e=null==(r=this.properties.title)?void 0:r.spacing)?e:0))-Math.max(0,-t)}update(r){return Be(this,arguments,function*({seriesRect:e}){const{title:t}=this.properties,i={seriesRectWidth:e?.width,seriesRectHeight:e?.height},n=null!=Ar(this.nodeDataDependencies,i);if(n&&(this._nodeDataDependencies=i),yield this.maybeRefreshNodeData(),this.updateTitleNodes(),this.updateRadiusScale(n),this.contentGroup.translationX=this.centerX,this.contentGroup.translationY=this.centerY,this.highlightGroup.translationX=this.centerX,this.highlightGroup.translationY=this.centerY,this.backgroundGroup.translationX=this.centerX,this.backgroundGroup.translationY=this.centerY,this.labelGroup&&(this.labelGroup.translationX=this.centerX,this.labelGroup.translationY=this.centerY),t){const s=this.getTitleTranslationY(),o=t.node.computeBBox();t.node.visible=t.enabled&&isFinite(s)&&!this.bboxIntersectsSurroundingSeries(o,0,s),t.node.translationY=isFinite(s)?s:0}this.updateNodeMidPoint(),yield this.updateSelections(),yield this.updateNodes(e)})}updateTitleNodes(){var r,e;const{oldTitle:t}=this,{title:i}=this.properties;t!==i&&(t&&(null==(r=this.labelGroup)||r.removeChild(t.node)),i&&(i.node.textBaseline="bottom",null==(e=this.labelGroup)||e.appendChild(i.node)),this.oldTitle=i)}updateNodeMidPoint(){this.nodeData.forEach(r=>{const e=r.innerRadius+(r.outerRadius-r.innerRadius)/2;r.midPoint={x:r.midCos*Math.max(0,e),y:r.midSin*Math.max(0,e)}})}updateSelections(){return Be(this,null,function*(){yield this.updateGroupSelection(),this.updateInnerCircleSelection()})}updateGroupSelection(){return Be(this,null,function*(){const{itemSelection:r,highlightSelection:e,calloutLabelSelection:t,sectorLabelSelection:i,innerLabelsSelection:n}=this,s=(o,a)=>{let c=this.nodeData;a&&(c=c.map(u=>nt(Re({},u),{sectorFormat:Re({},u.sectorFormat)}))),o.update(c,void 0,u=>this.getDatumId(u)),this.ctx.animationManager.isSkipped()&&o.cleanup()};s(r,!1),s(e,!0),t.update(this.nodeData,o=>{const a=new Us;a.tag=1,a.pointerEvents=1,o.appendChild(a);const c=new Ri;c.tag=2,c.pointerEvents=1,o.appendChild(c)}),i.update(this.nodeData,o=>{o.pointerEvents=1}),n.update(this.properties.innerLabels,o=>{o.pointerEvents=1})})}updateInnerCircleSelection(){const{innerCircle:r}=this.properties;let e=0;const t=this.getInnerRadius();if(t>0){const n=Math.min(t,this.getOuterRadius());e=Math.ceil(2*n+1)}this.innerCircleSelection.update(r?[{radius:e}]:[])}updateNodes(r){return Be(this,null,function*(){const e=this.ctx.highlightManager.getActiveHighlight(),t=this.seriesItemEnabled.indexOf(!0)>=0;this.rootGroup.visible=t,this.backgroundGroup.visible=t,this.contentGroup.visible=t,this.highlightGroup.visible=t&&e?.series===this,this.labelGroup&&(this.labelGroup.visible=t),this.contentGroup.opacity=this.getOpacity(),this.innerCircleSelection.each((n,{radius:s})=>{var o,a;n.setProperties({fill:null==(o=this.properties.innerCircle)?void 0:o.fill,opacity:null==(a=this.properties.innerCircle)?void 0:a.fillOpacity,size:s})});const i=(n,s,o,a)=>{const c=this.getSectorFormat(s.datum,s.itemId,a);s.sectorFormat.fill=c.fill,s.sectorFormat.stroke=c.stroke;const u=this.ctx.animationManager.isSkipped();u&&(n.startAngle=s.startAngle,n.endAngle=s.endAngle,n.innerRadius=s.innerRadius,n.outerRadius=s.outerRadius),(a||u)&&(n.fill=c.fill,n.stroke=c.stroke),n.strokeWidth=c.strokeWidth,n.fillOpacity=c.fillOpacity,n.strokeOpacity=this.properties.strokeOpacity,n.lineDash=this.properties.lineDash,n.lineDashOffset=this.properties.lineDashOffset,n.fillShadow=this.properties.shadow,n.inset=null!=this.properties.sectorSpacing?(this.properties.sectorSpacing+(null!=c.stroke?c.strokeWidth:0))/2:0,n.lineJoin=null!=this.properties.sectorSpacing?"miter":"round"};this.itemSelection.each((n,s,o)=>i(n,s,0,!1)),this.highlightSelection.each((n,s,o)=>{const a=e?.series===this&&n.datum.itemId===e.itemId;i(n,s,0,!0),n.visible=a}),this.updateCalloutLineNodes(),this.updateCalloutLabelNodes(r),this.updateSectorLabelNodes(),this.updateInnerLabelNodes(),this.updateZerosumRings(),this.animationState.transition("update")})}updateCalloutLineNodes(){var r;const{calloutLine:e}=this.properties,t=e.length,i=e.strokeWidth,n=null!=(r=e.colors)?r:this.properties.strokes,{offset:s}=this.properties.calloutLabel;this.calloutLabelSelection.selectByTag(1).forEach((o,a)=>{const c=o.datum,{calloutLabel:u,outerRadius:p}=c;if(u?.text&&!u.hidden&&0!==p){o.visible=!0,o.strokeWidth=i,o.stroke=n[a%n.length],o.fill=void 0;const g=c.midCos*p,m=c.midSin*p;let y=c.midCos*(p+t),b=c.midSin*(p+t);if((u.collisionTextAlign||0!==u.collisionOffsetY)&&null!=u.box){const E=u.box;let D=y,R=b;y<E.x?D=E.x:y>E.x+E.width&&(D=E.x+E.width),b<E.y?R=E.y:b>E.y+E.height&&(R=E.y+E.height);const O=D-y,L=R-b,k=Math.sqrt(Math.pow(O,2)+Math.pow(L,2)),U=k-s;U>0&&(y+=O*U/k,b+=L*U/k)}o.x1=g,o.y1=m,o.x2=y,o.y2=b}else o.visible=!1})}getLabelOverflow(r,e,t){const i=t.x-this.centerX,n=t.x+t.width-this.centerX;let c=1;e.x+1<i?c=(e.x+e.width-i)/e.width:e.x+e.width-1>n&&(c=(n-e.x)/e.width);const u=e.y+1<t.y-this.centerY||e.y+e.height-1>t.y+t.height-this.centerY;return{textLength:1===c?r.length:Math.floor(r.length*c)-1,hasVerticalOverflow:u,hasSurroundingSeriesOverflow:this.bboxIntersectsSurroundingSeries(e)}}bboxIntersectsSurroundingSeries(r,e=0,t=0){const{surroundingRadius:i}=this;if(null==i)return!1;const n=[{x:r.x+e,y:r.y+t},{x:r.x+r.width+e,y:r.y+t},{x:r.x+r.width+e,y:r.y+r.height+t},{x:r.x+e,y:r.y+r.height+t}],s=Yt(i,2);return n.some(o=>Yt(o.x,2)+Yt(o.y,2)>s)}computeCalloutLabelCollisionOffsets(){const{radiusScale:r}=this,{calloutLabel:e,calloutLine:t}=this.properties,{offset:i,minSpacing:n}=e,s=r.convert(0),a=this.nodeData,c=this.nodeData.filter(R=>!(R=>!R.calloutLabel||0===R.outerRadius)(R));if(c.forEach(R=>{const O=R.calloutLabel;null!=O&&(O.hidden=!1,O.collisionTextAlign=void 0,O.collisionOffsetY=0)}),c.length<=1)return;const u=c.filter(R=>R.midCos<0).sort((R,O)=>R.midSin-O.midSin),p=c.filter(R=>R.midCos>=0).sort((R,O)=>R.midSin-O.midSin),g=c.filter(R=>{var O;return R.midSin<0&&"center"===(null==(O=R.calloutLabel)?void 0:O.textAlign)}).sort((R,O)=>R.midCos-O.midCos),m=c.filter(R=>{var O;return R.midSin>=0&&"center"===(null==(O=R.calloutLabel)?void 0:O.textAlign)}).sort((R,O)=>R.midCos-O.midCos),y=new Ri,b=R=>{var O;const L=R.calloutLabel;if(null==L)return new Bt(0,0,0,0);const k=R.outerRadius+t.length+i,U=R.midCos*k,j=R.midSin*k+L.collisionOffsetY;return y.text=L.text,y.x=U,y.y=j,y.setFont(this.properties.calloutLabel),y.setAlign({textAlign:null!=(O=L.collisionTextAlign)?O:L.textAlign,textBaseline:L.textBaseline}),y.computeBBox()},_=(R,O,L)=>{const k=b(R).grow(n/2),U=b(O).grow(n/2);k.x<U.x+U.width&&k.x+k.width>U.x&&("to-top"===L?k.y<U.y+U.height:k.y+k.height>U.y)&&(O.calloutLabel.collisionOffsetY="to-top"===L?k.y-U.y-U.height:k.y+k.height-U.y)},E=R=>{const O=R.slice().sort((k,U)=>Math.abs(k.midSin)-Math.abs(U.midSin))[0],L=R.indexOf(O);for(let k=L-1;k>=0;k--)_(R[k+1],R[k],"to-top");for(let k=L+1;k<R.length;k++)_(R[k-1],R[k],"to-bottom")},D=R=>{const O=c.some(J=>0!==J.calloutLabel.collisionOffsetY),L=R.map(J=>b(J)),k=L.map(J=>J.clone().grow(n/2));let U=!1;for(let J=0;J<k.length&&!U;J++){const me=k[J];for(let ye=J+1;ye<R.length;ye++)if(me.collidesBBox(k[ye])){U=!0;break}}const j=a.map(J=>{const{startAngle:me,endAngle:ye,outerRadius:Ae}=J;return{startAngle:me,endAngle:ye,innerRadius:s,outerRadius:Ae}}),q=L.some(J=>j.some(me=>bB(J,me)));!U&&!O&&!q||R.filter(J=>"center"===J.calloutLabel.textAlign).forEach(J=>{J.calloutLabel.collisionTextAlign=J.midCos<0?"right":J.midCos>0?"left":"center"})};E(u),E(p),D(g),D(m)}updateCalloutLabelNodes(r){const{radiusScale:e}=this,{calloutLabel:t,calloutLine:i}=this.properties,n=i.length,{offset:s,color:o}=t,a=new Ri;this.calloutLabelSelection.selectByTag(2).forEach(c=>{var u;const{datum:p}=c,g=p.calloutLabel,m=e.convert(p.radius),y=Math.max(0,m);if(!g?.text||0===y||g.hidden)return void(c.visible=!1);const b=y+n+s,_=p.midCos*b,E=p.midSin*b+g.collisionOffsetY,D={textAlign:null!=(u=g.collisionTextAlign)?u:g.textAlign,textBaseline:g.textBaseline};a.text=g.text,a.x=_,a.y=E,a.setFont(this.properties.calloutLabel),a.setAlign(D);const R=a.computeBBox();let O=g.text,L=!0;if(t.avoidCollisions){const{textLength:k,hasVerticalOverflow:U}=this.getLabelOverflow(g.text,R,r);O=g.text.length===k?g.text:`${g.text.substring(0,k)}\u2026`,L=!U}c.text=O,c.x=_,c.y=E,c.setFont(this.properties.calloutLabel),c.setAlign(D),c.fill=o,c.visible=L})}computeLabelsBBox(r,e){return Be(this,null,function*(){const{calloutLabel:t,calloutLine:i}=this.properties,n=i.length,{offset:s,maxCollisionOffset:o,minSpacing:a}=t;if(!t.avoidCollisions)return null;yield this.maybeRefreshNodeData(),this.updateRadiusScale(!1),this.computeCalloutLabelCollisionOffsets();const c=[],u=new Ri;let p;const{title:g}=this.properties;if(g?.text&&g.enabled){const m=this.getTitleTranslationY();isFinite(m)&&(u.text=g.text,u.x=0,u.y=m,u.setFont(g),u.setAlign({textBaseline:"bottom",textAlign:"center"}),p=u.computeBBox(),c.push(p))}return this.nodeData.forEach(m=>{var y;const b=m.calloutLabel;if(!b||0===m.outerRadius)return null;const _=m.outerRadius+n+s,E=m.midCos*_,D=m.midSin*_+b.collisionOffsetY;u.text=b.text,u.x=E,u.y=D,u.setFont(this.properties.calloutLabel),u.setAlign({textAlign:null!=(y=b.collisionTextAlign)?y:b.textAlign,textBaseline:b.textBaseline});const R=u.computeBBox();if(b.box=R,Math.abs(b.collisionOffsetY)>o)b.hidden=!0;else{if(p){const O=e.y-this.centerY,L=new Bt(p.x-a,O,p.width+2*a,p.y+p.height+a-O);if(R.collidesBBox(L))return void(b.hidden=!0)}if(r.hideWhenNecessary){const{textLength:O,hasVerticalOverflow:L,hasSurroundingSeriesOverflow:k}=this.getLabelOverflow(b.text,R,e),U=b.text.length>2&&O<2;if(L||U||k)return void(b.hidden=!0)}b.hidden=!1,c.push(R)}}),0===c.length?null:Bt.merge(c)})}updateSectorLabelNodes(){const{radiusScale:r}=this,e=r.convert(0),{fontSize:t,fontStyle:i,fontWeight:n,fontFamily:s,positionOffset:o,positionRatio:a,color:c}=this.properties.sectorLabel,u=e>0,p=1===this.seriesItemEnabled.filter(Boolean).length;this.sectorLabelSelection.each((g,m)=>{const{sectorLabel:y,outerRadius:b}=m;let _=!1;if(y&&0!==b){const E=e*(1-a)+b*a+o;g.fill=c,g.fontStyle=i,g.fontWeight=n,g.fontSize=t,g.fontFamily=s,g.text=y.text,!u&&p?(g.x=0,g.y=0):(g.x=m.midCos*E,g.y=m.midSin*E),g.textAlign="center",g.textBaseline="middle";const R=g.computeBBox(),O=[[R.x,R.y],[R.x+R.width,R.y],[R.x+R.width,R.y+R.height],[R.x,R.y+R.height]],{startAngle:L,endAngle:k}=m,U={startAngle:L,endAngle:k,innerRadius:e,outerRadius:b};O.every(([j,q])=>BN(j,q,U))&&(_=!0)}g.visible=_})}updateInnerLabelNodes(){const r=[],e=[];this.innerLabelsSelection.each((p,g)=>{const{fontStyle:m,fontWeight:y,fontSize:b,fontFamily:_,color:E,margin:D=2}=g;p.fontStyle=m,p.fontWeight=y,p.fontSize=b,p.fontFamily=_,p.text=g.text,p.x=0,p.y=0,p.fill=E,p.textAlign="center",p.textBaseline="alphabetic",r.push(p.computeBBox()),e.push(D)});const t=p=>0===p?0:e[p],i=p=>p===e.length-1?0:e[p],n=r.reduce((p,g,m)=>p+g.height+t(m)+i(m),0),s=Math.max(...r.map(p=>p.width)),o=this.getInnerRadius(),c=Math.sqrt(Math.pow(s/2,2)+Math.pow(n/2,2))<=(o>0?o:this.getOuterRadius()),u=[];for(let p=0,g=-n/2;p<r.length;p++){const y=r[p].height+g+t(p);u.push(y),g=y+i(p)}this.innerLabelsSelection.each((p,g,m)=>{p.y=u[m],p.visible=c})}updateZerosumRings(){this.zerosumOuterRing.size=2*this.getOuterRadius(),this.zerosumInnerRing.size=2*this.getInnerRadius()}getDatumLegendName(r){const{angleKey:e,calloutLabelKey:t,sectorLabelKey:i,legendItemKey:n}=this.properties,{sectorLabel:s,calloutLabel:o,legendItem:a}=r;return n&&void 0!==a?a.text:t&&t!==e&&void 0!==o?.text?o.text:i&&i!==e&&void 0!==s?.text?s.text:void 0}getTooltipHtml(r){var e;if(!this.properties.isValid())return"";const{datum:t,angleValue:i,sectorFormat:{fill:n}}=r,s=un(null==(e=this.properties.title)?void 0:e.text),o=Ei(i)?oM(i):String(i),a=this.getDatumLegendName(r);return this.properties.tooltip.toTooltipHtml({title:s??a,content:s&&a?`${a}: ${o}`:o,backgroundColor:n},{datum:t,title:s,color:n,seriesId:this.id,angleKey:this.properties.angleKey,angleName:this.properties.angleName,radiusKey:this.properties.radiusKey,radiusName:this.properties.radiusName,calloutLabelKey:this.properties.calloutLabelKey,calloutLabelName:this.properties.calloutLabelName,sectorLabelKey:this.properties.sectorLabelKey,sectorLabelName:this.properties.sectorLabelName})}getLegendData(r){var e,t,i,n,s;const{processedData:o,dataModel:a}=this;if(!a||!o?.data.length||"category"!==r)return[];const{angleKey:c,calloutLabelKey:u,sectorLabelKey:p,legendItemKey:g}=this.properties;if(!(g||u&&u!==c||p&&p!==c))return[];const{calloutLabelIdx:m,sectorLabelIdx:y,legendItemIdx:b}=this.getProcessedDataIndexes(a),_=(null==(e=this.properties.title)?void 0:e.showInLegend)&&this.properties.title.text,E=[];for(let D=0;D<o.data.length;D++){const{datum:R,values:O}=o.data[D],L=[];_&&L.push(_);const k=this.getLabels(R,2*Math.PI,2*Math.PI,!1,O[m],O[y],O[b]);if(g&&void 0!==k.legendItem?L.push(k.legendItem.text):u&&u!==c&&void 0!==(null==(t=k.calloutLabel)?void 0:t.text)?L.push(null==(i=k.calloutLabel)?void 0:i.text):p&&p!==c&&void 0!==(null==(n=k.sectorLabel)?void 0:n.text)&&L.push(null==(s=k.sectorLabel)?void 0:s.text),0===L.length)continue;const U=this.getSectorFormat(R,D,!1);E.push({legendType:"category",id:this.id,itemId:D,seriesId:this.id,enabled:this.seriesItemEnabled[D],label:{text:L.join(" - ")},marker:{fill:U.fill,stroke:U.stroke,fillOpacity:this.properties.fillOpacity,strokeOpacity:this.properties.strokeOpacity,strokeWidth:this.properties.strokeWidth},legendItemName:null!=g?R[g]:void 0})}return E}onLegendItemClick(r){const{enabled:e,itemId:t,series:i,legendItemName:n}=r;i.id===this.id?this.toggleSeriesItem(t,e):null!=n&&this.toggleOtherSeriesItems(n,e)}toggleSeriesItem(r,e){this.seriesItemEnabled[r]=e,this.nodeDataRefresh=!0}toggleOtherSeriesItems(r,e){var t;if(!this.properties.legendItemKey||!this.dataModel)return;const i=this.dataModel.resolveProcessedDataIndexById(this,"legendItemValue").index;null==(t=this.processedData)||t.data.forEach(({values:n},s)=>{n[i]===r&&this.toggleSeriesItem(s,e)})}animateEmptyUpdateReady(r){const{animationManager:e}=this.ctx,t=V_(!0,this.properties.rotation,this.radiusScale,this.previousRadiusScale);cn(this.id,"nodes",e,[this.itemSelection,this.highlightSelection],t.nodes),cn(this.id,"innerCircle",e,[this.innerCircleSelection],t.innerCircle),Ni(this,"callout",e,[this.calloutLabelSelection]),Ni(this,"sector",e,[this.sectorLabelSelection]),Ni(this,"inner",e,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateWaitingUpdateReady(){var r,e,t,i,n,s;const{itemSelection:o,highlightSelection:a,processedData:c,radiusScale:u,previousRadiusScale:p}=this,{animationManager:g}=this.ctx,m=null==(r=c?.reduced)?void 0:r.diff;this.ctx.animationManager.stopByAnimationGroupId(this.id);const y=0===(null!=(e=m?.moved.length)?e:0)&&m?.addedIndices.every(D=>!m.removedIndices.includes(D)),b=(null!=(t=c?.defs.keys.length)?t:0)>0,_=null==(s=null==(n=null==(i=c?.reduced)?void 0:i.animationValidation)?void 0:n.uniqueKeys)||s;(!y||!b||!_)&&this.ctx.animationManager.skipCurrentBatch();const E=V_(!1,this.properties.rotation,u,p);cn(this.id,"nodes",g,[o,a],E.nodes,(D,R)=>this.getDatumId(R),m),cn(this.id,"innerCircle",g,[this.innerCircleSelection],E.innerCircle),Ni(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),Ni(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),Ni(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}animateClearingUpdateEmpty(){const{itemSelection:r,highlightSelection:e,radiusScale:t,previousRadiusScale:i}=this,{animationManager:n}=this.ctx,s=V_(!1,this.properties.rotation,t,i);cn(this.id,"nodes",n,[r,e],s.nodes),cn(this.id,"innerCircle",n,[this.innerCircleSelection],s.innerCircle),ty(this,"callout",this.ctx.animationManager,[this.calloutLabelSelection]),ty(this,"sector",this.ctx.animationManager,[this.sectorLabelSelection]),ty(this,"inner",this.ctx.animationManager,[this.innerLabelsSelection]),this.previousRadiusScale.range=this.radiusScale.range}getDatumIdFromData(r){var e,t,i;const{calloutLabelKey:n,sectorLabelKey:s,legendItemKey:o}=this.properties;if(null!=(i=null==(t=null==(e=this.processedData)?void 0:e.reduced)?void 0:t.animationValidation)&&i.uniqueKeys){if(o)return r[o];if(n)return r[n];if(s)return r[s]}}getDatumId(r){var e;const{index:t}=r;return null!=(e=this.getDatumIdFromData(r.datum))?e:`${t}`}onDataChange(){this.processSeriesItemEnabled()}};VM.className="PieSeries",VM.type="pie";var Dz={type:"series",optionsKey:"series[]",packageType:"community",chartTypes:["polar"],identifier:"pie",instanceConstructor:VM,seriesDefaults:{},themeTemplate:EB,paletteFactory:DB};var KN=class mU extends RM{constructor(e,t){super(e,t),this._data={}}performLayout(){return Be(this,null,function*(){const e=yield yu(mU.prototype,this,"performLayout").call(this),{seriesArea:{padding:t},seriesRoot:i}=this,n=e.clone();return e.shrink(t.left,"left"),e.shrink(t.top,"top"),e.shrink(t.right,"right"),e.shrink(t.bottom,"bottom"),this.seriesRect=e,this.animationRect=e,this.hoverRect=e,i.translationX=Math.floor(e.x),i.translationY=Math.floor(e.y),yield Promise.all(this.series.map(s=>Be(this,null,function*(){yield s.update({seriesRect:e})}))),i.visible=this.series[0].visible,i.setClipRectInGroupCoordinateSpace(new Bt(e.x,e.y,e.width,e.height)),this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:n,paddedRect:e,visible:!0},axes:[]}),e})}};KN.className="HierarchyChart",KN.type="hierarchy";var Az=KN,H_=class extends $F{constructor(){super(...arguments),this.shape="polygon",this.innerRadiusRatio=0,this.defaultTickMinSpacing=20}computeLabelsBBox(r,e){return null}};I([H(as(["polygon","circle"],"a polar axis shape"))],H_.prototype,"shape",2),I([H(Fi)],H_.prototype,"innerRadiusRatio",2);var YN=class vU extends RM{constructor(e,t){super(e,t),this.padding=new qg(40),this.axisGroup.zIndex=5}performLayout(){return Be(this,null,function*(){const e=yield yu(vU.prototype,this,"performLayout").call(this),t=e.clone();return this.computeSeriesRect(e),yield this.computeCircle(e),this.axes.forEach(i=>i.update()),this.hoverRect=e,this.layoutService.dispatchLayoutComplete({type:"layout-complete",chart:{width:this.scene.width,height:this.scene.height},clipSeries:!1,series:{rect:t,paddedRect:e,visible:!0},axes:[]}),e})}updateAxes(e,t,i){var n,s;const o=this.axes.find(g=>"x"===g.direction),a=this.axes.find(g=>"y"===g.direction);if(!(o instanceof H_&&a instanceof H_))return;const c=o.scale,u=null==(n=c.ticks)?void 0:n.call(c).map(g=>c.convert(g)),p=a.innerRadiusRatio;o.innerRadiusRatio=p,null==(s=o.computeRange)||s.call(o),o.gridLength=i,a.gridAngles=u,a.gridRange=o.range,a.range=[i,i*p],[o,a].forEach(g=>{g.translation.x=e,g.translation.y=t,g.calculateLayout()})}computeSeriesRect(e){const{seriesArea:{padding:t}}=this;e.shrink(t.left,"left"),e.shrink(t.top,"top"),e.shrink(t.right,"right"),e.shrink(t.bottom,"bottom"),this.seriesRect=e,this.animationRect=e}computeCircle(e){return Be(this,null,function*(){const t=this.series.filter(p=>p instanceof LM),i=this.axes.filter(p=>p instanceof H_),n=(p,g,m)=>{this.updateAxes(p,g,m),t.forEach(b=>{b.centerX=p,b.centerY=g,b.radius=m});const y=t.filter(b=>b instanceof VM||b instanceof kM);if(y.length>1){const b=y.map(_=>{const E=_.getInnerRadius();return{series:_,innerRadius:E}}).sort((_,E)=>_.innerRadius-E.innerRadius);b.at(-1).series.surroundingRadius=void 0;for(let _=0;_<b.length-1;_++)b[_].series.surroundingRadius=b[_+1].innerRadius}},s=e.x+e.width/2,o=e.y+e.height/2,a=Math.max(0,Math.min(e.width,e.height)/2);let c=a;n(s,o,c);const u=(...p)=>Be(this,[...p],function*({hideWhenNecessary:g=!1}={}){const m=[];for(const _ of[...i,...t]){const E=yield _.computeLabelsBBox({hideWhenNecessary:g},e);E&&m.push(E)}if(0===m.length)return void n(s,o,a);const y=Bt.merge(m),b=this.refineCircle(y,c,e);n(b.centerX,b.centerY,b.radius),b.radius!==c&&(c=b.radius)});return yield u(),yield u(),yield u(),yield u({hideWhenNecessary:!0}),yield u({hideWhenNecessary:!0}),{radius:c,centerX:s,centerY:o}})}refineCircle(e,t,i){const o=-t,a=t,c=t;let u=Math.max(0,-t-e.x),p=Math.max(0,o-e.y),g=Math.max(0,e.x+e.width-a),m=Math.max(0,e.y+e.height-c);u=g=Math.max(u,g),p=m=Math.max(p,m);let _=Math.min(i.width-u-g,i.height-p-m)/2;const R=Math.min(.5*i.width/2,.5*i.height/2);if(_<R){_=R;const k=u+g;if(2*_+(p+m)>i.height){const j=i.height-2*_;2*Math.min(p,m)>j?(p=j/2,m=j/2):p>m?p=j-m:m=j-p}if(2*_+k>i.width){const j=i.width-2*_;2*Math.min(u,g)>j?(u=j/2,g=j/2):u>g?u=j-g:g=j-u}}return{centerX:i.x+(i.width-(u+2*_+g))/2+u+_,centerY:i.y+(i.height-(p+2*_+m))/2+p+_,radius:_}}};YN.className="PolarChart",YN.type="polar";var Oz=YN,BM=Un.create(!0,"opts");function RB(r){if(mt(r))return"cartesian";if(Bi(r))return"polar";if(pi(r))return"hierarchy";throw new Error(`AG Chart - unknown type of chart for options with type: ${r.type}`)}var HM=class XT{static licenseCheck(e){var t,i,n,s;this.licenseChecked||(this.licenseManager=null==(i=(t=wu).licenseManager)?void 0:i.call(t,e),null==(n=this.licenseManager)||n.setLicenseKey(this.licenseKey,this.gridContext),null==(s=this.licenseManager)||s.validateLicense(),this.licenseChecked=!0)}static setLicenseKey(e){this.licenseKey=e}static setGridContext(e){this.gridContext=e}static getLicenseDetails(e){var t,i;return null==(i=(t=wu).licenseManager)?void 0:i.call(t,{}).getLicenseDetails(e)}static getInstance(e){return U_.getInstance(e)}static create(e){var t,i,n,s;this.licenseCheck(e);const o=U_.createOrUpdate(e);return null!=(t=this.licenseManager)&&t.isDisplayWatermark()&&(null==(s=(n=wu).injectWatermark)||s.call(n,null!=(i=e.document)?i:document,o.chart.element,this.licenseManager.getWatermarkMessage())),o}static update(e,t){if(!k_.isInstance(e))throw new Error(XT.INVALID_CHART_REF_MESSAGE);U_.createOrUpdate(t,e)}static updateDelta(e,t){if(!k_.isInstance(e))throw new Error(XT.INVALID_CHART_REF_MESSAGE);U_.updateUserDelta(e,t)}static download(e,t){if(!(e instanceof k_))throw new Error(XT.INVALID_CHART_REF_MESSAGE);U_.download(e,t)}static getImageDataURL(e,t){if(!(e instanceof k_))throw new Error(XT.INVALID_CHART_REF_MESSAGE);return U_.getImageDataURL(e,t)}};HM.INVALID_CHART_REF_MESSAGE="AG Charts - invalid chart reference passed",HM.licenseChecked=!1,HM.gridContext=!1;var ha=HM,AB=class Ju{static getInstance(e){const t=RM.getInstance(e);return null!=t?k_.chartInstances.get(t):void 0}static initialiseModules(){Ju.initialised||(function Tz(){Eo(KV),Eo(YV),Eo(az),Eo(uz),Eo(gz),Eo(yz),Eo(bz),Eo(wz),Eo(Dz),Eo(vz),new Map([[QC.type,QC],[Dp.type,Dp],[ey.type,ey],[Yg.type,Yg],[im.type,im]]).forEach((e,t)=>{HI(t,e)}),hk("category","legend",ca,void 0)}(),function Rz(){for(const r of ra){if("enterprise"===r.packageType&&!dt(r)&&tt.errorOnce("Unexpected enterprise module registered: "+r.identifier),"root"===r.type&&r.themeTemplate)for(const e of r.chartTypes)w(e,r.themeTemplate);if("series"===r.type){if(r.chartTypes.length>1)throw new Error(`AG Charts - Module definition error: ${r.identifier}`);bU(r)}if("series-option"===r.type&&r.themeTemplate)for(const e of r.seriesTypes)dk(e,r.themeTemplate);if("axis-option"===r.type&&r.themeTemplate)for(const e of r.axisTypes){const t=r.themeTemplate[e],i=Re(Re({},r.themeTemplate),t);for(const n of r.axisTypes)delete i[n];HO(e,i)}"axis"===r.type&&(HI(r.identifier,r.instanceConstructor),r.themeTemplate&&HO(r.identifier,r.themeTemplate)),"legend"===r.type&&hk(r.identifier,r.optionsKey,r.instanceConstructor,r.themeTemplate)}if(kg()){const r=function wt(){return V.filter(({useCount:r})=>null==r||0===r)}();r.length>0&&tt.errorOnce("Enterprise modules expected but not registered: ",r)}}(),Ju.initialised=!0)}static createOrUpdate(e,t){Ju.initialiseModules(),BM(">>> AgChartV2.createOrUpdate() user options",e);const n=e,{overrideDevicePixelRatio:s,document:o,window:a}=n,c=rs(n,["overrideDevicePixelRatio","document","window"]),u=new Fk(c,{overrideDevicePixelRatio:s,document:o,window:a});let p=t?.chart;return(null==p||RB(c)!==RB(p.processedOptions))&&(p=Ju.createChartInstance(u,p)),null==t?t=new k_(p):t.chart=p,BM.check()&&typeof window<"u"&&(null!=window.agChartInstances||(window.agChartInstances={}),window.agChartInstances[p.id]=p),p.queuedUserOptions.push(c),p.requestFactoryUpdate(g=>{g.applyOptions(u),g.queuedUserOptions.splice(0,g.queuedUserOptions.indexOf(c))}),t}static updateUserDelta(e,t){Eu(t=Cs(t,{shallow:["data"]}),o=>{if("object"==typeof o)for(const[a,c]of Object.entries(o))typeof c>"u"&&Object.assign(o,{[a]:Symbol("UNSET")})},{skip:["data"]});const{chart:i}=e,n=i.getOptions(),s=ri(t,n);BM(">>> AgChartV2.updateUserDelta() user delta",t),BM("AgChartV2.updateUserDelta() - base options",n),Ju.createOrUpdate(s,e)}static download(e,t){return Be(this,null,function*(){try{const i=yield Ju.prepareResizedChart(e,t);i.chart.scene.download(t?.fileName,t?.fileFormat),i.destroy()}catch(i){tt.errorOnce(i)}})}static getImageDataURL(e,t){return Be(this,null,function*(){const i=yield Ju.prepareResizedChart(e,t),{canvas:n}=i.chart.scene,s=n.getDataURL(t?.fileFormat);return i.destroy(),s})}static prepareResizedChart(e){return Be(this,arguments,function*(t,i={}){const{chart:n}=t,{width:s=n.width,height:o=n.height}=i,a=ri({container:document.createElement("div"),overrideDevicePixelRatio:1,autoSize:!1,width:s,height:o},kg()&&{animation:{enabled:!1}},n.userOptions),c=Ju.createOrUpdate(a);return c.chart.zoomManager.updateZoom(t.chart.zoomManager.getZoom()),t.chart.series.forEach((u,p)=>{!0!==u.visible&&(c.chart.series[p].visible=u.visible)}),t.chart.update(0,{forceNodeDataRefresh:!0}),yield c.chart.waitForUpdate(),c})}static createChartInstance(e,t){const i=t?.destroy({keepTransferableResources:!0});return new(Ju.getChartByOptions(e.processedOptions))(e,i)}static getChartByOptions(e){if(mt(e))return $j;if(pi(e))return Az;if(Bi(e))return Oz;throw new Error("AG Charts - couldn't apply configuration, check options are correctly structured and series types are specified")}};AB.initialised=!1;var U_=AB,Ue={};sa(Ue,{Arc:()=>ku,BBox:()=>Bt,BandScale:()=>xu,Caption:()=>gn,Circle:()=>Nu,ContinuousScale:()=>$i,Diamond:()=>wV,DropShadow:()=>ld,Group:()=>vt,HdpiCanvas:()=>Wn,Image:()=>W_,Label:()=>Ss,Line:()=>Us,LinearGradientFill:()=>UM,LinearScale:()=>Lu,Marker:()=>nc,Node:()=>b_,Path:()=>tl,Path2D:()=>O_,PointerEvents:()=>Gk,RadialColumnShape:()=>cd,Rect:()=>so,RedrawType:()=>Ug,Scene:()=>ZF,SceneChangeDetection:()=>at,ScenePathChangeDetection:()=>Jt,Sector:()=>sc,Selection:()=>dn,Shape:()=>Ql,Square:()=>M_,Text:()=>Ri,Tooltip:()=>cG,Triangle:()=>x_,easing:()=>_F,getFont:()=>$g,getMarker:()=>Xg,getRadialColumnWidth:()=>Pz,motion:()=>Iz,nearestSquared:()=>kk,nearestSquaredInContainer:()=>bW,toRadians:()=>io,toTooltipHtml:()=>ND});var ku=class extends tl{constructor(){super(),this.centerX=0,this.centerY=0,this.radius=10,this.startAngle=0,this.endAngle=2*Math.PI,this.counterClockwise=!1,this.type=0,this.restoreOwnStyles()}get fullPie(){return jC(os(this.startAngle),os(this.endAngle))}updatePath(){const r=this.path;r.clear(),r.arc(this.centerX,this.centerY,this.radius,this.startAngle,this.endAngle,this.counterClockwise),1===this.type?r.closePath():2===this.type&&!this.fullPie&&(r.lineTo(this.centerX,this.centerY),r.closePath())}computeBBox(){return new Bt(this.centerX-this.radius,this.centerY-this.radius,2*this.radius,2*this.radius)}isPointInPath(r,e){const t=this.transformPoint(r,e),i=this.computeBBox();return 0!==this.type&&i.containsPoint(t.x,t.y)&&this.path.isPointInPath(t.x,t.y)}};ku.className="Arc",ku.defaultStyles=Object.assign({},Ql.defaultStyles,{lineWidth:1,fillStyle:null}),I([Jt()],ku.prototype,"centerX",2),I([Jt()],ku.prototype,"centerY",2),I([Jt()],ku.prototype,"radius",2),I([Jt()],ku.prototype,"startAngle",2),I([Jt()],ku.prototype,"endAngle",2),I([Jt()],ku.prototype,"counterClockwise",2),I([Jt()],ku.prototype,"type",2);var UM=class extends Ql{constructor(){super(...arguments),this.direction="to-right",this.stops=void 0,this._mask=void 0}get mask(){return this._mask}set mask(r){null!=this._mask&&this.removeChild(this._mask),null!=r&&this.appendChild(r),this._mask=r}isPointInPath(r,e){var t,i;return null!=(i=null==(t=this.mask)?void 0:t.isPointInPath(r,e))&&i}computeBBox(){var r;return null==(r=this.mask)?void 0:r.computeBBox()}render(r){const{mask:e,stops:t}=this,{ctx:i,devicePixelRatio:n}=r,s=1/n,o=e?.computeTransformedBBox();if(null==e||null==t||null==o)return;e.dirtyPath&&(e.updatePath(),e.dirtyPath=!1),i.save(),i.beginPath(),e.path.draw(i),i.clip(),i.resetTransform();const a=Math.floor(o.x),c=Math.ceil(o.x+o.width),u=Math.floor(o.y),p=Math.ceil(o.y+o.height),g=new iy,[m,y]="to-right"===this.direction?[a,c]:[u,p];if(g.domain=t.map((b,_)=>m+(y-m)*_/(t.length-1)),g.range=t,g.update(),"to-right"===this.direction){const b=p-u;for(let _=a;_<=c;_+=s)i.fillStyle=g.convert(_),i.fillRect(_,u,s,b)}else{const b=c-a;for(let _=u;_<=p;_+=s)i.fillStyle=g.convert(_),i.fillRect(a,_,b,s)}i.restore()}};function OB(r,e,t){const i=Math.sqrt(Yt(r,2)+Yt(e,2)),s=Math.atan2(e,r)+t;return{x:Math.cos(s)*i,y:Math.sin(s)*i}}I([at({redraw:3})],UM.prototype,"direction",2),I([at({redraw:3})],UM.prototype,"stops",2),I([at({redraw:3})],UM.prototype,"_mask",2);var cd=class extends tl{constructor(){super(...arguments),this.borderPath=new O_,this.isBeveled=!0,this.columnWidth=0,this.startAngle=0,this.endAngle=0,this.outerRadius=0,this.innerRadius=0,this.axisInnerRadius=0,this.axisOuterRadius=0,this.isRadiusAxisReversed=!1}getRotation(){const{startAngle:r,endAngle:e}=this;return os(r+EF(r,e)/2+Math.PI/2)}updatePath(){const{isBeveled:r}=this;r?this.updateBeveledPath():this.updateRectangularPath(),this.checkPathDirty()}updateRectangularPath(){const{columnWidth:r,innerRadius:e,outerRadius:t,path:i}=this,n=-r/2,s=r/2,o=-t,a=-e,c=this.getRotation(),u=[[n,a],[n,o],[s,o],[s,a],[n,a]].map(([p,g])=>OB(p,g,c));i.clear({trackChanges:!0}),i.moveTo(u[0].x,u[0].y),i.lineTo(u[1].x,u[1].y),i.lineTo(u[2].x,u[2].y),i.lineTo(u[3].x,u[3].y),i.lineTo(u[0].x,u[0].y),i.closePath()}updateBeveledPath(){const{columnWidth:r,path:e,outerRadius:t,innerRadius:i,axisInnerRadius:n,axisOuterRadius:s,isRadiusAxisReversed:o}=this,a=jC(i,n),c=Math.asin(r/2/i),u=this.getRotation(),p=(q,J)=>OB(q,J,u),g=(q,J)=>Math.sqrt(Yt(q,2)+Yt(J,2)),m=(q,J)=>J>q?0:Math.sqrt(Yt(q,2)-Yt(J,2)),y=(q,J,me)=>me?q<J:q>J,b=a&&!isNaN(c)&&c<Math.PI/6;let _=-r/2,E=r/2;const D=-t,R=-i*(b?Math.cos(c):1),O=y(s,g(i,r/2),!o);if(O){const q=m(s,i);_=-q,E=q}e.clear({trackChanges:!0});const L=p(_,R);e.moveTo(L.x,L.y);const k=jC(i,t),U=y(s,g(t,r/2),!o);if(k&&b)e.arc(0,0,i,os(-c-Math.PI/2)+u,os(c-Math.PI/2)+u,!1);else if(U){const q=-m(s,r/2),J=m(s,t);if(!O){const me=p(_,q);e.lineTo(me.x,me.y)}if(e.arc(0,0,s,Math.atan2(q,_)+u,Math.atan2(D,-J)+u,!1),!jC(J,0)){const me=p(J,D);e.lineTo(me.x,me.y)}e.arc(0,0,s,Math.atan2(D,J)+u,Math.atan2(q,E)+u,!1)}else{const q=p(_,D),J=p(E,D);e.lineTo(q.x,q.y),e.lineTo(J.x,J.y)}const j=p(E,R);if(e.lineTo(j.x,j.y),b)e.arc(0,0,i,os(c-Math.PI/2)+u,os(-c-Math.PI/2)+u,!0);else{const q=p(_,R);e.lineTo(q.x,q.y)}e.closePath()}};function Pz(r,e,t,i,n){const s=EF(r,e),o=s*(1-i)/2;if(r+=o,e-=o,s<.001)return 2*t*n;if(s>=2*Math.PI){const y=r+s/2;r=y-Math.PI,e=y+Math.PI}const a=t*Math.cos(r),c=t*Math.sin(r),u=t*Math.cos(e),p=t*Math.sin(e),g=Math.floor(Math.sqrt(Yt(a-u,2)+Yt(c-p,2)));return Math.max(1,Math.min(2*t*n,g))}cd.className="RadialColumnShape",I([Jt()],cd.prototype,"isBeveled",2),I([Jt()],cd.prototype,"columnWidth",2),I([Jt()],cd.prototype,"startAngle",2),I([Jt()],cd.prototype,"endAngle",2),I([Jt()],cd.prototype,"outerRadius",2),I([Jt()],cd.prototype,"innerRadius",2),I([Jt()],cd.prototype,"axisInnerRadius",2),I([Jt()],cd.prototype,"axisOuterRadius",2),I([Jt()],cd.prototype,"isRadiusAxisReversed",2);var W_=class extends b_{constructor(r){super(),this.x=0,this.y=0,this.width=0,this.height=0,this.opacity=1,this.sourceImage=r}render(r){const{ctx:e,forceRender:t,stats:i}=r;if(0===this.dirty&&!t)return void(i&&i.nodesSkipped++);this.computeTransformMatrix(),this.matrix.toContext(e);const n=this.sourceImage;e.globalAlpha=this.opacity,e.drawImage(n,0,0,n.width,n.height,this.x,this.y,this.width,this.height),super.render(r)}};I([at({redraw:3})],W_.prototype,"x",2),I([at({redraw:3})],W_.prototype,"y",2),I([at({redraw:3})],W_.prototype,"width",2),I([at({redraw:3})],W_.prototype,"height",2),I([at({redraw:3})],W_.prototype,"opacity",2);var Iz=Re(Re({},Nk),TG),dd={};sa(dd,{CARTESIAN_AXIS_TYPE:()=>vk,ChartTheme:()=>Cp,DEFAULT_AXIS_GRID_COLOUR:()=>YO,DEFAULT_AXIS_LINE_COLOUR:()=>qO,DEFAULT_BACKGROUND_COLOUR:()=>yD,DEFAULT_CROSS_LINES_COLOUR:()=>CD,DEFAULT_DIVERGING_SERIES_COLOUR_RANGE:()=>ed,DEFAULT_FONT_FAMILY:()=>Vs,DEFAULT_HIERARCHY_FILLS:()=>eF,DEFAULT_HIERARCHY_STROKES:()=>tF,DEFAULT_INSIDE_SERIES_LABEL_COLOUR:()=>v_,DEFAULT_INVERTED_LABEL_COLOUR:()=>Mk,DEFAULT_LABEL_COLOUR:()=>Pi,DEFAULT_MUTED_LABEL_COLOUR:()=>C_,DEFAULT_POLAR_SERIES_STROKE:()=>QI,DEFAULT_SHADOW_COLOUR:()=>y_,DEFAULT_WATERFALL_SERIES_CONNECTOR_LINE_STROKE:()=>Qc,DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS:()=>Zc,DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS:()=>Xc,DEFAULT_WATERFALL_SERIES_TOTAL_COLOURS:()=>Jc,EXTENDS_AXES_DEFAULTS:()=>Ek,EXTENDS_AXES_GRID_LINE_DEFAULTS:()=>Ak,EXTENDS_AXES_LABEL_DEFAULTS:()=>Dk,EXTENDS_AXES_LINE_DEFAULTS:()=>Tk,EXTENDS_AXES_TICK_DEFAULTS:()=>Rk,EXTENDS_CARTESIAN_MARKER_DEFAULTS:()=>m_,EXTENDS_CHART_DEFAULTS:()=>Sk,EXTENDS_LEGEND_DEFAULTS:()=>bk,EXTENDS_LEGEND_ITEM_DEFAULTS:()=>_k,EXTENDS_LEGEND_ITEM_MARKER_DEFAULTS:()=>wk,EXTENDS_SERIES_DEFAULTS:()=>vp,FONT_SIZE:()=>fk,FONT_WEIGHT:()=>gk,IS_DARK_THEME:()=>FC,OVERRIDE_SERIES_LABEL_DEFAULTS:()=>Ok,POLAR_AXIS_SHAPE:()=>yk,POLAR_AXIS_TYPE:()=>Ck,POSITION:()=>mk,getChartTheme:()=>lF,themes:()=>Fz});var Fz=Object.entries(xk).reduce((r,[e,t])=>(r[e]=t(),r),{});sa({},{BandScale:()=>xu,ColorScale:()=>iy,ContinuousScale:()=>$i,Invalidating:()=>la,LinearScale:()=>Lu,TimeScale:()=>WF});var Gu={};sa(Gu,{Color:()=>Au,Logger:()=>tt,Padding:()=>qg,angleBetween:()=>EF,checkDatum:()=>kD,clamp:()=>Ti,clampArray:()=>rM,countFractionDigits:()=>mF,createId:()=>Ru,deepClone:()=>Cs,extent:()=>Tu,findMinMax:()=>yp,findRangeExtent:()=>S_,isContinuous:()=>LF,isDate:()=>xC,isEqual:()=>jC,isNegative:()=>TD,isNumber:()=>Ei,isNumberEqual:()=>jC,isString:()=>Ja,isStringObject:()=>NF,jsonApply:()=>Hg,jsonDiff:()=>Ar,jsonWalk:()=>Eu,mod:()=>aM,normalisedExtent:()=>Pk,normalisedExtentWithMetadata:()=>ED,normalizeAngle180:()=>OD,normalizeAngle360:()=>os,normalizeAngle360Inclusive:()=>MW,range:()=>BD,resetIds:()=>Lk,round:()=>gF,sanitizeHtml:()=>un,shallowClone:()=>KO,tickFormat:()=>IG,tickStep:()=>R_,ticks:()=>CM,toDegrees:()=>xW,toFixed:()=>oM,toRadians:()=>io,transformIntegratedCategoryValue:()=>E_,zipObject:()=>pF});var qN={};function Lz(...r){for(const e of r)if(e instanceof so){const{x:t,y:i,width:n,height:s}=e;e.setProperties({x:i,y:t,width:s,height:n})}else if(e instanceof Us){const{x1:t,y1:i,x2:n,y2:s}=e;e.setProperties({x1:i,y1:t,x2:s,y2:n})}}sa(qN,{ADD_PHASE:()=>wF,AGG_VALUES_EXTENT:()=>xj,AND:()=>Pu,ANIMATION_PHASE_ORDER:()=>zC,ANIMATION_PHASE_TIMINGS:()=>$k,ARRAY:()=>MD,ARRAY_OF:()=>Sp,AbstractBarSeries:()=>dB,AbstractBarSeriesProperties:()=>IN,ActionOnSet:()=>Bs,Animation:()=>Yk,AnimationManager:()=>hV,AreaSeriesTag:()=>lB,Axis:()=>$F,AxisLabel:()=>bs,AxisTick:()=>nd,BOOLEAN:()=>Ot,BOOLEAN_ARRAY:()=>PW,Background:()=>ZD,BackgroundModule:()=>KV,BaseModuleInstance:()=>dD,BaseProperties:()=>Di,COLOR_STRING:()=>Si,COLOR_STRING_ARRAY:()=>Jl,CartesianAxis:()=>UD,CartesianSeries:()=>tm,CartesianSeriesNodeClickEvent:()=>yN,CartesianSeriesProperties:()=>em,CategoryAxis:()=>Dp,ChartAxisDirection:()=>nG,ChartEventManager:()=>pV,ChartOptions:()=>Fk,ChartUpdateType:()=>WD,ContextMenuRegistry:()=>fV,CursorManager:()=>gV,DATE:()=>DF,DATE_ARRAY:()=>IW,DATE_OR_DATETIME_MS:()=>TF,DEGREE:()=>Wg,DIRECTION:()=>eG,DataController:()=>oV,DataModel:()=>rV,DataService:()=>bM,Default:()=>Ep,Deprecated:()=>WC,DeprecatedAndRenamedTo:()=>gW,FONT_STYLE:()=>jg,FONT_WEIGHT:()=>zg,FUNCTION:()=>Zl,GREATER_THAN:()=>PD,GestureDetector:()=>vV,GroupedCategoryAxis:()=>Yg,HierarchyNode:()=>WM,HierarchySeries:()=>kz,HierarchySeriesProperties:()=>rm,HighlightManager:()=>tN,HighlightStyle:()=>qD,INITIAL_LOAD:()=>Uk,INTERACTION_RANGE:()=>OF,INTERACTION_TYPES:()=>lV,InteractionManager:()=>uV,InteractionState:()=>_M,LABEL_PHASE:()=>zk,LESS_THAN:()=>xD,LINE_CAP:()=>Jk,LINE_DASH:()=>bp,LINE_JOIN:()=>FW,Layers:()=>gG,LayoutService:()=>SV,MATCHING_CROSSLINE_TYPE:()=>kF,MAX_SPACING:()=>MF,MIN_SPACING:()=>iG,Motion:()=>_F,NAN:()=>dM,NODE_UPDATE_PHASES:()=>qk,NODE_UPDATE_STATE_TO_PHASE_MAPPING:()=>Do,NUMBER:()=>Xi,NUMBER_ARRAY:()=>hM,NUMBER_OR_NAN:()=>__,Navigator:()=>ad,NavigatorModule:()=>YV,OBJECT:()=>Ct,OBJECT_ARRAY:()=>RF,OR:()=>$C,OVERFLOW_STRATEGY:()=>LW,ObserveChanges:()=>w_,PLACEMENT:()=>tG,POSITION:()=>AF,POSITIVE_NUMBER:()=>qe,PolarAxis:()=>H_,PolarSeries:()=>LM,PropertiesArray:()=>mp,ProxyOnWrite:()=>KW,ProxyProperty:()=>Kg,ProxyPropertyOnWrite:()=>Qi,QUICK_TRANSITION:()=>.2,RATIO:()=>Fi,REGISTERED_MODULES:()=>ra,REMOVE_PHASE:()=>Wk,RepeatType:()=>Kk,SMALLEST_KEY_INTERVAL:()=>pN,SORT_DOMAIN_GROUPS:()=>FV,STRING:()=>et,STRING_ARRAY:()=>Zk,Series:()=>L_,SeriesGroupingChangedEvent:()=>vN,SeriesItemHighlightStyle:()=>Op,SeriesMarker:()=>da,SeriesNodeClickEvent:()=>YD,SeriesNodePickMode:()=>LV,SeriesProperties:()=>rd,SeriesTooltip:()=>ua,StateMachine:()=>GD,TEXT_ALIGN:()=>Qk,TEXT_WRAP:()=>pM,Tags:()=>$G,TooltipManager:()=>nN,UNION:()=>as,UPDATE_PHASE:()=>jk,UpdateService:()=>BV,VERTICAL_ALIGN:()=>NW,Validate:()=>H,ZoomManager:()=>yV,__FORCE_MODULE_DETECTION:()=>Gz,accumulateGroup:()=>NV,accumulatedValue:()=>PV,accumulativeValueProperty:()=>mN,adjustLabelPlacement:()=>vB,animationValidation:()=>N_,area:()=>hN,arraysEqual:()=>DD,assignJsonApplyConstructedArray:()=>uG,average:()=>Mj,backfillPathPointData:()=>RN,buildResetPathFn:()=>MN,checkCrisp:()=>fB,circularSliceArray:()=>uF,clamp:()=>Ti,clampArray:()=>rM,collapsedStartingBarPosition:()=>aT,count:()=>Oj,countFractionDigits:()=>mF,createDatumId:()=>Jg,createDeprecationWarning:()=>sM,deconstructSelectionsOrNodes:()=>cM,deepClone:()=>Cs,deepMerge:()=>ek,determinePathStatus:()=>oB,diff:()=>JC,enterpriseModule:()=>wu,extent:()=>Tu,extractDecoratedProperties:()=>WO,findMinMax:()=>yp,findRangeExtent:()=>S_,fixNumericExtent:()=>Ro,fromToMotion:()=>cn,getMissCount:()=>QF,getPath:()=>YI,getRectConfig:()=>pB,groupAccumulativeValueProperty:()=>Qg,groupAverage:()=>xV,groupBy:()=>dF,groupCount:()=>uN,groupSum:()=>OV,hasRegisteredEnterpriseModules:()=>kg,injectStyle:()=>gM,invertShapeDirection:()=>Lz,isArray:()=>Dn,isBoolean:()=>f_,isDate:()=>g_,isDecoratedObject:()=>p_,isDefined:()=>jO,isEnumKey:()=>Q1,isEnumValue:()=>zO,isEqual:()=>jC,isFiniteNumber:()=>Ei,isFunction:()=>PC,isHtmlElement:()=>zI,isNegative:()=>TD,isNumber:()=>Xl,isObject:()=>ql,isObjectLike:()=>jI,isPlainObject:()=>oa,isProperties:()=>Rr,isRegExp:()=>WI,isString:()=>Ja,isSymbol:()=>$I,isValidDate:()=>xC,jsonApply:()=>Hg,jsonDiff:()=>Ar,jsonWalk:()=>Eu,keyProperty:()=>Mr,listDecoratedProperties:()=>Vg,mapValues:()=>KI,markerFadeInAnimation:()=>tT,markerPaletteFactory:()=>QD,markerScaleInAnimation:()=>wN,markerSwipeScaleInAnimation:()=>EN,mergeArrayDefaults:()=>$O,mergeDefaults:()=>ri,midpointStartingBarPosition:()=>lz,minMax:()=>TN,mod:()=>aM,normaliseGroupTo:()=>TM,normalisePropertyTo:()=>KD,normalisedExtent:()=>Pk,normalisedExtentWithMetadata:()=>ED,pairCategoryData:()=>oT,pairContinuousData:()=>rT,partialAssign:()=>d,pathFadeInAnimation:()=>sT,pathFadeOutAnimation:()=>ez,pathSwipeInAnimation:()=>ON,predicateWithMessage:()=>zi,prepareAreaPathAnimation:()=>cB,prepareAxisAnimationContext:()=>jF,prepareAxisAnimationFunctions:()=>HG,prepareBarAnimationFunctions:()=>lT,prepareLinePathAnimation:()=>aB,prepareLinePathAnimationFns:()=>xN,prepareMarkerAnimation:()=>DN,range:()=>MV,rangedValueProperty:()=>gN,registerModule:()=>Eo,renderPartialPath:()=>AN,resetAxisGroupFn:()=>UG,resetAxisLabelSelectionFn:()=>jG,resetAxisLineSelectionFn:()=>zG,resetAxisSelectionFn:()=>WG,resetBarSelectionsFn:()=>cT,resetIds:()=>Lk,resetLabelFn:()=>Mp,resetMarkerFn:()=>iT,resetMarkerPositionFn:()=>nT,resetMotion:()=>Hs,round:()=>gF,seriesLabelFadeInAnimation:()=>Ni,seriesLabelFadeOutAnimation:()=>ty,setPath:()=>l,shallowClone:()=>KO,singleSeriesPaletteFactory:()=>_N,staticFromToMotion:()=>Ou,stringify:()=>FD,sum:()=>Aj,toArray:()=>nM,toFixed:()=>oM,trailingAccumulatedValue:()=>IV,trailingAccumulatedValueProperty:()=>kj,trailingValue:()=>GV,trailingValueProperty:()=>Lj,unique:()=>cF,updateClipPath:()=>PM,updateLabelNode:()=>mB,updateRect:()=>hB,validateCrossLineValues:()=>mG,valueProperty:()=>Ki});var MB=class bx{constructor(e,t,i,n,s,o,a,c,u,p,g){this.series=e,this.index=t,this.datum=i,this.size=n,this.colorValue=s,this.fill=o,this.stroke=a,this.sumSize=c,this.depth=u,this.parent=p,this.children=g,this.midPoint={x:0,y:0}}contains(e){let t=e;for(;null!=t&&t.index>=this.index;){if(t===this)return!0;t=t.parent}return!1}walk(e,t=bx.Walk.PreOrder){t===bx.Walk.PreOrder&&e(this),this.children.forEach(i=>{i.walk(e,t)}),t===bx.Walk.PostOrder&&e(this)}*[Symbol.iterator](){yield this;for(const e of this.children)yield*wI(e)}};MB.Walk={PreOrder:0,PostOrder:1};var WM=MB,kz=class extends L_{constructor(r){super({moduleCtx:r,pickModes:[0],contentGroupVirtual:!1}),this.rootNode=new WM(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.colorDomain=[0,0],this.maxDepth=0,this.animationState=new GD("empty",{empty:{update:{target:"ready",action:e=>this.animateEmptyUpdateReady(e)},reset:"empty",skip:"ready"},ready:{updateData:"waiting",clear:"clearing",highlight:e=>this.animateReadyHighlight(e),resize:e=>this.animateReadyResize(e),reset:"empty",skip:"ready"},waiting:{update:{target:"ready",action:e=>this.animateWaitingUpdateReady(e)},reset:"empty",skip:"ready"},clearing:{update:{target:"empty",action:e=>this.animateClearingUpdateEmpty(e)},reset:"empty",skip:"ready"}},()=>this.checkProcessedDataAnimatable())}resetAnimation(r){"initial"===r?this.animationState.transition("reset"):"ready"===r&&this.animationState.transition("skip")}processData(){return Be(this,null,function*(){var r,e;const{childrenKey:t,sizeKey:i,colorKey:n,fills:s,strokes:o,colorRange:a}=this.properties;let c=0,p=0,g=1/0,m=-1/0;const y=new Array((null!=(e=null==(r=this.data)?void 0:r.length)?e:0)+1).fill(void 0),b=(O,L)=>{const k=(c+=1,c),U=null!=L.depth?L.depth+1:0,j=null!=t?O[t]:void 0,q=null==j||0===j.length;let J=null!=i?O[i]:void 0;J=Number.isFinite(J)?Math.max(J,0):q?1:0;const me=J;p=Math.max(p,U);const ye=null!=n?O[n]:void 0;return"number"==typeof ye&&(y[k]=ye,g=Math.min(g,ye),m=Math.max(m,ye)),_(new WM(this,k,O,J,ye,void 0,void 0,me,U,L,[]),j)},_=(O,L)=>(L?.forEach(k=>{const U=b(k,O);O.children.push(U),O.sumSize+=U.sumSize}),O),E=_(new WM(this,0,void 0,0,void 0,void 0,void 0,0,void 0,void 0,[]),this.data),D=[g,m];let R;null!=a&&Number.isFinite(g)&&Number.isFinite(m)&&(R=new iy,R.domain=D,R.range=a,R.update()),E.children.forEach((O,L)=>{O.walk(k=>{let U;const j=y[k.index];null!=j&&(U=R?.convert(j)),U??(U=s?.[L%s.length]),k.fill=U,k.stroke=null==R?o?.[L%o.length]:"rgba(0, 0, 0, 0.2)"})}),this.rootNode=E,this.maxDepth=p,this.colorDomain=D})}update(r){return Be(this,arguments,function*({seriesRect:e}){yield this.updateSelections(),yield this.updateNodes();const t=this.getAnimationData();this.checkResize(e)&&this.animationState.transition("resize",t),this.animationState.transition("update",t)})}resetAllAnimation(r){var e;const t=null==(e=this.animationResetFns)?void 0:e.datum;this.ctx.animationManager.stopByAnimationGroupId(this.id),null!=t&&Hs(r.datumSelections,t)}animateEmptyUpdateReady(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(r)}animateWaitingUpdateReady(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(r)}animateReadyHighlight(r){var e;const t=null==(e=this.animationResetFns)?void 0:e.datum;null!=t&&Hs([r],t)}animateReadyResize(r){this.resetAllAnimation(r)}animateClearingUpdateEmpty(r){this.ctx.animationManager.skipCurrentBatch(),this.resetAllAnimation(r)}animationTransitionClear(){this.animationState.transition("clear",this.getAnimationData())}getAnimationData(){return{datumSelections:[this.groupSelection]}}isProcessedDataAnimatable(){return!0}checkProcessedDataAnimatable(){this.isProcessedDataAnimatable()||this.ctx.animationManager.skipCurrentBatch()}getLabelData(){return[]}getSeriesDomain(){return[NaN,NaN]}getLegendData(r){const{colorKey:e,colorName:t,colorRange:i,visible:n}=this.properties;return"gradient"===r&&null!=e&&null!=i?[{legendType:"gradient",enabled:n,seriesId:this.id,colorName:t,colorRange:i,colorDomain:this.colorDomain}]:[]}getDatumIdFromData(r){return`${r.index}`}getDatumId(r){return this.getDatumIdFromData(r)}},rm=class extends rd{constructor(){super(...arguments),this.childrenKey="children",this.fills=Object.values(Du),this.strokes=Object.values(IC)}};I([H(et)],rm.prototype,"childrenKey",2),I([H(et,{optional:!0})],rm.prototype,"sizeKey",2),I([H(et,{optional:!0})],rm.prototype,"colorKey",2),I([H(et,{optional:!0})],rm.prototype,"colorName",2),I([H(Jl)],rm.prototype,"fills",2),I([H(Jl)],rm.prototype,"strokes",2),I([H(Jl,{optional:!0})],rm.prototype,"colorRange",2);var Gz=0;const Vz=["area","bar","column","histogram","line","pie","donut","scatter","bubble","radial-column","radial-bar","radar-line","radar-area","nightingale","range-bar","range-area","box-plot","treemap","sunburst","heatmap","waterfall"];function xB(r){switch(r){case"rangeBar":case"rangeArea":case"waterfall":case"boxPlot":case"radarLine":case"radarArea":case"nightingale":case"radialColumn":case"radialBar":case"sunburst":case"treemap":case"heatmap":return!0;default:return!1}}const Bz=new Set(["bar","groupedBar","stackedBar","normalizedBar"]);function xp(r){return Bz.has(r)}const Hz=new Set(["stackedColumn","normalizedColumn","stackedBar","normalizedBar"]);function Uz(r){return Hz.has(r)}function PB(r){switch(r){case"radialColumn":case"radialBar":case"radarLine":case"radarArea":case"nightingale":return!0;default:return!1}}function om(r){switch(r){case"treemap":case"sunburst":return!0;default:return!1}}function dT(r){return"doughnut"===r?"donut":r}function ud(r){switch(r){case"bar":case"groupedBar":case"stackedBar":case"normalizedBar":case"column":case"groupedColumn":case"stackedColumn":case"normalizedColumn":return"bar";case"line":return"line";case"area":case"stackedArea":case"normalizedArea":return"area";case"bubble":return"bubble";case"scatter":return"scatter";case"histogram":return"histogram";case"radialColumn":return"radial-column";case"radialBar":return"radial-bar";case"radarLine":return"radar-line";case"radarArea":return"radar-area";case"nightingale":return"nightingale";case"rangeBar":return"range-bar";case"rangeArea":return"range-area";case"boxPlot":return"box-plot";case"treemap":return"treemap";case"sunburst":return"sunburst";case"pie":return"pie";case"donut":case"doughnut":return"donut";case"heatmap":return"heatmap";case"waterfall":return"waterfall";default:return"cartesian"}}function XN(r){switch(r){case"pie":case"donut":return!0;default:return!1}}const IB=["number","category","grouped-category","log","time"];function uT(r,e){return!1!==e.clone&&e.isMergeableObject(r)?am(function $z(r){return Array.isArray(r)?[]:{}}(r),r,e):r}function Kz(r,e,t){return r.concat(e).map(function(i){return uT(i,t)})}function FB(r){return Object.keys(r).concat(function qz(r){return Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(r).filter(function(e){return r.propertyIsEnumerable(e)}):[]}(r))}function NB(r,e){try{return e in r}catch{return!1}}function Jz(r){return function Qz(r){return!!r&&"object"==typeof r}(r)&&!function e$(r){const e=Object.prototype.toString.call(r);return"[object RegExp]"===e||"[object Date]"===e}(r)}function am(r,e,t){(t=t||{}).arrayMerge=t.arrayMerge||Kz,t.isMergeableObject=t.isMergeableObject||Jz,t.cloneUnlessOtherwiseSpecified=uT;const i=Array.isArray(e);return i===Array.isArray(r)?i?t.arrayMerge(r,e,t):function Zz(r={},e={},t){const i={};return t.isMergeableObject(r)&&FB(r).forEach(function(n){i[n]=uT(r[n],t)}),FB(e).forEach(function(n){(function Xz(r,e){return NB(r,e)&&!(Object.hasOwnProperty.call(r,e)&&Object.propertyIsEnumerable.call(r,e))})(r,n)||(i[n]=NB(r,n)&&t.isMergeableObject(e[n])?function Yz(r,e){if(!e.customMerge)return am;const t=e.customMerge(r);return"function"==typeof t?t:am}(n,t)(r[n],e[n],t):uT(e[n],t))}),i}(r,e,t):uT(e,t)}function j_(r,e,t){if(null==r)return t;const i=e.split(".");let n=r;for(;i.length>1;)if(n=n[i.shift()],null==n)return t;return n[i[0]]??t}function ZN(r){return z.includes(Object.keys(dd.themes),r)}const o$=IB.reduce((r,e)=>Object.assign(Object.assign({},r),{[e]:{title:{_enabledFromTheme:!0}}}),{});function a$(r,e){const t=r.getExtraPaddingDirections();return{common:{animation:{duration:500},axes:o$,padding:{top:!e&&t.includes("top")?40:20,right:t.includes("right")?30:20,bottom:t.includes("bottom")?40:20,left:t.includes("left")?30:20}},pie:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}},donut:{series:{title:{_enabledFromTheme:!0},calloutLabel:{_enabledFromTheme:!0},sectorLabel:{enabled:!1,_enabledFromTheme:!0}}}}}function LB(r,e){const{customChartThemes:t}=r,i=t&&t[e];return i||console.warn(`AG Grid: no stock theme exists with the name '${e}' and no custom chart theme with that name was supplied to 'customChartThemes'`),i}var JN;const jM=r=>e=>null==e||r(e),kB=r=>"string"==typeof r,GB=r=>"boolean"==typeof r,c$=r=>"object"==typeof r,Pp=(r,e)=>t=>`AG Grid - unable to update chart as invalid params supplied:  \`${r}: ${t}\`, expected ${e}.`;class Yi{static isValidChartType(e){return Yi.validChartTypes.includes(e)}static isLegacyChartType(e){return Yi.legacyChartTypes.includes(e)}static validateChartParams(e){switch(e.type){case"rangeChartUpdate":return Yi.validateUpdateRangeChartParams(e);case"pivotChartUpdate":return Yi.validateUpdatePivotChartParams(e);case"crossFilterChartUpdate":return Yi.validateUpdateCrossFilterChartParams(e);default:return console.warn(`AG Grid - Invalid value supplied for 'type': ${e.type}. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'.`),!1}}static validateUpdateRangeChartParams(e){const t=[...Yi.commonValidations,...Yi.cellRangeValidations,{property:"seriesChartTypes",validationFn:i=>void 0===i||Array.isArray(i)&&i.every(c$),warnMessage:Pp("seriesChartTypes","Array of SeriesChartType")}];return Yi.validateProperties(e,t,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc","seriesChartTypes"],"UpdateRangeChartParams")}static validateUpdatePivotChartParams(e){const t=[...Yi.commonValidations];return Yi.validateProperties(e,t,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart"],"UpdatePivotChartParams")}static validateUpdateCrossFilterChartParams(e){const t=[...Yi.commonValidations,...Yi.cellRangeValidations];return Yi.validateProperties(e,t,["type","chartId","chartType","chartThemeName","chartThemeOverrides","unlinkChart","cellRange","suppressChartRanges","aggFunc"],"UpdateCrossFilterChartParams")}static validateProperties(e,t,i,n){let s;for(const o of t){const{property:a,validationFn:c,warnMessage:u}=o;if(a in e){const p=e[a],g=c(p);if(!0===g)continue;if(!1===g)return console.warn(u(p)),!1;s=s||Object.assign({},e),s[a]=g}}for(const o in e)if(!i.includes(o))return console.warn(`AG Grid - Unexpected property supplied. ${n} does not contain: \`${o}\`.`),!1;return s||!0}}JN=Yi,Yi.validChartTypes=["column","groupedColumn","stackedColumn","normalizedColumn","bar","groupedBar","stackedBar","normalizedBar","line","scatter","bubble","pie","donut","area","stackedArea","normalizedArea","histogram","radialColumn","radialBar","radarLine","radarArea","nightingale","rangeBar","rangeArea","boxPlot","treemap","sunburst","heatmap","waterfall","columnLineCombo","areaColumnCombo","customCombo"],Yi.legacyChartTypes=["doughnut"],Yi.validateChartType=jM(r=>{if(JN.isValidChartType(r))return!0;if(JN.isLegacyChartType(r)){const e=dT(r);return console.warn(`AG Grid - The chart type '${r}' has been deprecated. Please use '${e}' instead.`),e}return!1}),Yi.validateAgChartThemeOverrides=jM(r=>"object"==typeof r),Yi.validateChartParamsCellRange=jM(r=>"object"==typeof r),Yi.validateAggFunc=jM(r=>"string"==typeof r||"function"==typeof r),Yi.commonValidations=[{property:"chartId",validationFn:kB,warnMessage:Pp("chartId","string")},{property:"chartType",validationFn:Yi.validateChartType,warnMessage:Pp("chartType",Yi.validChartTypes.join(", "))},{property:"chartThemeName",validationFn:kB,warnMessage:Pp("chartThemeName","string")},{property:"chartThemeOverrides",validationFn:Yi.validateAgChartThemeOverrides,warnMessage:Pp("chartThemeOverrides","AgChartThemeOverrides")},{property:"unlinkChart",validationFn:GB,warnMessage:Pp("unlinkChart","boolean")}],Yi.cellRangeValidations=[{property:"cellRange",validationFn:Yi.validateChartParamsCellRange,warnMessage:Pp("cellRange","ChartParamsCellRange")},{property:"suppressChartRanges",validationFn:GB,warnMessage:Pp("suppressChartRanges","boolean")},{property:"aggFunc",validationFn:Yi.validateAggFunc,warnMessage:Pp("aggFunc","string or IAggFunc")}];var VB=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const BB=["ag-default","ag-material","ag-sheets","ag-polychroma","ag-vivid"];class mn extends Ee{constructor(e){super(),this.model=e,this.isEnterprise=()=>qN.enterpriseModule.isEnterprise}init(){this.setChartRange(),this.addManagedListener(this.eventService,G.EVENT_RANGE_SELECTION_CHANGED,e=>{e.id&&e.id===this.model.chartId&&this.updateForRangeChange()}),this.model.unlinked&&this.rangeService&&this.rangeService.setCellRanges([]),this.addManagedListener(this.eventService,G.EVENT_COLUMN_MOVED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PINNED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_VISIBLE,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,G.EVENT_MODEL_UPDATED,this.updateForGridChange.bind(this)),this.addManagedListener(this.eventService,G.EVENT_CELL_VALUE_CHANGED,this.updateForDataChange.bind(this))}update(e){if(!this.validUpdateType(e))return!1;const t=Yi.validateChartParams(e);return!!t&&(this.applyValidatedChartParams(!0===t?e:t),!0)}applyValidatedChartParams(e){var t,i,n,s,o,a,c;const{chartId:u,chartType:p,chartThemeName:g,unlinkChart:m}=e;let b=Object.assign({},{chartId:u,pivotChart:this.model.pivotChart,chartType:p??this.model.chartType,chartThemeName:g??this.model.chartThemeName,unlinkChart:m??this.model.unlinked,cellRange:this.model.suppliedCellRange,aggFunc:this.model.aggFunc,seriesChartTypes:void 0,suppressChartRanges:!1,crossFiltering:!1});switch(e.type){case"rangeChartUpdate":b.cellRange=null!==(t=this.createCellRange(e))&&void 0!==t?t:this.model.suppliedCellRange,b.aggFunc=null!==(i=e.aggFunc)&&void 0!==i?i:this.model.aggFunc,b.seriesChartTypes=e.seriesChartTypes,b.suppressChartRanges=null!==(n=e.suppressChartRanges)&&void 0!==n?n:this.model.suppressChartRanges;break;case"crossFilterChartUpdate":b.cellRange=null!==(s=this.createCellRange(e))&&void 0!==s?s:this.model.suppliedCellRange,b.aggFunc=null!==(o=e.aggFunc)&&void 0!==o?o:this.model.aggFunc,b.crossFiltering=!0,b.suppressChartRanges=null!==(a=e.suppressChartRanges)&&void 0!==a?a:this.model.suppressChartRanges}this.model.updateModel(b),b.unlinkChart||b.suppressChartRanges?null===(c=this.rangeService)||void 0===c||c.setCellRanges([]):this.setChartRange()}updateForGridChange(){this.model.unlinked||(this.model.updateCellRanges(),this.model.updateData(),this.setChartRange())}updateForDataChange(){this.model.unlinked||(this.model.updateData(),this.raiseChartModelUpdateEvent())}updateForRangeChange(){this.updateForGridChange(),this.raiseChartRangeSelectionChangedEvent()}updateForPanelChange(e){this.model.updateCellRanges(e),this.model.updateData(),this.setChartRange(),this.raiseChartRangeSelectionChangedEvent()}getChartUpdateParams(e){const i=this.getSelectedValueColState().map(o=>({colId:o.colId,displayName:o.displayName})),n=this.getChartData(),s=this.getSelectedDimensions();return{data:n,grouping:this.isGrouping(),categories:s.map(o=>({id:o.colId,name:o.displayName,chartDataType:this.model.getChartDataType(o.colId)})),fields:i,chartId:this.getChartId(),getCrossFilteringContext:()=>({lastSelectedChartId:"xxx"}),seriesChartTypes:this.getSeriesChartTypes(),updatedOverrides:e}}getChartModel(){const e=this.model.pivotChart?"pivot":"range",t=this.isComboChart()?this.model.comboChartModel.seriesChartTypes:void 0;return{modelType:e,chartId:this.model.chartId,chartType:this.model.chartType,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides(),chartPalette:this.chartProxy.getChartPalette(),cellRange:this.getCellRangeParams(),suppressChartRanges:this.model.suppressChartRanges,aggFunc:this.model.aggFunc,unlinkChart:this.model.unlinked,seriesChartTypes:t}}getChartId(){return this.model.chartId}getChartData(){return this.model.chartData}getChartType(){return this.model.chartType}setChartType(e){if(om(this.model.chartType)&&!om(e)){let i=!1;for(const n of this.model.dimensionColState)!n.selected||(i&&(n.selected=!1),i=!0)}this.model.chartType=e,this.model.comboChartModel.updateSeriesChartTypes(),this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent()}setChartThemeName(e,t){this.model.chartThemeName=e,t||(this.raiseChartModelUpdateEvent(),this.raiseChartOptionsChangedEvent())}getChartThemeName(){return this.model.chartThemeName}isPivotChart(){return this.model.pivotChart}isPivotMode(){return this.model.isPivotMode()}isGrouping(){return this.model.isGrouping()}isCrossFilterChart(){return this.model.crossFiltering}getThemeNames(){return this.gridOptionsService.get("chartThemes")||BB}getThemes(){return this.getThemeNames().map(t=>{const n=ZN(t)?t:this.chartProxy.lookupCustomChartTheme(t);return dd.getChartTheme(n)})}getPalettes(){return this.getThemes().map(t=>t.palette)}getThemeTemplateParameters(){return this.getThemes().map(t=>t.getTemplateParameters())}getValueColState(){return this.model.valueColState.map(this.displayNameMapper.bind(this))}getSelectedValueColState(){return this.getValueColState().filter(e=>e.selected)}getSelectedDimensions(){return this.model.getSelectedDimensions()}displayNameMapper(e){const t=this.model.columnNames[e.colId];return e.displayName=t?t.join(" - "):this.model.getColDisplayName(e.column),e}getColStateForMenu(){return{dimensionCols:this.model.dimensionColState,valueCols:this.getValueColState()}}setChartRange(e=!1){this.rangeService&&!this.model.suppressChartRanges&&!this.model.unlinked&&this.rangeService.setCellRanges(this.getCellRanges()),e||this.raiseChartModelUpdateEvent()}detachChartRange(){this.model.unlinked=!this.model.unlinked,this.model.unlinked?this.rangeService&&this.rangeService.setCellRanges([]):this.updateForGridChange()}setChartProxy(e){this.chartProxy=e}getChartProxy(){return this.chartProxy}isActiveXYChart(){return z.includes(["scatter","bubble"],this.getChartType())}isChartLinked(){return!this.model.unlinked}customComboExists(){const e=this.model.comboChartModel.savedCustomSeriesChartTypes;return e&&e.length>0}getSeriesChartTypes(){return this.model.comboChartModel.seriesChartTypes}isComboChart(){return this.model.isComboChart()}updateSeriesChartType(e,t,i){const n=this.model.comboChartModel.seriesChartTypes.find(s=>s.colId===e);if(n){const s="customCombo"!==this.model.chartType;s&&(this.model.chartType="customCombo");const o=n.chartType;null!=t&&(n.chartType=t),null!=i&&(n.secondaryAxis=i),this.model.comboChartModel.savedCustomSeriesChartTypes=this.model.comboChartModel.seriesChartTypes,this.model.comboChartModel.updateSeriesChartTypes(),this.updateForDataChange(),s&&this.dispatchEvent({type:mn.EVENT_CHART_TYPE_CHANGED}),o!==t&&this.dispatchEvent({type:mn.EVENT_CHART_SERIES_CHART_TYPE_CHANGED}),this.raiseChartOptionsChangedEvent()}}getActiveSeriesChartTypes(){const e=this.getSelectedValueColState().map(t=>t.colId);return this.getSeriesChartTypes().filter(t=>e.includes(t.colId))}getChartSeriesTypes(){return this.isComboChart()?["line","bar","area"]:[ud(this.getChartType())]}getCellRanges(){return[this.model.dimensionCellRange,this.model.valueCellRange].filter(e=>e)}createCellRange(e){var t;return e.cellRange&&(null===(t=this.rangeService)||void 0===t?void 0:t.createCellRangeFromCellRangeParams(e.cellRange))}validUpdateType(e){var t;if(!e.type)return console.warn("AG Grid - Unable to update chart as the 'type' is missing. It must be either 'rangeChartUpdate', 'pivotChartUpdate', or 'crossFilterChartUpdate'."),!1;const i={"Range Chart":()=>!this.isPivotChart()&&!this.isCrossFilterChart(),"Pivot Chart":()=>this.isPivotChart(),"Cross Filter Chart":()=>this.isCrossFilterChart()},n=null!==(t=Object.keys(i).find(o=>i[o]()))&&void 0!==t?t:"Range Chart",s=e.type===`${n[0].toLowerCase()}${n.slice(1).replace(/ /g,"")}Update`;return s||console.warn(`AG Grid - Unable to update chart as a '${e.type}' update type is not permitted on a ${n}.`),s}getCellRangeParams(){const e=this.getCellRanges(),t=e[0],i=t&&t.startRow||null,n=t&&t.endRow||null;return{rowStartIndex:i&&i.rowIndex,rowStartPinned:i&&i.rowPinned,rowEndIndex:n&&n.rowIndex,rowEndPinned:n&&n.rowPinned,columns:e.reduce((s,o)=>s.concat(o.columns.map(a=>a.getId())),[])}}raiseChartModelUpdateEvent(){this.dispatchEvent({type:mn.EVENT_CHART_MODEL_UPDATE})}raiseChartUpdatedEvent(){this.dispatchEvent({type:mn.EVENT_CHART_UPDATED})}raiseChartApiUpdateEvent(){this.dispatchEvent({type:mn.EVENT_CHART_API_UPDATE})}raiseChartOptionsChangedEvent(){const{chartId:e,chartType:t}=this.getChartModel(),i={type:G.EVENT_CHART_OPTIONS_CHANGED,chartId:e,chartType:t,chartThemeName:this.getChartThemeName(),chartOptions:this.chartProxy.getChartThemeOverrides()};this.eventService.dispatchEvent(i)}raiseChartRangeSelectionChangedEvent(){const e={type:G.EVENT_CHART_RANGE_SELECTION_CHANGED,id:this.model.chartId,chartId:this.model.chartId,cellRange:this.getCellRangeParams()};this.eventService.dispatchEvent(e)}destroy(){super.destroy(),this.rangeService&&this.rangeService.setCellRanges([])}}mn.EVENT_CHART_UPDATED="chartUpdated",mn.EVENT_CHART_API_UPDATE="chartApiUpdate",mn.EVENT_CHART_MODEL_UPDATE="chartModelUpdate",mn.EVENT_CHART_TYPE_CHANGED="chartTypeChanged",mn.EVENT_CHART_SERIES_CHART_TYPE_CHANGED="chartSeriesChartTypeChanged",VB([P("rangeService")],mn.prototype,"rangeService",void 0),VB([Se],mn.prototype,"init",null);var QN=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const d$={groups:[{type:"categories",isOpen:!0},{type:"series",isOpen:!0},{type:"seriesChartType",isOpen:!0}]};class ny extends Ne{constructor(e,t){super(ny.TEMPLATE),this.chartController=e,this.chartOptionsService=t,this.columnComps=new Map}init(){this.updatePanels(),this.addManagedListener(this.chartController,mn.EVENT_CHART_MODEL_UPDATE,this.updatePanels.bind(this)),this.addManagedListener(this.chartController,mn.EVENT_CHART_API_UPDATE,this.updatePanels.bind(this)),this.createAutoScrollService()}destroy(){this.clearComponents(),super.destroy()}updatePanels(){var e,t;const i=this.chartType,{dimensionCols:n,valueCols:s}=this.chartController.getColStateForMenu(),o=n.map(c=>c.colId).concat(s.map(c=>c.colId));this.chartType=this.chartController.getChartType();const a=this.getGroupExpandedState();if(z.areEqual(z.keys(this.columnComps),o)&&this.chartType===i){if([...n,...s].forEach(u=>{this.columnComps.get(u.colId).setValue(u.selected,!0)}),this.chartController.isActiveXYChart()){const u=this.generateGetSeriesLabel();s.forEach(p=>{this.columnComps.get(p.colId).setLabel(u(p))})}z.removeFromParent(this.getGui().querySelector("#seriesChartTypeGroup")),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp);const c=null===(e=this.getDataPanelDef().groups)||void 0===e?void 0:e.reduce((u,{type:p},g)=>"seriesChartType"===p?g:u,-1);-1!==c&&this.createSeriesChartTypeGroup(s,c)}else this.clearComponents(),null===(t=this.getDataPanelDef().groups)||void 0===t||t.forEach(({type:c})=>{"categories"===c?this.createCategoriesGroup(n):"series"===c?this.createSeriesGroup(s):"seriesChartType"===c?this.createSeriesChartTypeGroup(s):console.warn(`AG Grid: invalid charts data panel group name supplied: '${c}'`)});this.restoreGroupExpandedState(a)}getGroupExpandedState(){return[{groupType:"categories",comp:this.categoriesGroupComp},{groupType:"series",comp:this.seriesGroupComp},{groupType:"seriesChartType",comp:this.seriesChartTypeGroupComp}].map(({groupType:t,comp:i})=>{var n,s;const o=Boolean(null===(s=null===(n=this.getDataPanelDef().groups)||void 0===n?void 0:n.find(({type:a})=>a===t))||void 0===s?void 0:s.isOpen);return i?i.isExpanded():o})}restoreGroupExpandedState(e){[this.categoriesGroupComp,this.seriesGroupComp,this.seriesChartTypeGroupComp].forEach((t,i)=>{!t||t.toggleGroupExpand(e[i])})}createAutoScrollService(){const e=this.getGui();this.autoScrollService=new Ov({scrollContainer:e,scrollAxis:"y",getVerticalPosition:()=>e.scrollTop,setVerticalPosition:t=>e.scrollTop=t})}createComponent(e,t){const i=document.createElement("div");return i.id=t,i.className="ag-chart-data-section",i.appendChild(e.getGui()),i}addComponent(e,t,i){const n=this.createComponent(t,i);e.appendChild(n)}addComponentAtIndex(e,t,i,n){const s=this.createComponent(t,i);e.insertBefore(s,e.children[n])}addChangeListener(e,t){this.addManagedListener(e,G.EVENT_FIELD_VALUE_CHANGED,()=>{t.selected=e.getValue(),this.chartController.updateForPanelChange(t)})}createCategoriesGroup(e){this.categoriesGroupComp=this.createBean(new ln({title:this.getCategoryGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));const t=`chartDimension${this.categoriesGroupComp.getCompId()}`,n=om(this.chartController.getChartType());if(e.forEach(s=>{const o=this.categoriesGroupComp.createManagedBean(n?(()=>{const a=new Rc;return a.addCssClass("ag-data-select-checkbox"),a})():new NE);o.setLabel(z.escapeString(s.displayName)),o.setValue(s.selected),o.setInputName(t),this.addChangeListener(o,s),this.categoriesGroupComp.addItem(o),this.columnComps.set(s.colId,o),n&&this.addDragHandle(o,s)}),this.addComponent(this.getGui(),this.categoriesGroupComp,"categoriesGroup"),n){const s=this.categoriesGroupComp.getGui(),o={getIconName:()=>St.ICON_MOVE,getContainer:()=>s,onDragging:a=>this.onDragging(a),onDragLeave:()=>this.onDragLeave(),isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(o),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(o))}}createSeriesGroup(e){if(this.seriesGroupComp=this.createManagedBean(new ln({title:this.getSeriesGroupTitle(),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"})),this.chartController.isActiveXYChart()){const o=this.seriesGroupComp.createManagedBean(new g0);o.setLabel(this.chartTranslationService.translate("paired")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getPairedMode()).onValueChange(a=>{this.chartOptionsService.setPairedMode(!!a),this.chartController.updateForGridChange()}),this.seriesGroupComp.addItem(o)}const t=this.generateGetSeriesLabel();e.forEach(o=>{const a=this.seriesGroupComp.createManagedBean(new Rc);a.addCssClass("ag-data-select-checkbox");const c=t(o);a.setLabel(c),a.setValue(o.selected),this.addChangeListener(a,o),this.seriesGroupComp.addItem(a),this.columnComps.set(o.colId,a),this.addDragHandle(a,o)});const i=this.getGui(),n=this.seriesGroupComp.getGui();this.addComponent(i,this.seriesGroupComp,"seriesGroup");const s={getIconName:()=>St.ICON_MOVE,getContainer:()=>n,onDragging:o=>this.onDragging(o),onDragLeave:()=>this.onDragLeave(),isInterestedIn:this.isInterestedIn.bind(this),targetContainsSource:!0};this.dragAndDropService.addDropTarget(s),this.addDestroyFunc(()=>this.dragAndDropService.removeDropTarget(s))}createSeriesChartTypeGroup(e,t){if(!this.chartController.isComboChart())return;this.seriesChartTypeGroupComp=this.createManagedBean(new ln({title:this.chartTranslationService.translate("seriesChartType"),enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!1,cssIdentifier:"charts-data"}));const i=this.chartController.getSeriesChartTypes();e.forEach(n=>{if(!n.selected)return;const s=i.filter(g=>g.colId===n.colId)[0];if(!s)return;const o=this.seriesChartTypeGroupComp.createManagedBean(new ln({title:n.displayName,enabled:!0,suppressEnabledCheckbox:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-format-sub-level"})),a=this.seriesChartTypeGroupComp.createManagedBean(new Rc).setLabel(this.chartTranslationService.translate("secondaryAxis")).setLabelWidth("flex").setDisabled(["groupedColumn","stackedColumn","stackedArea"].includes(s.chartType)).setValue(!!s.secondaryAxis).onValueChange(g=>this.chartController.updateSeriesChartType(n.colId,void 0,g));o.addItem(a);const c=(g,m)=>this.chartTranslationService.translate(g,m),u=[{value:"line",text:c("line","Line")},{value:"area",text:c("area","Area")},{value:"stackedArea",text:c("stackedArea","StackedArea")},{value:"groupedColumn",text:c("groupedColumn","Grouped Column")},{value:"stackedColumn",text:c("stackedColumn","Stacked Column")}],p=o.createManagedBean(new Tc);p.setLabelAlignment("left").setLabelWidth("flex").addOptions(u).setValue(s.chartType).onValueChange(g=>this.chartController.updateSeriesChartType(n.colId,g)),o.addItem(p),this.seriesChartTypeGroupComp.addItem(o)}),void 0===t?this.addComponent(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup"):this.addComponentAtIndex(this.getGui(),this.seriesChartTypeGroupComp,"seriesChartTypeGroup",t)}addDragHandle(e,t){const i=z.createIconNoSpan("columnDrag",this.gridOptionsService);i.classList.add("ag-drag-handle","ag-chart-data-column-drag-handle"),e.getGui().insertAdjacentElement("beforeend",i);const n={type:sn.ChartPanel,eElement:i,dragItemName:t.displayName,getDragItem:()=>({columns:[t.column]}),onDragStopped:()=>this.onDragStop()};this.dragAndDropService.addDragSource(n,!0),this.addDestroyFunc(()=>this.dragAndDropService.removeDragSource(n))}generateGetSeriesLabel(){if(!this.chartController.isActiveXYChart())return s=>z.escapeString(s.displayName);const e="bubble"===this.chartType,t=this.isInPairedMode();let i=0;const n=new Map;return n.set(0,"X"),n.set(1,"Y"),n.set(2,"size"),s=>{const o=z.escapeString(s.displayName);if(!s.selected)return o;let a;return a=t?n.get(i%(e?3:2)):0===i?"X":e&&i%2==0?"size":"Y",i++,`${o} (${a})`}}getCategoryGroupTitle(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"labels":"categories")}getSeriesGroupTitle(){return this.chartTranslationService.translate(this.chartController.isActiveXYChart()?"xyValues":"series")}getDataPanelDef(){var e;return(null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.dataPanel)||d$}isInPairedMode(){return this.chartController.isActiveXYChart()&&this.chartOptionsService.getSeriesOption("paired","scatter")}clearComponents(){z.clearElement(this.getGui()),this.categoriesGroupComp=this.destroyBean(this.categoriesGroupComp),this.seriesGroupComp=this.destroyBean(this.seriesGroupComp),this.seriesChartTypeGroupComp=this.destroyBean(this.seriesChartTypeGroupComp),this.columnComps.clear()}onDragging(e){const t=this.checkHoveredItem(e);if(!t)return;this.lastDraggedColumn=e.dragItem.columns[0];const{comp:i,position:n}=t,{comp:s,position:o}=this.lastHoveredItem||{};i===s&&n===o||(this.autoScrollService.check(e.event),this.clearHoveredItems(),this.lastHoveredItem={comp:i,position:n},i.getGui().classList.add("ag-list-item-hovered",`ag-item-highlight-${n}`))}checkHoveredItem(e){if(z.missing(e.vDirection))return null;const t=e.event;for(const i of this.columnComps.values()){const n=i.getGui();if(!n.querySelector(".ag-chart-data-column-drag-handle"))continue;const s=n.getBoundingClientRect();if(t.clientY>=s.top&&t.clientY<=s.bottom)return{comp:i,position:t.clientY>s.top+n.clientHeight/2?"bottom":"top"}}return null}onDragLeave(){this.clearHoveredItems()}onDragStop(){if(this.lastHoveredItem){const{dimensionCols:e,valueCols:t}=this.chartController.getColStateForMenu(),i=[...e,...t].find(n=>n.column===this.lastDraggedColumn);if(i){let n=Array.from(this.columnComps.values()).indexOf(this.lastHoveredItem.comp);"bottom"===this.lastHoveredItem.position&&n++,i.order=n,this.chartController.updateForPanelChange(i)}}this.clearHoveredItems(),this.lastDraggedColumn=void 0,this.autoScrollService.ensureCleared()}clearHoveredItems(){this.columnComps.forEach(e=>{e.getGui().classList.remove("ag-list-item-hovered","ag-item-highlight-top","ag-item-highlight-bottom")}),this.lastHoveredItem=void 0}isInterestedIn(e){return e===sn.ChartPanel}}ny.TEMPLATE='<div class="ag-chart-data-wrapper ag-scrollable-container"></div>',QN([P("dragAndDropService")],ny.prototype,"dragAndDropService",void 0),QN([P("chartTranslationService")],ny.prototype,"chartTranslationService",void 0),QN([Se],ny.prototype,"init",null);var sy=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class dr extends Ne{constructor(e){super(),this.activeComps=[],this.params=e}init(){this.setTemplate(dr.TEMPLATE,{fontGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initFontFamilySelect(),this.initFontWeightStyleSelect(),this.initFontSizeSelect(),this.initFontColorPicker()}addCompToPanel(e){this.fontGroup.addItem(e),this.activeComps.push(e)}setEnabled(e){this.fontGroup.setEnabled(e)}initGroup(){this.fontGroup.setTitle(this.params.name||this.chartTranslationService.translate("font")).setEnabled(this.params.enabled).hideEnabledCheckbox(!!this.params.suppressEnabledCheckbox).hideOpenCloseIcons(!0).onEnableChange(e=>{this.params.setEnabled&&this.params.setEnabled(e)})}initFontFamilySelect(){const e=["Arial, sans-serif","Aria Black, sans-serif","Book Antiqua,  serif","Charcoal, sans-serif","Comic Sans MS, cursive","Courier, monospace","Courier New, monospace","Gadget, sans-serif","Geneva, sans-serif","Helvetica, sans-serif","Impact, sans-serif","Lucida Console, monospace","Lucida Grande, sans-serif","Lucida Sans Unicode,  sans-serif","Monaco, monospace","Palatino Linotype, serif","Palatino, serif","Times New Roman, serif","Times, serif","Verdana, sans-serif"],{family:t}=this.params.initialFont;let i=e[0];if(t){const o=e.map(a=>a.toLowerCase()).indexOf(t.toLowerCase());if(o>=0)i=e[o];else{const a=z.capitalise(t);e.push(a),i=a}}const n=e.sort().map(s=>({value:s,text:s}));this.familySelect.addOptions(n).setInputWidth("flex").setValue(`${i}`).onValueChange(s=>this.params.setFont({family:s}))}initFontSizeSelect(){const e=[8,10,12,14,16,18,20,22,24,26,28,30,32,34,36],{size:t}=this.params.initialFont;z.includes(e,t)||e.push(t);const i=e.sort((n,s)=>n-s).map(n=>({value:`${n}`,text:`${n}`}));this.sizeSelect.addOptions(i).setInputWidth("flex").setValue(`${t}`).onValueChange(n=>this.params.setFont({size:parseInt(n,10)})),this.sizeSelect.setLabel(this.chartTranslationService.translate("size"))}initFontWeightStyleSelect(){const{weight:e="normal",style:t="normal"}=this.params.initialFont,i=[{name:"normal",weight:"normal",style:"normal"},{name:"bold",weight:"bold",style:"normal"},{name:"italic",weight:"normal",style:"italic"},{name:"boldItalic",weight:"bold",style:"italic"}];let n=i.find(o=>o.weight===e&&o.style===t);n||(n={name:"predefined",weight:e,style:t},i.unshift(n));const s=i.map(o=>({value:o.name,text:this.chartTranslationService.translate(o.name)}));this.weightStyleSelect.addOptions(s).setInputWidth("flex").setValue(n.name).onValueChange(o=>{const a=i.find(c=>c.name===o);this.params.setFont({weight:a.weight,style:a.style})})}initFontColorPicker(){this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setInputWidth("flex").setValue(`${this.params.initialFont.color}`).onValueChange(e=>this.params.setFont({color:e}))}addItemToPanel(e){this.fontGroup.addItem(e),this.activeComps.push(e)}destroyActiveComps(){this.activeComps.forEach(e=>{z.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActiveComps(),super.destroy()}}dr.TEMPLATE='<div class="ag-font-panel">\n            <ag-group-component ref="fontGroup">\n                <ag-select ref="familySelect"></ag-select>\n                <ag-select ref="weightStyleSelect"></ag-select>\n                <div class="ag-charts-font-size-color">\n                    <ag-select ref="sizeSelect"></ag-select>\n                    <ag-color-picker ref="colorPicker"></ag-color-picker>\n                </div>\n            </ag-group-component>\n        </div>',sy([re("fontGroup")],dr.prototype,"fontGroup",void 0),sy([re("familySelect")],dr.prototype,"familySelect",void 0),sy([re("weightStyleSelect")],dr.prototype,"weightStyleSelect",void 0),sy([re("sizeSelect")],dr.prototype,"sizeSelect",void 0),sy([re("colorPicker")],dr.prototype,"colorPicker",void 0),sy([P("chartTranslationService")],dr.prototype,"chartTranslationService",void 0),sy([Se],dr.prototype,"init",null);var Vu=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class pa extends Ne{constructor({chartOptionsService:e,isExpandedOnInit:t=!1}){super(),this.activePanels=[],this.chartOptionsService=e,this.isExpandedOnInit=t}init(){this.setTemplate(pa.TEMPLATE,{legendGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initLegendGroup(),this.initLegendPosition(),this.initLegendPadding(),this.initLegendItems(),this.initLabelPanel()}initLegendGroup(){this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("legend.enabled")||!1).toggleGroupExpand(this.isExpandedOnInit).onEnableChange(e=>{this.chartOptionsService.setChartOption("legend.enabled",e),this.legendGroup.toggleGroupExpand(!0)})}initLegendPosition(){this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth("flex").addOptions(["top","right","bottom","left"].map(t=>({value:t,text:this.chartTranslationService.translate(t)}))).setValue(this.chartOptionsService.getChartOption("legend.position")).onValueChange(t=>this.chartOptionsService.setChartOption("legend.position",t))}initLegendPadding(){const e=this.chartOptionsService.getChartOption("legend.spacing");this.legendPaddingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Es(e,200)).setValue(`${e}`).setTextFieldWidth(45).onValueChange(t=>this.chartOptionsService.setChartOption("legend.spacing",t))}initLegendItems(){const e=(t,i,n,s)=>{var o;const a=null!==(o=this.chartOptionsService.getChartOption(`legend.${t}`))&&void 0!==o?o:0;n.setLabel(this.chartTranslationService.translate(i)).setMaxValue(Es(a,s)).setValue(`${a}`).setTextFieldWidth(45).onValueChange(c=>{this.chartOptionsService.setChartOption(`legend.${t}`,c)})};e("item.marker.size","markerSize",this.markerSizeSlider,40),e("item.marker.strokeWidth","markerStroke",this.markerStrokeSlider,10),e("item.marker.padding","itemSpacing",this.markerPaddingSlider,20),e("item.paddingX","layoutHorizontalSpacing",this.itemPaddingXSlider,50),e("item.paddingY","layoutVerticalSpacing",this.itemPaddingYSlider,50)}initLabelPanel(){const e=this.chartOptionsService,t={family:e.getChartOption("legend.item.label.fontFamily"),style:e.getChartOption("legend.item.label.fontStyle"),weight:e.getChartOption("legend.item.label.fontWeight"),size:e.getChartOption("legend.item.label.fontSize"),color:e.getChartOption("legend.item.label.color")},s=this.createBean(new dr({enabled:!0,suppressEnabledCheckbox:!0,initialFont:t,setFont:o=>{const a=this.chartOptionsService;o.family&&a.setChartOption("legend.item.label.fontFamily",o.family),o.weight&&a.setChartOption("legend.item.label.fontWeight",o.weight),o.style&&a.setChartOption("legend.item.label.fontStyle",o.style),o.size&&a.setChartOption("legend.item.label.fontSize",o.size),o.color&&a.setChartOption("legend.item.label.color",o.color)}}));this.legendGroup.addItem(s),this.activePanels.push(s)}destroyActivePanels(){this.activePanels.forEach(e=>{z.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}pa.TEMPLATE='<div>\n            <ag-group-component ref="legendGroup">\n                <ag-select ref="legendPositionSelect"></ag-select>\n                <ag-slider ref="legendPaddingSlider"></ag-slider>\n                <ag-slider ref="markerSizeSlider"></ag-slider>\n                <ag-slider ref="markerStrokeSlider"></ag-slider>\n                <ag-slider ref="markerPaddingSlider"></ag-slider>\n                <ag-slider ref="itemPaddingXSlider"></ag-slider>\n                <ag-slider ref="itemPaddingYSlider"></ag-slider>\n            </ag-group-component>\n        </div>',Vu([re("legendGroup")],pa.prototype,"legendGroup",void 0),Vu([re("legendPositionSelect")],pa.prototype,"legendPositionSelect",void 0),Vu([re("legendPaddingSlider")],pa.prototype,"legendPaddingSlider",void 0),Vu([re("markerSizeSlider")],pa.prototype,"markerSizeSlider",void 0),Vu([re("markerStrokeSlider")],pa.prototype,"markerStrokeSlider",void 0),Vu([re("markerPaddingSlider")],pa.prototype,"markerPaddingSlider",void 0),Vu([re("itemPaddingXSlider")],pa.prototype,"itemPaddingXSlider",void 0),Vu([re("itemPaddingYSlider")],pa.prototype,"itemPaddingYSlider",void 0),Vu([P("chartTranslationService")],pa.prototype,"chartTranslationService",void 0),Vu([Se],pa.prototype,"init",null);var z_=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Bu extends Ne{constructor(e){super(),this.chartOptionsService=e}init(){this.setTemplate(Bu.TEMPLATE,{axisTicksGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initAxisTicks()}initAxisTicks(){this.axisTicksGroup.setTitle(this.chartTranslationService.translate("ticks")).setEnabled(this.chartOptionsService.getAxisProperty("tick.enabled")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(t=>this.chartOptionsService.setAxisProperty("tick.enabled",t)),this.axisTicksColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getAxisProperty("tick.color")).onValueChange(t=>this.chartOptionsService.setAxisProperty("tick.color",t));const e=(t,i,n,s)=>{const o=this.chartOptionsService.getAxisProperty(t);i.setLabel(n).setMaxValue(Es(o,s)).setValue(`${o}`).setTextFieldWidth(45).onValueChange(a=>this.chartOptionsService.setAxisProperty(t,a))};e("tick.width",this.axisTicksWidthSlider,this.chartTranslationService.translate("width"),10),e("tick.size",this.axisTicksSizeSlider,this.chartTranslationService.translate("length"),30)}}Bu.TEMPLATE='<div>\n            <ag-group-component ref="axisTicksGroup">\n                <ag-color-picker ref="axisTicksColorPicker"></ag-color-picker>\n                <ag-slider ref="axisTicksWidthSlider"></ag-slider>\n                <ag-slider ref="axisTicksSizeSlider"></ag-slider>\n            </ag-group-component>\n        </div>',z_([re("axisTicksGroup")],Bu.prototype,"axisTicksGroup",void 0),z_([re("axisTicksColorPicker")],Bu.prototype,"axisTicksColorPicker",void 0),z_([re("axisTicksWidthSlider")],Bu.prototype,"axisTicksWidthSlider",void 0),z_([re("axisTicksSizeSlider")],Bu.prototype,"axisTicksSizeSlider",void 0),z_([P("chartTranslationService")],Bu.prototype,"chartTranslationService",void 0),z_([Se],Bu.prototype,"init",null);var hT=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Hu extends FS{constructor(e){super(e,Hu.TEMPLATE),this.radius=0,this.offsetX=0,this.offsetY=0}postConstruct(){super.postConstruct(),this.dragListener={eElement:this.eParentCircle,dragStartPixels:0,onDragStart:e=>{this.parentCircleRect=this.eParentCircle.getBoundingClientRect()},onDragging:e=>this.calculateAngleDrag(e),onDragStop:()=>{}},this.dragService.addDragSource(this.dragListener),this.eAngleValue.setLabel("").setLabelWidth(5).setInputWidth(45).setMin(0).setMax(360).setValue(`${this.degrees}`).onValueChange(e=>{(null==e||""===e)&&(e="0"),e=this.eAngleValue.normalizeValue(e);let t=parseFloat(e);t>180&&(t-=360),this.setValue(t)}),this.updateNumberInput(),z.exists(this.getValue())&&this.eAngleValue.setValue(this.normalizeNegativeValue(this.getValue()).toString()),this.addManagedListener(this,G.EVENT_FIELD_VALUE_CHANGED,()=>{const e=this.gridOptionsService.getDocument();this.eAngleValue.getInputElement().contains(e.activeElement)||this.updateNumberInput()})}updateNumberInput(){const e=this.normalizeNegativeValue(this.getValue());this.eAngleValue.setValue(e.toString())}positionChildCircle(e){const t=this.parentCircleRect||{width:24,height:24},i=this.eChildCircle,s=t.height/2;i.style.left=t.width/2+8*Math.cos(e)+"px",i.style.top=`${s+8*Math.sin(e)}px`}calculatePolar(){const e=this.offsetX,t=this.offsetY,i=Math.atan2(t,e);this.degrees=this.toDegrees(i),this.radius=Math.sqrt(e*e+t*t),this.positionChildCircle(i)}calculateCartesian(){const e=this.toRadians(this.getValue()),t=this.getRadius();this.setOffsetX(Math.cos(e)*t).setOffsetY(Math.sin(e)*t)}setOffsetX(e){return this.offsetX!==e&&(this.offsetX=e,this.calculatePolar()),this}setOffsetY(e){return this.offsetY!==e&&(this.offsetY=e,this.calculatePolar()),this}calculateAngleDrag(e){const t=this.parentCircleRect,u=Math.atan2(e.clientY-t.top-t.height/2,e.clientX-t.left-t.width/2);this.setValue(u,!0)}toDegrees(e){return e/Math.PI*180}toRadians(e){return e/180*Math.PI}normalizeNegativeValue(e){return e<0?360+e:e}normalizeAngle180(e){return(e%=2*Math.PI)<-Math.PI?e+=2*Math.PI:e>=Math.PI&&(e-=2*Math.PI),e}getRadius(){return this.radius}setRadius(e){return this.radius===e||(this.radius=e,this.calculateCartesian()),this}onValueChange(e){return this.addManagedListener(this,G.EVENT_FIELD_VALUE_CHANGED,()=>{e(this.degrees)}),this}getValue(e){return e?this.toRadians(this.degrees):this.degrees}setValue(e,t){let i;return i=t?e:this.normalizeAngle180(this.toRadians(e)),e=this.toDegrees(i),this.degrees!==e&&(this.degrees=Math.floor(e),this.calculateCartesian(),this.positionChildCircle(i),this.dispatchEvent({type:G.EVENT_FIELD_VALUE_CHANGED})),this}setWidth(e){return z.setFixedWidth(this.getGui(),e),this}setDisabled(e){return super.setDisabled(e),this.eAngleValue.setDisabled(e),this}destroy(){this.dragService.removeDragSource(this.dragListener),super.destroy()}}Hu.TEMPLATE='<div class="ag-angle-select">\n            <div ref="eLabel"></div>\n            <div class="ag-wrapper ag-angle-select-wrapper">\n                <div ref="eAngleSelectField" class="ag-angle-select-field">\n                    <div ref="eParentCircle" class="ag-angle-select-parent-circle">\n                        <div ref="eChildCircle" class="ag-angle-select-child-circle"></div>\n                    </div>\n                </div>\n                <ag-input-number-field ref="eAngleValue"></ag-input-number-field>\n            </div>\n        </div>',hT([re("eLabel")],Hu.prototype,"eLabel",void 0),hT([re("eParentCircle")],Hu.prototype,"eParentCircle",void 0),hT([re("eChildCircle")],Hu.prototype,"eChildCircle",void 0),hT([re("eAngleValue")],Hu.prototype,"eAngleValue",void 0),hT([P("dragService")],Hu.prototype,"dragService",void 0);var pT=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Ip extends Ne{constructor({chartController:e,chartOptionsService:t,isExpandedOnInit:i=!1}){super(),this.activePanels=[],this.axisLabelUpdateFuncs=[],this.prevXRotation=0,this.prevYRotation=0,this.chartController=e,this.chartOptionsService=t,this.isExpandedOnInit=i}init(){this.setTemplate(Ip.TEMPLATE,{axisGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initAxis(),this.initAxisTicks(),this.initAxisLabels(),this.addManagedListener(this.chartController,mn.EVENT_CHART_UPDATED,()=>this.axisLabelUpdateFuncs.forEach(i=>i()))}initAxis(){this.axisGroup.setTitle(this.translate("axis")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.axisColorInput.setLabel(this.translate("color")).setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange(t=>{const i=this.chartOptionsService.getAxisProperty("line.width")>0;this.chartOptionsService.setAxisProperties([{expression:"line.enabled",value:i},{expression:"line.color",value:t}])});const e=this.chartOptionsService.getAxisProperty("line.width");this.axisLineWidthSlider.setMaxValue(Es(e,10)).setLabel(this.translate("thickness")).setTextFieldWidth(45).setValue(`${e}`).onValueChange(t=>this.chartOptionsService.setAxisProperties([{expression:"line.enabled",value:0!==t},{expression:"line.width",value:t}]))}initAxisTicks(){if(!this.hasConfigurableAxisTicks())return;const e=this.createBean(new Bu(this.chartOptionsService));this.axisGroup.addItem(e),this.activePanels.push(e)}hasConfigurableAxisTicks(){switch(this.chartController.getChartType()){case"radarLine":case"radarArea":case"rangeBar":case"boxPlot":case"waterfall":return!1;default:return!0}}initAxisLabels(){const e={family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")},i={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,initialFont:e,setFont:s=>{s.family&&this.chartOptionsService.setAxisProperty("label.fontFamily",s.family),s.weight&&this.chartOptionsService.setAxisProperty("label.fontWeight",s.weight),s.style&&this.chartOptionsService.setAxisProperty("label.fontStyle",s.style),s.size&&this.chartOptionsService.setAxisProperty("label.fontSize",s.size),s.color&&this.chartOptionsService.setAxisProperty("label.color",s.color)}},n=this.createBean(new dr(i));this.axisGroup.addItem(n),this.activePanels.push(n),this.addAdditionalLabelComps(n)}addAdditionalLabelComps(e){this.addLabelPadding(e);const{xRotationComp:t,yRotationComp:i}=this.createRotationWidgets(),n=this.initLabelRotations(t,i);e.addCompToPanel(n),e.addCompToPanel(t),e.addCompToPanel(i)}initLabelRotations(e,t){const i=u=>this.chartOptionsService.getLabelRotation(u),n=(u,p)=>{this.chartOptionsService.setLabelRotation(u,p)},a=(()=>{const u=i("xAxis"),p=i("yAxis");return null==u&&null==p&&this.chartOptionsService.getAxisProperty("label.autoRotate")})(),c=this.createBean(new Rc).setLabel(this.translate("autoRotate")).setValue(a).onValueChange(u=>{this.chartOptionsService.setAxisProperty("label.autoRotate",u),u?(this.prevXRotation=i("xAxis"),this.prevYRotation=i("yAxis"),n("xAxis",void 0),n("yAxis",void 0)):(n("xAxis",this.prevXRotation),n("yAxis",this.prevYRotation)),e.setDisabled(u),t.setDisabled(u)});return e.setDisabled(a),t.setDisabled(a),c}createRotationWidgets(){const e=String.fromCharCode(176),t=(i,n)=>{const s=`${this.chartTranslationService.translate(i)} ${e}`,o=this.chartOptionsService.getLabelRotation(n),a=(new Hu).setLabel(s).setLabelWidth("flex").setValue(o||0).onValueChange(c=>this.chartOptionsService.setLabelRotation(n,c));return this.axisLabelUpdateFuncs.push(()=>{const c=this.chartOptionsService.getLabelRotation(n);a.setValue(c||0)}),this.createBean(a)};return{xRotationComp:t("xRotation","xAxis"),yRotationComp:t("yRotation","yAxis")}}addLabelPadding(e){const t=this.createBean(new Vn),i=this.chartOptionsService.getAxisProperty("label.padding");t.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(Es(i,30)).setValue(`${i}`).setTextFieldWidth(45).onValueChange(n=>this.chartOptionsService.setAxisProperty("label.padding",n)),e.addCompToPanel(t)}translate(e,t){return this.chartTranslationService.translate(e,t)}destroyActivePanels(){this.activePanels.forEach(e=>{z.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}Ip.TEMPLATE='<div>\n            <ag-group-component ref="axisGroup">\n                <ag-color-picker ref="axisColorInput"></ag-color-picker>\n                <ag-slider ref="axisLineWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',pT([re("axisGroup")],Ip.prototype,"axisGroup",void 0),pT([re("axisColorInput")],Ip.prototype,"axisColorInput",void 0),pT([re("axisLineWidthSlider")],Ip.prototype,"axisLineWidthSlider",void 0),pT([P("chartTranslationService")],Ip.prototype,"chartTranslationService",void 0),pT([Se],Ip.prototype,"init",null);var fT=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Fp extends Ne{constructor({chartController:e,chartOptionsService:t,isExpandedOnInit:i=!1}){super(),this.dynamicComponents=[],this.chartController=e,this.chartOptionsService=t,this.isExpandedOnInit=i}init(){this.setTemplate(Fp.TEMPLATE,{axisGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initAxis(),this.initAxisLabels(),this.initRadiusAxis()}initAxis(){this.axisGroup.setTitle(this.translate("axis")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.axisColorInput.setLabel(this.translate("color")).setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getAxisProperty("line.color")).onValueChange(n=>this.chartOptionsService.setAxisProperty("line.color",n));const e=this.chartOptionsService.getAxisProperty("line.width");this.axisLineWidthSlider.setMaxValue(Es(e,10)).setLabel(this.translate("thickness")).setTextFieldWidth(45).setValue(`${e}`).onValueChange(n=>this.chartOptionsService.setAxisProperty("line.width",n));const t=this.chartController.getChartType();if(["radarLine","radarArea"].includes(t)){const n=[{value:"circle",text:this.translate("circle")},{value:"polygon",text:this.translate("polygon")}];this.axisGroup.addItem(this.initSelect({label:"shape",options:n,currentValue:this.chartOptionsService.getAxisProperty("shape"),onValueChange:s=>this.chartOptionsService.setAxisProperty("shape",s)}))}if(PB(t)){const n=this.chartOptionsService.getAxisProperty("innerRadiusRatio");this.axisGroup.addItem(this.initSlider({label:"innerRadius",maxValue:1,currentValue:n??0,onValueChange:s=>this.chartOptionsService.setAxisProperty("innerRadiusRatio",s)}))}}initAxisLabels(){const e={family:this.chartOptionsService.getAxisProperty("label.fontFamily"),style:this.chartOptionsService.getAxisProperty("label.fontStyle"),weight:this.chartOptionsService.getAxisProperty("label.fontWeight"),size:this.chartOptionsService.getAxisProperty("label.fontSize"),color:this.chartOptionsService.getAxisProperty("label.color")},i={name:this.translate("labels"),enabled:!0,suppressEnabledCheckbox:!0,initialFont:e,setFont:o=>{o.family&&this.chartOptionsService.setAxisProperty("label.fontFamily",o.family),o.weight&&this.chartOptionsService.setAxisProperty("label.fontWeight",o.weight),o.style&&this.chartOptionsService.setAxisProperty("label.fontStyle",o.style),o.size&&this.chartOptionsService.setAxisProperty("label.fontSize",o.size),o.color&&this.chartOptionsService.setAxisProperty("label.color",o.color)}},n=this.createBean(new dr(i)),s=this.createOrientationWidget();n.addItemToPanel(s),this.axisGroup.addItem(n),this.dynamicComponents.push(n)}createOrientationWidget(){const e=[{value:"fixed",text:this.translate("fixed")},{value:"parallel",text:this.translate("parallel")},{value:"perpendicular",text:this.translate("perpendicular")}];return this.initSelect({label:"orientation",options:e,currentValue:this.chartOptionsService.getAxisProperty("label.orientation"),onValueChange:t=>this.chartOptionsService.setAxisProperty("label.orientation",t)})}initRadiusAxis(){var e,t;if(!function Wz(r){switch(r){case"radialColumn":case"radialBar":return!0;default:return!1}}(this.chartController.getChartType()))return;const n=this.createBean(new ln({cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0,enabled:!0,suppressEnabledCheckbox:!0,title:this.translate("padding")})).hideEnabledCheckbox(!0).hideOpenCloseIcons(!0);n.addItem(this.initSlider({label:"groupPadding",maxValue:1,currentValue:null!==(e=this.chartOptionsService.getAxisProperty("paddingInner"))&&void 0!==e?e:0,onValueChange:s=>this.chartOptionsService.setAxisProperty("paddingInner",s)})),n.addItem(this.initSlider({label:"seriesPadding",maxValue:1,currentValue:null!==(t=this.chartOptionsService.getAxisProperty("groupPaddingInner"))&&void 0!==t?t:0,onValueChange:s=>this.chartOptionsService.setAxisProperty("groupPaddingInner",s)})),this.axisGroup.addItem(n),this.dynamicComponents.push(n)}initSlider(e){const{label:t,maxValue:i,minValue:n=0,step:s=.05,currentValue:o,onValueChange:a}=e,c=this.createManagedBean(new Vn);return c.setLabel(this.translate(t)).setLabelWidth("flex").setMinValue(n).setMaxValue(i).setStep(s).setValue(`${o}`).onValueChange(a),this.dynamicComponents.push(c),c}initSelect(e){const{label:t,options:i,currentValue:n,onValueChange:s}=e,o=this.createManagedBean(new Tc);return o.setLabel(this.translate(t)).setLabelAlignment("left").setLabelWidth("flex").setInputWidth("flex").addOptions(i),void 0!==n&&o.setValue(n),o.onValueChange(s),this.dynamicComponents.push(o),o}translate(e,t){return this.chartTranslationService.translate(e,t)}destroyDynamicComponents(){this.dynamicComponents.forEach(e=>{z.removeFromParent(e.getGui()),this.destroyBean(e)}),this.dynamicComponents=[]}destroy(){this.destroyDynamicComponents(),super.destroy()}}Fp.TEMPLATE='<div>\n            <ag-group-component ref="axisGroup">\n                <ag-color-picker ref="axisColorInput"></ag-color-picker>\n                <ag-slider ref="axisLineWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',fT([re("axisGroup")],Fp.prototype,"axisGroup",void 0),fT([re("axisColorInput")],Fp.prototype,"axisColorInput",void 0),fT([re("axisLineWidthSlider")],Fp.prototype,"axisLineWidthSlider",void 0),fT([P("chartTranslationService")],Fp.prototype,"chartTranslationService",void 0),fT([Se],Fp.prototype,"init",null);var zM=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class lm extends Ne{constructor({chartOptionsService:e,isExpandedOnInit:t=!1}){super(),this.chartOptionsService=e,this.isExpandedOnInit=t}init(){this.setTemplate(lm.TEMPLATE,{navigatorGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initNavigator()}initNavigator(){const{chartTranslationService:e}=this;this.navigatorGroup.setTitle(e.translate("navigator")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("navigator.enabled")||!1).onEnableChange(i=>{this.chartOptionsService.setChartOption("navigator.enabled",i),this.navigatorGroup.toggleGroupExpand(!0)}).toggleGroupExpand(this.isExpandedOnInit);const t=this.chartOptionsService.getChartOption("navigator.height");this.navigatorHeightSlider.setLabel(e.translate("height")).setMinValue(10).setMaxValue(Es(t,60)).setTextFieldWidth(45).setValue(`${t||30}`).onValueChange(i=>this.chartOptionsService.setChartOption("navigator.height",i))}destroy(){super.destroy()}}lm.TEMPLATE='<div>\n            <ag-group-component ref="navigatorGroup">\n                <ag-slider ref="navigatorHeightSlider"></ag-slider>\n            </ag-group-component>\n        </div>',zM([re("navigatorGroup")],lm.prototype,"navigatorGroup",void 0),zM([re("navigatorHeightSlider")],lm.prototype,"navigatorHeightSlider",void 0),zM([P("chartTranslationService")],lm.prototype,"chartTranslationService",void 0),zM([Se],lm.prototype,"init",null);var ry=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class hd extends Ne{constructor(e,t){super(),this.chartOptionsService=e,this.chartController=t}init(){this.setTemplate(hd.TEMPLATE,{chartPaddingGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.addManagedListener(this.eventService,G.EVENT_CHART_OPTIONS_CHANGED,t=>{this.updateTopPadding(t.chartOptions)}),this.initGroup(),this.initChartPaddingItems()}initGroup(){this.chartPaddingGroup.setTitle(this.chartTranslationService.translate("padding")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0)}initChartPaddingItems(){const e=(t,i)=>{const n=this.chartOptionsService.getChartOption("padding."+t);i.setLabel(this.chartTranslationService.translate(t)).setMaxValue(Es(n,200)).setValue(`${n}`).setTextFieldWidth(45).onValueChange(s=>this.chartOptionsService.setChartOption("padding."+t,s))};e("top",this.paddingTopSlider),e("right",this.paddingRightSlider),e("bottom",this.paddingBottomSlider),e("left",this.paddingLeftSlider)}updateTopPadding(e){const t=[...this.chartController.getChartSeriesTypes(),"common"].map(i=>{var n,s;return null===(s=null===(n=e[i])||void 0===n?void 0:n.padding)||void 0===s?void 0:s.top}).find(i=>null!=i);null!=t&&this.paddingTopSlider.setValue(t)}}hd.TEMPLATE='<div>\n            <ag-group-component ref="chartPaddingGroup">\n                <ag-slider ref="paddingTopSlider"></ag-slider>\n                <ag-slider ref="paddingRightSlider"></ag-slider>\n                <ag-slider ref="paddingBottomSlider"></ag-slider>\n                <ag-slider ref="paddingLeftSlider"></ag-slider>\n            </ag-group-component>\n        <div>',ry([re("chartPaddingGroup")],hd.prototype,"chartPaddingGroup",void 0),ry([re("paddingTopSlider")],hd.prototype,"paddingTopSlider",void 0),ry([re("paddingRightSlider")],hd.prototype,"paddingRightSlider",void 0),ry([re("paddingBottomSlider")],hd.prototype,"paddingBottomSlider",void 0),ry([re("paddingLeftSlider")],hd.prototype,"paddingLeftSlider",void 0),ry([P("chartTranslationService")],hd.prototype,"chartTranslationService",void 0),ry([Se],hd.prototype,"init",null);var $M=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class cm extends Ne{constructor(e){super(),this.chartOptionsService=e}init(){this.setTemplate(cm.TEMPLATE,{chartBackgroundGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.initGroup(),this.initColorPicker()}initGroup(){this.group.setTitle(this.chartTranslationService.translate("background")).setEnabled(this.chartOptionsService.getChartOption("background.visible")).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(e=>this.chartOptionsService.setChartOption("background.visible",e))}initColorPicker(){this.colorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getChartOption("background.fill")).onValueChange(e=>this.chartOptionsService.setChartOption("background.fill",e))}}cm.TEMPLATE='<div>\n            <ag-group-component ref="chartBackgroundGroup">\n                <ag-color-picker ref="colorPicker"></ag-color-picker>\n            </ag-group-component>\n        <div>',$M([re("chartBackgroundGroup")],cm.prototype,"group",void 0),$M([re("colorPicker")],cm.prototype,"colorPicker",void 0),$M([P("chartTranslationService")],cm.prototype,"chartTranslationService",void 0),$M([Se],cm.prototype,"init",null);var HB=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class $_ extends Ne{constructor(e){super($_.TEMPLATE),this.chartOptionsService=e,this.activePanels=[]}init(){this.initFontPanel(),this.titlePlaceholder=this.chartTranslationService.translate("titlePlaceholder")}hasTitle(){const e=this.getOption("title");return e&&e.enabled&&e.text&&e.text.length>0}initFontPanel(){const e=this.hasTitle(),t=(o,a)=>{o.family&&this.setOption("title.fontFamily",o.family,a),o.weight&&this.setOption("title.fontWeight",o.weight,a),o.style&&this.setOption("title.fontStyle",o.style,a),o.size&&this.setOption("title.fontSize",o.size,a),o.color&&this.setOption("title.color",o.color,a)},i={family:this.getOption("title.fontFamily"),style:this.getOption("title.fontStyle"),weight:this.getOption("title.fontWeight"),size:this.getOption("title.fontSize"),color:this.getOption("title.color")};e||t(i,!0);const n={name:this.chartTranslationService.translate("title"),enabled:e,suppressEnabledCheckbox:!1,initialFont:i,setFont:t,setEnabled:o=>{if(this.toolbarExists()){const u=this.getOption("padding.top");this.setOption("padding.top",o?u-20:u+20)}this.setOption("title.enabled",o);const a=this.getOption("title.text"),c="Title"===a||0===a?.trim().length;o&&c&&this.setOption("title.text",this.titlePlaceholder)}},s=this.createBean(new dr(n));s.addItemToPanel(this.createSpacingSlicer()),this.getGui().appendChild(s.getGui()),this.activePanels.push(s),this.addManagedListener(this.eventService,"chartTitleEdit",()=>{s.setEnabled(this.hasTitle())})}createSpacingSlicer(){const e=this.createBean(new Vn),t=this.chartOptionsService.getChartOption("title.spacing")||10;return e.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Math.max(t,100)).setValue(`${t}`).setTextFieldWidth(45).onValueChange(i=>this.chartOptionsService.setChartOption("title.spacing",i)),e}toolbarExists(){const e=this.gridOptionsService.getCallback("getChartToolbarItems");if(!e)return!0;const t={defaultItems:["chartUnlink","chartDownload"]};return["chartLink","chartUnlink","chartDownload"].some(n=>{var s;return null===(s=e&&e(t))||void 0===s?void 0:s.includes(n)})}getOption(e){return this.chartOptionsService.getChartOption(e)}setOption(e,t,i){this.chartOptionsService.setChartOption(e,t,i)}destroyActivePanels(){this.activePanels.forEach(e=>{z.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}$_.TEMPLATE="<div></div>",HB([P("chartTranslationService")],$_.prototype,"chartTranslationService",void 0),HB([Se],$_.prototype,"init",null);var eL=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class oy extends Ne{constructor({chartController:e,chartOptionsService:t,isExpandedOnInit:i=!1}){super(),this.activePanels=[],this.chartController=e,this.chartOptionsService=t,this.isExpandedOnInit=i}init(){this.setTemplate(oy.TEMPLATE,{chartGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initGroup(),this.initTitles(),this.initPaddingPanel(),this.initBackgroundPanel()}initGroup(){this.chartGroup.setTitle(this.chartTranslationService.translate("chart")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0)}initTitles(){const e=this.createBean(new $_(this.chartOptionsService));this.chartGroup.addItem(e),this.activePanels.push(e)}initPaddingPanel(){const e=this.createBean(new hd(this.chartOptionsService,this.chartController));this.chartGroup.addItem(e),this.activePanels.push(e)}initBackgroundPanel(){const e=this.createBean(new cm(this.chartOptionsService));this.chartGroup.addItem(e),this.activePanels.push(e)}destroyActivePanels(){this.activePanels.forEach(e=>{z.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}oy.TEMPLATE='<div>\n            <ag-group-component ref="chartGroup"></ag-group-component>\n        </div>',eL([re("chartGroup")],oy.prototype,"chartGroup",void 0),eL([P("chartTranslationService")],oy.prototype,"chartTranslationService",void 0),eL([Se],oy.prototype,"init",null);var ay=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class pd extends Ne{constructor(e,t,i="shadow"){super(),this.chartOptionsService=e,this.getSelectedSeries=t,this.propertyKey=i}init(){this.setTemplate(pd.TEMPLATE,{shadowGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical",suppressOpenCloseIcons:!0}}),this.shadowBlurSlider.setTextFieldWidth(45),this.shadowXOffsetSlider.setTextFieldWidth(45),this.shadowYOffsetSlider.setTextFieldWidth(45),this.initSeriesShadow()}initSeriesShadow(){const e=this.propertyKey;this.shadowGroup.setTitle(this.chartTranslationService.translate("shadow")).setEnabled(this.chartOptionsService.getSeriesOption(`${e}.enabled`,this.getSelectedSeries())).hideOpenCloseIcons(!0).hideEnabledCheckbox(!1).onEnableChange(i=>this.chartOptionsService.setSeriesOption(`${e}.enabled`,i,this.getSelectedSeries())),this.shadowColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setInputWidth("flex").setValue(this.chartOptionsService.getSeriesOption(`${e}.color`,this.getSelectedSeries())).onValueChange(i=>this.chartOptionsService.setSeriesOption(`${e}.color`,i,this.getSelectedSeries()));const t=(i,n,s,o)=>{const a=this.chartOptionsService.getSeriesOption(`${e}.${n}`,this.getSelectedSeries());i.setLabel(this.chartTranslationService.translate(n)).setMinValue(s).setMaxValue(Es(a,o)).setValue(`${a}`).onValueChange(c=>this.chartOptionsService.setSeriesOption(`${e}.${n}`,c,this.getSelectedSeries()))};t(this.shadowBlurSlider,"blur",0,20),t(this.shadowXOffsetSlider,"xOffset",-10,10),t(this.shadowYOffsetSlider,"yOffset",-10,10)}}function tL({labelName:r,chartOptionsService:e,getSelectedSeries:t,seriesOptionLabelProperty:i}){const n=p=>`${i}.${p}`,s=p=>{const g=n(p);return e.getSeriesOption(g,t())},o=(p,g)=>{const m=n(p);e.setSeriesOption(m,g,t())},a={family:s("fontFamily"),style:s("fontStyle"),weight:s("fontWeight"),size:s("fontSize"),color:s("color")};return{name:r,enabled:s("enabled")||!1,setEnabled:p=>o("enabled",p),suppressEnabledCheckbox:!1,initialFont:a,setFont:p=>{p.family&&o("fontFamily",p.family),p.weight&&o("fontWeight",p.weight),p.style&&o("fontStyle",p.style),p.size&&o("fontSize",p.size),p.color&&o("color",p.color)}}}pd.TEMPLATE='<div>\n            <ag-group-component ref="shadowGroup">\n                <ag-color-picker ref="shadowColorPicker"></ag-color-picker>\n                <ag-slider ref="shadowBlurSlider"></ag-slider>\n                <ag-slider ref="shadowXOffsetSlider"></ag-slider>\n                <ag-slider ref="shadowYOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',ay([re("shadowGroup")],pd.prototype,"shadowGroup",void 0),ay([re("shadowColorPicker")],pd.prototype,"shadowColorPicker",void 0),ay([re("shadowBlurSlider")],pd.prototype,"shadowBlurSlider",void 0),ay([re("shadowXOffsetSlider")],pd.prototype,"shadowXOffsetSlider",void 0),ay([re("shadowYOffsetSlider")],pd.prototype,"shadowYOffsetSlider",void 0),ay([P("chartTranslationService")],pd.prototype,"chartTranslationService",void 0),ay([Se],pd.prototype,"init",null);var ly=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class fd extends Ne{constructor(e,t){super(),this.chartOptionsService=e,this.getSelectedSeries=t}init(){this.setTemplate(fd.TEMPLATE,{seriesMarkersGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initMarkers()}initMarkers(){this.seriesMarkerShapeSelect.addOptions([{value:"square",text:"Square"},{value:"circle",text:"Circle"},{value:"cross",text:"Cross"},{value:"diamond",text:"Diamond"},{value:"plus",text:"Plus"},{value:"triangle",text:"Triangle"},{value:"heart",text:"Heart"}]).setLabel(this.chartTranslationService.translate("shape")).setValue(this.getSeriesOption("marker.shape")).onValueChange(s=>this.setSeriesOption("marker.shape",s));const t=this.chartOptionsService.getChartType(),i=z.includes(["scatter","bubble"],t);this.seriesMarkersGroup.setTitle(this.chartTranslationService.translate("markers")).hideEnabledCheckbox(i).setEnabled(this.getSeriesOption("marker.enabled")||!1).hideOpenCloseIcons(!0).onEnableChange(s=>this.setSeriesOption("marker.enabled",s));const n=(s,o,a,c)=>{const u=this.getSeriesOption(s);o.setLabel(this.chartTranslationService.translate(a)).setMaxValue(Es(u,c)).setValue(`${u}`).setTextFieldWidth(45).onValueChange(p=>this.setSeriesOption(s,p))};"bubble"===t?(n("marker.maxSize",this.seriesMarkerMinSizeSlider,"maxSize",60),n("marker.size",this.seriesMarkerSizeSlider,"minSize",60)):(this.seriesMarkerMinSizeSlider.setDisplayed(!1),n("marker.size",this.seriesMarkerSizeSlider,"size",60)),n("marker.strokeWidth",this.seriesMarkerStrokeWidthSlider,"strokeWidth",10)}getSeriesOption(e){return this.chartOptionsService.getSeriesOption(e,this.getSelectedSeries())}setSeriesOption(e,t){this.chartOptionsService.setSeriesOption(e,t,this.getSelectedSeries())}}fd.TEMPLATE='<div>\n            <ag-group-component ref="seriesMarkersGroup">\n                <ag-select ref="seriesMarkerShapeSelect"></ag-select>\n                <ag-slider ref="seriesMarkerMinSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerSizeSlider"></ag-slider>\n                <ag-slider ref="seriesMarkerStrokeWidthSlider"></ag-slider>\n            </ag-group-component>\n        </div>',ly([re("seriesMarkersGroup")],fd.prototype,"seriesMarkersGroup",void 0),ly([re("seriesMarkerShapeSelect")],fd.prototype,"seriesMarkerShapeSelect",void 0),ly([re("seriesMarkerSizeSlider")],fd.prototype,"seriesMarkerSizeSlider",void 0),ly([re("seriesMarkerMinSizeSlider")],fd.prototype,"seriesMarkerMinSizeSlider",void 0),ly([re("seriesMarkerStrokeWidthSlider")],fd.prototype,"seriesMarkerStrokeWidthSlider",void 0),ly([P("chartTranslationService")],fd.prototype,"chartTranslationService",void 0),ly([Se],fd.prototype,"init",null);var Np=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class ls extends Ne{constructor(e){super(ls.TEMPLATE),this.H=1,this.S=1,this.B=1,this.A=1,this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1,this.colorChanged=!1,this.picker=e.picker}postConstruct(){this.initTabIndex(),this.initRecentColors(),this.addGuiEventListener("focus",()=>this.spectrumColor.focus()),this.addGuiEventListener("keydown",e=>{e.key===ge.ENTER&&!e.defaultPrevented&&this.destroy()}),this.addManagedListener(this.spectrumColor,"keydown",e=>this.moveDragger(e)),this.addManagedListener(this.spectrumAlphaSlider,"keydown",e=>this.moveAlphaSlider(e)),this.addManagedListener(this.spectrumHueSlider,"keydown",e=>this.moveHueSlider(e)),this.addManagedListener(this.spectrumVal,"mousedown",this.onSpectrumDraggerDown.bind(this)),this.addManagedListener(this.spectrumHue,"mousedown",this.onSpectrumHueDown.bind(this)),this.addManagedListener(this.spectrumAlpha,"mousedown",this.onSpectrumAlphaDown.bind(this)),this.addGuiEventListener("mousemove",e=>{this.onSpectrumDraggerMove(e),this.onSpectrumHueMove(e),this.onSpectrumAlphaMove(e)}),this.addManagedListener(document,"mouseup",this.onMouseUp.bind(this)),this.addManagedListener(this.recentColors,"click",this.onRecentColorClick.bind(this)),this.addManagedListener(this.recentColors,"keydown",e=>{(e.key===ge.ENTER||e.key===ge.SPACE)&&(e.preventDefault(),this.onRecentColorClick(e))})}initTabIndex(){const e=this.tabIndex=this.gridOptionsService.get("tabIndex").toString();this.spectrumColor.setAttribute("tabindex",e),this.spectrumHueSlider.setAttribute("tabindex",e),this.spectrumAlphaSlider.setAttribute("tabindex",e)}refreshSpectrumRect(){return this.spectrumValRect=this.spectrumVal.getBoundingClientRect()}refreshHueRect(){return this.spectrumHueRect=this.spectrumHue.getBoundingClientRect()}refreshAlphaRect(){return this.spectrumAlphaRect=this.spectrumAlpha.getBoundingClientRect()}onSpectrumDraggerDown(e){this.refreshSpectrumRect(),this.isSpectrumDragging=!0,this.moveDragger(e)}onSpectrumDraggerMove(e){this.isSpectrumDragging&&this.moveDragger(e)}onSpectrumHueDown(e){this.refreshHueRect(),this.isSpectrumHueDragging=!0,this.moveHueSlider(e)}onSpectrumHueMove(e){this.isSpectrumHueDragging&&this.moveHueSlider(e)}onSpectrumAlphaDown(e){this.refreshAlphaRect(),this.isSpectrumAlphaDragging=!0,this.moveAlphaSlider(e)}onSpectrumAlphaMove(e){this.isSpectrumAlphaDragging&&this.moveAlphaSlider(e)}onMouseUp(){this.isSpectrumDragging=!1,this.isSpectrumHueDragging=!1,this.isSpectrumAlphaDragging=!1}moveDragger(e){const t=this.spectrumValRect;if(!t)return;let i,n;if(e instanceof MouseEvent)i=e.clientX-t.left,n=e.clientY-t.top;else{const s=e.key===ge.LEFT,o=e.key===ge.RIGHT,a=e.key===ge.UP,c=e.key===ge.DOWN,u=a||c,p=s||o;if(!u&&!p)return;e.preventDefault();const{x:g,y:m}=this.getSpectrumValue();i=g+(p?s?-5:5:0),n=m+(u?a?-5:5:0)}i=Math.max(i,0),i=Math.min(i,t.width),n=Math.max(n,0),n=Math.min(n,t.height),this.setSpectrumValue(i/t.width,1-n/t.height)}moveHueSlider(e){const t=this.spectrumHueRect;if(!t)return;const i=this.moveSlider(this.spectrumHueSlider,e);null!=i&&(this.H=1-i/t.width,this.update())}moveAlphaSlider(e){const t=this.spectrumAlphaRect;if(!t)return;const i=this.moveSlider(this.spectrumAlphaSlider,e);null!=i&&(this.A=i/t.width,this.update())}moveSlider(e,t){var i;const n=e.getBoundingClientRect(),s=null===(i=e.parentElement)||void 0===i?void 0:i.getBoundingClientRect();if(!e||!s)return null;let o;if(t instanceof MouseEvent)o=t.clientX-s.left;else{const a=t.key===ge.LEFT,c=t.key===ge.RIGHT;if(!a&&!c)return null;t.preventDefault();const u=a?-5:5;o=parseFloat(e.style.left)-n.width/2+u}return o=Math.max(o,0),o=Math.min(o,s.width),e.style.left=o+n.width/2+"px",o}update(){const e=Gu.Color.fromHSB(360*this.H,this.S,this.B,this.A),t=Gu.Color.fromHSB(360*this.H,1,1),i=e.toRgbaString(),n=this.picker;Gu.Color.fromString(n.getValue()).toRgbaString()!==i&&(this.colorChanged=!0),n.setValue(i),this.spectrumColor.style.backgroundColor=t.toRgbaString(),this.spectrumDragger.style.backgroundColor=i}setSpectrumValue(e,t){const i=this.spectrumValRect||this.refreshSpectrumRect();if(null==i)return;const n=this.spectrumDragger,s=n.getBoundingClientRect();e=Math.max(0,e),e=Math.min(1,e),t=Math.max(0,t),t=Math.min(1,t),this.S=e,this.B=t,n.style.left=e*i.width-s.width/2+"px",n.style.top=(1-t)*i.height-s.height/2+"px",this.update()}getSpectrumValue(){const e=this.spectrumDragger,t=e.getBoundingClientRect();return{x:parseFloat(e.style.left)+t.width/2,y:parseFloat(e.style.top)+t.height/2}}initRecentColors(){const t=ls.recentColors.map((i,n)=>`<div class="ag-recent-color" id=${n} style="background-color: ${i}; width: 15px; height: 15px;" recent-color="${i}" tabIndex="${this.tabIndex}"></div>`);this.recentColors.innerHTML=t.join("")}setValue(e){const t=Gu.Color.fromString(e),[i,n,s]=t.toHSB();this.H=(isNaN(i)?0:i)/360,this.A=t.a;const o=this.spectrumHueRect||this.refreshHueRect(),a=this.spectrumAlphaRect||this.refreshAlphaRect();this.spectrumHueSlider.style.left=(this.H-1)*-o.width+"px",this.spectrumAlphaSlider.style.left=this.A*a.width+"px",this.setSpectrumValue(n,s)}onRecentColorClick(e){const t=e.target;if(!z.exists(t.id))return;const i=parseInt(t.id,10);this.setValue(ls.recentColors[i]),this.destroy()}addRecentColor(){const t=Gu.Color.fromHSB(360*this.H,this.S,this.B,this.A).toRgbaString();let i=ls.recentColors;!this.colorChanged||i[0]===t||(i=i.filter(n=>n!=t),i=[t].concat(i),i.length>ls.maxRecentColors&&(i=i.slice(0,ls.maxRecentColors)),ls.recentColors=i)}destroy(){this.addRecentColor(),super.destroy()}}ls.maxRecentColors=8,ls.recentColors=[],ls.TEMPLATE='<div class="ag-color-panel" tabindex="-1">\n            <div ref="spectrumColor" class="ag-spectrum-color">\n                <div class="ag-spectrum-sat ag-spectrum-fill">\n                    <div ref="spectrumVal" class="ag-spectrum-val ag-spectrum-fill">\n                        <div ref="spectrumDragger" class="ag-spectrum-dragger"></div>\n                    </div>\n                </div>\n            </div>\n            <div class="ag-spectrum-tools">\n                <div ref="spectrumHue" class="ag-spectrum-hue ag-spectrum-tool">\n                    <div class="ag-spectrum-hue-background"></div>\n                    <div ref="spectrumHueSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="spectrumAlpha" class="ag-spectrum-alpha ag-spectrum-tool">\n                    <div class="ag-spectrum-alpha-background"></div>\n                    <div ref="spectrumAlphaSlider" class="ag-spectrum-slider"></div>\n                </div>\n                <div ref="recentColors" class="ag-recent-colors"></div>\n            </div>\n        </div>',Np([re("spectrumColor")],ls.prototype,"spectrumColor",void 0),Np([re("spectrumVal")],ls.prototype,"spectrumVal",void 0),Np([re("spectrumDragger")],ls.prototype,"spectrumDragger",void 0),Np([re("spectrumHue")],ls.prototype,"spectrumHue",void 0),Np([re("spectrumHueSlider")],ls.prototype,"spectrumHueSlider",void 0),Np([re("spectrumAlpha")],ls.prototype,"spectrumAlpha",void 0),Np([re("spectrumAlphaSlider")],ls.prototype,"spectrumAlphaSlider",void 0),Np([re("recentColors")],ls.prototype,"recentColors",void 0),Np([Se],ls.prototype,"postConstruct",null);class UB extends Gd{constructor(e){super(Object.assign({pickerAriaLabelKey:"ariaLabelColorPicker",pickerAriaLabelValue:"Color Picker",pickerType:"ag-list",className:"ag-color-picker",pickerIcon:"colorPicker"},e)),e&&e.color&&(this.value=e.color)}postConstruct(){super.postConstruct(),this.value&&this.setValue(this.value)}createPickerComponent(){const e=this.getGui().getBoundingClientRect();return this.createBean(new ng({closable:!1,modal:!0,hideTitleBar:!0,minWidth:190,width:190,height:250,x:e.right-190,y:e.top-250}))}renderAndPositionPicker(){const e=this.pickerComponent,t=this.createBean(new ls({picker:this}));return e.addCssClass("ag-color-dialog"),t.addDestroyFunc(()=>{e.isAlive()&&this.destroyBean(e)}),e.setParentComponent(this),e.setBodyComponent(t),t.setValue(this.getValue()),t.getGui().focus(),e.addDestroyFunc(()=>{this.isDestroyingPicker?this.isDestroyingPicker=!1:(this.beforeHidePicker(),this.isDestroyingPicker=!0,t.isAlive()&&this.destroyBean(t),this.isAlive()&&this.getFocusableElement().focus())}),()=>{var i;return null===(i=this.pickerComponent)||void 0===i?void 0:i.close()}}setValue(e){return this.value===e?this:(this.eDisplayField.style.backgroundColor=e,super.setValue(e))}getValue(){return this.value}}var K_=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Uu extends Ne{constructor(e,t){super(),this.chartOptionsService=e,this.getSelectedSeries=t}init(){this.setTemplate(Uu.TEMPLATE,{calloutGroup:{cssIdentifier:"charts-format-sub-level",direction:"vertical"}}),this.initCalloutOptions()}initCalloutOptions(){this.calloutGroup.setTitle(this.chartTranslationService.translate("callout")).setEnabled(!0).hideOpenCloseIcons(!0).hideEnabledCheckbox(!0);const e=(t,i,n,s)=>{const o=this.chartOptionsService.getSeriesOption(t,this.getSelectedSeries());i.setLabel(this.chartTranslationService.translate(n)).setMaxValue(Es(o,s)).setValue(`${o}`).setTextFieldWidth(45).onValueChange(a=>this.chartOptionsService.setSeriesOption(t,a,this.getSelectedSeries()))};e("calloutLine.length",this.calloutLengthSlider,"length",40),e("calloutLine.strokeWidth",this.calloutStrokeWidthSlider,"strokeWidth",10),e("calloutLabel.offset",this.labelOffsetSlider,"offset",30)}}Uu.TEMPLATE='<div>\n            <ag-group-component ref="calloutGroup">\n                <ag-slider ref="calloutLengthSlider"></ag-slider>\n                <ag-slider ref="calloutStrokeWidthSlider"></ag-slider>\n                <ag-slider ref="labelOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',K_([re("calloutGroup")],Uu.prototype,"calloutGroup",void 0),K_([re("calloutLengthSlider")],Uu.prototype,"calloutLengthSlider",void 0),K_([re("calloutStrokeWidthSlider")],Uu.prototype,"calloutStrokeWidthSlider",void 0),K_([re("labelOffsetSlider")],Uu.prototype,"labelOffsetSlider",void 0),K_([P("chartTranslationService")],Uu.prototype,"chartTranslationService",void 0),K_([Se],Uu.prototype,"init",null);var KM=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class dm extends Ne{constructor(e,t){super(),this.chartOptionsService=e,this.getSelectedSeries=t}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("cap"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(dm.TEMPLATE,{capsGroup:e}),this.initControls()}initControls(){const e=this.chartOptionsService.getSeriesOption("cap.lengthRatio",this.getSelectedSeries());this.capLengthRatioSlider.setLabel(this.chartTranslationService.translate("capLengthRatio")).setStep(.05).setMinValue(0).setMaxValue(1).setTextFieldWidth(45).setValue(`${e}`).onValueChange(t=>this.chartOptionsService.setSeriesOption("cap.lengthRatio",t,this.getSelectedSeries()))}}dm.TEMPLATE='<div>\n            <ag-group-component ref="capsGroup">\n                <ag-slider ref="capLengthRatioSlider"></ag-slider>\n            </ag-group-component>\n        </div>',KM([re("capsGroup")],dm.prototype,"capsGroup",void 0),KM([re("capLengthRatioSlider")],dm.prototype,"capLengthRatioSlider",void 0),KM([P("chartTranslationService")],dm.prototype,"chartTranslationService",void 0),KM([Se],dm.prototype,"init",null);var Y_=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Wu extends Ne{constructor(e,t){super(),this.chartOptionsService=e,this.getSelectedSeries=t}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("connectorLine"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(Wu.TEMPLATE,{lineGroup:e}),this.initConnectorLineControls()}initConnectorLineControls(){this.initColorPicker(this.lineColorPicker,"color","line.stroke"),this.initSlider(this.lineStrokeWidthSlider,"strokeWidth",0,10,45,"line.strokeWidth"),this.initSlider(this.lineDashSlider,"lineDash",0,30,45,"line.lineDash",1,!0),this.initSlider(this.lineOpacitySlider,"strokeOpacity",0,1,45,"line.strokeOpacity",.05,!1)}initColorPicker(e,t,i){const n=this.chartOptionsService.getSeriesOption(i,this.getSelectedSeries());e.setLabel(this.chartTranslationService.translate(t)).setLabelWidth("flex").setValue(null==n?"transparent":`${n}`).onValueChange(s=>this.chartOptionsService.setSeriesOption(i,s,this.getSelectedSeries()))}initSlider(e,t,i,n,s,o,a=1,c=!1){const u=this.chartOptionsService.getSeriesOption(o,this.getSelectedSeries());e.setLabel(this.chartTranslationService.translate(t)).setMinValue(i).setMaxValue(n).setTextFieldWidth(s).setValue(`${u}`).setStep(a).onValueChange(p=>{this.chartOptionsService.setSeriesOption(o,c?[p]:p,this.getSelectedSeries())})}}Wu.TEMPLATE='<div>\n            <ag-group-component ref="lineGroup">\n                <ag-color-picker ref="lineColorPicker"></ag-color-picker>\n                <ag-slider ref="lineStrokeWidthSlider"></ag-slider>\n                <ag-slider ref="lineOpacitySlider"></ag-slider>\n                <ag-slider ref="lineDashSlider"></ag-slider>                \n            </ag-group-component>\n        </div>',Y_([re("lineColorPicker")],Wu.prototype,"lineColorPicker",void 0),Y_([re("lineStrokeWidthSlider")],Wu.prototype,"lineStrokeWidthSlider",void 0),Y_([re("lineOpacitySlider")],Wu.prototype,"lineOpacitySlider",void 0),Y_([re("lineDashSlider")],Wu.prototype,"lineDashSlider",void 0),Y_([P("chartTranslationService")],Wu.prototype,"chartTranslationService",void 0),Y_([Se],Wu.prototype,"init",null);var um=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class rc extends Ne{constructor(e,t){super(),this.chartOptionsService=e,this.getSelectedSeries=t}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("whisker"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(rc.TEMPLATE,{whiskersGroup:e}),this.initControls()}initControls(){const e=this.chartOptionsService.getSeriesOption("whisker.stroke",this.getSelectedSeries());this.whiskerColorPicker.setLabel(this.chartTranslationService.translate("color")).setLabelWidth("flex").setValue(null==e?"transparent":`${e}`).onValueChange(o=>this.chartOptionsService.setSeriesOption("whisker.stroke",o,this.getSelectedSeries()));const t=this.chartOptionsService.getSeriesOption("whisker.strokeWidth",this.getSelectedSeries());this.whiskerThicknessSlider.setLabel(this.chartTranslationService.translate("strokeWidth")).setMinValue(0).setMaxValue(10).setTextFieldWidth(45).setValue(`${t}`).onValueChange(o=>this.chartOptionsService.setSeriesOption("whisker.strokeWidth",o,this.getSelectedSeries()));const i=this.chartOptionsService.getSeriesOption("whisker.strokeOpacity",this.getSelectedSeries());this.whiskerOpacitySlider.setLabel(this.chartTranslationService.translate("strokeOpacity")).setStep(.05).setMinValue(0).setMaxValue(1).setTextFieldWidth(45).setValue(`${i}`).onValueChange(o=>this.chartOptionsService.setSeriesOption("whisker.strokeOpacity",o,this.getSelectedSeries()));const n=this.chartOptionsService.getSeriesOption("whisker.lineDash",this.getSelectedSeries());this.whiskerLineDashSlider.setLabel(this.chartTranslationService.translate("lineDash")).setMinValue(0).setMaxValue(30).setTextFieldWidth(45).setValue(`${n}`).onValueChange(o=>this.chartOptionsService.setSeriesOption("whisker.lineDash",[o],this.getSelectedSeries()));const s=this.chartOptionsService.getSeriesOption("whisker.lineDashOffset",this.getSelectedSeries());this.whiskerLineDashOffsetSlider.setLabel(this.chartTranslationService.translate("lineDashOffset")).setMinValue(0).setMaxValue(30).setTextFieldWidth(45).setValue(`${s}`).onValueChange(o=>this.chartOptionsService.setSeriesOption("whisker.lineDashOffset",o,this.getSelectedSeries()))}}rc.TEMPLATE='<div>\n            <ag-group-component ref="whiskersGroup">\n                <ag-color-picker ref="whiskerColorPicker"></ag-color-picker>\n                <ag-slider ref="whiskerThicknessSlider"></ag-slider>\n                <ag-slider ref="whiskerOpacitySlider"></ag-slider>\n                <ag-slider ref="whiskerLineDashSlider"></ag-slider>\n                <ag-slider ref="whiskerLineDashOffsetSlider"></ag-slider>\n            </ag-group-component>\n        </div>',um([re("whiskersGroup")],rc.prototype,"whiskersGroup",void 0),um([re("whiskerColorPicker")],rc.prototype,"whiskerColorPicker",void 0),um([re("whiskerThicknessSlider")],rc.prototype,"whiskerThicknessSlider",void 0),um([re("whiskerOpacitySlider")],rc.prototype,"whiskerOpacitySlider",void 0),um([re("whiskerLineDashSlider")],rc.prototype,"whiskerLineDashSlider",void 0),um([re("whiskerLineDashOffsetSlider")],rc.prototype,"whiskerLineDashOffsetSlider",void 0),um([P("chartTranslationService")],rc.prototype,"chartTranslationService",void 0),um([Se],rc.prototype,"init",null);var YM=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class hm extends Ne{constructor(e,t){super(),this.chartOptionsService=e,this.getSelectedSeries=t,this.activePanels=[]}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",title:this.chartTranslationService.translate("seriesItems"),enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(hm.TEMPLATE,{seriesItemsGroup:e}),this.initSeriesItems(),this.initSeriesControls()}initSeriesItems(){const e=[{value:"positive",text:this.chartTranslationService.translate("seriesItemPositive")},{value:"negative",text:this.chartTranslationService.translate("seriesItemNegative")}];this.seriesItemSelect.setLabel(this.chartTranslationService.translate("seriesItemType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth("flex").addOptions(e).setValue("positive").onValueChange(i=>{this.destroyActivePanels(),this.initSeriesControls(i)})}initSeriesControls(e="positive"){this.initSlider("strokeWidth",0,10,45,`item.${e}.strokeWidth`),this.initSlider("lineDash",0,30,45,`item.${e}.lineDash`,1,!0),this.initSlider("strokeOpacity",0,1,45,`item.${e}.strokeOpacity`,.05,!1),this.initSlider("fillOpacity",0,1,45,`item.${e}.fillOpacity`,.05,!1),this.initItemLabels(e)}initSlider(e,t,i,n,s,o=1,a=!1){const c=this.seriesItemsGroup.createManagedBean(new Vn),u=this.chartOptionsService.getSeriesOption(s,this.getSelectedSeries());c.setLabel(this.chartTranslationService.translate(e)).setMinValue(t).setMaxValue(i).setTextFieldWidth(n).setValue(`${u}`).setStep(o).onValueChange(g=>{this.chartOptionsService.setSeriesOption(s,a?[g]:g,this.getSelectedSeries())}),this.seriesItemsGroup.addItem(c),this.activePanels.push(c)}initItemLabels(e){const t=tL({labelName:this.chartTranslationService.translate("seriesItemLabels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:()=>this.getSelectedSeries(),seriesOptionLabelProperty:`item.${e}.label`}),i=this.createBean(new dr(t));this.seriesItemsGroup.addItem(i),this.activePanels.push(i)}destroyActivePanels(){this.activePanels.forEach(e=>{z.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}hm.TEMPLATE='<div>\n            <ag-group-component ref="seriesItemsGroup">\n                <ag-select ref="seriesItemSelect"></ag-select>\n            </ag-group-component>\n        </div>',YM([re("seriesItemsGroup")],hm.prototype,"seriesItemsGroup",void 0),YM([re("seriesItemSelect")],hm.prototype,"seriesItemSelect",void 0),YM([P("chartTranslationService")],hm.prototype,"chartTranslationService",void 0),YM([Se],hm.prototype,"init",null);var cy=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class gd extends Ne{constructor(e,t){super(),this.chartOptionsService=e,this.getSelectedSeries=t}init(){const e={cssIdentifier:"charts-format-sub-level",direction:"vertical",enabled:!0,suppressOpenCloseIcons:!0,suppressEnabledCheckbox:!0};this.setTemplate(gd.TEMPLATE,{groupSpacing:Object.assign(Object.assign({},e),{title:this.chartTranslationService.translate("group")}),tileSpacing:Object.assign(Object.assign({},e),{title:this.chartTranslationService.translate("tile")})}),this.initControls()}initControls(){const e=[{optionNamespace:"group",components:{paddingSlider:this.groupPaddingSlider,spacingSlider:this.groupSpacingSlider}},{optionNamespace:"tile",components:{paddingSlider:this.tilePaddingSlider,spacingSlider:this.tileSpacingSlider}}];for(const t of e){const{optionNamespace:i,components:n}=t,{paddingSlider:s,spacingSlider:o}=n,a=this.chartOptionsService.getSeriesOption(`${i}.padding`,this.getSelectedSeries());s.setLabel(this.chartTranslationService.translate("padding")).setMinValue(0).setMaxValue(10).setTextFieldWidth(45).setValue(`${a}`).onValueChange(u=>this.chartOptionsService.setSeriesOption(`${i}.padding`,u,this.getSelectedSeries()));const c=this.chartOptionsService.getSeriesOption(`${i}.gap`,this.getSelectedSeries());o.setLabel(this.chartTranslationService.translate("spacing")).setMinValue(0).setMaxValue(10).setTextFieldWidth(45).setValue(`${c}`).onValueChange(u=>this.chartOptionsService.setSeriesOption(`${i}.gap`,u,this.getSelectedSeries()))}}}gd.TEMPLATE='<div>\n            <ag-group-component ref="groupSpacing">\n                <ag-slider ref="groupPaddingSlider"></ag-slider>\n                <ag-slider ref="groupSpacingSlider"></ag-slider>\n            </ag-group-component>\n            <ag-group-component ref="tileSpacing">\n                <ag-slider ref="tilePaddingSlider"></ag-slider>\n                <ag-slider ref="tileSpacingSlider"></ag-slider>\n            </ag-group-component>\n        </div>',cy([re("groupSpacing")],gd.prototype,"groupSpacing",void 0),cy([re("groupPaddingSlider")],gd.prototype,"groupPaddingSlider",void 0),cy([re("groupSpacingSlider")],gd.prototype,"groupSpacingSlider",void 0),cy([re("tilePaddingSlider")],gd.prototype,"tilePaddingSlider",void 0),cy([re("tileSpacingSlider")],gd.prototype,"tileSpacingSlider",void 0),cy([P("chartTranslationService")],gd.prototype,"chartTranslationService",void 0),cy([Se],gd.prototype,"init",null);var iL=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class dy extends Ne{constructor({chartController:e,chartOptionsService:t,seriesType:i,isExpandedOnInit:n=!1}){super(),this.activePanels=[],this.widgetFuncs={lineWidth:()=>this.initStrokeWidth("lineWidth"),strokeWidth:()=>this.initStrokeWidth("strokeWidth"),lineColor:()=>this.initLineColor(),lineDash:()=>this.initLineDash(),lineOpacity:()=>this.initLineOpacity(),fillOpacity:()=>this.initFillOpacity(),markers:()=>this.initMarkers(),labels:()=>this.initLabels(),shadow:()=>this.initShadow(),tooltips:()=>this.initTooltips(),bins:()=>this.initBins(),whiskers:()=>this.initWhiskers(),caps:()=>this.initCaps(),connectorLine:()=>this.initConnectorLine(),seriesItems:()=>this.initSeriesItemsPanel(),tileSpacing:()=>this.initTileSpacingPanel()},this.seriesWidgetMappings={column:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],bar:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],pie:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"],donut:["tooltips","strokeWidth","lineOpacity","fillOpacity","labels","shadow"],line:["tooltips","lineWidth","lineDash","lineOpacity","markers","labels"],scatter:["tooltips","markers","labels"],bubble:["tooltips","markers","labels"],area:["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],histogram:["tooltips","bins","strokeWidth","lineDash","lineOpacity","fillOpacity","labels","shadow"],"radial-column":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"radial-bar":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"radar-line":["tooltips","strokeWidth","lineDash","lineOpacity","markers","labels"],"radar-area":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","markers","labels"],nightingale:["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"box-plot":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","whiskers","caps"],"range-bar":["tooltips","strokeWidth","lineDash","lineOpacity","fillOpacity","labels"],"range-area":["tooltips","lineWidth","lineDash","lineOpacity","fillOpacity","markers","labels","shadow"],treemap:["tooltips","tileSpacing"],sunburst:["tooltips"],heatmap:["tooltips","labels","lineColor","lineWidth","lineOpacity"],waterfall:["tooltips","connectorLine","seriesItems"]},this.chartController=e,this.chartOptionsService=t,this.seriesType=i||this.getChartSeriesType(),this.isExpandedOnInit=n}init(){this.setTemplate(dy.TEMPLATE,{seriesGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.seriesGroup.setTitle(this.translate("series")).toggleGroupExpand(this.isExpandedOnInit).hideEnabledCheckbox(!0),this.addManagedListener(this.chartController,mn.EVENT_CHART_SERIES_CHART_TYPE_CHANGED,this.refreshWidgets.bind(this)),this.refreshWidgets()}refreshWidgets(){this.destroyActivePanels(),this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>{var t;!this.isAlive()||(this.chartController.isComboChart()&&(this.updateSeriesType(),this.initSeriesSelect()),(null!==(t=this.seriesWidgetMappings[this.seriesType])&&void 0!==t?t:[]).forEach(n=>this.widgetFuncs[n]()))}).catch(t=>console.error("AG Grid - chart rendering failed",t))}initSeriesSelect(){const e=this.seriesGroup.createManagedBean(new Tc);e.setLabel(this.translate("seriesType")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth("flex").addOptions(this.getSeriesSelectOptions()).setValue(`${this.seriesType}`).onValueChange(t=>{this.seriesType=t,this.refreshWidgets()}),this.seriesGroup.addItem(e),this.activePanels.push(e)}initTooltips(){const e=this.createBean(new g0);e.setLabel(this.translate("tooltips")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth("flex").setValue(this.getSeriesOption("tooltip.enabled")||!1).onValueChange(t=>this.setSeriesOption("tooltip.enabled",t)),this.addWidget(e)}initLineColor(){const e=this.getSeriesOption("stroke"),t=this.createBean(new UB);t.setLabel(this.translate("strokeColor")).setLabelWidth("flex").onValueChange(i=>this.setSeriesOption("stroke",i)),e&&t.setValue(e),this.addWidget(t)}initStrokeWidth(e){var t;const i=null!==(t=this.getSeriesOption("strokeWidth"))&&void 0!==t?t:0,n=this.createBean(new Vn);n.setLabel(this.translate(e)).setMaxValue(Es(i,10)).setTextFieldWidth(45).setValue(`${i}`).onValueChange(s=>this.setSeriesOption("strokeWidth",s)),this.addWidget(n)}initLineDash(){const e=this.getSeriesOption("lineDash"),t=e?e[0]:0,i=this.createBean(new Vn);i.setLabel(this.translate("lineDash")).setMaxValue(Es(t,30)).setTextFieldWidth(45).setValue(`${t}`).onValueChange(n=>this.setSeriesOption("lineDash",[n])),this.addWidget(i)}initLineOpacity(){var e;const t=null!==(e=this.getSeriesOption("strokeOpacity"))&&void 0!==e?e:0,i=this.createBean(new Vn);i.setLabel(this.translate("strokeOpacity")).setStep(.05).setMaxValue(Es(t,1)).setTextFieldWidth(45).setValue(`${t}`).onValueChange(n=>this.setSeriesOption("strokeOpacity",n)),this.addWidget(i)}initFillOpacity(){var e;const t=null!==(e=this.getSeriesOption("fillOpacity"))&&void 0!==e?e:0,i=this.createBean(new Vn);i.setLabel(this.translate("fillOpacity")).setStep(.05).setMaxValue(Es(t,1)).setTextFieldWidth(45).setValue(`${t}`).onValueChange(n=>this.setSeriesOption("fillOpacity",n)),this.addWidget(i)}initLabels(){const e=XN(this.seriesType),t=e?"calloutLabel":"label",n=tL({labelName:this.chartTranslationService.translate(e?"calloutLabels":"labels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:()=>this.seriesType,seriesOptionLabelProperty:t}),s=this.createBean(new dr(n));if(e){const o=this.createBean(new Uu(this.chartOptionsService,()=>this.seriesType));s.addCompToPanel(o),this.activePanels.push(o)}if(this.addWidget(s),e){const o=tL({labelName:this.chartTranslationService.translate("sectorLabels"),chartOptionsService:this.chartOptionsService,getSelectedSeries:()=>this.seriesType,seriesOptionLabelProperty:"sectorLabel"}),a=this.createBean(new dr(o)),c=this.getSectorLabelPositionRatio();a.addCompToPanel(c),this.addWidget(a)}if("range-bar"===this.seriesType){const o=[{value:"inside",text:this.translate("inside")},{value:"outside",text:this.translate("outside")}],a=this.chartOptionsService.getSeriesOption("label.placement",this.seriesType),c=s.createManagedBean(new Tc);c.setLabel(this.translate("labelPlacement")).setLabelAlignment("left").setLabelWidth("flex").setInputWidth("flex").addOptions(o).setValue(a).onValueChange(g=>this.chartOptionsService.setSeriesOption("label.placement",g,this.seriesType)),s.addCompToPanel(c),this.activePanels.push(c);const u=this.chartOptionsService.getSeriesOption("label.padding",this.seriesType),p=s.createManagedBean(new Vn);p.setLabel(this.chartTranslationService.translate("padding")).setMaxValue(Es(u,200)).setValue(`${u}`).setTextFieldWidth(45).onValueChange(g=>this.chartOptionsService.setSeriesOption("label.padding",g,this.seriesType)),s.addCompToPanel(p),this.activePanels.push(p)}}getSectorLabelPositionRatio(){const e="sectorLabel.positionRatio",t=this.chartOptionsService.getSeriesOption(e,this.seriesType);return this.createBean(new Vn).setLabel(this.translate("positionRatio")).setStep(.05).setMaxValue(Es(t,1)).setTextFieldWidth(45).setValue(`${t}`).onValueChange(n=>this.chartOptionsService.setSeriesOption(e,n,this.seriesType))}initShadow(){const e=this.createBean(new pd(this.chartOptionsService,()=>this.seriesType));this.addWidget(e)}initMarkers(){const e=this.createBean(new fd(this.chartOptionsService,()=>this.seriesType));this.addWidget(e)}initBins(){var e;const t=(null!==(e=this.getSeriesOption("bins"))&&void 0!==e?e:this.getSeriesOption("calculatedBins",!0)).length,i=this.createBean(new Vn);i.setLabel(this.translate("histogramBinCount")).setMinValue(0).setMaxValue(Es(t,20)).setTextFieldWidth(45).setValue(`${t}`).onValueChange(n=>this.setSeriesOption("binCount",n)),this.addWidget(i)}initWhiskers(){const e=this.createBean(new rc(this.chartOptionsService,()=>this.seriesType));this.addWidget(e)}initCaps(){const e=this.createBean(new dm(this.chartOptionsService,()=>this.seriesType));this.addWidget(e)}initConnectorLine(){const e=this.createBean(new Wu(this.chartOptionsService,()=>this.seriesType));this.addWidget(e)}initSeriesItemsPanel(){const e=this.createBean(new hm(this.chartOptionsService,()=>this.seriesType));this.addWidget(e)}initTileSpacingPanel(){const e=this.createBean(new gd(this.chartOptionsService,()=>this.seriesType));this.addWidget(e)}addWidget(e){this.seriesGroup.addItem(e),this.activePanels.push(e)}getSeriesOption(e,t){return this.chartOptionsService.getSeriesOption(e,this.seriesType,t)}setSeriesOption(e,t){this.chartOptionsService.setSeriesOption(e,t,this.seriesType)}getChartSeriesType(){if(0===this.chartController.getSeriesChartTypes().length)return"column";const e=this.chartController.getSeriesChartTypes()[0].chartType;return"columnLineCombo"===e?"column":"areaColumnCombo"===e?"area":ud(e)}getSeriesSelectOptions(){this.seriesSelectOptions||(this.seriesSelectOptions=new Map([["area",{value:"area",text:this.translate("area","Area")}],["bar",{value:"bar",text:this.translate("bar","Bar")}],["column",{value:"column",text:this.translate("column","Column")}],["line",{value:"line",text:this.translate("line","Line")}],["scatter",{value:"scatter",text:this.translate("scatter","Scatter")}],["histogram",{value:"histogram",text:this.translate("histogram","Histogram")}],["radial-column",{value:"radial-column",text:this.translate("radialColumn","Radial Column")}],["radial-bar",{value:"radial-bar",text:this.translate("radialBar","Radial Bar")}],["radar-line",{value:"radar-line",text:this.translate("radarLine","Radar Line")}],["radar-area",{value:"radar-area",text:this.translate("radarArea","Radar Area")}],["nightingale",{value:"nightingale",text:this.translate("nightingale","Nightingale")}],["range-bar",{value:"range-bar",text:this.translate("rangeBar","Range Bar")}],["range-area",{value:"range-area",text:this.translate("rangeArea","Range Area")}],["treemap",{value:"treemap",text:this.translate("treemap","Treemap")}],["sunburst",{value:"sunburst",text:this.translate("sunburst","Sunburst")}],["waterfall",{value:"waterfall",text:this.translate("waterfall","Waterfall")}],["box-plot",{value:"box-plot",text:this.translate("boxPlot","Box Plot")}],["pie",{value:"pie",text:this.translate("pie","Pie")}],["donut",{value:"donut",text:this.translate("donut","Donut")}]]));const e=new Set;return this.chartController.getActiveSeriesChartTypes().forEach(t=>{const i=ud(t.chartType);e.add(this.seriesSelectOptions.get(i))}),Array.from(e)}updateSeriesType(){const e=this.chartController.getActiveSeriesChartTypes().map(i=>ud(i.chartType));!e.includes(this.seriesType)&&e.length>0&&(this.seriesType=e[0])}translate(e,t){return this.chartTranslationService.translate(e,t)}destroyActivePanels(){this.activePanels.forEach(e=>{z.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}dy.TEMPLATE='<div>\n            <ag-group-component ref="seriesGroup">\n            </ag-group-component>\n        </div>',iL([re("seriesGroup")],dy.prototype,"seriesGroup",void 0),iL([P("chartTranslationService")],dy.prototype,"chartTranslationService",void 0),iL([Se],dy.prototype,"init",null);var pm=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class oc extends Ne{constructor({chartOptionsService:e,isExpandedOnInit:t=!1}){super(),this.activePanels=[],this.chartOptionsService=e,this.isExpandedOnInit=t}init(){this.setTemplate(oc.TEMPLATE,{legendGroup:{cssIdentifier:"charts-format-top-level",direction:"vertical"}}),this.initLegendGroup(),this.initLegendPosition(),this.initLegendGradient(),this.initLegendSpacing(),this.initLabelPanel()}initLegendGroup(){this.legendGroup.setTitle(this.chartTranslationService.translate("legend")).hideEnabledCheckbox(!1).setEnabled(this.chartOptionsService.getChartOption("gradientLegend.enabled")||!1).toggleGroupExpand(this.isExpandedOnInit).onEnableChange(e=>{this.chartOptionsService.setChartOption("gradientLegend.enabled",e),this.legendGroup.toggleGroupExpand(!0)})}initLegendPosition(){this.legendPositionSelect.setLabel(this.chartTranslationService.translate("position")).setLabelWidth("flex").setInputWidth("flex").addOptions(["top","right","bottom","left"].map(t=>({value:t,text:this.chartTranslationService.translate(t)}))).setValue(this.chartOptionsService.getChartOption("gradientLegend.position")).onValueChange(t=>this.chartOptionsService.setChartOption("gradientLegend.position",t))}initLegendGradient(){this.gradientReverseCheckbox.setLabel(this.chartTranslationService.translate("reverseDirection")).setLabelWidth("flex").setValue(this.chartOptionsService.getChartOption("gradientLegend.reverseOrder")).onValueChange(t=>this.chartOptionsService.setChartOption("gradientLegend.reverseOrder",t));const e=(t,i,n,s)=>{var o;const a=null!==(o=this.chartOptionsService.getChartOption(t))&&void 0!==o?o:0;n.setLabel(this.chartTranslationService.translate(i)).setMaxValue(Es(a,s)).setValue(`${a}`).setTextFieldWidth(45).onValueChange(c=>{this.chartOptionsService.setChartOption(t,c)})};e("gradientLegend.gradient.thickness","thickness",this.gradientThicknessSlider,40),e("gradientLegend.gradient.preferredLength","preferredLength",this.gradientPreferredLengthSlider,300)}initLegendSpacing(){const e=this.chartOptionsService.getChartOption("gradientLegend.spacing");this.legendSpacingSlider.setLabel(this.chartTranslationService.translate("spacing")).setMaxValue(Es(e,200)).setValue(`${e}`).setTextFieldWidth(45).onValueChange(t=>this.chartOptionsService.setChartOption("gradientLegend.spacing",t))}initLabelPanel(){const e=this.chartOptionsService,t={family:e.getChartOption("gradientLegend.scale.label.fontFamily"),style:e.getChartOption("gradientLegend.scale.label.fontStyle"),weight:e.getChartOption("gradientLegend.scale.label.fontWeight"),size:e.getChartOption("gradientLegend.scale.label.fontSize"),color:e.getChartOption("gradientLegend.scale.label.color")},s=this.createBean(new dr({enabled:!0,suppressEnabledCheckbox:!0,initialFont:t,setFont:o=>{const a=this.chartOptionsService;o.family&&a.setChartOption("gradientLegend.scale.label.fontFamily",o.family),o.weight&&a.setChartOption("gradientLegend.scale.label.fontWeight",o.weight),o.style&&a.setChartOption("gradientLegend.scale.label.fontStyle",o.style),o.size&&a.setChartOption("gradientLegend.scale.label.fontSize",o.size),o.color&&a.setChartOption("gradientLegend.scale.label.color",o.color)}}));this.legendGroup.addItem(s),this.activePanels.push(s)}destroyActivePanels(){this.activePanels.forEach(e=>{z.removeFromParent(e.getGui()),this.destroyBean(e)})}destroy(){this.destroyActivePanels(),super.destroy()}}function Es(r,e){return Math.max(r,e)}oc.TEMPLATE='<div>\n            <ag-group-component ref="legendGroup">\n                <ag-select ref="legendPositionSelect"></ag-select>\n                <ag-checkbox ref="gradientReverseCheckbox"></ag-checkbox>\n                <ag-slider ref="gradientThicknessSlider"></ag-slider>\n                <ag-slider ref="gradientPreferredLengthSlider"></ag-slider>\n                <ag-slider ref="legendSpacingSlider"></ag-slider>\n            </ag-group-component>\n        </div>',pm([re("legendGroup")],oc.prototype,"legendGroup",void 0),pm([re("gradientReverseCheckbox")],oc.prototype,"gradientReverseCheckbox",void 0),pm([re("legendPositionSelect")],oc.prototype,"legendPositionSelect",void 0),pm([re("gradientThicknessSlider")],oc.prototype,"gradientThicknessSlider",void 0),pm([re("gradientPreferredLengthSlider")],oc.prototype,"gradientPreferredLengthSlider",void 0),pm([re("legendSpacingSlider")],oc.prototype,"legendSpacingSlider",void 0),pm([P("chartTranslationService")],oc.prototype,"chartTranslationService",void 0),pm([Se],oc.prototype,"init",null);const h$={groups:[{type:"chart"},{type:"legend"},{type:"series"},{type:"axis"},{type:"navigator"}]};class gT extends Ne{constructor(e,t){super(gT.TEMPLATE),this.chartController=e,this.chartOptionsService=t,this.panels=[],this.isGroupPanelShownInSeries=(i,n)=>{var s,o;return!!["chart","legend","series"].includes(i)||null!==(o=null===(s={bar:["axis","navigator"],column:["axis","navigator"],line:["axis","navigator"],area:["axis","navigator"],scatter:["axis","navigator"],bubble:["axis","navigator"],histogram:["axis","navigator"],cartesian:["axis","navigator"],"radial-column":["axis"],"radial-bar":["axis"],"radar-line":["axis"],"radar-area":["axis"],nightingale:["axis"],"range-bar":["axis","navigator"],"range-area":["axis","navigator"],treemap:[],sunburst:[],heatmap:["axis"],waterfall:["axis","navigator"],"box-plot":["axis","navigator"]}[n])||void 0===s?void 0:s.includes(i))&&void 0!==o&&o}}init(){this.createPanels(),this.addManagedListener(this.chartController,mn.EVENT_CHART_UPDATED,()=>this.createPanels(!0)),this.addManagedListener(this.chartController,mn.EVENT_CHART_API_UPDATE,()=>this.createPanels(!1))}createPanels(e){var t;const i=this.chartController.getChartType(),n=this.chartController.isGrouping(),s=ud(i);e&&i===this.chartType&&n===this.isGrouping||(this.destroyPanels(),null===(t=this.getFormatPanelDef().groups)||void 0===t||t.forEach(o=>{const a=o.type;if(!this.isGroupPanelShownInSeries(a,s))return;const c={chartController:this.chartController,chartOptionsService:this.chartOptionsService,isExpandedOnInit:o.isOpen,seriesType:s};if("chart"===a)this.addComponent(new oy(c));else if("legend"===a){const u=function jz(r){switch(r){case"treemap":case"sunburst":case"heatmap":return!0;default:return!1}}(i)?new oc(c):new pa(c);this.addComponent(u)}else if("axis"===a){const u=PB(i)?new Fp(c):new Ip(c);this.addComponent(u)}else"series"===a?this.addComponent(new dy(c)):"navigator"===a?this.addComponent(new lm(c)):console.warn(`AG Grid: invalid charts format panel group name supplied: '${o.type}'`)}),this.chartType=i,this.isGrouping=n)}getFormatPanelDef(){var e;return(null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.formatPanel)||h$}addComponent(e){this.createBean(e),this.panels.push(e),e.addCssClass("ag-chart-format-section"),this.getGui().appendChild(e.getGui())}destroyPanels(){this.panels.forEach(e=>{z.removeFromParent(e.getGui()),this.destroyBean(e)}),this.panels=[]}destroy(){this.destroyPanels(),super.destroy()}}gT.TEMPLATE='<div class="ag-chart-format-wrapper"></div>',function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Se],gT.prototype,"init",null);var WB=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class fm extends Ne{constructor(e,t){super(),this.size=58,this.padding=5,this.root=new Ue.Group;const i=new Ue.Scene({window,document:window.document,width:this.size,height:this.size});i.canvas.element.classList.add("ag-chart-mini-thumbnail-canvas"),i.root=this.root,i.container=e,this.scene=i,this.tooltipName=t}init(){this.scene.canvas.element.title=this.chartTranslationService.translate(this.tooltipName),this.scene.render().catch(e=>{console.error("AG Grid - chart update failed",e)})}}WB([P("chartTranslationService")],fm.prototype,"chartTranslationService",void 0),WB([Se],fm.prototype,"init",null);class Pr extends fm{constructor(e,t){super(e,t),this.stroke="gray",this.axisOvershoot=3}addAxes(){const e=this.size,t=this.padding,i=new Ue.Line;i.x1=t,i.y1=t,i.x2=t,i.y2=e-t+this.axisOvershoot,i.stroke=this.stroke;const n=new Ue.Line;n.x1=t-this.axisOvershoot+1,n.y1=e-t,n.x2=e-t+1,n.y2=e-t,n.stroke=this.stroke;const s=this.root;s.append(i),s.append(n)}}function mT(r){const{stacked:e,size:t,padding:i,xScalePadding:n,xScaleDomain:s,yScaleDomain:o}=r,a=new Ue.BandScale;a.domain=s,a.range=[i,t-i],a.paddingInner=n,a.paddingOuter=n;const c=new Ue.LinearScale;c.domain=o,c.range=[t-i,i];const u=(p,g,m)=>p.map((y,b)=>{const _=m.convert(y),E=new Ue.Rect;return E.x=g.convert(b),E.y=_,E.width=g.bandwidth,E.height=m.convert(0)-_,E.strokeWidth=0,E.crisp=!0,E});return e?r.data.map(p=>u(p,a,c)):u(r.data,a,c)}function nL(r,e,t,i){const n=new Ue.LinearScale;n.domain=[0,4],n.range=[i,t-i];const s=new Ue.LinearScale;s.domain=[0,10],s.range=[t-i,i];const o=e.map(c=>{const u=new Ue.Path;return u.strokeWidth=3,u.lineCap="round",u.fill=void 0,c.forEach((p,g)=>{u.path[g>0?"lineTo":"moveTo"](n.convert(g),s.convert(p))}),u}),a=new Ue.Group;return a.setClipRectInGroupCoordinateSpace(new Ue.BBox(i,i,t-2*i,t-2*i)),a.append(o),r.append(a),o}function jB(r,e,t,i,n,s=0){const o=new Ue.LinearScale;o.domain=[0,7],o.range=[-Math.PI,Math.PI].map(m=>m+Math.PI/2);const a=new Ue.LinearScale;a.domain=[0,10],a.range=[i,n];const c=[],u=e.map(m=>{const y=new Ue.Path;return y.strokeWidth=1,y.strokeOpacity=.5,y.lineCap="round",y.fill=void 0,y.fillOpacity=.8,m.forEach((b,_)=>{const E=o.convert(_),D=i+n-a.convert(b),R=D*Math.cos(E),O=D*Math.sin(E);if(y.path[_>0?"lineTo":"moveTo"](R,O),s>0){const L=new Ue.Circle;L.x=R,L.y=O,L.size=s,c.push(L)}}),y.path.closePath(),y}),p=new Ue.Group,g=t/2;return p.translationX=g,p.translationY=g,p.append([...u,...c]),r.append(p),{paths:u,markers:c}}function qM(r){let[e,t]=[1/0,-1/0];return{processedData:r.reduce((n,s,o)=>{var a;const c=o>0?n[o-1]:void 0;null!==(a=n[o])&&void 0!==a||(n[o]=[]);const u=n[o];return s.forEach((p,g)=>{c&&(p+=c[g]),u[g]=p,u[g]<e&&(e=u[g]),u[g]>t&&(t=u[g])}),n},[]),min:e,max:t}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Se],Pr.prototype,"addAxes",null);let m$=(()=>{class r extends Pr{constructor(t,i,n){super(t,"groupedColumnTooltip"),this.columnData=[2,3,4];const{root:s,columnData:o,size:a,padding:c}=this;this.columns=mT({stacked:!1,root:s,data:o,size:a,padding:c,xScaleDomain:[0,1,2],yScaleDomain:[0,4],xScalePadding:.3}),s.append(this.columns),this.updateColors(i,n)}updateColors(t,i){this.columns.forEach((n,s)=>{n.fill=t[s],n.stroke=i[s]})}}return r.chartType="groupedColumn",r})(),zB=(()=>{class r extends Pr{constructor(t,i,n,s,o,a=r.data,c=[0,16],u="stackedColumnTooltip"){super(t,u);const{root:p,size:g,padding:m}=this;this.stackedColumns=mT({stacked:!0,root:p,data:a,size:g,padding:m,xScaleDomain:[0,1,2],yScaleDomain:c,xScalePadding:.3}),p.append([].concat.apply([],this.stackedColumns)),this.updateColors(i,n)}updateColors(t,i){this.stackedColumns.forEach((n,s)=>n.forEach(o=>{o.fill=t[s],o.stroke=i[s]}))}}return r.chartType="stackedColumn",r.data=[[8,12,16],[6,9,12],[2,3,4]],r})(),v$=(()=>{class r extends zB{constructor(t,i,n,s,o){super(t,i,n,s,o,r.data,[0,10],"normalizedColumnTooltip")}}return r.chartType="normalizedColumn",r.data=[[10,10,10],[6,7,8],[2,4,6]],r})(),C$=(()=>{class r extends Pr{constructor(t,i,n){super(t,"groupedBarTooltip");const s=this.padding,o=this.size,c=new Ue.BandScale;c.domain=[0,1,2],c.range=[s,o-s],c.paddingInner=.3,c.paddingOuter=.3;const u=new Ue.LinearScale;u.domain=[0,4],u.range=[o-s,s];const p=u.convert(0),g=c.bandwidth;this.bars=[2,3,4].map((m,y)=>{const b=new Ue.Rect;return b.x=s,b.y=c.convert(y),b.width=p-u.convert(m),b.height=g,b.strokeWidth=0,b.crisp=!0,b}),this.updateColors(i,n),this.root.append(this.bars)}updateColors(t,i){this.bars.forEach((n,s)=>{n.fill=t[s],n.stroke=i[s]})}}return r.chartType="groupedBar",r})(),$B=(()=>{class r extends Pr{constructor(t,i,n,s,o,a=r.data,c=[0,16],u="stackedBarTooltip"){super(t,u);const p=this.size,g=this.padding,m=new Ue.BandScale;m.domain=[0,1,2],m.range=[g,p-g],m.paddingInner=.3,m.paddingOuter=.3;const y=new Ue.LinearScale;y.domain=c,y.range=[p-g,g];const b=y.convert(0),_=m.bandwidth;this.bars=a.map(E=>E.map((D,R)=>{const O=new Ue.Rect;return O.x=g,O.y=m.convert(R),O.width=b-y.convert(D),O.height=_,O.strokeWidth=0,O.crisp=!0,O})),this.updateColors(i,n),this.root.append([].concat.apply([],this.bars))}updateColors(t,i){this.bars.forEach((n,s)=>n.forEach(o=>{o.fill=t[s],o.stroke=i[s]}))}}return r.chartType="stackedBar",r.data=[[8,12,16],[6,9,12],[2,3,4]],r})(),y$=(()=>{class r extends $B{constructor(t,i,n,s,o){super(t,i,n,s,o,r.data,[0,10],"normalizedBarTooltip")}}return r.chartType="normalizedBar",r.data=[[10,10,10],[6,7,8],[2,4,6]],r})();const ac=Ue.toRadians;let sL=(()=>{class r extends fm{constructor(t,i,n,s,o,a=.6,c="donutTooltip"){super(t,c);const u=(this.size-2*this.padding)/2,p=u+this.padding,g=[[ac(-90),ac(30)],[ac(30),ac(120)],[ac(120),ac(180)],[ac(180),ac(210)],[ac(210),ac(240)],[ac(240),ac(270)]];this.sectors=g.map(([m,y])=>{const b=new Ue.Sector;return b.centerX=p,b.centerY=p,b.innerRadius=u*a,b.outerRadius=u,b.startAngle=m,b.endAngle=y,b.stroke=void 0,b.strokeWidth=0,b.inset=.75,b}),this.updateColors(i,n),this.root.append(this.sectors)}updateColors(t,i){this.sectors.forEach((n,s)=>{n.fill=t[s%t.length],n.stroke=i[s%i.length]})}}return r.chartType="donut",r})(),S$=(()=>{class r extends sL{constructor(t,i,n,s,o){super(t,i,n,s,o,0,"pieTooltip")}}return r.chartType="pie",r})(),b$=(()=>{class r extends Pr{constructor(t,i,n){super(t,"lineTooltip"),this.data=[[9,7,8,5,6],[5,6,3,4,1],[1,3,4,8,7]],this.lines=nL(this.root,this.data,this.size,this.padding),this.updateColors(i,n)}updateColors(t,i){this.lines.forEach((n,s)=>{n.stroke=t[s]})}}return r.chartType="line",r})(),_$=(()=>{class r extends Pr{constructor(t,i,n){super(t,"scatterTooltip");const s=this.size,o=this.padding,c=new Ue.LinearScale;c.domain=[-.5,4],c.range=[2*o,s-o];const u=new Ue.LinearScale;u.domain=[-.5,3.5],u.range=[s-o,o];const p=[];[[[.3,3],[1.1,.9],[2,.4],[3.4,2.4]],[[0,.3],[1,2],[2.4,1.4],[3,0]]].forEach(m=>{m.forEach(([y,b])=>{const _=new Ue.Arc;_.strokeWidth=0,_.centerX=c.convert(y),_.centerY=u.convert(b),_.radius=2.5,p.push(_)})}),this.points=p,this.updateColors(i,n);const g=new Ue.Group;g.setClipRectInGroupCoordinateSpace(new Ue.BBox(o,o,s-2*o,s-2*o)),g.append(this.points),this.root.append(g)}updateColors(t,i){this.points.forEach((n,s)=>{n.stroke=i[s%i.length],n.fill=t[s%t.length]})}}return r.chartType="scatter",r})(),w$=(()=>{class r extends Pr{constructor(t,i,n){super(t,"bubbleTooltip");const s=this.size,o=this.padding,c=new Ue.LinearScale;c.domain=[0,1],c.range=[2*o,s-o];const u=new Ue.LinearScale;u.domain=[0,1],u.range=[s-o,o];const p=[];[[[.1,.3,5],[.5,.4,7],[.2,.8,7]],[[.8,.7,5],[.7,.3,9]]].forEach(m=>{m.forEach(([y,b,_])=>{const E=new Ue.Arc;E.strokeWidth=0,E.centerX=c.convert(y),E.centerY=u.convert(b),E.radius=_,E.fillOpacity=.7,p.push(E)})}),this.points=p,this.updateColors(i,n);const g=new Ue.Group;g.setClipRectInGroupCoordinateSpace(new Ue.BBox(o,o,s-2*o,s-2*o)),g.append(this.points),this.root.append(g)}updateColors(t,i){this.points.forEach((n,s)=>{n.stroke=i[s%i.length],n.fill=t[s%t.length]})}}return r.chartType="bubble",r})(),E$=(()=>{class r extends Pr{constructor(t,i,n,s,o,a=r.data){super(t,"groupedAreaTooltip");const c=this.size,u=this.padding,p=new Ue.BandScale;p.domain=[0,1,2],p.paddingInner=1,p.paddingOuter=0,p.range=[u+.5,c-u-.5];const g=new Ue.LinearScale;g.domain=[0,6],g.range=[c-u+.5,u];const y=2*a.length-1,b=[],_=g.convert(0);a.forEach((E,D)=>{const R=p.convert(D);E.forEach((O,L)=>{const k=g.convert(O),U=b[L]||(b[L]=[]);U[D]={x:R,y:k},U[y-D]={x:R,y:_}})}),this.areas=b.reverse().map(E=>{const D=new Ue.Path;D.strokeWidth=1,D.strokeOpacity=.75,D.fillOpacity=.7;const R=D.path;return R.clear(),E.forEach((O,L)=>R[L>0?"lineTo":"moveTo"](O.x,O.y)),R.closePath(),D}),this.updateColors(i,n),this.root.append(this.areas)}updateColors(t,i){this.areas.forEach((n,s)=>{n.fill=t[s],n.stroke=i[s]})}}return r.chartType="area",r.data=[[1,3,5],[2,6,4],[5,3,1]],r})(),rL=(()=>{class r extends Pr{constructor(t,i,n,s,o,a=r.data,c="stackedAreaTooltip"){super(t,c);const u=this.size,p=this.padding,g=new Ue.BandScale;g.domain=[0,1,2],g.paddingInner=1,g.paddingOuter=0,g.range=[p+.5,u-p-.5];const m=new Ue.LinearScale;m.domain=[0,16],m.range=[u-p+.5,p+.5];const b=2*a.length-1,_=[];a.forEach((E,D)=>{const R=g.convert(D);let O=0;E.forEach((L,k)=>{const U=m.convert(O+L),j=_[k]||(_[k]=[]);j[D]={x:R,y:U},j[b-D]={x:R,y:m.convert(O)},O+=L})}),this.areas=_.map(E=>{const D=new Ue.Path;D.strokeWidth=0;const R=D.path;return R.clear(),E.forEach((O,L)=>R[L>0?"lineTo":"moveTo"](O.x,O.y)),R.closePath(),D}),this.updateColors(i,n),this.root.append(this.areas)}updateColors(t,i){this.areas.forEach((n,s)=>{n.fill=t[s],n.stroke=i[s]})}}return r.chartType="stackedArea",r.data=[[2,3,2],[3,6,5],[6,2,2]],r})();class vT extends rL{constructor(e,t,i,n,s,o=vT.data){super(e,t,i,n,s,o,"normalizedAreaTooltip")}}vT.chartType="normalizedArea",vT.data=rL.data.map(r=>{const e=r.reduce((t,i)=>t+i,0);return r.map(t=>t/e*16)});let D$=(()=>{class r extends Pr{constructor(t,i,n){super(t,"histogramTooltip");const s=this.padding,o=this.size,a=[2,5,11,13,10,6,1],c=new Ue.LinearScale;c.domain=[0,a.length],c.range=[s,o-s];const u=new Ue.LinearScale;u.domain=[0,a.reduce((g,m)=>Math.max(g,m),0)],u.range=[o-s,s];const p=u.convert(0);this.bars=a.map((g,m)=>{const y=u.convert(g),b=c.convert(m),_=c.convert(m+1),E=new Ue.Rect;return E.x=b,E.y=y,E.width=_-b,E.height=p-y,E.strokeWidth=1,E.strokeOpacity=.75,E.crisp=!0,E}),this.updateColors(i,n),this.root.append(this.bars)}updateColors([t],[i]){this.bars.forEach(n=>{n.fill=t,n.stroke=i})}}return r.chartType="histogram",r})();class uy extends fm{constructor(e,t){super(e,t),this.stroke="gray",this.showRadiusAxisLine=!0,this.showAngleAxisLines=!0}addAxes(){const e=this.size,t=this.padding,n=(e-2*t)/2,s=this.showAngleAxisLines?[n,.8*n,.6*n,.4*n]:[],o=new Ue.Line;o.x1=e/2,o.y1=t,o.x2=e/2,o.y2=e-t-n-s[s.length-1],o.stroke=this.stroke,o.strokeOpacity=.5,o.fill=void 0,o.visible=this.showRadiusAxisLine;const a=t+n;this.gridLines=s.map((u,p)=>{const g=new Ue.Path;return g.path.arc(a,a,u,0,2*Math.PI),g.strokeWidth=1,g.stroke=this.stroke,g.strokeOpacity=0===p?.5:.2,g.fill=void 0,g});const c=this.root;c.append(o),this.gridLines.length>0&&c.append(this.gridLines)}}!function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Se],uy.prototype,"addAxes",null);let R$=(()=>{class r extends uy{constructor(t,i,n){super(t,"radialColumnTooltip"),this.data=[[6,8,10,2,6,5],[4,4,3,6,4,4],[5,4,2,9,8,9]],this.showRadiusAxisLine=!1;const{padding:s,size:o,data:a}=this,c=(o-2*s)/2,p=.4*c,g=new Ue.BandScale;g.domain=a[0].map((D,R)=>R),g.range=[0,2*Math.PI],g.paddingInner=0,g.paddingOuter=0;const m=.7*g.bandwidth,{processedData:y,max:b}=qM(a),_=new Ue.LinearScale;_.domain=[0,b],_.range=[p,c];const E=this.size/2;this.series=y.map((D,R)=>{const L=0===R?void 0:y[R-1],k=new Ue.Group({zIndex:1e6}),U=D.map((j,q)=>{const J=L?.[q],me=_.convert(j),ye=_.convert(J??0),Ae=g.convert(q),Pe=Ae+m,Le=Ue.getRadialColumnWidth(Ae,Pe,c,.5,.5),Xe=new Ue.RadialColumnShape;return Xe.scalingCenterX=E,Xe.scalingCenterY=E,Xe.columnWidth=Le,Xe.innerRadius=ye,Xe.outerRadius=me,Xe.startAngle=Ae,Xe.endAngle=Pe,Xe.isBeveled=!0,Xe.axisInnerRadius=p,Xe.axisOuterRadius=c,Xe.stroke=void 0,Xe.strokeWidth=0,Xe});return k.append(U),k.translationX=E,k.translationY=E,k}),this.root.append(this.series),this.updateColors(i,n)}updateColors(t,i){this.series.forEach((n,s)=>{var o;null===(o=n.children)||void 0===o||o.forEach(a=>{a.fill=t[s%t.length],a.stroke=i[s%i.length]})})}}return r.chartType="radialColumn",r})(),A$=(()=>{class r extends uy{constructor(t,i,n){super(t,"radialBarTooltip"),this.data=[[6,8,10],[4,4,3],[5,4,2]],this.showRadiusAxisLine=!1;const s=(this.size-this.padding)/2,a=.4*s,c=s+a,u=new Ue.BandScale;u.domain=this.data[0].map((D,R)=>R),u.range=[s,a],u.paddingInner=.5,u.paddingOuter=0;const p=u.bandwidth,{processedData:g,max:m}=qM(this.data),y=new Ue.LinearScale;y.domain=[0,Math.ceil(1.5*m)];const b=1.5*Math.PI,_=b+2*Math.PI;y.range=[b,_];const E=this.size/2;this.series=g.map((D,R)=>{const O=R<0?void 0:g[R-1],L=new Ue.Group({zIndex:1e6}),k=D.map((U,j)=>{var q;const J=null!==(q=O?.[j])&&void 0!==q?q:0,me=c-u.convert(j),ye=me+p,Ae=y.convert(J),Pe=y.convert(U),Le=new Ue.Sector;return Le.centerX=E,Le.centerY=E,Le.innerRadius=me,Le.outerRadius=ye,Le.startAngle=Ae,Le.endAngle=Pe,Le.stroke=void 0,Le.strokeWidth=0,Le});return L.append(k),L}),this.root.append(this.series),this.updateColors(i,n)}updateColors(t,i){this.series.forEach((n,s)=>{var o;null===(o=n.children)||void 0===o||o.forEach(a=>{a.fill=t[s%t.length],a.stroke=i[s%i.length]})})}}return r.chartType="radialBar",r})(),O$=(()=>{class r extends uy{constructor(t,i,n){super(t,"radarLineTooltip"),this.markerSize=4,this.data=[[8,7,8,7,8,8,7,8],[6,8,5,10,6,7,4,6],[0,3,3,5,4,4,2,0]],this.showRadiusAxisLine=!1;const s=(this.size-2*this.padding)/2,{paths:a,markers:c}=jB(this.root,this.data,this.size,s,0,this.markerSize);this.lines=a,this.markers=c,this.updateColors(i,n)}updateColors(t,i){this.lines.forEach((n,s)=>{const o=this.data[s].length;n.stroke=t[s];const a=s*o;this.markers.slice(a,a+o).forEach(p=>{p.stroke=i[s],p.fill=t[s]})})}}return r.chartType="radarLine",r})(),M$=(()=>{class r extends uy{constructor(t,i,n){super(t,"radarAreaTooltip"),this.data=[[8,10,5,7,4,1,5,8],[1,1,2,7,7,8,10,1],[4,5,9,9,4,2,3,4]],this.showRadiusAxisLine=!1;const s=(this.size-2*this.padding)/2;this.areas=jB(this.root,this.data,this.size,s,s-.3*this.size).paths,this.updateColors(i,n)}updateColors(t,i){this.areas.forEach((n,s)=>{n.fill=t[s],n.stroke=i[s]})}}return r.chartType="radarArea",r})(),x$=(()=>{class r extends uy{constructor(t,i,n){super(t,"nightingaleTooltip"),this.data=[[6,10,9,8,7,8],[4,6,5,4,5,5],[3,5,4,3,4,7]],this.showRadiusAxisLine=!1;const s=(this.size-2*this.padding)/2,o=new Ue.BandScale;o.domain=this.data[0].map((m,y)=>y),o.range=[-Math.PI,Math.PI],o.paddingInner=0,o.paddingOuter=0;const a=.7*o.bandwidth,{processedData:c,max:u}=qM(this.data),p=new Ue.LinearScale;p.domain=[0,u],p.range=[0,s];const g=this.size/2;this.series=c.map((m,y)=>{const b=y<0?void 0:c[y-1],_=new Ue.Group({zIndex:1e6}),E=m.map((D,R)=>{const O=b?.[R],L=p.convert(D),k=p.convert(O??0),U=o.convert(R),j=U+a,q=new Ue.Sector;return q.centerX=g,q.centerY=g,q.innerRadius=k,q.outerRadius=L,q.startAngle=U,q.endAngle=j,q.stroke=void 0,q.strokeWidth=0,q});return _.append(E),_}),this.root.append(this.series),this.updateColors(i,n)}updateColors(t,i){this.series.forEach((n,s)=>{var o;null===(o=n.children)||void 0===o||o.forEach(a=>{a.fill=t[s%t.length],a.stroke=i[s%i.length]})})}}return r.chartType="nightingale",r})(),P$=(()=>{class r extends Pr{constructor(t,i,n){super(t,"rangeBarTooltip"),this.bars=this.createRangeBar(this.root,[3,3.5,3],this.size,this.padding,"vertical"),this.updateColors(i,n)}updateColors(t,i){this.bars.forEach((n,s)=>{n.fill=t[s],n.stroke=i[s]})}createRangeBar(t,i,n,s,o){const a="horizontal"===o,c=2*s,u=new Ue.BandScale;u.domain=i.map((_,E)=>E),u.range=[s,n-s],u.paddingInner=.3,u.paddingOuter=.3;const m=new Ue.LinearScale;m.domain=[.7*i.reduce((_,E)=>Math.min(_,E),1/0),1.3*i.reduce((_,E)=>Math.max(_,E),0)],m.range=[c,n-c];const y=u.bandwidth,b=i.map((_,E)=>{const[D,R]=[.7*_,1.3*_],O=u.convert(E),L=m.convert(D),k=m.convert(R)-L,U=new Ue.Rect;return U.x=a?L:O,U.y=a?O:L,U.width=a?k:y,U.height=a?y:k,U.strokeWidth=0,U.crisp=!0,U});return t.append(b),b}}return r.chartType="rangeBar",r})(),I$=(()=>{class r extends Pr{constructor(t,i,n){super(t,"rangeAreaTooltip");const c=[oL({offset:1.5,length:4,pattern:{low:3,high:5,period:4}}),oL({offset:1.5,length:4,pattern:{low:2.25,high:4.25,period:4}}),oL({offset:3,length:4,pattern:{low:2.5,high:4.5,period:4}})].map(g=>g.map(([m,y])=>({x:m,low:y-.875,high:y+.875}))),{lines:u,areas:p}=this.createRangeArea(this.root,c,this.size,this.padding);this.lines=u,this.areas=p,this.updateColors(i,n)}updateColors(t,i){t=YB(t,1,2),i=YB(i,1,2),this.lines.forEach(([n,s],o)=>{n.fill=void 0,n.stroke=i[o],s.fill=void 0,s.stroke=i[o]}),this.areas.forEach((n,s)=>{n.fill=t[s]})}createRangeArea(t,i,n,s){const o=i.reduce((E,D)=>D.reduce((R,{x:O})=>Math.min(R,O),E),1/0),a=i.reduce((E,D)=>D.reduce((R,{x:O})=>Math.max(R,O),E),-1/0),c=i.reduce((E,D)=>D.reduce((R,{low:O})=>Math.min(R,O),E),1/0),u=i.reduce((E,D)=>D.reduce((R,{high:O})=>Math.max(R,O),E),-1/0),p=new Ue.LinearScale;p.domain=[o,a],p.range=[s,n-s];const g=2*s,m=new Ue.LinearScale;m.domain=[c,u],m.range=[n-g,g];const y=[],b=[];return i.map(E=>{const D=new Ue.Path,R=new Ue.Path,O=new Ue.Path;return y.push([D,R]),b.push(O),D.strokeWidth=0,R.strokeWidth=0,O.strokeWidth=0,O.fillOpacity=.8,D.path.clear(),R.path.clear(),O.path.clear(),E.map((L,k)=>{const{x:U,low:j,high:q}=L,J=p.convert(U),me=m.convert(j),ye=m.convert(q),Ae=k>0?"lineTo":"moveTo";return D.path[Ae](J,ye),R.path[Ae](J,me),O.path[Ae](J,ye),[J,me]})}).forEach((E,D)=>{const O=b[D];for(let L=E.length-1;L>=0;L--){const[k,U]=E[L];O.path.lineTo(k,U)}}),t.append(b.concat(...y)),{lines:y,areas:b}}}return r.chartType="rangeArea",r})();function oL(r){const{offset:e,length:t,pattern:i}=r,n=function a(p,g,m){const{period:y}=m,b=p/y,E=[0,.5].map(R=>R-b).map(KB).sort((R,O)=>R-O);return Array.from({length:Math.floor(E.length*(y/g))},(R,O)=>E[O%E.length]+Math.floor(O/E.length)).map(R=>R*y).map(R=>c(R,p,m))}(e,t,i),o=t;return(0===n.length||0!==n[0][0])&&n.unshift(c(0,e,i)),n[n.length-1][0]!==o&&n.push(c(o,e,i)),n;function c(p,g,m){return[p,u(g+p,m)]}function u(p,g){const{low:m,high:y,period:b}=g,_=KB(p/b);return m+(y-m)*(_>.5?1-2*(_-.5):2*_)}}function KB(r){const e=r%1;return e<0?e+1:e}function YB(r,e,t){const i=[...r],n=i[e];return i[e]=i[t],i[t]=n,i}let F$=(()=>{class r extends Pr{constructor(t,i,n,s,o){super(t,"boxPlotTooltip");const a=this.padding,c=this.size,u=[11,11.5,10.5],b=new Ue.LinearScale;b.domain=[.8*u.reduce((R,O)=>Math.min(R,O),1/0),1.2*u.reduce((R,O)=>Math.max(R,O),0)],b.range=[c-1.5*a,a];const _=new Ue.BandScale;_.domain=u.map((R,O)=>O),_.range=[a,c-a],_.paddingInner=.4,_.paddingOuter=.2;const E=Math.round(_.bandwidth),D=Math.round(_.bandwidth/2);this.boxPlotGroups=u.map((R,O)=>{let[L,k,U,j]=[.8*R,.9*R,1.1*R,1.2*R];const q=Math.round(b.convert(U)),J=Math.round(_.convert(O)),me=Math.round(J+E),ye=Math.round(b.convert(k)),Ae=Math.round(b.convert(L)),Pe=Math.round(b.convert(R)),Le=Math.round(b.convert(j)),Xe=J+D,Je=new Ue.Group,ht=new Ue.Rect,Dt=new Ue.Line,Ft=new Ue.Line,Mt=new Ue.Line,Nt=new Ue.Line,Ht=new Ue.Line;return ht.x=J,ht.y=q,ht.width=E,ht.height=ye-q,ht.strokeWidth=1,ht.strokeOpacity=.75,ht.crisp=!0,this.setLineProperties(Dt,J,me,Pe,Pe),this.setLineProperties(Ft,Xe,Xe,Le,q),this.setLineProperties(Mt,Xe,Xe,Ae,ye),this.setLineProperties(Nt,J,me,Le,Le),this.setLineProperties(Ht,J,me,Ae,Ae),Je.append([ht,Dt,Ft,Mt,Nt,Ht]),Je}),this.updateColors(i,n,s,o),this.root.append(this.boxPlotGroups)}updateColors(t,i,n,s){var o;const a=n?.properties.get(dd.DEFAULT_BACKGROUND_COLOUR),c=null!==(o=Array.isArray(a)?a[0]:a)&&void 0!==o?o:"white";this.boxPlotGroups.forEach((u,p)=>{var g;null===(g=u.children)||void 0===g||g.forEach(m=>{const y=t[p%t.length];m.fill=s?y:Gu.Color.interpolate(y,c)(.7),m.stroke=i[p%i.length]})})}setLineProperties(t,i,n,s,o){t.x1=i,t.x2=n,t.y1=s,t.y2=o,t.strokeOpacity=.75}}return r.chartType="boxPlot",r})(),N$=(()=>{class r extends fm{constructor(t,i,n,s,o){super(t,"treemapTooltip");const{size:a,padding:c}=this,u=[[1,1],[3,2,1]],g=u.length%2==0?.3:.2,m=[c,a-c],y=u.length,b=y*(y+1)/2,_=g/(y-1),E=m[1]-m[0],D=E-g;let R=m[0];this.rects=u.reduce((L,k,U)=>{L??(L=[]);const q=D*((y-U)/b),J=k.length,me=k.reduce((Xe,Je)=>Xe+Je,0),ye=g/(J-1||1),Ae=J>1?E-g:E;let Pe=m[0];const Le=k.map(Xe=>{const Je=new Ue.Rect,ht=Ae*Xe/me;return Je.x=R,Je.y=Pe,Je.width=q,Je.height=ht,Je.strokeWidth=.75,Je.crisp=!0,Pe+=ht+ye,Je});return R+=q+_,L.push(...Le),L},[]),this.updateColors(i,n,s,o);const O=new Ue.Group;O.setClipRectInGroupCoordinateSpace(new Ue.BBox(c,c,a-c,a-c)),O.append(this.rects),this.root.append(O)}updateColors(t,i,n,s){var o;const{properties:a}=n??{},c=a?.get(dd.DEFAULT_BACKGROUND_COLOUR),u=null!==(o=Array.isArray(c)?c[0]:c)&&void 0!==o?o:"white";this.rects.forEach((p,g)=>{p.fill=t[g%i.length],p.stroke=s?i[g%i.length]:u})}}return r.chartType="treemap",r})(),L$=(()=>{class r extends uy{constructor(t,i,n){super(t,"sunburstTooltip"),this.data=[[[],[]],[[],[]],[[],[]]],this.angleOffset=-Math.PI/2,this.innerRadiusRatio=0,this.showRadiusAxisLine=!1,this.showAngleAxisLines=!1;const{data:s,size:o,padding:a,angleOffset:c,innerRadiusRatio:u}=this,p=(o-2*a)/2,g=[c+0,c+2*Math.PI],m=Math.abs(g[1]-g[0]),y=[p*u,p],b=Math.abs(y[1]-y[0]);let _=0;const E=(k,U)=>{k.forEach(j=>{const q=U+1;_=Math.max(_,q),E(j,q)})};E(s,0);const D=b/_,R=this.size/2,O=g[0];this.series=[];const L=(k,U,j,q,J)=>{if(!Array.isArray(k))return;const ye=U+1;let Ae=j;k.forEach((Pe,Le,Xe)=>{let Je=J;Je||(Je=new Ue.Group,this.series.push(Je));const ht=y[0]+U*D,Dt=y[0]+ye*D,Mt=Ae,Nt=Mt+q*(1/Xe.length),Ht=new Ue.Sector;Ht.centerX=R,Ht.centerY=R,Ht.innerRadius=ht,Ht.outerRadius=Dt,Ht.startAngle=Mt,Ht.endAngle=Nt,Ht.stroke=void 0,Ht.strokeWidth=0,Ht.inset=.75,Ae=Nt,Je.append(Ht),L(Pe,ye,Mt,Math.abs(Nt-Mt),Je)})};L(s,0,O,m),this.root.append(this.series),this.updateColors(i,n)}updateColors(t,i){this.series.forEach((n,s)=>{var o;null===(o=n.children)||void 0===o||o.forEach(a=>{a.fill=t[s%t.length],a.stroke=i[s%i.length]})})}}return r.chartType="sunburst",r})(),k$=(()=>{class r extends fm{constructor(t,i,n,s,o){var a,c;super(t,"heatmapTooltip");const{size:u,padding:p}=this,m=Array.from({length:3},(O,L)=>Array.from({length:3},(k,U)=>U)),y=m.map((O,L)=>L),b=new Ue.BandScale;b.domain=y,b.range=[p,u-p],b.paddingInner=.01,b.paddingOuter=.1;const _=new Ue.BandScale;_.domain=y,_.range=[p,u-p],_.paddingInner=.01,_.paddingOuter=.1;const E=null!==(a=b.bandwidth)&&void 0!==a?a:0,D=null!==(c=_.bandwidth)&&void 0!==c?c:0;this.rects=m.reduce((O,L,k)=>{O??(O=[]);const U=L.map((j,q)=>{const J=new Ue.Rect;return J.x=b.convert(k),J.y=_.convert(q),J.width=E,J.height=D,J.strokeWidth=0,J.crisp=!0,J});return O.push(...U),O},[]),this.updateColors(i,n,s,o);const R=new Ue.Group;R.setClipRectInGroupCoordinateSpace(new Ue.BBox(p,p,u-p,u-p)),R.append(this.rects),this.root.append(R)}updateColors(t,i,n,s){var o;const{properties:a}=n??{},c=a?.get(dd.DEFAULT_DIVERGING_SERIES_COLOUR_RANGE),u=a?.get(dd.DEFAULT_BACKGROUND_COLOUR),p=null!==(o=Array.isArray(u)?u[0]:u)&&void 0!==o?o:"white",g=s?[t[0],t[1]]:c,m=s?i[0]:p;this.rects.forEach((y,b)=>{y.fill=Gu.Color.interpolate(g[0],g[1])(.2*b),y.stroke=m})}}return r.chartType="heatmap",r})(),G$=(()=>{class r extends Pr{constructor(t,i,n,s,o){super(t,"waterfallTooltip"),this.data=[4,3,-3,6,-3],this.bars=this.createWaterfall(this.root,this.data,this.size,this.padding,"vertical").bars,this.updateColors(i,n,s,o)}updateColors(t,i,n,s){var o,a;const{data:c}=this,{properties:u}=n??{},p={fill:t[0],stroke:i[0]},g={fill:t[1],stroke:i[1]},m=s?p:null!==(o=u?.get(dd.DEFAULT_WATERFALL_SERIES_POSITIVE_COLOURS))&&void 0!==o?o:p,y=s?g:null!==(a=u?.get(dd.DEFAULT_WATERFALL_SERIES_NEGATIVE_COLOURS))&&void 0!==a?a:g;this.bars.forEach((b,_)=>{const E=c[_]>=0;b.fill=E?m.fill:y.fill,b.stroke=E?m.stroke:y.stroke})}createWaterfall(t,i,n,s,o){const a=2*s,{processedData:c,min:u,max:p}=qM(i.map(L=>[L])),g=c.reduce((L,k)=>L.concat(k),[]),m=new Ue.LinearScale;m.domain=[Math.min(u,0),p],m.range=[n-a,a];const y=new Ue.BandScale;y.domain=i.map((L,k)=>k),y.range=[s,n-s],y.paddingInner=.2,y.paddingOuter=.3;const b=y.bandwidth,_=new Ue.Path;_.stroke="#575757",_.strokeWidth=0;const E=Math.floor(_.strokeWidth)%2/2,D=_.path;D.clear();const R="horizontal"===o,O=g.map((L,k)=>{const U=k>0?g[k-1]:0,q=i[k]>0,J=Math.round(m.convert(L)),me=Math.round(m.convert(U)),ye=(q?J:me)-E,Pe=Math.abs((q?me:J)+E-ye),Le=y.convert(k),Xe=new Ue.Rect;Xe.x=R?ye:Le,Xe.y=R?Le:ye,Xe.width=R?Pe:b,Xe.height=R?b:Pe,Xe.strokeWidth=0,Xe.crisp=!0;const Je=J+E,ht=me+E;return k>0&&D.lineTo(R?ht:Xe.x,R?Xe.y:ht),D.moveTo(R?Je:Xe.x,R?Xe.y:Je),Xe});return t.append([_,...O]),{bars:O}}}return r.chartType="waterfall",r})(),V$=(()=>{class r extends Pr{constructor(t,i,n){super(t,"columnLineComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:s,columnData:o,lineData:a,size:c,padding:u}=this;this.columns=mT({stacked:!1,root:s,data:o,size:c,padding:u,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(this.columns),this.lines=nL(s,a,c,u),this.updateColors(i,n)}updateColors(t,i){this.columns.forEach((n,s)=>{n.fill=t[s],n.stroke=i[s]}),this.lines.forEach((n,s)=>{n.stroke=t[s+2]})}}return r.chartType="columnLineCombo",r})(),B$=(()=>{class r extends Pr{constructor(t,i,n){super(t,"areaColumnComboTooltip"),this.columnData=[3,4.5],this.areaData=[[5,4,6,5,4]];const{root:s,columnData:o,areaData:a,size:c,padding:u}=this;this.columns=mT({stacked:!1,root:s,data:o,size:c,padding:u,xScaleDomain:[0,1],yScaleDomain:[0,6],xScalePadding:.5});const p=new Ue.BandScale;p.range=[u,c-u],p.domain=[0,1,2,3,4],p.paddingInner=1,p.paddingOuter=0;const g=new Ue.LinearScale;g.range=[c-u,u],g.domain=[0,6];const m=[],y=g.convert(0),b=p.convert(0);a.forEach((_,E)=>{const D=m[E]||(m[E]=[]);_.forEach((O,L)=>{const k=O,j=p.convert(L),q=g.convert(k);D[L]={x:j,y:q}});const R=p.convert(_.length-1);m[E].push({x:R,y},{x:b,y})}),this.areas=m.map(_=>{const E=new Ue.Path;E.strokeWidth=0,E.fillOpacity=.8;const D=E.path;return _.forEach((R,O)=>D[O>0?"lineTo":"moveTo"](R.x,R.y)),E}),s.append(this.areas),s.append([].concat.apply([],this.columns)),this.updateColors(i,n)}updateColors(t,i){this.areas.forEach((n,s)=>{n.fill=t[s],n.stroke=i[s]}),this.columns.forEach((n,s)=>{n.fill=t[s+1],n.stroke=i[s+1]})}}return r.chartType="areaColumnCombo",r})(),H$=(()=>{class r extends fm{constructor(t,i,n){super(t,"customComboTooltip"),this.columnData=[3,4],this.lineData=[[5,4,6,5,4]];const{root:s,columnData:o,lineData:a,size:c,padding:u}=this;this.columns=mT({stacked:!1,root:s,data:o,size:c,padding:u,xScaleDomain:[0,1],yScaleDomain:[0,4],xScalePadding:.5}),s.append(this.columns),this.lines=nL(s,a,c,u);const p="grey",m=new Ue.Line;m.x1=u,m.y1=u,m.x2=u,m.y2=c-u+3,m.stroke=p;const y=new Ue.Line;y.x1=u-3+1,y.y1=c-u,y.x2=c-u+1,y.y2=c-u,y.stroke=p;const b=new Ue.Path;this.buildPenIconPath(b),b.fill="whitesmoke",b.stroke="darkslategrey",b.strokeWidth=1,s.append([y,m,b]),this.updateColors(i,n)}updateColors(t,i){this.columns.forEach((n,s)=>{n.fill=t[s],n.stroke=i[s]}),this.lines.forEach((n,s)=>{n.stroke=t[s+2]})}buildPenIconPath(t){const{path:i}=t;i.moveTo(25.76,43.46),i.lineTo(31.27,48.53),i.moveTo(49.86,22),i.lineTo(49.86,22),i.cubicCurveTo(49.01994659053345,21.317514933510974,47.89593834348529,21.09645997825817,46.86,21.41),i.lineTo(46.86,21.41),i.cubicCurveTo(45.55460035985361,21.77260167850787,44.38777081121966,22.517979360321792,43.51,23.55),i.lineTo(25.51,43.8),i.lineTo(25.43,43.89),i.lineTo(23.01,51.89),i.lineTo(22.83,52.46),i.lineTo(31.02,48.86),i.lineTo(49.02,28.52),i.lineTo(49.02,28.52),i.cubicCurveTo(49.940716461596224,27.521914221246085,50.54302631059587,26.2720342455763,50.75,24.93),i.lineTo(50.75,24.93),i.cubicCurveTo(50.95363374988308,23.866379846512814,50.62080640232334,22.77066734274871,49.86,22),i.closePath(),i.moveTo(41.76,25.5),i.lineTo(47.34,30.5),i.moveTo(40.74,26.65),i.lineTo(46.25,31.71)}}return r.chartType="customCombo",r})();var qB=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};const XB={columnGroup:{column:{range:!0,pivot:!0,enterprise:!1,icon:m$},stackedColumn:{range:!0,pivot:!0,enterprise:!1,icon:zB},normalizedColumn:{range:!0,pivot:!0,enterprise:!1,icon:v$}},barGroup:{bar:{range:!0,pivot:!0,enterprise:!1,icon:C$},stackedBar:{range:!0,pivot:!0,enterprise:!1,icon:$B},normalizedBar:{range:!0,pivot:!0,enterprise:!1,icon:y$}},pieGroup:{pie:{range:!0,pivot:!0,enterprise:!1,icon:S$},donut:{range:!0,pivot:!0,enterprise:!1,icon:sL},doughnut:{range:!0,pivot:!0,enterprise:!1,icon:sL}},lineGroup:{line:{range:!0,pivot:!0,enterprise:!1,icon:b$}},scatterGroup:{scatter:{range:!0,pivot:!0,enterprise:!1,icon:_$},bubble:{range:!0,pivot:!0,enterprise:!1,icon:w$}},areaGroup:{area:{range:!0,pivot:!0,enterprise:!1,icon:E$},stackedArea:{range:!0,pivot:!0,enterprise:!1,icon:rL},normalizedArea:{range:!0,pivot:!0,enterprise:!1,icon:vT}},polarGroup:{radarLine:{range:!0,pivot:!1,enterprise:!0,icon:O$},radarArea:{range:!0,pivot:!1,enterprise:!0,icon:M$},nightingale:{range:!0,pivot:!1,enterprise:!0,icon:x$},radialColumn:{range:!0,pivot:!1,enterprise:!0,icon:R$},radialBar:{range:!0,pivot:!1,enterprise:!0,icon:A$}},statisticalGroup:{boxPlot:{range:!0,pivot:!1,enterprise:!0,icon:F$},histogram:{range:!0,pivot:!1,enterprise:!1,icon:D$},rangeBar:{range:!0,pivot:!1,enterprise:!0,icon:P$},rangeArea:{range:!0,pivot:!1,enterprise:!0,icon:I$}},hierarchicalGroup:{treemap:{range:!0,pivot:!0,enterprise:!0,icon:N$},sunburst:{range:!0,pivot:!0,enterprise:!0,icon:L$}},specializedGroup:{heatmap:{range:!0,pivot:!1,enterprise:!0,icon:k$},waterfall:{range:!0,pivot:!1,enterprise:!0,icon:G$}},combinationGroup:{columnLineCombo:{range:!0,pivot:!0,enterprise:!1,icon:V$},areaColumnCombo:{range:!0,pivot:!0,enterprise:!1,icon:B$},customCombo:{range:!0,pivot:!0,enterprise:!1,icon:H$}}};class q_ extends Ne{constructor(e,t,i,n,s,o=aI){super(q_.TEMPLATE),this.wrappers={},this.chartController=e,this.fills=t,this.strokes=i,this.themeTemplateParameters=n,this.isCustomTheme=s,this.chartGroups=Object.assign({},o)}init(){const e=this.getGui(),t=this.chartController.isEnterprise(),i=this.chartController.isPivotChart(),n=!i,s=Object.keys(this.chartGroups).map(o=>{var a;const c=o in XB?XB[o]:void 0;if(!c)return z.warnOnce(`invalid chartGroupsDef config '${o}'`),null;const p=(null!==(a=this.chartGroups[o])&&void 0!==a?a:[]).map(g=>{const m=g in c?c[g]:void 0;return m?!t&&m.enterprise?null:n&&m.range||i&&m.pivot?m:null:(z.warnOnce(`invalid chartGroupsDef config '${o}.${g}'`),null)}).filter(g=>null!=g);return 0===p.length?null:{label:this.chartTranslationService.translate(o),items:p}}).filter(o=>null!=o);for(const{label:o,items:a}of s){const c=this.createBean(new ln({title:o,suppressEnabledCheckbox:!0,enabled:!0,suppressOpenCloseIcons:!0,cssIdentifier:"charts-settings",direction:"horizontal"}));for(const u of a){const p=u.icon,g=document.createElement("div");g.classList.add("ag-chart-mini-thumbnail");const m=p.chartType;this.addManagedListener(g,"click",()=>{this.chartController.setChartType(m),this.updateSelectedMiniChart()}),this.wrappers[m]=g,this.createBean(new p(g,this.fills,this.strokes,this.themeTemplateParameters,this.isCustomTheme)),c.addItem(g)}e.appendChild(c.getGui())}!this.chartController.customComboExists()&&this.chartGroups.combinationGroup&&(this.chartGroups.combinationGroup=this.chartGroups.combinationGroup.filter(o=>"customCombo"!==o)),this.updateSelectedMiniChart()}updateSelectedMiniChart(){const e=this.chartController.getChartType();for(const t in this.wrappers)this.wrappers[t].classList.toggle("ag-selected",t===e)}}q_.TEMPLATE='<div class="ag-chart-settings-mini-wrapper"></div>',qB([P("chartTranslationService")],q_.prototype,"chartTranslationService",void 0),qB([Se],q_.prototype,"init",null);var hy=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class md extends Ne{constructor(e){super(md.TEMPLATE),this.miniChartsContainers=[],this.cardItems=[],this.activePaletteIndex=0,this.palettes=[],this.themes=[],this.chartController=e}postConstruct(){this.resetPalettes(),this.ePrevBtn.insertAdjacentElement("afterbegin",z.createIconNoSpan("previous",this.gridOptionsService)),this.eNextBtn.insertAdjacentElement("afterbegin",z.createIconNoSpan("next",this.gridOptionsService)),this.addManagedListener(this.ePrevBtn,"click",()=>this.setActivePalette(this.getPrev(),"left")),this.addManagedListener(this.eNextBtn,"click",()=>this.setActivePalette(this.getNext(),"right")),this.addManagedListener(this.chartController,mn.EVENT_CHART_TYPE_CHANGED,()=>this.resetPalettes(!0)),this.addManagedListener(this.chartController,mn.EVENT_CHART_API_UPDATE,()=>this.resetPalettes(!0)),this.scrollSelectedIntoView()}scrollSelectedIntoView(){setTimeout(()=>{const i=this.miniChartsContainers.find(n=>!n.getGui().classList.contains("ag-hidden")).getGui().querySelector(".ag-selected");if(i){const n=i.offsetParent;n&&this.eMiniChartsContainer.scrollTo(0,n.offsetTop)}},250)}resetPalettes(e){var t,i;const n=this.chartController.getPalettes(),s=this.chartController.getThemeTemplateParameters(),o=null===(i=null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.settingsPanel)||void 0===i?void 0:i.chartGroupsDef;if(z.shallowCompare(n,this.palettes)&&!e||this.isAnimating)return;this.palettes=n,this.themes=this.chartController.getThemeNames(),this.activePaletteIndex=this.themes.findIndex(c=>c===this.chartController.getChartThemeName()),this.cardItems=[],z.clearElement(this.eCardSelector),this.destroyMiniCharts();const{themes:a}=this;this.palettes.forEach((c,u)=>{const p=this.activePaletteIndex===u,{fills:g,strokes:m}=c,b=!ZN(a[u]),_=this.createBean(new q_(this.chartController,g,m,s[u],b,o));this.miniChartsContainers.push(_),this.eMiniChartsContainer.appendChild(_.getGui()),this.addCardLink(u),p?_.updateSelectedMiniChart():_.setDisplayed(!1)}),z.setDisplayed(this.eNavBar,this.palettes.length>1),z.radioCssClass(this.cardItems[this.activePaletteIndex],"ag-selected","ag-not-selected")}addCardLink(e){const t=document.createElement("div");t.classList.add("ag-chart-settings-card-item"),this.addManagedListener(t,"click",()=>{this.setActivePalette(e,e<this.activePaletteIndex?"left":"right")}),this.eCardSelector.appendChild(t),this.cardItems.push(t)}getPrev(){let e=this.activePaletteIndex-1;return e<0&&(e=this.palettes.length-1),e}getNext(){let e=this.activePaletteIndex+1;return e>=this.palettes.length&&(e=0),e}setActivePalette(e,t){if(this.isAnimating||this.activePaletteIndex===e)return;z.radioCssClass(this.cardItems[e],"ag-selected","ag-not-selected");const i=this.miniChartsContainers[this.activePaletteIndex],n=i.getGui(),s=this.miniChartsContainers[e],o=s.getGui();i.updateSelectedMiniChart(),s.updateSelectedMiniChart();const a="left"===t?-1:1,c=o.style.left=z.getAbsoluteWidth(this.getGui())*a+"px";this.activePaletteIndex=e,this.isAnimating=!0;const u="ag-animating";s.setDisplayed(!0),i.addCssClass(u),s.addCssClass(u),this.chartController.setChartThemeName(this.themes[e]),window.setTimeout(()=>{n.style.left=-parseFloat(c)+"px",o.style.left="0px"},0),window.setTimeout(()=>{this.isAnimating=!1,i.removeCssClass(u),s.removeCssClass(u),i.setDisplayed(!1)},300)}destroyMiniCharts(){z.clearElement(this.eMiniChartsContainer),this.miniChartsContainers=this.destroyBeans(this.miniChartsContainers)}destroy(){this.destroyMiniCharts(),super.destroy()}}md.TEMPLATE='<div class="ag-chart-settings-wrapper">\n            <div ref="eMiniChartsContainer" class="ag-chart-settings-mini-charts-container ag-scrollable-container"></div>\n            <div ref="eNavBar" class="ag-chart-settings-nav-bar">\n                <div ref="ePrevBtn" class="ag-chart-settings-prev">\n                    <button type="button" class="ag-button ag-chart-settings-prev-button"></button>\n                </div>\n                <div ref="eCardSelector" class="ag-chart-settings-card-selector"></div>\n                <div ref="eNextBtn" class="ag-chart-settings-next">\n                    <button type="button" class="ag-button ag-chart-settings-next-button"></button>\n                </div>\n            </div>\n        </div>',hy([P("resizeObserverService")],md.prototype,"resizeObserverService",void 0),hy([re("eMiniChartsContainer")],md.prototype,"eMiniChartsContainer",void 0),hy([re("eNavBar")],md.prototype,"eNavBar",void 0),hy([re("eCardSelector")],md.prototype,"eCardSelector",void 0),hy([re("ePrevBtn")],md.prototype,"ePrevBtn",void 0),hy([re("eNextBtn")],md.prototype,"eNextBtn",void 0),hy([Se],md.prototype,"postConstruct",null);var ZB=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class gm extends Ne{constructor(e){super(),this.tabs=[];const{controller:t,panels:i,chartOptionsService:n}=e;this.chartController=t,this.chartOptionsService=n,this.panels=i}init(){this.panels.forEach(e=>{const t=e.replace("chart","").toLowerCase(),{comp:i,tab:n}=this.createTab(e,t,this.getPanelClass(t));this.tabs.push(n),this.addDestroyFunc(()=>this.destroyBean(i))}),this.tabbedLayout=new Nc({items:this.tabs,cssClass:"ag-chart-tabbed-menu",keepScrollPosition:!0}),this.getContext().createBean(this.tabbedLayout)}createTab(e,t,i){const n=document.createElement("div");n.classList.add("ag-chart-tab",`ag-chart-${t}`);const s=new i(this.chartController,this.chartOptionsService);this.getContext().createBean(s),n.appendChild(s.getGui());const o=document.createElement("div"),a=this.chartTranslationService.translate(t);return o.innerText=a,{comp:s,tab:{title:o,titleLabel:a,bodyPromise:$t.resolve(n),getScrollableContainer:()=>n.querySelector(".ag-scrollable-container")||n,name:e}}}showTab(e){this.tabbedLayout.showItem(this.tabs[e])}getGui(){return this.tabbedLayout&&this.tabbedLayout.getGui()}destroy(){this.parentComponent&&this.parentComponent.isAlive()&&this.destroyBean(this.parentComponent),super.destroy()}getPanelClass(e){switch(e){case gm.TAB_DATA:return ny;case gm.TAB_FORMAT:return gT;default:return md}}}gm.TAB_DATA="data",gm.TAB_FORMAT="format",ZB([P("chartTranslationService")],gm.prototype,"chartTranslationService",void 0),ZB([Se],gm.prototype,"init",null);var CT=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class lc extends Ne{constructor(e,t,i,n){super(lc.TEMPLATE),this.eChartContainer=e,this.eMenuPanelContainer=t,this.chartController=i,this.chartOptionsService=n,this.buttons={chartSettings:["menu",()=>this.showMenu(this.defaultPanel)],chartData:["menu",()=>this.showMenu("chartData")],chartFormat:["menu",()=>this.showMenu("chartFormat")],chartLink:["linked",s=>this.toggleDetached(s)],chartUnlink:["unlinked",s=>this.toggleDetached(s)],chartDownload:["save",()=>this.saveChart()]},this.panels=[],this.buttonListenersDestroyFuncs=[],this.menuVisible=!1}postConstruct(){this.createButtons(),this.addManagedListener(this.eventService,G.EVENT_CHART_CREATED,e=>{var t;e.chartId===this.chartController.getChartId()&&Boolean(null===(t=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===t?void 0:t.defaultToolPanel)&&this.showMenu(this.defaultPanel,!1)}),this.refreshMenuClasses(),!this.gridOptionsService.get("suppressChartToolPanelsButton")&&this.panels.length>0&&(this.getGui().classList.add("ag-chart-tool-panel-button-enable"),this.addManagedListener(this.eHideButton,"click",this.toggleMenu.bind(this))),this.addManagedListener(this.chartController,mn.EVENT_CHART_API_UPDATE,this.createButtons.bind(this))}isVisible(){return this.menuVisible}getExtraPaddingDirections(){const i=[];return["chartLink","chartUnlink","chartDownload"].some(n=>this.chartToolbarOptions.includes(n))&&i.push("top"),["chartSettings","chartData","chartFormat"].some(n=>this.chartToolbarOptions.includes(n))&&i.push(this.gridOptionsService.get("enableRtl")?"left":"right"),i}getToolbarOptions(){var e,t,i;if(Boolean(this.gridOptionsService.get("chartToolPanelsDef"))){const s=[this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"],o=this.gridOptionsService.getCallback("getChartToolbarItems");let c=o?o({defaultItems:s}).filter(g=>{if(!N0.includes(g)){const m=xb.includes(g)?`AG Grid: '${g}' is a Chart Tool Panel option and will be ignored since 'chartToolPanelsDef' is used. Please use 'chartToolPanelsDef.panels' grid option instead`:`AG Grid: '${g}' is not a valid Chart Toolbar Option`;return console.warn(m),!1}return!0}):s;const u=null===(t=null===(e=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===e?void 0:e.panels)||void 0===t?void 0:t.map(g=>{const m=Pb[g];return m||console.warn(`AG Grid - invalid panel in chartToolPanelsDef.panels: '${g}'`),m}).filter(g=>Boolean(g));this.panels=u||Object.values(Pb),this.chartController.isPivotChart()&&(this.panels=this.panels.filter(g=>"chartData"!==g));const p=null===(i=this.gridOptionsService.get("chartToolPanelsDef"))||void 0===i?void 0:i.defaultToolPanel;return this.defaultPanel=p&&Pb[p]||this.panels[0],this.panels.length>0?[this.panels[0],...c]:c}{let s=["chartSettings","chartData","chartFormat",this.chartController.isChartLinked()?"chartLink":"chartUnlink","chartDownload"];const o=this.gridOptionsService.getCallback("getChartToolbarItems");if(o){const c=this.gridOptionsService.get("suppressChartToolPanelsButton");s=o({defaultItems:c?s:N0}).filter(p=>this.buttons[p]?!(!c&&xb.includes(p))||(console.warn(`AG Grid: '${p}' is a Chart Tool Panel option and will be ignored. Please use 'chartToolPanelsDef.panels' grid option instead`),!1):(console.warn(`AG Grid: '${p}' is not a valid Chart Toolbar Option`),!1)),c||(s=s.concat(xb))}this.chartController.isPivotChart()&&(s=s.filter(c=>"chartData"!==c));const a=["chartUnlink","chartLink","chartDownload"];return this.panels=s.filter(c=>-1===a.indexOf(c)),this.defaultPanel=this.panels[0],s.filter(c=>-1!==a.indexOf(c)||this.panels.length&&c===this.panels[0])}}toggleDetached(e){const t=e.target,i=t.classList.contains("ag-icon-linked");t.classList.toggle("ag-icon-linked",!i),t.classList.toggle("ag-icon-unlinked",i);const s=this.chartTranslationService.translate(i?"chartUnlinkToolbarTooltip":"chartLinkToolbarTooltip");s&&(t.title=s),this.chartController.detachChartRange()}createButtons(){this.buttonListenersDestroyFuncs.forEach(t=>t()),this.buttonListenersDestroyFuncs=[],this.chartToolbarOptions=this.getToolbarOptions();const e=this.eMenu;z.clearElement(e),this.chartToolbarOptions.forEach(t=>{const i=this.buttons[t],[n,s]=i,o=z.createIconNoSpan(n,this.gridOptionsService,void 0,!0);o.classList.add("ag-chart-menu-icon");const a=this.chartTranslationService.translate(t+"ToolbarTooltip");a&&o instanceof HTMLElement&&(o.title=a),this.buttonListenersDestroyFuncs.push(this.addManagedListener(o,"click",s)),e.appendChild(o)})}saveChart(){this.dispatchEvent({type:lc.EVENT_DOWNLOAD_CHART})}createMenuPanel(e){const t=this.environment.chartMenuPanelWidth(),i=this.menuPanel=this.createBean(new Xo({minWidth:t,width:t,height:"100%",closable:!0,hideTitleBar:!0,cssIdentifier:"chart-menu"}));return i.setParentComponent(this),this.eMenuPanelContainer.appendChild(i.getGui()),this.tabbedMenu=this.createBean(new gm({controller:this.chartController,type:this.chartController.getChartType(),panels:this.panels,chartOptionsService:this.chartOptionsService})),this.addManagedListener(i,Ne.EVENT_DESTROYED,()=>this.destroyBean(this.tabbedMenu)),new $t(n=>{window.setTimeout(()=>{i.setBodyComponent(this.tabbedMenu),this.tabbedMenu.showTab(e),n(i),this.addManagedListener(this.eChartContainer,"click",s=>{this.getGui().contains(s.target)||this.menuVisible&&this.hideMenu()})},100)})}showContainer(){!this.menuPanel||(this.menuVisible=!0,this.showParent(this.menuPanel.getWidth()),this.refreshMenuClasses())}toggleMenu(){this.menuVisible?this.hideMenu():this.showMenu()}showMenu(e,t=!0){if(t||this.eMenuPanelContainer.classList.add("ag-no-transition"),this.menuPanel&&!e)this.showContainer();else{let n=this.panels.indexOf(e||this.defaultPanel);n<0&&(console.warn(`AG Grid: '${e}' is not a valid Chart Tool Panel name`),n=this.panels.indexOf(this.defaultPanel)),this.menuPanel?(this.tabbedMenu.showTab(n),this.showContainer()):this.createMenuPanel(n).then(this.showContainer.bind(this))}t||setTimeout(()=>{!this.isAlive()||this.eMenuPanelContainer.classList.remove("ag-no-transition")},500)}hideMenu(){this.hideParent(),window.setTimeout(()=>{this.menuVisible=!1,this.refreshMenuClasses()},500)}refreshMenuClasses(){this.eChartContainer.classList.toggle("ag-chart-menu-visible",this.menuVisible),this.eChartContainer.classList.toggle("ag-chart-menu-hidden",!this.menuVisible),this.gridOptionsService.get("suppressChartToolPanelsButton")||(this.eHideButtonIcon.classList.toggle("ag-icon-contracted",this.menuVisible),this.eHideButtonIcon.classList.toggle("ag-icon-expanded",!this.menuVisible))}showParent(e){this.eMenuPanelContainer.style.minWidth=`${e}px`}hideParent(){this.eMenuPanelContainer.style.minWidth="0"}destroy(){super.destroy(),this.menuPanel&&this.menuPanel.isAlive()&&this.destroyBean(this.menuPanel),this.tabbedMenu&&this.tabbedMenu.isAlive()&&this.destroyBean(this.tabbedMenu)}}lc.EVENT_DOWNLOAD_CHART="downloadChart",lc.TEMPLATE='<div>\n        <div class="ag-chart-menu" ref="eMenu"></div>\n        <button class="ag-button ag-chart-menu-close" ref="eHideButton">\n            <span class="ag-icon ag-icon-contracted" ref="eHideButtonIcon"></span>\n        </button>\n    </div>',CT([P("chartTranslationService")],lc.prototype,"chartTranslationService",void 0),CT([re("eMenu")],lc.prototype,"eMenu",void 0),CT([re("eHideButton")],lc.prototype,"eHideButton",void 0),CT([re("eHideButtonIcon")],lc.prototype,"eHideButtonIcon",void 0),CT([Se],lc.prototype,"postConstruct",null);var JB=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class X_ extends Ne{constructor(e){super(X_.TEMPLATE),this.chartMenu=e,this.destroyableChartListeners=[],this.editing=!1}init(){this.addManagedListener(this.getGui(),"keydown",e=>{this.editing&&"Enter"===e.key&&!e.shiftKey&&(this.handleEndEditing(),e.preventDefault())}),this.addManagedListener(this.getGui(),"input",()=>{this.editing&&this.updateHeight()}),this.addManagedListener(this.getGui(),"blur",()=>this.endEditing())}refreshTitle(e,t){this.chartController=e,this.chartOptionsService=t;for(const u of this.destroyableChartListeners)u();this.destroyableChartListeners=[];const n=this.chartController.getChartProxy().getChart(),s=n.scene.canvas.element,o=this.addManagedListener(s,"dblclick",u=>{const{title:p}=n;if(p&&p.node.containsPoint(u.offsetX,u.offsetY)){const g=p.node.computeBBox(),m=p.node.inverseTransformPoint(g.x,g.y);this.startEditing(Object.assign(Object.assign({},g),m),s.width)}});let a=!1;const c=this.addManagedListener(s,"mousemove",u=>{const{title:p}=n,g=!!(p&&p.enabled&&p.node.containsPoint(u.offsetX,u.offsetY));a!==g&&(s.style.cursor=g?"pointer":""),a=g});this.destroyableChartListeners=[o,c]}startEditing(e,t){if(this.chartMenu&&this.chartMenu.isVisible()||this.editing)return;this.editing=!0;const n=Math.max(Math.min(e.width+20,t),300),s=this.getGui();s.classList.add("currently-editing");const o=s.style;o.fontFamily=this.chartOptionsService.getChartOption("title.fontFamily"),o.fontWeight=this.chartOptionsService.getChartOption("title.fontWeight"),o.fontStyle=this.chartOptionsService.getChartOption("title.fontStyle"),o.fontSize=this.chartOptionsService.getChartOption("title.fontSize")+"px",o.color=this.chartOptionsService.getChartOption("title.color");const a=this.chartOptionsService.getChartOption("title.text"),c=a===this.chartTranslationService.translate("titlePlaceholder");s.value=c?"":a;const u=a.split(/\r?\n/g).length;o.left=Math.round(e.x+e.width/2-n/2-1)+"px",o.top=Math.round(e.y+e.height/2-u*this.getLineHeight()/2-2)+"px",o.width=Math.round(n)+"px",o.lineHeight=this.getLineHeight()+"px",this.updateHeight(),s.focus()}updateHeight(){const e=this.getGui(),t=this.chartOptionsService.getChartOption("title.text").split(/\r?\n/g).length,i=e.value.split(/\r?\n/g).length;e.style.height=Math.round(Math.max(t,i)*this.getLineHeight())+4+"px"}getLineHeight(){const e=this.chartOptionsService.getChartOption("title.lineHeight");return e?parseInt(e):Math.round(1.2*parseInt(this.chartOptionsService.getChartOption("title.fontSize")))}handleEndEditing(){const e=this.chartOptionsService.getChartOption("title.color");this.chartOptionsService.setChartOption("title.color","rgba(0, 0, 0, 0)"),this.chartOptionsService.awaitChartOptionUpdate(()=>this.endEditing()),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.chartOptionsService.setChartOption("title.color",e)})}endEditing(){if(!this.editing)return;this.editing=!1;const e=this.getGui().value;e&&""!==e.trim()?(this.chartOptionsService.setChartOption("title.text",e),this.chartOptionsService.setChartOption("title.enabled",!0)):(this.chartOptionsService.setChartOption("title.text",""),this.chartOptionsService.setChartOption("title.enabled",!1)),this.getGui().classList.remove("currently-editing"),this.chartOptionsService.awaitChartOptionUpdate(()=>{this.eventService.dispatchEvent({type:"chartTitleEdit"})})}}X_.TEMPLATE='<textarea\n             class="ag-chart-title-edit"\n             style="padding:0; border:none; border-radius: 0; min-height: 0; text-align: center; resize: none;" />\n        ',JB([P("chartTranslationService")],X_.prototype,"chartTranslationService",void 0),JB([Se],X_.prototype,"init",null);var Z_=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Lp extends Ee{getData(e){if(e.crossFiltering){if(e.grouping)return console.warn("AG Grid: crossing filtering with row grouping is not supported."),{chartData:[],columnNames:{}};if(!this.gridOptionsService.isRowModelType("clientSide"))return console.warn("AG Grid: crossing filtering is only supported in the client side row model."),{chartData:[],columnNames:{}}}this.gridOptionsService.isRowModelType("serverSide")&&e.pivoting&&this.updatePivotKeysForSSRM();const i=this.extractRowsFromGridRowModel(e);return i.chartData=this.aggregateRowsByDimension(e,i.chartData),i}extractRowsFromGridRowModel(e){let t=[];const i={},n={},s={};let c,o={},a=[];if(e.crossFiltering)o=this.getFilteredRowNodes(),a=this.getAllRowNodes(),c=a.length;else{const u=this.gridRowModel.getRowCount()-1;c=(e.endRow>=0?Math.min(e.endRow,u):u)-e.startRow+1}for(let u=0;u<c;u++){const p={},g=e.crossFiltering?a[u]:this.gridRowModel.getRow(u+e.startRow);e.dimensionCols.forEach(m=>{const y=m.colId,b=this.columnModel.getGridColumn(y);if(b){const _=this.valueService.getValue(b,g);if(e.grouping){const E=_&&_.toString?String(_.toString()):"",D=Lp.getGroupLabels(g,E);p[y]={labels:D,toString:function(){return this.labels.filter(O=>!!O).reverse().join(" - ")}},g.group&&(n[D.toString()]=u);const R=D.slice(1,D.length).toString();R&&(s[R]=n[R])}else p[y]=_}else p[cc.DEFAULT_CATEGORY]=u+1}),e.valueCols.forEach(m=>{let y=[];const b=m.getColDef().pivotKeys;b&&(y=b.slice());const _=m.getColDef().headerName;_&&y.push(_),y.length>0&&(i[m.getId()]=y);const E=m.getColId();if(e.crossFiltering){const D=E+"-filtered-out",R=this.valueService.getValue(m,g),O=null!=R&&"function"==typeof R.toNumber?R.toNumber():R;o[g.id]?(p[E]=O,p[D]=e.aggFunc||e.isScatter?void 0:0):(p[E]=e.aggFunc||e.isScatter?void 0:0,p[D]=O)}else{let D=this.valueService.getValue(m,g);D&&D.hasOwnProperty("toString")&&(D=parseFloat(D.toString())),p[E]=null!=D&&"function"==typeof D.toNumber?D.toNumber():D}}),g.footer&&(p.footer=!0),t.push(p)}if(e.grouping){const u=z.values(s);t=t.filter((g,m)=>!g.footer&&!z.includes(u,m))}return{chartData:t,columnNames:i}}aggregateRowsByDimension(e,t){const i=e.dimensionCols;if(!e.aggFunc||0===i.length)return t;const n=z.last(i),s=n&&n.colId,o={},a=[];return t.forEach(c=>{let u=o;i.forEach(p=>{const g=p.colId,m=c[g];if(g===s){let y=u[m];y||(y={__children:[]},i.forEach(b=>{const _=b.colId;y[_]=c[_]}),u[m]=y,a.push(y)),y.__children.push(c)}else u[m]||(u[m]={}),u=u[m]})}),yt.__assertRegistered(ze.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&a.forEach(c=>e.valueCols.forEach(u=>{if(e.crossFiltering)e.valueCols.forEach(p=>{const g=p.getColId(),m=c.__children.filter(D=>typeof D[g]<"u").map(D=>D[g]);let y=this.aggregationStage.aggregateValues(m,e.aggFunc);c[p.getId()]=y&&typeof y.value<"u"?y.value:y;const b=`${g}-filtered-out`,_=c.__children.filter(D=>typeof D[b]<"u").map(D=>D[b]);let E=this.aggregationStage.aggregateValues(_,e.aggFunc);c[b]=E&&typeof E.value<"u"?E.value:E});else{const p=c.__children.map(m=>m[u.getId()]);let g=0;yt.__assertRegistered(ze.RowGroupingModule,"Charting Aggregation",this.context.getGridId())&&(g=this.aggregationStage.aggregateValues(p,e.aggFunc)),c[u.getId()]=g&&typeof g.value<"u"?g.value:g}})),a}updatePivotKeysForSSRM(){const e=this.columnModel.getSecondaryColumns();if(!e)return;const t=this.extractPivotKeySeparator(e);e.forEach(i=>{if(""===t)i.getColDef().pivotKeys=[];else{const n=i.getColId().split(t);i.getColDef().pivotKeys=n.slice(0,n.length-1)}})}extractPivotKeySeparator(e){if(0===e.length)return"";const t=(n,s)=>{const o=n.getGroupId();return n.getParent()?t(n.getParent(),o):s.split(o)[1][0]},i=e[0];return null==i.getParent()?"":t(i.getParent(),i.getColId())}static getGroupLabels(e,t){const i=[t];for(;e&&0!==e.level;)(e=e.parent)&&i.push(e.key);return i}getFilteredRowNodes(){const e={};return this.gridRowModel.forEachNodeAfterFilterAndSort(t=>{e[t.id]=t}),e}getAllRowNodes(){let e=[];return this.gridRowModel.forEachNode(t=>{e.push(t)}),this.sortRowNodes(e)}sortRowNodes(e){const t=this.sortController.getSortOptions();return t&&0!=t.length?this.rowNodeSorter.doFullSort(e,t):e}}Z_([P("rowModel")],Lp.prototype,"gridRowModel",void 0),Z_([P("valueService")],Lp.prototype,"valueService",void 0),Z_([P("columnModel")],Lp.prototype,"columnModel",void 0),Z_([P("rowNodeSorter")],Lp.prototype,"rowNodeSorter",void 0),Z_([P("sortController")],Lp.prototype,"sortController",void 0),Z_([Pt("aggregationStage")],Lp.prototype,"aggregationStage",void 0);var XM=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let J_=class extends Ee{getColumn(e){return this.columnModel.getPrimaryColumn(e)}getAllDisplayedColumns(){return this.columnModel.getAllDisplayedColumns()}getColDisplayName(e){return this.columnModel.getDisplayNameForColumn(e,"chart")}getRowGroupColumns(){return this.columnModel.getRowGroupColumns()}getGroupDisplayColumns(){return this.columnModel.getGroupDisplayColumns()}isPivotMode(){return this.columnModel.isPivotMode()}isPivotActive(){return this.columnModel.isPivotActive()}getChartColumns(){const e=this.columnModel.getAllDisplayedColumns(),t=new Set,i=new Set;return e.forEach(n=>{const s=n.getColDef(),o=s.chartDataType;if(o)switch(o){case"category":case"time":return void t.add(n);case"series":return void i.add(n);case"excluded":return;default:console.warn(`AG Grid: unexpected chartDataType value '${o}' supplied, instead use 'category', 'series' or 'excluded'`)}"ag-Grid-AutoColumn"!==s.colId?n.isPrimary()?(this.isNumberCol(n)?i:t).add(n):i.add(n):t.add(n)}),{dimensionCols:t,valueCols:i}}isNumberCol(e){if("ag-Grid-AutoColumn"===e.getColId())return!1;const t=this.rowRenderer.getRowNode({rowIndex:0,rowPinned:null});if(!t)return!1;let i=this.valueService.getValue(e,t);return null==i&&(i=this.extractLeafData(t,e)),null!=i&&"function"==typeof i.toNumber&&(i=i.toNumber()),"number"==typeof i}extractLeafData(e,t){if(!e.allLeafChildren)return null;for(let i=0;i<e.allLeafChildren.length;i++){const s=this.valueService.getValue(t,e.allLeafChildren[i]);if(null!=s)return s}return null}};XM([P("columnModel")],J_.prototype,"columnModel",void 0),XM([P("valueService")],J_.prototype,"valueService",void 0),XM([P("rowRenderer")],J_.prototype,"rowRenderer",void 0),J_=XM([He("chartColumnService")],J_);class yT extends Ee{constructor(e){var t;super(),this.suppressComboChartWarnings=!1,this.chartDataModel=e,this.seriesChartTypes=null!==(t=e.params.seriesChartTypes)&&void 0!==t?t:[]}init(){this.initComboCharts()}update(e){this.seriesChartTypes=e??this.seriesChartTypes,this.initComboCharts(),this.updateSeriesChartTypes()}initComboCharts(){("customCombo"===this.chartDataModel.chartType||this.seriesChartTypes&&this.seriesChartTypes.length>0)&&(this.chartDataModel.chartType="customCombo",this.savedCustomSeriesChartTypes=this.seriesChartTypes||[])}updateSeriesChartTypes(){if(this.chartDataModel.isComboChart()){if(this.seriesChartTypes=this.seriesChartTypes.map(e=>{const t=["groupedColumn","stackedColumn","stackedArea"].includes(e.chartType);return e.secondaryAxis=!t&&e.secondaryAxis,e}),"customCombo"===this.chartDataModel.chartType)return void this.updateSeriesChartTypesForCustomCombo();this.updateChartSeriesTypesForBuiltInCombos()}}updateSeriesChartTypesForCustomCombo(){!(this.seriesChartTypes&&this.seriesChartTypes.length>0)&&!this.suppressComboChartWarnings&&console.warn("AG Grid: 'seriesChartTypes' are required when the 'customCombo' chart type is specified."),this.seriesChartTypes=this.seriesChartTypes.map(n=>(yT.SUPPORTED_COMBO_CHART_TYPES.includes(n.chartType)||(console.warn(`AG Grid: invalid chartType '${n.chartType}' supplied in 'seriesChartTypes', converting to 'line' instead.`),n.chartType="line"),n));const i=this.chartDataModel.valueColState.map(n=>((!this.savedCustomSeriesChartTypes||0===this.savedCustomSeriesChartTypes.length)&&(this.savedCustomSeriesChartTypes=this.seriesChartTypes),this.savedCustomSeriesChartTypes.find(o=>o.colId===n.colId)||(n.selected&&!this.suppressComboChartWarnings&&console.warn(`AG Grid: no 'seriesChartType' found for colId = '${n.colId}', defaulting to 'line'.`),{colId:n.colId,chartType:"line",secondaryAxis:!1})));this.seriesChartTypes=i,this.savedCustomSeriesChartTypes=i,this.suppressComboChartWarnings=!0}updateChartSeriesTypesForBuiltInCombos(){const{chartType:e,valueColState:t}=this.chartDataModel;let i="columnLineCombo"===e?"groupedColumn":"stackedArea",n="columnLineCombo"===e?"line":"groupedColumn";const s=t.filter(a=>a.selected),o=Math.ceil(s.length/2);this.seriesChartTypes=s.map((a,c)=>({colId:a.colId,chartType:c>=o?n:i,secondaryAxis:!1}))}}yT.SUPPORTED_COMBO_CHART_TYPES=["line","groupedColumn","stackedColumn","area","stackedArea"],function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);n>3&&s&&Object.defineProperty(e,t,s)}([Se],yT.prototype,"init",null);var aL=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class cc extends Ee{constructor(e){super(),this.unlinked=!1,this.chartData=[],this.valueColState=[],this.dimensionColState=[],this.columnNames={},this.crossFiltering=!1,this.grouping=!1,this.params=e,this.chartId=e.chartId,this.chartType=e.chartType,this.pivotChart=e.pivotChart,this.chartThemeName=e.chartThemeName,this.aggFunc=e.aggFunc,this.referenceCellRange=e.cellRange,this.suppliedCellRange=e.cellRange,this.suppressChartRanges=e.suppressChartRanges,this.unlinked=!!e.unlinkChart,this.crossFiltering=!!e.crossFiltering}init(){this.datasource=this.createManagedBean(new Lp),this.chartColumnService=this.createManagedBean(new J_),this.comboChartModel=this.createManagedBean(new yT(this)),this.updateCellRanges(),this.updateData()}updateModel(e){const{cellRange:t,chartType:i,pivotChart:n,chartThemeName:s,aggFunc:o,suppressChartRanges:a,unlinkChart:c,crossFiltering:u,seriesChartTypes:p}=e;t!==this.suppliedCellRange&&(this.dimensionCellRange=void 0,this.valueCellRange=void 0),this.chartType=i,this.pivotChart=n,this.chartThemeName=s,this.aggFunc=o,this.referenceCellRange=t,this.suppliedCellRange=t,this.suppressChartRanges=a,this.unlinked=!!c,this.crossFiltering=!!u,this.updateSelectedDimensions(t?.columns),this.updateCellRanges(),(this.isComboChart()||p)&&this.comboChartModel.update(p),this.unlinked||this.updateData()}updateCellRanges(e){this.valueCellRange&&(this.referenceCellRange=this.valueCellRange);const{dimensionCols:t,valueCols:i}=this.chartColumnService.getChartColumns(),n=this.getAllColumnsFromRanges();e&&this.updateColumnState(e),this.setDimensionCellRange(t,n,e),this.setValueCellRange(i,n,e),e||(this.resetColumnState(),this.syncDimensionCellRange()),this.comboChartModel.updateSeriesChartTypes()}updateData(){const{startRow:e,endRow:t}=this.getRowIndexes();this.pivotChart&&this.resetColumnState(),this.grouping=this.isGrouping();const i={aggFunc:this.aggFunc,dimensionCols:this.getSelectedDimensions(),grouping:this.grouping,pivoting:this.isPivotActive(),crossFiltering:this.crossFiltering,valueCols:this.getSelectedValueCols(),startRow:e,endRow:t,isScatter:z.includes(["scatter","bubble"],this.chartType)},{chartData:n,columnNames:s}=this.datasource.getData(i);this.chartData=n,this.columnNames=s}isGrouping(){const e=this.gridOptionsService.get("treeData"),t=e?null:this.chartColumnService.getRowGroupColumns(),i=e||t&&t.length>0,n=this.getSelectedDimensions().map(({colId:a})=>a),o=this.chartColumnService.getGroupDisplayColumns().map(a=>a.getColId()).some(a=>n.includes(a));return!!i&&o}getSelectedValueCols(){return this.valueColState.filter(e=>e.selected).map(e=>e.column)}getSelectedDimensions(){return this.dimensionColState.filter(e=>e.selected)}getColDisplayName(e){return this.chartColumnService.getColDisplayName(e)}isPivotMode(){return this.chartColumnService.isPivotMode()}getChartDataType(e){const t=this.chartColumnService.getColumn(e);return t?t.getColDef().chartDataType:void 0}isPivotActive(){return this.chartColumnService.isPivotActive()}createCellRange(e,...t){return{id:this.chartId,startRow:this.referenceCellRange.startRow,endRow:this.referenceCellRange.endRow,columns:t,startColumn:e===_n.DIMENSION?t[0]:this.referenceCellRange.startColumn,type:e}}getAllColumnsFromRanges(){if(this.pivotChart)return z.convertToSet(this.chartColumnService.getAllDisplayedColumns());const e=this.dimensionCellRange||this.valueCellRange?[]:this.referenceCellRange.columns;return this.dimensionCellRange&&e.push(...this.dimensionCellRange.columns),this.valueCellRange&&e.push(...this.valueCellRange.columns),z.convertToSet(e)}getRowIndexes(){let e=0,t=0;const{rangeService:i,valueCellRange:n,dimensionCellRange:s}=this,o=n||s;if(i&&o){e=i.getRangeStartRow(o).rowIndex;const a=i.getRangeEndRow(o);t="bottom"===a.rowPinned?-1:a.rowIndex}return{startRow:e,endRow:t}}resetColumnState(){const{dimensionCols:e,valueCols:t}=this.chartColumnService.getChartColumns(),i=this.getAllColumnsFromRanges(),n=this.valueColState.length<1;this.dimensionColState=[],this.valueColState=[];const s=om(this.chartType);let o=!1,a=1;const c=this.suppliedCellRange.columns[0];e.forEach(g=>{const m="ag-Grid-AutoColumn"===g.getColId();let y=!1;this.crossFiltering&&this.aggFunc?c.getColId()===g.getColId()&&(y=!0):y=!!m||(!o||s)&&i.has(g),this.dimensionColState.push({column:g,colId:g.getColId(),displayName:this.getColDisplayName(g),selected:y,order:a++}),y&&(o=!0)});const u={colId:cc.DEFAULT_CATEGORY,displayName:this.chartTranslationService.translate("defaultCategory"),selected:!o,order:0};this.dimensionColState.unshift(u);const p=this.referenceCellRange.columns.filter(g=>t.has(g));t.forEach(g=>{n&&z.includes(this.referenceCellRange.columns,g)&&(g=p.shift()),this.valueColState.push({column:g,colId:g.getColId(),displayName:this.getColDisplayName(g),selected:i.has(g),order:a++})})}updateColumnState(e){const t=u=>u.colId===e.colId,{dimensionColState:i,valueColState:n}=this,s=i.find(t),o=n.find(t);if(s)if(om(this.chartType))s.selected=e.selected;else{const p=e.selected?s:i.filter(g=>g!==s).find(({selected:g})=>g);i.forEach(g=>g.selected=g===p)}else o&&(o.selected=e.selected);const a=[...i,...n],c=[];a.forEach((u,p)=>{p===e.order&&c.push(e.colId),u.colId!==e.colId&&c.push(u.colId)}),a.forEach(u=>{const p=c.indexOf(u.colId);u.order=p>=0?c.indexOf(u.colId):a.length-1}),this.reorderColState()}reorderColState(){const e=(t,i)=>t.order-i.order;this.dimensionColState.sort(e),this.valueColState.sort(e)}setDimensionCellRange(e,t,i){if(this.dimensionCellRange=void 0,!i&&!this.dimensionColState.length){const a=om(this.chartType),c=new Array;return e.forEach(u=>{c.length>0&&!a||!t.has(u)||c.push(u)}),void(c.length>0&&(this.dimensionCellRange=this.createCellRange(_n.DIMENSION,...c)))}let n=i?[i]:[];if(this.crossFiltering&&this.aggFunc){const a=this.suppliedCellRange.columns[0];n=this.dimensionColState.filter(c=>c.colId===a.getColId())}else(0===n.length||n.some(({column:a})=>!a||!e.has(a)))&&(n=this.dimensionColState.filter(a=>a.selected));const s=1===n.length&&n[0].colId===cc.DEFAULT_CATEGORY,o=n.map(({column:a})=>a).filter(a=>null!=a);o.length>0&&!s&&(this.dimensionCellRange=this.createCellRange(_n.DIMENSION,...o))}setValueCellRange(e,t,i){this.valueCellRange=void 0;const n=[];if(e.forEach(s=>{i&&i.colId===s.getColId()?i.selected&&n.push(i.column):t.has(s)&&n.push(s)}),n.length>0){let s=[];this.valueColState.length>0?s=this.valueColState.map(o=>o.colId):t.forEach(o=>s.push(o.getColId())),n.sort((o,a)=>s.indexOf(o.getColId())-s.indexOf(a.getColId())),this.valueCellRange=this.createCellRange(_n.VALUE,...n)}}updateSelectedDimensions(e){const t=new Set(e.map(n=>n.getColId()));if(om(this.chartType)){const n=this.dimensionColState.filter(o=>t.has(o.colId)),s=new Set(n.map(o=>o.colId));this.dimensionColState=this.dimensionColState.map(o=>Object.assign(Object.assign({},o),{selected:s.has(o.colId)}))}else{const s=(this.dimensionColState.find(o=>t.has(o.colId))||this.dimensionColState[0]).colId;this.dimensionColState=this.dimensionColState.map(o=>Object.assign(Object.assign({},o),{selected:o.colId===s}))}}syncDimensionCellRange(){const e=this.getSelectedDimensions();if(0===e.length)return;const t=e.map(({column:i})=>i).filter(i=>null!=i);t.length>0&&(this.dimensionCellRange=this.createCellRange(_n.DIMENSION,...t))}isComboChart(){return["columnLineCombo","areaColumnCombo","customCombo"].includes(this.chartType)}}function QB(r){return null!=r.chart?r.chart:r}cc.DEFAULT_CATEGORY="AG-GRID-DEFAULT-CATEGORY",aL([P("rangeService")],cc.prototype,"rangeService",void 0),aL([P("chartTranslationService")],cc.prototype,"chartTranslationService",void 0),aL([Se],cc.prototype,"init",null);class ST{constructor(e){this.chartProxyParams=e,this.clearThemeOverrides=!1,this.chart=e.chartInstance,this.chartType=e.chartType,this.crossFiltering=e.crossFiltering,this.crossFilterCallback=e.crossFilterCallback,this.standaloneChartType=ud(this.chartType),null==this.chart?this.chart=ha.create(this.getCommonChartOptions()):this.clearThemeOverrides=!0}getChart(){return QB(this.chart)}getChartRef(){return this.chart}downloadChart(e,t,i){const{chart:n}=this,s=QB(n),o=t||(s.title?s.title.text:"chart"),{width:a,height:c}=e||{};ha.download(n,{width:a,height:c,fileName:o,fileFormat:i})}getChartImageDataURL(e){return this.getChart().scene.getDataURL(e)}getChartOptions(){return this.chart.getOptions()}getChartThemeOverrides(){var e;return null!==(e=this.getChartOptions().theme.overrides)&&void 0!==e?e:{}}getChartPalette(){return dd.getChartTheme(this.getChartOptions().theme).palette}setPaired(e){const t=ud(this.chartProxyParams.chartType);ha.updateDelta(this.chart,{theme:{overrides:{[t]:{paired:e}}}})}isPaired(){const e=ud(this.chartProxyParams.chartType);return j_(this.getChartThemeOverrides(),`${e}.paired`,!0)}lookupCustomChartTheme(e){return LB(this.chartProxyParams,e)}transformData(e,t,i){return i?e.map((n,s)=>{const o=n[t],a=o&&o.toString?o.toString():"",c=Object.assign({},n);return c[t]={id:s,value:o,toString:()=>a},c}):e}getCommonChartOptions(e){var t,i;const n=this.clearThemeOverrides?{}:null!==(i=null===(t=this.chart)||void 0===t?void 0:t.getOptions())&&void 0!==i?i:{},s=null!=this.chart?this.getActiveFormattingPanelOverrides():void 0;this.clearThemeOverrides=!1;const c=function n$(r,e){return e.reduce((t,i)=>i?{baseTheme:t,overrides:i}:t,r)}(function i$(r,e){var t;const{chartOptionsToRestore:i,chartPaletteToRestore:n,chartThemeToRestore:s}=r,o=function l$(r){let e=r.getChartThemeName();const t=r.getChartThemes();return z.includes(t,e)||(e=t[0]),e}(r),a=ZN(o),c=a?{baseTheme:o}:null!==(t=LB(r,o))&&void 0!==t?t:{},u=r.getGridOptionsChartThemeOverrides(),p=r.apiChartThemeOverrides,g=ud(r.chartType),m=XN(g)?g:"cartesian",y=r.crossFiltering?function r$(r,e,t){const i={listeners:{legendItemClick:s=>{r.getChart().series.forEach(a=>{a.toggleSeriesItem(s.itemId,s.enabled),a.toggleSeriesItem(`${s.itemId}-filtered-out`,s.enabled)})}}};return{[t]:{tooltip:{delay:500},legend:i,listeners:{click:s=>e.crossFilterCallback(s,!0)},series:{}}}}(e,r,m):void 0,b=Object.assign({},i??{}),D=[a?a$(r,(()=>{const R=O=>!!O&&Object.keys(O).some(L=>j_(O[L],"title.enabled",!1));return R(u)||R(p)})()):void 0,y,u,p,b].filter(R=>!!R).reduce((R,O)=>({baseTheme:R,overrides:O}),c);return n&&o===s&&(function s$(r,e){const t=(i,n)=>i.length===n.length&&i.every((s,o)=>s===n[o]);return t(r.fills,e.fills)&&t(r.strokes,e.strokes)}(n,dd.getChartTheme(c).palette)||(D.palette=n)),D}(this.chartProxyParams,this),[this.getChartThemeDefaults(),e??s]);return Object.assign(Object.assign({},n),{theme:c,container:this.chartProxyParams.parentElement,mode:"integrated"})}getChartThemeDefaults(){}getActiveFormattingPanelOverrides(){var e,t;return this.clearThemeOverrides?{}:null!==(t=(null===(e=this.chart)||void 0===e?void 0:e.getOptions().theme)?.overrides)&&void 0!==t?t:{}}destroy({keepChartInstance:e=!1}={}){if(e)return this.chart.resetAnimations(),this.chart;this.destroyChart()}destroyChart(){this.chart&&(this.chart.destroy(),this.chart=void 0)}}class ju extends ST{constructor(e){super(e),this.crossFilteringAllPoints=new Set,this.crossFilteringSelectedPoints=[]}update(e){const t=this.getAxes(e),i=Object.assign(Object.assign({},this.getCommonChartOptions(e.updatedOverrides)),{data:this.getData(e,t),axes:t,series:this.getSeries(e)});ha.update(this.getChartRef(),i)}getData(e,t){const i=["area","line"].includes(this.standaloneChartType),n=t.some(s=>"category"===s?.type);return this.crossFiltering&&i?this.getCrossFilterData(e):this.getDataTransformedData(e,n)}getDataTransformedData(e,t){const[i]=e.categories;return this.transformData(e.data,i.id,t)}getXAxisType(e){return e.grouping?"grouped-category":ju.isTimeAxis(e)?"time":"category"}static isTimeAxis(e){const[t]=e.categories;if(t&&t.chartDataType)return"time"===t.chartDataType;const i=e.data[0];return(i&&i[t.id])instanceof Date}crossFilteringReset(){this.crossFilteringSelectedPoints=[],this.crossFilteringAllPoints.clear()}crossFilteringPointSelected(e){return 0==this.crossFilteringSelectedPoints.length||this.crossFilteringSelectedPoints.includes(e)}crossFilteringDeselectedPoints(){return this.crossFilteringSelectedPoints.length>0&&this.crossFilteringAllPoints.size!==this.crossFilteringSelectedPoints.length}extractLineAreaCrossFilterSeries(e,t){const[i]=t.categories,n=s=>"area"===this.standaloneChartType?t.getCrossFilteringContext().lastSelectedChartId===t.chartId?s+"-total":s:s+"-total";return e.map(s=>(s.yKey=n(s.yKey),s.listeners={nodeClick:o=>{this.crossFilteringAddSelectedPoint(o.event.metaKey||o.event.ctrlKey,o.datum[s.xKey]),this.crossFilterCallback(o)}},s.marker={formatter:o=>({fill:o.highlighted?"yellow":o.fill,size:o.highlighted?14:this.crossFilteringPointSelected(o.datum[i.id])?8:0})},"area"===this.standaloneChartType&&(s.fillOpacity=this.crossFilteringDeselectedPoints()?.3:1),"line"===this.standaloneChartType&&(s.strokeOpacity=this.crossFilteringDeselectedPoints()?.3:1),s))}getCrossFilterData(e){this.crossFilteringAllPoints.clear();const[t]=e.categories,i=e.fields[0].colId,n=`${i}-filtered-out`,s=e.getCrossFilteringContext().lastSelectedChartId;return e.data.map(o=>{const a=o[t.id];this.crossFilteringAllPoints.add(a);const c=this.crossFilteringPointSelected(a);return"area"===this.standaloneChartType&&s===e.chartId&&(o[`${i}-total`]=c?o[i]:o[i]+o[n]),"line"===this.standaloneChartType&&(o[`${i}-total`]=c?o[i]:o[i]+o[n]),o})}crossFilteringAddSelectedPoint(e,t){e?this.crossFilteringSelectedPoints.push(t):this.crossFilteringSelectedPoints=[t]}}function eH(r,e){const t=parseInt(r.slice(1,3),16),i=parseInt(r.slice(3,5),16),n=parseInt(r.slice(5,7),16);return e?`rgba(${t}, ${i}, ${n}, ${e})`:`rgba(${t}, ${i}, ${n})`}function tH(r,e){return r.map(t=>{const i=Gu.Color.fromString(t);return new Gu.Color(i.r,i.g,i.b,e).toHexString()})}class W$ extends ju{constructor(e){super(e)}getAxes(e){const t=[{type:this.getXAxisType(e),position:xp(this.chartType)?"left":"bottom"},{type:"number",position:xp(this.chartType)?"bottom":"left"}];if(this.isNormalised()){const i=t[1];i.label=Object.assign(Object.assign({},i.label),{formatter:n=>Math.round(n.value)+"%"})}return t}getSeries(e){const[t]=e.categories,i=e.fields.map(n=>({type:this.standaloneChartType,direction:xp(this.chartType)?"horizontal":"vertical",stacked:this.crossFiltering||Uz(this.chartType),normalizedTo:this.isNormalised()?100:void 0,xKey:t.id,xName:t.name,yKey:n.colId,yName:n.displayName}));return this.crossFiltering?this.extractCrossFilterSeries(i):i}extractCrossFilterSeries(e){const t=this.getChartPalette(),i=(o,a)=>Object.assign(Object.assign({},o),{highlightStyle:{item:{fill:void 0}},fill:t?.fills[a],stroke:t?.strokes[a],listeners:{nodeClick:this.crossFilterCallback}}),n=o=>{const a=o.yKey+"-filtered-out";return Object.assign(Object.assign({},am({},o)),{yKey:a,fill:eH(o.fill,"0.3"),stroke:eH(o.stroke,"0.3"),showInLegend:!1})},s=[];for(let o=0;o<e.length;o++){const a=i(e[o],o);s.push(a),s.push(n(a))}return s}isNormalised(){return!this.crossFiltering&&z.includes(["normalizedColumn","normalizedBar"],this.chartType)}}class j$ extends ju{constructor(e){super(e)}getAxes(e){const t=[{type:this.getXAxisType(e),position:"bottom"},{type:"number",position:"left"}];if(this.isNormalised()){const i=t[1];i.label=Object.assign(Object.assign({},i.label),{formatter:n=>Math.round(n.value)+"%"})}return t}getSeries(e){const[t]=e.categories,i=e.fields.map(n=>({type:this.standaloneChartType,xKey:t.id,xName:t.name,yKey:n.colId,yName:n.displayName,normalizedTo:"normalizedArea"===this.chartType?100:void 0,stacked:["normalizedArea","stackedArea"].includes(this.chartType)}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(i,e):i}isNormalised(){return!this.crossFiltering&&"normalizedArea"===this.chartType}}class z$ extends ju{constructor(e){super(e)}getAxes(e){return[{type:this.getXAxisType(e),position:"bottom"},{type:"number",position:"left"}]}getSeries(e){const[t]=e.categories,i=e.fields.map(n=>({type:this.standaloneChartType,xKey:t.id,xName:t.name,yKey:n.colId,yName:n.displayName}));return this.crossFiltering?this.extractLineAreaCrossFilterSeries(i,e):i}}class $$ extends ST{constructor(e){super(e)}getAxes(e){const t="radial-bar"===this.standaloneChartType;return[{type:t?"angle-number":"angle-category"},{type:t?"radius-category":"radius-number"}]}getSeries(e){const{fields:t}=e,[i]=e.categories,n="radial-bar"===this.standaloneChartType;return t.map(s=>{var o,a;return{type:this.standaloneChartType,angleKey:n?s.colId:i.id,angleName:n?null!==(o=s.displayName)&&void 0!==o?o:void 0:i.name,radiusKey:n?i.id:s.colId,radiusName:n?i.name:null!==(a=s.displayName)&&void 0!==a?a:void 0}})}update(e){const t=this.getAxes(e),i=Object.assign(Object.assign({},this.getCommonChartOptions(e.updatedOverrides)),{data:this.getData(e,t),axes:t,series:this.getSeries(e)});ha.update(this.getChartRef(),i)}getData(e,t){const i=t.some(n=>"angle-category"===n.type||"radius-category"===n.type);return this.getDataTransformedData(e,i)}getDataTransformedData(e,t){const[i]=e.categories;return this.transformData(e.data,i.id,t)}crossFilteringReset(){}}class lL extends ST{constructor(e){super(e)}update(e){const{data:t}=e,[i]=e.categories,n=Object.assign(Object.assign({},this.getCommonChartOptions(e.updatedOverrides)),{data:this.crossFiltering?this.getCrossFilterData(e):this.transformData(t,i.id),series:this.getSeries(e)});ha.update(this.getChartRef(),n)}getSeries(e){const[t]=e.categories,i=e.fields.length,n={currentOffset:0,offsetAmount:i>1?20:40},s=this.getFields(e).map(o=>{var a;const c={type:this.standaloneChartType,angleKey:o.colId,angleName:o.displayName,sectorLabelKey:o.colId,calloutLabelName:t.name,calloutLabelKey:t.id};if("donut"===this.chartType||"doughnut"===this.chartType){const{outerRadiusOffset:u,innerRadiusOffset:p}=lL.calculateOffsets(n),g=o.displayName?{title:{text:o.displayName,showInLegend:i>1}}:void 0;return Object.assign(Object.assign(Object.assign(Object.assign({},c),{type:"donut",outerRadiusOffset:u,innerRadiusOffset:p}),g),{calloutLine:{colors:null===(a=this.getChartPalette())||void 0===a?void 0:a.strokes}})}return c});return this.crossFiltering?this.extractCrossFilterSeries(s):s}getCrossFilterData(e){const t=e.fields[0].colId,i=`${t}-filtered-out`;return e.data.map(n=>{const s=n[t]+n[i];return n[`${t}-total`]=s,n[i]=1,n[t]=n[t]/s,n})}extractCrossFilterSeries(e){const t=this.getChartPalette(),s=e[0],o=s.angleKey,a=(c=>Object.assign(Object.assign({},c),{legendItemKey:c.calloutLabelKey,calloutLabel:{enabled:!1},highlightStyle:{item:{fill:void 0}},radiusKey:c.angleKey,angleKey:c.angleKey+"-total",radiusMin:0,radiusMax:1,listeners:{nodeClick:this.crossFilterCallback}}))(s);return[(c=s,u=o,Object.assign(Object.assign({},am({},a)),{radiusKey:u+"-filtered-out",fills:tH(null!==(p=c.fills)&&void 0!==p?p:t.fills,.3),strokes:tH(null!==(g=c.strokes)&&void 0!==g?g:t.strokes,.3),showInLegend:!1})),a];var c,u,p,g}static calculateOffsets(e){const t=e.currentOffset;e.currentOffset-=e.offsetAmount;const i=e.currentOffset;return e.currentOffset-=e.offsetAmount,{outerRadiusOffset:t,innerRadiusOffset:i}}getFields(e){return"pie"===this.chartType?e.fields.slice(0,1):e.fields}crossFilteringReset(){}}class K$ extends ju{constructor(e){super(e)}getAxes(e){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}getSeries(e){const[t]=e.categories,i=this.isPaired(),n=this.getSeriesDefinitions(e.fields,i),s=t.id===cc.DEFAULT_CATEGORY?void 0:t,o=n.map(a=>{var c,u,p,g,m;return a?.sizeField?{type:"bubble",xKey:a.xField.colId,xName:null!==(c=a.xField.displayName)&&void 0!==c?c:void 0,yKey:a.yField.colId,yName:null!==(u=a.yField.displayName)&&void 0!==u?u:void 0,title:`${a.yField.displayName} vs ${a.xField.displayName}`,sizeKey:a.sizeField.colId,sizeName:null!==(p=a.sizeField.displayName)&&void 0!==p?p:"",labelKey:s?s.id:a.yField.colId,labelName:s?s.name:void 0}:{type:"scatter",xKey:a.xField.colId,xName:null!==(g=a.xField.displayName)&&void 0!==g?g:void 0,yKey:a.yField.colId,yName:null!==(m=a.yField.displayName)&&void 0!==m?m:void 0,title:`${a.yField.displayName} vs ${a.xField.displayName}`,labelKey:s?s.id:a.yField.colId,labelName:s?s.name:void 0}});return this.crossFiltering?this.extractCrossFilterSeries(o,e):o}extractCrossFilterSeries(e,t){const{data:i}=t,n=this.getChartPalette(),s=p=>`${p}-filtered-out`,u=e.map((p,g)=>{const m=n?.fills[g],y=n?.strokes[g];let b;if("bubble"===p.type){const{sizeKey:E}=p;b=((p,g)=>{var m;const y=[1/0,-1/0];if(null!=g)for(const b of p){const _=null!==(m=b[g])&&void 0!==m?m:b[s(g)];_<y[0]&&(y[0]=_),_>y[1]&&(y[1]=_)}if(y[0]<=y[1])return y})(i,E)}const _=Object.assign(Object.assign({},p.marker),{fill:m,stroke:y,domain:b});return Object.assign(Object.assign({},p),{marker:_,highlightStyle:{item:{fill:"yellow"}},listeners:Object.assign(Object.assign({},p.listeners),{nodeClick:this.crossFilterCallback})})});return[...u,...u.map(p=>{let{yKey:g,xKey:m}=p,y={};return"bubble"===p.type&&(y={sizeKey:s(p.sizeKey)}),Object.assign(Object.assign(Object.assign({},p),y),{yKey:s(g),xKey:s(m),marker:Object.assign(Object.assign({},p.marker),{fillOpacity:.3,strokeOpacity:.3}),showInLegend:!1,listeners:Object.assign(Object.assign({},p.listeners),{nodeClick:b=>{const _=b.datum[s(m)],E=Object.assign(Object.assign({},b),{xKey:m,datum:Object.assign(Object.assign({},b.datum),{[m]:_})});this.crossFilterCallback(E)}})})})]}getSeriesDefinitions(e,t){if(e.length<2)return[];const i="bubble"===this.chartType;if(t)return i?e.map((s,o)=>o%3==0?{xField:s,yField:e[o+1],sizeField:e[o+2]}:null).filter(s=>s&&s.yField&&s.sizeField):e.map((s,o)=>o%2==0?{xField:s,yField:e[o+1]}:null).filter(s=>s&&s.yField);const n=e[0];return i?e.map((s,o)=>o%2==1?{xField:n,yField:s,sizeField:e[o+1]}:null).filter(s=>s&&s.sizeField):e.filter((s,o)=>o>0).map(s=>({xField:n,yField:s}))}}class iH extends ju{constructor(e){super(e)}getAxes(e){return[{type:this.getXAxisType(e),position:xp(this.chartType)?"left":"bottom"},{type:"number",position:xp(this.chartType)?"bottom":"left"}]}computeSeriesStatistics(e,t){const{data:i,fields:n}=e,[s]=e.categories,a=this.groupDataByCategory(s.id||cc.DEFAULT_CATEGORY,i);return Array.from(a).map(([c,u])=>{const p={[s.id]:c};return n.forEach((g,m)=>{const y=u.map(b=>b[g.colId]).filter(b=>"number"==typeof b&&!isNaN(b));Object.entries(t(y)).forEach(([b,_])=>{p[`${b}:${m}`]=y.length>0?_:null})}),p})}groupDataByCategory(e,t){return t.reduce((n,s)=>{let o=(n=>{if(e===cc.DEFAULT_CATEGORY)return 1;const s=n[e];return null==s?"":s instanceof Date?s.getTime():s})(s);const a=n.get(o);return a?a.push(s):n.set(o,[s]),n},new Map)}}class nH extends iH{constructor(e){super(e)}getSeries(e){const[t]=e.categories;return e.fields.map((i,n)=>{var s;return{type:this.standaloneChartType,xKey:t.id,xName:t.name,yName:null!==(s=i.displayName)&&void 0!==s?s:void 0,yLowName:"Min",yHighName:"Max",yLowKey:`min:${n}`,yHighKey:`max:${n}`}})}getData(e){return this.computeSeriesStatistics(e,t=>({min:Math.min(...t),max:Math.max(...t)}))}}class Y$ extends ju{constructor(e){super(e)}getSeries(e){const t=e.fields[0];return[{type:this.standaloneChartType,xKey:t.colId,xName:t.displayName,yName:this.chartProxyParams.translate("histogramFrequency"),areaPlot:!1}]}getAxes(e){return[{type:"number",position:"bottom"},{type:"number",position:"left"}]}}class q$ extends iH{constructor(e){super(e)}getSeries(e){const[t]=e.categories;return e.fields.map((i,n)=>{var s;return{type:this.standaloneChartType,direction:xp(this.chartType)?"horizontal":"vertical",xKey:t.id,xName:t.name,yName:null!==(s=i.displayName)&&void 0!==s?s:void 0,minName:"Min",q1Name:"Q1",medianName:"Median",q3Name:"Q3",maxName:"Max",minKey:`min:${n}`,q1Key:`q1:${n}`,medianKey:`median:${n}`,q3Key:`q3:${n}`,maxKey:`max:${n}`}})}getData(e){return this.computeSeriesStatistics(e,t=>{const i=t.sort((n,s)=>n-s);return{min:i[0],q1:this.quantile(i,.25),median:this.quantile(i,.5),q3:this.quantile(i,.75),max:i[i.length-1]}})}quantile(e,t){const i=(e.length-1)*t,n=Math.floor(i);return void 0!==e[n+1]?e[n]+(i-n)*(e[n+1]-e[n]):e[n]}}const ZM="AG-GRID-DEFAULT-LABEL-KEY";function cL(r){const{depth:e,leaves:t,children:i}=r;if(0===e)return t.map(s=>Object.assign({[ZM]:null},s));const n=new Array;for(const[s,o]of i.entries())0===o.depth?n.push(...o.leaves.map(a=>Object.assign({[ZM]:s},a))):n.push({[ZM]:s,children:cL(o)});return n}function sH(r,e,t){return r.reduce((s,o)=>n(o,e(o),t,0,s),{depth:0,leaves:[],children:new Map});function n(s,o,a,c,u){if(c===o)return u.leaves.push(s),u;{const p=a(s,c),m=n(s,o,a,c+1,u.children.get(p)||{depth:0,leaves:[],children:new Map});return u.children.set(p,m),u.depth=Math.max(1+m.depth,u.depth),u}}}class rH extends ST{constructor(e){super(e),this.chartProxyParams=e}update(e){const t=Object.assign(Object.assign({},this.getCommonChartOptions(e.updatedOverrides)),{series:this.getSeries(e,ZM),data:this.getData(e)});ha.update(this.getChartRef(),t)}getData(e){const{categories:t,data:i,grouping:n}=e;return n?function Z$(r,e){return cL(sH(r,function i(s){var o,a;return null!==(a=null===(o=e(s))||void 0===o?void 0:o.length)&&void 0!==a?a:0},function n(s,o){const a=e(s);return a?a[a.length-1-o]:null}))}(i,J$):function X$(r,e){return cL(sH(r,function i(o){return e.length},function n(o,a){return function s(o){return null==o?null:String(o)}(o[e[a]])}))}(i,t.map(({id:o})=>o))}}function J$(r){var e,t;return null!==(t=null===(e=r[wf])||void 0===e?void 0:e.labels)&&void 0!==t?t:null}class Q$ extends rH{constructor(e){super(e)}getSeries(e,t){var i,n;const{fields:s}=e,[o,a]=s;return[{type:this.standaloneChartType,labelKey:t,sizeKey:o?.colId,sizeName:null!==(i=o?.displayName)&&void 0!==i?i:void 0,colorKey:a?.colId,colorName:null!==(n=a?.displayName)&&void 0!==n?n:void 0}]}getChartThemeDefaults(){return{treemap:{gradientLegend:{gradient:{preferredLength:200}}}}}transformData(e,t,i){return e}crossFilteringReset(){}}class eK extends rH{constructor(e){super(e)}getSeries(e,t){var i,n;const{fields:s}=e,[o,a]=s;return[{type:this.standaloneChartType,labelKey:t,sizeKey:o?.colId,sizeName:null!==(i=o?.displayName)&&void 0!==i?i:void 0,colorKey:a?.colId,colorName:null!==(n=a?.displayName)&&void 0!==n?n:void 0}]}getChartThemeDefaults(){return{sunburst:{gradientLegend:{gradient:{preferredLength:200}}}}}transformData(e,t,i){return e}crossFilteringReset(){}}function oH(r,e){return r.reduce((t,i,n,s)=>t.concat(e(i,n,s)),new Array)}class sK extends ST{constructor(e){super(e)}update(e){const t="AG-GRID-DEFAULT-HEATMAP-SERIES-KEY",i="AG-GRID-DEFAULT-HEATMAP-VALUE-KEY",n="AG-GRID-DEFAULT-HEATMAP-CATEGORY-KEY",s=Object.assign(Object.assign({},this.getCommonChartOptions(e.updatedOverrides)),{series:this.getSeries(e,t,i,n),data:this.getData(e,t,i,n)});ha.update(this.getChartRef(),s)}getSeries(e,t,i,n){const[s]=e.categories;return[{type:this.standaloneChartType,yKey:n,xKey:t,colorKey:i,yName:s.name,xName:void 0,colorName:void 0}]}getData(e,t,i,n){const[s]=e.categories;return oH(e.data,(o,a)=>{const c=o[s.id],u=null==c?"":String(c),p={id:a,value:c,toString:()=>u};return e.fields.map(({colId:g,displayName:m})=>Object.assign(Object.assign({},o),{[t]:m,[i]:o[g],[n]:p}))})}getChartThemeDefaults(){return{heatmap:{gradientLegend:{gradient:{preferredLength:200}},series:{tooltip:{renderer:rK}}}}}transformData(e,t,i){return e}crossFilteringReset(){}}function rK(r){const{xKey:e,yKey:t,colorKey:i,yName:n,seriesId:s,datum:o}=r,a=o[s];return{title:"",content:[{label:n,value:a[t]},{label:a[e],value:i&&a[i]}].map(({label:p,value:g})=>`<b>${aH(String(p))}:</b> ${aH(String(g))}`).join("<br>")}}function aH(r){const e={"&":"&amp;","<":"&lt;",">":"&gt;"},t=`[${Object.keys(e).join("")}]`,i=new RegExp(t,"g");return r.replace(i,n=>e[n])}class oK extends ju{constructor(e){super(e)}getAxes(e){return[{type:this.getXAxisType(e),position:xp(this.chartType)?"left":"bottom"},{type:"number",position:xp(this.chartType)?"bottom":"left"}]}getSeries(e){var t;const[i]=e.categories,[n]=e.fields;return[{type:this.standaloneChartType,direction:xp(this.chartType)?"horizontal":"vertical",xKey:i.id,xName:i.name,yKey:n.colId,yName:null!==(t=n.displayName)&&void 0!==t?t:void 0}]}}class dL extends Ee{constructor(e){super(),this.chartController=e}getChartOption(e){return j_(this.getChart(),e,void 0)}setChartOption(e,t,i){const n=this.chartController.getChartSeriesTypes();this.chartController.isComboChart()&&n.push("common");let s={};n.forEach(o=>{s=am(s,this.createChartOptions({seriesType:o,expression:e,value:t}))}),i||(this.updateChart(s),this.raiseChartOptionsChangedEvent())}awaitChartOptionUpdate(e){this.chartController.getChartProxy().getChart().waitForUpdate().then(()=>e()).catch(i=>console.error("AG Grid - chart update failed",i))}getAxisProperty(e){var t;return j_(null===(t=this.getChart().axes)||void 0===t?void 0:t[0],e,void 0)}setAxisProperty(e,t){this.setAxisProperties([{expression:e,value:t}])}setAxisProperties(e){const t=this.getChart(),i=oH(e,({expression:n,value:s})=>{var o;const a=null===(o=t.axes)||void 0===o?void 0:o.filter(c=>{const u=n.split(".");let p=c;for(const g of u){if(!(g in p))return!1;p=p[g]}return!0});return a?a.map(c=>this.getUpdateAxisOptions(c,n,s)):[]}).reduce((n,s)=>am(n,s),{});Object.keys(i).length>0&&(this.updateChart(i),this.raiseChartOptionsChangedEvent())}getLabelRotation(e){return j_(this.getAxis(e),"label.rotation",void 0)}setLabelRotation(e,t){const i=this.getAxis(e);if(i){const n=this.getUpdateAxisOptions(i,"label.rotation",t);this.updateChart(n),this.raiseChartOptionsChangedEvent()}}getSeriesOption(e,t,i){const n=this.getChart().series.find(s=>dL.isMatchingSeries(t,s));return j_(i?n:n?.properties.toJson(),e,void 0)}setSeriesOption(e,t,i){const n=this.createChartOptions({seriesType:i,expression:`series.${e}`,value:t});this.updateChart(n),this.raiseChartOptionsChangedEvent()}getPairedMode(){return this.chartController.getChartProxy().isPaired()}setPairedMode(e){this.chartController.getChartProxy().setPaired(e)}getAxis(e){const t=this.getChart();if(t.axes&&!(t.axes.length<1))return"xAxis"===e?t.axes&&"x"===t.axes[0].direction?t.axes[0]:t.axes[1]:t.axes&&"y"===t.axes[1].direction?t.axes[1]:t.axes[0]}getUpdateAxisOptions(e,t,i){const n=this.chartController.getChartSeriesTypes();return this.chartController.isComboChart()&&n.push("common"),["number","category","time","grouped-category","angle-category","angle-number","radius-category","radius-number"].includes(e.type)?n.map(o=>this.createChartOptions({seriesType:o,expression:`axes.${e.type}.${t}`,value:i})).reduce((o,a)=>am(o,a)):{}}getChartType(){return this.chartController.getChartType()}getChart(){return this.chartController.getChartProxy().getChart()}updateChart(e){const t=this.chartController.getChartProxy().getChartRef();t.skipAnimations(),ha.updateDelta(t,e)}createChartOptions({seriesType:e,expression:t,value:i}){const n={},s={theme:{overrides:n}};return function t$(r,e,t){if(null==r)return;const i=e.split(".");let n=r;i.forEach((s,o)=>{n[s]||(n[s]={}),o<i.length-1&&(n=n[s])}),n[i[i.length-1]]=t}(n,`${e}.${t}`,i),s}raiseChartOptionsChangedEvent(){const e=this.chartController.getChartModel(),t={type:G.EVENT_CHART_OPTIONS_CHANGED,chartId:e.chartId,chartType:e.chartType,chartThemeName:this.chartController.getChartThemeName(),chartOptions:e.chartOptions};this.eventService.dispatchEvent(t)}static isMatchingSeries(e,t){return Vz.includes(e)&&t.type===e}destroy(){super.destroy()}}class aK extends ju{constructor(e){super(e)}getAxes(e){const t=e?e.fields:[],i=new Map(t.map(a=>[a.colId,a])),{primaryYKeys:n,secondaryYKeys:s}=this.getYKeys(t,e.seriesChartTypes),o=[{type:this.getXAxisType(e),position:"bottom"}];return n.length>0&&o.push({type:"number",keys:n,position:"left"}),s.length>0&&s.forEach(a=>{const c=i.get(a);c&&c.colId===a&&o.push({type:"number",keys:[a],position:"right"})}),o}getSeries(e){const{fields:t,seriesChartTypes:i}=e,[n]=e.categories;return t.map(s=>{const o=i.find(a=>a.colId===s.colId);if(o){const a=o.chartType,u=["groupedColumn","groupedBar"].includes(a)?{grouped:!0}:{};return Object.assign({type:ud(a),xKey:n.id,yKey:s.colId,yName:s.displayName,stacked:["stackedArea","stackedColumn"].includes(a)},u)}})}getYKeys(e,t){const i=[],n=[];return e.forEach(s=>{const o=s.colId,a=t.find(c=>c.colId===o);a&&(a.secondaryAxis?n.push(o):i.push(o))}),{primaryYKeys:i,secondaryYKeys:n}}}var zu=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class ro extends Ne{constructor(e){super(ro.TEMPLATE),this.params=e}init(){const e={chartId:this.params.chartId,pivotChart:this.params.pivotChart,chartType:dT(this.params.chartType),chartThemeName:this.getThemeName(),aggFunc:this.params.aggFunc,cellRange:this.params.cellRange,suppressChartRanges:this.params.suppressChartRanges,unlinkChart:this.params.unlinkChart,crossFiltering:this.params.crossFiltering,seriesChartTypes:this.params.seriesChartTypes},t=this.gridOptionsService.get("enableRtl");this.addCssClass(t?"ag-rtl":"ag-ltr");const i=this.createBean(new cc(e));this.chartController=this.createManagedBean(new mn(i)),this.validateCustomThemes(),this.createChart(),this.params.insideDialog&&this.addDialog(),this.addMenu(),this.addTitleEditComp(),this.addManagedListener(this.getGui(),"focusin",this.setActiveChartCellRange.bind(this)),this.addManagedListener(this.chartController,mn.EVENT_CHART_MODEL_UPDATE,this.update.bind(this)),this.addManagedPropertyListeners(["chartThemeOverrides","chartThemes"],this.reactivePropertyUpdate.bind(this)),this.chartMenu&&this.addManagedListener(this.chartMenu,lc.EVENT_DOWNLOAD_CHART,()=>this.downloadChart()),this.update(),this.raiseChartCreatedEvent()}createChart(){let e;this.chartProxy&&(e=this.chartProxy.destroy({keepChartInstance:!0}));const i=this.chartController.getChartType(),n={chartType:i,chartInstance:e,getChartThemeName:this.getChartThemeName.bind(this),getChartThemes:this.getChartThemes.bind(this),customChartThemes:this.gridOptionsService.get("customChartThemes"),getGridOptionsChartThemeOverrides:()=>this.getGridOptionsChartThemeOverrides(),getExtraPaddingDirections:()=>{var o,a;return null!==(a=null===(o=this.chartMenu)||void 0===o?void 0:o.getExtraPaddingDirections())&&void 0!==a?a:[]},apiChartThemeOverrides:this.params.chartThemeOverrides,crossFiltering:this.params.crossFiltering,crossFilterCallback:(o,a)=>{this.params.crossFilteringContext.lastSelectedChartId=a?"":this.chartController.getChartId(),a&&this.params.crossFilteringResetCallback(),this.crossFilterService.filter(o,a)},parentElement:this.eChart,grouping:this.chartController.isGrouping(),chartThemeToRestore:this.params.chartThemeName,chartOptionsToRestore:this.params.chartOptionsToRestore,chartPaletteToRestore:this.params.chartPaletteToRestore,seriesChartTypes:this.chartController.getSeriesChartTypes(),translate:(o,a)=>this.chartTranslationService.translate(o,a)};if(this.params.chartOptionsToRestore=void 0,this.chartType=i,this.chartProxy=ro.createChartProxy(n),!this.chartProxy)return void console.warn("AG Grid: invalid chart type supplied: ",n.chartType);const s=this.eChart.querySelector("canvas");s&&s.classList.add("ag-charts-canvas"),this.chartController.setChartProxy(this.chartProxy),this.chartOptionsService=this.createBean(new dL(this.chartController)),this.titleEdit&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}getChartThemeName(){return this.chartController.getChartThemeName()}getChartThemes(){return this.chartController.getThemeNames()}getGridOptionsChartThemeOverrides(){return this.gridOptionsService.get("chartThemeOverrides")}static createChartProxy(e){switch(e.chartType){case"column":case"bar":case"groupedColumn":case"stackedColumn":case"normalizedColumn":case"groupedBar":case"stackedBar":case"normalizedBar":return new W$(e);case"pie":case"donut":case"doughnut":return new lL(e);case"area":case"stackedArea":case"normalizedArea":return new j$(e);case"line":return new z$(e);case"scatter":case"bubble":return new K$(e);case"histogram":return new Y$(e);case"radarLine":case"radarArea":case"nightingale":case"radialColumn":case"radialBar":return new $$(e);case"rangeBar":case"rangeArea":return new nH(e);case"boxPlot":return new q$(e);case"treemap":return new Q$(e);case"sunburst":return new eK(e);case"heatmap":return new sK(e);case"waterfall":return new oK(e);case"columnLineCombo":case"areaColumnCombo":case"customCombo":return new aK(e);default:throw`AG Grid: Unable to create chart as an invalid chartType = '${e.chartType}' was supplied.`}}addDialog(){const e=this.chartTranslationService.translate(this.params.pivotChart?"pivotChartTitle":"rangeChartTitle"),{width:t,height:i}=this.getBestDialogSize();this.chartDialog=new ng({resizable:!0,movable:!0,maximizable:!0,title:e,width:t,height:i,component:this,centered:!0,closable:!0}),this.getContext().createBean(this.chartDialog),this.chartDialog.addEventListener(ng.EVENT_DESTROYED,()=>this.destroy())}getBestDialogSize(){const e=this.popupService.getPopupParent(),t=.75*z.getAbsoluteWidth(e),i=.75*z.getAbsoluteHeight(e),s=this.chartProxy.getChart();let o=this.params.insideDialog?850:s.width,a=this.params.insideDialog?470:s.height;return(o>t||a>i)&&(o=Math.min(o,t),a=Math.round(.553*o),a>i&&(a=i,o=Math.min(o,Math.round(a/.553)))),{width:o,height:a}}addMenu(){this.params.crossFiltering||(this.chartMenu=this.createBean(new lc(this.eChartContainer,this.eMenuContainer,this.chartController,this.chartOptionsService)),this.eChartContainer.appendChild(this.chartMenu.getGui()))}addTitleEditComp(){this.titleEdit=this.createBean(new X_(this.chartMenu)),this.eTitleEditContainer.appendChild(this.titleEdit.getGui()),this.chartProxy&&this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}update(e){e?.chartId&&!this.chartController.update(e)||(this.chartTypeChanged(e)&&this.createChart(),this.updateChart(e?.chartThemeOverrides),e?.chartId&&this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartApiUpdateEvent()}))}updateChart(e){const{chartProxy:t}=this,n=this.chartController.getSelectedValueColState().map(c=>({colId:c.colId,displayName:c.displayName})),s=this.chartController.getChartData();if(this.handleEmptyChart(s,n))return;let a=this.chartController.getChartUpdateParams(e);t.update(a),this.chartProxy.getChart().waitForUpdate().then(()=>{this.chartController.raiseChartUpdatedEvent()}),this.titleEdit.refreshTitle(this.chartController,this.chartOptionsService)}chartTypeChanged(e){const[t,i]=[this.chartController.getChartType(),e?.chartType];return this.chartType!==t||!!i&&this.chartType!==dT(i)}getChartModel(){return this.chartController.getChartModel()}getChartImageDataURL(e){return this.chartProxy.getChartImageDataURL(e)}handleEmptyChart(e,t){const i=this.chartController.isPivotChart()&&!this.chartController.isPivotMode(),n=this.chartController.getChartType();let s=1;this.chartController.isActiveXYChart()?s="bubble"===n?3:2:om(n)&&(s=0);const o=t.length<s||0===e.length;if(this.eChart){const a=i||o;z.setDisplayed(this.eChart,!a),z.setDisplayed(this.eEmpty,a)}return i?(this.eEmpty.innerText=this.chartTranslationService.translate("pivotChartRequiresPivotMode"),!0):!!o&&(this.eEmpty.innerText=this.chartTranslationService.translate("noDataToChart"),!0)}downloadChart(e,t,i){this.chartProxy.downloadChart(e,t,i)}openChartToolPanel(e){this.chartMenu.showMenu(e&&Pb[e])}closeChartToolPanel(){this.chartMenu.hideMenu()}getChartId(){return this.chartController.getChartId()}getUnderlyingChart(){return this.chartProxy.getChartRef()}crossFilteringReset(){this.chartProxy.crossFilteringReset()}setActiveChartCellRange(e){this.getGui().contains(e.relatedTarget)||(this.chartController.setChartRange(!0),this.gridApi.focusService.clearFocusedCell())}getThemeName(){const e=this.gridOptionsService.get("chartThemes")||BB;if(0===e.length)throw new Error("Cannot create chart: no chart themes available.");const{chartThemeName:t}=this.params;return z.includes(e,t)?t:e[0]}getAllKeysInObjects(e){const t={};return e.filter(i=>null!=i).forEach(i=>{Object.keys(i).forEach(n=>t[n]=null)}),Object.keys(t)}validateCustomThemes(){const e=this.getChartThemes(),t=this.gridOptionsService.get("customChartThemes");t&&this.getAllKeysInObjects([t]).forEach(i=>{z.includes(e,i)||console.warn("AG Grid: a custom chart theme with the name '"+i+"' has been supplied but not added to the 'chartThemes' list")})}reactivePropertyUpdate(){this.chartController.setChartThemeName(this.getThemeName(),!0);const e=this.getChartId(),t=this.chartController.isCrossFilterChart()?"crossFilter":this.getChartModel().modelType,i=this.gridOptionsService.get("chartThemeOverrides")||{};this.update({type:`${t}ChartUpdate`,chartId:e,chartThemeOverrides:i})}raiseChartCreatedEvent(){const e={type:G.EVENT_CHART_CREATED,chartId:this.chartController.getChartId()};this.chartProxy.getChart().waitForUpdate().then(()=>{this.eventService.dispatchEvent(e)})}raiseChartDestroyedEvent(){const e={type:G.EVENT_CHART_DESTROYED,chartId:this.chartController.getChartId()};this.eventService.dispatchEvent(e)}destroy(){var e;super.destroy(),this.chartProxy&&this.chartProxy.destroy(),this.destroyBean(this.chartMenu),this.destroyBean(this.titleEdit),this.chartDialog&&this.chartDialog.isAlive()&&this.destroyBean(this.chartDialog),null===(e=this.onDestroyColorSchemeChangeListener)||void 0===e||e.call(this);const t=this.getGui();z.clearElement(t),z.removeFromParent(t),this.raiseChartDestroyedEvent()}}ro.TEMPLATE='<div class="ag-chart" tabindex="-1">\n            <div ref="eChartContainer" tabindex="-1" class="ag-chart-components-wrapper">\n                <div ref="eChart" class="ag-chart-canvas-wrapper"></div>\n                <div ref="eEmpty" class="ag-chart-empty-text ag-unselectable"></div>\n            </div>\n            <div ref="eTitleEditContainer"></div>\n            <div ref="eMenuContainer" class="ag-chart-docked-container" style="min-width: 0px;"></div>\n        </div>',zu([re("eChart")],ro.prototype,"eChart",void 0),zu([re("eChartContainer")],ro.prototype,"eChartContainer",void 0),zu([re("eMenuContainer")],ro.prototype,"eMenuContainer",void 0),zu([re("eEmpty")],ro.prototype,"eEmpty",void 0),zu([re("eTitleEditContainer")],ro.prototype,"eTitleEditContainer",void 0),zu([P("chartCrossFilterService")],ro.prototype,"crossFilterService",void 0),zu([P("chartTranslationService")],ro.prototype,"chartTranslationService",void 0),zu([P("gridApi")],ro.prototype,"gridApi",void 0),zu([P("popupService")],ro.prototype,"popupService",void 0),zu([Se],ro.prototype,"init",null);const bT="31.1.1";var mm=function(r,e){var t={};for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&e.indexOf(i)<0&&(t[i]=r[i]);if(null!=r&&"function"==typeof Object.getOwnPropertySymbols){var n=0;for(i=Object.getOwnPropertySymbols(r);n<i.length;n++)e.indexOf(i[n])<0&&Object.prototype.propertyIsEnumerable.call(r,i[n])&&(t[i[n]]=r[i[n]])}return t};function cK(r){return r=Mo("chartOptions.legend.item.marker.type","shape",r),r=Mo("chartOptions.seriesDefaults.marker.type","shape",r),Mo("chartOptions.legend.padding","spacing",r)}function dK(r){var e;const t=r=oo("chartOptions.seriesDefaults.marker.minSize",r),{chartType:i,chartPalette:n}=t,s=t.chartOptions,{xAxis:o,yAxis:a}=s,c=mm(s,["xAxis","yAxis"]),u=mm(t,["chartType","chartPalette","chartOptions"]),p=function zz(r){switch(r){case"bar":case"stackedBar":case"normalizedBar":return["number","category"];case"groupedBar":return["number","grouped-category"];case"column":case"stackedColumn":case"normalizedColumn":case"line":case"area":case"stackedArea":case"normalizedArea":case"histogram":return["category","number"];case"groupedColumn":return["grouped-category","number"];case"scatter":case"bubble":return["number","number"];default:return}}(i),g=p?.map((y,b)=>Object.assign({type:y},0===b?o:a));return Object.assign({chartType:i,chartThemeName:null!==(e={borneo:"ag-default",material:"ag-material",bright:"ag-vivid"}[n])&&void 0!==e?e:"ag-default",chartOptions:Object.assign(Object.assign({},c),{axes:g,xAxis:o,yAxis:a})},u)}function uK(r){return Mo("chartOptions.seriesDefaults.label.minRequiredAngle","minAngle",r)}function hK(r){return r=oo("chart",r=kp("chartOptions.seriesDefaults.highlightStyle",r,t=>{var{dimOpacity:i}=t,n=mm(t,["dimOpacity"]);return Object.assign(Object.assign({},n),null!=i?{series:{dimOpacity:i}}:{})})),r=oo("chartOptions.seriesDefaults.tooltipClass",r),r=uH("chartOptions.axes[].label.rotation",0,r=oo("chartOptions.seriesDefaults.tooltipTracking",r)),uH("chartOptions.axes[].label.rotation",335,r)}function pK(r){const e=t=>{var{item:i,series:n}=t,s=mm(t,["item","series"]);return Object.assign({item:Object.assign(Object.assign({},s),i)},n?{series:n}:{})};return r=kp("chartOptions.seriesDefaults.highlightStyle",r,e),kp("chartOptions.series[].highlightStyle",r,e)}function fK(r){r=JM("chartOptions.seriesDefaults.fill.opacity","chartOptions.seriesDefaults.fillOpacity",r),r=JM("chartOptions.seriesDefaults.stroke.opacity","chartOptions.seriesDefaults.strokeOpacity",r),r=oo("chartOptions.seriesDefaults.fill",r=JM("chartOptions.seriesDefaults.stroke.width","chartOptions.seriesDefaults.strokeWidth",r)),r=oo("chartOptions.seriesDefaults.stroke",r),r=oo("chartOptions.seriesDefaults.callout.colors",r),r=oo("chartOptions.xAxis",r);const e=r=oo("chartOptions.yAxis",r),{chartType:t}=e,i=e.chartOptions,{axes:n,seriesDefaults:o}=i,a=mm(i,["axes","series","seriesDefaults"]),c=mm(e,["chartType","chartOptions"]),u=dT(t),p=ud(u),g=[p],m={};if(!XN(p)){const b={top:{},bottom:{},left:{},right:{}},_=n.map(E=>{var{type:D}=E,R=mm(E,["type"]);return{[D]:Object.assign(Object.assign({},b),R)}}).reduce(pH,{});IB.filter(E=>null==_[E]).forEach(E=>{_[E]=Object.assign({},b)}),m.axes=_}const y=g.map(b=>({[b]:Object.assign(Object.assign(Object.assign({},m),{series:o}),a)})).reduce(pH,{});return Object.assign(Object.assign({},c),{chartType:u,chartOptions:y})}function gK(r){return r=oo("chartOptions.*.title.padding",r),r=oo("chartOptions.*.subtitle.padding",r),uL("chartOptions.*.axes.*.title.enabled",!1,r=oo("chartOptions.*.axes.*.title.padding",r))}function mK(r){return r=Mo("chartOptions.pie.series.callout","calloutLine",r),r=Mo("chartOptions.pie.series.label","calloutLabel",r),r=Mo("chartOptions.pie.series.labelKey","sectorLabelKey",r),r=Mo("chartOptions.pie.series.labelName","sectorLabelName",r),r=Mo("chartOptions.donut.series.callout","calloutLine",r),r=Mo("chartOptions.donut.series.label","calloutLabel",r),r=Mo("chartOptions.donut.series.labelKey","sectorLabelKey",r),Mo("chartOptions.donut.series.labelName","sectorLabelName",r)}function vK(r){return r=wT("chartOptions.scatter.series.fill","chartOptions.scatter.series.marker.fill",r),r=wT("chartOptions.scatter.series.fillOpacity","chartOptions.scatter.series.marker.fillOpacity",r),r=wT("chartOptions.scatter.series.stroke","chartOptions.scatter.series.marker.stroke",r),r=wT("chartOptions.scatter.series.strokeOpacity","chartOptions.scatter.series.marker.strokeOpacity",r),JM("chartOptions.scatter.series.paired","chartOptions.scatter.paired",r=wT("chartOptions.scatter.series.strokeWidth","chartOptions.scatter.series.marker.strokeWidth",r))}function lH(r){return oo("chartOptions.axes[].tick.count",r)}function cH(r){return kp("chartOptions.*.tooltip",r,t=>{var i,n,s,o,{tracking:a}=t,c=mm(t,["tracking"]);const u=Object.assign({},c);return!1===a?(null!==(i=u.position)&&void 0!==i||(u.position={type:"pointer"}),null!==(n=u.range)&&void 0!==n||(u.range="nearest")):!0===a&&(null!==(s=u.position)&&void 0!==s||(u.position={type:"node"}),null!==(o=u.range)&&void 0!==o||(u.range="nearest")),u})}function CK(r){return r=Mo("chartOptions.pie.series.labelKey","sectorLabelKey",r),uL("chartOptions.common.legend.position","right",r=hH("chartOptions.common.legend.enabled",!0,r=oo("chartOptions.*.series.flipXY",r=cH(r=lH(r=Mo("chartOptions.pie.series.labelName","sectorLabelName",r))))))}function yK(r){const t=Mo("chartOptions.column","bar",r),i={"ag-pastel":"ag-sheets","ag-solar":"ag-polychroma"}[t.chartThemeName]||t.chartThemeName;return Object.assign(Object.assign({},t),{chartThemeName:i})}function fa(r,e,t){if(dH(r)>dH(e.version)){const i=t(e);return i.version=r,i}return e}function dH(r){const{major:e,minor:t,patch:i}=function _K(r){const e="string"==typeof r?r.split(".").map(t=>Number(t)):[];if(3!==e.length||e.some(t=>isNaN(t)))throw new Error("AG Grid - Illegal version string: "+r);return{major:e[0],minor:e[1],patch:e[2]}}(r);return 1e4*e+100*t+i}function uH(r,e,t){return vm(r,!0,t,(i,n)=>{i[n]===e&&delete i[n]})}function uL(r,e,t){return vm(r,!1,t,(i,n)=>{null==i[n]&&(i[n]=e)})}function hH(r,e,t){var i;"string"==typeof r&&(r=r.split("."));const n=r[0];return r.length>1&&(t[n]=hH(r.slice(1),e,null!==(i=t[n])&&void 0!==i?i:{})),Object.keys(t).includes(n)||(t[n]=e),t}function JM(r,e,t){let i,n=!1;return t=vm(r,!0,t,(s,o)=>{n=!0,i=s[o],delete s[o]}),n?vm(e,!1,t,(s,o)=>{s[o]=i}):t}function wT(r,e,t){let i,n=!1;return t=vm(r,!0,t,(s,o)=>{n=!0,i=s[o],delete s[o]}),n?vm(e,!1,t,(s,o)=>{void 0===s[o]&&(s[o]=i)}):t}function Mo(r,e,t){return vm(r,!0,t,(i,n)=>{i[e]=i[n],delete i[n]})}function oo(r,e){return vm(r,!0,e,(t,i)=>delete t[i])}function vm(r,e,t,i){const n=r instanceof Array?r:r.split("."),s=n.slice(0,n.length-1),o=n[n.length-1];return kp(s,t,a=>{const c=Object.keys(a).includes(o);if(e&&!c)return a;const u=Object.assign({},a);return i(u,o),u})}function kp(r,e,t){const i=r instanceof Array?r:r.split(".");if(e=Object.assign({},e),0===i.length)return t(e);if(i[0].startsWith("{")){const n=i[0].substring(1,i[0].lastIndexOf("}")).split(",");for(const s of n)null!=e[s]&&(e[s]=kp(i.slice(1),e[s],t))}else if(i[0].endsWith("[]")){const n=i[0].substring(0,r[0].indexOf("["));e[n]instanceof Array&&(e[n]=e[n].map(s=>kp(i.slice(1),s,t)))}else if("*"===i[0])for(const n in e)e[n]=kp(i.slice(1),e[n],t);else null!=e[i[0]]&&(e[i[0]]=kp(i.slice(1),e[i[0]],t));return e}const pH=(r,e)=>Object.assign(Object.assign({},r),e);var QM=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Cm=class extends Ee{constructor(){super(...arguments),this.activeCharts=new Set,this.activeChartComps=new Set,this.crossFilteringContext={lastSelectedChartId:""},this.isEnterprise=()=>qN.enterpriseModule.isEnterprise}updateChart(e){const t=e.chartType;if(t&&xB(t)&&!this.isEnterprise())return void yt.__warnEnterpriseChartDisabled(t);if(0===this.activeChartComps.size)return void console.warn("AG Grid - No active charts to update.");const i=[...this.activeChartComps].find(n=>n.getChartId()===e.chartId);i?i.update(e):console.warn(`AG Grid - Unable to update chart. No active chart found with ID: ${e.chartId}.`)}getChartModels(){const e=[];return this.activeChartComps.forEach(i=>e.push((i=>Object.assign(Object.assign({},i),{version:bT}))(i.getChartModel()))),e}getChartRef(e){let t;return this.activeCharts.forEach(i=>{i.chartId===e&&(t=i)}),t}getChartComp(e){let t;return this.activeChartComps.forEach(i=>{i.getChartId()===e&&(t=i)}),t}getChartImageDataURL(e){let t;return this.activeChartComps.forEach(i=>{i.getChartId()===e.chartId&&(t=i.getChartImageDataURL(e.fileFormat))}),t}downloadChart(e){Array.from(this.activeChartComps).find(i=>i.getChartId()===e.chartId)?.downloadChart(e.dimensions,e.fileName,e.fileFormat)}openChartToolPanel(e){Array.from(this.activeChartComps).find(i=>i.getChartId()===e.chartId)?.openChartToolPanel(e.panel)}closeChartToolPanel(e){Array.from(this.activeChartComps).find(i=>i.getChartId()===e)?.closeChartToolPanel()}createChartFromCurrentRange(e="groupedColumn"){const t=this.getSelectedRange();return this.createChart(t,e)}restoreChart(e,t){if(!e)return void console.warn("AG Grid - unable to restore chart as no chart model is provided");e.version!==bT&&(e=function lK(r){return null==r.version&&(r.version=function bK(r){var e,t;const i=r;if(null!=r.version)return r.version;const n=(g,...m)=>Object.keys(g||{}).some(y=>m.includes(y)),s=i.chartOptions,o=n(s,"seriesDefaults")?s?.seriesDefaults:s?.[Object.keys(s)[0]],a={"27.0.0":n(i,"seriesChartTypes"),"26.2.0":!n(s,"seriesDefaults"),"26.1.0":n(o?.highlightStyle,"item"),"26.0.0":n(o?.highlightStyle,"series"),"25.1.0":n(o?.label,"minAngle"),"25.0.0":n(i,"modelType","aggFunc","unlinkChart","suppressChartRanges")||n(o,"lineDash","lineDashOffset"),"24.0.0":n(i,"chartThemeName","chart")||n(s,"series"),"23.2.0":n(s,"navigator"),"23.0.0":n(null===(t=null===(e=s?.legend)||void 0===e?void 0:e.item)||void 0===t?void 0:t.marker,"shape"),"22.1.0":n(i,"chartPalette","chartType")},c="27.1.0",u=Object.entries(a).filter(([g,m])=>m),[p=c]=u[0];return p}(r)),r=fa("23.0.0",r,cK),r=fa("24.0.0",r,dK),r=fa("25.1.0",r,uK),r=fa("26.0.0",r,hK),r=fa("26.1.0",r,pK),r=fa("26.2.0",r,fK),r=fa("28.0.0",r,gK),r=fa("28.2.0",r,mK),r=fa("29.0.0",r,vK),r=fa("29.1.0",r,lH),r=fa("29.2.0",r,cH),r=fa("30.0.0",r,CK),r=function SK(r){return r=oo("chartOptions.*.width",r),uL("chartOptions.*.axes.category.label.autoRotate",!0,r=oo("chartOptions.*.height",r))}(r=fa("31.0.0",r,yK)),fa(bT,r,t=>t)}(e));const i={cellRange:e.cellRange,chartType:e.chartType,chartThemeName:e.chartThemeName,chartContainer:t,suppressChartRanges:e.suppressChartRanges,aggFunc:e.aggFunc,unlinkChart:e.unlinkChart,seriesChartTypes:e.seriesChartTypes},n=o=>this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(o):void 0;if("pivot"===e.modelType){this.gridOptionsService.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"});const c=n({rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(u=>u.getColId())});return c?this.createChart(c,i.chartType,i.chartThemeName,!0,!0,i.chartContainer,void 0,void 0,i.unlinkChart,!1,e.chartOptions):void console.warn("AG Grid - unable to create chart as there are no columns in the grid.")}const s=n(i.cellRange);if(s)return this.createChart(s,i.chartType,i.chartThemeName,!1,i.suppressChartRanges,i.chartContainer,i.aggFunc,void 0,i.unlinkChart,!1,e.chartOptions,e.chartPalette,i.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")}createRangeChart(e){var t;const i=null===(t=this.rangeService)||void 0===t?void 0:t.createCellRangeFromCellRangeParams(e.cellRange);if(i)return this.createChart(i,e.chartType,e.chartThemeName,!1,e.suppressChartRanges,e.chartContainer,e.aggFunc,e.chartThemeOverrides,e.unlinkChart,void 0,void 0,void 0,e.seriesChartTypes);console.warn("AG Grid - unable to create chart as no range is selected")}createPivotChart(e){this.gridOptionsService.updateGridOptions({options:{pivotMode:!0},source:"pivotChart"});const t={rowStartIndex:null,rowStartPinned:void 0,rowEndIndex:null,rowEndPinned:void 0,columns:this.columnModel.getAllDisplayedColumns().map(n=>n.getColId())},i=this.rangeService?this.rangeService.createCellRangeFromCellRangeParams(t):void 0;if(i)return this.createChart(i,e.chartType,e.chartThemeName,!0,!0,e.chartContainer,void 0,e.chartThemeOverrides,e.unlinkChart);console.warn("AG Grid - unable to create chart as there are no columns in the grid.")}createCrossFilterChart(e){var t;const i=null===(t=this.rangeService)||void 0===t?void 0:t.createCellRangeFromCellRangeParams(e.cellRange);if(i)return this.createChart(i,e.chartType,e.chartThemeName,!1,!(typeof e.suppressChartRanges<"u"&&null!==e.suppressChartRanges)||e.suppressChartRanges,e.chartContainer,e.aggFunc,e.chartThemeOverrides,e.unlinkChart,!0);console.warn("AG Grid - unable to create chart as no range is selected")}createChart(e,t,i,n=!1,s=!1,o,a,c,u=!1,p=!1,g,m,y){if(xB(t)&&!this.isEnterprise())return void yt.__warnEnterpriseChartDisabled(t);const b=this.gridOptionsService.getCallback("createChartContainer"),_={chartId:this.generateId(),pivotChart:n,cellRange:e,chartType:dT(t),chartThemeName:i,insideDialog:!(o||b),suppressChartRanges:s,aggFunc:a,chartThemeOverrides:c,unlinkChart:u,crossFiltering:p,crossFilteringContext:this.crossFilteringContext,chartOptionsToRestore:g,chartPaletteToRestore:m,seriesChartTypes:y,crossFilteringResetCallback:()=>this.activeChartComps.forEach(R=>R.crossFilteringReset())},E=new ro(_);this.context.createBean(E);const D=this.createChartRef(E);if(o){o.appendChild(E.getGui());const R=this.environment.getTheme();R.el&&!R.el.contains(o)&&o.classList.add(R.theme)}else b?b(D):E.addEventListener(ro.EVENT_DESTROYED,()=>{this.activeChartComps.delete(E),this.activeCharts.delete(D)});return D}createChartRef(e){const t={destroyChart:()=>{this.activeCharts.has(t)&&(this.context.destroyBean(e),this.activeChartComps.delete(e),this.activeCharts.delete(t))},chartElement:e.getGui(),chart:e.getUnderlyingChart(),chartId:e.getChartModel().chartId};return this.activeCharts.add(t),this.activeChartComps.add(e),t}getSelectedRange(){const e=this.rangeService.getCellRanges();return e.length>0?e[0]:{}}generateId(){return`id-${Math.random().toString(36).substring(2,18)}`}destroyAllActiveCharts(){this.activeCharts.forEach(e=>e.destroyChart())}};var hL;Cm.CHARTS_VERSION="9.1.1",QM([Pt("rangeService")],Cm.prototype,"rangeService",void 0),QM([P("columnModel")],Cm.prototype,"columnModel",void 0),QM([Js],Cm.prototype,"destroyAllActiveCharts",null),Cm=QM([He("chartService")],Cm);let ex=hL=class extends Ee{translate(e,t){return this.localeService.getLocaleTextFunc()(e,hL.DEFAULT_TRANSLATIONS[e]||t)}};ex.DEFAULT_TRANSLATIONS={pivotChartTitle:"Pivot Chart",rangeChartTitle:"Range Chart",settings:"Settings",data:"Data",format:"Format",categories:"Categories",defaultCategory:"(None)",series:"Series",xyValues:"X Y Values",paired:"Paired Mode",axis:"Axis",radiusAxis:"Radius Axis",navigator:"Navigator",color:"Color",thickness:"Thickness",preferredLength:"Preferred Length",xType:"X Type",automatic:"Automatic",category:"Category",number:"Number",time:"Time",autoRotate:"Auto Rotate",xRotation:"X Rotation",yRotation:"Y Rotation",labelRotation:"Rotation",circle:"Circle",orientation:"Orientation",polygon:"Polygon",fixed:"Fixed",parallel:"Parallel",perpendicular:"Perpendicular",radiusAxisPosition:"Position",ticks:"Ticks",width:"Width",height:"Height",length:"Length",padding:"Padding",spacing:"Spacing",chart:"Chart",title:"Title",titlePlaceholder:"Chart title - double click to edit",background:"Background",font:"Font",top:"Top",right:"Right",bottom:"Bottom",left:"Left",labels:"Labels",calloutLabels:"Callout Labels",sectorLabels:"Sector Labels",positionRatio:"Position Ratio",size:"Size",shape:"Shape",minSize:"Minimum Size",maxSize:"Maximum Size",legend:"Legend",position:"Position",markerSize:"Marker Size",markerStroke:"Marker Stroke",markerPadding:"Marker Padding",itemSpacing:"Item Spacing",itemPaddingX:"Item Padding X",itemPaddingY:"Item Padding Y",layoutHorizontalSpacing:"Horizontal Spacing",layoutVerticalSpacing:"Vertical Spacing",strokeWidth:"Stroke Width",offset:"Offset",offsets:"Offsets",tooltips:"Tooltips",callout:"Callout",markers:"Markers",shadow:"Shadow",blur:"Blur",xOffset:"X Offset",yOffset:"Y Offset",lineWidth:"Line Width",lineDash:"Line Dash",lineDashOffset:"Dash Offset",normal:"Normal",bold:"Bold",italic:"Italic",boldItalic:"Bold Italic",predefined:"Predefined",fillOpacity:"Fill Opacity",strokeColor:"Line Color",strokeOpacity:"Line Opacity",histogramBinCount:"Bin count",connectorLine:"Connector Line",seriesItems:"Series Items",seriesItemType:"Item Type",seriesItemPositive:"Positive",seriesItemNegative:"Negative",seriesItemLabels:"Item Labels",columnGroup:"Column",barGroup:"Bar",pieGroup:"Pie",lineGroup:"Line",scatterGroup:"X Y (Scatter)",areaGroup:"Area",polarGroup:"Polar",statisticalGroup:"Statistical",hierarchicalGroup:"Hierarchical",specializedGroup:"Specialized",combinationGroup:"Combination",groupedColumnTooltip:"Grouped",stackedColumnTooltip:"Stacked",normalizedColumnTooltip:"100% Stacked",groupedBarTooltip:"Grouped",stackedBarTooltip:"Stacked",normalizedBarTooltip:"100% Stacked",pieTooltip:"Pie",donutTooltip:"Donut",lineTooltip:"Line",groupedAreaTooltip:"Area",stackedAreaTooltip:"Stacked",normalizedAreaTooltip:"100% Stacked",scatterTooltip:"Scatter",bubbleTooltip:"Bubble",histogramTooltip:"Histogram",radialColumnTooltip:"Radial Column",radialBarTooltip:"Radial Bar",radarLineTooltip:"Radar Line",radarAreaTooltip:"Radar Area",nightingaleTooltip:"Nightingale",rangeBarTooltip:"Range Bar",rangeAreaTooltip:"Range Area",boxPlotTooltip:"Box Plot",treemapTooltip:"Treemap",sunburstTooltip:"Sunburst",heatmapTooltip:"Heatmap",waterfallTooltip:"Waterfall",columnLineComboTooltip:"Column & Line",areaColumnComboTooltip:"Area & Column",customComboTooltip:"Custom Combination",innerRadius:"Inner Radius",startAngle:"Start Angle",endAngle:"End Angle",reverseDirection:"Reverse Direction",groupPadding:"Group Padding",seriesPadding:"Series Padding",group:"Group",tile:"Tile",whisker:"Whisker",cap:"Cap",capLengthRatio:"Length Ratio",labelPlacement:"Placement",inside:"Inside",outside:"Outside",noDataToChart:"No data available to be charted.",pivotChartRequiresPivotMode:"Pivot Chart requires Pivot Mode enabled.",chartSettingsToolbarTooltip:"Menu",chartLinkToolbarTooltip:"Linked to Grid",chartUnlinkToolbarTooltip:"Unlinked from Grid",chartDownloadToolbarTooltip:"Download Chart",histogramFrequency:"Frequency",seriesChartType:"Series Chart Type",seriesType:"Series Type",secondaryAxis:"Secondary Axis"},ex=hL=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He("chartTranslationService")],ex);var ix,tx=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let Q_=ix=class extends Ee{filter(e,t=!1){const i=this.gridApi.getFilterModel();if(t)return void this.resetFilters(i);let n=ix.extractFilterColId(e);this.isValidColumnFilter(n)?this.updateFilters(i,e,n):console.warn("AG Grid: cross filtering requires a 'agSetColumnFilter' or 'agMultiColumnFilter' to be defined on the column with id: '"+n+"'")}resetFilters(e){Object.keys(e).length>0&&(this.gridApi.setFilterModel(null),this.gridApi.onFilterChanged())}updateFilters(e,t,i){let n=ix.extractFilterColId(t),s=t.datum[n];if(void 0===s)return;let o=s.toString();if(t.event.metaKey||t.event.ctrlKey){const a=this.getCurrentGridValuesForCategory(i);let u;z.includes(a,o)?u=a.filter(p=>p!==o):(u=a,u.push(o)),e[i]=this.getUpdatedFilterModel(i,u)}else e={[i]:this.getUpdatedFilterModel(i,[o])};this.gridApi.setFilterModel(e)}getUpdatedFilterModel(e,t){return"agMultiColumnFilter"===this.getColumnFilterType(e)?{filterType:"multi",filterModels:[null,{filterType:"set",values:t}]}:{filterType:"set",values:t}}getCurrentGridValuesForCategory(e){let t=[];const i=this.getColumnById(e);return this.gridApi.forEachNodeAfterFilter(n=>{if(i&&!n.group){const s=this.valueService.getValue(i,n)+"";t.includes(s)||t.push(s)}}),t}static extractFilterColId(e){return e.xKey||e.calloutLabelKey}isValidColumnFilter(e){e.indexOf("-filtered-out")&&(e=e.replace("-filtered-out",""));let t=this.getColumnFilterType(e);return"boolean"==typeof t?t:z.includes(["agSetColumnFilter","agMultiColumnFilter"],t)}getColumnFilterType(e){let t=this.getColumnById(e);if(t)return t.getColDef().filter}getColumnById(e){return this.columnModel.getGridColumn(e)}};tx([P("gridApi")],Q_.prototype,"gridApi",void 0),tx([P("columnModel")],Q_.prototype,"columnModel",void 0),tx([P("valueService")],Q_.prototype,"valueService",void 0),Q_=ix=tx([He("chartCrossFilterService")],Q_);var $u=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};let dc=class extends Ee{constructor(){super(...arguments),this.cellRanges=[],this.bodyScrollListener=this.onBodyScroll.bind(this),this.dragging=!1,this.intersectionRange=!1}init(){this.addManagedListener(this.eventService,G.EVENT_NEW_COLUMNS_LOADED,()=>this.onColumnsChanged()),this.addManagedListener(this.eventService,G.EVENT_COLUMN_VISIBLE,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_VALUE_CHANGED,this.onColumnsChanged.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_MODE_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,G.EVENT_COLUMN_ROW_GROUP_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PIVOT_CHANGED,()=>this.removeAllCellRanges()),this.addManagedListener(this.eventService,G.EVENT_COLUMN_GROUP_OPENED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_MOVED,this.refreshLastRangeStart.bind(this)),this.addManagedListener(this.eventService,G.EVENT_COLUMN_PINNED,this.refreshLastRangeStart.bind(this)),this.ctrlsService.whenReady(()=>{const e=this.ctrlsService.getGridBodyCtrl();this.autoScrollService=new Ov({scrollContainer:e.getBodyViewportElement(),scrollAxis:"xy",getVerticalPosition:()=>e.getScrollFeature().getVScrollPosition().top,setVerticalPosition:t=>e.getScrollFeature().setVerticalScrollPosition(t),getHorizontalPosition:()=>e.getScrollFeature().getHScrollPosition().left,setHorizontalPosition:t=>e.getScrollFeature().setHorizontalScrollPosition(t),shouldSkipVerticalScroll:()=>!this.gridOptionsService.isDomLayout("normal"),shouldSkipHorizontalScroll:()=>!e.getScrollFeature().isHorizontalScrollShowing()})})}onColumnsChanged(){this.refreshLastRangeStart();const e=this.columnModel.getAllDisplayedColumns();this.cellRanges.forEach(i=>{const n=i.columns;i.columns=i.columns.filter(o=>o.isVisible()&&-1!==e.indexOf(o)),!z.areEqual(n,i.columns)&&this.dispatchChangedEvent(!1,!0,i.id)});const t=this.cellRanges.length;this.cellRanges=this.cellRanges.filter(i=>i.columns.length>0),t>this.cellRanges.length&&this.dispatchChangedEvent(!1,!0)}refreshLastRangeStart(){const e=z.last(this.cellRanges);!e||this.refreshRangeStart(e)}isContiguousRange(e){const t=e.columns;if(!t.length)return!1;const i=this.columnModel.getAllDisplayedColumns(),n=t.map(s=>i.indexOf(s)).sort((s,o)=>s-o);return z.last(n)-n[0]+1===t.length}getRangeStartRow(e){return e.startRow&&e.endRow?this.rowPositionUtils.before(e.startRow,e.endRow)?e.startRow:e.endRow:{rowIndex:0,rowPinned:this.pinnedRowModel.getPinnedTopRowCount()>0?"top":null}}getRangeEndRow(e){if(e.startRow&&e.endRow)return this.rowPositionUtils.before(e.startRow,e.endRow)?e.endRow:e.startRow;const t=this.pinnedRowModel.getPinnedBottomRowCount();return t>0?{rowIndex:t-1,rowPinned:"bottom"}:{rowIndex:this.rowModel.getRowCount()-1,rowPinned:null}}setRangeToCell(e,t=!1){if(!this.gridOptionsService.get("enableRangeSelection"))return;const i=this.calculateColumnsBetween(e.column,e.column);if(!i)return;(this.gridOptionsService.get("suppressMultiRangeSelection")||!t||z.missing(this.cellRanges))&&this.removeAllCellRanges(!0);const s={rowIndex:e.rowIndex,rowPinned:e.rowPinned};this.cellRanges.push({startRow:s,endRow:s,columns:i,startColumn:e.column}),this.setNewestRangeStartCell(e),this.onDragStop(),this.dispatchChangedEvent(!0,!0)}extendLatestRangeToCell(e){if(this.isEmpty()||!this.newestRangeStartCell)return;const t=z.last(this.cellRanges);this.updateRangeEnd(t,e)}updateRangeEnd(e,t,i=!1){const s=this.calculateColumnsBetween(e.startColumn,t.column);!s||this.isLastCellOfRange(e,t)||(e.columns=s,e.endRow={rowIndex:t.rowIndex,rowPinned:t.rowPinned},i||this.dispatchChangedEvent(!0,!0,e.id))}refreshRangeStart(e){const{startColumn:t,columns:i}=e,n=(u,p)=>{const g=e.columns.filter(m=>m!==u);u?(e.startColumn=u,e.columns=p?[u,...g]:[...g,u]):e.columns=g},{left:s,right:o}=this.getRangeEdgeColumns(e);t!==i[0]||t===s?t!==z.last(i)||t!==o||n(o,!1):n(s,!0)}getRangeEdgeColumns(e){const t=this.columnModel.getAllDisplayedColumns(),i=e.columns.map(n=>t.indexOf(n)).filter(n=>n>-1).sort((n,s)=>n-s);return{left:t[i[0]],right:t[z.last(i)]}}extendLatestRangeInDirection(e){if(this.isEmpty()||!this.newestRangeStartCell)return;const t=e.key,i=e.ctrlKey||e.metaKey,n=z.last(this.cellRanges),s=this.newestRangeStartCell,o=n.columns[0],a=z.last(n.columns),m=this.cellNavigationService.getNextCellToFocus(t,{column:s.column===o?a:o,rowIndex:n.endRow.rowIndex,rowPinned:n.endRow.rowPinned},i);return m?(this.setCellRange({rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,rowEndIndex:m.rowIndex,rowEndPinned:m.rowPinned,columnStart:s.column,columnEnd:m.column}),m):void 0}setCellRange(e){!this.gridOptionsService.get("enableRangeSelection")||(this.removeAllCellRanges(!0),this.addCellRange(e))}setCellRanges(e){z.shallowCompare(this.cellRanges,e)||(this.removeAllCellRanges(!0),e.forEach(t=>{t.columns&&t.startRow&&this.setNewestRangeStartCell({rowIndex:t.startRow.rowIndex,rowPinned:t.startRow.rowPinned,column:t.columns[0]}),this.cellRanges.push(t)}),this.dispatchChangedEvent(!1,!0))}setNewestRangeStartCell(e){this.newestRangeStartCell=e}clearCellRangeCellValues(e){let{cellRanges:t}=e;const{cellEventSource:i="rangeService",dispatchWrapperEvents:n,wrapperEventSource:s="deleteKey"}=e;n&&this.eventService.dispatchEvent({type:G.EVENT_RANGE_DELETE_START,source:s}),t||(t=this.cellRanges),t.forEach(o=>{this.forEachRowInRange(o,a=>{const c=this.rowPositionUtils.getRowNode(a);if(c)for(let u=0;u<o.columns.length;u++){const p=this.columnModel.getGridColumn(o.columns[u]);!p||!p.isCellEditable(c)||c.setDataValue(p,null,i)}})}),n&&this.eventService.dispatchEvent({type:G.EVENT_RANGE_DELETE_END,source:s})}createCellRangeFromCellRangeParams(e){let t,i=!1;if(e.columns)t=e.columns.map(o=>this.columnModel.getColumnWithValidation(o)).filter(o=>o);else{const o=this.columnModel.getColumnWithValidation(e.columnStart),a=this.columnModel.getColumnWithValidation(e.columnEnd);if(!o||!a)return;t=this.calculateColumnsBetween(o,a),t&&t.length&&(i=t[0]!==o)}if(t)return{startRow:null!=e.rowStartIndex?{rowIndex:e.rowStartIndex,rowPinned:e.rowStartPinned||null}:void 0,endRow:null!=e.rowEndIndex?{rowIndex:e.rowEndIndex,rowPinned:e.rowEndPinned||null}:void 0,columns:t,startColumn:i?z.last(t):t[0]}}addCellRange(e){if(!this.gridOptionsService.get("enableRangeSelection"))return;const t=this.createCellRangeFromCellRangeParams(e);t&&(t.startRow&&this.setNewestRangeStartCell({rowIndex:t.startRow.rowIndex,rowPinned:t.startRow.rowPinned,column:t.startColumn}),this.cellRanges.push(t),this.dispatchChangedEvent(!1,!0,t.id))}getCellRanges(){return this.cellRanges}isEmpty(){return 0===this.cellRanges.length}isMoreThanOneCell(){const e=this.cellRanges.length;if(0===e)return!1;if(e>1)return!0;const t=this.cellRanges[0],i=this.getRangeStartRow(t),n=this.getRangeEndRow(t);return i.rowPinned!==n.rowPinned||i.rowIndex!==n.rowIndex||1!==t.columns.length}areAllRangesAbleToMerge(){const e=new Map;if(this.cellRanges.length<=1)return!0;let i;this.cellRanges.forEach(n=>{this.forEachRowInRange(n,s=>{const o=`${s.rowPinned||"normal"}_${s.rowIndex}`,a=e.get(o),c=n.columns.map(u=>u.getId());if(a){const u=c.filter(p=>-1===a.indexOf(p));a.push(...u)}else e.set(o,c)})});for(const n of e.values()){const s=n.sort().join();if(void 0!==i){if(i!==s)return!1}else i=s}return!0}forEachRowInRange(e,t){const i=this.getRangeStartRow(e),n=this.getRangeEndRow(e);let s=i;for(;s&&(t(s),!this.rowPositionUtils.sameRow(s,n));)s=this.cellNavigationService.getRowBelow(s)}removeAllCellRanges(e){this.isEmpty()||(this.onDragStop(),this.cellRanges.length=0,e||this.dispatchChangedEvent(!1,!0))}onBodyScroll(){this.dragging&&this.lastMouseEvent&&this.onDragging(this.lastMouseEvent)}isCellInAnyRange(e){return this.getCellRangeCount(e)>0}isCellInSpecificRange(e,t){const i=null!==t.columns&&z.includes(t.columns,e.column),n=this.isRowInRange(e.rowIndex,e.rowPinned,t);return i&&n}isLastCellOfRange(e,t){const{startRow:i,endRow:n}=e,s=this.rowPositionUtils.before(i,n)?n:i,o=t.rowIndex===s.rowIndex&&t.rowPinned===s.rowPinned,a=e.columns[0],c=z.last(e.columns);return t.column===(e.startColumn===a?c:a)&&o}isBottomRightCell(e,t){const i=this.columnModel.getAllDisplayedColumns(),n=e.columns.map(p=>i.indexOf(p)).sort((p,g)=>p-g),{startRow:s,endRow:o}=e,a=this.rowPositionUtils.before(s,o)?o:s,c=i.indexOf(t.column)===z.last(n),u=t.rowIndex===a.rowIndex&&z.makeNull(t.rowPinned)===z.makeNull(a.rowPinned);return c&&u}getCellRangeCount(e){return this.isEmpty()?0:this.cellRanges.filter(t=>this.isCellInSpecificRange(e,t)).length}isRowInRange(e,t,i){const n=this.getRangeStartRow(i),s=this.getRangeEndRow(i),o={rowIndex:e,rowPinned:t||null};if(o.rowIndex===n.rowIndex&&o.rowPinned==n.rowPinned||o.rowIndex===s.rowIndex&&o.rowPinned==s.rowPinned)return!0;const u=!this.rowPositionUtils.before(o,n),p=this.rowPositionUtils.before(o,s);return u&&p}getDraggingRange(){return this.draggingRange}onDragStart(e){if(!this.gridOptionsService.get("enableRangeSelection"))return;const{ctrlKey:t,metaKey:i,shiftKey:n}=e,s=t||i,a=!this.gridOptionsService.get("suppressMultiRangeSelection")&&s,c=n&&z.existsAndNotEmpty(this.cellRanges);!a&&(!c||z.exists(z.last(this.cellRanges).type))&&this.removeAllCellRanges(!0);const u=this.dragService.getStartTarget();if(u&&this.updateValuesOnMove(u),this.lastCellHovered){if(this.dragging=!0,this.lastMouseEvent=e,this.intersectionRange=a&&this.getCellRangeCount(this.lastCellHovered)>1,c||this.setNewestRangeStartCell(this.lastCellHovered),this.cellRanges.length>0)this.draggingRange=z.last(this.cellRanges);else{const p={rowIndex:this.lastCellHovered.rowIndex,rowPinned:this.lastCellHovered.rowPinned};this.draggingRange={startRow:p,endRow:p,columns:[this.lastCellHovered.column],startColumn:this.newestRangeStartCell.column},this.cellRanges.push(this.draggingRange)}this.ctrlsService.getGridBodyCtrl().addScrollEventListener(this.bodyScrollListener),this.dispatchChangedEvent(!0,!1,this.draggingRange.id)}}intersectLastRange(e){if(e&&this.dragging||this.gridOptionsService.get("suppressMultiRangeSelection")||this.isEmpty())return;const t=z.last(this.cellRanges),i=this.getRangeStartRow(t),n=this.getRangeEndRow(t),s=[];this.cellRanges.slice(0,-1).forEach(o=>{const a=this.getRangeStartRow(o),c=this.getRangeEndRow(o),u=o.columns,p=u.filter(m=>-1===t.columns.indexOf(m));if(p.length===u.length)return void s.push(o);if(this.rowPositionUtils.before(n,a)||this.rowPositionUtils.before(c,i))return void s.push(o);const g=s.length;if(this.rowPositionUtils.before(a,i)){const m={columns:[...u],startColumn:t.startColumn,startRow:Object.assign({},a),endRow:this.cellNavigationService.getRowAbove(i)};s.push(m)}if(p.length>0){const m={columns:p,startColumn:z.includes(p,t.startColumn)?t.startColumn:p[0],startRow:this.rowPositionUtils.rowMax([Object.assign({},i),Object.assign({},a)]),endRow:this.rowPositionUtils.rowMin([Object.assign({},n),Object.assign({},c)])};s.push(m)}this.rowPositionUtils.before(n,c)&&s.push({columns:[...u],startColumn:t.startColumn,startRow:this.cellNavigationService.getRowBelow(n),endRow:Object.assign({},c)}),s.length-g==1&&(s[s.length-1].id=o.id)}),this.cellRanges=s,e&&this.dispatchChangedEvent(!1,!0)}updateValuesOnMove(e){const i=z.getCtrlForEventTarget(this.gridOptionsService,e,Pc.DOM_DATA_KEY_CELL_CTRL)?.getCellPosition();this.cellHasChanged=!1,!(!i||this.lastCellHovered&&this.cellPositionUtils.equals(i,this.lastCellHovered))&&(this.lastCellHovered&&(this.cellHasChanged=!0),this.lastCellHovered=i)}onDragging(e){if(!this.dragging||!e)return;this.updateValuesOnMove(e.target),this.lastMouseEvent=e;const t=this.lastCellHovered,i=o=>t&&t.rowPinned===o&&this.newestRangeStartCell.rowPinned===o,n=i("top")||i("bottom");if(this.autoScrollService.check(e,n),!this.cellHasChanged)return;const s=this.calculateColumnsBetween(this.newestRangeStartCell.column,t.column);!s||(this.draggingRange.endRow={rowIndex:t.rowIndex,rowPinned:t.rowPinned},this.draggingRange.columns=s,this.dispatchChangedEvent(!1,!1,this.draggingRange.id))}onDragStop(){if(!this.dragging)return;const{id:e}=this.draggingRange;this.autoScrollService.ensureCleared(),this.ctrlsService.getGridBodyCtrl().removeScrollEventListener(this.bodyScrollListener),this.lastMouseEvent=null,this.dragging=!1,this.draggingRange=void 0,this.lastCellHovered=void 0,this.intersectionRange&&(this.intersectionRange=!1,this.intersectLastRange()),this.dispatchChangedEvent(!1,!0,e)}dispatchChangedEvent(e,t,i){this.eventService.dispatchEvent({type:G.EVENT_RANGE_SELECTION_CHANGED,started:e,finished:t,id:i})}calculateColumnsBetween(e,t){const i=this.columnModel.getAllDisplayedColumns(),n=e===t,s=i.indexOf(e);if(s<0)return void console.warn(`AG Grid: column ${e.getId()} is not visible`);const o=n?s:i.indexOf(t);if(o<0)return void console.warn(`AG Grid: column ${t.getId()} is not visible`);if(n)return[e];const a=Math.min(s,o),c=a===s?o:s,u=[];for(let p=a;p<=c;p++)u.push(i[p]);return u}};$u([P("rowModel")],dc.prototype,"rowModel",void 0),$u([P("dragService")],dc.prototype,"dragService",void 0),$u([P("columnModel")],dc.prototype,"columnModel",void 0),$u([P("cellNavigationService")],dc.prototype,"cellNavigationService",void 0),$u([P("pinnedRowModel")],dc.prototype,"pinnedRowModel",void 0),$u([P("rowPositionUtils")],dc.prototype,"rowPositionUtils",void 0),$u([P("cellPositionUtils")],dc.prototype,"cellPositionUtils",void 0),$u([P("ctrlsService")],dc.prototype,"ctrlsService",void 0),$u([Se],dc.prototype,"init",null),dc=$u([He("rangeService")],dc);var vd=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class il extends Ne{constructor(){super(...arguments),this.changedCalculatedValues=!1,this.dragging=!1,this.shouldDestroyOnEndDragging=!1}init(){this.dragService.addDragSource({dragStartPixels:0,eElement:this.getGui(),onDragStart:this.onDragStart.bind(this),onDragging:e=>{this.dragging=!0,this.rangeService.autoScrollService.check(e),this.changedCalculatedValues&&(this.onDrag(e),this.changedCalculatedValues=!1)},onDragStop:e=>{this.dragging=!1,this.onDragEnd(e),this.clearValues(),this.rangeService.autoScrollService.ensureCleared(),document.body.classList.remove(this.getDraggingCssClass()),this.shouldDestroyOnEndDragging&&this.destroy()}}),this.addManagedListener(this.getGui(),"mousedown",this.preventRangeExtension.bind(this))}isDragging(){return this.dragging}getCellCtrl(){return this.cellCtrl}setCellCtrl(e){this.cellCtrl=e}getCellRange(){return this.cellRange}setCellRange(e){this.cellRange=e}getRangeStartRow(){return this.rangeStartRow}setRangeStartRow(e){this.rangeStartRow=e}getRangeEndRow(){return this.rangeEndRow}setRangeEndRow(e){this.rangeEndRow=e}getLastCellHovered(){return this.lastCellHovered}preventRangeExtension(e){e.stopPropagation()}onDragStart(e){this.cellHoverListener=this.addManagedListener(this.ctrlsService.getGridCtrl().getGui(),"mousemove",this.updateValuesOnMove.bind(this)),document.body.classList.add(this.getDraggingCssClass())}getDraggingCssClass(){return`ag-dragging-${this.type===jd.FILL?"fill":"range"}-handle`}updateValuesOnMove(e){const t=this.mouseEventService.getCellPositionForEvent(e);!t||this.lastCellHovered&&this.cellPositionUtils.equals(t,this.lastCellHovered)||(this.lastCellHovered=t,this.changedCalculatedValues=!0)}getType(){return this.type}refresh(e){const t=this.getCellCtrl(),i=this.getGui(),n=z.last(this.rangeService.getCellRanges()),s=n.startRow,o=n.endRow;if(s&&o&&(this.rowPositionUtils.before(o,s)?(this.setRangeStartRow(o),this.setRangeEndRow(s)):(this.setRangeStartRow(s),this.setRangeEndRow(o))),t!==e||!z.isVisible(i)){this.setCellCtrl(e);const a=e.getComp().getParentOfValue();a&&a.appendChild(i)}this.setCellRange(n)}clearValues(){this.lastCellHovered=void 0,this.removeListeners()}removeListeners(){this.cellHoverListener&&(this.cellHoverListener(),this.cellHoverListener=void 0)}destroy(){if(!this.shouldDestroyOnEndDragging&&this.isDragging())return z.setDisplayed(this.getGui(),!1),void(this.shouldDestroyOnEndDragging=!0);this.shouldDestroyOnEndDragging=!1,super.destroy(),this.removeListeners();const e=this.getGui();e.parentElement&&e.parentElement.removeChild(e)}}function EK(r){const e=r.length;let t=0;if(e<=1)return r;for(let g=0;g<r.length;g++){const m=r[g],y=m.toString().split("e-");y.length>1?t=Math.max(t,parseInt(y[1],10)):Math.floor(m)!==m&&(t=Math.max(t,m.toString().split(".")[1].length))}let i=0,n=0,s=0,o=0,a=0;for(let g=0;g<e;g++)a=r[g],i+=g,n+=a,o+=g*g,s+=g*a;const c=(e*s-i*n)/(e*o-i*i),u=n/e-c*i/e,p=[];for(let g=0;g<=e;g++)p.push(parseFloat((g*c+u).toFixed(t)));return p}vd([P("rowRenderer")],il.prototype,"rowRenderer",void 0),vd([P("dragService")],il.prototype,"dragService",void 0),vd([P("rangeService")],il.prototype,"rangeService",void 0),vd([P("mouseEventService")],il.prototype,"mouseEventService",void 0),vd([P("columnModel")],il.prototype,"columnModel",void 0),vd([P("cellNavigationService")],il.prototype,"cellNavigationService",void 0),vd([P("navigationService")],il.prototype,"navigationService",void 0),vd([P("rowPositionUtils")],il.prototype,"rowPositionUtils",void 0),vd([P("cellPositionUtils")],il.prototype,"cellPositionUtils",void 0),vd([P("ctrlsService")],il.prototype,"ctrlsService",void 0),vd([Se],il.prototype,"init",null);var pL=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class ym extends il{constructor(){super(ym.TEMPLATE),this.markedCells=[],this.cellValues=[],this.isUp=!1,this.isLeft=!1,this.isReduce=!1,this.type=jd.FILL}updateValuesOnMove(e){super.updateValuesOnMove(e),this.initialXY||(this.initialXY=this.mouseEventService.getNormalisedPosition(e));const{x:t,y:i}=this.initialXY,{x:n,y:s}=this.mouseEventService.getNormalisedPosition(e),o=Math.abs(t-n),a=Math.abs(i-s),c=this.getFillHandleDirection();let u;u="xy"===c?o>a?"x":"y":c,u!==this.dragAxis&&(this.dragAxis=u,this.changedCalculatedValues=!0)}onDrag(e){if(!this.initialPosition){const i=this.getCellCtrl();if(!i)return;this.initialPosition=i.getCellPosition()}const t=this.getLastCellHovered();t&&this.markPathFrom(this.initialPosition,t)}onDragEnd(e){if(this.initialXY=null,!this.markedCells.length)return;const t="x"===this.dragAxis,i=this.getCellRange(),n=i.columns.length,s=this.getRangeStartRow(),o=this.getRangeEndRow();let a;if(this.isUp||this.isLeft){const c=t?s:this.lastCellMarked;a=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:c.rowIndex,rowStartPinned:c.rowPinned,columnStart:t?this.lastCellMarked.column:i.columns[0],rowEndIndex:o.rowIndex,rowEndPinned:o.rowPinned,columnEnd:i.columns[n-1]})}else a=this.rangeService.createCellRangeFromCellRangeParams({rowStartIndex:s.rowIndex,rowStartPinned:s.rowPinned,columnStart:i.columns[0],rowEndIndex:t?o.rowIndex:this.lastCellMarked.rowIndex,rowEndPinned:t?o.rowPinned:this.lastCellMarked.rowPinned,columnEnd:t?this.lastCellMarked.column:i.columns[n-1]});a&&(this.raiseFillStartEvent(),this.handleValueChanged(i,a,e),this.rangeService.setCellRanges([a]),this.raiseFillEndEvent(i,a))}getFillHandleDirection(){const e=this.gridOptionsService.get("fillHandleDirection");return e?"x"!==e&&"y"!==e&&"xy"!==e?(z.warnOnce("valid values for fillHandleDirection are 'x', 'y' and 'xy'. Default to 'xy'."),"xy"):e:"xy"}raiseFillStartEvent(){this.eventService.dispatchEvent({type:G.EVENT_FILL_START})}raiseFillEndEvent(e,t){this.eventService.dispatchEvent({type:G.EVENT_FILL_END,initialRange:e,finalRange:t})}handleValueChanged(e,t,i){const n=this.rangeService.getRangeEndRow(e),s=this.rangeService.getRangeStartRow(e),o=this.rangeService.getRangeEndRow(t),a=this.rangeService.getRangeStartRow(t),c="y"===this.dragAxis;if(this.isReduce&&!this.gridOptionsService.get("suppressClearOnFillReduction")){const R=c?e.columns:e.columns.filter(L=>t.columns.indexOf(L)<0),O=c?this.cellNavigationService.getRowBelow(o):a;return void(O&&this.clearCellsInRange(O,n,R))}const u=[],p=[],g=[],m=[];let y=!0,b=0;const _=()=>{u.length=0,p.length=0,g.length=0,m.length=0,b=0},E=(R,O)=>{let L=this.isUp?n:s,k=!1;for(c&&(y=!0,_());!k&&L;){const U=this.rowPositionUtils.getRowNode(L);if(!U)break;c&&R?D(u,R,U,()=>!this.rowPositionUtils.sameRow(L,this.isUp?s:n)):O&&(y=!0,_(),O.forEach(j=>D(u,j,U,()=>j!==(this.isLeft?e.columns[0]:z.last(e.columns))))),k=this.rowPositionUtils.sameRow(L,this.isUp?a:o),L=this.isUp?this.cellNavigationService.getRowAbove(L):this.cellNavigationService.getRowBelow(L)}},D=(R,O,L,k)=>{var U,j;let q,J=!1;if(y)q=this.valueService.getValue(O,L),p.push(q),g.push(this.valueService.getValue(O,L,void 0,!0)),m.push(this.valueFormatterService.formatValue(O,L,q)),y=k();else{const{value:me,fromUserFunction:ye,sourceCol:Ae,sourceRowNode:Pe}=this.processValues({event:i,values:R,initialValues:p,initialNonAggregatedValues:g,initialFormattedValues:m,col:O,rowNode:L,idx:b++});if(q=me,O.isCellEditable(L)){const Le=this.valueService.getValue(O,L);ye||(Ae&&!1!==(null===(U=Ae.getColDef())||void 0===U?void 0:U.useValueFormatterForExport)&&(q=null!==(j=this.valueFormatterService.formatValue(Ae,Pe,q))&&void 0!==j?j:q),!1!==O.getColDef().useValueParserForImport&&(q=this.valueParserService.parseValue(O,L,Ae?q:z.toStringOrNull(q),Le))),ye&&Le===q?J=!0:L.setDataValue(O,q,"rangeService")}}J||R.push({value:q,column:O,rowNode:L})};if(c)e.columns.forEach(R=>{E(R)});else{const R=this.isLeft?[...t.columns].reverse():t.columns;E(void 0,R)}}clearCellsInRange(e,t,i){this.rangeService.clearCellRangeCellValues({cellRanges:[{startRow:e,endRow:t,columns:i,startColumn:i[0]}]})}processValues(e){const{event:t,values:i,initialValues:n,initialNonAggregatedValues:s,initialFormattedValues:o,col:a,rowNode:c,idx:u}=e,p=this.gridOptionsService.getCallback("fillOperation");let m;if(m="y"===this.dragAxis?this.isUp?"up":"down":this.isLeft?"left":"right",p){const _=p({event:t,values:i.map(({value:E})=>E),initialValues:n,initialNonAggregatedValues:s,initialFormattedValues:o,currentIndex:u,currentCellValue:this.valueService.getValue(a,c),direction:m,column:a,rowNode:c});if(!1!==_)return{value:_,fromUserFunction:!0}}const y=!i.some(({value:b})=>{const _=parseFloat(b);return isNaN(_)||_.toString()!==b.toString()});if(t.altKey||!y){if(y&&1===n.length){const D=this.isUp||this.isLeft?-1:1;return{value:parseFloat(z.last(i).value)+1*D,fromUserFunction:!1}}const{value:b,column:_,rowNode:E}=i[u%i.length];return{value:b,fromUserFunction:!1,sourceCol:_,sourceRowNode:E}}return{value:z.last(EK(i.map(({value:b})=>Number(b)))),fromUserFunction:!1}}clearValues(){this.clearMarkedPath(),this.clearCellValues(),this.lastCellMarked=void 0,super.clearValues()}clearMarkedPath(){this.markedCells.forEach(e=>{if(!e.isAlive())return;const t=e.getComp();t.addOrRemoveCssClass("ag-selection-fill-top",!1),t.addOrRemoveCssClass("ag-selection-fill-right",!1),t.addOrRemoveCssClass("ag-selection-fill-bottom",!1),t.addOrRemoveCssClass("ag-selection-fill-left",!1)}),this.markedCells.length=0,this.isUp=!1,this.isLeft=!1,this.isReduce=!1}clearCellValues(){this.cellValues.length=0}markPathFrom(e,t){if(this.clearMarkedPath(),this.clearCellValues(),"y"===this.dragAxis){if(this.rowPositionUtils.sameRow(t,e))return;const i=this.rowPositionUtils.before(t,e),n=this.getRangeStartRow(),s=this.getRangeEndRow();i&&(t.rowPinned==n.rowPinned&&t.rowIndex>=n.rowIndex||n.rowPinned!=s.rowPinned&&t.rowPinned==s.rowPinned&&t.rowIndex<=s.rowIndex)?(this.reduceVertical(e,t),this.isReduce=!0):(this.extendVertical(e,t,i),this.isReduce=!1)}else{const i=e.column,n=t.column;if(i===n)return;const s=this.columnModel.getAllDisplayedColumns(),o=s.indexOf(i),a=s.indexOf(n);a<=o&&a>=s.indexOf(this.getCellRange().columns[0])?(this.reduceHorizontal(e,t),this.isReduce=!0):(this.extendHorizontal(e,t,a<o),this.isReduce=!1)}this.lastCellMarked=t}extendVertical(e,t,i){const{navigationService:n,rangeService:s}=this;let o=e;do{const a=this.getCellRange(),c=a.columns.length;for(let u=0;u<c;u++){const p=a.columns[u],m=Object.assign(Object.assign({},{rowIndex:o.rowIndex,rowPinned:o.rowPinned}),{column:p}),y=s.isCellInSpecificRange(m,a),b=this.rowPositionUtils.sameRow(o,e);if(i&&(this.isUp=!0),!b){const _=n.getCellByPosition(m);if(_){this.markedCells.push(_);const E=_.getComp();y||(E.addOrRemoveCssClass("ag-selection-fill-left",0===u),E.addOrRemoveCssClass("ag-selection-fill-right",u===c-1)),E.addOrRemoveCssClass(i?"ag-selection-fill-top":"ag-selection-fill-bottom",this.rowPositionUtils.sameRow(o,t))}}}if(this.rowPositionUtils.sameRow(o,t))break}while(o=i?this.cellNavigationService.getRowAbove(o):this.cellNavigationService.getRowBelow(o))}reduceVertical(e,t){let i=e;do{const n=this.getCellRange(),s=n.columns.length,o=this.rowPositionUtils.sameRow(i,t);for(let a=0;a<s;a++){const u=Object.assign(Object.assign({},{rowIndex:i.rowIndex,rowPinned:i.rowPinned}),{column:n.columns[a]}),p=this.navigationService.getCellByPosition(u);p&&(this.markedCells.push(p),p.getComp().addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(i,t)))}if(o)break}while(i=this.cellNavigationService.getRowAbove(i))}extendHorizontal(e,t,i){const n=this.columnModel.getAllDisplayedColumns(),s=n.indexOf(i?t.column:e.column),o=n.indexOf(i?this.getCellRange().columns[0]:t.column),a=i?0:1,c=n.slice(s+a,o+a),u=this.getRangeStartRow(),p=this.getRangeEndRow();c.forEach(g=>{let m=u,y=!1;do{y=this.rowPositionUtils.sameRow(m,p);const b=this.navigationService.getCellByPosition({rowIndex:m.rowIndex,rowPinned:m.rowPinned,column:g});if(b){this.markedCells.push(b);const _=b.getComp();_.addOrRemoveCssClass("ag-selection-fill-top",this.rowPositionUtils.sameRow(m,u)),_.addOrRemoveCssClass("ag-selection-fill-bottom",this.rowPositionUtils.sameRow(m,p)),i?(this.isLeft=!0,_.addOrRemoveCssClass("ag-selection-fill-left",g===c[0])):_.addOrRemoveCssClass("ag-selection-fill-right",g===z.last(c))}m=this.cellNavigationService.getRowBelow(m)}while(!y)})}reduceHorizontal(e,t){const i=this.columnModel.getAllDisplayedColumns(),n=i.indexOf(t.column),s=i.indexOf(e.column),o=i.slice(n,s),a=this.getRangeStartRow(),c=this.getRangeEndRow();o.forEach(u=>{let p=a,g=!1;do{g=this.rowPositionUtils.sameRow(p,c);const m=this.navigationService.getCellByPosition({rowIndex:p.rowIndex,rowPinned:p.rowPinned,column:u});m&&(this.markedCells.push(m),m.getComp().addOrRemoveCssClass("ag-selection-fill-right",u===o[0])),p=this.cellNavigationService.getRowBelow(p)}while(!g)})}refresh(e){const t=this.rangeService.getCellRanges()[0];t.startRow&&t.endRow?super.refresh(e):this.destroy()}}ym.TEMPLATE='<div class="ag-fill-handle"></div>',pL([P("valueService")],ym.prototype,"valueService",void 0),pL([P("valueParserService")],ym.prototype,"valueParserService",void 0),pL([P("valueFormatterService")],ym.prototype,"valueFormatterService",void 0);let fH=(()=>{class r extends il{constructor(){super(r.TEMPLATE),this.type=jd.RANGE,this.rangeFixed=!1}onDrag(t){const i=this.getLastCellHovered();if(!i)return;const n=this.rangeService.getCellRanges(),s=z.last(n);this.rangeFixed||(this.fixRangeStartEnd(s),this.rangeFixed=!0),this.endPosition={rowIndex:i.rowIndex,rowPinned:i.rowPinned,column:i.column},2===n.length&&n[0].type===_n.DIMENSION&&s.type===_n.VALUE&&!this.rowPositionUtils.sameRow(this.endPosition,this.rangeService.getRangeEndRow(s))&&this.rangeService.updateRangeEnd(n[0],Object.assign(Object.assign({},this.endPosition),{column:n[0].columns[0]}),!0),this.rangeService.extendLatestRangeToCell(this.endPosition)}onDragEnd(t){const i=z.last(this.rangeService.getCellRanges());this.fixRangeStartEnd(i),this.rangeFixed=!1}fixRangeStartEnd(t){const i=this.rangeService.getRangeStartRow(t),n=this.rangeService.getRangeEndRow(t),s=t.columns[0];t.startRow=i,t.endRow=n,t.startColumn=s}}return r.TEMPLATE='<div class="ag-range-handle"></div>',r})(),fL=class extends Ee{createSelectionHandle(e){return this.createBean(e===jd.RANGE?new fH:new ym)}};fL=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s}([He("selectionHandleFactory")],fL);const gH={version:"31.1.1",moduleName:ze.RangeSelectionModule,beans:[dc,fL],agStackComponents:[{componentName:"AgFillHandle",componentClass:ym},{componentName:"AgRangeHandle",componentClass:fH}],dependantModules:[uu]};function gL(r){return r&&r.match(/\d+\.\d+\.\d+/)}function nx({type:r,gridVersion:e,chartsVersion:t}){const i="AG Grid: AG Grid version is incompatible. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.";if(!e)return i;const n=function RK(r){if(!r||!gL(r))return;const[e,t]=r.split(".")||[],i=`${e}.${t}.x`,s=parseInt(e,10)-28+6;return s<0?void 0:{gridMajorMinor:i,chartsMajorMinor:`${s}.${t}.x`}}(e);if(!n)return i;const{gridMajorMinor:s,chartsMajorMinor:o}=n;return"incompatible"===r?`AG Grid version ${e} and AG Charts version ${t} is not supported. AG Grid version ${s} should be used with AG Chart ${o}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:"invalidCharts"===r?`AG Grid version ${s} should be used with AG Chart ${o}. Please see https://www.ag-grid.com/javascript-data-grid/modules/ for more information.`:i}const OK={version:bT,validate:()=>function AK({gridVersion:r,chartsVersion:e}){if(!gL(e))return{isValid:!1,message:nx({type:"invalidCharts",gridVersion:r,chartsVersion:e})};if(!gL(r))return{isValid:!1,message:nx({type:"invalidGrid",gridVersion:r,chartsVersion:e})};const[t,i]=r.split(".")||[],[n,s]=e.split(".")||[],o=function TK({gridMajorVersion:r,chartsMajorVersion:e}){const n=parseInt(r,10)-28;return n===parseInt(e,10)-6&&n>=0}({gridMajorVersion:t,chartsMajorVersion:n});return o&&i===s?{isValid:!0}:o&&i===s?{isValid:!1,message:nx({type:"invalid",gridVersion:r,chartsVersion:e})}:{isValid:!1,message:nx({type:"incompatible",gridVersion:r,chartsVersion:e})}}({gridVersion:bT,chartsVersion:Cm.CHARTS_VERSION}),moduleName:ze.GridChartsModule,beans:[Cm,ex,Q_],agStackComponents:[{componentName:"AgColorPicker",componentClass:UB},{componentName:"AgAngleSelect",componentClass:Hu}],dependantModules:[gH,uu]};class MK{constructor(e,t,i,n,s,o,a,c,u,p,g){this.rowModel=e,this.filterParams=t,this.createKey=i,this.caseFormat=n,this.columnModel=s,this.valueService=o,this.treeDataOrGrouping=a,this.treeData=c,this.getDataPath=u,this.groupAllowUnbalanced=p,this.addManagedListener=g}extractUniqueValuesAsync(e,t){return new $t(i=>{if(this.rowModel.isRowDataLoaded())i(this.extractUniqueValues(e,t));else{const n=this.addManagedListener(G.EVENT_ROW_COUNT_READY,()=>{n?.(),i(this.extractUniqueValues(e,t))})}})}extractUniqueValues(e,t){const i=new Map,n=this.extractExistingFormattedKeys(t),s=new Set,o=this.treeData&&!!this.getDataPath,a=this.columnModel.getRowGroupColumns(),c=(u,p)=>{const g=this.caseFormat(u);if(!s.has(g)){s.add(g);let m=u,y=z.makeNull(p);const b=n?.get(g);null!=b&&(m=b,y=t.get(b)),i.set(m,y)}};return this.rowModel.forEachLeafNode(u=>{if(!u.data||!e(u))return;if(this.treeDataOrGrouping)return void this.addValueForTreeDataOrGrouping(u,o,a,c);let p=this.getValue(u);this.filterParams.convertValuesToStrings?this.addValueForConvertValuesToString(u,p,c):null!=p&&Array.isArray(p)?(p.forEach(g=>{c(this.createKey(g,u),g)}),0===p.length&&c(null,null)):c(this.createKey(p,u),p)}),i}addValueForConvertValuesToString(e,t,i){const n=this.createKey(t,e);null!=n&&Array.isArray(n)?(n.forEach(s=>{const o=z.toStringOrNull(z.makeNull(s));i(o,o)}),0===n.length&&i(null,null)):i(n,n)}addValueForTreeDataOrGrouping(e,t,i,n){var s;let o;if(t){if(null!==(s=e.childrenAfterGroup)&&void 0!==s&&s.length)return;o=this.getDataPath(e.data)}else o=i.map(a=>this.valueService.getKeyForNode(a,e)),o.push(this.getValue(e));o&&(o=o.map(a=>z.toStringOrNull(z.makeNull(a)))),!t&&this.groupAllowUnbalanced&&o?.some(a=>null==a)&&(o=o.filter(a=>null!=a)),n(this.createKey(o),o)}getValue(e){return this.filterParams.getValue(e)}extractExistingFormattedKeys(e){if(!e)return null;const t=new Map;return e.forEach((i,n)=>{t.set(this.caseFormat(n),n)}),t}}let ga=(()=>{class r{}return r.SELECT_ALL="__AG_SELECT_ALL__",r.ADD_SELECTION_TO_FILTER="__AG_ADD_SELECTION_TO_FILTER__",r})();class xK{constructor(e,t,i,n){this.valueFormatterService=e,this.valueFormatter=t,this.formatter=i,this.column=n,this.displayedKeys=[]}updateDisplayedValuesToAllAvailable(e,t,i){this.displayedKeys=Array.from(i)}updateDisplayedValuesToMatchMiniFilter(e,t,i,n,s){this.displayedKeys=[];for(let o of i)if(null==o)s&&this.displayedKeys.push(o);else{const a=e(o),c=this.valueFormatterService.formatValue(this.column,null,a,this.valueFormatter,!1);n(this.formatter(c))&&this.displayedKeys.push(o)}}getDisplayedValueCount(){return this.displayedKeys.length}getDisplayedItem(e){return this.displayedKeys[e]}getSelectAllItem(){return ga.SELECT_ALL}getAddSelectionToFilterItem(){return ga.ADD_SELECTION_TO_FILTER}getDisplayedKeys(){return this.displayedKeys}forEachDisplayedKey(e){this.displayedKeys.forEach(e)}someDisplayedKey(e){return this.displayedKeys.some(e)}hasGroups(){return!1}refresh(){}}let PK=(()=>{class r{constructor(t,i,n,s){this.formatter=t,this.treeListPathGetter=i,this.treeListFormatter=n,this.treeDataOrGrouping=s,this.allDisplayedItemsTree=[],this.activeDisplayedItemsFlat=[],this.selectAllItem={depth:0,filterPasses:!0,available:!0,treeKey:ga.SELECT_ALL,children:this.allDisplayedItemsTree,expanded:!0,key:ga.SELECT_ALL,parentTreeKeys:[]},this.addSelectionToFilterItem={depth:0,filterPasses:!0,available:!0,treeKey:ga.ADD_SELECTION_TO_FILTER,expanded:!0,key:ga.ADD_SELECTION_TO_FILTER,parentTreeKeys:[]}}updateDisplayedValuesToAllAvailable(t,i,n,s){"reload"===s?this.generateItemTree(t,i,n):"otherFilter"===s?(this.updateAvailable(n),this.updateExpandAll()):"miniFilter"===s&&(this.resetFilter(),this.updateExpandAll()),this.flattenItems()}updateDisplayedValuesToMatchMiniFilter(t,i,n,s,o,a){"reload"===a?this.generateItemTree(t,i,n):"otherFilter"===a&&this.updateAvailable(n),this.updateFilter(s,o),this.updateExpandAll(),this.flattenItems()}generateItemTree(t,i,n){var s;this.allDisplayedItemsTree=[],this.groupsExist=!1;const o=this.getTreeListPathGetter(t,n);for(let a of i){const u=null!==(s=o(t(a)))&&void 0!==s?s:[null];u.length>1&&(this.groupsExist=!0);const p=n.has(a);let m,g=this.allDisplayedItemsTree,y=[];u.forEach((b,_)=>{g||(g=[],m.children=g),m=g.find(E=>{var D;return(null===(D=E.treeKey)||void 0===D?void 0:D.toUpperCase())===b?.toUpperCase()}),m||(m={treeKey:b,depth:_,filterPasses:!0,expanded:!1,available:p,parentTreeKeys:y},_===u.length-1&&(m.key=a),g.push(m)),g=m.children,y=[...y,b]})}this.updateAvailable(n),this.selectAllItem.children=this.allDisplayedItemsTree,this.selectAllItem.expanded=!1}getTreeListPathGetter(t,i){if(this.treeListPathGetter)return this.treeListPathGetter;if(this.treeDataOrGrouping)return s=>s;let n=!1;for(const s of i){const o=t(s);if(o instanceof Date){n=!0;break}if(null!=o)break}return n?r.DATE_TREE_LIST_PATH_GETTER:(z.warnOnce("property treeList=true for Set Filter params, but you did not provide a treeListPathGetter or values of type Date."),s=>[String(s)])}flattenItems(){this.activeDisplayedItemsFlat=[];const t=i=>{i.forEach(n=>{!n.filterPasses||!n.available||(this.activeDisplayedItemsFlat.push(n),n.children&&n.expanded&&t(n.children))})};t(this.allDisplayedItemsTree)}resetFilter(){const t=i=>{i.children&&i.children.forEach(n=>{t(n)}),i.filterPasses=!0};this.allDisplayedItemsTree.forEach(i=>t(i))}updateFilter(t,i){const n=s=>!!s.available&&(null==s.treeKey?i:t(this.formatter(this.treeListFormatter?this.treeListFormatter(s.treeKey,s.depth,s.parentTreeKeys):s.treeKey)));this.allDisplayedItemsTree.forEach(s=>this.recursiveItemCheck(s,!1,n,"filterPasses"))}getDisplayedValueCount(){return this.activeDisplayedItemsFlat.length}getDisplayedItem(t){return this.activeDisplayedItemsFlat[t]}getSelectAllItem(){return this.selectAllItem}getAddSelectionToFilterItem(){return this.addSelectionToFilterItem}getDisplayedKeys(){const t=[];return this.forEachDisplayedKey(i=>t.push(i)),t}forEachDisplayedKey(t){const i=(n,s)=>{n.children?(!n.expanded||!s)&&n.children.forEach(o=>{o.filterPasses&&i(o,!1)}):t(n.key)};this.activeDisplayedItemsFlat.forEach(n=>i(n,!0))}someDisplayedKey(t){const i=(n,s)=>n.children?(!n.expanded||!s)&&n.children.some(o=>!!o.filterPasses&&i(o,!1)):t(n.key);return this.activeDisplayedItemsFlat.some(n=>i(n,!0))}hasGroups(){return this.groupsExist}refresh(){this.updateExpandAll(),this.flattenItems()}updateExpandAll(){const t=(n,s,o)=>{for(const a of n){if(!a.filterPasses||!a.available||!a.children)continue;if(o=o||!a.expanded,(s=s||!!a.expanded)&&o)return;const c=t(a.children,s,o);if(void 0===c)return;c?s=!0:o=!0}return s&&o?void 0:s},i=this.getSelectAllItem();i.expanded=t(i.children,!1,!1)}recursiveItemCheck(t,i,n,s){let o=!1;t.children&&t.children.forEach(c=>{const u=this.recursiveItemCheck(c,i||n(t),n,s);o=o||u});const a=i||o||n(t);return t[s]=a,a}updateAvailable(t){const i=n=>t.has(n.key);this.allDisplayedItemsTree.forEach(n=>this.recursiveItemCheck(n,!1,i,"available"))}}return r.DATE_TREE_LIST_PATH_GETTER=e=>e?[String(e.getFullYear()),String(e.getMonth()+1),String(e.getDate())]:null,r})();class IK{constructor({caseFormat:e}){this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1,this.caseFormat=e}allFilteringKeys(){return this.filteringKeys}allFilteringKeysCaseFormatted(){return this.filteringKeysCaseFormatted}noAppliedFilteringKeys(){return this.hasNoAppliedFilteringKeys}setFilteringKeys(e){this.filteringKeys=new Set(e),this.hasNoAppliedFilteringKeys=!this.filteringKeys||0===this.filteringKeys.size,this.filteringKeysCaseFormatted=new Set,this.filteringKeys.forEach(t=>this.filteringKeysCaseFormatted.add(this.caseFormat(t)))}addFilteringKey(e){null==this.filteringKeys&&(this.filteringKeys=new Set,this.filteringKeysCaseFormatted=new Set),this.filteringKeys.add(e),this.filteringKeysCaseFormatted.add(this.caseFormat(e)),this.hasNoAppliedFilteringKeys&&(this.hasNoAppliedFilteringKeys=!1)}hasCaseFormattedFilteringKey(e){return this.filteringKeysCaseFormatted.has(this.caseFormat(e))}hasFilteringKey(e){return this.filteringKeys.has(e)}reset(){this.filteringKeys=null,this.filteringKeysCaseFormatted=null,this.hasNoAppliedFilteringKeys=!1}}var ao=(()=>(function(r){r[r.PROVIDED_LIST=0]="PROVIDED_LIST",r[r.PROVIDED_CALLBACK=1]="PROVIDED_CALLBACK",r[r.TAKEN_FROM_GRID_VALUES=2]="TAKEN_FROM_GRID_VALUES"}(ao||(ao={})),ao))();let CH=(()=>{class r{constructor(t){var i;this.localEventService=new go,this.miniFilterText=null,this.addCurrentSelectionToFilter=!1,this.providedValues=null,this.allValues=new Map,this.availableKeys=new Set,this.selectedKeys=new Set,this.initialised=!1;const{usingComplexObjects:n,columnModel:s,valueService:o,treeDataTreeList:a,groupingTreeList:c,filterParams:u,gridOptionsService:p,valueFormatterService:g,valueFormatter:m,addManagedListener:y}=t,{column:b,colDef:_,textFormatter:E,doesRowPassOtherFilter:D,suppressSorting:R,comparator:O,rowModel:L,values:k,caseSensitive:U,convertValuesToStrings:j,treeList:q,treeListPathGetter:J,treeListFormatter:me}=u;this.filterParams=u,this.gridOptionsService=p,this.setIsLoading=t.setIsLoading,this.translate=t.translate,this.caseFormat=t.caseFormat,this.createKey=t.createKey,this.usingComplexObjects=!!t.usingComplexObjects,this.formatter=E||Ji.DEFAULT_FORMATTER,this.doesRowPassOtherFilters=D,this.suppressSorting=R||!1,this.convertValuesToStrings=!!j,this.filteringKeys=new IK({caseFormat:this.caseFormat});const ye=O??_.comparator,Ae=!!a||!!c;this.compareByValue=!!(n&&ye||Ae||q&&!J),this.entryComparator=Ae&&!ye?this.createTreeDataOrGroupingComparator():!q||J||ye?([Xe,Je],[ht,Dt])=>ye(Je,Dt):([Xe,Je],[ht,Dt])=>z.defaultComparator(Je,Dt),this.keyComparator=null!==(i=ye)&&void 0!==i?i:z.defaultComparator,this.caseSensitive=!!U;const Pe=p.get("getDataPath"),Le=p.get("groupAllowUnbalanced");"clientSide"===L.getType()&&(this.clientSideValuesExtractor=new MK(L,this.filterParams,this.createKey,this.caseFormat,s,o,Ae,!!a,Pe,Le,y)),null==k?this.valuesType=ao.TAKEN_FROM_GRID_VALUES:(this.valuesType=Array.isArray(k)?ao.PROVIDED_LIST:ao.PROVIDED_CALLBACK,this.providedValues=k),this.displayValueModel=q?new PK(this.formatter,J,me,a||c):new xK(g,m,this.formatter,b),this.updateAllValues().then(Xe=>this.resetSelectionState(Xe||[]))}addEventListener(t,i,n){this.localEventService.addEventListener(t,i,n)}removeEventListener(t,i,n){this.localEventService.removeEventListener(t,i,n)}updateOnParamsChange(t){return new $t(i=>{const{values:n,textFormatter:s,suppressSorting:o}=t,a=this.providedValues,c=this.suppressSorting;if(this.filterParams=t,this.formatter=s||Ji.DEFAULT_FORMATTER,this.suppressSorting=o||!1,this.providedValues=n??null,this.providedValues!==a||this.suppressSorting!==c){if(n&&0!==n.length){const p=Array.isArray(n)&&n.length>0&&"function"==typeof n[0];this.valuesType=p?ao.PROVIDED_CALLBACK:ao.PROVIDED_LIST}else this.valuesType=ao.TAKEN_FROM_GRID_VALUES,this.providedValues=null;const u=this.getModel();this.updateAllValues().then(p=>{this.setModel(u).then(()=>i())})}else i()})}refreshValues(){return new $t(t=>{this.allValuesPromise.then(()=>{const i=this.getModel();this.updateAllValues(),this.setModel(i).then(()=>t())})})}overrideValues(t){return new $t(i=>{this.allValuesPromise.then(()=>{this.valuesType=ao.PROVIDED_LIST,this.providedValues=t,this.refreshValues().then(()=>i())})})}refreshAfterAnyFilterChanged(){return this.showAvailableOnly()?this.allValuesPromise.then(t=>(this.updateAvailableKeys(t??[],"otherFilter"),!0)):$t.resolve(!1)}isInitialised(){return this.initialised}updateAllValues(){return this.allValuesPromise=new $t(t=>{switch(this.valuesType){case ao.TAKEN_FROM_GRID_VALUES:this.getValuesFromRowsAsync(!1).then(i=>t(this.processAllValues(i)));break;case ao.PROVIDED_LIST:t(this.processAllValues(this.uniqueValues(this.validateProvidedValues(this.providedValues))));break;case ao.PROVIDED_CALLBACK:{this.setIsLoading(!0);const i=this.providedValues,{column:n,colDef:s}=this.filterParams,o=this.gridOptionsService.addGridCommonParams({success:a=>{this.setIsLoading(!1),t(this.processAllValues(this.uniqueValues(this.validateProvidedValues(a))))},colDef:s,column:n});window.setTimeout(()=>i(o),0);break}default:throw new Error("Unrecognised valuesType")}}),this.allValuesPromise.then(t=>this.updateAvailableKeys(t||[],"reload")).then(()=>this.initialised=!0),this.allValuesPromise}processAllValues(t){const i=this.sortKeys(t);return this.allValues=t??new Map,i}validateProvidedValues(t){if(this.usingComplexObjects&&t?.length){const i=t[0];i&&"object"!=typeof i&&"function"!=typeof i&&(null==this.createKey(i)?z.warnOnce("Set Filter Key Creator is returning null for provided values and provided values are primitives. Please provide complex objects or set convertValuesToStrings=true in the filterParams. See https://www.ag-grid.com/javascript-data-grid/filter-set-filter-list/#filter-value-types"):z.warnOnce("Set Filter has a Key Creator, but provided values are primitives. Did you mean to provide complex objects or enable convertValuesToStrings?"))}return t}setValuesType(t){this.valuesType=t}getValuesType(){return this.valuesType}isKeyAvailable(t){return this.availableKeys.has(t)}showAvailableOnly(){return this.valuesType===ao.TAKEN_FROM_GRID_VALUES}updateAvailableKeys(t,i){const n=this.showAvailableOnly()?this.sortKeys(this.getValuesFromRows(!0)):t;this.availableKeys=new Set(n),this.localEventService.dispatchEvent({type:r.EVENT_AVAILABLE_VALUES_CHANGED}),this.updateDisplayedValues(i,t)}sortKeys(t){const i=t??new Map;if(this.suppressSorting)return Array.from(i.keys());let n;return n=this.compareByValue?Array.from(i.entries()).sort(this.entryComparator).map(([s])=>s):Array.from(i.keys()).sort(this.keyComparator),this.filterParams.excelMode&&i.has(null)&&(n=n.filter(s=>null!=s),n.push(null)),n}getParamsForValuesFromRows(t=!1){return this.clientSideValuesExtractor?{predicate:s=>!t||this.doesRowPassOtherFilters(s),existingValues:t&&!this.caseSensitive?this.allValues:void 0}:(z.doOnce(()=>{console.error("AG Grid: Set Filter cannot initialise because you are using a row model that does not contain all rows in the browser. Either use a different filter type, or configure Set Filter such that you provide it with values")},"setFilterValueNotCSRM"),null)}getValuesFromRows(t=!1){const i=this.getParamsForValuesFromRows(t);return i?this.clientSideValuesExtractor.extractUniqueValues(i.predicate,i.existingValues):null}getValuesFromRowsAsync(t=!1){const i=this.getParamsForValuesFromRows(t);return i?this.clientSideValuesExtractor.extractUniqueValuesAsync(i.predicate,i.existingValues):$t.resolve(null)}setMiniFilter(t){return t=z.makeNull(t),this.miniFilterText!==t&&(null===t&&this.setAddCurrentSelectionToFilter(!1),this.miniFilterText=t,this.updateDisplayedValues("miniFilter"),!0)}getMiniFilter(){return this.miniFilterText}updateDisplayedValues(t,i){if("expansion"===t)return void this.displayValueModel.refresh();if(null==this.miniFilterText)return void this.displayValueModel.updateDisplayedValuesToAllAvailable(a=>this.getValue(a),i,this.availableKeys,t);const n=this.caseFormat(this.formatter(this.miniFilterText)||""),s=a=>null!=a&&this.caseFormat(a).indexOf(n)>=0,o=!!this.filterParams.excelMode&&s(this.translate("blanks"));this.displayValueModel.updateDisplayedValuesToMatchMiniFilter(a=>this.getValue(a),i,this.availableKeys,s,o,t)}getDisplayedValueCount(){return this.displayValueModel.getDisplayedValueCount()}getDisplayedItem(t){return this.displayValueModel.getDisplayedItem(t)}getSelectAllItem(){return this.displayValueModel.getSelectAllItem()}getAddSelectionToFilterItem(){return this.displayValueModel.getAddSelectionToFilterItem()}hasSelections(){return this.filterParams.defaultToNothingSelected?this.selectedKeys.size>0:this.allValues.size!==this.selectedKeys.size}getKeys(){return Array.from(this.allValues.keys())}getValues(){return Array.from(this.allValues.values())}getValue(t){return this.allValues.get(t)}setAddCurrentSelectionToFilter(t){this.addCurrentSelectionToFilter=t}isInWindowsExcelMode(){return"windows"===this.filterParams.excelMode}isAddCurrentSelectionToFilterChecked(){return this.isInWindowsExcelMode()&&this.addCurrentSelectionToFilter}showAddCurrentSelectionToFilter(){return this.isInWindowsExcelMode()&&z.exists(this.miniFilterText)&&this.miniFilterText.length>0}selectAllMatchingMiniFilter(t=!1){null==this.miniFilterText?this.selectedKeys=new Set(this.allValues.keys()):(t&&this.selectedKeys.clear(),this.displayValueModel.forEachDisplayedKey(i=>this.selectedKeys.add(i)))}deselectAllMatchingMiniFilter(){null==this.miniFilterText?this.selectedKeys.clear():this.displayValueModel.forEachDisplayedKey(t=>this.selectedKeys.delete(t))}selectKey(t){this.selectedKeys.add(t)}deselectKey(t){this.filterParams.excelMode&&this.isEverythingVisibleSelected()&&this.resetSelectionState(this.displayValueModel.getDisplayedKeys()),this.selectedKeys.delete(t)}isKeySelected(t){return this.selectedKeys.has(t)}isEverythingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(t=>!this.isKeySelected(t))}isNothingVisibleSelected(){return!this.displayValueModel.someDisplayedKey(t=>this.isKeySelected(t))}getModel(){if(!this.hasSelections())return null;const t=this.isAddCurrentSelectionToFilterChecked()?this.filteringKeys.allFilteringKeys():null;if(t&&t.size>0){if(this.selectedKeys){const i=new Set([...Array.from(t),...Array.from(this.selectedKeys).filter(n=>!t.has(n))]);return Array.from(i)}return Array.from(t)}return Array.from(this.selectedKeys)}setModel(t){return this.allValuesPromise.then(i=>{if(null==t)this.resetSelectionState(i??[]);else{this.selectedKeys.clear();const n=new Map;this.allValues.forEach((s,o)=>{n.set(this.caseFormat(o),o)}),t.forEach(s=>{const o=this.caseFormat(z.makeNull(s)),a=n.get(o);void 0!==a&&this.selectKey(a)})}})}uniqueValues(t){const i=new Map,n=new Set;return(t??[]).forEach(s=>{const o=z.makeNull(s),a=this.convertAndGetKey(o),c=this.caseFormat(a);n.has(c)||(n.add(c),i.set(a,o))}),i}convertAndGetKey(t){return this.convertValuesToStrings?t:this.createKey(t)}resetSelectionState(t){this.filterParams.defaultToNothingSelected?this.selectedKeys.clear():this.selectedKeys=new Set(t)}hasGroups(){return this.displayValueModel.hasGroups()}createTreeDataOrGroupingComparator(){return([t,i],[n,s])=>{if(null==i)return null==s?0:-1;if(null==s)return 1;for(let o=0;o<i.length;o++){if(o>=s.length)return 1;const a=z.defaultComparator(i[o],s[o]);if(0!==a)return a}return 0}}setAppliedModelKeys(t){this.filteringKeys.setFilteringKeys(t)}addToAppliedModelKeys(t){this.filteringKeys.addFilteringKey(t)}getAppliedModelKeys(){return this.filteringKeys.allFilteringKeys()}getCaseFormattedAppliedModelKeys(){return this.filteringKeys.allFilteringKeysCaseFormatted()}hasAppliedModelKey(t){return this.filteringKeys.hasCaseFormattedFilteringKey(t)}hasAnyAppliedModelKey(){return!this.filteringKeys.noAppliedFilteringKeys()}}return r.EVENT_AVAILABLE_VALUES_CHANGED="availableValuesChanged",r})();var py=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class zs extends Ne{constructor(e){var t;super(e.isGroup?zs.GROUP_TEMPLATE:zs.TEMPLATE),this.focusWrapper=e.focusWrapper,this.value=e.value,this.params=e.params,this.translate=e.translate,this.valueFormatter=e.valueFormatter,this.item=e.item,this.isSelected=e.isSelected,this.isTree=e.isTree,this.depth=null!==(t=e.depth)&&void 0!==t?t:0,this.isGroup=e.isGroup,this.groupsExist=e.groupsExist,this.isExpanded=e.isExpanded,this.hasIndeterminateExpandState=e.hasIndeterminateExpandState}init(){this.addDestroyFunc(()=>{var e;return null===(e=this.destroyCellRendererComponent)||void 0===e?void 0:e.call(this)}),this.render(),this.eCheckbox.setLabelEllipsis(!0).setValue(this.isSelected,!0).setDisabled(!!this.params.readOnly).getInputElement().setAttribute("tabindex","-1"),this.refreshVariableAriaLabels(),this.isTree&&(this.depth>0&&this.addCssClass("ag-set-filter-indent-"+this.depth),this.isGroup?this.setupExpansion():this.groupsExist&&this.addCssClass("ag-set-filter-add-group-indent"),z.setAriaLevel(this.getAriaElement(),this.depth+1)),this.refreshAriaChecked(),!this.params.readOnly&&this.eCheckbox.onValueChange(e=>this.onCheckboxChanged(!!e))}getFocusableElement(){return this.focusWrapper}setupExpansion(){this.eGroupClosedIcon.appendChild(z.createIcon("setFilterGroupClosed",this.gridOptionsService,null)),this.eGroupOpenedIcon.appendChild(z.createIcon("setFilterGroupOpen",this.gridOptionsService,null)),this.addManagedListener(this.eGroupClosedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.addManagedListener(this.eGroupOpenedIcon,"click",this.onExpandOrContractClicked.bind(this)),this.hasIndeterminateExpandState&&(this.eGroupIndeterminateIcon.appendChild(z.createIcon("setFilterGroupIndeterminate",this.gridOptionsService,null)),this.addManagedListener(this.eGroupIndeterminateIcon,"click",this.onExpandOrContractClicked.bind(this))),this.setExpandedIcons(),this.refreshAriaExpanded()}onExpandOrContractClicked(){this.setExpanded(!this.isExpanded)}setExpanded(e,t){if(this.isGroup&&e!==this.isExpanded){this.isExpanded=e;const i={type:zs.EVENT_EXPANDED_CHANGED,isExpanded:!!e,item:this.item};t||this.dispatchEvent(i),this.setExpandedIcons(),this.refreshAriaExpanded()}}setExpandedIcons(){z.setDisplayed(this.eGroupClosedIcon,this.hasIndeterminateExpandState?!1===this.isExpanded:!this.isExpanded),z.setDisplayed(this.eGroupOpenedIcon,!0===this.isExpanded),this.hasIndeterminateExpandState&&z.setDisplayed(this.eGroupIndeterminateIcon,void 0===this.isExpanded)}onCheckboxChanged(e){this.isSelected=e,this.dispatchEvent({type:zs.EVENT_SELECTION_CHANGED,isSelected:e,item:this.item}),this.refreshVariableAriaLabels(),this.refreshAriaChecked()}toggleSelected(){this.params.readOnly||this.setSelected(!this.isSelected)}setSelected(e,t){this.isSelected=e,this.eCheckbox.setValue(e,t),this.refreshAriaChecked()}refreshVariableAriaLabels(){if(!this.isTree)return;const e=this.localeService.getLocaleTextFunc(),t=this.eCheckbox.getValue(),i=void 0===t?e("ariaIndeterminate","indeterminate"):t?e("ariaVisible","visible"):e("ariaHidden","hidden"),n=e("ariaToggleVisibility","Press SPACE to toggle visibility");z.setAriaLabelledBy(this.eCheckbox.getInputElement(),void 0),this.eCheckbox.setInputAriaLabel(`${n} (${i})`)}setupFixedAriaLabels(e){if(!this.isTree)return;const i=this.localeService.getLocaleTextFunc()("ariaFilterValue","Filter Value"),n=this.getAriaElement();z.setAriaLabel(n,`${e} ${i}`),z.setAriaDescribedBy(n,this.eCheckbox.getInputElement().id)}refreshAriaChecked(){const e=this.getAriaElement();z.setAriaChecked(e,this.eCheckbox.getValue())}refreshAriaExpanded(){z.setAriaExpanded(this.getAriaElement(),!!this.isExpanded)}refresh(e,t,i){var n,s;if(this.item=e,t!==this.isSelected&&this.setSelected(t,!0),this.setExpanded(i,!0),this.valueFunction){const o=this.valueFunction();this.setTooltipAndCellRendererParams(o,o),this.cellRendererComponent||this.renderCellWithoutCellRenderer()}if(this.cellRendererComponent&&!(null===(s=(n=this.cellRendererComponent).refresh)||void 0===s?void 0:s.call(n,this.cellRendererParams))){const a=this.cellRendererComponent;this.renderCell(),this.destroyBean(a)}}render(){const{params:{column:e}}=this;let{value:t}=this,i=null;"function"==typeof t?(this.valueFunction=t,i=this.valueFunction(),t=i):i=this.isTree?z.toStringOrNull(t):this.getFormattedValue(e,t),this.setTooltipAndCellRendererParams(t,i),this.renderCell()}setTooltipAndCellRendererParams(e,t){if(this.params.showTooltips){const i=t??z.toStringOrNull(e);this.setTooltip(i)}this.cellRendererParams=this.gridOptionsService.addGridCommonParams({value:e,valueFormatted:t,colDef:this.params.colDef,column:this.params.column})}getTooltipParams(){const e=super.getTooltipParams();return e.location="setFilterValue",e.colDef=this.getComponentHolder(),this.isTree&&(e.level=this.depth),e}getFormattedValue(e,t){return this.valueFormatterService.formatValue(e,null,t,this.valueFormatter,!1)}renderCell(){const e=this.userComponentFactory.getSetFilterCellRendererDetails(this.params,this.cellRendererParams),t=e?e.newAgStackInstance():void 0;null!=t?t.then(i=>{i&&(this.cellRendererComponent=i,this.eCheckbox.setLabel(i.getGui()),this.destroyCellRendererComponent=()=>this.destroyBean(i))}):this.renderCellWithoutCellRenderer()}renderCellWithoutCellRenderer(){var e;let t=null!==(e=this.cellRendererParams.valueFormatted??this.cellRendererParams.value)&&void 0!==e?e:this.translate("blanks");"string"!=typeof t&&(z.warnOnce(`Set Filter Value Formatter must return string values. Please ensure the Set Filter Value Formatter returns string values for complex objects, or set convertValuesToStrings=true in the filterParams. See ${this.getFrameworkOverrides().getDocLink("filter-set-filter-list/#filter-value-types")}`),t=""),this.eCheckbox.setLabel(t),this.setupFixedAriaLabels(t)}getComponentHolder(){return this.params.column.getColDef()}}zs.EVENT_SELECTION_CHANGED="selectionChanged",zs.EVENT_EXPANDED_CHANGED="expandedChanged",zs.GROUP_TEMPLATE='\n        <div class="ag-set-filter-item" aria-hidden="true">\n            <span class="ag-set-filter-group-icons">\n                <span class="ag-set-filter-group-closed-icon" ref="eGroupClosedIcon"></span>\n                <span class="ag-set-filter-group-opened-icon" ref="eGroupOpenedIcon"></span>\n                <span class="ag-set-filter-group-indeterminate-icon" ref="eGroupIndeterminateIcon"></span>\n            </span>\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',zs.TEMPLATE='\n        <div class="ag-set-filter-item">\n            <ag-checkbox ref="eCheckbox" class="ag-set-filter-item-checkbox"></ag-checkbox>\n        </div>',py([P("valueFormatterService")],zs.prototype,"valueFormatterService",void 0),py([P("userComponentFactory")],zs.prototype,"userComponentFactory",void 0),py([re("eCheckbox")],zs.prototype,"eCheckbox",void 0),py([re("eGroupOpenedIcon")],zs.prototype,"eGroupOpenedIcon",void 0),py([re("eGroupClosedIcon")],zs.prototype,"eGroupClosedIcon",void 0),py([re("eGroupIndeterminateIcon")],zs.prototype,"eGroupIndeterminateIcon",void 0),py([Se],zs.prototype,"init",null);const FK={loadingOoo:"Loading...",blanks:"(Blanks)",searchOoo:"Search...",selectAll:"(Select All)",selectAllSearchResults:"(Select All Search Results)",addCurrentSelectionToFilter:"Add current selection to filter",noMatches:"No matches."};class yH{getModelAsString(e,t){const{values:i}=e||t.getModel()||{},n=t.getValueModel();if(null==i||null==n)return"";const s=i.filter(c=>n.isKeyAvailable(c)),o=s.length;return`(${o}) ${s.slice(0,10).map(c=>t.getFormattedValue(c)).join(",")}${o>10?",...":""}`}}var fy=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class Gp extends Wr{constructor(){super("setFilter"),this.valueModel=null,this.setFilterParams=null,this.virtualList=null,this.caseSensitive=!1,this.convertValuesToStrings=!1,this.treeDataTreeList=!1,this.groupingTreeList=!1,this.hardRefreshVirtualList=!1,this.noValueFormatterSupplied=!1,this.filterModelFormatter=new yH,this.updateSetFilterOnParamsChange=e=>{var t;this.setFilterParams=e,this.convertValuesToStrings=!!e.convertValuesToStrings,this.caseSensitive=!!e.caseSensitive;const i=null!==(t=e.keyCreator)&&void 0!==t?t:e.colDef.keyCreator;this.setValueFormatter(e.valueFormatter,i,this.convertValuesToStrings,!!e.treeList,!!e.colDef.refData);const n=e.column.getId().startsWith(wf);this.treeDataTreeList=this.gridOptionsService.get("treeData")&&!!e.treeList&&n,this.getDataPath=this.gridOptionsService.get("getDataPath"),this.groupingTreeList=!!this.columnModel.getRowGroupColumns().length&&!!e.treeList&&n,this.createKey=this.generateCreateKey(i,this.convertValuesToStrings,this.treeDataTreeList||this.groupingTreeList)}}postConstruct(){super.postConstruct()}updateUiVisibility(){}createBodyTemplate(){return`\n            <div class="ag-set-filter">\n                <div ref="eFilterLoading" class="ag-filter-loading ag-hidden">${this.translateForSetFilter("loadingOoo")}</div>\n                <ag-input-text-field class="ag-mini-filter" ref="eMiniFilter"></ag-input-text-field>\n                <div ref="eFilterNoMatches" class="ag-filter-no-matches ag-hidden">${this.translateForSetFilter("noMatches")}</div>\n                <div ref="eSetFilterList" class="ag-set-filter-list" role="presentation"></div>\n            </div>`}handleKeyDown(e){if(super.handleKeyDown(e),!e.defaultPrevented)switch(e.key){case ge.SPACE:this.handleKeySpace(e);break;case ge.ENTER:this.handleKeyEnter(e);break;case ge.LEFT:this.handleKeyLeft(e);break;case ge.RIGHT:this.handleKeyRight(e)}}handleKeySpace(e){var t;null===(t=this.getComponentForKeyEvent(e))||void 0===t||t.toggleSelected()}handleKeyEnter(e){if(!this.setFilterParams)return;const{excelMode:t,readOnly:i}=this.setFilterParams||{};!t||i||(e.preventDefault(),this.onBtApply(!1,!1,e),"mac"===this.setFilterParams.excelMode&&this.eMiniFilter.getInputElement().select())}handleKeyLeft(e){var t;null===(t=this.getComponentForKeyEvent(e))||void 0===t||t.setExpanded(!1)}handleKeyRight(e){var t;null===(t=this.getComponentForKeyEvent(e))||void 0===t||t.setExpanded(!0)}getComponentForKeyEvent(e){var t;const i=this.gridOptionsService.getDocument();if(!this.eSetFilterList.contains(i.activeElement)||!this.virtualList)return;const n=this.virtualList.getLastFocusedRow();if(null==n)return;const s=this.virtualList.getComponentAt(n);if(null==s)return;e.preventDefault();const{readOnly:o}=null!==(t=this.setFilterParams)&&void 0!==t?t:{};return o?void 0:s}getCssIdentifier(){return"set-filter"}setModel(e){var t;return null==e&&null==(null===(t=this.valueModel)||void 0===t?void 0:t.getModel())?(this.setMiniFilter(null),$t.resolve()):super.setModel(e)}refresh(e){var t,i,n;return!(!super.refresh(e)||["treeList","treeListFormatter","treeListPathGetter","keyCreator","convertValuesToStrings","caseSensitive","comparator","suppressSelectAll","excelMode"].some(o=>{var a;return e[o]!==(null===(a=this.setFilterParams)||void 0===a?void 0:a[o])})||this.haveColDefParamsChanged(e.colDef)||(super.updateParams(e),this.updateSetFilterOnParamsChange(e),this.updateMiniFilter(),(e.cellRenderer!==(null===(t=this.setFilterParams)||void 0===t?void 0:t.cellRenderer)||e.valueFormatter!==(null===(i=this.setFilterParams)||void 0===i?void 0:i.valueFormatter))&&this.checkAndRefreshVirtualList(),null===(n=this.valueModel)||void 0===n||n.updateOnParamsChange(e).then(()=>{var o;null!==(o=this.valueModel)&&void 0!==o&&o.hasSelections()&&this.refreshFilterValues()}),0))}haveColDefParamsChanged(e){var t;const n=null===(t=this.setFilterParams)||void 0===t?void 0:t.colDef;return["keyCreator","filterValueGetter"].some(s=>e[s]!==n?.[s])}setModelAndRefresh(e){return this.valueModel?this.valueModel.setModel(e).then(()=>this.checkAndRefreshVirtualList()):$t.resolve()}resetUiToDefaults(){return this.setMiniFilter(null),this.setModelAndRefresh(null)}setModelIntoUi(e){return this.setMiniFilter(null),this.setModelAndRefresh(null==e?null:e.values)}getModelFromUi(){if(!this.valueModel)throw new Error("Value model has not been created.");const e=this.valueModel.getModel();return e?{values:e,filterType:this.getFilterType()}:null}getFilterType(){return"set"}getValueModel(){return this.valueModel}areModelsEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&z.areEqual(e.values,t.values)}setParams(e){var t;this.applyExcelModeOptions(e),super.setParams(e),this.updateSetFilterOnParamsChange(e);const i=null!==(t=e.keyCreator)&&void 0!==t?t:e.colDef.keyCreator;this.valueModel=new CH({filterParams:e,setIsLoading:n=>this.setIsLoading(n),valueFormatterService:this.valueFormatterService,translate:n=>this.translateForSetFilter(n),caseFormat:n=>this.caseFormat(n),createKey:this.createKey,valueFormatter:this.valueFormatter,usingComplexObjects:!!i,gridOptionsService:this.gridOptionsService,columnModel:this.columnModel,valueService:this.valueService,treeDataTreeList:this.treeDataTreeList,groupingTreeList:this.groupingTreeList,addManagedListener:(n,s)=>this.addManagedListener(this.eventService,n,s)}),this.initialiseFilterBodyUi(),this.addEventListenersForDataChanges()}onAddCurrentSelectionToFilterChange(e){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setAddCurrentSelectionToFilter(e)}setValueFormatter(e,t,i,n,s){let o=e;if(!o){if(t&&!i&&!n)throw new Error("AG Grid: Must supply a Value Formatter in Set Filter params when using a Key Creator unless convertValuesToStrings is enabled");this.noValueFormatterSupplied=!0,s||(o=a=>z.toStringOrNull(a.value))}this.valueFormatter=o}generateCreateKey(e,t,i){if(i&&!e)throw new Error("AG Grid: Must supply a Key Creator in Set Filter params when `treeList = true` on a group column, and Tree Data or Row Grouping is enabled.");return e?(n,s=null)=>{const o=this.getKeyCreatorParams(n,s);return z.makeNull(e(o))}:t?n=>Array.isArray(n)?n:z.makeNull(z.toStringOrNull(n)):n=>z.makeNull(z.toStringOrNull(n))}getFormattedValue(e){var t;let i=this.valueModel.getValue(e);return this.noValueFormatterSupplied&&(this.treeDataTreeList||this.groupingTreeList)&&Array.isArray(i)&&(i=z.last(i)),null!==(t=this.valueFormatterService.formatValue(this.setFilterParams.column,null,i,this.valueFormatter,!1)??z.toStringOrNull(i))&&void 0!==t?t:this.translateForSetFilter("blanks")}applyExcelModeOptions(e){"windows"===e.excelMode?(e.buttons||(e.buttons=["apply","cancel"]),null==e.closeOnApply&&(e.closeOnApply=!0)):"mac"===e.excelMode&&(e.buttons||(e.buttons=["reset"]),null==e.applyMiniFilterWhileTyping&&(e.applyMiniFilterWhileTyping=!0),null==e.debounceMs&&(e.debounceMs=500)),e.excelMode&&e.defaultToNothingSelected&&(e.defaultToNothingSelected=!1,z.warnOnce('The Set Filter Parameter "defaultToNothingSelected" value was ignored because it does not work when "excelMode" is used.'))}addEventListenersForDataChanges(){!this.isValuesTakenFromGrid()||(this.addManagedListener(this.eventService,G.EVENT_CELL_VALUE_CHANGED,e=>{this.setFilterParams&&e.column===this.setFilterParams.column&&this.syncAfterDataChange()}),this.addManagedPropertyListeners(["treeData","getDataPath","groupAllowUnbalanced"],()=>{this.syncAfterDataChange()}))}syncAfterDataChange(){if(!this.valueModel)throw new Error("Value model has not been created.");return this.valueModel.refreshValues().then(()=>{this.checkAndRefreshVirtualList(),this.onBtApply(!1,!0)})}setIsLoading(e){z.setDisplayed(this.eFilterLoading,e),e||(this.hardRefreshVirtualList=!0)}initialiseFilterBodyUi(){this.initVirtualList(),this.initMiniFilter()}initVirtualList(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const t=this.localeService.getLocaleTextFunc()("ariaFilterList","Filter List"),i=!!this.setFilterParams.treeList,n=this.virtualList=this.createBean(new qo({cssIdentifier:"filter",ariaRole:i?"tree":"listbox",listName:t})),s=this.getRefElement("eSetFilterList");i&&s.classList.add("ag-set-filter-tree-list"),s&&s.appendChild(n.getGui());const{cellHeight:o}=this.setFilterParams;let u;null!=o&&n.setRowHeight(o),n.setComponentCreator((p,g)=>this.createSetListItem(p,i,g)),n.setComponentUpdater((p,g)=>this.updateSetListItem(p,g)),u=this.setFilterParams.suppressSelectAll?new NK(this.valueModel):new LK(this.valueModel,()=>this.isSelectAllSelected()),i&&(u=new kK(u)),n.setModel(u)}getSelectAllLabel(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const e=null!=this.valueModel.getMiniFilter()&&this.setFilterParams.excelMode?"selectAllSearchResults":"selectAll";return this.translateForSetFilter(e)}getAddSelectionToFilterLabel(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.translateForSetFilter("addCurrentSelectionToFilter")}createSetListItem(e,t,i){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const n=this.valueModel.hasGroups(),{isSelected:s,isExpanded:o}=this.isSelectedExpanded(e),{value:a,depth:c,isGroup:u,hasIndeterminateExpandState:p,selectedListener:g,expandedListener:m}=this.newSetListItemAttributes(e,t),b=this.createBean(new zs({focusWrapper:i,value:a,params:this.setFilterParams,translate:_=>this.translateForSetFilter(_),valueFormatter:this.valueFormatter,item:e,isSelected:s,isTree:t,depth:c,groupsExist:n,isGroup:u,isExpanded:o,hasIndeterminateExpandState:p}));return b.addEventListener(zs.EVENT_SELECTION_CHANGED,g),m&&b.addEventListener(zs.EVENT_EXPANDED_CHANGED,m),b}newSetTreeItemAttributes(e,t){var i,n,s,o,a,c;if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const u=this.valueModel.hasGroups();return e.key===ga.SELECT_ALL?{value:()=>this.getSelectAllLabel(),isGroup:u,depth:e.depth,hasIndeterminateExpandState:!0,selectedListener:p=>this.onSelectAll(p.isSelected),expandedListener:p=>this.onExpandAll(p.item,p.isExpanded)}:e.key===ga.ADD_SELECTION_TO_FILTER?{value:()=>this.getAddSelectionToFilterLabel(),depth:e.depth,isGroup:!1,hasIndeterminateExpandState:!1,selectedListener:p=>{this.onAddCurrentSelectionToFilterChange(p.isSelected)}}:e.children?{value:null!==(s=null===(n=(i=this.setFilterParams).treeListFormatter)||void 0===n?void 0:n.call(i,e.treeKey,e.depth,e.parentTreeKeys))&&void 0!==s?s:e.treeKey,depth:e.depth,isGroup:!0,selectedListener:p=>this.onGroupItemSelected(p.item,p.isSelected),expandedListener:p=>this.onExpandedChanged(p.item,p.isExpanded)}:{value:null!==(c=null===(a=(o=this.setFilterParams).treeListFormatter)||void 0===a?void 0:a.call(o,e.treeKey,e.depth,e.parentTreeKeys))&&void 0!==c?c:e.treeKey,depth:e.depth,selectedListener:p=>this.onItemSelected(p.item.key,p.isSelected)}}newSetListItemAttributes(e,t){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");return this.isSetFilterModelTreeItem(e)?this.newSetTreeItemAttributes(e,t):e===ga.SELECT_ALL?{value:()=>this.getSelectAllLabel(),selectedListener:i=>this.onSelectAll(i.isSelected)}:e===ga.ADD_SELECTION_TO_FILTER?{value:()=>this.getAddSelectionToFilterLabel(),selectedListener:i=>{this.onAddCurrentSelectionToFilterChange(i.isSelected)}}:{value:this.valueModel.getValue(e),selectedListener:i=>this.onItemSelected(i.item,i.isSelected)}}updateSetListItem(e,t){const{isSelected:i,isExpanded:n}=this.isSelectedExpanded(e);t.refresh(e,i,n)}isSelectedExpanded(e){let t,i;return this.isSetFilterModelTreeItem(e)?(i=e.expanded,t=e.key===ga.SELECT_ALL?this.isSelectAllSelected():e.key===ga.ADD_SELECTION_TO_FILTER?this.valueModel.isAddCurrentSelectionToFilterChecked():e.children?this.areAllChildrenSelected(e):this.valueModel.isKeySelected(e.key)):t=e===ga.SELECT_ALL?this.isSelectAllSelected():e===ga.ADD_SELECTION_TO_FILTER?this.valueModel.isAddCurrentSelectionToFilterChecked():this.valueModel.isKeySelected(e),{isSelected:t,isExpanded:i}}isSetFilterModelTreeItem(e){return void 0!==e?.treeKey}initMiniFilter(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const{eMiniFilter:e,localeService:t}=this,i=t.getLocaleTextFunc();e.setDisplayed(!this.setFilterParams.suppressMiniFilter),e.setValue(this.valueModel.getMiniFilter()),e.onValueChange(()=>this.onMiniFilterInput()),e.setInputAriaLabel(i("ariaSearchFilterValues","Search filter values")),this.addManagedListener(e.getInputElement(),"keydown",n=>this.onMiniFilterKeyDown(n))}updateMiniFilter(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const{eMiniFilter:e}=this;e.isDisplayed()!==!this.setFilterParams.suppressMiniFilter&&e.setDisplayed(!this.setFilterParams.suppressMiniFilter);const t=this.valueModel.getMiniFilter();e.getValue()!==t&&e.setValue(t)}afterGuiAttached(e){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");super.afterGuiAttached(e),this.resetExpansion(),this.refreshVirtualList();const{eMiniFilter:t}=this;t.setInputPlaceholder(this.translateForSetFilter("searchOoo")),(!e||!e.suppressFocus)&&t.getFocusableElement().focus()}afterGuiDetached(){var e,t;super.afterGuiDetached(),null!==(e=this.setFilterParams)&&void 0!==e&&e.excelMode&&this.resetMiniFilter();const i=this.getModel();((null===(t=this.setFilterParams)||void 0===t?void 0:t.excelMode)||!this.areModelsEqual(i,this.getModelFromUi()))&&(this.resetUiToActiveModel(i),this.showOrHideResults())}applyModel(e="api"){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");this.setFilterParams.excelMode&&"rowDataUpdated"!==e&&this.valueModel.isEverythingVisibleSelected()&&this.valueModel.selectAllMatchingMiniFilter();const t=this.valueModel.showAddCurrentSelectionToFilter()&&this.valueModel.isAddCurrentSelectionToFilterChecked();if(t&&!this.getModel())return!1;const i=super.applyModel(e),n=this.getModel();return n?(t||this.valueModel.setAppliedModelKeys(new Set),n.values.forEach(s=>{this.valueModel.addToAppliedModelKeys(s)})):t||this.valueModel.setAppliedModelKeys(null),i}isModelValid(e){return!this.setFilterParams||!this.setFilterParams.excelMode||null==e||e.values.length>0}doesFilterPass(e){if(!this.setFilterParams||!this.valueModel||!this.valueModel.getCaseFormattedAppliedModelKeys())return!0;if(!this.valueModel.hasAnyAppliedModelKey())return!1;const{node:t,data:i}=e;if(this.treeDataTreeList)return this.doesFilterPassForTreeData(t,i);if(this.groupingTreeList)return this.doesFilterPassForGrouping(t);let n=this.getValueFromNode(t);return this.convertValuesToStrings?this.doesFilterPassForConvertValuesToString(t,n):null!=n&&Array.isArray(n)?0===n.length?this.valueModel.hasAppliedModelKey(null):n.some(s=>this.isInAppliedModel(this.createKey(s,t))):this.isInAppliedModel(this.createKey(n,t))}doesFilterPassForConvertValuesToString(e,t){const i=this.createKey(t,e);return null!=i&&Array.isArray(i)?0===i.length?this.valueModel.hasAppliedModelKey(null):i.some(n=>this.isInAppliedModel(n)):this.isInAppliedModel(i)}doesFilterPassForTreeData(e,t){var i;return(null===(i=e.childrenAfterGroup)||void 0===i||!i.length)&&this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(this.getDataPath(t))))}doesFilterPassForGrouping(e){const t=this.columnModel.getRowGroupColumns().map(i=>this.valueService.getKeyForNode(i,e));return t.push(this.getValueFromNode(e)),this.isInAppliedModel(this.createKey(this.checkMakeNullDataPath(t)))}checkMakeNullDataPath(e){return e&&(e=e.map(t=>z.toStringOrNull(z.makeNull(t)))),e?.some(t=>null==t)?null:e}isInAppliedModel(e){return this.valueModel.hasAppliedModelKey(e)}getValueFromNode(e){return this.setFilterParams.getValue(e)}getKeyCreatorParams(e,t=null){return{value:e,colDef:this.setFilterParams.colDef,column:this.setFilterParams.column,node:t,data:t?.data,api:this.setFilterParams.api,columnApi:this.setFilterParams.columnApi,context:this.setFilterParams.context}}onNewRowsLoaded(){!this.isValuesTakenFromGrid()||this.syncAfterDataChange()}isValuesTakenFromGrid(){return!!this.valueModel&&this.valueModel.getValuesType()===ao.TAKEN_FROM_GRID_VALUES}setFilterValues(e){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.overrideValues(e).then(()=>{this.checkAndRefreshVirtualList(),this.onUiChanged()})}resetFilterValues(){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.setValuesType(ao.TAKEN_FROM_GRID_VALUES),this.syncAfterDataChange()}refreshFilterValues(){if(!this.valueModel)throw new Error("Value model has not been created.");!this.valueModel.isInitialised()||this.valueModel.refreshValues().then(()=>{this.checkAndRefreshVirtualList(),this.onUiChanged()})}onAnyFilterChanged(){setTimeout(()=>{if(this.isAlive()){if(!this.valueModel)throw new Error("Value model has not been created.");this.valueModel.refreshAfterAnyFilterChanged().then(e=>{e&&(this.checkAndRefreshVirtualList(),this.showOrHideResults())})}},0)}onMiniFilterInput(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.valueModel.setMiniFilter(this.eMiniFilter.getValue()))return;const{applyMiniFilterWhileTyping:e,readOnly:t}=this.setFilterParams||{};!t&&e?this.filterOnAllVisibleValues(!1):this.updateUiAfterMiniFilterChange()}updateUiAfterMiniFilterChange(){if(!this.setFilterParams)throw new Error("Set filter params have not been provided.");if(!this.valueModel)throw new Error("Value model has not been created.");const{excelMode:e,readOnly:t}=this.setFilterParams||{};null==e||t?this.checkAndRefreshVirtualList():null==this.valueModel.getMiniFilter()?this.resetUiToActiveModel(this.getModel()):(this.valueModel.selectAllMatchingMiniFilter(!0),this.checkAndRefreshVirtualList(),this.onUiChanged()),this.showOrHideResults()}showOrHideResults(){if(!this.valueModel)throw new Error("Value model has not been created.");const e=null!=this.valueModel.getMiniFilter()&&this.valueModel.getDisplayedValueCount()<1;z.setDisplayed(this.eNoMatches,e),z.setDisplayed(this.eSetFilterList,!e)}resetMiniFilter(){var e;this.eMiniFilter.setValue(null,!0),null===(e=this.valueModel)||void 0===e||e.setMiniFilter(null)}resetUiToActiveModel(e,t){this.setModelAndRefresh(null==e?null:e.values).then(()=>{this.onUiChanged(!1,"prevent"),t?.()})}handleCancelEnd(e){this.setMiniFilter(null),super.handleCancelEnd(e)}onMiniFilterKeyDown(e){const{excelMode:t,readOnly:i}=this.setFilterParams||{};e.key===ge.ENTER&&!t&&!i&&this.filterOnAllVisibleValues()}filterOnAllVisibleValues(e=!0){const{readOnly:t}=this.setFilterParams||{};if(!this.valueModel)throw new Error("Value model has not been created.");if(t)throw new Error("Unable to filter in readOnly mode.");this.valueModel.selectAllMatchingMiniFilter(!0),this.checkAndRefreshVirtualList(),this.onUiChanged(!1,e?"immediately":"debounce"),this.showOrHideResults()}focusRowIfAlive(e){null!=e&&window.setTimeout(()=>{if(!this.virtualList)throw new Error("Virtual list has not been created.");this.isAlive()&&this.virtualList.focusRow(e)},0)}onSelectAll(e){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");e?this.valueModel.selectAllMatchingMiniFilter():this.valueModel.deselectAllMatchingMiniFilter(),this.refreshAfterSelection()}onGroupItemSelected(e,t){const i=n=>{n.children?n.children.forEach(s=>i(s)):this.selectItem(n.key,t)};i(e),this.refreshAfterSelection()}onItemSelected(e,t){if(!this.valueModel)throw new Error("Value model has not been created.");if(!this.virtualList)throw new Error("Virtual list has not been created.");this.selectItem(e,t),this.refreshAfterSelection()}selectItem(e,t){t?this.valueModel.selectKey(e):this.valueModel.deselectKey(e)}onExpandAll(e,t){const i=n=>{n.filterPasses&&n.available&&n.children&&(n.children.forEach(s=>i(s)),n.expanded=t)};i(e),this.refreshAfterExpansion()}onExpandedChanged(e,t){e.expanded=t,this.refreshAfterExpansion()}refreshAfterExpansion(){const e=this.virtualList.getLastFocusedRow();this.valueModel.updateDisplayedValues("expansion"),this.checkAndRefreshVirtualList(),this.focusRowIfAlive(e)}refreshAfterSelection(){const e=this.virtualList.getLastFocusedRow();this.checkAndRefreshVirtualList(),this.onUiChanged(),this.focusRowIfAlive(e)}setMiniFilter(e){this.eMiniFilter.setValue(e),this.onMiniFilterInput()}getMiniFilter(){return this.valueModel?this.valueModel.getMiniFilter():null}checkAndRefreshVirtualList(){if(!this.virtualList)throw new Error("Virtual list has not been created.");this.virtualList.refresh(!this.hardRefreshVirtualList),this.hardRefreshVirtualList&&(this.hardRefreshVirtualList=!1)}getFilterKeys(){return this.valueModel?this.valueModel.getKeys():[]}getFilterValues(){return this.valueModel?this.valueModel.getValues():[]}getValues(){return this.getFilterKeys()}refreshVirtualList(){this.setFilterParams&&this.setFilterParams.refreshValuesOnOpen?this.refreshFilterValues():this.checkAndRefreshVirtualList()}translateForSetFilter(e){return this.localeService.getLocaleTextFunc()(e,FK[e])}isSelectAllSelected(){if(!this.setFilterParams||!this.valueModel)return!1;if(this.setFilterParams.defaultToNothingSelected){if(this.valueModel.hasSelections()&&this.valueModel.isEverythingVisibleSelected())return!0;if(this.valueModel.isNothingVisibleSelected())return!1}else{if(this.valueModel.hasSelections()&&this.valueModel.isNothingVisibleSelected())return!1;if(this.valueModel.isEverythingVisibleSelected())return!0}}areAllChildrenSelected(e){const t=i=>{if(i.children){let n=!1,s=!1;return i.children.some(a=>{if(!a.filterPasses||!a.available)return!1;const c=t(a);return void 0===c||(c?n=!0:s=!0,n&&s)})?void 0:n}return this.valueModel.isKeySelected(i.key)};return this.setFilterParams.defaultToNothingSelected?this.valueModel.hasSelections()&&t(e):t(e)}destroy(){null!=this.virtualList&&(this.virtualList.destroy(),this.virtualList=null),super.destroy()}caseFormat(e){return null==e||"string"!=typeof e||this.caseSensitive?e:e.toUpperCase()}resetExpansion(){var e,t;if(null===(e=this.setFilterParams)||void 0===e||!e.treeList)return;const i=null===(t=this.valueModel)||void 0===t?void 0:t.getSelectAllItem();if(this.isSetFilterModelTreeItem(i)){const n=s=>{s.children&&(s.children.forEach(o=>n(o)),s.expanded=!1)};n(i),this.valueModel.updateDisplayedValues("expansion")}}getModelAsString(e){return this.filterModelFormatter.getModelAsString(e,this)}getPositionableElement(){return this.eSetFilterList}}fy([re("eMiniFilter")],Gp.prototype,"eMiniFilter",void 0),fy([re("eFilterLoading")],Gp.prototype,"eFilterLoading",void 0),fy([re("eSetFilterList")],Gp.prototype,"eSetFilterList",void 0),fy([re("eFilterNoMatches")],Gp.prototype,"eNoMatches",void 0),fy([P("valueFormatterService")],Gp.prototype,"valueFormatterService",void 0),fy([P("columnModel")],Gp.prototype,"columnModel",void 0),fy([P("valueService")],Gp.prototype,"valueService",void 0);class NK{constructor(e){this.model=e}getRowCount(){return this.model.getDisplayedValueCount()}getRow(e){return this.model.getDisplayedItem(e)}areRowsEqual(e,t){return e===t}}class LK{constructor(e,t){this.model=e,this.isSelectAllSelected=t}getRowCount(){const t=this.model.showAddCurrentSelectionToFilter()?2:1;return this.model.getDisplayedValueCount()+t}getRow(e){if(0===e)return this.model.getSelectAllItem();const t=this.model.showAddCurrentSelectionToFilter(),i=t?2:1;return 1===e&&t?this.model.getAddSelectionToFilterItem():this.model.getDisplayedItem(e-i)}areRowsEqual(e,t){return e===t}}class kK{constructor(e){this.model=e}getRowCount(){return this.model.getRowCount()}getRow(e){return this.model.getRow(e)}areRowsEqual(e,t){return null==e&&null==t||null!=e&&null!=t&&e.treeKey===t.treeKey&&e.depth===t.depth}}var SH=function(r,e,t,i){var o,n=arguments.length,s=n<3?e:null===i?i=Object.getOwnPropertyDescriptor(e,t):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)s=Reflect.decorate(r,e,t,i);else for(var a=r.length-1;a>=0;a--)(o=r[a])&&(s=(n<3?o(s):n>3?o(e,t,s):o(e,t))||s);return n>3&&s&&Object.defineProperty(e,t,s),s};class mL extends Ne{constructor(){super('\n            <div class="ag-floating-filter-input ag-set-floating-filter-input" role="presentation">\n                <ag-input-text-field ref="eFloatingFilterText"></ag-input-text-field>\n            </div>'),this.availableValuesListenerAdded=!1,this.filterModelFormatter=new yH}destroy(){super.destroy()}init(e){this.params=e,this.eFloatingFilterText.setDisabled(!0).addGuiEventListener("click",()=>this.params.showParentFilter()),this.setParams(e)}setParams(e){const t=this.columnModel.getDisplayNameForColumn(e.column,"header",!0),i=this.localeService.getLocaleTextFunc();this.eFloatingFilterText.setInputAriaLabel(`${t} ${i("ariaFilterInput","Filter Input")}`)}onParamsUpdated(e){this.refresh(e)}refresh(e){this.params=e,this.setParams(e)}onParentModelChanged(e){this.updateFloatingFilterText(e)}parentSetFilterInstance(e){this.params.parentFilterInstance(t=>{if(!(t instanceof Gp))throw new Error("AG Grid - SetFloatingFilter expects SetFilter as its parent");e(t)})}addAvailableValuesListener(){this.parentSetFilterInstance(e=>{const t=e.getValueModel();!t||this.addManagedListener(t,CH.EVENT_AVAILABLE_VALUES_CHANGED,()=>this.updateFloatingFilterText())}),this.availableValuesListenerAdded=!0}updateFloatingFilterText(e){this.availableValuesListenerAdded||this.addAvailableValuesListener(),this.parentSetFilterInstance(t=>{this.eFloatingFilterText.setValue(this.filterModelFormatter.getModelAsString(e,t))})}}SH([re("eFloatingFilterText")],mL.prototype,"eFloatingFilterText",void 0),SH([P("columnModel")],mL.prototype,"columnModel",void 0);const GK={version:"31.1.1",moduleName:ze.SetFilterModule,beans:[],userComponents:[{componentName:"agSetColumnFilter",componentClass:Gp},{componentName:"agSetColumnFloatingFilter",componentClass:mL}],dependantModules:[uu]};var bH=A(1214);let _H=(()=>{class r{constructor(t){this.oauthService=t,this.clientId="494395922809-oa4h19stvej6gt8bvmjnv7ofoni7ap5i.apps.googleusercontent.com",this.apiKey="AIzaSyA2mrYyZestnVjIjt4xHKTDrbfQjmPn0bU",this.scopes="https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/spreadsheets",this.authConfig={issuer:"https://accounts.google.com",strictDiscoveryDocumentValidation:!1,clientId:"494395922809-oa4h19stvej6gt8bvmjnv7ofoni7ap5i.apps.googleusercontent.com",scope:"openid profile email https://www.googleapis.com/auth/drive https://www.googleapis.com/auth/spreadsheets",redirectUri:window.location.origin},this.configure()}configure(){this.oauthService.configure(this.authConfig),this.oauthService.loadDiscoveryDocumentAndTryLogin()}login(){this.oauthService.initLoginFlow()}logout(){this.oauthService.logOut()}get identityClaims(){return this.oauthService.getIdentityClaims()}get getToken(){return this.oauthService.getAccessToken()}initClient(){gapi.load("client:auth2",()=>{gapi.client.init({apiKey:this.apiKey,clientId:this.clientId,scope:this.scopes,discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]})})}signIn(){return new Gi.y(t=>{gapi.auth2.getAuthInstance().signIn().then(n=>{t.next(n),t.complete()},n=>t.error(n))})}signOut(){gapi.auth2.getAuthInstance().signOut()}getAccessToken(){return gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token}}return r.\u0275fac=function(t){return new(t||r)(C.LFG(bH.Ct))},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var ET=A(5793);let VK=(()=>{class r{constructor(t,i){this.http=t,this.authService=i,this.apiKey="AIzaSyA2mrYyZestnVjIjt4xHKTDrbfQjmPn0bU",this.sheetId="1Eb_LL_JDmW2k6lj0CNkNSOKGVQmgXpjXRqvffFpvi0I",this.baseUrl=`https://sheets.googleapis.com/v4/spreadsheets/${this.sheetId}/values`}getSheetData(t){const i=this.authService.getToken;if(console.log(i),!i)throw new Error("User not authenticated");const n=`https://sheets.googleapis.com/v4/spreadsheets/${this.sheetId}/values/${t}`,s=new ET.WM({Authorization:`Bearer ${i}`});return this.http.get(n,{headers:s})}getSheetData1(t){return this.http.get(`${this.baseUrl}/${t}?key=${this.apiKey}`)}appendData1(t,i){return this.http.post(`${this.baseUrl}/${t}:append?valueInputOption=RAW&key=${this.apiKey}`,{values:i})}updateSheetData(t,i,n){const s=this.authService.getToken;if(!s)throw new Error("User not authenticated");const o=`https://sheets.googleapis.com/v4/spreadsheets/${this.sheetId}/values/${t}!${i}?valueInputOption=RAW`,a=new ET.WM({Authorization:`Bearer ${s}`,"Content-Type":"application/json"});return this.http.put(o,{values:n},{headers:a})}appendSheetData(t,i){const n=this.authService.getToken;if(!n)throw new Error("User not authenticated");const s=`https://sheets.googleapis.com/v4/spreadsheets/${this.sheetId}/values/${t}:append?valueInputOption=RAW`,o=new ET.WM({Authorization:`Bearer ${n}`,"Content-Type":"application/json"});return this.http.post(s,{values:i},{headers:o})}}return r.\u0275fac=function(t){return new(t||r)(C.LFG(ET.eN),C.LFG(_H))},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})();var BK=A(8896),sx=A(1086),ma=A(5529),HK=A(7043);function va(r,e,t,i){return(0,HK.m)(t)&&(i=t,t=void 0),i?va(r,e,t).pipe((0,As.U)(n=>(0,ba.k)(n)?i(...n):i(n))):new Gi.y(n=>{wH(r,e,function s(o){n.next(arguments.length>1?Array.prototype.slice.call(arguments):o)},n,t)})}function wH(r,e,t,i,n){let s;if(function jK(r){return r&&"function"==typeof r.addEventListener&&"function"==typeof r.removeEventListener}(r)){const o=r;r.addEventListener(e,t,n),s=()=>o.removeEventListener(e,t,n)}else if(function WK(r){return r&&"function"==typeof r.on&&"function"==typeof r.off}(r)){const o=r;r.on(e,t),s=()=>o.off(e,t)}else if(function UK(r){return r&&"function"==typeof r.addListener&&"function"==typeof r.removeListener}(r)){const o=r;r.addListener(e,t),s=()=>o.removeListener(e,t)}else{if(!r||!r.length)throw new TypeError("Invalid event target");for(let o=0,a=r.length;o<a;o++)wH(r[o],e,t,i,n)}i.add(s)}var zK=A(6014);function EH(r){return!(0,ba.k)(r)&&r-parseFloat(r)+1>=0}var vL=A(2866);function $K(r){const{index:e,period:t,subscriber:i}=r;if(i.next(e),!i.closed){if(-1===t)return i.complete();r.index=e+1,this.schedule(r,t)}}var TH=A(1946);A(5279),A(6053);var YK=A(7876);new Gi.y(YK.Z);var qK=A(3009),CL=A(3489),rx=A(5430),ew=A(1177);function ox(...r){const e=r[r.length-1];return"function"==typeof e&&r.pop(),(0,qK.n)(r,void 0).lift(new XK(e))}class XK{constructor(e){this.resultSelector=e}call(e,t){return t.subscribe(new ZK(e,this.resultSelector))}}class ZK extends CL.L{constructor(e,t,i=Object.create(null)){super(e),this.resultSelector=t,this.iterators=[],this.active=0,this.resultSelector="function"==typeof t?t:void 0}_next(e){const t=this.iterators;(0,ba.k)(e)?t.push(new QK(e)):t.push("function"==typeof e[rx.hZ]?new JK(e[rx.hZ]()):new e5(this.destination,this,e))}_complete(){const e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(let i=0;i<t;i++){let n=e[i];n.stillUnsubscribed?this.destination.add(n.subscribe()):this.active--}}else this.destination.complete()}notifyInactive(){this.active--,0===this.active&&this.destination.complete()}checkIterators(){const e=this.iterators,t=e.length,i=this.destination;for(let o=0;o<t;o++){let a=e[o];if("function"==typeof a.hasValue&&!a.hasValue())return}let n=!1;const s=[];for(let o=0;o<t;o++){let a=e[o],c=a.next();if(a.hasCompleted()&&(n=!0),c.done)return void i.complete();s.push(c.value)}this.resultSelector?this._tryresultSelector(s):i.next(s),n&&i.complete()}_tryresultSelector(e){let t;try{t=this.resultSelector.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}class JK{constructor(e){this.iterator=e,this.nextResult=e.next()}hasValue(){return!0}next(){const e=this.nextResult;return this.nextResult=this.iterator.next(),e}hasCompleted(){const e=this.nextResult;return Boolean(e&&e.done)}}class QK{constructor(e){this.array=e,this.index=0,this.length=0,this.length=e.length}[rx.hZ](){return this}next(e){const t=this.index++;return t<this.length?{value:this.array[t],done:!1}:{value:null,done:!0}}hasValue(){return this.array.length>this.index}hasCompleted(){return this.array.length===this.index}}class e5 extends ew.Ds{constructor(e,t,i){super(e),this.parent=t,this.observable=i,this.stillUnsubscribed=!0,this.buffer=[],this.isComplete=!1}[rx.hZ](){return this}next(){const e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}}hasValue(){return this.buffer.length>0}hasCompleted(){return 0===this.buffer.length&&this.isComplete}notifyComplete(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()}notifyNext(e){this.buffer.push(e),this.parent.checkIterators()}subscribe(){return(0,ew.ft)(this.observable,new ew.IY(this))}}var t5=A(9146);function $s(r){return e=>e.lift(new s5(r))}class s5{constructor(e){this.notifier=e}call(e,t){const i=new r5(e),n=(0,ew.ft)(this.notifier,new ew.IY(i));return n&&!i.seenValue?(i.add(n),t.subscribe(i)):i}}class r5 extends ew.Ds{constructor(e){super(e),this.seenValue=!1}notifyNext(){this.seenValue=!0,this.complete()}notifyComplete(){}}var tw=A(2198),Ku=A(5632),OH=A(7545),MH=A(2994),l5=A(826),c5=A(448);function _L(...r){return e=>{let t;return"function"==typeof r[r.length-1]&&(t=r.pop()),e.lift(new d5(r,t))}}class d5{constructor(e,t){this.observables=e,this.project=t}call(e,t){return t.subscribe(new u5(e,this.observables,this.project))}}class u5 extends l5.L{constructor(e,t,i){super(e),this.observables=t,this.project=i,this.toRespond=[];const n=t.length;this.values=new Array(n);for(let s=0;s<n;s++)this.toRespond.push(s);for(let s=0;s<n;s++)this.add((0,c5.D)(this,t[s],void 0,s))}notifyNext(e,t,i){this.values[i]=t;const n=this.toRespond;if(n.length>0){const s=n.indexOf(i);-1!==s&&n.splice(s,1)}}notifyComplete(){}_next(e){if(0===this.toRespond.length){const t=[e,...this.values];this.project?this._tryProject(t):this.destination.next(t)}}_tryProject(e){let t;try{t=this.project.apply(this,e)}catch(i){return void this.destination.error(i)}this.destination.next(t)}}var h5=A(9860),m5={left:"right",right:"left",bottom:"top",top:"bottom"};function ax(r){return r.replace(/left|right|bottom|top/g,function(e){return m5[e]})}function Yu(r){return r.split("-")[0]}var v5={start:"end",end:"start"};function xH(r){return r.replace(/start|end/g,function(e){return v5[e]})}var nl="top",Cd="bottom",yd="right",sl="left",wL="auto",DT=[nl,Cd,yd,sl],iw="start",TT="end",PH="viewport",RT="popper",IH=DT.reduce(function(r,e){return r.concat([e+"-"+iw,e+"-"+TT])},[]),FH=[].concat(DT,[wL]).reduce(function(r,e){return r.concat([e,e+"-"+iw,e+"-"+TT])},[]),O5=["beforeRead","read","afterRead","beforeMain","main","afterMain","beforeWrite","write","afterWrite"];function rl(r){if(null==r)return window;if("[object Window]"!==r.toString()){var e=r.ownerDocument;return e&&e.defaultView||window}return r}function my(r){return r instanceof rl(r).Element||r instanceof Element}function uc(r){return r instanceof rl(r).HTMLElement||r instanceof HTMLElement}function EL(r){return!(typeof ShadowRoot>"u")&&(r instanceof rl(r).ShadowRoot||r instanceof ShadowRoot)}function Sm(r){return((my(r)?r.ownerDocument:r.document)||window.document).documentElement}var vy=Math.max,lx=Math.min,nw=Math.round;function DL(){var r=navigator.userAgentData;return null!=r&&r.brands&&Array.isArray(r.brands)?r.brands.map(function(e){return e.brand+"/"+e.version}).join(" "):navigator.userAgent}function NH(){return!/^((?!chrome|android).)*safari/i.test(DL())}function sw(r,e,t){void 0===e&&(e=!1),void 0===t&&(t=!1);var i=r.getBoundingClientRect(),n=1,s=1;e&&uc(r)&&(n=r.offsetWidth>0&&nw(i.width)/r.offsetWidth||1,s=r.offsetHeight>0&&nw(i.height)/r.offsetHeight||1);var a=(my(r)?rl(r):window).visualViewport,c=!NH()&&t,u=(i.left+(c&&a?a.offsetLeft:0))/n,p=(i.top+(c&&a?a.offsetTop:0))/s,g=i.width/n,m=i.height/s;return{width:g,height:m,top:p,right:u+g,bottom:p+m,left:u,x:u,y:p}}function TL(r){var e=rl(r);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function RL(r){return sw(Sm(r)).left+TL(r).scrollLeft}function Vp(r){return rl(r).getComputedStyle(r)}function qu(r){return r?(r.nodeName||"").toLowerCase():null}function cx(r){return"html"===qu(r)?r:r.assignedSlot||r.parentNode||(EL(r)?r.host:null)||Sm(r)}function AL(r){var e=Vp(r);return/auto|scroll|overlay|hidden/.test(e.overflow+e.overflowY+e.overflowX)}function LH(r){return["html","body","#document"].indexOf(qu(r))>=0?r.ownerDocument.body:uc(r)&&AL(r)?r:LH(cx(r))}function AT(r,e){var t;void 0===e&&(e=[]);var i=LH(r),n=i===(null==(t=r.ownerDocument)?void 0:t.body),s=rl(i),o=n?[s].concat(s.visualViewport||[],AL(i)?i:[]):i,a=e.concat(o);return n?a:a.concat(AT(cx(o)))}function P5(r){return["table","td","th"].indexOf(qu(r))>=0}function kH(r){return uc(r)&&"fixed"!==Vp(r).position?r.offsetParent:null}function OT(r){for(var e=rl(r),t=kH(r);t&&P5(t)&&"static"===Vp(t).position;)t=kH(t);return t&&("html"===qu(t)||"body"===qu(t)&&"static"===Vp(t).position)?e:t||function I5(r){var e=/firefox/i.test(DL());if(/Trident/i.test(DL())&&uc(r)&&"fixed"===Vp(r).position)return null;var n=cx(r);for(EL(n)&&(n=n.host);uc(n)&&["html","body"].indexOf(qu(n))<0;){var s=Vp(n);if("none"!==s.transform||"none"!==s.perspective||"paint"===s.contain||-1!==["transform","perspective"].indexOf(s.willChange)||e&&"filter"===s.willChange||e&&s.filter&&"none"!==s.filter)return n;n=n.parentNode}return null}(r)||e}function GH(r,e){var t=e.getRootNode&&e.getRootNode();if(r.contains(e))return!0;if(t&&EL(t)){var i=e;do{if(i&&r.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function OL(r){return Object.assign({},r,{left:r.x,top:r.y,right:r.x+r.width,bottom:r.y+r.height})}function VH(r,e,t){return e===PH?OL(function M5(r,e){var t=rl(r),i=Sm(r),n=t.visualViewport,s=i.clientWidth,o=i.clientHeight,a=0,c=0;if(n){s=n.width,o=n.height;var u=NH();(u||!u&&"fixed"===e)&&(a=n.offsetLeft,c=n.offsetTop)}return{width:s,height:o,x:a+RL(r),y:c}}(r,t)):my(e)?function F5(r,e){var t=sw(r,!1,"fixed"===e);return t.top=t.top+r.clientTop,t.left=t.left+r.clientLeft,t.bottom=t.top+r.clientHeight,t.right=t.left+r.clientWidth,t.width=r.clientWidth,t.height=r.clientHeight,t.x=t.left,t.y=t.top,t}(e,t):OL(function x5(r){var e,t=Sm(r),i=TL(r),n=null==(e=r.ownerDocument)?void 0:e.body,s=vy(t.scrollWidth,t.clientWidth,n?n.scrollWidth:0,n?n.clientWidth:0),o=vy(t.scrollHeight,t.clientHeight,n?n.scrollHeight:0,n?n.clientHeight:0),a=-i.scrollLeft+RL(r),c=-i.scrollTop;return"rtl"===Vp(n||t).direction&&(a+=vy(t.clientWidth,n?n.clientWidth:0)-s),{width:s,height:o,x:a,y:c}}(Sm(r)))}function rw(r){return r.split("-")[1]}function ML(r){return["top","bottom"].indexOf(r)>=0?"x":"y"}function BH(r){var c,e=r.reference,t=r.element,i=r.placement,n=i?Yu(i):null,s=i?rw(i):null,o=e.x+e.width/2-t.width/2,a=e.y+e.height/2-t.height/2;switch(n){case nl:c={x:o,y:e.y-t.height};break;case Cd:c={x:o,y:e.y+e.height};break;case yd:c={x:e.x+e.width,y:a};break;case sl:c={x:e.x-t.width,y:a};break;default:c={x:e.x,y:e.y}}var u=n?ML(n):null;if(null!=u){var p="y"===u?"height":"width";switch(s){case iw:c[u]=c[u]-(e[p]/2-t[p]/2);break;case TT:c[u]=c[u]+(e[p]/2-t[p]/2)}}return c}function UH(r){return Object.assign({},{top:0,right:0,bottom:0,left:0},r)}function WH(r,e){return e.reduce(function(t,i){return t[i]=r,t},{})}function xL(r,e){void 0===e&&(e={});var i=e.placement,n=void 0===i?r.placement:i,s=e.strategy,o=void 0===s?r.strategy:s,a=e.boundary,c=void 0===a?"clippingParents":a,u=e.rootBoundary,p=void 0===u?PH:u,g=e.elementContext,m=void 0===g?RT:g,y=e.altBoundary,b=void 0!==y&&y,_=e.padding,E=void 0===_?0:_,D=UH("number"!=typeof E?E:WH(E,DT)),O=r.rects.popper,L=r.elements[b?m===RT?"reference":RT:m],k=function L5(r,e,t,i){var n="clippingParents"===e?function N5(r){var e=AT(cx(r)),i=["absolute","fixed"].indexOf(Vp(r).position)>=0&&uc(r)?OT(r):r;return my(i)?e.filter(function(n){return my(n)&&GH(n,i)&&"body"!==qu(n)}):[]}(r):[].concat(e),s=[].concat(n,[t]),a=s.reduce(function(c,u){var p=VH(r,u,i);return c.top=vy(p.top,c.top),c.right=lx(p.right,c.right),c.bottom=lx(p.bottom,c.bottom),c.left=vy(p.left,c.left),c},VH(r,s[0],i));return a.width=a.right-a.left,a.height=a.bottom-a.top,a.x=a.left,a.y=a.top,a}(my(L)?L:L.contextElement||Sm(r.elements.popper),c,p,o),U=sw(r.elements.reference),j=BH({reference:U,element:O,strategy:"absolute",placement:n}),q=OL(Object.assign({},O,j)),J=m===RT?q:U,me={top:k.top-J.top+D.top,bottom:J.bottom-k.bottom+D.bottom,left:k.left-J.left+D.left,right:J.right-k.right+D.right},ye=r.modifiersData.offset;if(m===RT&&ye){var Ae=ye[n];Object.keys(me).forEach(function(Pe){var Le=[yd,Cd].indexOf(Pe)>=0?1:-1,Xe=[nl,Cd].indexOf(Pe)>=0?"y":"x";me[Pe]+=Ae[Xe]*Le})}return me}const B5={name:"flip",enabled:!0,phase:"main",fn:function V5(r){var e=r.state,t=r.options,i=r.name;if(!e.modifiersData[i]._skip){for(var n=t.mainAxis,s=void 0===n||n,o=t.altAxis,a=void 0===o||o,c=t.fallbackPlacements,u=t.padding,p=t.boundary,g=t.rootBoundary,m=t.altBoundary,y=t.flipVariations,b=void 0===y||y,_=t.allowedAutoPlacements,E=e.options.placement,D=Yu(E),O=c||(D!==E&&b?function G5(r){if(Yu(r)===wL)return[];var e=ax(r);return[xH(r),e,xH(e)]}(E):[ax(E)]),L=[E].concat(O).reduce(function(jn,Rn){return jn.concat(Yu(Rn)===wL?function k5(r,e){void 0===e&&(e={});var n=e.boundary,s=e.rootBoundary,o=e.padding,a=e.flipVariations,c=e.allowedAutoPlacements,u=void 0===c?FH:c,p=rw(e.placement),g=p?a?IH:IH.filter(function(b){return rw(b)===p}):DT,m=g.filter(function(b){return u.indexOf(b)>=0});0===m.length&&(m=g);var y=m.reduce(function(b,_){return b[_]=xL(r,{placement:_,boundary:n,rootBoundary:s,padding:o})[Yu(_)],b},{});return Object.keys(y).sort(function(b,_){return y[b]-y[_]})}(e,{placement:Rn,boundary:p,rootBoundary:g,padding:u,flipVariations:b,allowedAutoPlacements:_}):Rn)},[]),k=e.rects.reference,U=e.rects.popper,j=new Map,q=!0,J=L[0],me=0;me<L.length;me++){var ye=L[me],Ae=Yu(ye),Pe=rw(ye)===iw,Le=[nl,Cd].indexOf(Ae)>=0,Xe=Le?"width":"height",Je=xL(e,{placement:ye,boundary:p,rootBoundary:g,altBoundary:m,padding:u}),ht=Le?Pe?yd:sl:Pe?Cd:nl;k[Xe]>U[Xe]&&(ht=ax(ht));var Dt=ax(ht),Ft=[];if(s&&Ft.push(Je[Ae]<=0),a&&Ft.push(Je[ht]<=0,Je[Dt]<=0),Ft.every(function(jn){return jn})){J=ye,q=!1;break}j.set(ye,Ft)}if(q)for(var Nt=function(Rn){var rt=L.find(function(ui){var Li=j.get(ui);if(Li)return Li.slice(0,Rn).every(function(en){return en})});if(rt)return J=rt,"break"},Ht=b?3:1;Ht>0&&"break"!==Nt(Ht);Ht--);e.placement!==J&&(e.modifiersData[i]._skip=!0,e.placement=J,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function MT(r,e,t){return vy(r,lx(e,t))}function PL(r){var e=sw(r),t=r.offsetWidth,i=r.offsetHeight;return Math.abs(e.width-t)<=1&&(t=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:r.offsetLeft,y:r.offsetTop,width:t,height:i}}const j5={name:"preventOverflow",enabled:!0,phase:"main",fn:function W5(r){var e=r.state,t=r.options,i=r.name,n=t.mainAxis,s=void 0===n||n,o=t.altAxis,a=void 0!==o&&o,m=t.tether,y=void 0===m||m,b=t.tetherOffset,_=void 0===b?0:b,E=xL(e,{boundary:t.boundary,rootBoundary:t.rootBoundary,padding:t.padding,altBoundary:t.altBoundary}),D=Yu(e.placement),R=rw(e.placement),O=!R,L=ML(D),k=function H5(r){return"x"===r?"y":"x"}(L),U=e.modifiersData.popperOffsets,j=e.rects.reference,q=e.rects.popper,J="function"==typeof _?_(Object.assign({},e.rects,{placement:e.placement})):_,me="number"==typeof J?{mainAxis:J,altAxis:J}:Object.assign({mainAxis:0,altAxis:0},J),ye=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,Ae={x:0,y:0};if(U){if(s){var Pe,Le="y"===L?nl:sl,Xe="y"===L?Cd:yd,Je="y"===L?"height":"width",ht=U[L],Dt=ht+E[Le],Ft=ht-E[Xe],Mt=y?-q[Je]/2:0,Nt=R===iw?j[Je]:q[Je],Ht=R===iw?-q[Je]:-j[Je],Tn=e.elements.arrow,jn=y&&Tn?PL(Tn):{width:0,height:0},Rn=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},rt=Rn[Le],ui=Rn[Xe],Li=MT(0,j[Je],jn[Je]),en=O?j[Je]/2-Mt-Li-rt-me.mainAxis:Nt-Li-rt-me.mainAxis,zn=O?-j[Je]/2+Mt+Li+ui+me.mainAxis:Ht+Li+ui+me.mainAxis,lo=e.elements.arrow&&OT(e.elements.arrow),Ir=null!=(Pe=ye?.[L])?Pe:0,Hp=ht+zn-Ir,ur=MT(y?lx(Dt,ht+en-Ir-(lo?"y"===L?lo.clientTop||0:lo.clientLeft||0:0)):Dt,ht,y?vy(Ft,Hp):Ft);U[L]=ur,Ae[L]=ur-ht}if(a){var al,$n=U[k],Em="y"===k?"height":"width",wy=$n+E["x"===L?nl:sl],lw=$n-E["x"===L?Cd:yd],Dm=-1!==[nl,sl].indexOf(D),Tm=null!=(al=ye?.[k])?al:0,yx=Dm?wy:$n-j[Em]-q[Em]-Tm+me.altAxis,kT=Dm?$n+j[Em]+q[Em]-Tm-me.altAxis:lw,Sx=y&&Dm?function U5(r,e,t){var i=MT(r,e,t);return i>t?t:i}(yx,$n,kT):MT(y?yx:wy,$n,y?kT:lw);U[k]=Sx,Ae[k]=Sx-$n}e.modifiersData[i]=Ae}},requiresIfExists:["offset"]},Y5={name:"arrow",enabled:!0,phase:"main",fn:function $5(r){var e,t=r.state,i=r.name,n=r.options,s=t.elements.arrow,o=t.modifiersData.popperOffsets,a=Yu(t.placement),c=ML(a),p=[sl,yd].indexOf(a)>=0?"height":"width";if(s&&o){var g=function(e,t){return UH("number"!=typeof(e="function"==typeof e?e(Object.assign({},t.rects,{placement:t.placement})):e)?e:WH(e,DT))}(n.padding,t),m=PL(s),y="y"===c?nl:sl,b="y"===c?Cd:yd,_=t.rects.reference[p]+t.rects.reference[c]-o[c]-t.rects.popper[p],E=o[c]-t.rects.reference[c],D=OT(s),R=D?"y"===c?D.clientHeight||0:D.clientWidth||0:0,U=R/2-m[p]/2+(_/2-E/2),j=MT(g[y],U,R-m[p]-g[b]);t.modifiersData[i]=((e={})[c]=j,e.centerOffset=j-U,e)}},effect:function K5(r){var e=r.state,i=r.options.element,n=void 0===i?"[data-popper-arrow]":i;null!=n&&("string"==typeof n&&!(n=e.elements.popper.querySelector(n))||!GH(e.elements.popper,n)||(e.elements.arrow=n))},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function J5(r,e,t){void 0===t&&(t=!1);var i=uc(e),n=uc(e)&&function Z5(r){var e=r.getBoundingClientRect(),t=nw(e.width)/r.offsetWidth||1,i=nw(e.height)/r.offsetHeight||1;return 1!==t||1!==i}(e),s=Sm(e),o=sw(r,n,t),a={scrollLeft:0,scrollTop:0},c={x:0,y:0};return(i||!i&&!t)&&(("body"!==qu(e)||AL(s))&&(a=function X5(r){return r!==rl(r)&&uc(r)?function q5(r){return{scrollLeft:r.scrollLeft,scrollTop:r.scrollTop}}(r):TL(r)}(e)),uc(e)?((c=sw(e,!0)).x+=e.clientLeft,c.y+=e.clientTop):s&&(c.x=RL(s))),{x:o.left+a.scrollLeft-c.x,y:o.top+a.scrollTop-c.y,width:o.width,height:o.height}}function Q5(r){var e=new Map,t=new Set,i=[];function n(s){t.add(s.name),[].concat(s.requires||[],s.requiresIfExists||[]).forEach(function(a){if(!t.has(a)){var c=e.get(a);c&&n(c)}}),i.push(s)}return r.forEach(function(s){e.set(s.name,s)}),r.forEach(function(s){t.has(s.name)||n(s)}),i}function t8(r){var e;return function(){return e||(e=new Promise(function(t){Promise.resolve().then(function(){e=void 0,t(r())})})),e}}var jH={placement:"bottom",modifiers:[],strategy:"absolute"};function zH(){for(var r=arguments.length,e=new Array(r),t=0;t<r;t++)e[t]=arguments[t];return!e.some(function(i){return!(i&&"function"==typeof i.getBoundingClientRect)})}function n8(r){void 0===r&&(r={});var t=r.defaultModifiers,i=void 0===t?[]:t,n=r.defaultOptions,s=void 0===n?jH:n;return function(a,c,u){void 0===u&&(u=s);var p={placement:"bottom",orderedModifiers:[],options:Object.assign({},jH,s),modifiersData:{},elements:{reference:a,popper:c},attributes:{},styles:{}},g=[],m=!1,y={state:p,setOptions:function(D){var R="function"==typeof D?D(p.options):D;_(),p.options=Object.assign({},s,p.options,R),p.scrollParents={reference:my(a)?AT(a):a.contextElement?AT(a.contextElement):[],popper:AT(c)};var O=function e8(r){var e=Q5(r);return O5.reduce(function(t,i){return t.concat(e.filter(function(n){return n.phase===i}))},[])}(function i8(r){var e=r.reduce(function(t,i){var n=t[i.name];return t[i.name]=n?Object.assign({},n,i,{options:Object.assign({},n.options,i.options),data:Object.assign({},n.data,i.data)}):i,t},{});return Object.keys(e).map(function(t){return e[t]})}([].concat(i,p.options.modifiers)));return p.orderedModifiers=O.filter(function(L){return L.enabled}),function b(){p.orderedModifiers.forEach(function(E){var R=E.options,L=E.effect;if("function"==typeof L){var k=L({state:p,name:E.name,instance:y,options:void 0===R?{}:R});g.push(k||function(){})}})}(),y.update()},forceUpdate:function(){if(!m){var D=p.elements,R=D.reference,O=D.popper;if(zH(R,O)){p.rects={reference:J5(R,OT(O),"fixed"===p.options.strategy),popper:PL(O)},p.reset=!1,p.placement=p.options.placement,p.orderedModifiers.forEach(function(me){return p.modifiersData[me.name]=Object.assign({},me.data)});for(var L=0;L<p.orderedModifiers.length;L++)if(!0!==p.reset){var k=p.orderedModifiers[L],U=k.fn,j=k.options;"function"==typeof U&&(p=U({state:p,options:void 0===j?{}:j,name:k.name,instance:y})||p)}else p.reset=!1,L=-1}}},update:t8(function(){return new Promise(function(E){y.forceUpdate(),E(p)})}),destroy:function(){_(),m=!0}};if(!zH(a,c))return y;function _(){g.forEach(function(E){return E()}),g=[]}return y.setOptions(u).then(function(E){!m&&u.onFirstUpdate&&u.onFirstUpdate(E)}),y}}var dx={passive:!0};const r8={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function s8(r){var e=r.state,t=r.instance,i=r.options,n=i.scroll,s=void 0===n||n,o=i.resize,a=void 0===o||o,c=rl(e.elements.popper),u=[].concat(e.scrollParents.reference,e.scrollParents.popper);return s&&u.forEach(function(p){p.addEventListener("scroll",t.update,dx)}),a&&c.addEventListener("resize",t.update,dx),function(){s&&u.forEach(function(p){p.removeEventListener("scroll",t.update,dx)}),a&&c.removeEventListener("resize",t.update,dx)}},data:{}},a8={name:"popperOffsets",enabled:!0,phase:"read",fn:function o8(r){var e=r.state;e.modifiersData[r.name]=BH({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}};var l8={top:"auto",right:"auto",bottom:"auto",left:"auto"};function $H(r){var e,t=r.popper,i=r.popperRect,n=r.placement,s=r.variation,o=r.offsets,a=r.position,c=r.gpuAcceleration,u=r.adaptive,p=r.roundOffsets,g=r.isFixed,m=o.x,y=void 0===m?0:m,b=o.y,_=void 0===b?0:b,E="function"==typeof p?p({x:y,y:_}):{x:y,y:_};y=E.x,_=E.y;var D=o.hasOwnProperty("x"),R=o.hasOwnProperty("y"),O=sl,L=nl,k=window;if(u){var U=OT(t),j="clientHeight",q="clientWidth";U===rl(t)&&"static"!==Vp(U=Sm(t)).position&&"absolute"===a&&(j="scrollHeight",q="scrollWidth"),(n===nl||(n===sl||n===yd)&&s===TT)&&(L=Cd,_-=(g&&U===k&&k.visualViewport?k.visualViewport.height:U[j])-i.height,_*=c?1:-1),n!==sl&&(n!==nl&&n!==Cd||s!==TT)||(O=yd,y-=(g&&U===k&&k.visualViewport?k.visualViewport.width:U[q])-i.width,y*=c?1:-1)}var Pe,ye=Object.assign({position:a},u&&l8),Ae=!0===p?function c8(r,e){var i=r.y,n=e.devicePixelRatio||1;return{x:nw(r.x*n)/n||0,y:nw(i*n)/n||0}}({x:y,y:_},rl(t)):{x:y,y:_};return y=Ae.x,_=Ae.y,Object.assign({},ye,c?((Pe={})[L]=R?"0":"",Pe[O]=D?"0":"",Pe.transform=(k.devicePixelRatio||1)<=1?"translate("+y+"px, "+_+"px)":"translate3d("+y+"px, "+_+"px, 0)",Pe):((e={})[L]=R?_+"px":"",e[O]=D?y+"px":"",e.transform="",e))}const u8={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function d8(r){var e=r.state,t=r.options,i=t.gpuAcceleration,n=void 0===i||i,s=t.adaptive,o=void 0===s||s,a=t.roundOffsets,c=void 0===a||a,u={placement:Yu(e.placement),variation:rw(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:n,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,$H(Object.assign({},u,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:o,roundOffsets:c})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,$H(Object.assign({},u,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:c})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var f8=[r8,a8,u8,{name:"applyStyles",enabled:!0,phase:"write",fn:function h8(r){var e=r.state;Object.keys(e.elements).forEach(function(t){var i=e.styles[t]||{},n=e.attributes[t]||{},s=e.elements[t];!uc(s)||!qu(s)||(Object.assign(s.style,i),Object.keys(n).forEach(function(o){var a=n[o];!1===a?s.removeAttribute(o):s.setAttribute(o,!0===a?"":a)}))})},effect:function p8(r){var e=r.state,t={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,t.popper),e.styles=t,e.elements.arrow&&Object.assign(e.elements.arrow.style,t.arrow),function(){Object.keys(e.elements).forEach(function(i){var n=e.elements[i],s=e.attributes[i]||{},a=Object.keys(e.styles.hasOwnProperty(i)?e.styles[i]:t[i]).reduce(function(c,u){return c[u]="",c},{});!uc(n)||!qu(n)||(Object.assign(n.style,a),Object.keys(s).forEach(function(c){n.removeAttribute(c)}))})}},requires:["computeStyles"]}],g8=n8({defaultModifiers:f8});const C8={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function v8(r){var e=r.state,i=r.name,n=r.options.offset,s=void 0===n?[0,0]:n,o=FH.reduce(function(p,g){return p[g]=function m8(r,e,t){var i=Yu(r),n=[sl,nl].indexOf(i)>=0?-1:1,s="function"==typeof t?t(Object.assign({},e,{placement:r})):t,o=s[0],a=s[1];return o=o||0,a=(a||0)*n,[sl,yd].indexOf(i)>=0?{x:a,y:o}:{x:o,y:a}}(g,e.rects,s),p},{}),a=o[e.placement],u=a.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=a.x,e.modifiersData.popperOffsets.y+=u),e.modifiersData[i]=o}},T8=["*"],j8=["dialog"];function FL(r){return"string"==typeof r}function Cy(r){return null!=r}function ow(r){return(r||document.body).getBoundingClientRect()}const YH={animation:!0,transitionTimerDelayMs:5},G6=()=>{},{transitionTimerDelayMs:V6}=YH,xT=new Map,xo=(r,e,t,i)=>{let n=i.context||{};const s=xT.get(e);if(s)switch(i.runningTransition){case"continue":return BK.E;case"stop":r.run(()=>s.transition$.complete()),n=Object.assign(s.context,n),xT.delete(e)}const o=t(e,i.animation,n)||G6;if(!i.animation||"none"===window.getComputedStyle(e).transitionProperty)return r.run(()=>o()),(0,sx.of)(void 0).pipe(function L6(r){return e=>new Gi.y(t=>e.subscribe({next:o=>r.run(()=>t.next(o)),error:o=>r.run(()=>t.error(o)),complete:()=>r.run(()=>t.complete())}))}(r));const a=new ma.xQ,c=new ma.xQ,u=a.pipe(function n5(...r){return e=>function yL(...r){return function i5(){return(0,t5.J)(1)}()((0,sx.of)(...r))}(e,(0,sx.of)(...r))}(!0));xT.set(e,{transition$:a,complete:()=>{c.next(),c.complete()},context:n});const p=function k6(r){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(r);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return r.runOutsideAngular(()=>{const g=va(e,"transitionend").pipe($s(u),(0,tw.h)(({target:y})=>y===e)),m=function DH(r=0,e,t){let i=-1;return EH(e)?i=Number(e)<1?1:Number(e):(0,vL.K)(e)&&(t=e),(0,vL.K)(t)||(t=zK.P),new Gi.y(n=>{const s=EH(r)?r:+r-t.now();return t.schedule($K,s,{index:0,period:i,subscriber:n})})}(p+V6).pipe($s(u));(0,TH.S3)(m,g,c).pipe($s(u)).subscribe(()=>{xT.delete(e),r.run(()=>{o(),a.next(),a.complete()})})}),a.asObservable()};let hx=(()=>{class r{constructor(){this.animation=YH.animation}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),e2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[[Oe.ez]]}),r})(),t2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[[Oe.ez]]}),r})(),s2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({}),r})(),a2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[[Oe.ez]]}),r})(),l2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({}),r})();var Ks=(()=>(function(r){r[r.Tab=9]="Tab",r[r.Enter=13]="Enter",r[r.Escape=27]="Escape",r[r.Space=32]="Space",r[r.PageUp=33]="PageUp",r[r.PageDown=34]="PageDown",r[r.End=35]="End",r[r.Home=36]="Home",r[r.ArrowLeft=37]="ArrowLeft",r[r.ArrowUp=38]="ArrowUp",r[r.ArrowRight=39]="ArrowRight",r[r.ArrowDown=40]="ArrowDown"}(Ks||(Ks={})),Ks))();const fx=(r,e)=>!!e&&e.some(t=>t.contains(r)),c2=(r,e)=>!e||null!=function N6(r,e){return!e||typeof r.closest>"u"?null:r.closest(e)}(r,e),s4=typeof navigator<"u"&&!!navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const d2=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function u2(r){const e=Array.from(r.querySelectorAll(d2)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}const l4=/\s+/,c4=/  +/gi,d4=/^start/,u4=/^end/,h4=/-(top|left)$/,p4=/-(bottom|right)$/,g4=/^left/,m4=/^right/,v4=/^start/,C4=/^end/;function h2({placement:r,baseClass:e}){let t=Array.isArray(r)?r:r.split(l4),n=t.findIndex(c=>"auto"===c);n>=0&&["top","bottom","start","end","top-start","top-end","bottom-start","bottom-end","start-top","start-bottom","end-top","end-bottom"].forEach(function(c){null==t.find(u=>-1!==u.search("^"+c))&&t.splice(n++,1,c)});const s=t.map(c=>function f4(r){return r.replace(d4,"left").replace(u4,"right").replace(h4,"-start").replace(p4,"-end")}(c));return{placement:s.shift(),modifiers:[{name:"bootstrapClasses",enabled:!!e,phase:"write",fn({state:c}){const u=new RegExp(e+"(-[a-z]+)*","gi"),p=c.elements.popper,g=c.placement;let m=p.className;m=m.replace(u,""),m+=` ${function y4(r,e){let[t,i]=e.split("-");const n=t.replace(g4,"start").replace(m4,"end");let s=[n];if(i){let o=i;("left"===t||"right"===t)&&(o=o.replace(v4,"top").replace(C4,"bottom")),s.push(`${n}-${o}`)}return r&&(s=s.map(o=>`${r}-${o}`)),s.join(" ")}(e,g)}`,m=m.trim().replace(c4," "),p.className=m}},B5,j5,Y5,{enabled:!0,name:"flip",options:{fallbackPlacements:s}},{enabled:!0,name:"preventOverflow",phase:"main",fn:function(){}}]}}function p2(r){return r}function b4(r){return e=>(e.modifiers.push(C8,{name:"offset",options:{offset:()=>r}}),e)}new Date(1882,10,12),new Date(2174,10,25);let y2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[[Oe.ez,jw]]}),r})(),M4=(()=>{class r{constructor(){this.autoClose=!0,this.placement=["bottom-start","bottom-end","top-start","top-end"]}}return r.\u0275fac=function(t){return new(t||r)},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),S2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275dir=C.lG2({type:r,selectors:[["",8,"navbar"]]}),r})(),b2=(()=>{class r{constructor(t,i){this.elementRef=t,this._renderer=i,this._disabled=!1}set disabled(t){this._disabled=""===t||!0===t,this._renderer.setProperty(this.elementRef.nativeElement,"disabled",this._disabled)}get disabled(){return this._disabled}}return r.\u0275fac=function(t){return new(t||r)(C.Y36(C.SBq),C.Y36(C.Qsj))},r.\u0275dir=C.lG2({type:r,selectors:[["","ngbDropdownItem",""]],hostAttrs:[1,"dropdown-item"],hostVars:3,hostBindings:function(t,i){2&t&&(C.Ikx("tabIndex",i.disabled?-1:0),C.ekj("disabled",i.disabled))},inputs:{disabled:"disabled"}}),r})(),UL=(()=>{class r{constructor(t,i){this.dropdown=t,this.placement="bottom",this.isOpen=!1,this.nativeElement=i.nativeElement}}return r.\u0275fac=function(t){return new(t||r)(C.Y36((0,C.Gpc)(()=>NT)),C.Y36(C.SBq))},r.\u0275dir=C.lG2({type:r,selectors:[["","ngbDropdownMenu",""]],contentQueries:function(t,i,n){if(1&t&&C.Suo(n,b2,4),2&t){let s;C.iGM(s=C.CRH())&&(i.menuItems=s)}},hostVars:4,hostBindings:function(t,i){1&t&&C.NdJ("keydown.ArrowUp",function(s){return i.dropdown.onKeyDown(s)})("keydown.ArrowDown",function(s){return i.dropdown.onKeyDown(s)})("keydown.Home",function(s){return i.dropdown.onKeyDown(s)})("keydown.End",function(s){return i.dropdown.onKeyDown(s)})("keydown.Enter",function(s){return i.dropdown.onKeyDown(s)})("keydown.Space",function(s){return i.dropdown.onKeyDown(s)})("keydown.Tab",function(s){return i.dropdown.onKeyDown(s)})("keydown.Shift.Tab",function(s){return i.dropdown.onKeyDown(s)}),2&t&&C.ekj("dropdown-menu",!0)("show",i.dropdown.isOpen())}}),r})(),Cx=(()=>{class r{constructor(t,i){this.dropdown=t,this.nativeElement=i.nativeElement}}return r.\u0275fac=function(t){return new(t||r)(C.Y36((0,C.Gpc)(()=>NT)),C.Y36(C.SBq))},r.\u0275dir=C.lG2({type:r,selectors:[["","ngbDropdownAnchor",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,i){2&t&&C.uIk("aria-expanded",i.dropdown.isOpen())}}),r})(),_2=(()=>{class r extends Cx{constructor(t,i){super(t,i)}}return r.\u0275fac=function(t){return new(t||r)(C.Y36((0,C.Gpc)(()=>NT)),C.Y36(C.SBq))},r.\u0275dir=C.lG2({type:r,selectors:[["","ngbDropdownToggle",""]],hostAttrs:[1,"dropdown-toggle"],hostVars:1,hostBindings:function(t,i){1&t&&C.NdJ("click",function(){return i.dropdown.toggle()})("keydown.ArrowUp",function(s){return i.dropdown.onKeyDown(s)})("keydown.ArrowDown",function(s){return i.dropdown.onKeyDown(s)})("keydown.Home",function(s){return i.dropdown.onKeyDown(s)})("keydown.End",function(s){return i.dropdown.onKeyDown(s)})("keydown.Tab",function(s){return i.dropdown.onKeyDown(s)})("keydown.Shift.Tab",function(s){return i.dropdown.onKeyDown(s)}),2&t&&C.uIk("aria-expanded",i.dropdown.isOpen())},features:[C._Bn([{provide:Cx,useExisting:(0,C.Gpc)(()=>r)}]),C.qOj]}),r})(),NT=(()=>{class r{constructor(t,i,n,s,o,a,c){this._changeDetector=t,this._document=n,this._ngZone=s,this._elementRef=o,this._renderer=a,this._destroyCloseHandlers$=new ma.xQ,this._bodyContainer=null,this._positioning=function S4(){let r=null;return{createPopper(e){if(!r){let i=(e.updatePopperOptions||p2)(h2(e));r=g8(e.hostElement,e.targetElement,i)}},update(){r&&r.update()},setOptions(e){if(r){let i=(e.updatePopperOptions||p2)(h2(e));r.setOptions(i)}},destroy(){r&&(r.destroy(),r=null)}}}(),this._open=!1,this.openChange=new C.vpe,this.placement=i.placement,this.container=i.container,this.autoClose=i.autoClose,this.display=c?"static":"dynamic"}ngAfterContentInit(){this._ngZone.onStable.pipe((0,Ku.q)(1)).subscribe(()=>{this._applyPlacementClasses(),this._open&&this._setCloseHandlers()})}ngOnChanges(t){if(t.container&&this._open&&this._applyContainer(this.container),t.placement&&!t.placement.firstChange&&(this._positioning.setOptions({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container}),this._applyPlacementClasses()),t.dropdownClass){const{currentValue:i,previousValue:n}=t.dropdownClass;this._applyCustomDropdownClass(i,n)}t.autoClose&&this._open&&(this.autoClose=t.autoClose.currentValue,this._setCloseHandlers())}isOpen(){return this._open}open(){this._open||(this._open=!0,this._applyContainer(this.container),this.openChange.emit(!0),this._setCloseHandlers(),this._anchor&&(this._anchor.nativeElement.focus(),"dynamic"===this.display&&this._ngZone.runOutsideAngular(()=>{this._positioning.createPopper({hostElement:this._anchor.nativeElement,targetElement:this._bodyContainer||this._menu.nativeElement,placement:this.placement,appendToBody:"body"===this.container,updatePopperOptions:b4([0,2])}),this._applyPlacementClasses(),this._zoneSubscription=this._ngZone.onStable.subscribe(()=>this._positionMenu())})))}_setCloseHandlers(){this._destroyCloseHandlers$.next(),function o4(r,e,t,i,n,s,o,a){t&&r.runOutsideAngular((r=>s4?()=>setTimeout(()=>r(),100):r)(()=>{const u=va(e,"keydown").pipe($s(n),(0,tw.h)(m=>m.which===Ks.Escape),(0,MH.b)(m=>m.preventDefault())),p=va(e,"mousedown").pipe((0,As.U)(m=>{const y=m.target;return 2!==m.button&&!fx(y,o)&&("inside"===t?fx(y,s)&&c2(y,a):"outside"===t?!fx(y,s):c2(y,a)||!fx(y,s))}),$s(n)),g=va(e,"mouseup").pipe(_L(p),(0,tw.h)(([m,y])=>y),(0,h5.g)(0),$s(n));(0,TH.S3)([u.pipe((0,As.U)(m=>0)),g.pipe((0,As.U)(m=>1))]).subscribe(m=>r.run(()=>i(m)))}))}(this._ngZone,this._document,this.autoClose,t=>{this.close(),0===t&&this._anchor.nativeElement.focus()},this._destroyCloseHandlers$,this._menu?[this._menu.nativeElement]:[],this._anchor?[this._anchor.nativeElement]:[],".dropdown-item,.dropdown-divider")}close(){this._open&&(this._open=!1,this._resetContainer(),this._positioning.destroy(),this._zoneSubscription?.unsubscribe(),this._destroyCloseHandlers$.next(),this.openChange.emit(!1),this._changeDetector.markForCheck())}toggle(){this.isOpen()?this.close():this.open()}ngOnDestroy(){this.close()}onKeyDown(t){const i=t.which,n=this._getMenuElements();let s=-1,o=null;const a=this._isEventFromToggle(t);if(!a&&n.length&&n.forEach((c,u)=>{c.contains(t.target)&&(o=c),c===this._document.activeElement&&(s=u)}),i!==Ks.Space&&i!==Ks.Enter){if(i!==Ks.Tab){if(a||o){if(this.open(),n.length){switch(i){case Ks.ArrowDown:s=Math.min(s+1,n.length-1);break;case Ks.ArrowUp:if(this._isDropup()&&-1===s){s=n.length-1;break}s=Math.max(s-1,0);break;case Ks.Home:s=0;break;case Ks.End:s=n.length-1}n[s].focus()}t.preventDefault()}}else if(t.target&&this.isOpen()&&this.autoClose){if(this._anchor.nativeElement===t.target)return void("body"!==this.container||t.shiftKey?t.shiftKey&&this.close():(this._renderer.setAttribute(this._menu.nativeElement,"tabindex","0"),this._menu.nativeElement.focus(),this._renderer.removeAttribute(this._menu.nativeElement,"tabindex")));if("body"===this.container){const c=this._menu.nativeElement.querySelectorAll(d2);t.shiftKey&&t.target===c[0]?(this._anchor.nativeElement.focus(),t.preventDefault()):!t.shiftKey&&t.target===c[c.length-1]&&(this._anchor.nativeElement.focus(),this.close())}else va(t.target,"focusout").pipe((0,Ku.q)(1)).subscribe(({relatedTarget:c})=>{this._elementRef.nativeElement.contains(c)||this.close()})}}else o&&(!0===this.autoClose||"inside"===this.autoClose)&&va(o,"click").pipe((0,Ku.q)(1)).subscribe(()=>this.close())}_isDropup(){return this._elementRef.nativeElement.classList.contains("dropup")}_isEventFromToggle(t){return this._anchor.nativeElement.contains(t.target)}_getMenuElements(){const t=this._menu;return null==t?[]:t.menuItems.filter(i=>!i.disabled).map(i=>i.elementRef.nativeElement)}_positionMenu(){const t=this._menu;this.isOpen()&&t&&("dynamic"===this.display?(this._positioning.update(),this._applyPlacementClasses()):this._applyPlacementClasses(this._getFirstPlacement(this.placement)))}_getFirstPlacement(t){return Array.isArray(t)?t[0]:t.split(" ")[0]}_resetContainer(){const t=this._renderer;this._menu&&t.appendChild(this._elementRef.nativeElement,this._menu.nativeElement),this._bodyContainer&&(t.removeChild(this._document.body,this._bodyContainer),this._bodyContainer=null)}_applyContainer(t=null){if(this._resetContainer(),"body"===t){const i=this._renderer,n=this._menu.nativeElement,s=this._bodyContainer=this._bodyContainer||i.createElement("div");i.setStyle(s,"position","absolute"),i.setStyle(n,"position","static"),i.setStyle(s,"z-index","1055"),i.appendChild(s,n),i.appendChild(this._document.body,s)}this._applyCustomDropdownClass(this.dropdownClass)}_applyCustomDropdownClass(t,i){const n="body"===this.container?this._bodyContainer:this._elementRef.nativeElement;n&&(i&&this._renderer.removeClass(n,i),t&&this._renderer.addClass(n,t))}_applyPlacementClasses(t){const i=this._menu;if(i){t||(t=this._getFirstPlacement(this.placement));const n=this._renderer,s=this._elementRef.nativeElement;n.removeClass(s,"dropup"),n.removeClass(s,"dropdown");const{nativeElement:o}=i;"static"===this.display?(i.placement=null,n.setAttribute(o,"data-bs-popper","static")):(i.placement=t,n.removeAttribute(o,"data-bs-popper"));const a=-1!==t.search("^top")?"dropup":"dropdown";n.addClass(s,a);const c=this._bodyContainer;c&&(n.removeClass(c,"dropup"),n.removeClass(c,"dropdown"),n.addClass(c,a))}}}return r.\u0275fac=function(t){return new(t||r)(C.Y36(C.sBO),C.Y36(M4),C.Y36(Oe.K0),C.Y36(C.R0b),C.Y36(C.SBq),C.Y36(C.Qsj),C.Y36(S2,8))},r.\u0275dir=C.lG2({type:r,selectors:[["","ngbDropdown",""]],contentQueries:function(t,i,n){if(1&t&&(C.Suo(n,UL,5),C.Suo(n,Cx,5)),2&t){let s;C.iGM(s=C.CRH())&&(i._menu=s.first),C.iGM(s=C.CRH())&&(i._anchor=s.first)}},hostVars:2,hostBindings:function(t,i){2&t&&C.ekj("show",i.isOpen())},inputs:{autoClose:"autoClose",dropdownClass:"dropdownClass",_open:["open","_open"],placement:"placement",container:"container",display:"display"},outputs:{openChange:"openChange"},exportAs:["ngbDropdown"],features:[C.TTD]}),r})(),w2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({}),r})();class _y{constructor(e,t,i){this.nodes=e,this.viewRef=t,this.componentRef=i}}let x4=(()=>{class r{constructor(t,i){this._el=t,this._zone=i}ngOnInit(){this._zone.onStable.asObservable().pipe((0,Ku.q)(1)).subscribe(()=>{xo(this._zone,this._el.nativeElement,(t,i)=>{i&&ow(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return xo(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return r.\u0275fac=function(t){return new(t||r)(C.Y36(C.SBq),C.Y36(C.R0b))},r.\u0275cmp=C.Xpm({type:r,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,i){2&t&&(C.Tol("modal-backdrop"+(i.backdropClass?" "+i.backdropClass:"")),C.ekj("show",!i.animation)("fade",i.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},decls:0,vars:0,template:function(t,i){},encapsulation:2}),r})();class E2{close(e){}dismiss(e){}}class P4{constructor(e,t,i,n){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=i,this._beforeDismiss=n,this._closed=new ma.xQ,this._dismissed=new ma.xQ,this._hidden=new ma.xQ,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,o)=>{this._resolve=s,this._reject=o}),this.result.then(null,()=>{})}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe($s(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe($s(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function KH(r){return r&&r.then}(t)?!1!==t&&this._dismiss(e):t.then(i=>{!1!==i&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():(0,sx.of)(void 0);e.subscribe(()=>{const{nativeElement:i}=this._windowCmptRef.location;i.parentNode.removeChild(i),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:i}=this._backdropCmptRef.location;i.parentNode.removeChild(i),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),ox(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var LT=(()=>(function(r){r[r.BACKDROP_CLICK=0]="BACKDROP_CLICK",r[r.ESC=1]="ESC"}(LT||(LT={})),LT))();let I4=(()=>{class r{constructor(t,i,n){this._document=t,this._elRef=i,this._zone=n,this._closed$=new ma.xQ,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new C.vpe,this.shown=new ma.xQ,this.hidden=new ma.xQ}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":FL(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe((0,Ku.q)(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,i={animation:this.animation,runningTransition:"stop"},o=ox(xo(this._zone,t,()=>t.classList.remove("show"),i),xo(this._zone,this._dialogEl.nativeElement,()=>{},i));return o.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),o}_show(){const t={animation:this.animation,runningTransition:"continue"};ox(xo(this._zone,this._elRef.nativeElement,(s,o)=>{o&&ow(s),s.classList.add("show")},t),xo(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{va(t,"keydown").pipe($s(this._closed$),(0,tw.h)(n=>n.which===Ks.Escape)).subscribe(n=>{this.keyboard?requestAnimationFrame(()=>{n.defaultPrevented||this._zone.run(()=>this.dismiss(LT.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let i=!1;va(this._dialogEl.nativeElement,"mousedown").pipe($s(this._closed$),(0,MH.b)(()=>i=!1),(0,OH.w)(()=>va(t,"mouseup").pipe($s(this._closed$),(0,Ku.q)(1))),(0,tw.h)(({target:n})=>t===n)).subscribe(()=>{i=!0}),va(t,"click").pipe($s(this._closed$)).subscribe(({target:n})=>{t===n&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!i&&this._zone.run(()=>this.dismiss(LT.BACKDROP_CLICK))),i=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const i=t.querySelector("[ngbAutofocus]"),n=u2(t)[0];(i||n||t).focus()}}_restoreFocus(){const t=this._document.body,i=this._elWithFocus;let n;n=i&&i.focus&&t.contains(i)?i:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>n.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&xo(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return r.\u0275fac=function(t){return new(t||r)(C.Y36(Oe.K0),C.Y36(C.SBq),C.Y36(C.R0b))},r.\u0275cmp=C.Xpm({type:r,selectors:[["ngb-modal-window"]],viewQuery:function(t,i){if(1&t&&C.Gf(j8,7),2&t){let n;C.iGM(n=C.CRH())&&(i._dialogEl=n.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,i){2&t&&(C.uIk("aria-modal",!0)("aria-labelledby",i.ariaLabelledBy)("aria-describedby",i.ariaDescribedBy),C.Tol("modal d-block"+(i.windowClass?" "+i.windowClass:"")),C.ekj("fade",i.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},ngContentSelectors:T8,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,i){1&t&&(C.F$t(),C.TgZ(0,"div",0,1)(2,"div",2),C.Hsn(3),C.qZA()()),2&t&&C.Tol("modal-dialog"+(i.size?" modal-"+i.size:"")+(i.centered?" modal-dialog-centered":"")+i.fullscreenClass+(i.scrollable?" modal-dialog-scrollable":"")+(i.modalDialogClass?" "+i.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),r})(),F4=(()=>{class r{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),i=this._document.body,n=i.style,{overflow:s,paddingRight:o}=n;if(t>0){const a=parseFloat(window.getComputedStyle(i).paddingRight);n.paddingRight=`${a+t}px`}return n.overflow="hidden",()=>{t>0&&(n.paddingRight=o),n.overflow=s}}}return r.\u0275fac=function(t){return new(t||r)(C.LFG(Oe.K0))},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),N4=(()=>{class r{constructor(t,i,n,s,o,a){this._applicationRef=t,this._injector=i,this._document=n,this._scrollBar=s,this._rendererFactory=o,this._ngZone=a,this._activeWindowCmptHasChanged=new ma.xQ,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._backdropAttributes=["animation","backdropClass"],this._modalRefs=[],this._windowAttributes=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],this._windowCmpts=[],this._activeInstances=new C.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const c=this._windowCmpts[this._windowCmpts.length-1];((r,e,t,i=!1)=>{this._ngZone.runOutsideAngular(()=>{const n=va(e,"focusin").pipe($s(t),(0,As.U)(s=>s.target));va(e,"keydown").pipe($s(t),(0,tw.h)(s=>s.which===Ks.Tab),_L(n)).subscribe(([s,o])=>{const[a,c]=u2(e);(o===a||o===e)&&s.shiftKey&&(c.focus(),s.preventDefault()),o===c&&!s.shiftKey&&(a.focus(),s.preventDefault())}),i&&va(e,"click").pipe($s(t),_L(n),(0,As.U)(s=>s[1])).subscribe(s=>s.focus())})})(0,c.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(c.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,i,n,s){const o=s.container instanceof HTMLElement?s.container:Cy(s.container)?this._document.querySelector(s.container):this._document.body,a=this._rendererFactory.createRenderer(null,null);if(!o)throw new Error(`The specified modal container "${s.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const c=new E2,u=this._getContentRef(t,s.injector||i,n,c,s);let p=!1!==s.backdrop?this._attachBackdrop(t,o):void 0,g=this._attachWindowComponent(t,o,u),m=new P4(g,u,p,s.beforeDismiss);return this._registerModalRef(m),this._registerWindowCmpt(g),m.hidden.pipe((0,Ku.q)(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(a.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),c.close=y=>{m.close(y)},c.dismiss=y=>{m.dismiss(y)},this._applyWindowOptions(g.instance,s),1===this._modalRefs.length&&a.addClass(this._document.body,"modal-open"),p&&p.instance&&(this._applyBackdropOptions(p.instance,s),p.changeDetectorRef.detectChanges()),g.changeDetectorRef.detectChanges(),m}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(i=>i.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t,i){let s=t.resolveComponentFactory(x4).create(this._injector);return this._applicationRef.attachView(s.hostView),i.appendChild(s.location.nativeElement),s}_attachWindowComponent(t,i,n){let o=t.resolveComponentFactory(I4).create(this._injector,n.nodes);return this._applicationRef.attachView(o.hostView),i.appendChild(o.location.nativeElement),o}_applyWindowOptions(t,i){this._windowAttributes.forEach(n=>{Cy(i[n])&&(t[n]=i[n])})}_applyBackdropOptions(t,i){this._backdropAttributes.forEach(n=>{Cy(i[n])&&(t[n]=i[n])})}_getContentRef(t,i,n,s,o){return n?n instanceof C.Rgc?this._createFromTemplateRef(n,s):FL(n)?this._createFromString(n):this._createFromComponent(t,i,n,s,o):new _y([])}_createFromTemplateRef(t,i){const s=t.createEmbeddedView({$implicit:i,close(o){i.close(o)},dismiss(o){i.dismiss(o)}});return this._applicationRef.attachView(s),new _y([s.rootNodes],s)}_createFromString(t){const i=this._document.createTextNode(`${t}`);return new _y([[i]])}_createFromComponent(t,i,n,s,o){const a=t.resolveComponentFactory(n),c=C.zs3.create({providers:[{provide:E2,useValue:s}],parent:i}),u=a.create(c),p=u.location.nativeElement;return o.scrollable&&p.classList.add("component-host-scrollable"),this._applicationRef.attachView(u.hostView),new _y([[p]],u.hostView,u)}_setAriaHidden(t){const i=t.parentElement;i&&t!==this._document.body&&(Array.from(i.children).forEach(n=>{n!==t&&"SCRIPT"!==n.nodeName&&(this._ariaHiddenValues.set(n,n.getAttribute("aria-hidden")),n.setAttribute("aria-hidden","true"))}),this._setAriaHidden(i))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,i)=>{t?i.setAttribute("aria-hidden",t):i.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const i=()=>{const n=this._modalRefs.indexOf(t);n>-1&&(this._modalRefs.splice(n,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(i,i)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const i=this._windowCmpts.indexOf(t);i>-1&&(this._windowCmpts.splice(i,1),this._activeWindowCmptHasChanged.next())})}}return r.\u0275fac=function(t){return new(t||r)(C.LFG(C.z2F),C.LFG(C.zs3),C.LFG(Oe.K0),C.LFG(F4),C.LFG(C.FYo),C.LFG(C.R0b))},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),L4=(()=>{class r{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return r.\u0275fac=function(t){return new(t||r)(C.LFG(hx))},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),k4=(()=>{class r{constructor(t,i,n,s){this._moduleCFR=t,this._injector=i,this._modalStack=n,this._config=s}open(t,i={}){const n={...this._config,animation:this._config.animation,...i};return this._modalStack.open(this._moduleCFR,this._injector,t,n)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return r.\u0275fac=function(t){return new(t||r)(C.LFG(C._Vd),C.LFG(C.zs3),C.LFG(N4),C.LFG(L4))},r.\u0275prov=C.Yz7({token:r,factory:r.\u0275fac,providedIn:"root"}),r})(),D2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({providers:[k4]}),r})(),O2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[[Oe.ez]]}),r})(),k2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[[Oe.ez]]}),r})(),V2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[[Oe.ez]]}),r})(),B2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[[Oe.ez]]}),r})(),H2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[[Oe.ez]]}),r})(),U2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[[Oe.ez]]}),r})(),W2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[[Oe.ez]]}),r})(),j2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({}),r})();new C.OlP("live announcer delay",{providedIn:"root",factory:function X4(){return 100}});let z2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[[Oe.ez]]}),r})(),$2=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({}),r})();const Z4=[e2,t2,s2,a2,l2,y2,w2,D2,O2,$2,k2,V2,B2,H2,U2,W2,j2,z2];let J4=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r}),r.\u0275inj=C.cJS({imports:[Z4,e2,t2,s2,a2,l2,y2,w2,D2,O2,$2,k2,V2,B2,H2,U2,W2,j2,z2]}),r})();function Q4(r,e){if(1&r){const t=C.EpF();C.TgZ(0,"button",28),C.NdJ("click",function(){C.CHM(t);const n=C.oxw();return C.KtG(n.login())}),C._uU(1,"Login with Google"),C.qZA()}}function eY(r,e){if(1&r){const t=C.EpF();C.TgZ(0,"button",28),C.NdJ("click",function(){C.CHM(t);const n=C.oxw();return C.KtG(n.login())}),C._uU(1,"LogOut"),C.qZA()}}function tY(r,e){if(1&r){const t=C.EpF();C.TgZ(0,"button",28),C.NdJ("click",function(){C.CHM(t);const n=C.oxw();return C.KtG(n.fetchSheetData())}),C._uU(1,"Fetch Sheet Data"),C.qZA()}}function iY(r,e){if(1&r){const t=C.EpF();C.TgZ(0,"button",28),C.NdJ("click",function(){C.CHM(t);const n=C.oxw();return C.KtG(n.updateSheetData())}),C._uU(1,"Update Sheet Data"),C.qZA()}}function nY(r,e){if(1&r){const t=C.EpF();C.TgZ(0,"button",28),C.NdJ("click",function(){C.CHM(t);const n=C.oxw();return C.KtG(n.appendSheetData())}),C._uU(1,"Append Sheet Data"),C.qZA()}}function sY(r,e){if(1&r&&(C.TgZ(0,"th"),C._uU(1),C.qZA()),2&r){const t=e.$implicit;C.xp6(1),C.Oqu(t)}}function rY(r,e){if(1&r&&(C.TgZ(0,"td"),C._uU(1),C.qZA()),2&r){const t=e.$implicit;C.xp6(1),C.Oqu(t)}}function oY(r,e){if(1&r&&(C.TgZ(0,"tr"),C.YNc(1,rY,2,1,"td",40),C.qZA()),2&r){const t=e.$implicit;C.xp6(1),C.Q6J("ngForOf",t)}}function aY(r,e){if(1&r&&(C.TgZ(0,"div")(1,"h3"),C._uU(2,"Google Sheets Data:"),C.qZA(),C.TgZ(3,"table",39)(4,"thead")(5,"tr"),C.YNc(6,sY,2,1,"th",40),C.qZA()(),C.TgZ(7,"tbody"),C.YNc(8,oY,2,1,"tr",40),C.qZA()()()),2&r){const t=C.oxw();C.xp6(6),C.Q6J("ngForOf",t.sheetData[0]),C.xp6(2),C.Q6J("ngForOf",t.sheetData.slice(1))}}let lY=(()=>{class r{constructor(t,i){this.authService=t,this.sheetsService=i,this.modules=[tO,t_,e_,mI,CI,F1,OK,dO,GK,gH],this.isAuthenticated=!1,this.sheetData=[],this.newValues=[["New Value 1","New Value 2"],["New Value 3","New Value 4"]],this.appendedValues=[["Appended Value 1","Appended Value 2"]],this.options=[{label:"Option 1",value:!1},{label:"Option 2",value:!0},{label:"Option 3",value:!1}],this.columnControl={mobile:!1,kyc:!1,address:!1,middlename:!1,marriageStatus:!1,dob:!1,gautra:!1,country:!1},this.defaultColDef={filter:!0,floatingFilter:!0,headerComponent:"sortableHeaderComponent",headerComponentParams:{menuIcon:"fa-bars"},cellDataType:!1},this.components={sortableHeaderComponent:B1,agDateInput:V1,headerGroupComponent:G1,rendererComponent:SI},this.createRowData(),this.createColumnDefs(),this.reset()}reset(){}controlColumn(t){console.log(t," : ",this.columnControl[t]),this.api.setColumnsVisible([t.toString()],this.columnControl[t])}login(){this.authService.login()}logout(){this.authService.logout()}fetchSheetData(){this.sheetsService.getSheetData("Sheet1").subscribe(t=>{console.log("Fetched Data:",t),this.sheetData=t.values},t=>console.error("Error fetching sheet data:",t))}fetchSheetData1(){this.sheetsService.getSheetData1("Sheet1").subscribe(t=>{console.log("Fetched Data:",t),this.sheetData=t.values},t=>console.error("Error fetching sheet data:",t))}updateSheetData(){this.sheetsService.updateSheetData("Sheet1","A2:B3",this.newValues).subscribe(t=>console.log("Sheet updated successfully:",t),t=>console.error("Error updating sheet data:",t))}appendSheetData(){this.sheetsService.appendSheetData("Sheet1",this.appendedValues).subscribe(t=>console.log("Data appended successfully:",t),t=>console.error("Error appending sheet data:",t))}appendSheetData1(){this.sheetsService.appendData1("Sheet1",this.appendedValues).subscribe(t=>console.log("Data appended successfully:",t),t=>console.error("Error appending sheet data:",t))}createRowData(){const t=[];for(let i=0;i<200;i++){const n=yi.countries[i%yi.countries.length];t.push({name:yi.firstNames[i%yi.firstNames.length]+" "+yi.lastNames[i%yi.lastNames.length],firstname:yi.firstNames[i%yi.firstNames.length],middlename:yi.middleNames[i%yi.middleNames.length],lastname:yi.lastNames[i%yi.lastNames.length],marriageStatus:yi.marriageStatus[i%yi.marriageStatus.length],gautra:yi.gautras[i%yi.gautras.length],skills:{android:Math.random()<.4,html5:Math.random()<.4,mac:Math.random()<.4,windows:Math.random()<.4,css:Math.random()<.4},dob:yi.DOBs[i%yi.DOBs.length],address:yi.addresses[i%yi.addresses.length],years:Math.round(100*Math.random()),proficiency:Math.round(100*Math.random()),country:n.country,continent:n.continent,language:n.language,mobile:dY()})}this.rowData=t}createColumnDefs(){this.columnDefs=[{headerName:"#",width:40,checkboxSelection:!0,filter:!1,sortable:!1,suppressMenu:!0,pinned:!0},{headerName:"User",headerGroupComponent:"headerGroupComponent",children:[{field:"name",width:150,pinned:!0,enableRowGroup:!0,enablePivot:!1},{headerName:"Firstname",width:150,sortable:!0,suppressMenu:!0,pinned:!0,field:"firstname",columnGroupShow:"open",filter:"agTextColumnFilter"},{headerName:"Middlename",width:150,sortable:!0,suppressMenu:!0,pinned:!0,field:"middlename",columnGroupShow:"open",filter:"agTextColumnFilter"},{headerName:"Surname",width:150,sortable:!0,suppressMenu:!0,pinned:!0,field:"lastname",columnGroupShow:"open",filter:"agTextColumnFilter"},{field:"country",width:150,cellRenderer:K2,pinned:!0,filterParams:{cellRenderer:K2,cellHeight:20},enableRowGroup:!0,enablePivot:!0,columnGroupShow:"open"}]},{headerName:"Contact",children:[{field:"mobile",cellRenderer:SI,minWidth:150,sortable:!1,suppressMenu:!0,filter:"agTextColumnFilter"},{field:"address",minWidth:500,suppressMenu:!0,filter:"agTextColumnFilter"},{headerName:"KYC",field:"kyc",width:60,checkboxSelection:!0,filter:!1,sortable:!1,suppressMenu:!0,pinned:!1}]},{headerName:"Matrimonial Details",children:[{field:"marriageStatus",minWidth:150,sortable:!1,suppressMenu:!0,filter:"agTextColumnFilter"},{headerName:"DOB",field:"dob",width:150,pinned:!1,suppressMenu:!0,cellRenderer:t=>Y2(t.value.getDate()||0,2)+"/"+Y2(t.value.getMonth()||1,2)+"/"+t.value.getFullYear()||0,menuTabs:["filterMenuTab"]},{field:"gautra",minWidth:150,sortable:!1,suppressMenu:!0,filter:"agTextColumnFilter"}]},{headerName:"IT Skills",children:[{field:"skills",width:125,sortable:!1,cellRenderer:cY,menuTabs:["filterMenuTab"],filter:k1,enableRowGroup:!0,enablePivot:!0},{field:"proficiency",width:160,cellRenderer:uY,menuTabs:["filterMenuTab"],filter:N1}]}]}calculateRowCount(){if(this.api&&this.rowData){const t=this.api.getModel(),i=this.rowData.length,n=t.getRowCount();this.rowCount=n.toLocaleString()+" / "+i.toLocaleString()}}onModelUpdated(){console.log("onModelUpdated"),this.calculateRowCount()}onGridReady(t){console.log("onGridReady"),this.api=t.api,this.api.sizeColumnsToFit(),this.calculateRowCount(),this.api.resetColumnState()}onCellClicked(t){console.log("onCellClicked: "+t.rowIndex+" "+t.colDef.field)}onCellDoubleClicked(t){console.log("onCellDoubleClicked: "+t.rowIndex+" "+t.colDef.field)}onCellContextMenu(t){console.log("onCellContextMenu: "+t.rowIndex+" "+t.colDef.field)}onQuickFilterChanged(t){this.api.setQuickFilter(t.target.value)}invokeSkillsFilterMethod(){this.api.getFilterInstance("skills",t=>{t.helloFromSkillsFilter()})}dobFilter(){this.api.getFilterInstance("dob",t=>{t.setModel({type:"equals",dateFrom:"2000-01-01"}),this.api.onFilterChanged()})}toggleSidebar(t){this.sideBar=t.target.checked}exportExcel(){console.log("export to excel:")}generatePDF(t){}}return r.\u0275fac=function(t){return new(t||r)(C.Y36(_H),C.Y36(VK))},r.\u0275cmp=C.Xpm({type:r,selectors:[["rich-grid"]],decls:109,vars:25,consts:[[2,"width","100%","padding","20px"],[2,"width","800px"],[2,"display","inline-block","width","100%"],[2,"float","left"],[2,"margin","10px"],["ngbDropdown","",1,"dropdown"],["ngbDropdownToggle","","id","ColumnDropdown","role","button","data-bs-toggle","dropdown","aria-expanded","false",1,"dropdown-toggle","btn","btn-primary"],["icon-name","eye",1,"iconsax"],["ngbDropdownMenu","","aria-labelledby","ColumnDropdown",1,"dropdown-menu","CustomColumn_Dropdown"],[1,"role_per_checkbox"],["type","checkbox","id","custom_column_SelectAll"],["for","custom_column_SelectAll",1,"custom_column_SelectAll"],["type","checkbox","id","custom_column_country",3,"ngModel","ngModelChange","change"],["for","custom_column_country",1,""],["type","checkbox","id","custom_column_middlename",3,"ngModel","ngModelChange","change"],["for","custom_column_middlename",1,""],["type","checkbox","id","custom_column_mobile",3,"ngModel","ngModelChange","change"],["for","custom_column_mobile",1,""],["type","checkbox","id","custom_column_address",3,"ngModel","ngModelChange","change"],["for","custom_column_address",1,""],["type","checkbox","id","custom_column_kyc",3,"ngModel","ngModelChange","change"],["for","custom_column_kyc",1,""],["type","checkbox","id","custom_column_MarriageStatus",3,"ngModel","ngModelChange","change"],["for","custom_column_MarriageStatus",1,""],["type","checkbox","id","custom_column_dob",3,"ngModel","ngModelChange","change"],["for","custom_column_dob",1,""],["type","checkbox","id","custom_column_gautra",3,"ngModel","ngModelChange","change"],["for","custom_column_gautra",1,""],[1,"btn","btn-primary",3,"click"],["class","btn btn-primary",3,"click",4,"ngIf"],[2,"float","right"],[2,"display","inline-block","width","100%","margin-top","10px","margin-bottom","10px"],["for","sideBarToggle"],["type","checkbox","id","sideBarToggle",2,"margin-right","5px",3,"change"],[2,"float","right","margin-left","20px"],["for","quickFilter"],["type","text","id","quickFilter","placeholder","Type text to filter...",2,"margin-right","10px",3,"keyup"],[4,"ngIf"],[1,"ag-theme-alpine",2,"width","100%","padding-right","20px","height","650px",3,"columnDefs","sideBar","rowData","defaultColDef","components","modules","enableCharts","enableRangeSelection","suppressRowClickSelection","rowSelection","gridReady","modelUpdated","cellClicked","cellDoubleClicked","cellContextMenu"],["border","1"],[4,"ngFor","ngForOf"]],template:function(t,i){1&t&&(C.TgZ(0,"div",0)(1,"h1"),C._uU(2,"Rich Grid Example"),C.qZA(),C.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"b"),C._uU(7,"Employees Skills and Contact Details: "),C.qZA(),C._uU(8),C.qZA()(),C.TgZ(9,"div",4)(10,"div",5)(11,"a",6),C._UZ(12,"i",7),C._uU(13,"Columns "),C.qZA(),C.TgZ(14,"div",8)(15,"h6"),C._uU(16,"Select Column"),C.qZA(),C.TgZ(17,"ul")(18,"li")(19,"div",9),C._UZ(20,"input",10),C.TgZ(21,"label",11),C._uU(22,"Select All"),C.qZA()()(),C.TgZ(23,"li")(24,"div",9)(25,"input",12),C.NdJ("ngModelChange",function(s){return i.columnControl.country=s})("change",function(){return i.controlColumn("country")}),C.qZA(),C.TgZ(26,"label",13),C._uU(27,"Country"),C.qZA()()(),C.TgZ(28,"li")(29,"div",9)(30,"input",14),C.NdJ("ngModelChange",function(s){return i.columnControl.middlename=s})("change",function(){return i.controlColumn("middlename")}),C.qZA(),C.TgZ(31,"label",15),C._uU(32,"MiddleName"),C.qZA()()(),C.TgZ(33,"li")(34,"div",9)(35,"input",16),C.NdJ("ngModelChange",function(s){return i.columnControl.mobile=s})("change",function(){return i.controlColumn("mobile")}),C.qZA(),C.TgZ(36,"label",17),C._uU(37,"Mobile"),C.qZA()()(),C.TgZ(38,"li")(39,"div",9)(40,"input",18),C.NdJ("ngModelChange",function(s){return i.columnControl.address=s})("change",function(){return i.controlColumn("address")}),C.qZA(),C.TgZ(41,"label",19),C._uU(42,"Address"),C.qZA()()(),C.TgZ(43,"li")(44,"div",9)(45,"input",20),C.NdJ("ngModelChange",function(s){return i.columnControl.kyc=s})("change",function(){return i.controlColumn("kyc")}),C.qZA(),C.TgZ(46,"label",21),C._uU(47,"KYC"),C.qZA()()(),C.TgZ(48,"li")(49,"div",9)(50,"input",22),C.NdJ("ngModelChange",function(s){return i.columnControl.marriageStatus=s})("change",function(){return i.controlColumn("marriageStatus")}),C.qZA(),C.TgZ(51,"label",23),C._uU(52,"Marriage Status"),C.qZA()()(),C.TgZ(53,"li")(54,"div",9)(55,"input",24),C.NdJ("ngModelChange",function(s){return i.columnControl.dob=s})("change",function(){return i.controlColumn("dob")}),C.qZA(),C.TgZ(56,"label",25),C._uU(57,"Birth Date"),C.qZA()()(),C.TgZ(58,"li")(59,"div",9)(60,"input",26),C.NdJ("ngModelChange",function(s){return i.columnControl.gautra=s})("change",function(){return i.controlColumn("gautra")}),C.qZA(),C.TgZ(61,"label",27),C._uU(62,"Gautra"),C.qZA()()()()()(),C.TgZ(63,"div")(64,"span"),C._uU(65," Grid API: "),C.TgZ(66,"button",28),C.NdJ("click",function(){return i.api.selectAll()}),C._uU(67,"Select All"),C.qZA(),C.TgZ(68,"button",28),C.NdJ("click",function(){return i.api.deselectAll()}),C._uU(69,"Clear Selection"),C.qZA(),C.TgZ(70,"button",28),C.NdJ("click",function(){return i.exportExcel()}),C._uU(71,"Export"),C.qZA(),C.TgZ(72,"button",28),C.NdJ("click",function(){return i.fetchSheetData1()}),C._uU(73,"Fetch Data (No Auth)"),C.qZA(),C.TgZ(74,"button",28),C.NdJ("click",function(){return i.appendSheetData1()}),C._uU(75,"Fetch Data (No Auth)"),C.qZA()(),C.TgZ(76,"div"),C.YNc(77,Q4,2,0,"button",29),C.YNc(78,eY,2,0,"button",29),C.YNc(79,tY,2,0,"button",29),C.YNc(80,iY,2,0,"button",29),C.YNc(81,nY,2,0,"button",29),C.qZA(),C.TgZ(82,"span",30),C._uU(83," Column API: "),C.TgZ(84,"button",28),C.NdJ("click",function(){return i.api.setColumnsVisible(["country"],!1)}),C._uU(85,"Hide Country Column"),C.qZA(),C.TgZ(86,"button",28),C.NdJ("click",function(){return i.api.setColumnsVisible(["country"],!0)}),C._uU(87,"Show Country Column"),C.qZA()()()(),C.TgZ(88,"div",31)(89,"div",3)(90,"button",28),C.NdJ("click",function(){return i.createRowData()}),C._uU(91,"Refresh Data"),C.qZA()(),C.TgZ(92,"div",30),C._uU(93," Filter API: "),C.TgZ(94,"button",28),C.NdJ("click",function(){return i.invokeSkillsFilterMethod()}),C._uU(95,"Invoke Skills Filter Method "),C.qZA(),C.TgZ(96,"button",28),C.NdJ("click",function(){return i.dobFilter()}),C._uU(97,"DOB equals to 01/01/2000"),C.qZA()()(),C.TgZ(98,"div",31)(99,"div",3)(100,"label",32),C._uU(101,"Show Side Bar\xa0"),C.qZA(),C.TgZ(102,"input",33),C.NdJ("change",function(s){return i.toggleSidebar(s)}),C.qZA()(),C.TgZ(103,"div",34)(104,"label",35),C._uU(105,"Quick Filter:\xa0"),C.qZA(),C.TgZ(106,"input",36),C.NdJ("keyup",function(s){return i.onQuickFilterChanged(s)}),C.qZA()()()(),C.YNc(107,aY,9,2,"div",37),C.TgZ(108,"ag-grid-angular",38),C.NdJ("gridReady",function(s){return i.onGridReady(s)})("modelUpdated",function(){return i.onModelUpdated()})("cellClicked",function(s){return i.onCellClicked(s)})("cellDoubleClicked",function(s){return i.onCellDoubleClicked(s)})("cellContextMenu",function(s){return i.onCellContextMenu(s)}),C.qZA()()),2&t&&(C.xp6(8),C.hij("",i.rowCount," "),C.xp6(17),C.Q6J("ngModel",i.columnControl.country),C.xp6(5),C.Q6J("ngModel",i.columnControl.middlename),C.xp6(5),C.Q6J("ngModel",i.columnControl.mobile),C.xp6(5),C.Q6J("ngModel",i.columnControl.address),C.xp6(5),C.Q6J("ngModel",i.columnControl.kyc),C.xp6(5),C.Q6J("ngModel",i.columnControl.marriageStatus),C.xp6(5),C.Q6J("ngModel",i.columnControl.dob),C.xp6(5),C.Q6J("ngModel",i.columnControl.gautra),C.xp6(17),C.Q6J("ngIf",!i.authService.identityClaims),C.xp6(1),C.Q6J("ngIf",i.authService.identityClaims),C.xp6(1),C.Q6J("ngIf",i.authService.identityClaims),C.xp6(1),C.Q6J("ngIf",i.authService.identityClaims),C.xp6(1),C.Q6J("ngIf",i.authService.identityClaims),C.xp6(26),C.Q6J("ngIf",i.sheetData.length>0),C.xp6(1),C.Q6J("columnDefs",i.columnDefs)("sideBar",i.sideBar)("rowData",i.rowData)("defaultColDef",i.defaultColDef)("components",i.components)("modules",i.modules)("enableCharts",!0)("enableRangeSelection",!0)("suppressRowClickSelection",!0)("rowSelection","multiple"))},dependencies:[Oe.sg,Oe.O5,_a,xm,Jn,NT,_2,UL,L0],styles:[".btn-primary{margin-right:5px}.toolbar button{margin-left:5px;margin-right:5px;padding:2px}\n",".ag-cell{padding-top:2px!important;padding-bottom:2px!important}label{font-weight:400!important}.div-percent-bar{display:inline-block;height:100%;position:relative;z-index:0}.div-percent-value{position:absolute;padding-left:4px;font-weight:700;font-size:13px;z-index:10}.div-outer-div{display:inline-block;height:100%;width:100%}.ag-menu{z-index:50}\n"],encapsulation:2}),r})();function cY(r){const e=r.data,t=[];return yi.IT_SKILLS.forEach(function(i){e&&e.skills&&e.skills[i]&&t.push(`<img src="images/skills/${i}.png" width="16px" title="${i}" />`)}),t.join(" ")}function K2(r){return`<img border='0' width='15' height='10' style='margin-bottom: 2px' src='images/flags/${yi.COUNTRY_CODES[r.value]}.png'>${r.value}`}function dY(){let r="+";for(let e=0;e<12;e++)r+=Math.round(10*Math.random()),(2===e||5===e||8===e)&&(r+=" ");return r}function uY(r){const e=r.value,t=document.createElement("div");t.className="div-percent-bar",t.style.width=e+"%",t.style.backgroundColor=e<20?"red":e<60?"#ff9900":"#00A000";const i=document.createElement("div");i.className="div-percent-value",i.innerHTML=e+"%";const n=document.createElement("div");return n.className="div-outer-div",n.appendChild(i),n.appendChild(t),n}function Y2(r,e){let t=r+"";for(;t.length<e;)t="0"+t;return t}let hY=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275cmp=C.Xpm({type:r,selectors:[["my-app"]],decls:1,vars:0,template:function(t,i){1&t&&C._UZ(0,"rich-grid")},dependencies:[lY],encapsulation:2}),r})(),pY=(()=>{class r{}return r.\u0275fac=function(t){return new(t||r)},r.\u0275mod=C.oAB({type:r,bootstrap:[hY]}),r.\u0275inj=C.cJS({imports:[Nr,jw,ET.JF,J4,bH.zr.forRoot(),L0]}),r})();(0,C.G48)(),qt().bootstrapModule(pY)},1302:function(ne,ce,A){var F;!function($,Z){var se={};!function($){"use strict";$.__esModule=!0,$.digestLength=32,$.blockSize=64;var Z=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]);function se(Ce,fe,_e,he,Ke){for(var We,Oe,C,oi,ki,Ut,ut,_i,ai,je,Et,Ye,ct;Ke>=64;){for(We=fe[0],Oe=fe[1],C=fe[2],oi=fe[3],ki=fe[4],Ut=fe[5],ut=fe[6],_i=fe[7],je=0;je<16;je++)Ce[je]=(255&_e[Et=he+4*je])<<24|(255&_e[Et+1])<<16|(255&_e[Et+2])<<8|255&_e[Et+3];for(je=16;je<64;je++)Ce[je]=((Ye=((ai=Ce[je-2])>>>17|ai<<15)^(ai>>>19|ai<<13)^ai>>>10)+Ce[je-7]|0)+((ct=((ai=Ce[je-15])>>>7|ai<<25)^(ai>>>18|ai<<14)^ai>>>3)+Ce[je-16]|0);for(je=0;je<64;je++)Ye=(((ki>>>6|ki<<26)^(ki>>>11|ki<<21)^(ki>>>25|ki<<7))+(ki&Ut^~ki&ut)|0)+(_i+(Z[je]+Ce[je]|0)|0)|0,ct=((We>>>2|We<<30)^(We>>>13|We<<19)^(We>>>22|We<<10))+(We&Oe^We&C^Oe&C)|0,_i=ut,ut=Ut,Ut=ki,ki=oi+Ye|0,oi=C,C=Oe,Oe=We,We=Ye+ct|0;fe[0]+=We,fe[1]+=Oe,fe[2]+=C,fe[3]+=oi,fe[4]+=ki,fe[5]+=Ut,fe[6]+=ut,fe[7]+=_i,he+=64,Ke-=64}return he}var X=function(){function Ce(){this.digestLength=$.digestLength,this.blockSize=$.blockSize,this.state=new Int32Array(8),this.temp=new Int32Array(64),this.buffer=new Uint8Array(128),this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this.reset()}return Ce.prototype.reset=function(){return this.state[0]=1779033703,this.state[1]=3144134277,this.state[2]=1013904242,this.state[3]=2773480762,this.state[4]=1359893119,this.state[5]=2600822924,this.state[6]=528734635,this.state[7]=1541459225,this.bufferLength=0,this.bytesHashed=0,this.finished=!1,this},Ce.prototype.clean=function(){for(var fe=0;fe<this.buffer.length;fe++)this.buffer[fe]=0;for(fe=0;fe<this.temp.length;fe++)this.temp[fe]=0;this.reset()},Ce.prototype.update=function(fe,_e){if(void 0===_e&&(_e=fe.length),this.finished)throw new Error("SHA256: can't update because hash was finished.");var he=0;if(this.bytesHashed+=_e,this.bufferLength>0){for(;this.bufferLength<64&&_e>0;)this.buffer[this.bufferLength++]=fe[he++],_e--;64===this.bufferLength&&(se(this.temp,this.state,this.buffer,0,64),this.bufferLength=0)}for(_e>=64&&(he=se(this.temp,this.state,fe,he,_e),_e%=64);_e>0;)this.buffer[this.bufferLength++]=fe[he++],_e--;return this},Ce.prototype.finish=function(fe){if(!this.finished){var _e=this.bytesHashed,he=this.bufferLength,Ke=_e/536870912|0,We=_e<<3,Oe=_e%64<56?64:128;this.buffer[he]=128;for(var C=he+1;C<Oe-8;C++)this.buffer[C]=0;this.buffer[Oe-8]=Ke>>>24&255,this.buffer[Oe-7]=Ke>>>16&255,this.buffer[Oe-6]=Ke>>>8&255,this.buffer[Oe-5]=Ke>>>0&255,this.buffer[Oe-4]=We>>>24&255,this.buffer[Oe-3]=We>>>16&255,this.buffer[Oe-2]=We>>>8&255,this.buffer[Oe-1]=We>>>0&255,se(this.temp,this.state,this.buffer,0,Oe),this.finished=!0}for(C=0;C<8;C++)fe[4*C+0]=this.state[C]>>>24&255,fe[4*C+1]=this.state[C]>>>16&255,fe[4*C+2]=this.state[C]>>>8&255,fe[4*C+3]=this.state[C]>>>0&255;return this},Ce.prototype.digest=function(){var fe=new Uint8Array(this.digestLength);return this.finish(fe),fe},Ce.prototype._saveState=function(fe){for(var _e=0;_e<this.state.length;_e++)fe[_e]=this.state[_e]},Ce.prototype._restoreState=function(fe,_e){for(var he=0;he<this.state.length;he++)this.state[he]=fe[he];this.bytesHashed=_e,this.finished=!1,this.bufferLength=0},Ce}();$.Hash=X;var ae=function(){function Ce(fe){this.inner=new X,this.outer=new X,this.blockSize=this.inner.blockSize,this.digestLength=this.inner.digestLength;var _e=new Uint8Array(this.blockSize);if(fe.length>this.blockSize)(new X).update(fe).finish(_e).clean();else for(var he=0;he<fe.length;he++)_e[he]=fe[he];for(he=0;he<_e.length;he++)_e[he]^=54;for(this.inner.update(_e),he=0;he<_e.length;he++)_e[he]^=106;for(this.outer.update(_e),this.istate=new Uint32Array(8),this.ostate=new Uint32Array(8),this.inner._saveState(this.istate),this.outer._saveState(this.ostate),he=0;he<_e.length;he++)_e[he]=0}return Ce.prototype.reset=function(){return this.inner._restoreState(this.istate,this.inner.blockSize),this.outer._restoreState(this.ostate,this.outer.blockSize),this},Ce.prototype.clean=function(){for(var fe=0;fe<this.istate.length;fe++)this.ostate[fe]=this.istate[fe]=0;this.inner.clean(),this.outer.clean()},Ce.prototype.update=function(fe){return this.inner.update(fe),this},Ce.prototype.finish=function(fe){return this.outer.finished?this.outer.finish(fe):(this.inner.finish(fe),this.outer.update(fe,this.digestLength).finish(fe)),this},Ce.prototype.digest=function(){var fe=new Uint8Array(this.digestLength);return this.finish(fe),fe},Ce}();function be(Ce){var fe=(new X).update(Ce),_e=fe.digest();return fe.clean(),_e}function pe(Ce,fe){var _e=new ae(Ce).update(fe),he=_e.digest();return _e.clean(),he}function ee(Ce,fe,_e,he){var Ke=he[0];if(0===Ke)throw new Error("hkdf: cannot expand more");fe.reset(),Ke>1&&fe.update(Ce),_e&&fe.update(_e),fe.update(he),fe.finish(Ce),he[0]++}$.HMAC=ae,$.hash=be,$.default=be,$.hmac=pe;var te=new Uint8Array($.digestLength);$.hkdf=function ie(Ce,fe,_e,he){void 0===fe&&(fe=te),void 0===he&&(he=32);for(var Ke=new Uint8Array([1]),We=pe(fe,Ce),Oe=new ae(We),C=new Uint8Array(Oe.digestLength),oi=C.length,ki=new Uint8Array(he),Ut=0;Ut<he;Ut++)oi===C.length&&(ee(C,Oe,_e,Ke),oi=0),ki[Ut]=C[oi++];return Oe.clean(),C.fill(0),Ke.fill(0),ki},$.pbkdf2=function ve(Ce,fe,_e,he){for(var Ke=new ae(Ce),We=Ke.digestLength,Oe=new Uint8Array(4),C=new Uint8Array(We),oi=new Uint8Array(We),ki=new Uint8Array(he),Ut=0;Ut*We<he;Ut++){var ut=Ut+1;Oe[0]=ut>>>24&255,Oe[1]=ut>>>16&255,Oe[2]=ut>>>8&255,Oe[3]=ut>>>0&255,Ke.reset(),Ke.update(fe),Ke.update(Oe),Ke.finish(oi);for(var _i=0;_i<We;_i++)C[_i]=oi[_i];for(_i=2;_i<=_e;_i++){Ke.reset(),Ke.update(oi).finish(oi);for(var ai=0;ai<We;ai++)C[ai]^=oi[ai]}for(_i=0;_i<We&&Ut*We+_i<he;_i++)ki[Ut*We+_i]=C[_i]}for(Ut=0;Ut<We;Ut++)C[Ut]=oi[Ut]=0;for(Ut=0;Ut<4;Ut++)Oe[Ut]=0;return Ke.clean(),ki}}(se);var X=se.default;for(var ae in se)X[ae]=se[ae];"object"==typeof ne.exports?ne.exports=X:void 0!==(F=function(){return X}.call(se,A,se,ne))&&(ne.exports=F)}()},2916:(ne,ce,A)=>{"use strict";A.d(ce,{y:()=>ie});var F=A(3489),Z=A(7668),se=A(3292),ae=A(3821),be=A(5379);var te=A(2830);let ie=(()=>{class Ce{constructor(_e){this._isScalar=!1,_e&&(this._subscribe=_e)}lift(_e){const he=new Ce;return he.source=this,he.operator=_e,he}subscribe(_e,he,Ke){const{operator:We}=this,Oe=function X(Ce,fe,_e){if(Ce){if(Ce instanceof F.L)return Ce;if(Ce[Z.b])return Ce[Z.b]()}return Ce||fe||_e?new F.L(Ce,fe,_e):new F.L(se.c)}(_e,he,Ke);if(Oe.add(We?We.call(Oe,this.source):this.source||te.v.useDeprecatedSynchronousErrorHandling&&!Oe.syncErrorThrowable?this._subscribe(Oe):this._trySubscribe(Oe)),te.v.useDeprecatedSynchronousErrorHandling&&Oe.syncErrorThrowable&&(Oe.syncErrorThrowable=!1,Oe.syncErrorThrown))throw Oe.syncErrorValue;return Oe}_trySubscribe(_e){try{return this._subscribe(_e)}catch(he){te.v.useDeprecatedSynchronousErrorHandling&&(_e.syncErrorThrown=!0,_e.syncErrorValue=he),function $(Ce){for(;Ce;){const{closed:fe,destination:_e,isStopped:he}=Ce;if(fe||he)return!1;Ce=_e&&_e instanceof F.L?_e:null}return!0}(_e)?_e.error(he):console.warn(he)}}forEach(_e,he){return new(he=ve(he))((Ke,We)=>{let Oe;Oe=this.subscribe(C=>{try{_e(C)}catch(oi){We(oi),Oe&&Oe.unsubscribe()}},We,Ke)})}_subscribe(_e){const{source:he}=this;return he&&he.subscribe(_e)}[ae.L](){return this}pipe(..._e){return 0===_e.length?this:function ee(Ce){return 0===Ce.length?be.y:1===Ce.length?Ce[0]:function(_e){return Ce.reduce((he,Ke)=>Ke(he),_e)}}(_e)(this)}toPromise(_e){return new(_e=ve(_e))((he,Ke)=>{let We;this.subscribe(Oe=>We=Oe,Oe=>Ke(Oe),()=>he(We))})}}return Ce.create=fe=>new Ce(fe),Ce})();function ve(Ce){if(Ce||(Ce=te.v.Promise||Promise),!Ce)throw new Error("no Promise impl found");return Ce}},3292:(ne,ce,A)=>{"use strict";A.d(ce,{c:()=>Z});var F=A(2830),$=A(2782);const Z={closed:!0,next(se){},error(se){if(F.v.useDeprecatedSynchronousErrorHandling)throw se;(0,$.z)(se)},complete(){}}},826:(ne,ce,A)=>{"use strict";A.d(ce,{L:()=>$});var F=A(3489);class $ extends F.L{notifyNext(se,X,ae,be,pe){this.destination.next(X)}notifyError(se,X){this.destination.error(se)}notifyComplete(se){this.destination.complete()}}},5529:(ne,ce,A)=>{"use strict";A.d(ce,{xQ:()=>pe,Yc:()=>be});var F=A(2916),$=A(3489),Z=A(2654),se=A(5279);class X extends Z.w{constructor(ie,ve){super(),this.subject=ie,this.subscriber=ve,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const ie=this.subject,ve=ie.observers;if(this.subject=null,!ve||0===ve.length||ie.isStopped||ie.closed)return;const Ce=ve.indexOf(this.subscriber);-1!==Ce&&ve.splice(Ce,1)}}var ae=A(7668);class be extends $.L{constructor(ie){super(ie),this.destination=ie}}let pe=(()=>{class te extends F.y{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[ae.b](){return new be(this)}lift(ve){const Ce=new ee(this,this);return Ce.operator=ve,Ce}next(ve){if(this.closed)throw new se.N;if(!this.isStopped){const{observers:Ce}=this,fe=Ce.length,_e=Ce.slice();for(let he=0;he<fe;he++)_e[he].next(ve)}}error(ve){if(this.closed)throw new se.N;this.hasError=!0,this.thrownError=ve,this.isStopped=!0;const{observers:Ce}=this,fe=Ce.length,_e=Ce.slice();for(let he=0;he<fe;he++)_e[he].error(ve);this.observers.length=0}complete(){if(this.closed)throw new se.N;this.isStopped=!0;const{observers:ve}=this,Ce=ve.length,fe=ve.slice();for(let _e=0;_e<Ce;_e++)fe[_e].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(ve){if(this.closed)throw new se.N;return super._trySubscribe(ve)}_subscribe(ve){if(this.closed)throw new se.N;return this.hasError?(ve.error(this.thrownError),Z.w.EMPTY):this.isStopped?(ve.complete(),Z.w.EMPTY):(this.observers.push(ve),new X(this,ve))}asObservable(){const ve=new F.y;return ve.source=this,ve}}return te.create=(ie,ve)=>new ee(ie,ve),te})();class ee extends pe{constructor(ie,ve){super(),this.destination=ie,this.source=ve}next(ie){const{destination:ve}=this;ve&&ve.next&&ve.next(ie)}error(ie){const{destination:ve}=this;ve&&ve.error&&this.destination.error(ie)}complete(){const{destination:ie}=this;ie&&ie.complete&&this.destination.complete()}_subscribe(ie){const{source:ve}=this;return ve?this.source.subscribe(ie):Z.w.EMPTY}}},3489:(ne,ce,A)=>{"use strict";A.d(ce,{L:()=>be});var F=A(7043),$=A(3292),Z=A(2654),se=A(7668),X=A(2830),ae=A(2782);class be extends Z.w{constructor(te,ie,ve){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=$.c;break;case 1:if(!te){this.destination=$.c;break}if("object"==typeof te){te instanceof be?(this.syncErrorThrowable=te.syncErrorThrowable,this.destination=te,te.add(this)):(this.syncErrorThrowable=!0,this.destination=new pe(this,te));break}default:this.syncErrorThrowable=!0,this.destination=new pe(this,te,ie,ve)}}[se.b](){return this}static create(te,ie,ve){const Ce=new be(te,ie,ve);return Ce.syncErrorThrowable=!1,Ce}next(te){this.isStopped||this._next(te)}error(te){this.isStopped||(this.isStopped=!0,this._error(te))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(te){this.destination.next(te)}_error(te){this.destination.error(te),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:te}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=te,this}}class pe extends be{constructor(te,ie,ve,Ce){super(),this._parentSubscriber=te;let fe,_e=this;(0,F.m)(ie)?fe=ie:ie&&(fe=ie.next,ve=ie.error,Ce=ie.complete,ie!==$.c&&(_e=Object.create(ie),(0,F.m)(_e.unsubscribe)&&this.add(_e.unsubscribe.bind(_e)),_e.unsubscribe=this.unsubscribe.bind(this))),this._context=_e,this._next=fe,this._error=ve,this._complete=Ce}next(te){if(!this.isStopped&&this._next){const{_parentSubscriber:ie}=this;X.v.useDeprecatedSynchronousErrorHandling&&ie.syncErrorThrowable?this.__tryOrSetError(ie,this._next,te)&&this.unsubscribe():this.__tryOrUnsub(this._next,te)}}error(te){if(!this.isStopped){const{_parentSubscriber:ie}=this,{useDeprecatedSynchronousErrorHandling:ve}=X.v;if(this._error)ve&&ie.syncErrorThrowable?(this.__tryOrSetError(ie,this._error,te),this.unsubscribe()):(this.__tryOrUnsub(this._error,te),this.unsubscribe());else if(ie.syncErrorThrowable)ve?(ie.syncErrorValue=te,ie.syncErrorThrown=!0):(0,ae.z)(te),this.unsubscribe();else{if(this.unsubscribe(),ve)throw te;(0,ae.z)(te)}}}complete(){if(!this.isStopped){const{_parentSubscriber:te}=this;if(this._complete){const ie=()=>this._complete.call(this._context);X.v.useDeprecatedSynchronousErrorHandling&&te.syncErrorThrowable?(this.__tryOrSetError(te,ie),this.unsubscribe()):(this.__tryOrUnsub(ie),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(te,ie){try{te.call(this._context,ie)}catch(ve){if(this.unsubscribe(),X.v.useDeprecatedSynchronousErrorHandling)throw ve;(0,ae.z)(ve)}}__tryOrSetError(te,ie,ve){if(!X.v.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{ie.call(this._context,ve)}catch(Ce){return X.v.useDeprecatedSynchronousErrorHandling?(te.syncErrorValue=Ce,te.syncErrorThrown=!0,!0):((0,ae.z)(Ce),!0)}return!1}_unsubscribe(){const{_parentSubscriber:te}=this;this._context=null,this._parentSubscriber=null,te.unsubscribe()}}},2654:(ne,ce,A)=>{"use strict";A.d(ce,{w:()=>ae});var F=A(6688),$=A(7830),Z=A(7043);const X=(()=>{function pe(ee){return Error.call(this),this.message=ee?`${ee.length} errors occurred during unsubscription:\n${ee.map((te,ie)=>`${ie+1}) ${te.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ee,this}return pe.prototype=Object.create(Error.prototype),pe})();class ae{constructor(ee){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,ee&&(this._ctorUnsubscribe=!0,this._unsubscribe=ee)}unsubscribe(){let ee;if(this.closed)return;let{_parentOrParents:te,_ctorUnsubscribe:ie,_unsubscribe:ve,_subscriptions:Ce}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,te instanceof ae)te.remove(this);else if(null!==te)for(let fe=0;fe<te.length;++fe)te[fe].remove(this);if((0,Z.m)(ve)){ie&&(this._unsubscribe=void 0);try{ve.call(this)}catch(fe){ee=fe instanceof X?be(fe.errors):[fe]}}if((0,F.k)(Ce)){let fe=-1,_e=Ce.length;for(;++fe<_e;){const he=Ce[fe];if((0,$.K)(he))try{he.unsubscribe()}catch(Ke){ee=ee||[],Ke instanceof X?ee=ee.concat(be(Ke.errors)):ee.push(Ke)}}}if(ee)throw new X(ee)}add(ee){let te=ee;if(!ee)return ae.EMPTY;switch(typeof ee){case"function":te=new ae(ee);case"object":if(te===this||te.closed||"function"!=typeof te.unsubscribe)return te;if(this.closed)return te.unsubscribe(),te;if(!(te instanceof ae)){const Ce=te;te=new ae,te._subscriptions=[Ce]}break;default:throw new Error("unrecognized teardown "+ee+" added to Subscription.")}let{_parentOrParents:ie}=te;if(null===ie)te._parentOrParents=this;else if(ie instanceof ae){if(ie===this)return te;te._parentOrParents=[ie,this]}else{if(-1!==ie.indexOf(this))return te;ie.push(this)}const ve=this._subscriptions;return null===ve?this._subscriptions=[te]:ve.push(te),te}remove(ee){const te=this._subscriptions;if(te){const ie=te.indexOf(ee);-1!==ie&&te.splice(ie,1)}}}var pe;function be(pe){return pe.reduce((ee,te)=>ee.concat(te instanceof X?te.errors:te),[])}ae.EMPTY=((pe=new ae).closed=!0,pe)},2830:(ne,ce,A)=>{"use strict";A.d(ce,{v:()=>$});let F=!1;const $={Promise:void 0,set useDeprecatedSynchronousErrorHandling(Z){if(Z){const se=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+se.stack)}else F&&console.log("RxJS: Back to a better error behavior. Thank you. <3");F=Z},get useDeprecatedSynchronousErrorHandling(){return F}}},1177:(ne,ce,A)=>{"use strict";A.d(ce,{Ds:()=>ae,IY:()=>se,ft:()=>pe});var F=A(3489),$=A(2916),Z=A(9249);class se extends F.L{constructor(te){super(),this.parent=te}_next(te){this.parent.notifyNext(te)}_error(te){this.parent.notifyError(te),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class ae extends F.L{notifyNext(te){this.destination.next(te)}notifyError(te){this.destination.error(te)}notifyComplete(){this.destination.complete()}}function pe(ee,te){if(te.closed)return;if(ee instanceof $.y)return ee.subscribe(te);let ie;try{ie=(0,Z.s)(ee)(te)}catch(ve){te.error(ve)}return ie}},6053:(ne,ce,A)=>{"use strict";A.d(ce,{aj:()=>be});var F=A(2866),$=A(6688),Z=A(826),se=A(448),X=A(3009);const ae={};function be(...te){let ie,ve;return(0,F.K)(te[te.length-1])&&(ve=te.pop()),"function"==typeof te[te.length-1]&&(ie=te.pop()),1===te.length&&(0,$.k)(te[0])&&(te=te[0]),(0,X.n)(te,ve).lift(new pe(ie))}class pe{constructor(ie){this.resultSelector=ie}call(ie,ve){return ve.subscribe(new ee(ie,this.resultSelector))}}class ee extends Z.L{constructor(ie,ve){super(ie),this.resultSelector=ve,this.active=0,this.values=[],this.observables=[]}_next(ie){this.values.push(ae),this.observables.push(ie)}_complete(){const ie=this.observables,ve=ie.length;if(0===ve)this.destination.complete();else{this.active=ve,this.toRespond=ve;for(let Ce=0;Ce<ve;Ce++)this.add((0,se.D)(this,ie[Ce],void 0,Ce))}}notifyComplete(ie){0==(this.active-=1)&&this.destination.complete()}notifyNext(ie,ve,Ce){const fe=this.values,he=this.toRespond?fe[Ce]===ae?--this.toRespond:this.toRespond:0;fe[Ce]=ve,0===he&&(this.resultSelector?this._tryResultSelector(fe):this.destination.next(fe.slice()))}_tryResultSelector(ie){let ve;try{ve=this.resultSelector.apply(this,ie)}catch(Ce){return void this.destination.error(Ce)}this.destination.next(ve)}}},8896:(ne,ce,A)=>{"use strict";A.d(ce,{E:()=>$,c:()=>Z});var F=A(2916);const $=new F.y(X=>X.complete());function Z(X){return X?function se(X){return new F.y(ae=>X.schedule(()=>ae.complete()))}(X):$}},5254:(ne,ce,A)=>{"use strict";A.d(ce,{D:()=>_e});var F=A(2916),$=A(9249),Z=A(2654),se=A(3821),be=A(6454),pe=A(5430),ie=A(8955),ve=A(8515);function _e(he,Ke){return Ke?function fe(he,Ke){if(null!=he){if(function te(he){return he&&"function"==typeof he[se.L]}(he))return function X(he,Ke){return new F.y(We=>{const Oe=new Z.w;return Oe.add(Ke.schedule(()=>{const C=he[se.L]();Oe.add(C.subscribe({next(oi){Oe.add(Ke.schedule(()=>We.next(oi)))},error(oi){Oe.add(Ke.schedule(()=>We.error(oi)))},complete(){Oe.add(Ke.schedule(()=>We.complete()))}}))})),Oe})}(he,Ke);if((0,ie.t)(he))return function ae(he,Ke){return new F.y(We=>{const Oe=new Z.w;return Oe.add(Ke.schedule(()=>he.then(C=>{Oe.add(Ke.schedule(()=>{We.next(C),Oe.add(Ke.schedule(()=>We.complete()))}))},C=>{Oe.add(Ke.schedule(()=>We.error(C)))}))),Oe})}(he,Ke);if((0,ve.z)(he))return(0,be.r)(he,Ke);if(function Ce(he){return he&&"function"==typeof he[pe.hZ]}(he)||"string"==typeof he)return function ee(he,Ke){if(!he)throw new Error("Iterable cannot be null");return new F.y(We=>{const Oe=new Z.w;let C;return Oe.add(()=>{C&&"function"==typeof C.return&&C.return()}),Oe.add(Ke.schedule(()=>{C=he[pe.hZ](),Oe.add(Ke.schedule(function(){if(We.closed)return;let oi,ki;try{const Ut=C.next();oi=Ut.value,ki=Ut.done}catch(Ut){return void We.error(Ut)}ki?We.complete():(We.next(oi),this.schedule())}))})),Oe})}(he,Ke)}throw new TypeError((null!==he&&typeof he||he)+" is not observable")}(he,Ke):he instanceof F.y?he:new F.y((0,$.s)(he))}},3009:(ne,ce,A)=>{"use strict";A.d(ce,{n:()=>se});var F=A(2916),$=A(3650),Z=A(6454);function se(X,ae){return ae?(0,Z.r)(X,ae):new F.y((0,$.V)(X))}},6787:(ne,ce,A)=>{"use strict";A.d(ce,{T:()=>X});var F=A(2916),$=A(2866),Z=A(9146),se=A(3009);function X(...ae){let be=Number.POSITIVE_INFINITY,pe=null,ee=ae[ae.length-1];return(0,$.K)(ee)?(pe=ae.pop(),ae.length>1&&"number"==typeof ae[ae.length-1]&&(be=ae.pop())):"number"==typeof ee&&(be=ae.pop()),null===pe&&1===ae.length&&ae[0]instanceof F.y?ae[0]:(0,Z.J)(be)((0,se.n)(ae,pe))}},1086:(ne,ce,A)=>{"use strict";A.d(ce,{of:()=>se});var F=A(2866),$=A(3009),Z=A(6454);function se(...X){let ae=X[X.length-1];return(0,F.K)(ae)?(X.pop(),(0,Z.r)(X,ae)):(0,$.n)(X)}},1946:(ne,ce,A)=>{"use strict";A.d(ce,{S3:()=>X});var F=A(6688),$=A(3009),Z=A(826),se=A(448);function X(...pe){if(1===pe.length){if(!(0,F.k)(pe[0]))return pe[0];pe=pe[0]}return(0,$.n)(pe,void 0).lift(new ae)}class ae{call(ee,te){return te.subscribe(new be(ee))}}class be extends Z.L{constructor(ee){super(ee),this.hasFirst=!1,this.observables=[],this.subscriptions=[]}_next(ee){this.observables.push(ee)}_complete(){const ee=this.observables,te=ee.length;if(0===te)this.destination.complete();else{for(let ie=0;ie<te&&!this.hasFirst;ie++){const Ce=(0,se.D)(this,ee[ie],void 0,ie);this.subscriptions&&this.subscriptions.push(Ce),this.add(Ce)}this.observables=null}}notifyNext(ee,te,ie){if(!this.hasFirst){this.hasFirst=!0;for(let ve=0;ve<this.subscriptions.length;ve++)if(ve!==ie){let Ce=this.subscriptions[ve];Ce.unsubscribe(),this.remove(Ce)}this.subscriptions=null}this.destination.next(te)}}},1737:(ne,ce,A)=>{"use strict";A.d(ce,{_:()=>$});var F=A(2916);function $(se,X){return new F.y(X?ae=>X.schedule(Z,0,{error:se,subscriber:ae}):ae=>ae.error(se))}function Z({error:se,subscriber:X}){X.error(se)}},7221:(ne,ce,A)=>{"use strict";A.d(ce,{K:()=>$});var F=A(1177);function $(X){return function(be){const pe=new Z(X),ee=be.lift(pe);return pe.caught=ee}}class Z{constructor(ae){this.selector=ae}call(ae,be){return be.subscribe(new se(ae,this.selector,this.caught))}}class se extends F.Ds{constructor(ae,be,pe){super(ae),this.selector=be,this.caught=pe}error(ae){if(!this.isStopped){let be;try{be=this.selector(ae,this.caught)}catch(te){return void super.error(te)}this._unsubscribeAndRecycle();const pe=new F.IY(this);this.add(pe);const ee=(0,F.ft)(be,pe);ee!==pe&&this.add(ee)}}}},13:(ne,ce,A)=>{"use strict";A.d(ce,{b:()=>Z});var F=A(3489),$=A(6014);function Z(be,pe=$.P){return ee=>ee.lift(new se(be,pe))}class se{constructor(pe,ee){this.dueTime=pe,this.scheduler=ee}call(pe,ee){return ee.subscribe(new X(pe,this.dueTime,this.scheduler))}}class X extends F.L{constructor(pe,ee,te){super(pe),this.dueTime=ee,this.scheduler=te,this.debouncedSubscription=null,this.lastValue=null,this.hasValue=!1}_next(pe){this.clearDebounce(),this.lastValue=pe,this.hasValue=!0,this.add(this.debouncedSubscription=this.scheduler.schedule(ae,this.dueTime,this))}_complete(){this.debouncedNext(),this.destination.complete()}debouncedNext(){if(this.clearDebounce(),this.hasValue){const{lastValue:pe}=this;this.lastValue=null,this.hasValue=!1,this.destination.next(pe)}}clearDebounce(){const pe=this.debouncedSubscription;null!==pe&&(this.remove(pe),pe.unsubscribe(),this.debouncedSubscription=null)}}function ae(be){be.debouncedNext()}},9860:(ne,ce,A)=>{"use strict";A.d(ce,{g:()=>ee});var F=A(6014),$=A(2697),Z=A(3489),se=A(8896),X=A(1086),ae=A(1737);class pe{constructor(fe,_e,he){this.kind=fe,this.value=_e,this.error=he,this.hasValue="N"===fe}observe(fe){switch(this.kind){case"N":return fe.next&&fe.next(this.value);case"E":return fe.error&&fe.error(this.error);case"C":return fe.complete&&fe.complete()}}do(fe,_e,he){switch(this.kind){case"N":return fe&&fe(this.value);case"E":return _e&&_e(this.error);case"C":return he&&he()}}accept(fe,_e,he){return fe&&"function"==typeof fe.next?this.observe(fe):this.do(fe,_e,he)}toObservable(){switch(this.kind){case"N":return(0,X.of)(this.value);case"E":return(0,ae._)(this.error);case"C":return(0,se.c)()}throw new Error("unexpected notification kind value")}static createNext(fe){return typeof fe<"u"?new pe("N",fe):pe.undefinedValueNotification}static createError(fe){return new pe("E",void 0,fe)}static createComplete(){return pe.completeNotification}}function ee(Ce,fe=F.P){const he=(0,$.J)(Ce)?+Ce-fe.now():Math.abs(Ce);return Ke=>Ke.lift(new te(he,fe))}pe.completeNotification=new pe("C"),pe.undefinedValueNotification=new pe("N",void 0);class te{constructor(fe,_e){this.delay=fe,this.scheduler=_e}call(fe,_e){return _e.subscribe(new ie(fe,this.delay,this.scheduler))}}class ie extends Z.L{constructor(fe,_e,he){super(fe),this.delay=_e,this.scheduler=he,this.queue=[],this.active=!1,this.errored=!1}static dispatch(fe){const _e=fe.source,he=_e.queue,Ke=fe.scheduler,We=fe.destination;for(;he.length>0&&he[0].time-Ke.now()<=0;)he.shift().notification.observe(We);if(he.length>0){const Oe=Math.max(0,he[0].time-Ke.now());this.schedule(fe,Oe)}else this.unsubscribe(),_e.active=!1}_schedule(fe){this.active=!0,this.destination.add(fe.schedule(ie.dispatch,this.delay,{source:this,destination:this.destination,scheduler:fe}))}scheduleNotification(fe){if(!0===this.errored)return;const _e=this.scheduler,he=new ve(_e.now()+this.delay,fe);this.queue.push(he),!1===this.active&&this._schedule(_e)}_next(fe){this.scheduleNotification(pe.createNext(fe))}_error(fe){this.errored=!0,this.queue=[],this.destination.error(fe),this.unsubscribe()}_complete(){this.scheduleNotification(pe.createComplete()),this.unsubscribe()}}class ve{constructor(fe,_e){this.time=fe,this.notification=_e}}},2198:(ne,ce,A)=>{"use strict";A.d(ce,{h:()=>$});var F=A(3489);function $(X,ae){return function(pe){return pe.lift(new Z(X,ae))}}class Z{constructor(ae,be){this.predicate=ae,this.thisArg=be}call(ae,be){return be.subscribe(new se(ae,this.predicate,this.thisArg))}}class se extends F.L{constructor(ae,be,pe){super(ae),this.predicate=be,this.thisArg=pe,this.count=0}_next(ae){let be;try{be=this.predicate.call(this.thisArg,ae,this.count++)}catch(pe){return void this.destination.error(pe)}be&&this.destination.next(ae)}}},2973:(ne,ce,A)=>{"use strict";A.d(ce,{P:()=>fe});const $=(()=>{function _e(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return _e.prototype=Object.create(Error.prototype),_e})();var Z=A(2198),se=A(5632),X=A(3489);function ae(_e=null){return he=>he.lift(new be(_e))}class be{constructor(he){this.defaultValue=he}call(he,Ke){return Ke.subscribe(new pe(he,this.defaultValue))}}class pe extends X.L{constructor(he,Ke){super(he),this.defaultValue=Ke,this.isEmpty=!0}_next(he){this.isEmpty=!1,this.destination.next(he)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}function ee(_e=ve){return he=>he.lift(new te(_e))}class te{constructor(he){this.errorFactory=he}call(he,Ke){return Ke.subscribe(new ie(he,this.errorFactory))}}class ie extends X.L{constructor(he,Ke){super(he),this.errorFactory=Ke,this.hasValue=!1}_next(he){this.hasValue=!0,this.destination.next(he)}_complete(){if(this.hasValue)return this.destination.complete();{let he;try{he=this.errorFactory()}catch(Ke){he=Ke}this.destination.error(he)}}}function ve(){return new $}var Ce=A(5379);function fe(_e,he){const Ke=arguments.length>=2;return We=>We.pipe(_e?(0,Z.h)((Oe,C)=>_e(Oe,C,We)):Ce.y,(0,se.q)(1),Ke?ae(he):ee(()=>new $))}},4850:(ne,ce,A)=>{"use strict";A.d(ce,{U:()=>$});var F=A(3489);function $(X,ae){return function(pe){if("function"!=typeof X)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return pe.lift(new Z(X,ae))}}class Z{constructor(ae,be){this.project=ae,this.thisArg=be}call(ae,be){return be.subscribe(new se(ae,this.project,this.thisArg))}}class se extends F.L{constructor(ae,be,pe){super(ae),this.project=be,this.count=0,this.thisArg=pe||this}_next(ae){let be;try{be=this.project.call(this.thisArg,ae,this.count++)}catch(pe){return void this.destination.error(pe)}this.destination.next(be)}}},9146:(ne,ce,A)=>{"use strict";A.d(ce,{J:()=>Z});var F=A(1709),$=A(5379);function Z(se=Number.POSITIVE_INFINITY){return(0,F.zg)($.y,se)}},1709:(ne,ce,A)=>{"use strict";A.d(ce,{zg:()=>se});var F=A(4850),$=A(5254),Z=A(1177);function se(pe,ee,te=Number.POSITIVE_INFINITY){return"function"==typeof ee?ie=>ie.pipe(se((ve,Ce)=>(0,$.D)(pe(ve,Ce)).pipe((0,F.U)((fe,_e)=>ee(ve,fe,Ce,_e))),te)):("number"==typeof ee&&(te=ee),ie=>ie.lift(new X(pe,te)))}class X{constructor(ee,te=Number.POSITIVE_INFINITY){this.project=ee,this.concurrent=te}call(ee,te){return te.subscribe(new ae(ee,this.project,this.concurrent))}}class ae extends Z.Ds{constructor(ee,te,ie=Number.POSITIVE_INFINITY){super(ee),this.project=te,this.concurrent=ie,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(ee){this.active<this.concurrent?this._tryNext(ee):this.buffer.push(ee)}_tryNext(ee){let te;const ie=this.index++;try{te=this.project(ee,ie)}catch(ve){return void this.destination.error(ve)}this.active++,this._innerSub(te)}_innerSub(ee){const te=new Z.IY(this),ie=this.destination;ie.add(te);const ve=(0,Z.ft)(ee,te);ve!==te&&ie.add(ve)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(ee){this.destination.next(ee)}notifyComplete(){const ee=this.buffer;this.active--,ee.length>0?this._next(ee.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},7545:(ne,ce,A)=>{"use strict";A.d(ce,{w:()=>se});var F=A(4850),$=A(5254),Z=A(1177);function se(be,pe){return"function"==typeof pe?ee=>ee.pipe(se((te,ie)=>(0,$.D)(be(te,ie)).pipe((0,F.U)((ve,Ce)=>pe(te,ve,ie,Ce))))):ee=>ee.lift(new X(be))}class X{constructor(pe){this.project=pe}call(pe,ee){return ee.subscribe(new ae(pe,this.project))}}class ae extends Z.Ds{constructor(pe,ee){super(pe),this.project=ee,this.index=0}_next(pe){let ee;const te=this.index++;try{ee=this.project(pe,te)}catch(ie){return void this.destination.error(ie)}this._innerSub(ee)}_innerSub(pe){const ee=this.innerSubscription;ee&&ee.unsubscribe();const te=new Z.IY(this),ie=this.destination;ie.add(te),this.innerSubscription=(0,Z.ft)(pe,te),this.innerSubscription!==te&&ie.add(this.innerSubscription)}_complete(){const{innerSubscription:pe}=this;(!pe||pe.closed)&&super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(pe){this.destination.next(pe)}}},5632:(ne,ce,A)=>{"use strict";A.d(ce,{q:()=>X});var F=A(3489);const Z=(()=>{function pe(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return pe.prototype=Object.create(Error.prototype),pe})();var se=A(8896);function X(pe){return ee=>0===pe?(0,se.c)():ee.lift(new ae(pe))}class ae{constructor(ee){if(this.total=ee,this.total<0)throw new Z}call(ee,te){return te.subscribe(new be(ee,this.total))}}class be extends F.L{constructor(ee,te){super(ee),this.total=te,this.count=0}_next(ee){const te=this.total,ie=++this.count;ie<=te&&(this.destination.next(ee),ie===te&&(this.destination.complete(),this.unsubscribe()))}}},2994:(ne,ce,A)=>{"use strict";A.d(ce,{b:()=>se});var F=A(3489),$=A(7876),Z=A(7043);function se(be,pe,ee){return function(ie){return ie.lift(new X(be,pe,ee))}}class X{constructor(pe,ee,te){this.nextOrObserver=pe,this.error=ee,this.complete=te}call(pe,ee){return ee.subscribe(new ae(pe,this.nextOrObserver,this.error,this.complete))}}class ae extends F.L{constructor(pe,ee,te,ie){super(pe),this._tapNext=$.Z,this._tapError=$.Z,this._tapComplete=$.Z,this._tapError=te||$.Z,this._tapComplete=ie||$.Z,(0,Z.m)(ee)?(this._context=this,this._tapNext=ee):ee&&(this._context=ee,this._tapNext=ee.next||$.Z,this._tapError=ee.error||$.Z,this._tapComplete=ee.complete||$.Z)}_next(pe){try{this._tapNext.call(this._context,pe)}catch(ee){return void this.destination.error(ee)}this.destination.next(pe)}_error(pe){try{this._tapError.call(this._context,pe)}catch(ee){return void this.destination.error(ee)}this.destination.error(pe)}_complete(){try{this._tapComplete.call(this._context)}catch(pe){return void this.destination.error(pe)}return this.destination.complete()}}},6227:(ne,ce,A)=>{"use strict";A.d(ce,{V:()=>te});var F=A(6014);const Z=(()=>{function ie(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}return ie.prototype=Object.create(Error.prototype),ie})();var se=A(2697),X=A(1177);class be{constructor(ve,Ce,fe,_e){this.waitFor=ve,this.absoluteTimeout=Ce,this.withObservable=fe,this.scheduler=_e}call(ve,Ce){return Ce.subscribe(new pe(ve,this.absoluteTimeout,this.waitFor,this.withObservable,this.scheduler))}}class pe extends X.Ds{constructor(ve,Ce,fe,_e,he){super(ve),this.absoluteTimeout=Ce,this.waitFor=fe,this.withObservable=_e,this.scheduler=he,this.scheduleTimeout()}static dispatchTimeout(ve){const{withObservable:Ce}=ve;ve._unsubscribeAndRecycle(),ve.add((0,X.ft)(Ce,new X.IY(ve)))}scheduleTimeout(){const{action:ve}=this;ve?this.action=ve.schedule(this,this.waitFor):this.add(this.action=this.scheduler.schedule(pe.dispatchTimeout,this.waitFor,this))}_next(ve){this.absoluteTimeout||this.scheduleTimeout(),super._next(ve)}_unsubscribe(){this.action=void 0,this.scheduler=null,this.withObservable=null}}var ee=A(1737);function te(ie,ve=F.P){return function ae(ie,ve,Ce=F.P){return fe=>{let _e=(0,se.J)(ie),he=_e?+ie-Ce.now():Math.abs(ie);return fe.lift(new be(he,_e,ve,Ce))}}(ie,(0,ee._)(new Z),ve)}},6454:(ne,ce,A)=>{"use strict";A.d(ce,{r:()=>Z});var F=A(2916),$=A(2654);function Z(se,X){return new F.y(ae=>{const be=new $.w;let pe=0;return be.add(X.schedule(function(){pe!==se.length?(ae.next(se[pe++]),ae.closed||be.add(this.schedule())):ae.complete()})),be})}},6014:(ne,ce,A)=>{"use strict";A.d(ce,{P:()=>be});var F=A(2654);class $ extends F.w{constructor(ee,te){super()}schedule(ee,te=0){return this}}let se=(()=>{class pe{constructor(te,ie=pe.now){this.SchedulerAction=te,this.now=ie}schedule(te,ie=0,ve){return new this.SchedulerAction(this,te).schedule(ve,ie)}}return pe.now=()=>Date.now(),pe})();class X extends se{constructor(ee,te=se.now){super(ee,()=>X.delegate&&X.delegate!==this?X.delegate.now():te()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(ee,te=0,ie){return X.delegate&&X.delegate!==this?X.delegate.schedule(ee,te,ie):super.schedule(ee,te,ie)}flush(ee){const{actions:te}=this;if(this.active)return void te.push(ee);let ie;this.active=!0;do{if(ie=ee.execute(ee.state,ee.delay))break}while(ee=te.shift());if(this.active=!1,ie){for(;ee=te.shift();)ee.unsubscribe();throw ie}}}const be=new X(class Z extends ${constructor(ee,te){super(ee,te),this.scheduler=ee,this.work=te,this.pending=!1}schedule(ee,te=0){if(this.closed)return this;this.state=ee;const ie=this.id,ve=this.scheduler;return null!=ie&&(this.id=this.recycleAsyncId(ve,ie,te)),this.pending=!0,this.delay=te,this.id=this.id||this.requestAsyncId(ve,this.id,te),this}requestAsyncId(ee,te,ie=0){return setInterval(ee.flush.bind(ee,this),ie)}recycleAsyncId(ee,te,ie=0){if(null!==ie&&this.delay===ie&&!1===this.pending)return te;clearInterval(te)}execute(ee,te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ie=this._execute(ee,te);if(ie)return ie;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ee,te){let ve,ie=!1;try{this.work(ee)}catch(Ce){ie=!0,ve=!!Ce&&Ce||new Error(Ce)}if(ie)return this.unsubscribe(),ve}_unsubscribe(){const ee=this.id,te=this.scheduler,ie=te.actions,ve=ie.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==ve&&ie.splice(ve,1),null!=ee&&(this.id=this.recycleAsyncId(te,ee,null)),this.delay=null}})},5430:(ne,ce,A)=>{"use strict";A.d(ce,{hZ:()=>$});const $=function F(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},3821:(ne,ce,A)=>{"use strict";A.d(ce,{L:()=>F});const F="function"==typeof Symbol&&Symbol.observable||"@@observable"},7668:(ne,ce,A)=>{"use strict";A.d(ce,{b:()=>F});const F="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()},5279:(ne,ce,A)=>{"use strict";A.d(ce,{N:()=>$});const $=(()=>{function Z(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return Z.prototype=Object.create(Error.prototype),Z})()},2782:(ne,ce,A)=>{"use strict";function F($){setTimeout(()=>{throw $},0)}A.d(ce,{z:()=>F})},5379:(ne,ce,A)=>{"use strict";function F($){return $}A.d(ce,{y:()=>F})},6688:(ne,ce,A)=>{"use strict";A.d(ce,{k:()=>F});const F=Array.isArray||($=>$&&"number"==typeof $.length)},8515:(ne,ce,A)=>{"use strict";A.d(ce,{z:()=>F});const F=$=>$&&"number"==typeof $.length&&"function"!=typeof $},2697:(ne,ce,A)=>{"use strict";function F($){return $ instanceof Date&&!isNaN(+$)}A.d(ce,{J:()=>F})},7043:(ne,ce,A)=>{"use strict";function F($){return"function"==typeof $}A.d(ce,{m:()=>F})},7830:(ne,ce,A)=>{"use strict";function F($){return null!==$&&"object"==typeof $}A.d(ce,{K:()=>F})},8955:(ne,ce,A)=>{"use strict";function F($){return!!$&&"function"!=typeof $.subscribe&&"function"==typeof $.then}A.d(ce,{t:()=>F})},2866:(ne,ce,A)=>{"use strict";function F($){return $&&"function"==typeof $.schedule}A.d(ce,{K:()=>F})},7876:(ne,ce,A)=>{"use strict";function F(){}A.d(ce,{Z:()=>F})},9249:(ne,ce,A)=>{"use strict";A.d(ce,{s:()=>ie});var F=A(3650),$=A(2782),se=A(5430),ae=A(3821),pe=A(8515),ee=A(8955),te=A(7830);const ie=ve=>{if(ve&&"function"==typeof ve[ae.L])return(ve=>Ce=>{const fe=ve[ae.L]();if("function"!=typeof fe.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return fe.subscribe(Ce)})(ve);if((0,pe.z)(ve))return(0,F.V)(ve);if((0,ee.t)(ve))return(ve=>Ce=>(ve.then(fe=>{Ce.closed||(Ce.next(fe),Ce.complete())},fe=>Ce.error(fe)).then(null,$.z),Ce))(ve);if(ve&&"function"==typeof ve[se.hZ])return(ve=>Ce=>{const fe=ve[se.hZ]();for(;;){let _e;try{_e=fe.next()}catch(he){return Ce.error(he),Ce}if(_e.done){Ce.complete();break}if(Ce.next(_e.value),Ce.closed)break}return"function"==typeof fe.return&&Ce.add(()=>{fe.return&&fe.return()}),Ce})(ve);{const fe=`You provided ${(0,te.K)(ve)?"an invalid object":`'${ve}'`} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`;throw new TypeError(fe)}}},3650:(ne,ce,A)=>{"use strict";A.d(ce,{V:()=>F});const F=$=>Z=>{for(let se=0,X=$.length;se<X&&!Z.closed;se++)Z.next($[se]);Z.complete()}},448:(ne,ce,A)=>{"use strict";A.d(ce,{D:()=>X});var F=A(3489);class $ extends F.L{constructor(be,pe,ee){super(),this.parent=be,this.outerValue=pe,this.outerIndex=ee,this.index=0}_next(be){this.parent.notifyNext(this.outerValue,be,this.outerIndex,this.index++,this)}_error(be){this.parent.notifyError(be,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var Z=A(9249),se=A(2916);function X(ae,be,pe,ee,te=new $(ae,pe,ee)){if(!te.closed)return be instanceof se.y?be.subscribe(te):(0,Z.s)(be)(te)}},6895:(ne,ce,A)=>{"use strict";A.d(ce,{HT:()=>X,JF:()=>ho,K0:()=>be,Mx:()=>ba,NF:()=>xm,O5:()=>_a,bD:()=>gl,ez:()=>Xn,q:()=>Z,sg:()=>Zs,tP:()=>mc,w_:()=>ae});var F=A(3071);let $=null;function Z(){return $}function X(x){$||($=x)}class ae{}const be=new F.OlP("DocumentToken");function ba(x,B){B=encodeURIComponent(B);for(const N of x.split(";")){const Y=N.indexOf("="),[ue,De]=-1==Y?[N,""]:[N.slice(0,Y),N.slice(Y+1)];if(ue.trim()===B)return decodeURIComponent(De)}return null}class Zp{constructor(B,N,Y,ue){this.$implicit=B,this.ngForOf=N,this.index=Y,this.count=ue}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Zs=(()=>{class x{constructor(N,Y,ue){this._viewContainer=N,this._template=Y,this._differs=ue,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(N){this._ngForOf=N,this._ngForOfDirty=!0}set ngForTrackBy(N){this._trackByFn=N}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(N){N&&(this._template=N)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const N=this._ngForOf;!this._differ&&N&&(this._differ=this._differs.find(N).create(this.ngForTrackBy))}if(this._differ){const N=this._differ.diff(this._ngForOf);N&&this._applyChanges(N)}}_applyChanges(N){const Y=this._viewContainer;N.forEachOperation((ue,De,Ge)=>{if(null==ue.previousIndex)Y.createEmbeddedView(this._template,new Zp(ue.item,this._ngForOf,-1,-1),null===Ge?void 0:Ge);else if(null==Ge)Y.remove(null===De?void 0:De);else if(null!==De){const lt=Y.get(De);Y.move(lt,Ge),Oi(lt,ue)}});for(let ue=0,De=Y.length;ue<De;ue++){const lt=Y.get(ue).context;lt.index=ue,lt.count=De,lt.ngForOf=this._ngForOf}N.forEachIdentityChange(ue=>{Oi(Y.get(ue.currentIndex),ue)})}static ngTemplateContextGuard(N,Y){return!0}}return x.\u0275fac=function(N){return new(N||x)(F.Y36(F.s_b),F.Y36(F.Rgc),F.Y36(F.ZZ4))},x.\u0275dir=F.lG2({type:x,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),x})();function Oi(x,B){x.context.$implicit=B.item}let _a=(()=>{class x{constructor(N,Y){this._viewContainer=N,this._context=new uo,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=Y}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){gc("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){gc("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,Y){return!0}}return x.\u0275fac=function(N){return new(N||x)(F.Y36(F.s_b),F.Y36(F.Rgc))},x.\u0275dir=F.lG2({type:x,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),x})();class uo{constructor(){this.$implicit=null,this.ngIf=null}}function gc(x,B){if(B&&!B.createEmbeddedView)throw new Error(`${x} must be a TemplateRef, but received '${(0,F.AaK)(B)}'.`)}let mc=(()=>{class x{constructor(N){this._viewContainerRef=N,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(N){if(N.ngTemplateOutlet||N.ngTemplateOutletInjector){const Y=this._viewContainerRef;if(this._viewRef&&Y.remove(Y.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:ue,ngTemplateOutletContext:De,ngTemplateOutletInjector:Ge}=this;this._viewRef=Y.createEmbeddedView(ue,De,Ge?{injector:Ge}:void 0)}else this._viewRef=null}else this._viewRef&&N.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return x.\u0275fac=function(N){return new(N||x)(F.Y36(F.s_b))},x.\u0275dir=F.lG2({type:x,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[F.TTD]}),x})(),Xn=(()=>{class x{}return x.\u0275fac=function(N){return new(N||x)},x.\u0275mod=F.oAB({type:x}),x.\u0275inj=F.cJS({}),x})();const gl="browser";function xm(x){return x===gl}class ho{}},5793:(ne,ce,A)=>{"use strict";A.d(ce,{TP:()=>ul,eN:()=>dl,JF:()=>Rm,WM:()=>ie,LE:()=>Oe});var F=A(6895),$=A(3071),Z=A(1086),se=A(2916),X=A(1709),be=A(2198),pe=A(4850);class ee{}class te{}class ie{constructor(oe){this.normalizedNames=new Map,this.lazyUpdate=null,oe?this.lazyInit="string"==typeof oe?()=>{this.headers=new Map,oe.split("\n").forEach(le=>{const Ze=le.indexOf(":");if(Ze>0){const Te=le.slice(0,Ze),ft=Te.toLowerCase(),mi=le.slice(Ze+1).trim();this.maybeSetNormalizedName(Te,ft),this.headers.has(ft)?this.headers.get(ft).push(mi):this.headers.set(ft,[mi])}})}:()=>{this.headers=new Map,Object.keys(oe).forEach(le=>{let Ze=oe[le];const Te=le.toLowerCase();"string"==typeof Ze&&(Ze=[Ze]),Ze.length>0&&(this.headers.set(Te,Ze),this.maybeSetNormalizedName(le,Te))})}:this.headers=new Map}has(oe){return this.init(),this.headers.has(oe.toLowerCase())}get(oe){this.init();const le=this.headers.get(oe.toLowerCase());return le&&le.length>0?le[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(oe){return this.init(),this.headers.get(oe.toLowerCase())||null}append(oe,le){return this.clone({name:oe,value:le,op:"a"})}set(oe,le){return this.clone({name:oe,value:le,op:"s"})}delete(oe,le){return this.clone({name:oe,value:le,op:"d"})}maybeSetNormalizedName(oe,le){this.normalizedNames.has(le)||this.normalizedNames.set(le,oe)}init(){this.lazyInit&&(this.lazyInit instanceof ie?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(oe=>this.applyUpdate(oe)),this.lazyUpdate=null))}copyFrom(oe){oe.init(),Array.from(oe.headers.keys()).forEach(le=>{this.headers.set(le,oe.headers.get(le)),this.normalizedNames.set(le,oe.normalizedNames.get(le))})}clone(oe){const le=new ie;return le.lazyInit=this.lazyInit&&this.lazyInit instanceof ie?this.lazyInit:this,le.lazyUpdate=(this.lazyUpdate||[]).concat([oe]),le}applyUpdate(oe){const le=oe.name.toLowerCase();switch(oe.op){case"a":case"s":let Ze=oe.value;if("string"==typeof Ze&&(Ze=[Ze]),0===Ze.length)return;this.maybeSetNormalizedName(oe.name,le);const Te=("a"===oe.op?this.headers.get(le):void 0)||[];Te.push(...Ze),this.headers.set(le,Te);break;case"d":const ft=oe.value;if(ft){let mi=this.headers.get(le);if(!mi)return;mi=mi.filter(It=>-1===ft.indexOf(It)),0===mi.length?(this.headers.delete(le),this.normalizedNames.delete(le)):this.headers.set(le,mi)}else this.headers.delete(le),this.normalizedNames.delete(le)}}forEach(oe){this.init(),Array.from(this.normalizedNames.keys()).forEach(le=>oe(this.normalizedNames.get(le),this.headers.get(le)))}}class Ce{encodeKey(oe){return Ke(oe)}encodeValue(oe){return Ke(oe)}decodeKey(oe){return decodeURIComponent(oe)}decodeValue(oe){return decodeURIComponent(oe)}}const _e=/%(\d[a-f0-9])/gi,he={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ke(xe){return encodeURIComponent(xe).replace(_e,(oe,le)=>he[le]??oe)}function We(xe){return`${xe}`}class Oe{constructor(oe={}){if(this.updates=null,this.cloneFrom=null,this.encoder=oe.encoder||new Ce,oe.fromString){if(oe.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function fe(xe,oe){const le=new Map;return xe.length>0&&xe.replace(/^\?/,"").split("&").forEach(Te=>{const ft=Te.indexOf("="),[mi,It]=-1==ft?[oe.decodeKey(Te),""]:[oe.decodeKey(Te.slice(0,ft)),oe.decodeValue(Te.slice(ft+1))],qt=le.get(mi)||[];qt.push(It),le.set(mi,qt)}),le}(oe.fromString,this.encoder)}else oe.fromObject?(this.map=new Map,Object.keys(oe.fromObject).forEach(le=>{const Ze=oe.fromObject[le],Te=Array.isArray(Ze)?Ze.map(We):[We(Ze)];this.map.set(le,Te)})):this.map=null}has(oe){return this.init(),this.map.has(oe)}get(oe){this.init();const le=this.map.get(oe);return le?le[0]:null}getAll(oe){return this.init(),this.map.get(oe)||null}keys(){return this.init(),Array.from(this.map.keys())}append(oe,le){return this.clone({param:oe,value:le,op:"a"})}appendAll(oe){const le=[];return Object.keys(oe).forEach(Ze=>{const Te=oe[Ze];Array.isArray(Te)?Te.forEach(ft=>{le.push({param:Ze,value:ft,op:"a"})}):le.push({param:Ze,value:Te,op:"a"})}),this.clone(le)}set(oe,le){return this.clone({param:oe,value:le,op:"s"})}delete(oe,le){return this.clone({param:oe,value:le,op:"d"})}toString(){return this.init(),this.keys().map(oe=>{const le=this.encoder.encodeKey(oe);return this.map.get(oe).map(Ze=>le+"="+this.encoder.encodeValue(Ze)).join("&")}).filter(oe=>""!==oe).join("&")}clone(oe){const le=new Oe({encoder:this.encoder});return le.cloneFrom=this.cloneFrom||this,le.updates=(this.updates||[]).concat(oe),le}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(oe=>this.map.set(oe,this.cloneFrom.map.get(oe))),this.updates.forEach(oe=>{switch(oe.op){case"a":case"s":const le=("a"===oe.op?this.map.get(oe.param):void 0)||[];le.push(We(oe.value)),this.map.set(oe.param,le);break;case"d":if(void 0===oe.value){this.map.delete(oe.param);break}{let Ze=this.map.get(oe.param)||[];const Te=Ze.indexOf(We(oe.value));-1!==Te&&Ze.splice(Te,1),Ze.length>0?this.map.set(oe.param,Ze):this.map.delete(oe.param)}}}),this.cloneFrom=this.updates=null)}}class oi{constructor(){this.map=new Map}set(oe,le){return this.map.set(oe,le),this}get(oe){return this.map.has(oe)||this.map.set(oe,oe.defaultValue()),this.map.get(oe)}delete(oe){return this.map.delete(oe),this}has(oe){return this.map.has(oe)}keys(){return this.map.keys()}}function Ut(xe){return typeof ArrayBuffer<"u"&&xe instanceof ArrayBuffer}function ut(xe){return typeof Blob<"u"&&xe instanceof Blob}function _i(xe){return typeof FormData<"u"&&xe instanceof FormData}class je{constructor(oe,le,Ze,Te){let ft;if(this.url=le,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=oe.toUpperCase(),function ki(xe){switch(xe){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||Te?(this.body=void 0!==Ze?Ze:null,ft=Te):ft=Ze,ft&&(this.reportProgress=!!ft.reportProgress,this.withCredentials=!!ft.withCredentials,ft.responseType&&(this.responseType=ft.responseType),ft.headers&&(this.headers=ft.headers),ft.context&&(this.context=ft.context),ft.params&&(this.params=ft.params)),this.headers||(this.headers=new ie),this.context||(this.context=new oi),this.params){const mi=this.params.toString();if(0===mi.length)this.urlWithParams=le;else{const It=le.indexOf("?");this.urlWithParams=le+(-1===It?"?":It<le.length-1?"&":"")+mi}}else this.params=new Oe,this.urlWithParams=le}serializeBody(){return null===this.body?null:Ut(this.body)||ut(this.body)||_i(this.body)||function ai(xe){return typeof URLSearchParams<"u"&&xe instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof Oe?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||_i(this.body)?null:ut(this.body)?this.body.type||null:Ut(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof Oe?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(oe={}){const le=oe.method||this.method,Ze=oe.url||this.url,Te=oe.responseType||this.responseType,ft=void 0!==oe.body?oe.body:this.body,mi=void 0!==oe.withCredentials?oe.withCredentials:this.withCredentials,It=void 0!==oe.reportProgress?oe.reportProgress:this.reportProgress;let qt=oe.headers||this.headers,Qt=oe.params||this.params;const Rs=oe.context??this.context;return void 0!==oe.setHeaders&&(qt=Object.keys(oe.setHeaders).reduce((xt,Nr)=>xt.set(Nr,oe.setHeaders[Nr]),qt)),oe.setParams&&(Qt=Object.keys(oe.setParams).reduce((xt,Nr)=>xt.set(Nr,oe.setParams[Nr]),Qt)),new je(le,Ze,ft,{params:Qt,headers:qt,context:Rs,reportProgress:It,responseType:Te,withCredentials:mi})}}var Et=(()=>((Et=Et||{})[Et.Sent=0]="Sent",Et[Et.UploadProgress=1]="UploadProgress",Et[Et.ResponseHeader=2]="ResponseHeader",Et[Et.DownloadProgress=3]="DownloadProgress",Et[Et.Response=4]="Response",Et[Et.User=5]="User",Et))();class Ye{constructor(oe,le=200,Ze="OK"){this.headers=oe.headers||new ie,this.status=void 0!==oe.status?oe.status:le,this.statusText=oe.statusText||Ze,this.url=oe.url||null,this.ok=this.status>=200&&this.status<300}}class ct extends Ye{constructor(oe={}){super(oe),this.type=Et.ResponseHeader}clone(oe={}){return new ct({headers:oe.headers||this.headers,status:void 0!==oe.status?oe.status:this.status,statusText:oe.statusText||this.statusText,url:oe.url||this.url||void 0})}}class pt extends Ye{constructor(oe={}){super(oe),this.type=Et.Response,this.body=void 0!==oe.body?oe.body:null}clone(oe={}){return new pt({body:void 0!==oe.body?oe.body:this.body,headers:oe.headers||this.headers,status:void 0!==oe.status?oe.status:this.status,statusText:oe.statusText||this.statusText,url:oe.url||this.url||void 0})}}class Qu extends Ye{constructor(oe){super(oe,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${oe.url||"(unknown url)"}`:`Http failure response for ${oe.url||"(unknown url)"}: ${oe.status} ${oe.statusText}`,this.error=oe.error||null}}function cl(xe,oe){return{body:oe,headers:xe.headers,context:xe.context,observe:xe.observe,params:xe.params,reportProgress:xe.reportProgress,responseType:xe.responseType,withCredentials:xe.withCredentials}}let dl=(()=>{class xe{constructor(le){this.handler=le}request(le,Ze,Te={}){let ft;if(le instanceof je)ft=le;else{let qt,Qt;qt=Te.headers instanceof ie?Te.headers:new ie(Te.headers),Te.params&&(Qt=Te.params instanceof Oe?Te.params:new Oe({fromObject:Te.params})),ft=new je(le,Ze,void 0!==Te.body?Te.body:null,{headers:qt,context:Te.context,params:Qt,reportProgress:Te.reportProgress,responseType:Te.responseType||"json",withCredentials:Te.withCredentials})}const mi=(0,Z.of)(ft).pipe(function ae(xe,oe){return(0,X.zg)(xe,oe,1)}(qt=>this.handler.handle(qt)));if(le instanceof je||"events"===Te.observe)return mi;const It=mi.pipe((0,be.h)(qt=>qt instanceof pt));switch(Te.observe||"body"){case"body":switch(ft.responseType){case"arraybuffer":return It.pipe((0,pe.U)(qt=>{if(null!==qt.body&&!(qt.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return qt.body}));case"blob":return It.pipe((0,pe.U)(qt=>{if(null!==qt.body&&!(qt.body instanceof Blob))throw new Error("Response is not a Blob.");return qt.body}));case"text":return It.pipe((0,pe.U)(qt=>{if(null!==qt.body&&"string"!=typeof qt.body)throw new Error("Response is not a string.");return qt.body}));default:return It.pipe((0,pe.U)(qt=>qt.body))}case"response":return It;default:throw new Error(`Unreachable: unhandled observe type ${Te.observe}}`)}}delete(le,Ze={}){return this.request("DELETE",le,Ze)}get(le,Ze={}){return this.request("GET",le,Ze)}head(le,Ze={}){return this.request("HEAD",le,Ze)}jsonp(le,Ze){return this.request("JSONP",le,{params:(new Oe).append(Ze,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(le,Ze={}){return this.request("OPTIONS",le,Ze)}patch(le,Ze,Te={}){return this.request("PATCH",le,cl(Te,Ze))}post(le,Ze,Te={}){return this.request("POST",le,cl(Te,Ze))}put(le,Ze,Te={}){return this.request("PUT",le,cl(Te,Ze))}}return xe.\u0275fac=function(le){return new(le||xe)($.LFG(ee))},xe.\u0275prov=$.Yz7({token:xe,factory:xe.\u0275fac}),xe})();class Yn{constructor(oe,le){this.next=oe,this.interceptor=le}handle(oe){return this.interceptor.intercept(oe,this.next)}}const ul=new $.OlP("HTTP_INTERCEPTORS");let Up=(()=>{class xe{intercept(le,Ze){return Ze.handle(le)}}return xe.\u0275fac=function(le){return new(le||xe)},xe.\u0275prov=$.Yz7({token:xe,factory:xe.\u0275fac}),xe})();const Ry=/^\)\]\}',?\n/;let ii=(()=>{class xe{constructor(le){this.xhrFactory=le}handle(le){if("JSONP"===le.method)throw new Error("Attempted to construct Jsonp request without HttpClientJsonpModule installed.");return new se.y(Ze=>{const Te=this.xhrFactory.build();if(Te.open(le.method,le.urlWithParams),le.withCredentials&&(Te.withCredentials=!0),le.headers.forEach((Hi,vi)=>Te.setRequestHeader(Hi,vi.join(","))),le.headers.has("Accept")||Te.setRequestHeader("Accept","application/json, text/plain, */*"),!le.headers.has("Content-Type")){const Hi=le.detectContentTypeHeader();null!==Hi&&Te.setRequestHeader("Content-Type",Hi)}if(le.responseType){const Hi=le.responseType.toLowerCase();Te.responseType="json"!==Hi?Hi:"text"}const ft=le.serializeBody();let mi=null;const It=()=>{if(null!==mi)return mi;const Hi=Te.statusText||"OK",vi=new ie(Te.getAllResponseHeaders()),wi=function Ys(xe){return"responseURL"in xe&&xe.responseURL?xe.responseURL:/^X-Request-URL:/m.test(xe.getAllResponseHeaders())?xe.getResponseHeader("X-Request-URL"):null}(Te)||le.url;return mi=new ct({headers:vi,status:Te.status,statusText:Hi,url:wi}),mi},qt=()=>{let{headers:Hi,status:vi,statusText:wi,url:Oy}=It(),cs=null;204!==vi&&(cs=typeof Te.response>"u"?Te.responseText:Te.response),0===vi&&(vi=cs?200:0);let Lr=vi>=200&&vi<300;if("json"===le.responseType&&"string"==typeof cs){const ei=cs;cs=cs.replace(Ry,"");try{cs=""!==cs?JSON.parse(cs):null}catch(pc){cs=ei,Lr&&(Lr=!1,cs={error:pc,text:cs})}}Lr?(Ze.next(new pt({body:cs,headers:Hi,status:vi,statusText:wi,url:Oy||void 0})),Ze.complete()):Ze.error(new Qu({error:cs,headers:Hi,status:vi,statusText:wi,url:Oy||void 0}))},Qt=Hi=>{const{url:vi}=It(),wi=new Qu({error:Hi,status:Te.status||0,statusText:Te.statusText||"Unknown Error",url:vi||void 0});Ze.error(wi)};let Rs=!1;const xt=Hi=>{Rs||(Ze.next(It()),Rs=!0);let vi={type:Et.DownloadProgress,loaded:Hi.loaded};Hi.lengthComputable&&(vi.total=Hi.total),"text"===le.responseType&&!!Te.responseText&&(vi.partialText=Te.responseText),Ze.next(vi)},Nr=Hi=>{let vi={type:Et.UploadProgress,loaded:Hi.loaded};Hi.lengthComputable&&(vi.total=Hi.total),Ze.next(vi)};return Te.addEventListener("load",qt),Te.addEventListener("error",Qt),Te.addEventListener("timeout",Qt),Te.addEventListener("abort",Qt),le.reportProgress&&(Te.addEventListener("progress",xt),null!==ft&&Te.upload&&Te.upload.addEventListener("progress",Nr)),Te.send(ft),Ze.next({type:Et.Sent}),()=>{Te.removeEventListener("error",Qt),Te.removeEventListener("abort",Qt),Te.removeEventListener("load",qt),Te.removeEventListener("timeout",Qt),le.reportProgress&&(Te.removeEventListener("progress",xt),null!==ft&&Te.upload&&Te.upload.removeEventListener("progress",Nr)),Te.readyState!==Te.DONE&&Te.abort()}})}}return xe.\u0275fac=function(le){return new(le||xe)($.LFG(F.JF))},xe.\u0275prov=$.Yz7({token:xe,factory:xe.\u0275fac}),xe})();const hc=new $.OlP("XSRF_COOKIE_NAME"),$p=new $.OlP("XSRF_HEADER_NAME");class Kp{}let An=(()=>{class xe{constructor(le,Ze,Te){this.doc=le,this.platform=Ze,this.cookieName=Te,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const le=this.doc.cookie||"";return le!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,F.Mx)(le,this.cookieName),this.lastCookieString=le),this.lastToken}}return xe.\u0275fac=function(le){return new(le||xe)($.LFG(F.K0),$.LFG($.Lbi),$.LFG(hc))},xe.\u0275prov=$.Yz7({token:xe,factory:xe.\u0275fac}),xe})(),Ts=(()=>{class xe{constructor(le,Ze){this.tokenService=le,this.headerName=Ze}intercept(le,Ze){const Te=le.url.toLowerCase();if("GET"===le.method||"HEAD"===le.method||Te.startsWith("http://")||Te.startsWith("https://"))return Ze.handle(le);const ft=this.tokenService.getToken();return null!==ft&&!le.headers.has(this.headerName)&&(le=le.clone({headers:le.headers.set(this.headerName,ft)})),Ze.handle(le)}}return xe.\u0275fac=function(le){return new(le||xe)($.LFG(Kp),$.LFG($p))},xe.\u0275prov=$.Yz7({token:xe,factory:xe.\u0275fac}),xe})(),hl=(()=>{class xe{constructor(le,Ze){this.backend=le,this.injector=Ze,this.chain=null}handle(le){if(null===this.chain){const Ze=this.injector.get(ul,[]);this.chain=Ze.reduceRight((Te,ft)=>new Yn(Te,ft),this.backend)}return this.chain.handle(le)}}return xe.\u0275fac=function(le){return new(le||xe)($.LFG(te),$.LFG($.zs3))},xe.\u0275prov=$.Yz7({token:xe,factory:xe.\u0275fac}),xe})(),Yp=(()=>{class xe{static disable(){return{ngModule:xe,providers:[{provide:Ts,useClass:Up}]}}static withOptions(le={}){return{ngModule:xe,providers:[le.cookieName?{provide:hc,useValue:le.cookieName}:[],le.headerName?{provide:$p,useValue:le.headerName}:[]]}}}return xe.\u0275fac=function(le){return new(le||xe)},xe.\u0275mod=$.oAB({type:xe}),xe.\u0275inj=$.cJS({providers:[Ts,{provide:ul,useExisting:Ts,multi:!0},{provide:Kp,useClass:An},{provide:hc,useValue:"XSRF-TOKEN"},{provide:$p,useValue:"X-XSRF-TOKEN"}]}),xe})(),Rm=(()=>{class xe{}return xe.\u0275fac=function(le){return new(le||xe)},xe.\u0275mod=$.oAB({type:xe}),xe.\u0275inj=$.cJS({providers:[dl,{provide:ee,useClass:hl},ii,{provide:te,useExisting:ii}],imports:[Yp.withOptions({cookieName:"XSRF-TOKEN",headerName:"X-XSRF-TOKEN"})]}),xe})()},3071:(ne,ce,A)=>{"use strict";A.d(ce,{AFp:()=>RC,ip1:()=>CO,CZH:()=>r_,hGG:()=>jI,z2F:()=>c_,sBO:()=>NI,_Vd:()=>_v,EJc:()=>I,SBq:()=>Ff,qLn:()=>Ji,vpe:()=>Ul,OlP:()=>Mi,zs3:()=>Wo,ZZ4:()=>fD,aQg:()=>f_,soG:()=>sa,h0i:()=>du,R0b:()=>rn,Lbi:()=>tD,g9A:()=>SO,Qsj:()=>kS,FYo:()=>LS,JOm:()=>Sl,Rgc:()=>CC,dDg:()=>OC,eoX:()=>MC,GfV:()=>Ac,s_b:()=>qb,ifc:()=>vi,Lck:()=>O1,eFA:()=>MO,G48:()=>FI,Gpc:()=>Ut,_c5:()=>ql,zSh:()=>ir,wAp:()=>_t,vHH:()=>je,lri:()=>qc,rWj:()=>Lg,D6c:()=>oa,cg1:()=>iC,kL8:()=>nC,dqk:()=>wi,sIi:()=>Vv,CqO:()=>Uv,QGY:()=>tg,F4k:()=>h0,RDi:()=>wh,AaK:()=>C,qOj:()=>tb,TTD:()=>By,_Bn:()=>fC,jDz:()=>nO,xp6:()=>$r,uIk:()=>Qd,Tol:()=>qh,ekj:()=>Sr,Suo:()=>bC,Xpm:()=>oh,lG2:()=>Om,Yz7:()=>An,cJS:()=>hl,oAB:()=>fc,Yjl:()=>Py,Y36:()=>Hf,_UZ:()=>yr,qZA:()=>Xr,TgZ:()=>tu,EpF:()=>eg,n5z:()=>xx,Ikx:()=>hg,SDv:()=>_g,QtT:()=>V0,pQV:()=>np,LFG:()=>xn,$8M:()=>CR,NdJ:()=>p0,CRH:()=>_C,oxw:()=>jv,Hsn:()=>AA,F$t:()=>RA,Q6J:()=>$h,s9C:()=>m0,MGl:()=>zv,VKq:()=>Ub,WLB:()=>gC,kEZ:()=>rp,iGM:()=>uO,MAs:()=>Yo,KtG:()=>cf,CHM:()=>km,LSH:()=>yv,Udp:()=>Xv,YNc:()=>Jf,W1O:()=>cp,_uU:()=>Zh,Oqu:()=>Bc,hij:()=>ru,Gf:()=>q0});var F=A(5529),$=A(2654),Z=A(2916),se=A(6787),X=A(3489);function ae(){return function(d){return d.lift(new be(d))}}class be{constructor(d){this.connectable=d}call(d,h){const{connectable:f}=this;f._refCount++;const v=new pe(d,f),S=h.subscribe(v);return v.closed||(v.connection=f.connect()),S}}class pe extends X.L{constructor(d,h){super(d),this.connectable=h}_unsubscribe(){const{connectable:d}=this;if(!d)return void(this.connection=null);this.connectable=null;const h=d._refCount;if(h<=0)return void(this.connection=null);if(d._refCount=h-1,h>1)return void(this.connection=null);const{connection:f}=this,v=d._connection;this.connection=null,v&&(!f||v===f)&&v.unsubscribe()}}class ee extends Z.y{constructor(d,h){super(),this.source=d,this.subjectFactory=h,this._refCount=0,this._isComplete=!1}_subscribe(d){return this.getSubject().subscribe(d)}getSubject(){const d=this._subject;return(!d||d.isStopped)&&(this._subject=this.subjectFactory()),this._subject}connect(){let d=this._connection;return d||(this._isComplete=!1,d=this._connection=new $.w,d.add(this.source.subscribe(new ie(this.getSubject(),this))),d.closed&&(this._connection=null,d=$.w.EMPTY)),d}refCount(){return ae()(this)}}const te=(()=>{const l=ee.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:l._subscribe},_isComplete:{value:l._isComplete,writable:!0},getSubject:{value:l.getSubject},connect:{value:l.connect},refCount:{value:l.refCount}}})();class ie extends F.Yc{constructor(d,h){super(d),this.connectable=h}_error(d){this._unsubscribe(),super._error(d)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const d=this.connectable;if(d){this.connectable=null;const h=d._connection;d._refCount=0,d._subject=null,d._connection=null,h&&h.unsubscribe()}}}class _e{constructor(d,h){this.subjectFactory=d,this.selector=h}call(d,h){const{selector:f}=this,v=this.subjectFactory(),S=f(v).subscribe(d);return S.add(h.subscribe(v)),S}}function he(){return new F.xQ}function We(l){for(let d in l)if(l[d]===We)return d;throw Error("Could not find renamed property on target object.")}function Oe(l,d){for(const h in d)d.hasOwnProperty(h)&&!l.hasOwnProperty(h)&&(l[h]=d[h])}function C(l){if("string"==typeof l)return l;if(Array.isArray(l))return"["+l.map(C).join(", ")+"]";if(null==l)return""+l;if(l.overriddenName)return`${l.overriddenName}`;if(l.name)return`${l.name}`;const d=l.toString();if(null==d)return""+d;const h=d.indexOf("\n");return-1===h?d:d.substring(0,h)}function oi(l,d){return null==l||""===l?null===d?"":d:null==d||""===d?l:l+" "+d}const ki=We({__forward_ref__:We});function Ut(l){return l.__forward_ref__=Ut,l.toString=function(){return C(this())},l}function ut(l){return _i(l)?l():l}function _i(l){return"function"==typeof l&&l.hasOwnProperty(ki)&&l.__forward_ref__===Ut}class je extends Error{constructor(d,h){super(function Et(l,d){return`NG0${Math.abs(l)}${d?": "+d.trim():""}`}(d,h)),this.code=d}}function Ye(l){return"string"==typeof l?l:null==l?"":String(l)}function dl(l,d){throw new je(-201,!1)}function ii(l,d,h,f){throw new Error(`ASSERTION ERROR: ${l}`+(null==f?"":` [Expected=> ${h} ${f} ${d} <=Actual]`))}function An(l){return{token:l.token,providedIn:l.providedIn||null,factory:l.factory,value:void 0}}function hl(l){return{providers:l.providers||[],imports:l.imports||[]}}function ih(l){return Yp(l,xe)||Yp(l,le)}function Yp(l,d){return l.hasOwnProperty(d)?l[d]:null}function nh(l){return l&&(l.hasOwnProperty(oe)||l.hasOwnProperty(Ze))?l[oe]:null}const xe=We({\u0275prov:We}),oe=We({\u0275inj:We}),le=We({ngInjectableDef:We}),Ze=We({ngInjectorDef:We});var Te=(()=>((Te=Te||{})[Te.Default=0]="Default",Te[Te.Host=1]="Host",Te[Te.Self=2]="Self",Te[Te.SkipSelf=4]="SkipSelf",Te[Te.Optional=8]="Optional",Te))();let ft;function It(l){const d=ft;return ft=l,d}function qt(l,d,h){const f=ih(l);return f&&"root"==f.providedIn?void 0===f.value?f.value=f.factory():f.value:h&Te.Optional?null:void 0!==d?d:void dl(C(l))}function Rs(l){return{toString:l}.toString()}var xt=(()=>((xt=xt||{})[xt.OnPush=0]="OnPush",xt[xt.Default=1]="Default",xt))(),vi=(()=>{return(l=vi||(vi={}))[l.Emulated=0]="Emulated",l[l.None=2]="None",l[l.ShadowDom=3]="ShadowDom",vi;var l})();const wi=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Lr={},ei=[],pc=We({\u0275cmp:We}),My=We({\u0275dir:We}),sh=We({\u0275pipe:We}),Ca=We({\u0275mod:We}),ya=We({\u0275fac:We}),rh=We({__NG_ELEMENT_ID__:We});let Am=0;function oh(l){return Rs(()=>{const h=!0===l.standalone,f={},v={type:l.type,providersResolver:null,decls:l.decls,vars:l.vars,factory:null,template:l.template||null,consts:l.consts||null,ngContentSelectors:l.ngContentSelectors,hostBindings:l.hostBindings||null,hostVars:l.hostVars||0,hostAttrs:l.hostAttrs||null,contentQueries:l.contentQueries||null,declaredInputs:f,inputs:null,outputs:null,exportAs:l.exportAs||null,onPush:l.changeDetection===xt.OnPush,directiveDefs:null,pipeDefs:null,standalone:h,dependencies:h&&l.dependencies||null,getStandaloneInjector:null,selectors:l.selectors||ei,viewQuery:l.viewQuery||null,features:l.features||null,data:l.data||{},encapsulation:l.encapsulation||vi.Emulated,id:"c"+Am++,styles:l.styles||ei,_:null,setInput:null,schemas:l.schemas||null,tView:null},S=l.dependencies,w=l.features;return v.inputs=dw(l.inputs,f),v.outputs=dw(l.outputs),w&&w.forEach(T=>T(v)),v.directiveDefs=S?()=>("function"==typeof S?S():S).map(xy).filter(qp):null,v.pipeDefs=S?()=>("function"==typeof S?S():S).map(qs).filter(qp):null,v})}function xy(l){return Ai(l)||qn(l)}function qp(l){return null!==l}function fc(l){return Rs(()=>({type:l.type,bootstrap:l.bootstrap||ei,declarations:l.declarations||ei,imports:l.imports||ei,exports:l.exports||ei,transitiveCompileScopes:null,schemas:l.schemas||null,id:l.id||null}))}function dw(l,d){if(null==l)return Lr;const h={};for(const f in l)if(l.hasOwnProperty(f)){let v=l[f],S=v;Array.isArray(v)&&(S=v[1],v=v[0]),h[v]=f,d&&(d[v]=S)}return h}const Om=oh;function Py(l){return{type:l.type,name:l.name,factory:null,pure:!1!==l.pure,standalone:!0===l.standalone,onDestroy:l.type.prototype.ngOnDestroy||null}}function Ai(l){return l[pc]||null}function qn(l){return l[My]||null}function qs(l){return l[sh]||null}function Os(l){return Array.isArray(l)&&"object"==typeof l[1]}function Br(l){return Array.isArray(l)&&!0===l[1]}function tf(l){return 0!=(8&l.flags)}function ch(l){return 2==(2&l.flags)}function dh(l){return 1==(1&l.flags)}function Hr(l){return null!==l.template}function nf(l){return 0!=(256&l[2])}function _d(l,d){return l.hasOwnProperty(ya)?l[ya]:null}class xm{constructor(d,h,f){this.previousValue=d,this.currentValue=h,this.firstChange=f}isFirstChange(){return this.firstChange}}function By(){return Pm}function Pm(l){return l.type.prototype.ngOnChanges&&(l.setInput=tR),Im}function Im(){const l=bw(this),d=l?.current;if(d){const h=l.previous;if(h===Lr)l.previous=d;else for(let f in d)h[f]=d[f];l.current=null,this.ngOnChanges(d)}}function tR(l,d,h,f){const v=bw(l)||function _w(l,d){return l[Fm]=d}(l,{previous:Lr,current:null}),S=v.current||(v.current={}),w=v.previous,T=this.declaredInputs[h],M=w[T];S[T]=new xm(M&&M.currentValue,d,w===Lr),l[f]=d}By.ngInherit=!0;const Fm="__ngSimpleChanges__";function bw(l){return l[Fm]||null}function hn(l){for(;Array.isArray(l);)l=l[0];return l}function wa(l,d){return hn(d[l])}function Zn(l,d){return hn(d[l.index])}function vc(l,d){return l.data[d]}function Ms(l,d){const h=d[l];return Os(h)?h:h[0]}function wd(l){return 64==(64&l[2])}function po(l,d){return null==d?null:l[d]}function Nm(l){l[18]=0}function af(l,d){l[5]+=d;let h=l,f=l[3];for(;null!==f&&(1===d&&1===h[5]||-1===d&&0===h[5]);)f[5]+=d,h=f,f=f[3]}const Rt={lFrame:lR(null),bindingsEnabled:!0};function lf(){return Rt.bindingsEnabled}function Ve(){return Rt.lFrame.lView}function li(){return Rt.lFrame.tView}function km(l){return Rt.lFrame.contextLView=l,l[8]}function cf(l){return Rt.lFrame.contextLView=null,l}function Mn(){let l=Ow();for(;null!==l&&64===l.type;)l=l.parent;return l}function Ow(){return Rt.lFrame.currentTNode}function Ed(){const l=Rt.lFrame,d=l.currentTNode;return l.isParent?d:d.parent}function Ea(l,d){const h=Rt.lFrame;h.currentTNode=l,h.isParent=d}function Gm(){return Rt.lFrame.isParent}function jy(){Rt.lFrame.isParent=!1}function on(){const l=Rt.lFrame;let d=l.bindingRootIndex;return-1===d&&(d=l.bindingRootIndex=l.tView.bindingStartIndex),d}function Da(){return Rt.lFrame.bindingIndex++}function Fo(l){const d=Rt.lFrame,h=d.bindingIndex;return d.bindingIndex=d.bindingIndex+l,h}function Pw(l){Rt.lFrame.inI18n=l}function ph(l,d){const h=Rt.lFrame;h.bindingIndex=h.bindingRootIndex=l,Bm(d)}function Bm(l){Rt.lFrame.currentDirectiveIndex=l}function $y(){return Rt.lFrame.currentQueryIndex}function Iw(l){Rt.lFrame.currentQueryIndex=l}function oR(l){const d=l[1];return 2===d.type?d.declTNode:1===d.type?l[6]:null}function Ky(l,d,h){if(h&Te.SkipSelf){let v=d,S=l;for(;!(v=v.parent,null!==v||h&Te.Host||(v=oR(S),null===v||(S=S[15],10&v.type))););if(null===v)return!1;d=v,l=S}const f=Rt.lFrame=aR();return f.currentTNode=d,f.lView=l,!0}function Fw(l){const d=aR(),h=l[1];Rt.lFrame=d,d.currentTNode=h.firstChild,d.lView=l,d.tView=h,d.contextLView=l,d.bindingIndex=h.bindingStartIndex,d.inI18n=!1}function aR(){const l=Rt.lFrame,d=null===l?null:l.child;return null===d?lR(l):d}function lR(l){const d={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:l,child:null,inI18n:!1};return null!==l&&(l.child=d),d}function cR(){const l=Rt.lFrame;return Rt.lFrame=l.parent,l.currentTNode=null,l.lView=null,l}const Yy=cR;function Um(){const l=cR();l.isParent=!0,l.tView=null,l.selectedIndex=-1,l.contextLView=null,l.elementDepthCount=0,l.currentDirectiveIndex=-1,l.currentNamespace=null,l.bindingRootIndex=-1,l.bindingIndex=-1,l.currentQueryIndex=0}function Jn(){return Rt.lFrame.selectedIndex}function Cc(l){Rt.lFrame.selectedIndex=l}function tn(){const l=Rt.lFrame;return vc(l.tView,l.selectedIndex)}function Wm(l,d){for(let h=d.directiveStart,f=d.directiveEnd;h<f;h++){const S=l.data[h].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:T,ngAfterViewInit:M,ngAfterViewChecked:V,ngOnDestroy:W}=S;w&&(l.contentHooks||(l.contentHooks=[])).push(-h,w),T&&((l.contentHooks||(l.contentHooks=[])).push(h,T),(l.contentCheckHooks||(l.contentCheckHooks=[])).push(h,T)),M&&(l.viewHooks||(l.viewHooks=[])).push(-h,M),V&&((l.viewHooks||(l.viewHooks=[])).push(h,V),(l.viewCheckHooks||(l.viewCheckHooks=[])).push(h,V)),null!=W&&(l.destroyHooks||(l.destroyHooks=[])).push(h,W)}}function x(l,d,h){Y(l,d,3,h)}function B(l,d,h,f){(3&l[2])===h&&Y(l,d,h,f)}function N(l,d){let h=l[2];(3&h)===d&&(h&=2047,h+=1,l[2]=h)}function Y(l,d,h,f){const S=f??-1,w=d.length-1;let T=0;for(let M=void 0!==f?65535&l[18]:0;M<w;M++)if("number"==typeof d[M+1]){if(T=d[M],null!=f&&T>=f)break}else d[M]<0&&(l[18]+=65536),(T<S||-1==S)&&(ue(l,h,d,M),l[18]=(4294901760&l[18])+M+2),M++}function ue(l,d,h,f){const v=h[f]<0,S=h[f+1],T=l[v?-h[f]:h[f]];if(v){if(l[2]>>11<l[18]>>16&&(3&l[2])===d){l[2]+=2048;try{S.call(T)}finally{}}}else try{S.call(T)}finally{}}class Ge{constructor(d,h,f){this.factory=d,this.resolving=!1,this.canSeeViewProviders=h,this.injectImpl=f}}function No(l,d,h){let f=0;for(;f<h.length;){const v=h[f];if("number"==typeof v){if(0!==v)break;f++;const S=h[f++],w=h[f++],T=h[f++];l.setAttribute(d,w,T,S)}else{const S=v,w=h[++f];vl(S)?l.setProperty(d,S,w):l.setAttribute(d,S,w),f++}}return f}function pr(l){return 3===l||4===l||6===l}function vl(l){return 64===l.charCodeAt(0)}function fo(l,d){if(null!==d&&0!==d.length)if(null===l||0===l.length)l=d.slice();else{let h=-1;for(let f=0;f<d.length;f++){const v=d[f];"number"==typeof v?h=v:0===h||Dd(l,h,v,null,-1===h||2===h?d[++f]:null)}}return l}function Dd(l,d,h,f,v){let S=0,w=l.length;if(-1===d)w=-1;else for(;S<l.length;){const T=l[S++];if("number"==typeof T){if(T===d){w=-1;break}if(T>d){w=S-1;break}}}for(;S<l.length;){const T=l[S];if("number"==typeof T)break;if(T===h){if(null===f)return void(null!==v&&(l[S+1]=v));if(f===l[S+1])return void(l[S+2]=v)}S++,null!==f&&S++,null!==v&&S++}-1!==w&&(l.splice(w,0,d),S=w+1),l.splice(S++,0,h),null!==f&&l.splice(S++,0,f),null!==v&&l.splice(S++,0,v)}function uf(l){return-1!==l}function Td(l){return 32767&l}function hf(l,d){let h=function Vw(l){return l>>16}(l),f=d;for(;h>0;)f=f[15],h--;return f}let Xy=!0;function jm(l){const d=Xy;return Xy=l,d}let Rx=0;const Ta={};function zm(l,d){const h=Zy(l,d);if(-1!==h)return h;const f=d[1];f.firstCreatePass&&(l.injectorIndex=d.length,$m(f.data,l),$m(d,null),$m(f.blueprint,null));const v=Jy(l,d),S=l.injectorIndex;if(uf(v)){const w=Td(v),T=hf(v,d),M=T[1].data;for(let V=0;V<8;V++)d[S+V]=T[w+V]|M[w+V]}return d[S+8]=v,S}function $m(l,d){l.push(0,0,0,0,0,0,0,0,d)}function Zy(l,d){return-1===l.injectorIndex||l.parent&&l.parent.injectorIndex===l.injectorIndex||null===d[l.injectorIndex+8]?-1:l.injectorIndex}function Jy(l,d){if(l.parent&&-1!==l.parent.injectorIndex)return l.parent.injectorIndex;let h=0,f=null,v=d;for(;null!==v;){if(f=Px(v),null===f)return-1;if(h++,v=v[15],-1!==f.injectorIndex)return f.injectorIndex|h<<16}return-1}function Km(l,d,h){!function Ax(l,d,h){let f;"string"==typeof h?f=h.charCodeAt(0)||0:h.hasOwnProperty(rh)&&(f=h[rh]),null==f&&(f=h[rh]=Rx++);const v=255&f;d.data[l+(v>>5)]|=1<<v}(l,d,h)}function Hw(l,d,h){if(h&Te.Optional||void 0!==l)return l;dl()}function pR(l,d,h,f){if(h&Te.Optional&&void 0===f&&(f=null),0==(h&(Te.Self|Te.Host))){const v=l[9],S=It(void 0);try{return v?v.get(d,f,h&Te.Optional):qt(d,f,h&Te.Optional)}finally{It(S)}}return Hw(f,0,h)}function Uw(l,d,h,f=Te.Default,v){if(null!==l){if(1024&d[2]){const w=function e1(l,d,h,f,v){let S=l,w=d;for(;null!==S&&null!==w&&1024&w[2]&&!(256&w[2]);){const T=fR(S,w,h,f|Te.Self,Ta);if(T!==Ta)return T;let M=S.parent;if(!M){const V=w[21];if(V){const W=V.get(h,Ta,f);if(W!==Ta)return W}M=Px(w),w=w[15]}S=M}return v}(l,d,h,f,Ta);if(w!==Ta)return w}const S=fR(l,d,h,f,Ta);if(S!==Ta)return S}return pR(d,h,f,v)}function fR(l,d,h,f,v){const S=function QL(l){if("string"==typeof l)return l.charCodeAt(0)||0;const d=l.hasOwnProperty(rh)?l[rh]:void 0;return"number"==typeof d?d>=0?255&d:Mx:d}(h);if("function"==typeof S){if(!Ky(d,l,f))return f&Te.Host?Hw(v,0,f):pR(d,h,f,v);try{const w=S(f);if(null!=w||f&Te.Optional)return w;dl()}finally{Yy()}}else if("number"==typeof S){let w=null,T=Zy(l,d),M=-1,V=f&Te.Host?d[16][6]:null;for((-1===T||f&Te.SkipSelf)&&(M=-1===T?Jy(l,d):d[T+8],-1!==M&&jw(f,!1)?(w=d[1],T=Td(M),d=hf(M,d)):T=-1);-1!==T;){const W=d[1];if(mR(S,T,W.data)){const Q=gR(T,d,h,w,f,V);if(Q!==Ta)return Q}M=d[T+8],-1!==M&&jw(f,d[1].data[T+8]===V)&&mR(S,T,d)?(w=W,T=Td(M),d=hf(M,d)):T=-1}}return v}function gR(l,d,h,f,v,S){const w=d[1],T=w.data[l+8],W=Ww(T,w,h,null==f?ch(T)&&Xy:f!=w&&0!=(3&T.type),v&Te.Host&&S===T);return null!==W?Qy(d,w,W,T):Ta}function Ww(l,d,h,f,v){const S=l.providerIndexes,w=d.data,T=1048575&S,M=l.directiveStart,W=S>>20,de=v?T+W:l.directiveEnd;for(let we=f?T:T+W;we<de;we++){const Fe=w[we];if(we<M&&h===Fe||we>=M&&Fe.type===h)return we}if(v){const we=w[M];if(we&&Hr(we)&&we.type===h)return M}return null}function Qy(l,d,h,f){let v=l[h];const S=d.data;if(function lt(l){return l instanceof Ge}(v)){const w=v;w.resolving&&function pt(l,d){const h=d?`. Dependency path: ${d.join(" > ")} > ${l}`:"";throw new je(-200,`Circular dependency in DI detected for ${l}${h}`)}(function ct(l){return"function"==typeof l?l.name||l.toString():"object"==typeof l&&null!=l&&"function"==typeof l.type?l.type.name||l.type.toString():Ye(l)}(S[h]));const T=jm(w.canSeeViewProviders);w.resolving=!0;const M=w.injectImpl?It(w.injectImpl):null;Ky(l,f,Te.Default);try{v=l[h]=w.factory(void 0,S,l,f),d.firstCreatePass&&h>=f.directiveStart&&function Gw(l,d,h){const{ngOnChanges:f,ngOnInit:v,ngDoCheck:S}=d.type.prototype;if(f){const w=Pm(d);(h.preOrderHooks||(h.preOrderHooks=[])).push(l,w),(h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(l,w)}v&&(h.preOrderHooks||(h.preOrderHooks=[])).push(0-l,v),S&&((h.preOrderHooks||(h.preOrderHooks=[])).push(l,S),(h.preOrderCheckHooks||(h.preOrderCheckHooks=[])).push(l,S))}(h,S[h],d)}finally{null!==M&&It(M),jm(T),w.resolving=!1,Yy()}}return v}function mR(l,d,h){return!!(h[d+(l>>5)]&1<<l)}function jw(l,d){return!(l&Te.Self||l&Te.Host&&d)}class Ym{constructor(d,h){this._tNode=d,this._lView=h}get(d,h,f){return Uw(this._tNode,this._lView,d,f,h)}}function Mx(){return new Ym(Mn(),Ve())}function xx(l){return Rs(()=>{const d=l.prototype.constructor,h=d[ya]||vR(d),f=Object.prototype;let v=Object.getPrototypeOf(l.prototype).constructor;for(;v&&v!==f;){const S=v[ya]||vR(v);if(S&&S!==h)return S;v=Object.getPrototypeOf(v)}return S=>new S})}function vR(l){return _i(l)?()=>{const d=vR(ut(l));return d&&d()}:_d(l)}function Px(l){const d=l[1],h=d.type;return 2===h?d.declTNode:1===h?l[6]:null}function CR(l){return function Ox(l,d){if("class"===d)return l.classes;if("style"===d)return l.styles;const h=l.attrs;if(h){const f=h.length;let v=0;for(;v<f;){const S=h[v];if(pr(S))break;if(0===S)v+=2;else if("number"==typeof S)for(v++;v<f&&"string"==typeof h[v];)v++;else{if(S===d)return h[v+1];v+=2}}}return null}(Mn(),l)}const Xm="__parameters__";function us(l,d,h){return Rs(()=>{const f=function gt(l){return function(...h){if(l){const f=l(...h);for(const v in f)this[v]=f[v]}}}(d);function v(...S){if(this instanceof v)return f.apply(this,S),this;const w=new v(...S);return T.annotation=w,T;function T(M,V,W){const Q=M.hasOwnProperty(Xm)?M[Xm]:Object.defineProperty(M,Xm,{value:[]})[Xm];for(;Q.length<=W;)Q.push(null);return(Q[W]=Q[W]||[]).push(w),M}}return h&&(v.prototype=Object.create(h.prototype)),v.prototype.ngMetadataName=l,v.annotationCls=v,v})}class Mi{constructor(d,h){this._desc=d,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof h?this.__NG_ELEMENT_ID__=h:void 0!==h&&(this.\u0275prov=An({token:this,providedIn:h.providedIn||"root",factory:h.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function st(l,d){void 0===d&&(d=l);for(let h=0;h<l.length;h++){let f=l[h];Array.isArray(f)?(d===l&&(d=l.slice(0,h)),st(f,d)):d!==l&&d.push(f)}return d}function hs(l,d){l.forEach(h=>Array.isArray(h)?hs(h,d):d(h))}function Zm(l,d,h){d>=l.length?l.push(h):l.splice(d,0,h)}function mh(l,d){return d>=l.length-1?l.pop():l.splice(d,1)[0]}function gf(l,d){const h=[];for(let f=0;f<l;f++)h.push(d);return h}function mr(l,d,h){let f=mf(l,d);return f>=0?l[1|f]=h:(f=~f,function $w(l,d,h,f){let v=l.length;if(v==d)l.push(h,f);else if(1===v)l.push(f,l[0]),l[0]=h;else{for(v--,l.push(l[v-1],l[v]);v>d;)l[v]=l[v-2],v--;l[d]=h,l[d+1]=f}}(l,f,d,h)),f}function Kw(l,d){const h=mf(l,d);if(h>=0)return l[1|h]}function mf(l,d){return function yt(l,d,h){let f=0,v=l.length>>h;for(;v!==f;){const S=f+(v-f>>1),w=l[S<<h];if(d===w)return S<<h;w>d?v=S:f=S+1}return~(v<<h)}(l,d,1)}const Ra={},sS="__NG_DI_FLAG__",vh="ngTempTokenPath",Yw=/\n/gm,bR="__source";let ev;function Ch(l){const d=ev;return ev=l,d}function ot(l,d=Te.Default){if(void 0===ev)throw new je(-203,!1);return null===ev?qt(l,void 0,d):ev.get(l,d&Te.Optional?null:void 0,d)}function xn(l,d=Te.Default){return(function mi(){return ft}()||ot)(ut(l),d)}function qw(l){const d=[];for(let h=0;h<l.length;h++){const f=ut(l[h]);if(Array.isArray(f)){if(0===f.length)throw new je(900,!1);let v,S=Te.Default;for(let w=0;w<f.length;w++){const T=f[w],M=yc(T);"number"==typeof M?-1===M?v=T.token:S|=M:v=T}d.push(xn(v,S))}else d.push(xn(f))}return d}function Xt(l,d){return l[sS]=d,l.prototype[sS]=d,l}function yc(l){return l[sS]}const Cf=Xt(us("Optional"),8),tv=Xt(us("SkipSelf"),4);var Sl=(()=>((Sl=Sl||{})[Sl.Important=1]="Important",Sl[Sl.DashCase=2]="DashCase",Sl))();const xs=/^>|^->|<!--|-->|--!>|<!-$/g,Bx=/(<|>)/;const xd=new Map;let Ux=0;const av="__ngContext__";function ji(l,d){Os(d)?(l[av]=d[20],function Wx(l){xd.set(l[20],l)}(d)):l[av]=d}let lv;function pS(l,d){return lv(l,d)}function Pd(l){const d=l[3];return Br(d)?d[3]:d}function fS(l){return gS(l[13])}function cv(l){return gS(l[4])}function gS(l){for(;null!==l&&!Br(l);)l=l[4];return l}function yh(l,d,h,f,v){if(null!=f){let S,w=!1;Br(f)?S=f:Os(f)&&(w=!0,f=f[0]);const T=hn(f);0===l&&null!==h?null==v?bS(d,h,T):er(d,h,T,v||null,!0):1===l&&null!==h?er(d,h,T,v||null,!0):2===l?CE(d,T,w):3===l&&d.destroyNode(T),null!=S&&function Bo(l,d,h,f,v){const S=h[7];S!==hn(h)&&yh(d,l,f,S,v);for(let T=10;T<h.length;T++){const M=h[T];gv(M[1],M,l,d,f,S)}}(d,l,S,h,v)}}function dv(l,d){return l.createText(d)}function aE(l,d,h){l.setValue(d,h)}function lE(l,d){return l.createComment(function Pn(l){return l.replace(xs,d=>d.replace(Bx,"\u200b$1\u200b"))}(d))}function mS(l,d,h){return l.createElement(d,h)}function vS(l,d){const h=l[9],f=h.indexOf(d),v=d[3];512&d[2]&&(d[2]&=-513,af(v,-1)),h.splice(f,1)}function Df(l,d){if(l.length<=10)return;const h=10+d,f=l[h];if(f){const v=f[17];null!==v&&v!==l&&vS(v,f),d>0&&(l[h-1][4]=f[4]);const S=mh(l,10+d);!function PR(l,d){gv(l,d,d[11],2,null,null),d[0]=null,d[6]=null}(f[1],f);const w=S[19];null!==w&&w.detachView(S[1]),f[3]=null,f[4]=null,f[2]&=-65}return f}function CS(l,d){if(!(128&d[2])){const h=d[11];h.destroyNode&&gv(l,d,h,3,null,null),function Yx(l){let d=l[13];if(!d)return uv(l[1],l);for(;d;){let h=null;if(Os(d))h=d[13];else{const f=d[10];f&&(h=f)}if(!h){for(;d&&!d[4]&&d!==l;)Os(d)&&uv(d[1],d),d=d[3];null===d&&(d=l),Os(d)&&uv(d[1],d),h=d&&d[4]}d=h}}(d)}}function uv(l,d){if(!(128&d[2])){d[2]&=-65,d[2]|=128,function hE(l,d){let h;if(null!=l&&null!=(h=l.destroyHooks))for(let f=0;f<h.length;f+=2){const v=d[h[f]];if(!(v instanceof Ge)){const S=h[f+1];if(Array.isArray(S))for(let w=0;w<S.length;w+=2){const T=v[S[w]],M=S[w+1];try{M.call(T)}finally{}}else try{S.call(v)}finally{}}}}(l,d),function uE(l,d){const h=l.cleanup,f=d[7];let v=-1;if(null!==h)for(let S=0;S<h.length-1;S+=2)if("string"==typeof h[S]){const w=h[S+1],T="function"==typeof w?w(d):hn(d[w]),M=f[v=h[S+2]],V=h[S+3];"boolean"==typeof V?T.removeEventListener(h[S],M,V):V>=0?f[v=V]():f[v=-V].unsubscribe(),S+=2}else{const w=f[v=h[S+1]];h[S].call(w)}if(null!==f){for(let S=v+1;S<f.length;S++)(0,f[S])();d[7]=null}}(l,d),1===d[1].type&&d[11].destroy();const h=d[17];if(null!==h&&Br(d[3])){h!==d[3]&&vS(h,d);const f=d[19];null!==f&&f.detachView(l)}!function jx(l){xd.delete(l[20])}(d)}}function yS(l,d,h){return SS(l,d.parent,h)}function SS(l,d,h){let f=d;for(;null!==f&&40&f.type;)f=(d=f).parent;if(null===f)return h[0];if(2&f.flags){const v=l.data[f.directiveStart].encapsulation;if(v===vi.None||v===vi.Emulated)return null}return Zn(f,h)}function er(l,d,h,f,v){l.insertBefore(d,h,f,v)}function bS(l,d,h){l.appendChild(d,h)}function hv(l,d,h,f,v){null!==f?er(l,d,h,f,v):bS(l,d,h)}function Vo(l,d){return l.parentNode(d)}function pv(l,d,h){return mE(l,d,h)}function gE(l,d,h){return 40&l.type?Zn(l,h):null}let _S,_h,Fd,mE=gE;function vE(l,d){mE=l,_S=d}function fv(l,d,h,f){const v=yS(l,f,d),S=d[11],T=pv(f.parent||d[6],f,d);if(null!=v)if(Array.isArray(h))for(let M=0;M<h.length;M++)hv(S,v,h[M],T,!1);else hv(S,v,h,T,!1);void 0!==_S&&_S(S,f,d,h,v)}function Tf(l,d){if(null!==d){const h=d.type;if(3&h)return Zn(d,l);if(4&h)return wS(-1,l[d.index]);if(8&h){const f=d.child;if(null!==f)return Tf(l,f);{const v=l[d.index];return Br(v)?wS(-1,v):hn(v)}}if(32&h)return pS(d,l)()||hn(l[d.index]);{const f=Sh(l,d);return null!==f?Array.isArray(f)?f[0]:Tf(Pd(l[16]),f):Tf(l,d.next)}}return null}function Sh(l,d){return null!==d?l[16][6].projection[d.projection]:null}function wS(l,d){const h=10+l+1;if(h<d.length){const f=d[h],v=f[1].firstChild;if(null!==v)return Tf(f,v)}return d[7]}function CE(l,d,h){const f=Vo(l,d);f&&function pE(l,d,h,f){l.removeChild(d,h,f)}(l,f,d,h)}function yE(l,d,h,f,v,S,w){for(;null!=h;){const T=f[h.index],M=h.type;if(w&&0===d&&(T&&ji(hn(T),f),h.flags|=4),64!=(64&h.flags))if(8&M)yE(l,d,h.child,f,v,S,!1),yh(d,l,v,T,S);else if(32&M){const V=pS(h,f);let W;for(;W=V();)yh(d,l,v,W,S);yh(d,l,v,T,S)}else 16&M?NR(l,d,f,h,v,S):yh(d,l,v,T,S);h=w?h.projectionNext:h.next}}function gv(l,d,h,f,v,S){yE(h,f,l.firstChild,d,v,S,!1)}function NR(l,d,h,f,v,S){const w=h[16],M=w[6].projection[f.projection];if(Array.isArray(M))for(let V=0;V<M.length;V++)yh(d,l,v,M[V],S);else yE(l,d,M,w[3],v,S,!0)}function bh(l,d,h){l.setAttribute(d,"style",h)}function tr(l,d,h){""===h?l.removeAttribute(d,"class"):l.setAttribute(d,"class",h)}function Id(l){return function mv(){if(void 0===_h&&(_h=null,wi.trustedTypes))try{_h=wi.trustedTypes.createPolicy("angular",{createHTML:l=>l,createScript:l=>l,createScriptURL:l=>l})}catch{}return _h}()?.createHTML(l)||l}function wh(l){Fd=l}class Af{constructor(d){this.changingThisBreaksApplicationSecurity=d}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function Fn(l){return l instanceof Af?l.changingThisBreaksApplicationSecurity:l}class Ho{constructor(d){this.inertDocumentHelper=d}getInertBodyElement(d){d="<body><remove></remove>"+d;try{const h=(new window.DOMParser).parseFromString(Id(d),"text/html").body;return null===h?this.inertDocumentHelper.getInertBodyElement(d):(h.removeChild(h.firstChild),h)}catch{return null}}}class Jx{constructor(d){if(this.defaultDoc=d,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const h=this.inertDocument.createElement("html");this.inertDocument.appendChild(h);const f=this.inertDocument.createElement("body");h.appendChild(f)}}getInertBodyElement(d){const h=this.inertDocument.createElement("template");if("content"in h)return h.innerHTML=Id(d),h;const f=this.inertDocument.createElement("body");return f.innerHTML=Id(d),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(f),f}stripCustomNsAttrs(d){const h=d.attributes;for(let v=h.length-1;0<v;v--){const w=h.item(v).name;("xmlns:ns1"===w||0===w.indexOf("ns1:"))&&d.removeAttribute(w)}let f=d.firstChild;for(;f;)f.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(f),f=f.nextSibling}}const TS=/^(?:(?:https?|mailto|data|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi;function Dh(l){return(l=String(l)).match(TS)?l:"unsafe:"+l}function _l(l){const d={};for(const h of l.split(","))d[h]=!0;return d}function Mf(...l){const d={};for(const h of l)for(const f in h)h.hasOwnProperty(f)&&(d[f]=!0);return d}const Oa=_l("area,br,col,hr,img,wbr"),RS=_l("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),AS=_l("rp,rt"),MS=Mf(Oa,Mf(RS,_l("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Mf(AS,_l("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Mf(AS,RS)),Ur=_l("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),VR=Mf(Ur,_l("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),_l("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var Sn=(()=>((Sn=Sn||{})[Sn.NONE=0]="NONE",Sn[Sn.HTML=1]="HTML",Sn[Sn.STYLE=2]="STYLE",Sn[Sn.SCRIPT=3]="SCRIPT",Sn[Sn.URL=4]="URL",Sn[Sn.RESOURCE_URL=5]="RESOURCE_URL",Sn))();function yv(l){const d=function Is(){const l=Ve();return l&&l[12]}();return d?d.sanitize(Sn.URL,l)||"":function ps(l,d){const h=function DE(l){return l instanceof Af&&l.getTypeName()||null}(l);if(null!=h&&h!==d){if("ResourceURL"===h&&"URL"===d)return!0;throw new Error(`Required a safe ${d}, got a ${h} (see https://g.co/ng/security#xss)`)}return h===d}(l,"URL")?Fn(l):Dh(Ye(l))}const UR=new Mi("ENVIRONMENT_INITIALIZER"),IS=new Mi("INJECTOR",-1),WR=new Mi("INJECTOR_DEF_TYPES");class Ne{get(d,h=Ra){if(h===Ra){const f=new Error(`NullInjectorError: No provider for ${C(d)}!`);throw f.name="NullInjectorError",f}return h}}function u1(...l){return{\u0275providers:re(0,l)}}function re(l,...d){const h=[],f=new Set;let v;return hs(d,S=>{const w=S;ME(w,h,[],f)&&(v||(v=[]),v.push(w))}),void 0!==v&&OE(v,h),h}function OE(l,d){for(let h=0;h<l.length;h++){const{providers:v}=l[h];hs(v,S=>{d.push(S)})}}function ME(l,d,h,f){if(!(l=ut(l)))return!1;let v=null,S=nh(l);const w=!S&&Ai(l);if(S||w){if(w&&!w.standalone)return!1;v=l}else{const M=l.ngModule;if(S=nh(M),!S)return!1;v=M}const T=f.has(v);if(w){if(T)return!1;if(f.add(v),w.dependencies){const M="function"==typeof w.dependencies?w.dependencies():w.dependencies;for(const V of M)ME(V,d,h,f)}}else{if(!S)return!1;{if(null!=S.imports&&!T){let V;f.add(v);try{hs(S.imports,W=>{ME(W,d,h,f)&&(V||(V=[]),V.push(W))})}finally{}void 0!==V&&OE(V,d)}if(!T){const V=_d(v)||(()=>new v);d.push({provide:v,useFactory:V,deps:ei},{provide:WR,useValue:v,multi:!0},{provide:UR,useValue:()=>xn(v),multi:!0})}const M=S.providers;null==M||T||hs(M,W=>{d.push(W)})}}return v!==l&&void 0!==l.providers}const jR=We({provide:String,useValue:We});function Sv(l){return null!==l&&"object"==typeof l&&jR in l}function Ld(l){return"function"==typeof l}const ir=new Mi("Set Injector scope."),xf={},$R={};let IE;function El(){return void 0===IE&&(IE=new Ne),IE}class kd{}class Wr extends kd{constructor(d,h,f,v){super(),this.parent=h,this.source=f,this.scopes=v,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,bv(d,w=>this.processProvider(w)),this.records.set(IS,If(void 0,this)),v.has("environment")&&this.records.set(kd,If(void 0,this));const S=this.records.get(ir);null!=S&&"string"==typeof S.value&&this.scopes.add(S.value),this.injectorDefTypes=new Set(this.get(WR.multi,ei,Te.Self))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const d of this._ngOnDestroyHooks)d.ngOnDestroy();for(const d of this._onDestroyHooks)d()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(d){this._onDestroyHooks.push(d)}runInContext(d){this.assertNotDestroyed();const h=Ch(this),f=It(void 0);try{return d()}finally{Ch(h),It(f)}}get(d,h=Ra,f=Te.Default){this.assertNotDestroyed();const v=Ch(this),S=It(void 0);try{if(!(f&Te.SkipSelf)){let T=this.records.get(d);if(void 0===T){const M=function Dc(l){return"function"==typeof l||"object"==typeof l&&l instanceof Mi}(d)&&ih(d);T=M&&this.injectableDefInScope(M)?If(FE(d),xf):null,this.records.set(d,T)}if(null!=T)return this.hydrate(d,T)}return(f&Te.Self?El():this.parent).get(d,h=f&Te.Optional&&h===Ra?null:h)}catch(w){if("NullInjectorError"===w.name){if((w[vh]=w[vh]||[]).unshift(C(d)),v)throw w;return function kx(l,d,h,f){const v=l[vh];throw d[bR]&&v.unshift(d[bR]),l.message=function _R(l,d,h,f=null){l=l&&"\n"===l.charAt(0)&&"\u0275"==l.charAt(1)?l.slice(2):l;let v=C(d);if(Array.isArray(d))v=d.map(C).join(" -> ");else if("object"==typeof d){let S=[];for(let w in d)if(d.hasOwnProperty(w)){let T=d[w];S.push(w+":"+("string"==typeof T?JSON.stringify(T):C(T)))}v=`{${S.join(", ")}}`}return`${h}${f?"("+f+")":""}[${v}]: ${l.replace(Yw,"\n  ")}`}("\n"+l.message,v,h,f),l.ngTokenPath=v,l[vh]=null,l}(w,d,"R3InjectorError",this.source)}throw w}finally{It(S),Ch(v)}}resolveInjectorInitializers(){const d=Ch(this),h=It(void 0);try{const f=this.get(UR.multi,ei,Te.Self);for(const v of f)v()}finally{Ch(d),It(h)}}toString(){const d=[],h=this.records;for(const f of h.keys())d.push(C(f));return`R3Injector[${d.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new je(205,!1)}processProvider(d){let h=Ld(d=ut(d))?d:ut(d&&d.provide);const f=function KR(l){return Sv(l)?If(void 0,l.useValue):If(Pf(l),xf)}(d);if(Ld(d)||!0!==d.multi)this.records.get(h);else{let v=this.records.get(h);v||(v=If(void 0,xf,!0),v.factory=()=>qw(v.multi),this.records.set(h,v)),h=d,v.multi.push(d)}this.records.set(h,f)}hydrate(d,h){return h.value===xf&&(h.value=$R,h.value=h.factory()),"object"==typeof h.value&&h.value&&function oP(l){return null!==l&&"object"==typeof l&&"function"==typeof l.ngOnDestroy}(h.value)&&this._ngOnDestroyHooks.add(h.value),h.value}injectableDefInScope(d){if(!d.providedIn)return!1;const h=ut(d.providedIn);return"string"==typeof h?"any"===h||this.scopes.has(h):this.injectorDefTypes.has(h)}}function FE(l){const d=ih(l),h=null!==d?d.factory:_d(l);if(null!==h)return h;if(l instanceof Mi)throw new je(204,!1);if(l instanceof Function)return function FS(l){const d=l.length;if(d>0)throw gf(d,"?"),new je(204,!1);const h=function Rm(l){const d=l&&(l[xe]||l[le]);if(d){const h=function bd(l){if(l.hasOwnProperty("name"))return l.name;const d=(""+l).match(/^function\s*([^\s(]+)/);return null===d?"":d[1]}(l);return console.warn(`DEPRECATED: DI is instantiating a token "${h}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${h}" class.`),d}return null}(l);return null!==h?()=>h.factory(l):()=>new l}(l);throw new je(204,!1)}function Pf(l,d,h){let f;if(Ld(l)){const v=ut(l);return _d(v)||FE(v)}if(Sv(l))f=()=>ut(l.useValue);else if(function PE(l){return!(!l||!l.useFactory)}(l))f=()=>l.useFactory(...qw(l.deps||[]));else if(function xE(l){return!(!l||!l.useExisting)}(l))f=()=>xn(ut(l.useExisting));else{const v=ut(l&&(l.useClass||l.provide));if(!function Gd(l){return!!l.deps}(l))return _d(v)||FE(v);f=()=>new v(...qw(l.deps))}return f}function If(l,d,h=!1){return{factory:l,value:d,multi:h?[]:void 0}}function Tc(l){return!!l.\u0275providers}function bv(l,d){for(const h of l)Array.isArray(h)?bv(h,d):Tc(h)?bv(h.\u0275providers,d):d(h)}class Rc{}class Zt{resolveComponentFactory(d){throw function NE(l){const d=Error(`No component factory found for ${C(l)}. Did you add it to @NgModule.entryComponents?`);return d.ngComponent=l,d}(d)}}let _v=(()=>{class l{}return l.NULL=new Zt,l})();function YR(){return Ah(Mn(),Ve())}function Ah(l,d){return new Ff(Zn(l,d))}let Ff=(()=>{class l{constructor(h){this.nativeElement=h}}return l.__NG_ELEMENT_ID__=YR,l})();function Nf(l){return l instanceof Ff?l.nativeElement:l}class LS{}let kS=(()=>{class l{}return l.__NG_ELEMENT_ID__=()=>function lP(){const l=Ve(),h=Ms(Mn().index,l);return(Os(h)?h:l)[11]}(),l})(),qR=(()=>{class l{}return l.\u0275prov=An({token:l,providedIn:"root",factory:()=>null}),l})();class Ac{constructor(d){this.full=d,this.major=d.split(".")[0],this.minor=d.split(".")[1],this.patch=d.split(".").slice(2).join(".")}}const LE=new Ac("14.3.0"),GS={};function VS(l){return l.ngOriginalError}class Ji{constructor(){this._console=console}handleError(d){const h=this._findOriginalError(d);this._console.error("ERROR",d),h&&this._console.error("ORIGINAL ERROR",h)}_findOriginalError(d){let h=d&&VS(d);for(;h&&VS(h);)h=VS(h);return h||null}}function kf(l,d,h){let f=l.length;for(;;){const v=l.indexOf(d,h);if(-1===v)return v;if(0===v||l.charCodeAt(v-1)<=32){const S=d.length;if(v+S===f||l.charCodeAt(v+S)<=32)return v}h=v+1}}const BS="ng-template";function pP(l,d,h){let f=0;for(;f<l.length;){let v=l[f++];if(h&&"class"===v){if(v=l[f],-1!==kf(v.toLowerCase(),d,0))return!0}else if(1===v){for(;f<l.length&&"string"==typeof(v=l[f++]);)if(v.toLowerCase()===d)return!0;return!1}}return!1}function Gf(l){return 4===l.type&&l.value!==BS}function fP(l,d,h){return d===(4!==l.type||h?l.value:BS)}function JR(l,d,h){let f=4;const v=l.attrs||[],S=function mP(l){for(let d=0;d<l.length;d++)if(pr(l[d]))return d;return l.length}(v);let w=!1;for(let T=0;T<d.length;T++){const M=d[T];if("number"!=typeof M){if(!w)if(4&f){if(f=2|1&f,""!==M&&!fP(l,M,h)||""===M&&1===d.length){if(Pa(f))return!1;w=!0}}else{const V=8&f?M:d[++T];if(8&f&&null!==l.attrs){if(!pP(l.attrs,V,h)){if(Pa(f))return!1;w=!0}continue}const Q=gP(8&f?"class":M,v,Gf(l),h);if(-1===Q){if(Pa(f))return!1;w=!0;continue}if(""!==V){let de;de=Q>S?"":v[Q+1].toLowerCase();const we=8&f?de:null;if(we&&-1!==kf(we,V,0)||2&f&&V!==de){if(Pa(f))return!1;w=!0}}}}else{if(!w&&!Pa(f)&&!Pa(M))return!1;if(w&&Pa(M))continue;w=!1,f=M|1&f}}return Pa(f)||w}function Pa(l){return 0==(1&l)}function gP(l,d,h,f){if(null===d)return-1;let v=0;if(f||!h){let S=!1;for(;v<d.length;){const w=d[v];if(w===l)return v;if(3===w||6===w)S=!0;else{if(1===w||2===w){let T=d[++v];for(;"string"==typeof T;)T=d[++v];continue}if(4===w)break;if(0===w){v+=4;continue}}v+=S?1:2}return-1}return function tA(l,d){let h=l.indexOf(4);if(h>-1)for(h++;h<l.length;){const f=l[h];if("number"==typeof f)return-1;if(f===d)return h;h++}return-1}(d,l)}function QR(l,d,h=!1){for(let f=0;f<d.length;f++)if(JR(l,d[f],h))return!0;return!1}function Gt(l,d){e:for(let h=0;h<d.length;h++){const f=d[h];if(l.length===f.length){for(let v=0;v<l.length;v++)if(l[v]!==f[v])continue e;return!0}}return!1}function GE(l,d){return l?":not("+d.trim()+")":d}function HS(l){let d=l[0],h=1,f=2,v="",S=!1;for(;h<l.length;){let w=l[h];if("string"==typeof w)if(2&f){const T=l[++h];v+="["+w+(T.length>0?'="'+T+'"':"")+"]"}else 8&f?v+="."+w:4&f&&(v+=" "+w);else""!==v&&!Pa(w)&&(d+=GE(S,v),v=""),f=w,S=S||!Pa(f);h++}return""!==v&&(d+=GE(S,v)),d}const Tt={};function $r(l){sn(li(),Ve(),Jn()+l,!1)}function sn(l,d,h,f){if(!f)if(3==(3&d[2])){const S=l.preOrderCheckHooks;null!==S&&x(d,S,h)}else{const S=l.preOrderHooks;null!==S&&B(d,S,0,h)}Cc(h)}function Ia(l,d=null,h=null,f){const v=HE(l,d,h,f);return v.resolveInjectorInitializers(),v}function HE(l,d=null,h=null,f,v=new Set){const S=[h||ei,u1(l)];return f=f||("object"==typeof l?void 0:C(l)),new Wr(S,d||El(),f||null,v)}let Wo=(()=>{class l{static create(h,f){if(Array.isArray(h))return Ia({name:""},f,h,"");{const v=h.name??"";return Ia({name:v},h.parent,h.providers,v)}}}return l.THROW_IF_NOT_FOUND=Ra,l.NULL=new Ne,l.\u0275prov=An({token:l,providedIn:"any",factory:()=>xn(IS)}),l.__NG_ELEMENT_ID__=-1,l})();function Hf(l,d=Te.Default){const h=Ve();return null===h?xn(l,d):Uw(Mn(),h,ut(l),d)}function jS(l,d){return l<<17|d<<2}function Fa(l){return l>>17&32767}function Uf(l){return 2|l}function Na(l){return(131068&l)>>2}function Ph(l,d){return-131069&l|d<<2}function zS(l){return 1|l}function hA(l,d){const h=l.contentQueries;if(null!==h)for(let f=0;f<h.length;f+=2){const v=h[f],S=h[f+1];if(-1!==S){const w=l.data[S];Iw(v),w.contentQueries(2,d[S],S)}}}function bt(l,d,h,f,v,S,w,T,M,V,W){const Q=d.blueprint.slice();return Q[0]=v,Q[2]=76|f,(null!==W||l&&1024&l[2])&&(Q[2]|=1024),Nm(Q),Q[3]=Q[15]=l,Q[8]=h,Q[10]=w||l&&l[10],Q[11]=T||l&&l[11],Q[12]=M||l&&l[12]||null,Q[9]=V||l&&l[9]||null,Q[6]=S,Q[20]=function tE(){return Ux++}(),Q[21]=W,Q[16]=2==d.type?l[16]:Q,Q}function zf(l,d,h,f,v){let S=l.data[d];if(null===S)S=ZE(l,d,h,f,v),function Dx(){return Rt.lFrame.inI18n}()&&(S.flags|=64);else if(64&S.type){S.type=h,S.value=f,S.attrs=v;const w=Ed();S.injectorIndex=null===w?-1:w.injectorIndex}return Ea(S,!0),S}function ZE(l,d,h,f,v){const S=Ow(),w=Gm(),M=l.data[d]=function GP(l,d,h,f,v,S){return{type:h,index:f,insertBeforeIndex:null,injectorIndex:d?d.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:v,attrs:S,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:d,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?S:S&&S.parent,h,d,f,v);return null===l.firstChild&&(l.firstChild=M),null!==S&&(w?null==S.child&&null!==M.parent&&(S.child=M):null===S.next&&(S.next=M)),M}function $f(l,d,h,f){if(0===h)return-1;const v=d.length;for(let S=0;S<h;S++)d.push(f),l.blueprint.push(f),l.data.push(null);return v}function YS(l,d,h){Fw(d);try{const f=l.viewQuery;null!==f&&Gh(1,f,h);const v=l.template;null!==v&&pA(l,d,v,1,h),l.firstCreatePass&&(l.firstCreatePass=!1),l.staticContentQueries&&hA(l,d),l.staticViewQueries&&Gh(2,l.viewQuery,h);const S=l.components;null!==S&&function At(l,d){for(let h=0;h<d.length;h++)CA(l,d[h])}(d,S)}catch(f){throw l.firstCreatePass&&(l.incompleteFirstPass=!0,l.firstCreatePass=!1),f}finally{d[2]&=-5,Um()}}function qS(l,d,h,f){const v=d[2];if(128!=(128&v)){Fw(d);try{Nm(d),function zy(l){return Rt.lFrame.bindingIndex=l}(l.bindingStartIndex),null!==h&&pA(l,d,h,2,f);const w=3==(3&v);if(w){const V=l.preOrderCheckHooks;null!==V&&x(d,V,null)}else{const V=l.preOrderHooks;null!==V&&B(d,V,0,null),N(d,0)}if(function Ol(l){for(let d=fS(l);null!==d;d=cv(d)){if(!d[2])continue;const h=d[9];for(let f=0;f<h.length;f++){const v=h[f],S=v[3];0==(512&v[2])&&af(S,1),v[2]|=512}}}(d),function HP(l){for(let d=fS(l);null!==d;d=cv(d))for(let h=10;h<d.length;h++){const f=d[h],v=f[1];wd(f)&&qS(v,f,v.template,f[8])}}(d),null!==l.contentQueries&&hA(l,d),w){const V=l.contentCheckHooks;null!==V&&x(d,V)}else{const V=l.contentHooks;null!==V&&B(d,V,1),N(d,1)}!function NP(l,d){const h=l.hostBindingOpCodes;if(null!==h)try{for(let f=0;f<h.length;f++){const v=h[f];if(v<0)Cc(~v);else{const S=v,w=h[++f],T=h[++f];ph(w,S),T(2,d[S])}}}finally{Cc(-1)}}(l,d);const T=l.components;null!==T&&function KS(l,d){for(let h=0;h<d.length;h++)QS(l,d[h])}(d,T);const M=l.viewQuery;if(null!==M&&Gh(2,M,f),w){const V=l.viewCheckHooks;null!==V&&x(d,V)}else{const V=l.viewHooks;null!==V&&B(d,V,2),N(d,2)}!0===l.firstUpdatePass&&(l.firstUpdatePass=!1),d[2]&=-41,512&d[2]&&(d[2]&=-513,af(d[3],-1))}finally{Um()}}}function pA(l,d,h,f,v){const S=Jn(),w=2&f;try{Cc(-1),w&&d.length>22&&sn(l,d,22,!1),h(f,v)}finally{Cc(S)}}function JE(l,d,h){!lf()||(function vA(l,d,h,f){const v=h.directiveStart,S=h.directiveEnd;l.firstCreatePass||zm(h,d),ji(f,d);const w=h.initialInputs;for(let T=v;T<S;T++){const M=l.data[T],V=Hr(M);V&&Me(d,h,M);const W=Qy(d,l,T,h);ji(W,d),null!==w&&VP(0,T-v,W,M,0,w),V&&(Ms(h.index,d)[8]=W)}}(l,d,h,Zn(h,d)),128==(128&h.flags)&&function s0(l,d,h){const f=h.directiveStart,v=h.directiveEnd,S=h.index,w=function df(){return Rt.lFrame.currentDirectiveIndex}();try{Cc(S);for(let T=f;T<v;T++){const M=l.data[T],V=d[T];Bm(T),(null!==M.hostBindings||0!==M.hostVars||null!==M.hostAttrs)&&r0(M,V)}}finally{Cc(-1),Bm(w)}}(l,d,h))}function QE(l,d,h=Zn){const f=d.localNames;if(null!==f){let v=d.index+1;for(let S=0;S<f.length;S+=2){const w=f[S+1],T=-1===w?h(d,l):l[w];l[v++]=T}}}function fA(l){const d=l.tView;return null===d||d.incompleteFirstPass?l.tView=e0(1,null,l.template,l.decls,l.vars,l.directiveDefs,l.pipeDefs,l.viewQuery,l.schemas,l.consts):d}function e0(l,d,h,f,v,S,w,T,M,V){const W=22+f,Q=W+v,de=function LP(l,d){const h=[];for(let f=0;f<d;f++)h.push(f<l?null:Tt);return h}(W,Q),we="function"==typeof V?V():V;return de[1]={type:l,blueprint:de,template:h,queries:null,viewQuery:T,declTNode:d,data:de.slice().fill(null,W),bindingStartIndex:W,expandoStartIndex:Q,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof S?S():S,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:M,consts:we,incompleteFirstPass:!1}}function gA(l,d,h,f){const v=yA(d);null===h?v.push(f):(v.push(h),l.firstCreatePass&&Kf(l).push(f,v.length-1))}function mA(l,d,h){for(let f in l)if(l.hasOwnProperty(f)){const v=l[f];(h=null===h?{}:h).hasOwnProperty(f)?h[f].push(d,v):h[f]=[d,v]}return h}function Pc(l,d){const f=d.directiveEnd,v=l.data,S=d.attrs,w=[];let T=null,M=null;for(let V=d.directiveStart;V<f;V++){const W=v[V],Q=W.inputs,de=null===S||Gf(d)?null:BP(Q,S);w.push(de),T=mA(Q,V,T),M=mA(W.outputs,V,M)}null!==T&&(T.hasOwnProperty("class")&&(d.flags|=16),T.hasOwnProperty("style")&&(d.flags|=32)),d.initialInputs=w,d.inputs=T,d.outputs=M}function vo(l,d,h,f,v,S,w,T){const M=Zn(d,h);let W,V=d.inputs;!T&&null!=V&&(W=V[f])?(eb(l,h,W,f,v),ch(d)&&$d(h,d.index)):3&d.type&&(f=function Cr(l){return"class"===l?"className":"for"===l?"htmlFor":"formaction"===l?"formAction":"innerHtml"===l?"innerHTML":"readonly"===l?"readOnly":"tabindex"===l?"tabIndex":l}(f),v=null!=w?w(v,d.value||"",f):v,S.setProperty(M,f,v))}function $d(l,d){const h=Ms(d,l);16&h[2]||(h[2]|=32)}function Kd(l,d,h,f){let v=!1;if(lf()){const S=function XS(l,d,h){const f=l.directiveRegistry;let v=null;if(f)for(let S=0;S<f.length;S++){const w=f[S];QR(h,w.selectors,!1)&&(v||(v=[]),Km(zm(h,d),l,w.type),Hr(w)?(ZS(l,h),v.unshift(w)):v.push(w))}return v}(l,d,h),w=null===f?null:{"":-1};if(null!==S){v=!0,Lh(h,l.data.length,S.length);for(let W=0;W<S.length;W++){const Q=S[W];Q.providersResolver&&Q.providersResolver(Q)}let T=!1,M=!1,V=$f(l,d,S.length,null);for(let W=0;W<S.length;W++){const Q=S[W];h.mergedAttrs=fo(h.mergedAttrs,Q.hostAttrs),kh(l,h,d,V,Q),o0(V,Q,w),null!==Q.contentQueries&&(h.flags|=8),(null!==Q.hostBindings||null!==Q.hostAttrs||0!==Q.hostVars)&&(h.flags|=128);const de=Q.type.prototype;!T&&(de.ngOnChanges||de.ngOnInit||de.ngDoCheck)&&((l.preOrderHooks||(l.preOrderHooks=[])).push(h.index),T=!0),!M&&(de.ngOnChanges||de.ngDoCheck)&&((l.preOrderCheckHooks||(l.preOrderCheckHooks=[])).push(h.index),M=!0),V++}Pc(l,h)}w&&function JS(l,d,h){if(d){const f=l.localNames=[];for(let v=0;v<d.length;v+=2){const S=h[d[v+1]];if(null==S)throw new je(-301,!1);f.push(d[v],S)}}}(h,f,w)}return h.mergedAttrs=fo(h.mergedAttrs,h.attrs),v}function t0(l,d,h,f,v,S){const w=S.hostBindings;if(w){let T=l.hostBindingOpCodes;null===T&&(T=l.hostBindingOpCodes=[]);const M=~d.index;(function n0(l){let d=l.length;for(;d>0;){const h=l[--d];if("number"==typeof h&&h<0)return h}return 0})(T)!=M&&T.push(M),T.push(f,v,w)}}function r0(l,d){null!==l.hostBindings&&l.hostBindings(1,d)}function ZS(l,d){d.flags|=2,(l.components||(l.components=[])).push(d.index)}function o0(l,d,h){if(h){if(d.exportAs)for(let f=0;f<d.exportAs.length;f++)h[d.exportAs[f]]=l;Hr(d)&&(h[""]=l)}}function Lh(l,d,h){l.flags|=1,l.directiveStart=d,l.directiveEnd=d+h,l.providerIndexes=d}function kh(l,d,h,f,v){l.data[f]=v;const S=v.factory||(v.factory=_d(v.type)),w=new Ge(S,Hr(v),Hf);l.blueprint[f]=w,h[f]=w,t0(l,d,0,f,$f(l,h,v.hostVars,Tt),v)}function Me(l,d,h){const f=Zn(d,l),v=fA(h),S=l[10],w=Fc(l,bt(l,v,null,h.onPush?32:16,f,d,S,S.createRenderer(f,h),null,null,null));l[d.index]=w}function a0(l,d,h,f,v,S,w){if(null==S)l.removeAttribute(d,v,h);else{const T=null==w?Ye(S):w(S,f||"",v);l.setAttribute(d,v,T,h)}}function VP(l,d,h,f,v,S){const w=S[d];if(null!==w){const T=f.setInput;for(let M=0;M<w.length;){const V=w[M++],W=w[M++],Q=w[M++];null!==T?f.setInput(h,Q,V,W):h[W]=Q}}}function BP(l,d){let h=null,f=0;for(;f<d.length;){const v=d[f];if(0!==v)if(5!==v){if("number"==typeof v)break;l.hasOwnProperty(v)&&(null===h&&(h=[]),h.push(v,l[v],d[f+1])),f+=2}else f+=2;else f+=4}return h}function Al(l,d,h,f){return new Array(l,!0,!1,d,null,0,f,h,null,null)}function QS(l,d){const h=Ms(d,l);if(wd(h)){const f=h[1];48&h[2]?qS(f,h,f.template,h[8]):h[5]>0&&Yd(h)}}function Yd(l){for(let f=fS(l);null!==f;f=cv(f))for(let v=10;v<f.length;v++){const S=f[v];if(wd(S))if(512&S[2]){const w=S[1];qS(w,S,w.template,S[8])}else S[5]>0&&Yd(S)}const h=l[1].components;if(null!==h)for(let f=0;f<h.length;f++){const v=Ms(h[f],l);wd(v)&&v[5]>0&&Yd(v)}}function CA(l,d){const h=Ms(d,l),f=h[1];(function Iv(l,d){for(let h=d.length;h<l.blueprint.length;h++)d.push(l.blueprint[h])})(f,h),YS(f,h,h[8])}function Fc(l,d){return l[13]?l[14][4]=d:l[13]=d,l[14]=d,d}function nr(l){for(;l;){l[2]|=32;const d=Pd(l);if(nf(l)&&!d)return l;l=d}return null}function ts(l,d,h,f=!0){const v=d[10];v.begin&&v.begin();try{qS(l,d,l.template,h)}catch(w){throw f&&Vh(d,w),w}finally{v.end&&v.end()}}function Gh(l,d,h){Iw(0),d(l,h)}function yA(l){return l[7]||(l[7]=[])}function Kf(l){return l.cleanup||(l.cleanup=[])}function Vh(l,d){const h=l[9],f=h?h.get(Ji,null):null;f&&f.handleError(d)}function eb(l,d,h,f,v){for(let S=0;S<h.length;){const w=h[S++],T=h[S++],M=d[w],V=l.data[w];null!==V.setInput?V.setInput(M,v,f,T):M[T]=v}}function Ml(l,d,h){let f=h?l.styles:null,v=h?l.classes:null,S=0;if(null!==d)for(let w=0;w<d.length;w++){const T=d[w];"number"==typeof T?S=T:1==S?v=oi(v,T):2==S&&(f=oi(f,T+": "+d[++w]+";"))}h?l.styles=f:l.stylesWithoutHost=f,h?l.classes=v:l.classesWithoutHost=v}function qd(l,d,h,f,v=!1){for(;null!==h;){const S=d[h.index];if(null!==S&&f.push(hn(S)),Br(S))for(let T=10;T<S.length;T++){const M=S[T],V=M[1].firstChild;null!==V&&qd(M[1],M,V,f)}const w=h.type;if(8&w)qd(l,d,h.child,f);else if(32&w){const T=pS(h,d);let M;for(;M=T();)f.push(M)}else if(16&w){const T=Sh(d,h);if(Array.isArray(T))f.push(...T);else{const M=Pd(d[16]);qd(M[1],M,T,f,!0)}}h=v?h.projectionNext:h.next}return f}class xl{constructor(d,h){this._lView=d,this._cdRefInjectingView=h,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const d=this._lView,h=d[1];return qd(h,d,h.firstChild,[])}get context(){return this._lView[8]}set context(d){this._lView[8]=d}get destroyed(){return 128==(128&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const d=this._lView[3];if(Br(d)){const h=d[8],f=h?h.indexOf(this):-1;f>-1&&(Df(d,f),mh(h,f))}this._attachedToViewContainer=!1}CS(this._lView[1],this._lView)}onDestroy(d){gA(this._lView[1],this._lView,null,d)}markForCheck(){nr(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-65}reattach(){this._lView[2]|=64}detectChanges(){ts(this._lView[1],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new je(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Ef(l,d){gv(l,d,d[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(d){if(this._attachedToViewContainer)throw new je(902,!1);this._appRef=d}}class Fv extends xl{constructor(d){super(d),this._view=d}detectChanges(){const d=this._view;ts(d[1],d,d[8],!1)}checkNoChanges(){}get context(){return null}}class Xd extends _v{constructor(d){super(),this.ngModule=d}resolveComponentFactory(d){const h=Ai(d);return new Pl(h,this.ngModule)}}function Nv(l){const d=[];for(let h in l)l.hasOwnProperty(h)&&d.push({propName:l[h],templateName:h});return d}class bA{constructor(d,h){this.injector=d,this.parentInjector=h}get(d,h,f){const v=this.injector.get(d,GS,f);return v!==GS||h===GS?v:this.parentInjector.get(d,h,f)}}class Pl extends Rc{constructor(d,h){super(),this.componentDef=d,this.ngModule=h,this.componentType=d.type,this.selector=function Oh(l){return l.map(HS).join(",")}(d.selectors),this.ngContentSelectors=d.ngContentSelectors?d.ngContentSelectors:[],this.isBoundToModule=!!h}get inputs(){return Nv(this.componentDef.inputs)}get outputs(){return Nv(this.componentDef.outputs)}create(d,h,f,v){let S=(v=v||this.ngModule)instanceof kd?v:v?.injector;S&&null!==this.componentDef.getStandaloneInjector&&(S=this.componentDef.getStandaloneInjector(S)||S);const w=S?new bA(d,S):d,T=w.get(LS,null);if(null===T)throw new je(407,!1);const M=w.get(qR,null),V=T.createRenderer(null,this.componentDef),W=this.componentDef.selectors[0][0]||"div",Q=f?function kP(l,d,h){return l.selectRootElement(d,h===vi.ShadowDom)}(V,f,this.componentDef.encapsulation):mS(V,W,function Zd(l){const d=l.toLowerCase();return"svg"===d?"svg":"math"===d?"math":null}(W)),de=this.componentDef.onPush?288:272,we=e0(0,null,null,1,0,null,null,null,null,null),Fe=bt(null,we,null,de,null,null,T,V,M,w,null);let $e,Qe;Fw(Fe);try{const dt=function UP(l,d,h,f,v,S){const w=h[1];h[22]=l;const M=zf(w,22,2,"#host",null),V=M.mergedAttrs=d.hostAttrs;null!==V&&(Ml(M,V,!0),null!==l&&(No(v,l,V),null!==M.classes&&tr(v,l,M.classes),null!==M.styles&&bh(v,l,M.styles)));const W=f.createRenderer(l,d),Q=bt(h,fA(d),null,d.onPush?32:16,h[22],M,f,W,S||null,null,null);return w.firstCreatePass&&(Km(zm(M,h),w,d.type),ZS(w,M),Lh(M,h.length,1)),Fc(h,Q),h[22]=Q}(Q,this.componentDef,Fe,T,V);if(Q)if(f)No(V,Q,["ng-version",LE.full]);else{const{attrs:wt,classes:ke}=function zr(l){const d=[],h=[];let f=1,v=2;for(;f<l.length;){let S=l[f];if("string"==typeof S)2===v?""!==S&&d.push(S,l[++f]):8===v&&h.push(S);else{if(!Pa(v))break;v=S}f++}return{attrs:d,classes:h}}(this.componentDef.selectors[0]);wt&&No(V,Q,wt),ke&&ke.length>0&&tr(V,Q,ke.join(" "))}if(Qe=vc(we,22),void 0!==h){const wt=Qe.projection=[];for(let ke=0;ke<this.ngContentSelectors.length;ke++){const mt=h[ke];wt.push(null!=mt?Array.from(mt):null)}}$e=function Yr(l,d,h,f){const v=h[1],S=function Pv(l,d,h){const f=Mn();l.firstCreatePass&&(h.providersResolver&&h.providersResolver(h),kh(l,f,d,$f(l,d,1,null),h),Pc(l,f));const v=Qy(d,l,f.directiveStart,f);ji(v,d);const S=Zn(f,d);return S&&ji(S,d),v}(v,h,d);if(l[8]=h[8]=S,null!==f)for(const T of f)T(S,d);if(d.contentQueries){const T=Mn();d.contentQueries(1,S,T.directiveStart)}const w=Mn();return!v.firstCreatePass||null===d.hostBindings&&null===d.hostAttrs||(Cc(w.index),t0(h[1],w,0,w.directiveStart,w.directiveEnd,d),r0(d,S)),S}(dt,this.componentDef,Fe,[WP]),YS(we,Fe,null)}finally{Um()}return new l0(this.componentType,$e,Ah(Qe,Fe),Fe,Qe)}}class l0 extends class xa{}{constructor(d,h,f,v,S){super(),this.location=f,this._rootLView=v,this._tNode=S,this.instance=h,this.hostView=this.changeDetectorRef=new Fv(v),this.componentType=d}setInput(d,h){const f=this._tNode.inputs;let v;if(null!==f&&(v=f[d])){const S=this._rootLView;eb(S[1],S,v,d,h),$d(S,this._tNode.index)}}get injector(){return new Ym(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(d){this.hostView.onDestroy(d)}}function WP(){const l=Mn();Wm(Ve()[1],l)}function tb(l){let d=function Lv(l){return Object.getPrototypeOf(l.prototype).constructor}(l.type),h=!0;const f=[l];for(;d;){let v;if(Hr(l))v=d.\u0275cmp||d.\u0275dir;else{if(d.\u0275cmp)throw new je(903,!1);v=d.\u0275dir}if(v){if(h){f.push(v);const w=l;w.inputs=c0(l.inputs),w.declaredInputs=c0(l.declaredInputs),w.outputs=c0(l.outputs);const T=v.hostBindings;T&&wA(l,T);const M=v.viewQuery,V=v.contentQueries;if(M&&Gv(l,M),V&&qf(l,V),Oe(l.inputs,v.inputs),Oe(l.declaredInputs,v.declaredInputs),Oe(l.outputs,v.outputs),Hr(v)&&v.data.animation){const W=l.data;W.animation=(W.animation||[]).concat(v.data.animation)}}const S=v.features;if(S)for(let w=0;w<S.length;w++){const T=S[w];T&&T.ngInherit&&T(l),T===tb&&(h=!1)}}d=Object.getPrototypeOf(d)}!function kv(l){let d=0,h=null;for(let f=l.length-1;f>=0;f--){const v=l[f];v.hostVars=d+=v.hostVars,v.hostAttrs=fo(v.hostAttrs,h=fo(h,v.hostAttrs))}}(f)}function c0(l){return l===Lr?{}:l===ei?[]:l}function Gv(l,d){const h=l.viewQuery;l.viewQuery=h?(f,v)=>{d(f,v),h(f,v)}:d}function qf(l,d){const h=l.contentQueries;l.contentQueries=h?(f,v,S)=>{d(f,v,S),h(f,v,S)}:d}function wA(l,d){const h=l.hostBindings;l.hostBindings=h?(f,v)=>{d(f,v),h(f,v)}:d}let Jd=null;function Bh(){if(!Jd){const l=wi.Symbol;if(l&&l.iterator)Jd=l.iterator;else{const d=Object.getOwnPropertyNames(Map.prototype);for(let h=0;h<d.length;++h){const f=d[h];"entries"!==f&&"size"!==f&&Map.prototype[f]===Map.prototype.entries&&(Jd=f)}}}return Jd}function Vv(l){return!!Hh(l)&&(Array.isArray(l)||!(l instanceof Map)&&Bh()in l)}function Hh(l){return null!==l&&("function"==typeof l||"object"==typeof l)}function sr(l,d,h){return l[d]=h}function Vi(l,d,h){return!Object.is(l[d],h)&&(l[d]=h,!0)}function Ga(l,d,h,f){const v=Vi(l,d,h);return Vi(l,d+1,f)||v}function Qd(l,d,h,f){const v=Ve();return Vi(v,Da(),d)&&(li(),function Ii(l,d,h,f,v,S){const w=Zn(l,d);a0(d[11],w,S,l.value,h,f,v)}(tn(),v,l,d,h,f)),Qd}function Zf(l,d,h,f){return Vi(l,Da(),h)?d+Ye(h)+f:Tt}function Jf(l,d,h,f,v,S,w,T){const M=Ve(),V=li(),W=l+22,Q=V.firstCreatePass?function u0(l,d,h,f,v,S,w,T,M){const V=d.consts,W=zf(d,l,4,w||null,po(V,T));Kd(d,h,W,po(V,M)),Wm(d,W);const Q=W.tViews=e0(2,W,f,v,S,d.directiveRegistry,d.pipeRegistry,null,d.schemas,V);return null!==d.queries&&(d.queries.template(d,W),Q.queries=d.queries.embeddedTView(W)),W}(W,V,M,d,h,f,v,S,w):V.data[W];Ea(Q,!1);const de=M[11].createComment("");fv(V,M,de,Q),ji(de,M),Fc(M,M[W]=Al(de,M,de,Q)),dh(Q)&&JE(V,M,Q),null!=w&&QE(M,Q,T)}function Yo(l){return function Io(l,d){return l[d]}(function Mw(){return Rt.lFrame.contextLView}(),22+l)}function $h(l,d,h){const f=Ve();return Vi(f,Da(),d)&&vo(li(),tn(),f,l,d,f[11],h,!1),$h}function kc(l,d,h,f,v){const w=v?"class":"style";eb(l,h,d.inputs[w],w,f)}function tu(l,d,h,f){const v=Ve(),S=li(),w=22+l,T=v[11],M=v[w]=mS(T,d,function uR(){return Rt.lFrame.currentNamespace}()),V=S.firstCreatePass?function rb(l,d,h,f,v,S,w){const T=d.consts,V=zf(d,l,2,v,po(T,S));return Kd(d,h,V,po(T,w)),null!==V.attrs&&Ml(V,V.attrs,!1),null!==V.mergedAttrs&&Ml(V,V.mergedAttrs,!0),null!==d.queries&&d.queries.elementStart(d,V),V}(w,S,v,0,d,h,f):S.data[w];Ea(V,!0);const W=V.mergedAttrs;null!==W&&No(T,M,W);const Q=V.classes;null!==Q&&tr(T,M,Q);const de=V.styles;return null!==de&&bh(T,M,de),64!=(64&V.flags)&&fv(S,v,M,V),0===function nR(){return Rt.lFrame.elementDepthCount}()&&ji(M,v),function Aw(){Rt.lFrame.elementDepthCount++}(),dh(V)&&(JE(S,v,V),function Nh(l,d,h){if(tf(d)){const v=d.directiveEnd;for(let S=d.directiveStart;S<v;S++){const w=l.data[S];w.contentQueries&&w.contentQueries(1,h[S],S)}}}(S,V,v)),null!==f&&QE(v,V),tu}function Xr(){let l=Mn();Gm()?jy():(l=l.parent,Ea(l,!1));const d=l;!function sR(){Rt.lFrame.elementDepthCount--}();const h=li();return h.firstCreatePass&&(Wm(h,l),tf(l)&&h.queries.elementEnd(l)),null!=d.classesWithoutHost&&function ni(l){return 0!=(16&l.flags)}(d)&&kc(h,d,Ve(),d.classesWithoutHost,!0),null!=d.stylesWithoutHost&&function pn(l){return 0!=(32&l.flags)}(d)&&kc(h,d,Ve(),d.stylesWithoutHost,!1),Xr}function yr(l,d,h,f){return tu(l,d,h,f),Xr(),yr}function eg(){return Ve()}function tg(l){return!!l&&"function"==typeof l.then}function h0(l){return!!l&&"function"==typeof l.subscribe}const Uv=h0;function p0(l,d,h,f){const v=Ve(),S=li(),w=Mn();return function lb(l,d,h,f,v,S,w,T){const M=dh(f),W=l.firstCreatePass&&Kf(l),Q=d[8],de=yA(d);let we=!0;if(3&f.type||T){const Qe=Zn(f,d),dt=T?T(Qe):Qe,wt=de.length,ke=T?pi=>T(hn(pi[f.index])):f.index;let mt=null;if(!T&&M&&(mt=function iu(l,d,h,f){const v=l.cleanup;if(null!=v)for(let S=0;S<v.length-1;S+=2){const w=v[S];if(w===h&&v[S+1]===f){const T=d[7],M=v[S+2];return T.length>M?T[M]:null}"string"==typeof w&&(S+=2)}return null}(l,d,v,f.index)),null!==mt)(mt.__ngLastListenerFn__||mt).__ngNextListenerFn__=S,mt.__ngLastListenerFn__=S,we=!1;else{S=f0(f,d,Q,S,!1);const pi=h.listen(dt,v,S);de.push(S,pi),W&&W.push(v,ke,wt,wt+1)}}else S=f0(f,d,Q,S,!1);const Fe=f.outputs;let $e;if(we&&null!==Fe&&($e=Fe[v])){const Qe=$e.length;if(Qe)for(let dt=0;dt<Qe;dt+=2){const Bi=d[$e[dt]][$e[dt+1]].subscribe(S),gp=de.length;de.push(S,Bi),W&&W.push(v,f.index,gp,-(gp+1))}}}(S,v,v[11],w,l,d,0,f),p0}function ig(l,d,h,f){try{return!1!==h(f)}catch(v){return Vh(l,v),!1}}function f0(l,d,h,f,v){return function S(w){if(w===Function)return f;nr(2&l.flags?Ms(l.index,d):d);let M=ig(d,0,f,w),V=S.__ngNextListenerFn__;for(;V;)M=ig(d,0,V,w)&&M,V=V.__ngNextListenerFn__;return v&&!1===M&&(w.preventDefault(),w.returnValue=!1),M}}function jv(l=1){return function Nw(l){return(Rt.lFrame.contextLView=function qy(l,d){for(;l>0;)d=d[15],l--;return d}(l,Rt.lFrame.contextLView))[8]}(l)}function g0(l,d){let h=null;const f=function eA(l){const d=l.attrs;if(null!=d){const h=d.indexOf(5);if(0==(1&h))return d[h+1]}return null}(l);for(let v=0;v<d.length;v++){const S=d[v];if("*"!==S){if(null===f?QR(l,S,!0):Gt(f,S))return v}else h=v}return h}function RA(l){const d=Ve()[16][6];if(!d.projection){const f=d.projection=gf(l?l.length:1,null),v=f.slice();let S=d.child;for(;null!==S;){const w=l?g0(S,l):0;null!==w&&(v[w]?v[w].projectionNext=S:f[w]=S,v[w]=S),S=S.next}}}function AA(l,d=0,h){const f=Ve(),v=li(),S=zf(v,22+l,16,null,h||null);null===S.projection&&(S.projection=d),jy(),64!=(64&S.flags)&&function SE(l,d,h){NR(d[11],0,d,h,yS(l,h,d),pv(h.parent||d[6],h,d))}(v,f,S)}function m0(l,d,h){return zv(l,"",d,"",h),m0}function zv(l,d,h,f,v){const S=Ve(),w=Zf(S,d,h,f);return w!==Tt&&vo(li(),tn(),S,l,w,S[11],v,!1),zv}function Yh(l,d,h,f,v){const S=l[h+1],w=null===d;let T=f?Fa(S):Na(S),M=!1;for(;0!==T&&(!1===M||w);){const W=l[T+1];YP(l[T],d)&&(M=!0,l[T+1]=f?zS(W):Uf(W)),T=f?Fa(W):Na(W)}M&&(l[h+1]=f?Uf(S):zS(S))}function YP(l,d){return null===l||null==d||(Array.isArray(l)?l[1]:l)===d||!(!Array.isArray(l)||"string"!=typeof d)&&mf(l,d)>=0}const Bn={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ub(l){return l.substring(Bn.key,Bn.keyEnd)}function Xo(l,d){const h=Bn.textEnd;return h===d?-1:(d=Bn.keyEnd=function Gc(l,d,h){for(;d<h&&l.charCodeAt(d)>32;)d++;return d}(l,Bn.key=d,h),nu(l,d,h))}function nu(l,d,h){for(;d<h&&l.charCodeAt(d)<=32;)d++;return d}function Xv(l,d,h){return br(l,d,h,!1),Xv}function Sr(l,d){return br(l,d,null,!0),Sr}function qh(l){!function Ba(l,d,h,f){const v=li(),S=Fo(2);v.firstUpdatePass&&Zv(v,null,S,f);const w=Ve();if(h!==Tt&&Vi(w,S,h)){const T=v.data[Jn()];if(gb(T,f)&&!su(v,S)){let M=f?T.classesWithoutHost:T.stylesWithoutHost;null!==M&&(h=oi(M,h||"")),kc(v,T,w,h,f)}else!function QP(l,d,h,f,v,S,w,T){v===Tt&&(v=ei);let M=0,V=0,W=0<v.length?v[0]:null,Q=0<S.length?S[0]:null;for(;null!==W||null!==Q;){const de=M<v.length?v[M+1]:void 0,we=V<S.length?S[V+1]:void 0;let $e,Fe=null;W===Q?(M+=2,V+=2,de!==we&&(Fe=Q,$e=we)):null===Q||null!==W&&W<Q?(M+=2,Fe=W):(V+=2,Fe=Q,$e=we),null!==Fe&&hb(l,d,h,f,Fe,$e,w,T),W=M<v.length?v[M]:null,Q=V<S.length?S[V]:null}}(v,T,w,w[11],w[S+1],w[S+1]=function JP(l,d,h){if(null==h||""===h)return ei;const f=[],v=Fn(h);if(Array.isArray(v))for(let S=0;S<v.length;S++)l(f,v[S],!0);else if("object"==typeof v)for(const S in v)v.hasOwnProperty(S)&&l(f,S,v[S]);else"string"==typeof v&&d(f,v);return f}(l,d,h),f,S)}}(mr,Ls,l,!0)}function Ls(l,d){for(let h=function Yv(l){return function sg(l){Bn.key=0,Bn.keyEnd=0,Bn.value=0,Bn.valueEnd=0,Bn.textEnd=l.length}(l),Xo(l,nu(l,0,Bn.textEnd))}(d);h>=0;h=Xo(d,h))mr(l,ub(d),!0)}function br(l,d,h,f){const v=Ve(),S=li(),w=Fo(2);S.firstUpdatePass&&Zv(S,l,w,f),d!==Tt&&Vi(v,w,d)&&hb(S,S.data[Jn()],v,v[11],l,v[w+1]=function fb(l,d){return null==l||("string"==typeof d?l+=d:"object"==typeof l&&(l=C(Fn(l)))),l}(d,h),f,w)}function su(l,d){return d>=l.expandoStartIndex}function Zv(l,d,h,f){const v=l.data;if(null===v[h+1]){const S=v[Jn()],w=su(l,h);gb(S,f)&&null===d&&!w&&(d=!1),d=function Xh(l,d,h,f){const v=function Hm(l){const d=Rt.lFrame.currentDirectiveIndex;return-1===d?null:l[d]}(l);let S=f?d.residualClasses:d.residualStyles;if(null===v)0===(f?d.classBindings:d.styleBindings)&&(h=ag(h=Ll(null,l,d,h,f),d.attrs,f),S=null);else{const w=d.directiveStylingLast;if(-1===w||l[w]!==v)if(h=Ll(v,l,d,h,f),null===S){let M=function PA(l,d,h){const f=h?d.classBindings:d.styleBindings;if(0!==Na(f))return l[Fa(f)]}(l,d,f);void 0!==M&&Array.isArray(M)&&(M=Ll(null,l,d,M[1],f),M=ag(M,d.attrs,f),function rg(l,d,h,f){l[Fa(h?d.classBindings:d.styleBindings)]=f}(l,d,f,M))}else S=function og(l,d,h){let f;const v=d.directiveEnd;for(let S=1+d.directiveStylingLast;S<v;S++)f=ag(f,l[S].hostAttrs,h);return ag(f,d.attrs,h)}(l,d,f)}return void 0!==S&&(f?d.residualClasses=S:d.residualStyles=S),h}(v,S,d,f),function ln(l,d,h,f,v,S){let w=S?d.classBindings:d.styleBindings,T=Fa(w),M=Na(w);l[f]=h;let W,V=!1;if(Array.isArray(h)){const Q=h;W=Q[1],(null===W||mf(Q,W)>0)&&(V=!0)}else W=h;if(v)if(0!==M){const de=Fa(l[T+1]);l[f+1]=jS(de,T),0!==de&&(l[de+1]=Ph(l[de+1],f)),l[T+1]=function Bd(l,d){return 131071&l|d<<17}(l[T+1],f)}else l[f+1]=jS(T,0),0!==T&&(l[T+1]=Ph(l[T+1],f)),T=f;else l[f+1]=jS(M,0),0===T?T=f:l[M+1]=Ph(l[M+1],f),M=f;V&&(l[f+1]=Uf(l[f+1])),Yh(l,W,f,!0),Yh(l,W,f,!1),function MA(l,d,h,f,v){const S=v?l.residualClasses:l.residualStyles;null!=S&&"string"==typeof d&&mf(S,d)>=0&&(h[f+1]=zS(h[f+1]))}(d,W,l,f,S),w=jS(T,M),S?d.classBindings=w:d.styleBindings=w}(v,S,d,h,w,f)}}function Ll(l,d,h,f,v){let S=null;const w=h.directiveEnd;let T=h.directiveStylingLast;for(-1===T?T=h.directiveStart:T++;T<w&&(S=d[T],f=ag(f,S.hostAttrs,v),S!==l);)T++;return null!==l&&(h.directiveStylingLast=T),f}function ag(l,d,h){const f=h?1:2;let v=-1;if(null!==d)for(let S=0;S<d.length;S++){const w=d[S];"number"==typeof w?v=w:v===f&&(Array.isArray(l)||(l=void 0===l?[]:["",l]),mr(l,w,!!h||d[++S]))}return void 0===l?null:l}function hb(l,d,h,f,v,S,w,T){if(!(3&d.type))return;const M=l.data,V=M[T+1];pb(function Ov(l){return 1==(1&l)}(V)?y0(M,d,h,v,Na(V),w):void 0)||(pb(S)||function xh(l){return 2==(2&l)}(V)&&(S=y0(M,null,h,v,T,w)),function bE(l,d,h,f,v){if(d)v?l.addClass(h,f):l.removeClass(h,f);else{let S=-1===f.indexOf("-")?void 0:Sl.DashCase;null==v?l.removeStyle(h,f,S):("string"==typeof v&&v.endsWith("!important")&&(v=v.slice(0,-10),S|=Sl.Important),l.setStyle(h,f,v,S))}}(f,w,wa(Jn(),h),v,S))}function y0(l,d,h,f,v,S){const w=null===d;let T;for(;v>0;){const M=l[v],V=Array.isArray(M),W=V?M[1]:M,Q=null===W;let de=h[v+1];de===Tt&&(de=Q?ei:void 0);let we=Q?Kw(de,f):W===f?de:void 0;if(V&&!pb(we)&&(we=Kw(M,f)),pb(we)&&(T=we,w))return T;const Fe=l[v+1];v=w?Fa(Fe):Na(Fe)}if(null!==d){let M=S?d.residualClasses:d.residualStyles;null!=M&&(T=Kw(M,f))}return T}function pb(l){return void 0!==l}function gb(l,d){return 0!=(l.flags&(d?16:32))}function Zh(l,d=""){const h=Ve(),f=li(),v=l+22,S=f.firstCreatePass?zf(f,v,1,d,null):f.data[v],w=h[v]=dv(h[11],d);fv(f,h,w,S),Ea(S,!1)}function Bc(l){return ru("",l,""),Bc}function ru(l,d,h){const f=Ve(),v=Zf(f,l,d,h);return v!==Tt&&function ka(l,d,h){const f=wa(d,l);aE(l[11],f,h)}(f,Jn(),v),ru}function hg(l,d,h){const f=Ve();return Vi(f,Da(),d)&&vo(li(),tn(),f,l,d,f[11],h,!0),hg}const Zo=void 0;var pg=["en",[["a","p"],["AM","PM"],Zo],[["AM","PM"],Zo,Zo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Zo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Zo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Zo,"{1} 'at' {0}",Zo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function wb(l){const h=Math.floor(Math.abs(l)),f=l.toString().replace(/^[^.]*\.?/,"").length;return 1===h&&0===f?1:5}];let ms={};function iC(l){const d=function sC(l){return l.toLowerCase().replace(/_/g,"-")}(l);let h=Qh(d);if(h)return h;const f=d.split("-")[0];if(h=Qh(f),h)return h;if("en"===f)return pg;throw new je(701,!1)}function nC(l){return iC(l)[_t.PluralCase]}function Qh(l){return l in ms||(ms[l]=wi.ng&&wi.ng.common&&wi.ng.common.locales&&wi.ng.common.locales[l]),ms[l]}var _t=(()=>((_t=_t||{})[_t.LocaleId=0]="LocaleId",_t[_t.DayPeriodsFormat=1]="DayPeriodsFormat",_t[_t.DayPeriodsStandalone=2]="DayPeriodsStandalone",_t[_t.DaysFormat=3]="DaysFormat",_t[_t.DaysStandalone=4]="DaysStandalone",_t[_t.MonthsFormat=5]="MonthsFormat",_t[_t.MonthsStandalone=6]="MonthsStandalone",_t[_t.Eras=7]="Eras",_t[_t.FirstDayOfWeek=8]="FirstDayOfWeek",_t[_t.WeekendRange=9]="WeekendRange",_t[_t.DateFormat=10]="DateFormat",_t[_t.TimeFormat=11]="TimeFormat",_t[_t.DateTimeFormat=12]="DateTimeFormat",_t[_t.NumberSymbols=13]="NumberSymbols",_t[_t.NumberFormats=14]="NumberFormats",_t[_t.CurrencyCode=15]="CurrencyCode",_t[_t.CurrencySymbol=16]="CurrencySymbol",_t[_t.CurrencyName=17]="CurrencyName",_t[_t.Currencies=18]="Currencies",_t[_t.Directionality=19]="Directionality",_t[_t.PluralCase=20]="PluralCase",_t[_t.ExtraData=21]="ExtraData",_t))();const A0=["zero","one","two","few","many"],Er="en-US",gg={marker:"element"},ou={marker:"ICU"};var fn=(()=>((fn=fn||{})[fn.SHIFT=2]="SHIFT",fn[fn.APPEND_EAGERLY=1]="APPEND_EAGERLY",fn[fn.COMMENT=2]="COMMENT",fn))();let Eb=Er;function mg(l){(function Ys(l,d){null==l&&ii(d,l,null,"!=")})(l,"Expected localeId to be defined"),"string"==typeof l&&(Eb=l.toLowerCase().replace(/_/g,"-"))}function ep(l,d,h){const f=d.insertBeforeIndex,v=Array.isArray(f)?f[0]:f;return null===v?gE(l,0,h):hn(h[v])}function WA(l,d,h,f,v){const S=d.insertBeforeIndex;if(Array.isArray(S)){let w=f,T=null;if(3&d.type||(T=w,w=v),null!==w&&0==(2&d.flags))for(let M=1;M<S.length;M++)er(l,w,h[S[M]],T,!1)}}function Tb(l,d){if(l.push(d),l.length>1)for(let h=l.length-2;h>=0;h--){const f=l[h];rC(f)||iI(f,d)&&null===O0(f)&&oC(f,d.index)}}function rC(l){return!(64&l.type)}function iI(l,d){return rC(d)||l.index>d.index}function O0(l){const d=l.insertBeforeIndex;return Array.isArray(d)?d[0]:d}function oC(l,d){const h=l.insertBeforeIndex;Array.isArray(h)?h[0]=d:(vE(ep,WA),l.insertBeforeIndex=d)}function Ha(l,d){const h=l.data[d];return null===h||"string"==typeof h?null:h.hasOwnProperty("currentCaseLViewIndex")?h:h.value}function M0(l,d,h){const f=ZE(l,h,64,null,null);return Tb(d,f),f}function au(l,d){const h=d[l.currentCaseLViewIndex];return null===h?h:h<0?~h:h}function lC(l){return l>>>17}function tp(l){return(131070&l)>>>1}let cC=0,kl=0;function zA(l,d,h,f){const v=h[11];let w,S=null;for(let T=0;T<d.length;T++){const M=d[T];if("string"==typeof M){const V=d[++T];null===h[V]&&(h[V]=dv(v,M))}else if("number"==typeof M)switch(1&M){case 0:const V=lC(M);let W,Q;if(null===S&&(S=V,w=Vo(v,f)),V===S?(W=f,Q=w):(W=null,Q=hn(h[V])),null!==Q){const $e=tp(M);er(v,Q,h[$e],W,!1);const dt=Ha(l,$e);if(null!==dt&&"object"==typeof dt){const wt=au(dt,h);null!==wt&&zA(l,dt.create[wt],h,h[dt.anchorIdx])}}break;case 1:const we=d[++T],Fe=d[++T];a0(v,wa(M>>>1,h),null,null,we,Fe,null)}else switch(M){case ou:const V=d[++T],W=d[++T];null===h[W]&&ji(h[W]=lE(v,V),h);break;case gg:const Q=d[++T],de=d[++T];null===h[de]&&ji(h[de]=mS(v,Q,null),h)}}}function $A(l,d,h,f,v){for(let S=0;S<h.length;S++){const w=h[S],T=h[++S];if(w&v){let M="";for(let V=S+1;V<=S+T;V++){const W=h[V];if("string"==typeof W)M+=W;else if("number"==typeof W)if(W<0)M+=Ye(d[f-W]);else{const Q=W>>>2;switch(3&W){case 1:const de=h[++V],we=h[++V],Fe=l.data[Q];"string"==typeof Fe?a0(d[11],d[Q],null,Fe,de,M,we):vo(l,Fe,d,de,M,d[11],we,!1);break;case 0:const $e=d[Q];null!==$e&&aE(d[11],$e,M);break;case 2:En(l,Ha(l,Q),d,M);break;case 3:Ua(l,Ha(l,Q),f,d)}}}}else{const M=h[S+1];if(M>0&&3==(3&M)){const W=Ha(l,M>>>2);d[W.currentCaseLViewIndex]<0&&Ua(l,W,f,d)}}S+=T}}function Ua(l,d,h,f){let v=f[d.currentCaseLViewIndex];if(null!==v){let S=cC;v<0&&(v=f[d.currentCaseLViewIndex]=~v,S=-1),$A(l,f,d.update[v],h,S)}}function En(l,d,h,f){const v=function rI(l,d){let h=l.cases.indexOf(d);if(-1===h)switch(l.type){case 1:{const f=function HA(l,d){const h=nC(d)(parseInt(l,10)),f=A0[h];return void 0!==f?f:"other"}(d,function Db(){return Eb}());h=l.cases.indexOf(f),-1===h&&"other"!==f&&(h=l.cases.indexOf("other"));break}case 0:h=l.cases.indexOf("other")}return-1===h?null:h}(d,f);if(au(d,h)!==v&&(ks(l,d,h),h[d.currentCaseLViewIndex]=null===v?null:~v,null!==v)){const w=h[d.anchorIdx];w&&zA(l,d.create[v],h,w)}}function ks(l,d,h){let f=au(d,h);if(null!==f){const v=d.remove[f];for(let S=0;S<v.length;S++){const w=v[S];if(w>0){const T=wa(w,h);null!==T&&CE(h[11],T)}else ks(l,Ha(l,~w),h)}}}function x0(){const l=[];let h,f,d=-1;function S(T,M){d=0;const V=au(T,M);f=null!==V?T.remove[V]:ei}function w(){if(d<f.length){const T=f[d++];return T>0?h[T]:(l.push(d,f),S(h[1].data[~T],h),w())}return 0===l.length?null:(f=l.pop(),d=l.pop(),w())}return function v(T,M){for(h=M;l.length;)l.pop();return S(T.value,M),w}}const Qo=/\ufffd(\d+):?\d*\ufffd/gi,Ab=/\ufffd(\d+)\ufffd/,Cg=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,dC=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,ip=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,_o=/\uE500/g;function yg(l,d,h,f,v,S,w){const T=$f(l,f,1,null);let M=T<<fn.SHIFT,V=Ed();d===V&&(V=null),null===V&&(M|=fn.APPEND_EAGERLY),w&&(M|=fn.COMMENT,function xR(l){void 0===lv&&(lv=l())}(x0)),v.push(M,null===S?"":S);const W=ZE(l,T,w?32:1,null===S?"":S,null);Tb(h,W);const Q=W.index;return Ea(W,!1),null!==V&&d!==V&&function Hc(l,d){let h=l.insertBeforeIndex;null===h?(vE(ep,WA),h=l.insertBeforeIndex=[null,d]):(function co(l,d,h){l!=d&&ii(h,l,d,"==")}(Array.isArray(h),!0,"Expecting array here"),h.push(d))}(V,Q),W}function YA(l,d,h,f,v,S,w){const T=w.match(Qo),M=yg(l,d,h,S,f,T?null:w,!1);T&&cu(v,w,M.index,null,0,null)}function cu(l,d,h,f,v,S){const w=l.length,T=w+1;l.push(null,null);const M=w+2,V=d.split(Qo);let W=0;for(let Q=0;Q<V.length;Q++){const de=V[Q];if(1&Q){const we=v+parseInt(de,10);l.push(-1-we),W|=Mb(we)}else""!==de&&l.push(de)}return l.push(h<<2|(f?1:0)),f&&l.push(f,S),l[w]=W,l[T]=l.length-M,W}function Mb(l){return 1<<Math.min(l,31)}function qA(l){let d,S,h="",f=0,v=!1;for(;null!==(d=dC.exec(l));)v?d[0]===`\ufffd/*${S}\ufffd`&&(f=d.index,v=!1):(h+=l.substring(f,d.index+d[0].length),S=d[1],v=!0);return h+=l.slice(f),h}function XA(l,d,h,f,v,S){let w=0;const T={type:v.type,currentCaseLViewIndex:$f(l,d,1,null),anchorIdx:S,cases:[],create:[],remove:[],update:[]};(function Sg(l,d,h){l.push(Mb(d.mainBinding),2,-1-d.mainBinding,h<<2|2)})(h,v,S),function aC(l,d,h){const f=l.data[d];null===f?l.data[d]=h:f.value=h}(l,S,T);const M=v.values;for(let V=0;V<M.length;V++){const W=M[V],Q=[];for(let de=0;de<W.length;de++){const we=W[de];if("string"!=typeof we){const Fe=Q.push(we)-1;W[de]=`\x3c!--\ufffd${Fe}\ufffd--\x3e`}}w=aI(l,T,d,h,f,v.cases[V],W.join(""),Q)|w}w&&function JA(l,d,h){l.push(d,1,h<<2|3)}(h,w,S)}function ZA(l){const d=[],h=[];let f=1,v=0;const S=F0(l=l.replace(Cg,function(w,T,M){return f="select"===M?0:1,v=parseInt(T.slice(1),10),""}));for(let w=0;w<S.length;){let T=S[w++].trim();1===f&&(T=T.replace(/\s*(?:=)?(\w+)\s*/,"$1")),T.length&&d.push(T);const M=F0(S[w++]);d.length>h.length&&h.push(M)}return{type:f,mainBinding:v,cases:d,values:h}}function F0(l){if(!l)return[];let d=0;const h=[],f=[],v=/[{}]/g;let S;for(v.lastIndex=0;S=v.exec(l);){const T=S.index;if("}"==S[0]){if(h.pop(),0==h.length){const M=l.substring(d,T);Cg.test(M)?f.push(ZA(M)):f.push(M),d=T+1}}else{if(0==h.length){const M=l.substring(d,T);f.push(M),d=T+1}h.push("{")}}const w=l.substring(d);return f.push(w),f}function aI(l,d,h,f,v,S,w,T){const M=[],V=[],W=[];d.cases.push(S),d.create.push(M),d.remove.push(V),d.update.push(W);const de=function Of(l){const d=new Jx(l);return function Eh(){try{return!!(new window.DOMParser).parseFromString(Id(""),"text/html")}catch{return!1}}()?new Ho(d):d}(function wc(){return void 0!==Fd?Fd:typeof document<"u"?document:void 0}()).getInertBodyElement(w),we=function PS(l){return"content"in l&&function HR(l){return l.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===l.nodeName}(l)?l.content:null}(de)||de;return we?xb(l,d,h,f,M,V,W,we,v,T,0):0}function xb(l,d,h,f,v,S,w,T,M,V,W){let Q=0,de=T.firstChild;for(;de;){const we=$f(l,h,1,null);switch(de.nodeType){case Node.ELEMENT_NODE:const Fe=de,$e=Fe.tagName.toLowerCase();if(MS.hasOwnProperty($e)){Ib(v,gg,$e,M,we),l.data[we]=$e;const ke=Fe.attributes;for(let mt=0;mt<ke.length;mt++){const pi=ke.item(mt),Bi=pi.name.toLowerCase();pi.value.match(Qo)?VR.hasOwnProperty(Bi)&&cu(w,pi.value,we,pi.name,0,Ur[Bi]?Dh:null):lI(v,we,pi)}Q=xb(l,d,h,f,v,S,w,de,we,V,W+1)|Q,N0(S,we,W)}break;case Node.TEXT_NODE:const Qe=de.textContent||"",dt=Qe.match(Qo);Ib(v,null,dt?"":Qe,M,we),N0(S,we,W),dt&&(Q=cu(w,Qe,we,null,0,null)|Q);break;case Node.COMMENT_NODE:const wt=Ab.exec(de.textContent||"");if(wt){const mt=V[parseInt(wt[1],10)];Ib(v,ou,"",M,we),XA(l,h,f,M,mt,we),Pb(S,we,W)}}de=de.nextSibling}return Q}function N0(l,d,h){0===h&&l.push(d)}function Pb(l,d,h){0===h&&(l.push(~d),l.push(d))}function Ib(l,d,h,f,v){null!==d&&l.push(d),l.push(h,v,function lu(l,d,h){return l|d<<17|h<<1}(0,f,v))}function lI(l,d,h){l.push(d<<1|1,h.name,h.value)}function bg(l,d,h=-1){const f=li(),v=Ve(),S=22+l,w=po(f.consts,d),T=Ed();f.firstCreatePass&&function I0(l,d,h,f,v,S){const w=Ed(),T=[],M=[],V=[[]];v=function R1(l,d){if(function hC(l){return-1===l}(d))return qA(l);{const h=l.indexOf(`:${d}\ufffd`)+2+d.toString().length,f=l.search(new RegExp(`\ufffd\\/\\*\\d+:${d}\ufffd`));return qA(l.substring(h,f))}}(v,S);const W=function Dr(l){return l.replace(_o," ")}(v).split(ip);for(let Q=0;Q<W.length;Q++){let de=W[Q];if(0==(1&Q)){const we=F0(de);for(let Fe=0;Fe<we.length;Fe++){let $e=we[Fe];if(0==(1&Fe)){const Qe=$e;""!==Qe&&YA(l,w,V[0],T,M,h,Qe)}else{const Qe=$e;if("object"!=typeof Qe)throw new Error(`Unable to parse ICU expression in "${v}" message.`);XA(l,h,M,d,Qe,yg(l,w,V[0],h,T,"",!0).index)}}}else{const we=47===de.charCodeAt(0),$e=(de.charCodeAt(we?1:0),22+Number.parseInt(de.substring(we?2:1)));if(we)V.shift(),Ea(Ed(),!1);else{const Qe=M0(l,V[0],$e);V.unshift([]),Ea(Qe,!0)}}}l.data[f]={create:T,update:M}}(f,null===T?0:T.index,v,S,w,h);const M=f.data[S],W=SS(f,T===v[6]?null:T,v);(function D1(l,d,h,f){const v=l[11];for(let S=0;S<d.length;S++){const w=d[S++],T=d[S],M=(w&fn.COMMENT)===fn.COMMENT,V=(w&fn.APPEND_EAGERLY)===fn.APPEND_EAGERLY,W=w>>>fn.SHIFT;let Q=l[W];null===Q&&(Q=l[W]=M?v.createComment(T):dv(v,T)),V&&null!==h&&er(v,h,Q,f,!1)}})(v,M.create,W,T&&8&T.type?v[T.index]:null),Pw(!0)}function _g(l,d,h){bg(l,d,h),function Nb(){Pw(!1)}()}function np(l){return function nI(l){l&&(cC|=1<<Math.min(kl,31)),kl++}(Vi(Ve(),Da(),l)),np}function V0(l){!function sI(l,d,h){if(kl>0){const f=l.data[h];$A(l,d,Array.isArray(f)?f:f.update,function ml(){return Rt.lFrame.bindingIndex}()-kl-1,cC)}cC=0,kl=0}(li(),Ve(),l+22)}function Uc(l,d,h,f,v){if(l=ut(l),Array.isArray(l))for(let S=0;S<l.length;S++)Uc(l[S],d,h,f,v);else{const S=li(),w=Ve();let T=Ld(l)?l:ut(l.provide),M=Pf(l);const V=Mn(),W=1048575&V.providerIndexes,Q=V.directiveStart,de=V.providerIndexes>>20;if(Ld(l)||!l.multi){const we=new Ge(M,v,Hf),Fe=B0(T,d,v?W:W+de,Q);-1===Fe?(Km(zm(V,w),S,T),eO(S,l,d.length),d.push(T),V.directiveStart++,V.directiveEnd++,v&&(V.providerIndexes+=1048576),h.push(we),w.push(we)):(h[Fe]=we,w[Fe]=we)}else{const we=B0(T,d,W+de,Q),Fe=B0(T,d,W,W+de),$e=we>=0&&h[we],Qe=Fe>=0&&h[Fe];if(v&&!Qe||!v&&!$e){Km(zm(V,w),S,T);const dt=function iO(l,d,h,f,v){const S=new Ge(l,h,Hf);return S.multi=[],S.index=d,S.componentProviders=0,tO(S,v,f&&!h),S}(v?kb:H0,h.length,v,f,M);!v&&Qe&&(h[Fe].providerFactory=dt),eO(S,l,d.length,0),d.push(T),V.directiveStart++,V.directiveEnd++,v&&(V.providerIndexes+=1048576),h.push(dt),w.push(dt)}else eO(S,l,we>-1?we:Fe,tO(h[v?Fe:we],M,!v&&f));!v&&f&&Qe&&h[Fe].componentProviders++}}}function eO(l,d,h,f){const v=Ld(d),S=function zR(l){return!!l.useClass}(d);if(v||S){const M=(S?ut(d.useClass):d).prototype.ngOnDestroy;if(M){const V=l.destroyHooks||(l.destroyHooks=[]);if(!v&&d.multi){const W=V.indexOf(h);-1===W?V.push(h,[f,M]):V[W+1].push(f,M)}else V.push(h,M)}}}function tO(l,d,h){return h&&l.componentProviders++,l.multi.push(d)-1}function B0(l,d,h,f){for(let v=h;v<f;v++)if(d[v]===l)return v;return-1}function H0(l,d,h,f){return wg(this.multi,[])}function kb(l,d,h,f){const v=this.multi;let S;if(this.providerFactory){const w=this.providerFactory.componentProviders,T=Qy(h,h[1],this.providerFactory.index,f);S=T.slice(0,w),wg(v,S);for(let M=w;M<T.length;M++)S.push(T[M])}else S=[],wg(v,S);return S}function wg(l,d){for(let h=0;h<l.length;h++)d.push((0,l[h])());return d}function fC(l,d=[]){return h=>{h.providersResolver=(f,v)=>function pC(l,d,h){const f=li();if(f.firstCreatePass){const v=Hr(l);Uc(h,f.data,f.blueprint,v,!0),Uc(d,f.data,f.blueprint,v,!1)}}(f,v?v(l):l,d)}}class du{}function O1(l,d){return new ns(l,d??null)}class ns extends du{constructor(d,h){super(),this._parent=h,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Xd(this);const f=function kr(l,d){const h=l[Ca]||null;if(!h&&!0===d)throw new Error(`Type ${C(l)} does not have '\u0275mod' property.`);return h}(d);this._bootstrapComponents=function bn(l){return l instanceof Function?l():l}(f.bootstrap),this._r3Injector=HE(d,h,[{provide:du,useValue:this},{provide:_v,useValue:this.componentFactoryResolver}],C(d),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(d)}get injector(){return this._r3Injector}destroy(){const d=this._r3Injector;!d.destroyed&&d.destroy(),this.destroyCbs.forEach(h=>h()),this.destroyCbs=null}onDestroy(d){this.destroyCbs.push(d)}}class ea extends class Gb{}{constructor(d){super(),this.moduleType=d}create(d){return new ns(this.moduleType,d)}}class jt extends du{constructor(d,h,f){super(),this.componentFactoryResolver=new Xd(this),this.instance=null;const v=new Wr([...d,{provide:du,useValue:this},{provide:_v,useValue:this.componentFactoryResolver}],h||El(),f,new Set(["environment"]));this.injector=v,v.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(d){this.injector.onDestroy(d)}}let Gl=(()=>{class l{constructor(h){this._injector=h,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(h){if(!h.standalone)return null;if(!this.cachedInjectors.has(h.id)){const f=re(0,h.type),v=f.length>0?function sp(l,d,h=null){return new jt(l,d,h).injector}([f],this._injector,`Standalone[${h.type.name}]`):null;this.cachedInjectors.set(h.id,v)}return this.cachedInjectors.get(h.id)}ngOnDestroy(){try{for(const h of this.cachedInjectors.values())null!==h&&h.destroy()}finally{this.cachedInjectors.clear()}}}return l.\u0275prov=An({token:l,providedIn:"environment",factory:()=>new l(xn(kd))}),l})();function nO(l){l.getStandaloneInjector=d=>d.get(Gl).getOrCreateStandaloneInjector(l)}function Ub(l,d,h,f){return function mC(l,d,h,f,v,S){const w=d+h;return Vi(l,w,v)?sr(l,w+1,S?f.call(S,v):f(v)):Bl(l,w+1)}(Ve(),on(),l,d,h,f)}function gC(l,d,h,f,v){return function op(l,d,h,f,v,S,w){const T=d+h;return Ga(l,T,v,S)?sr(l,T+2,w?f.call(w,v,S):f(v,S)):Bl(l,T+2)}(Ve(),on(),l,d,h,f,v)}function rp(l,d,h,f,v,S){return function zb(l,d,h,f,v,S,w,T){const M=d+h;return function qr(l,d,h,f,v){const S=Ga(l,d,h,f);return Vi(l,d+2,v)||S}(l,M,v,S,w)?sr(l,M+3,T?f.call(T,v,S,w):f(v,S,w)):Bl(l,M+3)}(Ve(),on(),l,d,h,f,v,S)}function Bl(l,d){const h=l[d];return h===Tt?void 0:h}function j0(l){return d=>{setTimeout(l,void 0,d)}}const Ul=class Ya extends F.xQ{constructor(d=!1){super(),this.__isAsync=d}emit(d){super.next(d)}subscribe(d,h,f){let v=d,S=h||(()=>null),w=f;if(d&&"object"==typeof d){const M=d;v=M.next?.bind(M),S=M.error?.bind(M),w=M.complete?.bind(M)}this.__isAsync&&(S=j0(S),v&&(v=j0(v)),w&&(w=j0(w)));const T=super.subscribe({next:v,error:S,complete:w});return d instanceof $.w&&d.add(T),T}};function pI(){return this._results[Bh()]()}class z0{constructor(d=!1){this._emitDistinctChangesOnly=d,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const h=Bh(),f=z0.prototype;f[h]||(f[h]=pI)}get changes(){return this._changes||(this._changes=new Ul)}get(d){return this._results[d]}map(d){return this._results.map(d)}filter(d){return this._results.filter(d)}find(d){return this._results.find(d)}reduce(d,h){return this._results.reduce(d,h)}forEach(d){this._results.forEach(d)}some(d){return this._results.some(d)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(d,h){const f=this;f.dirty=!1;const v=st(d);(this._changesDetected=!function gh(l,d,h){if(l.length!==d.length)return!1;for(let f=0;f<l.length;f++){let v=l[f],S=d[f];if(h&&(v=h(v),S=h(S)),S!==v)return!1}return!0}(f._results,v,h))&&(f._results=v,f.length=v.length,f.last=v[this.length-1],f.first=v[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let CC=(()=>{class l{}return l.__NG_ELEMENT_ID__=Wl,l})();const fI=CC,gI=class extends fI{constructor(d,h,f){super(),this._declarationLView=d,this._declarationTContainer=h,this.elementRef=f}createEmbeddedView(d,h){const f=this._declarationTContainer.tViews,v=bt(this._declarationLView,f,d,16,null,f.declTNode,null,null,null,null,h||null);v[17]=this._declarationLView[this._declarationTContainer.index];const w=this._declarationLView[19];return null!==w&&(v[19]=w.createEmbeddedView(f)),YS(f,v,d),new xl(v)}};function Wl(){return Hn(Mn(),Ve())}function Hn(l,d){return 4&l.type?new gI(d,l,Ah(l,d)):null}let qb=(()=>{class l{}return l.__NG_ELEMENT_ID__=aO,l})();function aO(){return fu(Mn(),Ve())}const vs=qb,yC=class extends vs{constructor(d,h,f){super(),this._lContainer=d,this._hostTNode=h,this._hostLView=f}get element(){return Ah(this._hostTNode,this._hostLView)}get injector(){return new Ym(this._hostTNode,this._hostLView)}get parentInjector(){const d=Jy(this._hostTNode,this._hostLView);if(uf(d)){const h=hf(d,this._hostLView),f=Td(d);return new Ym(h[1].data[f+8],h)}return new Ym(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(d){const h=pu(this._lContainer);return null!==h&&h[d]||null}get length(){return this._lContainer.length-10}createEmbeddedView(d,h,f){let v,S;"number"==typeof f?v=f:null!=f&&(v=f.index,S=f.injector);const w=d.createEmbeddedView(h||{},S);return this.insert(w,v),w}createComponent(d,h,f,v,S){const w=d&&!function Od(l){return"function"==typeof l}(d);let T;if(w)T=h;else{const Q=h||{};T=Q.index,f=Q.injector,v=Q.projectableNodes,S=Q.environmentInjector||Q.ngModuleRef}const M=w?d:new Pl(Ai(d)),V=f||this.parentInjector;if(!S&&null==M.ngModule){const de=(w?V:this.parentInjector).get(kd,null);de&&(S=de)}const W=M.create(V,v,void 0,S);return this.insert(W.hostView,T),W}insert(d,h){const f=d._lView,v=f[1];if(function Rw(l){return Br(l[3])}(f)){const W=this.indexOf(d);if(-1!==W)this.detach(W);else{const Q=f[3],de=new yC(Q,Q[6],Q[3]);de.detach(de.indexOf(d))}}const S=this._adjustIndex(h),w=this._lContainer;!function cE(l,d,h,f){const v=10+f,S=h.length;f>0&&(h[v-1][4]=d),f<S-10?(d[4]=h[v],Zm(h,10+f,d)):(h.push(d),d[4]=null),d[3]=h;const w=d[17];null!==w&&h!==w&&function dE(l,d){const h=l[9];d[16]!==d[3][3][16]&&(l[2]=!0),null===h?l[9]=[d]:h.push(d)}(w,d);const T=d[19];null!==T&&T.insertView(l),d[2]|=64}(v,f,w,S);const T=wS(S,w),M=f[11],V=Vo(M,w[7]);return null!==V&&function IR(l,d,h,f,v,S){f[0]=v,f[6]=d,gv(l,f,h,1,v,S)}(v,w[6],M,f,V,T),d.attachToViewContainerRef(),Zm(Og(w),S,d),d}move(d,h){return this.insert(d,h)}indexOf(d){const h=pu(this._lContainer);return null!==h?h.indexOf(d):-1}remove(d){const h=this._adjustIndex(d,-1),f=Df(this._lContainer,h);f&&(mh(Og(this._lContainer),h),CS(f[1],f))}detach(d){const h=this._adjustIndex(d,-1),f=Df(this._lContainer,h);return f&&null!=mh(Og(this._lContainer),h)?new xl(f):null}_adjustIndex(d,h=0){return d??this.length+h}};function pu(l){return l[8]}function Og(l){return l[8]||(l[8]=[])}function fu(l,d){let h;const f=d[l.index];if(Br(f))h=f;else{let v;if(8&l.type)v=hn(f);else{const S=d[11];v=S.createComment("");const w=Zn(l,d);er(S,Vo(S,w),v,function fE(l,d){return l.nextSibling(d)}(S,w),!1)}d[l.index]=h=Al(f,d,v,l),Fc(d,h)}return new yC(h,l,d)}class lp{constructor(d){this.queryList=d,this.matches=null}clone(){return new lp(this.queryList)}setDirty(){this.queryList.setDirty()}}class K0{constructor(d=[]){this.queries=d}createEmbeddedView(d){const h=d.queries;if(null!==h){const f=null!==d.contentQueries?d.contentQueries[0]:h.length,v=[];for(let S=0;S<f;S++){const w=h.getByIndex(S);v.push(this.queries[w.indexInDeclarationView].clone())}return new K0(v)}return null}insertView(d){this.dirtyQueriesWithMatches(d)}detachView(d){this.dirtyQueriesWithMatches(d)}dirtyQueriesWithMatches(d){for(let h=0;h<this.queries.length;h++)null!==X0(d,h).matches&&this.queries[h].setDirty()}}class Mg{constructor(d,h,f=null){this.predicate=d,this.flags=h,this.read=f}}class Tr{constructor(d=[]){this.queries=d}elementStart(d,h){for(let f=0;f<this.queries.length;f++)this.queries[f].elementStart(d,h)}elementEnd(d){for(let h=0;h<this.queries.length;h++)this.queries[h].elementEnd(d)}embeddedTView(d){let h=null;for(let f=0;f<this.length;f++){const v=null!==h?h.length:0,S=this.getByIndex(f).embeddedTView(d,v);S&&(S.indexInDeclarationView=f,null!==h?h.push(S):h=[S])}return null!==h?new Tr(h):null}template(d,h){for(let f=0;f<this.queries.length;f++)this.queries[f].template(d,h)}getByIndex(d){return this.queries[d]}get length(){return this.queries.length}track(d){this.queries.push(d)}}class SC{constructor(d,h=-1){this.metadata=d,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=h}elementStart(d,h){this.isApplyingToNode(h)&&this.matchTNode(d,h)}elementEnd(d){this._declarationNodeIndex===d.index&&(this._appliesToNextNode=!1)}template(d,h){this.elementStart(d,h)}embeddedTView(d,h){return this.isApplyingToNode(d)?(this.crossesNgTemplate=!0,this.addMatch(-d.index,h),new SC(this.metadata)):null}isApplyingToNode(d){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const h=this._declarationNodeIndex;let f=d.parent;for(;null!==f&&8&f.type&&f.index!==h;)f=f.parent;return h===(null!==f?f.index:-1)}return this._appliesToNextNode}matchTNode(d,h){const f=this.metadata.predicate;if(Array.isArray(f))for(let v=0;v<f.length;v++){const S=f[v];this.matchTNodeWithReadOption(d,h,Xb(h,S)),this.matchTNodeWithReadOption(d,h,Ww(h,d,S,!1,!1))}else f===CC?4&h.type&&this.matchTNodeWithReadOption(d,h,-1):this.matchTNodeWithReadOption(d,h,Ww(h,d,f,!1,!1))}matchTNodeWithReadOption(d,h,f){if(null!==f){const v=this.metadata.read;if(null!==v)if(v===Ff||v===qb||v===CC&&4&h.type)this.addMatch(h.index,-2);else{const S=Ww(h,d,v,!1,!1);null!==S&&this.addMatch(h.index,S)}else this.addMatch(h.index,f)}}addMatch(d,h){null===this.matches?this.matches=[d,h]:this.matches.push(d,h)}}function Xb(l,d){const h=l.localNames;if(null!==h)for(let f=0;f<h.length;f+=2)if(h[f]===d)return h[f+1];return null}function Zb(l,d,h,f){return-1===h?function dO(l,d){return 11&l.type?Ah(l,d):4&l.type?Hn(l,d):null}(d,l):-2===h?function xg(l,d,h){return h===Ff?Ah(d,l):h===CC?Hn(d,l):h===qb?fu(d,l):void 0}(l,d,f):Qy(l,l[1],h,d)}function Y0(l,d,h,f){const v=d[19].queries[f];if(null===v.matches){const S=l.data,w=h.matches,T=[];for(let M=0;M<w.length;M+=2){const V=w[M];T.push(V<0?null:Zb(d,S[V],w[M+1],h.metadata.read))}v.matches=T}return v.matches}function jl(l,d,h,f){const v=l.queries.getByIndex(h),S=v.matches;if(null!==S){const w=Y0(l,d,v,h);for(let T=0;T<S.length;T+=2){const M=S[T];if(M>0)f.push(w[T/2]);else{const V=S[T+1],W=d[-M];for(let Q=10;Q<W.length;Q++){const de=W[Q];de[17]===de[3]&&jl(de[1],de,V,f)}if(null!==W[9]){const Q=W[9];for(let de=0;de<Q.length;de++){const we=Q[de];jl(we[1],we,V,f)}}}}}return f}function uO(l){const d=Ve(),h=li(),f=$y();Iw(f+1);const v=X0(h,f);if(l.dirty&&function Wy(l){return 4==(4&l[2])}(d)===(2==(2&v.metadata.flags))){if(null===v.matches)l.reset([]);else{const S=v.crossesNgTemplate?jl(h,d,f,[]):Y0(h,d,v,f);l.reset(S,Nf),l.notifyOnChanges()}return!0}return!1}function q0(l,d,h){const f=li();f.firstCreatePass&&(ia(f,new Mg(l,d,h),-1),2==(2&d)&&(f.staticViewQueries=!0)),wC(f,Ve(),d)}function bC(l,d,h,f){const v=li();if(v.firstCreatePass){const S=Mn();ia(v,new Mg(d,h,f),S.index),function or(l,d){const h=l.contentQueries||(l.contentQueries=[]);d!==(h.length?h[h.length-1]:-1)&&h.push(l.queries.length-1,d)}(v,l),2==(2&h)&&(v.staticContentQueries=!0)}wC(v,Ve(),h)}function _C(){return function $c(l,d){return l[19].queries[d].queryList}(Ve(),$y())}function wC(l,d,h){const f=new z0(4==(4&h));gA(l,d,f,f.destroy),null===d[19]&&(d[19]=new K0),d[19].queries.push(new lp(f))}function ia(l,d,h){null===l.queries&&(l.queries=new Tr),l.queries.track(new SC(d,h))}function X0(l,d){return l.queries.getByIndex(d)}function cp(l,d){return Hn(l,d)}function Ng(...l){}const CO=new Mi("Application Initializer");let r_=(()=>{class l{constructor(h){this.appInits=h,this.resolve=Ng,this.reject=Ng,this.initialized=!1,this.done=!1,this.donePromise=new Promise((f,v)=>{this.resolve=f,this.reject=v})}runInitializers(){if(this.initialized)return;const h=[],f=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let v=0;v<this.appInits.length;v++){const S=this.appInits[v]();if(tg(S))h.push(S);else if(Uv(S)){const w=new Promise((T,M)=>{S.subscribe({complete:T,error:M})});h.push(w)}}Promise.all(h).then(()=>{f()}).catch(v=>{this.reject(v)}),0===h.length&&f(),this.initialized=!0}}return l.\u0275fac=function(h){return new(h||l)(xn(CO,8))},l.\u0275prov=An({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();const RC=new Mi("AppId",{providedIn:"root",factory:function yO(){return`${o_()}${o_()}${o_()}`}});function o_(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const SO=new Mi("Platform Initializer"),tD=new Mi("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),Yt=new Mi("appBootstrapListener"),sa=new Mi("LocaleId",{providedIn:"root",factory:()=>function Lx(l,d=Te.Default){return"number"!=typeof d&&(d=0|(d.optional&&8)|(d.host&&1)|(d.self&&2)|(d.skipSelf&&4)),xn(l,d)}(sa,Te.Optional|Te.SkipSelf)||function rs(){return typeof $localize<"u"&&$localize.locale||Er}()}),I=new Mi("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"}),wO=(()=>Promise.resolve(0))();function tt(l){typeof Zone>"u"?wO.then(()=>{l&&l.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",l)}class rn{constructor({enableLongStackTrace:d=!1,shouldCoalesceEventChangeDetection:h=!1,shouldCoalesceRunChangeDetection:f=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ul(!1),this.onMicrotaskEmpty=new Ul(!1),this.onStable=new Ul(!1),this.onError=new Ul(!1),typeof Zone>"u")throw new je(908,!1);Zone.assertZonePatched();const v=this;if(v._nesting=0,v._outer=v._inner=Zone.current,Zone.AsyncStackTaggingZoneSpec){const S=Zone.AsyncStackTaggingZoneSpec;v._inner=v._inner.fork(new S("Angular"))}Zone.TaskTrackingZoneSpec&&(v._inner=v._inner.fork(new Zone.TaskTrackingZoneSpec)),d&&Zone.longStackTraceZoneSpec&&(v._inner=v._inner.fork(Zone.longStackTraceZoneSpec)),v.shouldCoalesceEventChangeDetection=!f&&h,v.shouldCoalesceRunChangeDetection=f,v.lastRequestAnimationFrameId=-1,v.nativeRequestAnimationFrame=function AC(){let l=wi.requestAnimationFrame,d=wi.cancelAnimationFrame;if(typeof Zone<"u"&&l&&d){const h=l[Zone.__symbol__("OriginalDelegate")];h&&(l=h);const f=d[Zone.__symbol__("OriginalDelegate")];f&&(d=f)}return{nativeRequestAnimationFrame:l,nativeCancelAnimationFrame:d}}().nativeRequestAnimationFrame,function TI(l){const d=()=>{!function EO(l){l.isCheckStableRunning||-1!==l.lastRequestAnimationFrameId||(l.lastRequestAnimationFrameId=l.nativeRequestAnimationFrame.call(wi,()=>{l.fakeTopEventTask||(l.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{l.lastRequestAnimationFrameId=-1,DO(l),l.isCheckStableRunning=!0,iD(l),l.isCheckStableRunning=!1},void 0,()=>{},()=>{})),l.fakeTopEventTask.invoke()}),DO(l))}(l)};l._inner=l._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(h,f,v,S,w,T)=>{try{return Su(l),h.invokeTask(v,S,w,T)}finally{(l.shouldCoalesceEventChangeDetection&&"eventTask"===S.type||l.shouldCoalesceRunChangeDetection)&&d(),lr(l)}},onInvoke:(h,f,v,S,w,T,M)=>{try{return Su(l),h.invoke(v,S,w,T,M)}finally{l.shouldCoalesceRunChangeDetection&&d(),lr(l)}},onHasTask:(h,f,v,S)=>{h.hasTask(v,S),f===v&&("microTask"==S.change?(l._hasPendingMicrotasks=S.microTask,DO(l),iD(l)):"macroTask"==S.change&&(l.hasPendingMacrotasks=S.macroTask))},onHandleError:(h,f,v,S)=>(h.handleError(v,S),l.runOutsideAngular(()=>l.onError.emit(S)),!1)})}(v)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!rn.isInAngularZone())throw new je(909,!1)}static assertNotInAngularZone(){if(rn.isInAngularZone())throw new je(909,!1)}run(d,h,f){return this._inner.run(d,h,f)}runTask(d,h,f,v){const S=this._inner,w=S.scheduleEventTask("NgZoneEvent: "+v,d,DI,Ng,Ng);try{return S.runTask(w,h,f)}finally{S.cancelTask(w)}}runGuarded(d,h,f){return this._inner.runGuarded(d,h,f)}runOutsideAngular(d){return this._outer.run(d)}}const DI={};function iD(l){if(0==l._nesting&&!l.hasPendingMicrotasks&&!l.isStable)try{l._nesting++,l.onMicrotaskEmpty.emit(null)}finally{if(l._nesting--,!l.hasPendingMicrotasks)try{l.runOutsideAngular(()=>l.onStable.emit(null))}finally{l.isStable=!0}}}function DO(l){l.hasPendingMicrotasks=!!(l._hasPendingMicrotasks||(l.shouldCoalesceEventChangeDetection||l.shouldCoalesceRunChangeDetection)&&-1!==l.lastRequestAnimationFrameId)}function Su(l){l._nesting++,l.isStable&&(l.isStable=!1,l.onUnstable.emit(null))}function lr(l){l._nesting--,iD(l)}class $l{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new Ul,this.onMicrotaskEmpty=new Ul,this.onStable=new Ul,this.onError=new Ul}run(d,h,f){return d.apply(h,f)}runGuarded(d,h,f){return d.apply(h,f)}runOutsideAngular(d){return d()}runTask(d,h,f,v){return d.apply(h,f)}}const qc=new Mi(""),Lg=new Mi("");let nD,OC=(()=>{class l{constructor(h,f,v){this._ngZone=h,this.registry=f,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,nD||(function TO(l){nD=l}(v),v.addToWindow(f)),this._watchAngularEvents(),h.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{rn.assertNotInAngularZone(),tt(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())tt(()=>{for(;0!==this._callbacks.length;){let h=this._callbacks.pop();clearTimeout(h.timeoutId),h.doneCb(this._didWork)}this._didWork=!1});else{let h=this.getPendingTasks();this._callbacks=this._callbacks.filter(f=>!f.updateCb||!f.updateCb(h)||(clearTimeout(f.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(h=>({source:h.source,creationLocation:h.creationLocation,data:h.data})):[]}addCallback(h,f,v){let S=-1;f&&f>0&&(S=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==S),h(this._didWork,this.getPendingTasks())},f)),this._callbacks.push({doneCb:h,timeoutId:S,updateCb:v})}whenStable(h,f,v){if(v&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(h,f,v),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(h){this.registry.registerApplication(h,this)}unregisterApplication(h){this.registry.unregisterApplication(h)}findProviders(h,f,v){return[]}}return l.\u0275fac=function(h){return new(h||l)(xn(rn),xn(MC),xn(Lg))},l.\u0275prov=An({token:l,factory:l.\u0275fac}),l})(),MC=(()=>{class l{constructor(){this._applications=new Map}registerApplication(h,f){this._applications.set(h,f)}unregisterApplication(h){this._applications.delete(h)}unregisterAllApplications(){this._applications.clear()}getTestability(h){return this._applications.get(h)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(h,f=!0){return nD?.findTestabilityInTree(this,h,f)??null}}return l.\u0275fac=function(h){return new(h||l)},l.\u0275prov=An({token:l,factory:l.\u0275fac,providedIn:"platform"}),l})(),bu=null;const sD=new Mi("AllowMultipleToken"),rD=new Mi("PlatformDestroyListeners");function MO(l,d,h=[]){const f=`Platform: ${d}`,v=new Mi(f);return(S=[])=>{let w=oD();if(!w||w.injector.get(sD,!1)){const T=[...h,...S,{provide:v,useValue:!0}];l?l(T):function AO(l){if(bu&&!bu.get(sD,!1))throw new je(400,!1);bu=l;const d=l.get(_u);(function OO(l){const d=l.get(SO,null);d&&d.forEach(h=>h())})(l)}(function xO(l=[],d){return Wo.create({name:d,providers:[{provide:ir,useValue:"platform"},{provide:rD,useValue:new Set([()=>bu=null])},...l]})}(T,f))}return function MI(l){const d=oD();if(!d)throw new je(401,!1);return d}()}}function oD(){return bu?.get(_u)??null}let _u=(()=>{class l{constructor(h){this._injector=h,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(h,f){const v=function PO(l,d){let h;return h="noop"===l?new $l:("zone.js"===l?void 0:l)||new rn(d),h}(f?.ngZone,function aD(l){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!l||!l.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!l||!l.ngZoneRunCoalescing)||!1}}(f)),S=[{provide:rn,useValue:v}];return v.run(()=>{const w=Wo.create({providers:S,parent:this.injector,name:h.moduleType.name}),T=h.create(w),M=T.injector.get(Ji,null);if(!M)throw new je(402,!1);return v.runOutsideAngular(()=>{const V=v.onError.subscribe({next:W=>{M.handleError(W)}});T.onDestroy(()=>{d_(this._modules,T),V.unsubscribe()})}),function IO(l,d,h){try{const f=h();return tg(f)?f.catch(v=>{throw d.runOutsideAngular(()=>l.handleError(v)),v}):f}catch(f){throw d.runOutsideAngular(()=>l.handleError(f)),f}}(M,v,()=>{const V=T.injector.get(r_);return V.runInitializers(),V.donePromise.then(()=>(mg(T.injector.get(sa,Er)||Er),this._moduleDoBootstrap(T),T))})})}bootstrapModule(h,f=[]){const v=FO({},f);return function RI(l,d,h){const f=new ea(h);return Promise.resolve(f)}(0,0,h).then(S=>this.bootstrapModuleFactory(S,v))}_moduleDoBootstrap(h){const f=h.injector.get(c_);if(h._bootstrapComponents.length>0)h._bootstrapComponents.forEach(v=>f.bootstrap(v));else{if(!h.instance.ngDoBootstrap)throw new je(403,!1);h.instance.ngDoBootstrap(f)}this._modules.push(h)}onDestroy(h){this._destroyListeners.push(h)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new je(404,!1);this._modules.slice().forEach(f=>f.destroy()),this._destroyListeners.forEach(f=>f());const h=this._injector.get(rD,null);h&&(h.forEach(f=>f()),h.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return l.\u0275fac=function(h){return new(h||l)(xn(Wo))},l.\u0275prov=An({token:l,factory:l.\u0275fac,providedIn:"platform"}),l})();function FO(l,d){return Array.isArray(d)?d.reduce(FO,l):{...l,...d}}let c_=(()=>{class l{constructor(h,f,v){this._zone=h,this._injector=f,this._exceptionHandler=v,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const S=new Z.y(T=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{T.next(this._stable),T.complete()})}),w=new Z.y(T=>{let M;this._zone.runOutsideAngular(()=>{M=this._zone.onStable.subscribe(()=>{rn.assertNotInAngularZone(),tt(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,T.next(!0))})})});const V=this._zone.onUnstable.subscribe(()=>{rn.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{T.next(!1)}))});return()=>{M.unsubscribe(),V.unsubscribe()}});this.isStable=(0,se.T)(S,w.pipe(function Ke(){return l=>ae()(function fe(l,d){return function(f){let v;if(v="function"==typeof l?l:function(){return l},"function"==typeof d)return f.lift(new _e(v,d));const S=Object.create(f,te);return S.source=f,S.subjectFactory=v,S}}(he)(l))}()))}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(h,f){const v=h instanceof Rc;if(!this._injector.get(r_).done)throw!v&&function Xp(l){const d=Ai(l)||qn(l)||qs(l);return null!==d&&d.standalone}(h),new je(405,false);let w;w=v?h:this._injector.get(_v).resolveComponentFactory(h),this.componentTypes.push(w.componentType);const T=function RO(l){return l.isBoundToModule}(w)?void 0:this._injector.get(du),V=w.create(Wo.NULL,[],f||w.selector,T),W=V.location.nativeElement,Q=V.injector.get(qc,null);return Q?.registerApplication(W),V.onDestroy(()=>{this.detachView(V.hostView),d_(this.components,V),Q?.unregisterApplication(W)}),this._loadComponent(V),V}tick(){if(this._runningTick)throw new je(101,!1);try{this._runningTick=!0;for(let h of this._views)h.detectChanges()}catch(h){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(h))}finally{this._runningTick=!1}}attachView(h){const f=h;this._views.push(f),f.attachToAppRef(this)}detachView(h){const f=h;d_(this._views,f),f.detachFromAppRef()}_loadComponent(h){this.attachView(h.hostView),this.tick(),this.components.push(h),this._injector.get(Yt,[]).concat(this._bootstrapListeners).forEach(v=>v(h))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(h=>h()),this._views.slice().forEach(h=>h.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(h){return this._destroyListeners.push(h),()=>d_(this._destroyListeners,h)}destroy(){if(this._destroyed)throw new je(406,!1);const h=this._injector;h.destroy&&!h.destroyed&&h.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return l.\u0275fac=function(h){return new(h||l)(xn(rn),xn(kd),xn(Ji))},l.\u0275prov=An({token:l,factory:l.\u0275fac,providedIn:"root"}),l})();function d_(l,d){const h=l.indexOf(d);h>-1&&l.splice(h,1)}let LO=!0;function FI(){LO=!1}let NI=(()=>{class l{}return l.__NG_ELEMENT_ID__=LI,l})();function LI(l){return function kI(l,d,h){if(ch(l)&&!h){const f=Ms(l.index,d);return new xl(f,f)}return 47&l.type?new xl(d[16],d):null}(Mn(),Ve(),16==(16&l))}class hD{constructor(){}supports(d){return Vv(d)}create(d){return new UI(d)}}const HO=(l,d)=>d;class UI{constructor(d){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=d||HO}forEachItem(d){let h;for(h=this._itHead;null!==h;h=h._next)d(h)}forEachOperation(d){let h=this._itHead,f=this._removalsHead,v=0,S=null;for(;h||f;){const w=!f||h&&h.currentIndex<Yl(f,v,S)?h:f,T=Yl(w,v,S),M=w.currentIndex;if(w===f)v--,f=f._nextRemoved;else if(h=h._next,null==w.previousIndex)v++;else{S||(S=[]);const V=T-v,W=M-v;if(V!=W){for(let de=0;de<V;de++){const we=de<S.length?S[de]:S[de]=0,Fe=we+de;W<=Fe&&Fe<V&&(S[de]=we+1)}S[w.previousIndex]=W-V}}T!==M&&d(w,T,M)}}forEachPreviousItem(d){let h;for(h=this._previousItHead;null!==h;h=h._nextPrevious)d(h)}forEachAddedItem(d){let h;for(h=this._additionsHead;null!==h;h=h._nextAdded)d(h)}forEachMovedItem(d){let h;for(h=this._movesHead;null!==h;h=h._nextMoved)d(h)}forEachRemovedItem(d){let h;for(h=this._removalsHead;null!==h;h=h._nextRemoved)d(h)}forEachIdentityChange(d){let h;for(h=this._identityChangesHead;null!==h;h=h._nextIdentityChange)d(h)}diff(d){if(null==d&&(d=[]),!Vv(d))throw new je(900,!1);return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let v,S,w,h=this._itHead,f=!1;if(Array.isArray(d)){this.length=d.length;for(let T=0;T<this.length;T++)S=d[T],w=this._trackByFn(T,S),null!==h&&Object.is(h.trackById,w)?(f&&(h=this._verifyReinsertion(h,S,w,T)),Object.is(h.item,S)||this._addIdentityChange(h,S)):(h=this._mismatch(h,S,w,T),f=!0),h=h._next}else v=0,function $P(l,d){if(Array.isArray(l))for(let h=0;h<l.length;h++)d(l[h]);else{const h=l[Bh()]();let f;for(;!(f=h.next()).done;)d(f.value)}}(d,T=>{w=this._trackByFn(v,T),null!==h&&Object.is(h.trackById,w)?(f&&(h=this._verifyReinsertion(h,T,w,v)),Object.is(h.item,T)||this._addIdentityChange(h,T)):(h=this._mismatch(h,T,w,v),f=!0),h=h._next,v++}),this.length=v;return this._truncate(h),this.collection=d,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let d;for(d=this._previousItHead=this._itHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._additionsHead;null!==d;d=d._nextAdded)d.previousIndex=d.currentIndex;for(this._additionsHead=this._additionsTail=null,d=this._movesHead;null!==d;d=d._nextMoved)d.previousIndex=d.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(d,h,f,v){let S;return null===d?S=this._itTail:(S=d._prev,this._remove(d)),null!==(d=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null))?(Object.is(d.item,h)||this._addIdentityChange(d,h),this._reinsertAfter(d,S,v)):null!==(d=null===this._linkedRecords?null:this._linkedRecords.get(f,v))?(Object.is(d.item,h)||this._addIdentityChange(d,h),this._moveAfter(d,S,v)):d=this._addAfter(new h_(h,f),S,v),d}_verifyReinsertion(d,h,f,v){let S=null===this._unlinkedRecords?null:this._unlinkedRecords.get(f,null);return null!==S?d=this._reinsertAfter(S,d._prev,v):d.currentIndex!=v&&(d.currentIndex=v,this._addToMoves(d,v)),d}_truncate(d){for(;null!==d;){const h=d._next;this._addToRemovals(this._unlink(d)),d=h}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(d,h,f){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(d);const v=d._prevRemoved,S=d._nextRemoved;return null===v?this._removalsHead=S:v._nextRemoved=S,null===S?this._removalsTail=v:S._prevRemoved=v,this._insertAfter(d,h,f),this._addToMoves(d,f),d}_moveAfter(d,h,f){return this._unlink(d),this._insertAfter(d,h,f),this._addToMoves(d,f),d}_addAfter(d,h,f){return this._insertAfter(d,h,f),this._additionsTail=null===this._additionsTail?this._additionsHead=d:this._additionsTail._nextAdded=d,d}_insertAfter(d,h,f){const v=null===h?this._itHead:h._next;return d._next=v,d._prev=h,null===v?this._itTail=d:v._prev=d,null===h?this._itHead=d:h._next=d,null===this._linkedRecords&&(this._linkedRecords=new pD),this._linkedRecords.put(d),d.currentIndex=f,d}_remove(d){return this._addToRemovals(this._unlink(d))}_unlink(d){null!==this._linkedRecords&&this._linkedRecords.remove(d);const h=d._prev,f=d._next;return null===h?this._itHead=f:h._next=f,null===f?this._itTail=h:f._prev=h,d}_addToMoves(d,h){return d.previousIndex===h||(this._movesTail=null===this._movesTail?this._movesHead=d:this._movesTail._nextMoved=d),d}_addToRemovals(d){return null===this._unlinkedRecords&&(this._unlinkedRecords=new pD),this._unlinkedRecords.put(d),d.currentIndex=null,d._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=d,d._prevRemoved=null):(d._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=d),d}_addIdentityChange(d,h){return d.item=h,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=d:this._identityChangesTail._nextIdentityChange=d,d}}class h_{constructor(d,h){this.item=d,this.trackById=h,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Gg{constructor(){this._head=null,this._tail=null}add(d){null===this._head?(this._head=this._tail=d,d._nextDup=null,d._prevDup=null):(this._tail._nextDup=d,d._prevDup=this._tail,d._nextDup=null,this._tail=d)}get(d,h){let f;for(f=this._head;null!==f;f=f._nextDup)if((null===h||h<=f.currentIndex)&&Object.is(f.trackById,d))return f;return null}remove(d){const h=d._prevDup,f=d._nextDup;return null===h?this._head=f:h._nextDup=f,null===f?this._tail=h:f._prevDup=h,null===this._head}}class pD{constructor(){this.map=new Map}put(d){const h=d.trackById;let f=this.map.get(h);f||(f=new Gg,this.map.set(h,f)),f.add(d)}get(d,h){const v=this.map.get(d);return v?v.get(d,h):null}remove(d){const h=d.trackById;return this.map.get(h).remove(d)&&this.map.delete(h),d}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Yl(l,d,h){const f=l.previousIndex;if(null===f)return f;let v=0;return h&&f<h.length&&(v=h[f]),f+d+v}class UO{constructor(){}supports(d){return d instanceof Map||Hh(d)}create(){return new p_}}class p_{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(d){let h;for(h=this._mapHead;null!==h;h=h._next)d(h)}forEachPreviousItem(d){let h;for(h=this._previousMapHead;null!==h;h=h._nextPrevious)d(h)}forEachChangedItem(d){let h;for(h=this._changesHead;null!==h;h=h._nextChanged)d(h)}forEachAddedItem(d){let h;for(h=this._additionsHead;null!==h;h=h._nextAdded)d(h)}forEachRemovedItem(d){let h;for(h=this._removalsHead;null!==h;h=h._nextRemoved)d(h)}diff(d){if(d){if(!(d instanceof Map||Hh(d)))throw new je(900,!1)}else d=new Map;return this.check(d)?this:null}onDestroy(){}check(d){this._reset();let h=this._mapHead;if(this._appendAfter=null,this._forEach(d,(f,v)=>{if(h&&h.key===v)this._maybeAddToChanges(h,f),this._appendAfter=h,h=h._next;else{const S=this._getOrCreateRecordForKey(v,f);h=this._insertBeforeOrAppend(h,S)}}),h){h._prev&&(h._prev._next=null),this._removalsHead=h;for(let f=h;null!==f;f=f._nextRemoved)f===this._mapHead&&(this._mapHead=null),this._records.delete(f.key),f._nextRemoved=f._next,f.previousValue=f.currentValue,f.currentValue=null,f._prev=null,f._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(d,h){if(d){const f=d._prev;return h._next=d,h._prev=f,d._prev=h,f&&(f._next=h),d===this._mapHead&&(this._mapHead=h),this._appendAfter=d,d}return this._appendAfter?(this._appendAfter._next=h,h._prev=this._appendAfter):this._mapHead=h,this._appendAfter=h,null}_getOrCreateRecordForKey(d,h){if(this._records.has(d)){const v=this._records.get(d);this._maybeAddToChanges(v,h);const S=v._prev,w=v._next;return S&&(S._next=w),w&&(w._prev=S),v._next=null,v._prev=null,v}const f=new Vg(d);return this._records.set(d,f),f.currentValue=h,this._addToAdditions(f),f}_reset(){if(this.isDirty){let d;for(this._previousMapHead=this._mapHead,d=this._previousMapHead;null!==d;d=d._next)d._nextPrevious=d._next;for(d=this._changesHead;null!==d;d=d._nextChanged)d.previousValue=d.currentValue;for(d=this._additionsHead;null!=d;d=d._nextAdded)d.previousValue=d.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(d,h){Object.is(h,d.currentValue)||(d.previousValue=d.currentValue,d.currentValue=h,this._addToChanges(d))}_addToAdditions(d){null===this._additionsHead?this._additionsHead=this._additionsTail=d:(this._additionsTail._nextAdded=d,this._additionsTail=d)}_addToChanges(d){null===this._changesHead?this._changesHead=this._changesTail=d:(this._changesTail._nextChanged=d,this._changesTail=d)}_forEach(d,h){d instanceof Map?d.forEach(h):Object.keys(d).forEach(f=>h(d[f],f))}}class Vg{constructor(d){this.key=d,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function WO(){return new fD([new hD])}let fD=(()=>{class l{constructor(h){this.factories=h}static create(h,f){if(null!=f){const v=f.factories.slice();h=h.concat(v)}return new l(h)}static extend(h){return{provide:l,useFactory:f=>l.create(h,f||WO()),deps:[[l,new tv,new Cf]]}}find(h){const f=this.factories.find(v=>v.supports(h));if(null!=f)return f;throw new je(901,!1)}}return l.\u0275prov=An({token:l,providedIn:"root",factory:WO}),l})();function Dn(){return new f_([new UO])}let f_=(()=>{class l{constructor(h){this.factories=h}static create(h,f){if(f){const v=f.factories.slice();h=h.concat(v)}return new l(h)}static extend(h){return{provide:l,useFactory:f=>l.create(h,f||Dn()),deps:[[l,new tv,new Cf]]}}find(h){const f=this.factories.find(v=>v.supports(h));if(f)return f;throw new je(901,!1)}}return l.\u0275prov=An({token:l,providedIn:"root",factory:Dn}),l})();const ql=MO(null,"core",[]);let jI=(()=>{class l{constructor(h){}}return l.\u0275fac=function(h){return new(h||l)(xn(c_))},l.\u0275mod=fc({type:l}),l.\u0275inj=hl({}),l})();function oa(l){return"boolean"==typeof l?l:null!=l&&"false"!==l}},1214:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{Ct:()=>OAuthService,zr:()=>OAuthModule});var _Users_ajaygupta_ProDemo_mvanand_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(5861),_angular_core__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(3071),_angular_common__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(6895),_angular_common_http__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(5793),rxjs__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5529),rxjs__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(1086),rxjs__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(5254),rxjs__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(1946),rxjs__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(1737),rxjs__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(6053),rxjs__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(6787),rxjs_operators__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(2198),rxjs_operators__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2994),rxjs_operators__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(13),rxjs_operators__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(9860),rxjs_operators__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(7545),rxjs_operators__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(4850),rxjs_operators__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(2973),rxjs_operators__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(7221),rxjs_operators__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(6227),rxjs_operators__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(5632),rxjs_operators__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(1709),fast_sha256__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(1302);class DateTimeProvider{}let SystemDateTimeProvider=(()=>{class ne extends DateTimeProvider{now(){return Date.now()}new(){return new Date}}return ne.\u0275fac=function(){let ce;return function(F){return(ce||(ce=_angular_core__WEBPACK_IMPORTED_MODULE_1__.n5z(ne)))(F||ne)}}(),ne.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:ne,factory:ne.\u0275fac}),ne})();class LoginOptions{constructor(){this.disableNonceCheck=!1,this.preventClearHashAfterLogin=!1}}class OAuthLogger{}class OAuthStorage{}let MemoryStorage=(()=>{class ne{constructor(){this.data=new Map}getItem(A){return this.data.get(A)}removeItem(A){this.data.delete(A)}setItem(A,F){this.data.set(A,F)}}return ne.\u0275fac=function(A){return new(A||ne)},ne.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:ne,factory:ne.\u0275fac}),ne})();class ReceivedTokens{}class OAuthEvent{constructor(ce){this.type=ce}}class OAuthSuccessEvent extends OAuthEvent{constructor(ce,A=null){super(ce),this.info=A}}class OAuthInfoEvent extends OAuthEvent{constructor(ce,A=null){super(ce),this.info=A}}class OAuthErrorEvent extends OAuthEvent{constructor(ce,A,F=null){super(ce),this.reason=A,this.params=F}}function b64DecodeUnicode(ne){const ce=ne.replace(/\-/g,"+").replace(/\_/g,"/");return decodeURIComponent(atob(ce).split("").map(function(A){return"%"+("00"+A.charCodeAt(0).toString(16)).slice(-2)}).join(""))}function base64UrlEncode(ne){return btoa(ne).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}class AuthConfig{constructor(ce){this.clientId="",this.redirectUri="",this.postLogoutRedirectUri="",this.redirectUriAsPostLogoutRedirectUriFallback=!0,this.loginUrl="",this.scope="openid profile",this.resource="",this.rngUrl="",this.oidc=!0,this.requestAccessToken=!0,this.options=null,this.issuer="",this.logoutUrl="",this.clearHashAfterLogin=!0,this.tokenEndpoint=null,this.revocationEndpoint=null,this.customTokenParameters=[],this.userinfoEndpoint=null,this.responseType="",this.showDebugInformation=!1,this.silentRefreshRedirectUri="",this.silentRefreshMessagePrefix="",this.silentRefreshShowIFrame=!1,this.siletRefreshTimeout=2e4,this.silentRefreshTimeout=2e4,this.dummyClientSecret=null,this.requireHttps="remoteOnly",this.strictDiscoveryDocumentValidation=!0,this.jwks=null,this.customQueryParams=null,this.silentRefreshIFrameName="angular-oauth-oidc-silent-refresh-iframe",this.timeoutFactor=.75,this.sessionChecksEnabled=!1,this.sessionCheckIntervall=3e3,this.sessionCheckIFrameUrl=null,this.sessionCheckIFrameName="angular-oauth-oidc-check-session-iframe",this.disableAtHashCheck=!1,this.skipSubjectCheck=!1,this.useIdTokenHintForSilentRefresh=!1,this.skipIssuerCheck=!1,this.nonceStateSeparator=";",this.useHttpBasicAuth=!1,this.waitForTokenInMsec=0,this.disablePKCE=!1,this.preserveRequestedRoute=!1,this.openUri=A=>{location.href=A},ce&&Object.assign(this,ce)}}class WebHttpUrlEncodingCodec{encodeKey(ce){return encodeURIComponent(ce)}encodeValue(ce){return encodeURIComponent(ce)}decodeKey(ce){return decodeURIComponent(ce)}decodeValue(ce){return decodeURIComponent(ce)}}class ValidationHandler{}class AbstractValidationHandler{validateAtHash(ce){var A=this;return(0,_Users_ajaygupta_ProDemo_mvanand_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function*(){let F=A.inferHashAlgorithm(ce.idTokenHeader),$=yield A.calcHash(ce.accessToken,F),se=base64UrlEncode($.substr(0,$.length/2)),X=ce.idTokenClaims.at_hash.replace(/=/g,"");return se!==X&&(console.error("exptected at_hash: "+se),console.error("actual at_hash: "+X)),se===X})()}inferHashAlgorithm(ce){let A=ce.alg;if(!A.match(/^.S[0-9]{3}$/))throw new Error("Algorithm not supported: "+A);return"sha-"+A.substr(2)}}let UrlHelperService=(()=>{class ne{getHashFragmentParams(A){let F=A||window.location.hash;if(F=decodeURIComponent(F),0!==F.indexOf("#"))return{};const $=F.indexOf("?");return F=F.substr($>-1?$+1:1),this.parseQueryString(F)}parseQueryString(A){const F={};let $,Z,se,X,ae,be,pe;if(null===A)return F;$=A.split("&");for(let ee=0;ee<$.length;ee++)Z=$[ee],se=Z.indexOf("="),-1===se?(X=Z,ae=null):(X=Z.substr(0,se),ae=Z.substr(se+1)),be=decodeURIComponent(X),pe=decodeURIComponent(ae),"/"===be.substr(0,1)&&(be=be.substr(1)),F[be]=pe;return F}}return ne.\u0275fac=function(A){return new(A||ne)},ne.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:ne,factory:ne.\u0275fac}),ne})();function factory(){var ERROR="input is invalid type",WINDOW="object"==typeof window,root=WINDOW?window:{};root.JS_SHA256_NO_WINDOW&&(WINDOW=!1);var WEB_WORKER=!WINDOW&&"object"==typeof self,NODE_JS=!root.JS_SHA256_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS?root=global:WEB_WORKER&&(root=self);var COMMON_JS=!root.JS_SHA256_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD="function"==typeof define&&define.amd,ARRAY_BUFFER=!root.JS_SHA256_NO_ARRAY_BUFFER&&typeof ArrayBuffer<"u";const HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],K=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"];var blocks=[];(root.JS_SHA256_NO_NODE_JS||!Array.isArray)&&(Array.isArray=function(ne){return"[object Array]"===Object.prototype.toString.call(ne)}),ARRAY_BUFFER&&(root.JS_SHA256_NO_ARRAY_BUFFER_IS_VIEW||!ArrayBuffer.isView)&&(ArrayBuffer.isView=function(ne){return"object"==typeof ne&&ne.buffer&&ne.buffer.constructor===ArrayBuffer});var createOutputMethod=function(ne,ce){return function(A){return new Sha256(ce,!0).update(A)[ne]()}},createMethod=function(ne){var ce=createOutputMethod("hex",ne);NODE_JS&&(ce=nodeWrap(ce,ne)),ce.create=function(){return new Sha256(ne)},ce.update=function($){return ce.create().update($)};for(var A=0;A<OUTPUT_TYPES.length;++A){var F=OUTPUT_TYPES[A];ce[F]=createOutputMethod(F,ne)}return ce},nodeWrap=function(method,is224){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),algorithm=is224?"sha224":"sha256",nodeMethod=function(ne){if("string"==typeof ne)return crypto.createHash(algorithm).update(ne,"utf8").digest("hex");if(null==ne)throw new Error(ERROR);return ne.constructor===ArrayBuffer&&(ne=new Uint8Array(ne)),Array.isArray(ne)||ArrayBuffer.isView(ne)||ne.constructor===Buffer?crypto.createHash(algorithm).update(new Buffer(ne)).digest("hex"):method(ne)};return nodeMethod},createHmacOutputMethod=function(ne,ce){return function(A,F){return new HmacSha256(A,ce,!0).update(F)[ne]()}},createHmacMethod=function(ne){var ce=createHmacOutputMethod("hex",ne);ce.create=function($){return new HmacSha256($,ne)},ce.update=function($,Z){return ce.create($).update(Z)};for(var A=0;A<OUTPUT_TYPES.length;++A){var F=OUTPUT_TYPES[A];ce[F]=createHmacOutputMethod(F,ne)}return ce};function Sha256(ne,ce){ce?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],ne?(this.h0=3238371032,this.h1=914150663,this.h2=812702999,this.h3=4144912697,this.h4=4290775857,this.h5=1750603025,this.h6=1694076839,this.h7=3204075428):(this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225),this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0,this.is224=ne}function HmacSha256(ne,ce,A){var F,$=typeof ne;if("string"===$){var ae,Z=[],se=ne.length,X=0;for(F=0;F<se;++F)(ae=ne.charCodeAt(F))<128?Z[X++]=ae:ae<2048?(Z[X++]=192|ae>>6,Z[X++]=128|63&ae):ae<55296||ae>=57344?(Z[X++]=224|ae>>12,Z[X++]=128|ae>>6&63,Z[X++]=128|63&ae):(ae=65536+((1023&ae)<<10|1023&ne.charCodeAt(++F)),Z[X++]=240|ae>>18,Z[X++]=128|ae>>12&63,Z[X++]=128|ae>>6&63,Z[X++]=128|63&ae);ne=Z}else{if("object"!==$)throw new Error(ERROR);if(null===ne)throw new Error(ERROR);if(ARRAY_BUFFER&&ne.constructor===ArrayBuffer)ne=new Uint8Array(ne);else if(!(Array.isArray(ne)||ARRAY_BUFFER&&ArrayBuffer.isView(ne)))throw new Error(ERROR)}ne.length>64&&(ne=new Sha256(ce,!0).update(ne).array());var be=[],pe=[];for(F=0;F<64;++F){var ee=ne[F]||0;be[F]=92^ee,pe[F]=54^ee}Sha256.call(this,ce,A),this.update(pe),this.oKeyPad=be,this.inner=!0,this.sharedMemory=A}Sha256.prototype.update=function(ne){if(!this.finalized){var ce,A=typeof ne;if("string"!==A){if("object"!==A)throw new Error(ERROR);if(null===ne)throw new Error(ERROR);if(ARRAY_BUFFER&&ne.constructor===ArrayBuffer)ne=new Uint8Array(ne);else if(!(Array.isArray(ne)||ARRAY_BUFFER&&ArrayBuffer.isView(ne)))throw new Error(ERROR);ce=!0}for(var F,Z,$=0,se=ne.length,X=this.blocks;$<se;){if(this.hashed&&(this.hashed=!1,X[0]=this.block,X[16]=X[1]=X[2]=X[3]=X[4]=X[5]=X[6]=X[7]=X[8]=X[9]=X[10]=X[11]=X[12]=X[13]=X[14]=X[15]=0),ce)for(Z=this.start;$<se&&Z<64;++$)X[Z>>2]|=ne[$]<<SHIFT[3&Z++];else for(Z=this.start;$<se&&Z<64;++$)(F=ne.charCodeAt($))<128?X[Z>>2]|=F<<SHIFT[3&Z++]:F<2048?(X[Z>>2]|=(192|F>>6)<<SHIFT[3&Z++],X[Z>>2]|=(128|63&F)<<SHIFT[3&Z++]):F<55296||F>=57344?(X[Z>>2]|=(224|F>>12)<<SHIFT[3&Z++],X[Z>>2]|=(128|F>>6&63)<<SHIFT[3&Z++],X[Z>>2]|=(128|63&F)<<SHIFT[3&Z++]):(F=65536+((1023&F)<<10|1023&ne.charCodeAt(++$)),X[Z>>2]|=(240|F>>18)<<SHIFT[3&Z++],X[Z>>2]|=(128|F>>12&63)<<SHIFT[3&Z++],X[Z>>2]|=(128|F>>6&63)<<SHIFT[3&Z++],X[Z>>2]|=(128|63&F)<<SHIFT[3&Z++]);this.lastByteIndex=Z,this.bytes+=Z-this.start,Z>=64?(this.block=X[16],this.start=Z-64,this.hash(),this.hashed=!0):this.start=Z}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha256.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var ne=this.blocks,ce=this.lastByteIndex;ne[16]=this.block,ne[ce>>2]|=EXTRA[3&ce],this.block=ne[16],ce>=56&&(this.hashed||this.hash(),ne[0]=this.block,ne[16]=ne[1]=ne[2]=ne[3]=ne[4]=ne[5]=ne[6]=ne[7]=ne[8]=ne[9]=ne[10]=ne[11]=ne[12]=ne[13]=ne[14]=ne[15]=0),ne[14]=this.hBytes<<3|this.bytes>>>29,ne[15]=this.bytes<<3,this.hash()}},Sha256.prototype.hash=function(){var be,ie,fe,_e,he,Ke,ne=this.h0,ce=this.h1,A=this.h2,F=this.h3,$=this.h4,Z=this.h5,se=this.h6,X=this.h7,ae=this.blocks;for(be=16;be<64;++be)ae[be]=ae[be-16]+(((ie=ae[be-15])>>>7|ie<<25)^(ie>>>18|ie<<14)^ie>>>3)+ae[be-7]+(((ie=ae[be-2])>>>17|ie<<15)^(ie>>>19|ie<<13)^ie>>>10)<<0;for(Ke=ce&A,be=0;be<64;be+=4)this.first?(this.is224?(fe=300032,X=(ie=ae[0]-1413257819)-150054599<<0,F=ie+24177077<<0):(fe=704751109,X=(ie=ae[0]-210244248)-1521486534<<0,F=ie+143694565<<0),this.first=!1):(X=F+(ie=X+(($>>>6|$<<26)^($>>>11|$<<21)^($>>>25|$<<7))+($&Z^~$&se)+K[be]+ae[be])<<0,F=ie+(((ne>>>2|ne<<30)^(ne>>>13|ne<<19)^(ne>>>22|ne<<10))+((fe=ne&ce)^ne&A^Ke))<<0),se=A+(ie=se+((X>>>6|X<<26)^(X>>>11|X<<21)^(X>>>25|X<<7))+(X&$^~X&Z)+K[be+1]+ae[be+1])<<0,A=ie+(((F>>>2|F<<30)^(F>>>13|F<<19)^(F>>>22|F<<10))+((_e=F&ne)^F&ce^fe))<<0,Z=ce+(ie=Z+((se>>>6|se<<26)^(se>>>11|se<<21)^(se>>>25|se<<7))+(se&X^~se&$)+K[be+2]+ae[be+2])<<0,ce=ie+(((A>>>2|A<<30)^(A>>>13|A<<19)^(A>>>22|A<<10))+((he=A&F)^A&ne^_e))<<0,$=ne+(ie=$+((Z>>>6|Z<<26)^(Z>>>11|Z<<21)^(Z>>>25|Z<<7))+(Z&se^~Z&X)+K[be+3]+ae[be+3])<<0,ne=ie+(((ce>>>2|ce<<30)^(ce>>>13|ce<<19)^(ce>>>22|ce<<10))+((Ke=ce&A)^ce&F^he))<<0;this.h0=this.h0+ne<<0,this.h1=this.h1+ce<<0,this.h2=this.h2+A<<0,this.h3=this.h3+F<<0,this.h4=this.h4+$<<0,this.h5=this.h5+Z<<0,this.h6=this.h6+se<<0,this.h7=this.h7+X<<0},Sha256.prototype.hex=function(){this.finalize();var ne=this.h0,ce=this.h1,A=this.h2,F=this.h3,$=this.h4,Z=this.h5,se=this.h6,X=this.h7,ae=HEX_CHARS[ne>>28&15]+HEX_CHARS[ne>>24&15]+HEX_CHARS[ne>>20&15]+HEX_CHARS[ne>>16&15]+HEX_CHARS[ne>>12&15]+HEX_CHARS[ne>>8&15]+HEX_CHARS[ne>>4&15]+HEX_CHARS[15&ne]+HEX_CHARS[ce>>28&15]+HEX_CHARS[ce>>24&15]+HEX_CHARS[ce>>20&15]+HEX_CHARS[ce>>16&15]+HEX_CHARS[ce>>12&15]+HEX_CHARS[ce>>8&15]+HEX_CHARS[ce>>4&15]+HEX_CHARS[15&ce]+HEX_CHARS[A>>28&15]+HEX_CHARS[A>>24&15]+HEX_CHARS[A>>20&15]+HEX_CHARS[A>>16&15]+HEX_CHARS[A>>12&15]+HEX_CHARS[A>>8&15]+HEX_CHARS[A>>4&15]+HEX_CHARS[15&A]+HEX_CHARS[F>>28&15]+HEX_CHARS[F>>24&15]+HEX_CHARS[F>>20&15]+HEX_CHARS[F>>16&15]+HEX_CHARS[F>>12&15]+HEX_CHARS[F>>8&15]+HEX_CHARS[F>>4&15]+HEX_CHARS[15&F]+HEX_CHARS[$>>28&15]+HEX_CHARS[$>>24&15]+HEX_CHARS[$>>20&15]+HEX_CHARS[$>>16&15]+HEX_CHARS[$>>12&15]+HEX_CHARS[$>>8&15]+HEX_CHARS[$>>4&15]+HEX_CHARS[15&$]+HEX_CHARS[Z>>28&15]+HEX_CHARS[Z>>24&15]+HEX_CHARS[Z>>20&15]+HEX_CHARS[Z>>16&15]+HEX_CHARS[Z>>12&15]+HEX_CHARS[Z>>8&15]+HEX_CHARS[Z>>4&15]+HEX_CHARS[15&Z]+HEX_CHARS[se>>28&15]+HEX_CHARS[se>>24&15]+HEX_CHARS[se>>20&15]+HEX_CHARS[se>>16&15]+HEX_CHARS[se>>12&15]+HEX_CHARS[se>>8&15]+HEX_CHARS[se>>4&15]+HEX_CHARS[15&se];return this.is224||(ae+=HEX_CHARS[X>>28&15]+HEX_CHARS[X>>24&15]+HEX_CHARS[X>>20&15]+HEX_CHARS[X>>16&15]+HEX_CHARS[X>>12&15]+HEX_CHARS[X>>8&15]+HEX_CHARS[X>>4&15]+HEX_CHARS[15&X]),ae},Sha256.prototype.toString=Sha256.prototype.hex,Sha256.prototype.digest=function(){this.finalize();var ne=this.h0,ce=this.h1,A=this.h2,F=this.h3,$=this.h4,Z=this.h5,se=this.h6,X=this.h7,ae=[ne>>24&255,ne>>16&255,ne>>8&255,255&ne,ce>>24&255,ce>>16&255,ce>>8&255,255&ce,A>>24&255,A>>16&255,A>>8&255,255&A,F>>24&255,F>>16&255,F>>8&255,255&F,$>>24&255,$>>16&255,$>>8&255,255&$,Z>>24&255,Z>>16&255,Z>>8&255,255&Z,se>>24&255,se>>16&255,se>>8&255,255&se];return this.is224||ae.push(X>>24&255,X>>16&255,X>>8&255,255&X),ae},Sha256.prototype.array=Sha256.prototype.digest,Sha256.prototype.arrayBuffer=function(){this.finalize();var ne=new ArrayBuffer(this.is224?28:32),ce=new DataView(ne);return ce.setUint32(0,this.h0),ce.setUint32(4,this.h1),ce.setUint32(8,this.h2),ce.setUint32(12,this.h3),ce.setUint32(16,this.h4),ce.setUint32(20,this.h5),ce.setUint32(24,this.h6),this.is224||ce.setUint32(28,this.h7),ne},HmacSha256.prototype=new Sha256,HmacSha256.prototype.finalize=function(){if(Sha256.prototype.finalize.call(this),this.inner){this.inner=!1;var ne=this.array();Sha256.call(this,this.is224,this.sharedMemory),this.update(this.oKeyPad),this.update(ne),Sha256.prototype.finalize.call(this)}};var exports=createMethod();return exports.sha256=exports,exports.sha224=createMethod(!0),exports.sha256.hmac=createHmacMethod(),exports.sha224.hmac=createHmacMethod(!0),exports}const sha256=factory();class HashHandler{}function decodeUTF8(ne){if("string"!=typeof ne)throw new TypeError("expected string");var ce,A=ne,F=new Uint8Array(A.length);for(ce=0;ce<A.length;ce++)F[ce]=A.charCodeAt(ce);return F}function encodeUTF8(ne){var ce,A=[];for(ce=0;ce<ne.length;ce++)A.push(String.fromCharCode(ne[ce]));return A.join("")}let DefaultHashHandler=(()=>{class ne{calcHash(A,F){return(0,_Users_ajaygupta_ProDemo_mvanand_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function*(){return encodeUTF8(fast_sha256__WEBPACK_IMPORTED_MODULE_0__(decodeUTF8(A)))})()}toHashString2(A){let F="";for(let $ of A)F+=String.fromCharCode($);return F}toHashString(A){const F=new Uint8Array(A);let $="";for(let Z of F)$+=String.fromCharCode(Z);return $}}return ne.\u0275fac=function(A){return new(A||ne)},ne.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:ne,factory:ne.\u0275fac}),ne})(),OAuthService=(()=>{class ne extends AuthConfig{constructor(A,F,$,Z,se,X,ae,be,pe,ee){super(),this.ngZone=A,this.http=F,this.config=se,this.urlHelper=X,this.logger=ae,this.crypto=be,this.dateTimeService=ee,this.discoveryDocumentLoaded=!1,this.state="",this.eventsSubject=new rxjs__WEBPACK_IMPORTED_MODULE_3__.xQ,this.discoveryDocumentLoadedSubject=new rxjs__WEBPACK_IMPORTED_MODULE_3__.xQ,this.grantTypesSupported=[],this.inImplicitFlow=!1,this.saveNoncesInLocalStorage=!1,this.debug("angular-oauth2-oidc v10"),this.document=pe,se||(se={}),this.discoveryDocumentLoaded$=this.discoveryDocumentLoadedSubject.asObservable(),this.events=this.eventsSubject.asObservable(),Z&&(this.tokenValidationHandler=Z),se&&this.configure(se);try{$?this.setStorage($):typeof sessionStorage<"u"&&this.setStorage(sessionStorage)}catch(te){console.error("No OAuthStorage provided and cannot access default (sessionStorage).Consider providing a custom OAuthStorage implementation in your module.",te)}if(this.checkLocalStorageAccessable()){const te=window?.navigator?.userAgent;(te?.includes("MSIE ")||te?.includes("Trident"))&&(this.saveNoncesInLocalStorage=!0)}this.setupRefreshTimer()}checkLocalStorageAccessable(){if(typeof window>"u")return!1;const A="test";try{return!(typeof window.localStorage>"u"||(localStorage.setItem(A,A),localStorage.removeItem(A),0))}catch{return!1}}configure(A){Object.assign(this,new AuthConfig,A),this.config=Object.assign({},new AuthConfig,A),this.sessionChecksEnabled&&this.setupSessionCheck(),this.configChanged()}configChanged(){this.setupRefreshTimer()}restartSessionChecksIfStillLoggedIn(){this.hasValidIdToken()&&this.initSessionCheck()}restartRefreshTimerIfStillLoggedIn(){this.setupExpirationTimers()}setupSessionCheck(){this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(A=>"token_received"===A.type)).subscribe(A=>{this.initSessionCheck()})}setupAutomaticSilentRefresh(A={},F,$=!0){let Z=!0;this.clearAutomaticRefreshTimer(),this.automaticRefreshSubscription=this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.b)(se=>{"token_received"===se.type?Z=!0:"logout"===se.type&&(Z=!1)}),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(se=>"token_expires"===se.type&&(null==F||"any"===F||se.info===F)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_6__.b)(1e3)).subscribe(se=>{Z&&this.refreshInternal(A,$).catch(X=>{this.debug("Automatic silent refresh did not work")})}),this.restartRefreshTimerIfStillLoggedIn()}refreshInternal(A,F){return this.useSilentRefresh||"code"!==this.responseType?this.silentRefresh(A,F):this.refreshToken()}loadDiscoveryDocumentAndTryLogin(A=null){return this.loadDiscoveryDocument().then(F=>this.tryLogin(A))}loadDiscoveryDocumentAndLogin(A=null){return this.loadDiscoveryDocumentAndTryLogin(A=A||{}).then(F=>!(!this.hasValidIdToken()||!this.hasValidAccessToken())||(this.initLoginFlow("string"==typeof A.state?A.state:""),!1))}debug(...A){this.showDebugInformation&&this.logger.debug.apply(this.logger,A)}validateUrlFromDiscoveryDocument(A){const F=[],$=this.validateUrlForHttps(A),Z=this.validateUrlAgainstIssuer(A);return $||F.push("https for all urls required. Also for urls received by discovery."),Z||F.push("Every url in discovery document has to start with the issuer url.Also see property strictDiscoveryDocumentValidation."),F}validateUrlForHttps(A){if(!A)return!0;const F=A.toLowerCase();return!(!1!==this.requireHttps&&(!F.match(/^http:\/\/localhost($|[:\/])/)&&!F.match(/^http:\/\/localhost($|[:\/])/)||"remoteOnly"!==this.requireHttps))||F.startsWith("https://")}assertUrlNotNullAndCorrectProtocol(A,F){if(!A)throw new Error(`'${F}' should not be null`);if(!this.validateUrlForHttps(A))throw new Error(`'${F}' must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).`)}validateUrlAgainstIssuer(A){return!this.strictDiscoveryDocumentValidation||!A||A.toLowerCase().startsWith(this.issuer.toLowerCase())}setupRefreshTimer(){typeof window>"u"?this.debug("timer not supported on this plattform"):((this.hasValidIdToken()||this.hasValidAccessToken())&&(this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()),this.tokenReceivedSubscription&&this.tokenReceivedSubscription.unsubscribe(),this.tokenReceivedSubscription=this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(A=>"token_received"===A.type)).subscribe(A=>{this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.setupExpirationTimers()}))}setupExpirationTimers(){this.hasValidAccessToken()&&this.setupAccessTokenTimer(),this.hasValidIdToken()&&this.setupIdTokenTimer()}setupAccessTokenTimer(){const A=this.getAccessTokenExpiration(),F=this.getAccessTokenStoredAt(),$=this.calcTimeout(F,A);this.ngZone.runOutsideAngular(()=>{this.accessTokenTimeoutSubscription=(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(new OAuthInfoEvent("token_expires","access_token")).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.g)($)).subscribe(Z=>{this.ngZone.run(()=>{this.eventsSubject.next(Z)})})})}setupIdTokenTimer(){const A=this.getIdTokenExpiration(),F=this.getIdTokenStoredAt(),$=this.calcTimeout(F,A);this.ngZone.runOutsideAngular(()=>{this.idTokenTimeoutSubscription=(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(new OAuthInfoEvent("token_expires","id_token")).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.g)($)).subscribe(Z=>{this.ngZone.run(()=>{this.eventsSubject.next(Z)})})})}stopAutomaticRefresh(){this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.clearAutomaticRefreshTimer()}clearAccessTokenTimer(){this.accessTokenTimeoutSubscription&&this.accessTokenTimeoutSubscription.unsubscribe()}clearIdTokenTimer(){this.idTokenTimeoutSubscription&&this.idTokenTimeoutSubscription.unsubscribe()}clearAutomaticRefreshTimer(){this.automaticRefreshSubscription&&this.automaticRefreshSubscription.unsubscribe()}calcTimeout(A,F){const $=this.dateTimeService.now();return Math.max(0,(F-A)*this.timeoutFactor-($-A))}setStorage(A){this._storage=A,this.configChanged()}loadDiscoveryDocument(A=null){return new Promise((F,$)=>{A||((A=this.issuer||"").endsWith("/")||(A+="/"),A+=".well-known/openid-configuration"),this.validateUrlForHttps(A)?this.http.get(A).subscribe(Z=>{if(!this.validateDiscoveryDocument(Z))return this.eventsSubject.next(new OAuthErrorEvent("discovery_document_validation_error",null)),void $("discovery_document_validation_error");this.loginUrl=Z.authorization_endpoint,this.logoutUrl=Z.end_session_endpoint||this.logoutUrl,this.grantTypesSupported=Z.grant_types_supported,this.issuer=Z.issuer,this.tokenEndpoint=Z.token_endpoint,this.userinfoEndpoint=Z.userinfo_endpoint||this.userinfoEndpoint,this.jwksUri=Z.jwks_uri,this.sessionCheckIFrameUrl=Z.check_session_iframe||this.sessionCheckIFrameUrl,this.discoveryDocumentLoaded=!0,this.discoveryDocumentLoadedSubject.next(Z),this.revocationEndpoint=Z.revocation_endpoint||this.revocationEndpoint,this.sessionChecksEnabled&&this.restartSessionChecksIfStillLoggedIn(),this.loadJwks().then(se=>{const ae=new OAuthSuccessEvent("discovery_document_loaded",{discoveryDocument:Z,jwks:se});this.eventsSubject.next(ae),F(ae)}).catch(se=>{this.eventsSubject.next(new OAuthErrorEvent("discovery_document_load_error",se)),$(se)})},Z=>{this.logger.error("error loading discovery document",Z),this.eventsSubject.next(new OAuthErrorEvent("discovery_document_load_error",Z)),$(Z)}):$("issuer  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).")})}loadJwks(){return new Promise((A,F)=>{this.jwksUri?this.http.get(this.jwksUri).subscribe($=>{this.jwks=$,this.eventsSubject.next(new OAuthSuccessEvent("discovery_document_loaded")),A($)},$=>{this.logger.error("error loading jwks",$),this.eventsSubject.next(new OAuthErrorEvent("jwks_load_error",$)),F($)}):A(null)})}validateDiscoveryDocument(A){let F;return this.skipIssuerCheck||A.issuer===this.issuer?(F=this.validateUrlFromDiscoveryDocument(A.authorization_endpoint),F.length>0?(this.logger.error("error validating authorization_endpoint in discovery document",F),!1):(F=this.validateUrlFromDiscoveryDocument(A.end_session_endpoint),F.length>0?(this.logger.error("error validating end_session_endpoint in discovery document",F),!1):(F=this.validateUrlFromDiscoveryDocument(A.token_endpoint),F.length>0&&this.logger.error("error validating token_endpoint in discovery document",F),F=this.validateUrlFromDiscoveryDocument(A.revocation_endpoint),F.length>0&&this.logger.error("error validating revocation_endpoint in discovery document",F),F=this.validateUrlFromDiscoveryDocument(A.userinfo_endpoint),F.length>0?(this.logger.error("error validating userinfo_endpoint in discovery document",F),!1):(F=this.validateUrlFromDiscoveryDocument(A.jwks_uri),F.length>0?(this.logger.error("error validating jwks_uri in discovery document",F),!1):(this.sessionChecksEnabled&&!A.check_session_iframe&&this.logger.warn("sessionChecksEnabled is activated but discovery document does not contain a check_session_iframe field"),!0))))):(this.logger.error("invalid issuer in discovery document","expected: "+this.issuer,"current: "+A.issuer),!1)}fetchTokenUsingPasswordFlowAndLoadUserProfile(A,F,$=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM){return this.fetchTokenUsingPasswordFlow(A,F,$).then(()=>this.loadUserProfile())}loadUserProfile(){if(!this.hasValidAccessToken())throw new Error("Can not load User Profile without access_token");if(!this.validateUrlForHttps(this.userinfoEndpoint))throw new Error("userinfoEndpoint must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");return new Promise((A,F)=>{const $=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM).set("Authorization","Bearer "+this.getAccessToken());this.http.get(this.userinfoEndpoint,{headers:$,observe:"response",responseType:"text"}).subscribe(Z=>{if(this.debug("userinfo received",JSON.stringify(Z)),Z.headers.get("content-type").startsWith("application/json")){let se=JSON.parse(Z.body);const X=this.getIdentityClaims()||{};if(!this.skipSubjectCheck&&this.oidc&&(!X.sub||se.sub!==X.sub))return void F("if property oidc is true, the received user-id (sub) has to be the user-id of the user that has logged in with oidc.\nif you are not using oidc but just oauth2 password flow set oidc to false");se=Object.assign({},X,se),this._storage.setItem("id_token_claims_obj",JSON.stringify(se)),this.eventsSubject.next(new OAuthSuccessEvent("user_profile_loaded")),A({info:se})}else this.debug("userinfo is not JSON, treating it as JWE/JWS"),this.eventsSubject.next(new OAuthSuccessEvent("user_profile_loaded")),A(JSON.parse(Z.body))},Z=>{this.logger.error("error loading user info",Z),this.eventsSubject.next(new OAuthErrorEvent("user_profile_load_error",Z)),F(Z)})})}fetchTokenUsingPasswordFlow(A,F,$=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM){return this.fetchTokenUsingGrant("password",{username:A,password:F},$)}fetchTokenUsingGrant(A,F,$=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM){this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint");let Z=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.LE({encoder:new WebHttpUrlEncodingCodec}).set("grant_type",A).set("scope",this.scope);if(this.useHttpBasicAuth){const se=btoa(`${this.clientId}:${this.dummyClientSecret}`);$=$.set("Authorization","Basic "+se)}if(this.useHttpBasicAuth||(Z=Z.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(Z=Z.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const se of Object.getOwnPropertyNames(this.customQueryParams))Z=Z.set(se,this.customQueryParams[se]);for(const se of Object.keys(F))Z=Z.set(se,F[se]);return $=$.set("Content-Type","application/x-www-form-urlencoded"),new Promise((se,X)=>{this.http.post(this.tokenEndpoint,Z,{headers:$}).subscribe(ae=>{this.debug("tokenResponse",ae),this.storeAccessTokenResponse(ae.access_token,ae.refresh_token,ae.expires_in||this.fallbackAccessTokenExpirationTimeInSec,ae.scope,this.extractRecognizedCustomParameters(ae)),this.oidc&&ae.id_token&&this.processIdToken(ae.id_token,ae.access_token).then(be=>{this.storeIdToken(be),se(ae)}),this.eventsSubject.next(new OAuthSuccessEvent("token_received")),se(ae)},ae=>{this.logger.error("Error performing ${grantType} flow",ae),this.eventsSubject.next(new OAuthErrorEvent("token_error",ae)),X(ae)})})}refreshToken(){return this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint"),new Promise((A,F)=>{let $=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.LE({encoder:new WebHttpUrlEncodingCodec}).set("grant_type","refresh_token").set("scope",this.scope).set("refresh_token",this._storage.getItem("refresh_token")),Z=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){const se=btoa(`${this.clientId}:${this.dummyClientSecret}`);Z=Z.set("Authorization","Basic "+se)}if(this.useHttpBasicAuth||($=$.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&($=$.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const se of Object.getOwnPropertyNames(this.customQueryParams))$=$.set(se,this.customQueryParams[se]);this.http.post(this.tokenEndpoint,$,{headers:Z}).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_10__.w)(se=>se.id_token?(0,rxjs__WEBPACK_IMPORTED_MODULE_11__.D)(this.processIdToken(se.id_token,se.access_token,!0)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_5__.b)(X=>this.storeIdToken(X)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.U)(X=>se)):(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(se))).subscribe(se=>{this.debug("refresh tokenResponse",se),this.storeAccessTokenResponse(se.access_token,se.refresh_token,se.expires_in||this.fallbackAccessTokenExpirationTimeInSec,se.scope,this.extractRecognizedCustomParameters(se)),this.eventsSubject.next(new OAuthSuccessEvent("token_received")),this.eventsSubject.next(new OAuthSuccessEvent("token_refreshed")),A(se)},se=>{this.logger.error("Error refreshing token",se),this.eventsSubject.next(new OAuthErrorEvent("token_refresh_error",se)),F(se)})})}removeSilentRefreshEventListener(){this.silentRefreshPostMessageEventListener&&(window.removeEventListener("message",this.silentRefreshPostMessageEventListener),this.silentRefreshPostMessageEventListener=null)}setupSilentRefreshEventListener(){this.removeSilentRefreshEventListener(),this.silentRefreshPostMessageEventListener=A=>{const F=this.processMessageEventMessage(A);this.tryLogin({customHashFragment:F,preventClearHashAfterLogin:!0,customRedirectUri:this.silentRefreshRedirectUri||this.redirectUri}).catch($=>this.debug("tryLogin during silent refresh failed",$))},window.addEventListener("message",this.silentRefreshPostMessageEventListener)}silentRefresh(A={},F=!0){const $=this.getIdentityClaims()||{};if(this.useIdTokenHintForSilentRefresh&&this.hasValidIdToken()&&(A.id_token_hint=this.getIdToken()),!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");if(typeof this.document>"u")throw new Error("silent refresh is not supported on this platform");const Z=this.document.getElementById(this.silentRefreshIFrameName);Z&&this.document.body.removeChild(Z),this.silentRefreshSubject=$.sub;const se=this.document.createElement("iframe");se.id=this.silentRefreshIFrameName,this.setupSilentRefreshEventListener(),this.createLoginUrl(null,null,this.silentRefreshRedirectUri||this.redirectUri,F,A).then(ee=>{se.setAttribute("src",ee),this.silentRefreshShowIFrame||(se.style.display="none"),this.document.body.appendChild(se)});const ae=this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(ee=>ee instanceof OAuthErrorEvent),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.P)()),be=this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(ee=>"token_received"===ee.type),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.P)()),pe=(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(new OAuthErrorEvent("silent_refresh_timeout",null)).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_8__.g)(this.silentRefreshTimeout));return(0,rxjs__WEBPACK_IMPORTED_MODULE_14__.S3)([ae,be,pe]).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.U)(ee=>{if(ee instanceof OAuthErrorEvent)throw"silent_refresh_timeout"===ee.type||(ee=new OAuthErrorEvent("silent_refresh_error",ee)),this.eventsSubject.next(ee),ee;return"token_received"===ee.type&&(ee=new OAuthSuccessEvent("silently_refreshed"),this.eventsSubject.next(ee)),ee})).toPromise()}initImplicitFlowInPopup(A){return this.initLoginFlowInPopup(A)}initLoginFlowInPopup(A){return A=A||{},this.createLoginUrl(null,null,this.silentRefreshRedirectUri,!1,{display:"popup"}).then(F=>new Promise(($,Z)=>{let ae,X=null;A.windowRef?A.windowRef&&!A.windowRef.closed&&(X=A.windowRef,X.location.href=F):X=window.open(F,"ngx-oauth2-oidc-login",this.calculatePopupFeatures(A));const be=ve=>{this.tryLogin({customHashFragment:ve,preventClearHashAfterLogin:!0,customRedirectUri:this.silentRefreshRedirectUri}).then(()=>{ee(),$(!0)},Ce=>{ee(),Z(Ce)})};X?ae=window.setInterval(()=>{(!X||X.closed)&&(ee(),Z(new OAuthErrorEvent("popup_closed",{})))},500):Z(new OAuthErrorEvent("popup_blocked",{}));const ee=()=>{window.clearInterval(ae),window.removeEventListener("storage",ie),window.removeEventListener("message",te),null!==X&&X.close(),X=null},te=ve=>{const Ce=this.processMessageEventMessage(ve);Ce&&null!==Ce?(window.removeEventListener("storage",ie),be(Ce)):console.log("false event firing")},ie=ve=>{"auth_hash"===ve.key&&(window.removeEventListener("message",te),be(ve.newValue))};window.addEventListener("message",te),window.addEventListener("storage",ie)}))}calculatePopupFeatures(A){const F=A.height||470,$=A.width||500,Z=window.screenLeft+(window.outerWidth-$)/2;return`location=no,toolbar=no,width=${$},height=${F},top=${window.screenTop+(window.outerHeight-F)/2},left=${Z}`}processMessageEventMessage(A){let F="#";if(this.silentRefreshMessagePrefix&&(F+=this.silentRefreshMessagePrefix),!A||!A.data||"string"!=typeof A.data)return;const $=A.data;return $.startsWith(F)?"#"+$.substr(F.length):void 0}canPerformSessionCheck(){return!(!this.sessionChecksEnabled||(this.sessionCheckIFrameUrl?this.getSessionState()?typeof this.document>"u":(console.warn("sessionChecksEnabled is activated but there is no session_state"),1):(console.warn("sessionChecksEnabled is activated but there is no sessionCheckIFrameUrl"),1)))}setupSessionCheckEventListener(){this.removeSessionCheckEventListener(),this.sessionCheckEventListener=A=>{const F=A.origin.toLowerCase(),$=this.issuer.toLowerCase();if(this.debug("sessionCheckEventListener"),$.startsWith(F)){switch(A.data){case"unchanged":this.ngZone.run(()=>{this.handleSessionUnchanged()});break;case"changed":this.ngZone.run(()=>{this.handleSessionChange()});break;case"error":this.ngZone.run(()=>{this.handleSessionError()})}this.debug("got info from session check inframe",A)}else this.debug("sessionCheckEventListener","wrong origin",F,"expected",$,"event",A)},this.ngZone.runOutsideAngular(()=>{window.addEventListener("message",this.sessionCheckEventListener)})}handleSessionUnchanged(){this.debug("session check","session unchanged"),this.eventsSubject.next(new OAuthInfoEvent("session_unchanged"))}handleSessionChange(){this.eventsSubject.next(new OAuthInfoEvent("session_changed")),this.stopSessionCheckTimer(),this.useSilentRefresh||"code"!==this.responseType?this.silentRefreshRedirectUri?(this.silentRefresh().catch(A=>this.debug("silent refresh failed after session changed")),this.waitForSilentRefreshAfterSessionChange()):(this.eventsSubject.next(new OAuthInfoEvent("session_terminated")),this.logOut(!0)):this.refreshToken().then(A=>{this.debug("token refresh after session change worked")}).catch(A=>{this.debug("token refresh did not work after session changed"),this.eventsSubject.next(new OAuthInfoEvent("session_terminated")),this.logOut(!0)})}waitForSilentRefreshAfterSessionChange(){this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(A=>"silently_refreshed"===A.type||"silent_refresh_timeout"===A.type||"silent_refresh_error"===A.type),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_13__.P)()).subscribe(A=>{"silently_refreshed"!==A.type&&(this.debug("silent refresh did not work after session changed"),this.eventsSubject.next(new OAuthInfoEvent("session_terminated")),this.logOut(!0))})}handleSessionError(){this.stopSessionCheckTimer(),this.eventsSubject.next(new OAuthInfoEvent("session_error"))}removeSessionCheckEventListener(){this.sessionCheckEventListener&&(window.removeEventListener("message",this.sessionCheckEventListener),this.sessionCheckEventListener=null)}initSessionCheck(){if(!this.canPerformSessionCheck())return;const A=this.document.getElementById(this.sessionCheckIFrameName);A&&this.document.body.removeChild(A);const F=this.document.createElement("iframe");F.id=this.sessionCheckIFrameName,this.setupSessionCheckEventListener(),F.setAttribute("src",this.sessionCheckIFrameUrl),F.style.display="none",this.document.body.appendChild(F),this.startSessionCheckTimer()}startSessionCheckTimer(){this.stopSessionCheckTimer(),this.ngZone.runOutsideAngular(()=>{this.sessionCheckTimer=setInterval(this.checkSession.bind(this),this.sessionCheckIntervall)})}stopSessionCheckTimer(){this.sessionCheckTimer&&(clearInterval(this.sessionCheckTimer),this.sessionCheckTimer=null)}checkSession(){const A=this.document.getElementById(this.sessionCheckIFrameName);A||this.logger.warn("checkSession did not find iframe",this.sessionCheckIFrameName);const F=this.getSessionState();F||this.stopSessionCheckTimer(),A.contentWindow.postMessage(this.clientId+" "+F,this.issuer)}createLoginUrl(A="",F="",$="",Z=!1,se={}){var X=this;return(0,_Users_ajaygupta_ProDemo_mvanand_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function*(){const ae=X;let be;be=$||X.redirectUri;const pe=yield X.createAndSaveNonce();if(A=A?pe+X.config.nonceStateSeparator+encodeURIComponent(A):pe,!X.requestAccessToken&&!X.oidc)throw new Error("Either requestAccessToken or oidc or both must be true");X.responseType=X.config.responseType?X.config.responseType:X.oidc&&X.requestAccessToken?"id_token token":X.oidc&&!X.requestAccessToken?"id_token":"token";const ee=ae.loginUrl.indexOf("?")>-1?"&":"?";let te=ae.scope;X.oidc&&!te.match(/(^|\s)openid($|\s)/)&&(te="openid "+te);let ie=ae.loginUrl+ee+"response_type="+encodeURIComponent(ae.responseType)+"&client_id="+encodeURIComponent(ae.clientId)+"&state="+encodeURIComponent(A)+"&redirect_uri="+encodeURIComponent(be)+"&scope="+encodeURIComponent(te);if(X.responseType.includes("code")&&!X.disablePKCE){const[ve,Ce]=yield X.createChallangeVerifierPairForPKCE();X.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.setItem("PKCE_verifier",Ce):X._storage.setItem("PKCE_verifier",Ce),ie+="&code_challenge="+ve,ie+="&code_challenge_method=S256"}F&&(ie+="&login_hint="+encodeURIComponent(F)),ae.resource&&(ie+="&resource="+encodeURIComponent(ae.resource)),ae.oidc&&(ie+="&nonce="+encodeURIComponent(pe)),Z&&(ie+="&prompt=none");for(const ve of Object.keys(se))ie+="&"+encodeURIComponent(ve)+"="+encodeURIComponent(se[ve]);if(X.customQueryParams)for(const ve of Object.getOwnPropertyNames(X.customQueryParams))ie+="&"+ve+"="+encodeURIComponent(X.customQueryParams[ve]);return ie})()}initImplicitFlowInternal(A="",F=""){if(this.inImplicitFlow)return;if(this.inImplicitFlow=!0,!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");let $={},Z=null;"string"==typeof F?Z=F:"object"==typeof F&&($=F),this.createLoginUrl(A,Z,null,!1,$).then(this.config.openUri).catch(se=>{console.error("Error in initImplicitFlow",se),this.inImplicitFlow=!1})}initImplicitFlow(A="",F=""){""!==this.loginUrl?this.initImplicitFlowInternal(A,F):this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)($=>"discovery_document_loaded"===$.type)).subscribe($=>this.initImplicitFlowInternal(A,F))}resetImplicitFlow(){this.inImplicitFlow=!1}callOnTokenReceivedIfExists(A){const F=this;if(A.onTokenReceived){const $={idClaims:F.getIdentityClaims(),idToken:F.getIdToken(),accessToken:F.getAccessToken(),state:F.state};A.onTokenReceived($)}}storeAccessTokenResponse(A,F,$,Z,se){if(this._storage.setItem("access_token",A),Z&&!Array.isArray(Z)?this._storage.setItem("granted_scopes",JSON.stringify(Z.split(" "))):Z&&Array.isArray(Z)&&this._storage.setItem("granted_scopes",JSON.stringify(Z)),this._storage.setItem("access_token_stored_at",""+this.dateTimeService.now()),$){const X=1e3*$,be=this.dateTimeService.new().getTime()+X;this._storage.setItem("expires_at",""+be)}F&&this._storage.setItem("refresh_token",F),se&&se.forEach((X,ae)=>{this._storage.setItem(ae,X)})}tryLogin(A=null){return"code"===this.config.responseType?this.tryLoginCodeFlow(A).then(F=>!0):this.tryLoginImplicitFlow(A)}parseQueryString(A){return A&&0!==A.length?("?"===A.charAt(0)&&(A=A.substr(1)),this.urlHelper.parseQueryString(A)):{}}tryLoginCodeFlow(A=null){var F=this;return(0,_Users_ajaygupta_ProDemo_mvanand_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function*(){const $=(A=A||{}).customHashFragment?A.customHashFragment.substring(1):window.location.search,Z=F.getCodePartsFromUrl($),se=Z.code,X=Z.state,ae=Z.session_state;if(!A.preventClearHashAfterLogin){const ee=location.origin+location.pathname+location.search.replace(/code=[^&\$]*/,"").replace(/scope=[^&\$]*/,"").replace(/state=[^&\$]*/,"").replace(/session_state=[^&\$]*/,"").replace(/^\?&/,"?").replace(/&$/,"").replace(/^\?$/,"").replace(/&+/g,"&").replace(/\?&/,"?").replace(/\?$/,"")+location.hash;history.replaceState(null,window.name,ee)}let[be,pe]=F.parseState(X);if(F.state=pe,Z.error){F.debug("error trying to login"),F.handleLoginError(A,Z);const ee=new OAuthErrorEvent("code_error",{},Z);return F.eventsSubject.next(ee),Promise.reject(ee)}if(!A.disableNonceCheck){if(!be)return F.saveRequestedRoute(),Promise.resolve();if(!A.disableOAuth2StateCheck&&!F.validateNonce(be)){const te=new OAuthErrorEvent("invalid_nonce_in_state",null);return F.eventsSubject.next(te),Promise.reject(te)}return F.storeSessionState(ae),se&&(yield F.getTokenFromCode(se,A),F.restoreRequestedRoute()),Promise.resolve()}return Promise.reject()})()}saveRequestedRoute(){this.config.preserveRequestedRoute&&this._storage.setItem("requested_route",window.location.pathname+window.location.search)}restoreRequestedRoute(){const A=this._storage.getItem("requested_route");A&&history.replaceState(null,"",window.location.origin+A)}getCodePartsFromUrl(A){return A&&0!==A.length?("?"===A.charAt(0)&&(A=A.substr(1)),this.urlHelper.parseQueryString(A)):this.urlHelper.getHashFragmentParams()}getTokenFromCode(A,F){let $=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.LE({encoder:new WebHttpUrlEncodingCodec}).set("grant_type","authorization_code").set("code",A).set("redirect_uri",F.customRedirectUri||this.redirectUri);if(!this.disablePKCE){let Z;Z=this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.getItem("PKCE_verifier"):this._storage.getItem("PKCE_verifier"),Z?$=$.set("code_verifier",Z):console.warn("No PKCE verifier found in oauth storage!")}return this.fetchAndProcessToken($,F)}fetchAndProcessToken(A,F){F=F||{},this.assertUrlNotNullAndCorrectProtocol(this.tokenEndpoint,"tokenEndpoint");let $=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){const Z=btoa(`${this.clientId}:${this.dummyClientSecret}`);$=$.set("Authorization","Basic "+Z)}return this.useHttpBasicAuth||(A=A.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(A=A.set("client_secret",this.dummyClientSecret)),new Promise((Z,se)=>{if(this.customQueryParams)for(let X of Object.getOwnPropertyNames(this.customQueryParams))A=A.set(X,this.customQueryParams[X]);this.http.post(this.tokenEndpoint,A,{headers:$}).subscribe(X=>{this.debug("refresh tokenResponse",X),this.storeAccessTokenResponse(X.access_token,X.refresh_token,X.expires_in||this.fallbackAccessTokenExpirationTimeInSec,X.scope,this.extractRecognizedCustomParameters(X)),this.oidc&&X.id_token?this.processIdToken(X.id_token,X.access_token,F.disableNonceCheck).then(ae=>{this.storeIdToken(ae),this.eventsSubject.next(new OAuthSuccessEvent("token_received")),this.eventsSubject.next(new OAuthSuccessEvent("token_refreshed")),Z(X)}).catch(ae=>{this.eventsSubject.next(new OAuthErrorEvent("token_validation_error",ae)),console.error("Error validating tokens"),console.error(ae),se(ae)}):(this.eventsSubject.next(new OAuthSuccessEvent("token_received")),this.eventsSubject.next(new OAuthSuccessEvent("token_refreshed")),Z(X))},X=>{console.error("Error getting token",X),this.eventsSubject.next(new OAuthErrorEvent("token_refresh_error",X)),se(X)})})}tryLoginImplicitFlow(A=null){let F;F=(A=A||{}).customHashFragment?this.urlHelper.getHashFragmentParams(A.customHashFragment):this.urlHelper.getHashFragmentParams(),this.debug("parsed url",F);const $=F.state;let[Z,se]=this.parseState($);if(this.state=se,F.error){this.debug("error trying to login"),this.handleLoginError(A,F);const ee=new OAuthErrorEvent("token_error",{},F);return this.eventsSubject.next(ee),Promise.reject(ee)}const X=F.access_token,ae=F.id_token,be=F.session_state,pe=F.scope;if(!this.requestAccessToken&&!this.oidc)return Promise.reject("Either requestAccessToken or oidc (or both) must be true.");if(this.requestAccessToken&&!X||this.requestAccessToken&&!A.disableOAuth2StateCheck&&!$||this.oidc&&!ae)return Promise.resolve(!1);if(this.sessionChecksEnabled&&!be&&this.logger.warn("session checks (Session Status Change Notification) were activated in the configuration but the id_token does not contain a session_state claim"),this.requestAccessToken&&!A.disableNonceCheck&&!this.validateNonce(Z)){const te=new OAuthErrorEvent("invalid_nonce_in_state",null);return this.eventsSubject.next(te),Promise.reject(te)}return this.requestAccessToken&&this.storeAccessTokenResponse(X,null,F.expires_in||this.fallbackAccessTokenExpirationTimeInSec,pe),this.oidc?this.processIdToken(ae,X,A.disableNonceCheck).then(ee=>A.validationHandler?A.validationHandler({accessToken:X,idClaims:ee.idTokenClaims,idToken:ee.idToken,state:$}).then(te=>ee):ee).then(ee=>(this.storeIdToken(ee),this.storeSessionState(be),this.clearHashAfterLogin&&!A.preventClearHashAfterLogin&&this.clearLocationHash(),this.eventsSubject.next(new OAuthSuccessEvent("token_received")),this.callOnTokenReceivedIfExists(A),this.inImplicitFlow=!1,!0)).catch(ee=>(this.eventsSubject.next(new OAuthErrorEvent("token_validation_error",ee)),this.logger.error("Error validating tokens"),this.logger.error(ee),Promise.reject(ee))):(this.eventsSubject.next(new OAuthSuccessEvent("token_received")),this.clearHashAfterLogin&&!A.preventClearHashAfterLogin&&this.clearLocationHash(),this.callOnTokenReceivedIfExists(A),Promise.resolve(!0))}parseState(A){let F=A,$="";if(A){const Z=A.indexOf(this.config.nonceStateSeparator);Z>-1&&(F=A.substr(0,Z),$=A.substr(Z+this.config.nonceStateSeparator.length))}return[F,$]}validateNonce(A){let F;return F=this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.getItem("nonce"):this._storage.getItem("nonce"),F===A||(console.error("Validating access_token failed, wrong state/nonce.",F,A),!1)}storeIdToken(A){this._storage.setItem("id_token",A.idToken),this._storage.setItem("id_token_claims_obj",A.idTokenClaimsJson),this._storage.setItem("id_token_expires_at",""+A.idTokenExpiresAt),this._storage.setItem("id_token_stored_at",""+this.dateTimeService.now())}storeSessionState(A){this._storage.setItem("session_state",A)}getSessionState(){return this._storage.getItem("session_state")}handleLoginError(A,F){A.onLoginError&&A.onLoginError(F),this.clearHashAfterLogin&&!A.preventClearHashAfterLogin&&this.clearLocationHash()}getClockSkewInMsec(A=6e5){return this.clockSkewInSec?1e3*this.clockSkewInSec:A}processIdToken(A,F,$=!1){const Z=A.split("."),X=b64DecodeUnicode(this.padBase64(Z[0])),ae=JSON.parse(X),pe=b64DecodeUnicode(this.padBase64(Z[1])),ee=JSON.parse(pe);let te;if(te=this.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.getItem("nonce"):this._storage.getItem("nonce"),Array.isArray(ee.aud)){if(ee.aud.every(he=>he!==this.clientId)){const he="Wrong audience: "+ee.aud.join(",");return this.logger.warn(he),Promise.reject(he)}}else if(ee.aud!==this.clientId){const he="Wrong audience: "+ee.aud;return this.logger.warn(he),Promise.reject(he)}if(!ee.sub){const he="No sub claim in id_token";return this.logger.warn(he),Promise.reject(he)}if(this.sessionChecksEnabled&&this.silentRefreshSubject&&this.silentRefreshSubject!==ee.sub){const he=`After refreshing, we got an id_token for another user (sub). Expected sub: ${this.silentRefreshSubject}, received sub: ${ee.sub}`;return this.logger.warn(he),Promise.reject(he)}if(!ee.iat){const he="No iat claim in id_token";return this.logger.warn(he),Promise.reject(he)}if(!this.skipIssuerCheck&&ee.iss!==this.issuer){const he="Wrong issuer: "+ee.iss;return this.logger.warn(he),Promise.reject(he)}if(!$&&ee.nonce!==te){const he="Wrong nonce: "+ee.nonce;return this.logger.warn(he),Promise.reject(he)}if(this.hasOwnProperty("responseType")&&("code"===this.responseType||"id_token"===this.responseType)&&(this.disableAtHashCheck=!0),!this.disableAtHashCheck&&this.requestAccessToken&&!ee.at_hash){const he="An at_hash is needed!";return this.logger.warn(he),Promise.reject(he)}const ie=this.dateTimeService.now(),ve=1e3*ee.iat,Ce=1e3*ee.exp,fe=this.getClockSkewInMsec();if(ve-fe>=ie||Ce+fe<=ie){const he="Token has expired";return console.error(he),console.error({now:ie,issuedAtMSec:ve,expiresAtMSec:Ce}),Promise.reject(he)}const _e={accessToken:F,idToken:A,jwks:this.jwks,idTokenClaims:ee,idTokenHeader:ae,loadKeys:()=>this.loadJwks()};return this.disableAtHashCheck?this.checkSignature(_e).then(he=>({idToken:A,idTokenClaims:ee,idTokenClaimsJson:pe,idTokenHeader:ae,idTokenHeaderJson:X,idTokenExpiresAt:Ce})):this.checkAtHash(_e).then(he=>{if(!this.disableAtHashCheck&&this.requestAccessToken&&!he){const Ke="Wrong at_hash";return this.logger.warn(Ke),Promise.reject(Ke)}return this.checkSignature(_e).then(Ke=>{const Oe={idToken:A,idTokenClaims:ee,idTokenClaimsJson:pe,idTokenHeader:ae,idTokenHeaderJson:X,idTokenExpiresAt:Ce};return this.disableAtHashCheck?Oe:this.checkAtHash(_e).then(C=>{if(this.requestAccessToken&&!C){const oi="Wrong at_hash";return this.logger.warn(oi),Promise.reject(oi)}return Oe})})})}getIdentityClaims(){const A=this._storage.getItem("id_token_claims_obj");return A?JSON.parse(A):null}getGrantedScopes(){const A=this._storage.getItem("granted_scopes");return A?JSON.parse(A):null}getIdToken(){return this._storage?this._storage.getItem("id_token"):null}padBase64(A){for(;A.length%4!=0;)A+="=";return A}getAccessToken(){return this._storage?this._storage.getItem("access_token"):null}getRefreshToken(){return this._storage?this._storage.getItem("refresh_token"):null}getAccessTokenExpiration(){return this._storage.getItem("expires_at")?parseInt(this._storage.getItem("expires_at"),10):null}getAccessTokenStoredAt(){return parseInt(this._storage.getItem("access_token_stored_at"),10)}getIdTokenStoredAt(){return parseInt(this._storage.getItem("id_token_stored_at"),10)}getIdTokenExpiration(){return this._storage.getItem("id_token_expires_at")?parseInt(this._storage.getItem("id_token_expires_at"),10):null}hasValidAccessToken(){if(this.getAccessToken()){const A=this._storage.getItem("expires_at"),F=this.dateTimeService.new();return!(A&&parseInt(A,10)<F.getTime()-this.getClockSkewInMsec())}return!1}hasValidIdToken(){if(this.getIdToken()){const A=this._storage.getItem("id_token_expires_at"),F=this.dateTimeService.new();return!(A&&parseInt(A,10)<F.getTime()-this.getClockSkewInMsec())}return!1}getCustomTokenResponseProperty(A){return this._storage&&this.config.customTokenParameters&&this.config.customTokenParameters.indexOf(A)>=0&&null!==this._storage.getItem(A)?JSON.parse(this._storage.getItem(A)):null}authorizationHeader(){return"Bearer "+this.getAccessToken()}logOut(A={},F=""){let $=!1;"boolean"==typeof A&&($=A,A={});const Z=this.getIdToken();if(this._storage.removeItem("access_token"),this._storage.removeItem("id_token"),this._storage.removeItem("refresh_token"),this.saveNoncesInLocalStorage?(localStorage.removeItem("nonce"),localStorage.removeItem("PKCE_verifier")):(this._storage.removeItem("nonce"),this._storage.removeItem("PKCE_verifier")),this._storage.removeItem("expires_at"),this._storage.removeItem("id_token_claims_obj"),this._storage.removeItem("id_token_expires_at"),this._storage.removeItem("id_token_stored_at"),this._storage.removeItem("access_token_stored_at"),this._storage.removeItem("granted_scopes"),this._storage.removeItem("session_state"),this.config.customTokenParameters&&this.config.customTokenParameters.forEach(X=>this._storage.removeItem(X)),this.silentRefreshSubject=null,this.eventsSubject.next(new OAuthInfoEvent("logout")),!this.logoutUrl||$||!Z&&!this.postLogoutRedirectUri)return;let se;if(!this.validateUrlForHttps(this.logoutUrl))throw new Error("logoutUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");if(this.logoutUrl.indexOf("{{")>-1)se=this.logoutUrl.replace(/\{\{id_token\}\}/,encodeURIComponent(Z)).replace(/\{\{client_id\}\}/,encodeURIComponent(this.clientId));else{let X=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.LE({encoder:new WebHttpUrlEncodingCodec});Z&&(X=X.set("id_token_hint",Z));const ae=this.postLogoutRedirectUri||this.redirectUriAsPostLogoutRedirectUriFallback&&this.redirectUri||"";ae&&(X=X.set("post_logout_redirect_uri",ae),F&&(X=X.set("state",F)));for(let be in A)X=X.set(be,A[be]);se=this.logoutUrl+(this.logoutUrl.indexOf("?")>-1?"&":"?")+X.toString()}this.config.openUri(se)}createAndSaveNonce(){const A=this;return this.createNonce().then(function(F){return A.saveNoncesInLocalStorage&&typeof window.localStorage<"u"?localStorage.setItem("nonce",F):A._storage.setItem("nonce",F),F})}ngOnDestroy(){this.clearAccessTokenTimer(),this.clearIdTokenTimer(),this.removeSilentRefreshEventListener();const A=this.document.getElementById(this.silentRefreshIFrameName);A&&A.remove(),this.stopSessionCheckTimer(),this.removeSessionCheckEventListener();const F=this.document.getElementById(this.sessionCheckIFrameName);F&&F.remove()}createNonce(){return new Promise(A=>{if(this.rngUrl)throw new Error("createNonce with rng-web-api has not been implemented so far");const F="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~";let $=45,Z="";const se=typeof self>"u"?null:self.crypto||self.msCrypto;if(se){let X=new Uint8Array($);se.getRandomValues(X),X.map||(X.map=Array.prototype.map),X=X.map(ae=>F.charCodeAt(ae%F.length)),Z=String.fromCharCode.apply(null,X)}else for(;0<$--;)Z+=F[Math.random()*F.length|0];A(base64UrlEncode(Z))})}checkAtHash(A){var F=this;return(0,_Users_ajaygupta_ProDemo_mvanand_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function*(){return F.tokenValidationHandler?F.tokenValidationHandler.validateAtHash(A):(F.logger.warn("No tokenValidationHandler configured. Cannot check at_hash."),!0)})()}checkSignature(A){return this.tokenValidationHandler?this.tokenValidationHandler.validateSignature(A):(this.logger.warn("No tokenValidationHandler configured. Cannot check signature."),Promise.resolve(null))}initLoginFlow(A="",F={}){return"code"===this.responseType?this.initCodeFlow(A,F):this.initImplicitFlow(A,F)}initCodeFlow(A="",F={}){""!==this.loginUrl?this.initCodeFlowInternal(A,F):this.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)($=>"discovery_document_loaded"===$.type)).subscribe($=>this.initCodeFlowInternal(A,F))}initCodeFlowInternal(A="",F={}){if(!this.validateUrlForHttps(this.loginUrl))throw new Error("loginUrl  must use HTTPS (with TLS), or config value for property 'requireHttps' must be set to 'false' and allow HTTP (without TLS).");let $={},Z=null;"string"==typeof F?Z=F:"object"==typeof F&&($=F),this.createLoginUrl(A,Z,null,!1,$).then(this.config.openUri).catch(se=>{console.error("Error in initAuthorizationCodeFlow"),console.error(se)})}createChallangeVerifierPairForPKCE(){var A=this;return(0,_Users_ajaygupta_ProDemo_mvanand_node_modules_babel_runtime_helpers_esm_asyncToGenerator_js__WEBPACK_IMPORTED_MODULE_2__.Z)(function*(){if(!A.crypto)throw new Error("PKCE support for code flow needs a CryptoHander. Did you import the OAuthModule using forRoot() ?");const F=yield A.createNonce();return[base64UrlEncode(yield A.crypto.calcHash(F,"sha-256")),F]})()}extractRecognizedCustomParameters(A){let F=new Map;return this.config.customTokenParameters&&this.config.customTokenParameters.forEach($=>{A[$]&&F.set($,JSON.stringify(A[$]))}),F}revokeTokenAndLogout(A={},F=!1){let $=this.revocationEndpoint,Z=this.getAccessToken(),se=this.getRefreshToken();if(!Z)return;let X=new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.LE({encoder:new WebHttpUrlEncodingCodec}),ae=(new _angular_common_http__WEBPACK_IMPORTED_MODULE_9__.WM).set("Content-Type","application/x-www-form-urlencoded");if(this.useHttpBasicAuth){const be=btoa(`${this.clientId}:${this.dummyClientSecret}`);ae=ae.set("Authorization","Basic "+be)}if(this.useHttpBasicAuth||(X=X.set("client_id",this.clientId)),!this.useHttpBasicAuth&&this.dummyClientSecret&&(X=X.set("client_secret",this.dummyClientSecret)),this.customQueryParams)for(const be of Object.getOwnPropertyNames(this.customQueryParams))X=X.set(be,this.customQueryParams[be]);return new Promise((be,pe)=>{let ee,te;if(Z){let ie=X.set("token",Z).set("token_type_hint","access_token");ee=this.http.post($,ie,{headers:ae})}else ee=(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(null);if(se){let ie=X.set("token",se).set("token_type_hint","refresh_token");te=this.http.post($,ie,{headers:ae})}else te=(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(null);F&&(ee=ee.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.K)(ie=>0===ie.status?(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(null):(0,rxjs__WEBPACK_IMPORTED_MODULE_16__._)(ie))),te=te.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.K)(ie=>0===ie.status?(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(null):(0,rxjs__WEBPACK_IMPORTED_MODULE_16__._)(ie)))),(0,rxjs__WEBPACK_IMPORTED_MODULE_17__.aj)([ee,te]).subscribe(ie=>{this.logOut(A),be(ie),this.logger.info("Token successfully revoked")},ie=>{this.logger.error("Error revoking token",ie),this.eventsSubject.next(new OAuthErrorEvent("token_revoke_error",ie)),pe(ie)})})}clearLocationHash(){""!=location.hash&&(location.hash="")}}return ne.\u0275fac=function(A){return new(A||ne)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_core__WEBPACK_IMPORTED_MODULE_1__.R0b),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_common_http__WEBPACK_IMPORTED_MODULE_9__.eN),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(OAuthStorage,8),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(ValidationHandler,8),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(AuthConfig,8),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(UrlHelperService),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(OAuthLogger),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(HashHandler,8),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(_angular_common__WEBPACK_IMPORTED_MODULE_18__.K0),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(DateTimeProvider))},ne.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:ne,factory:ne.\u0275fac}),ne})();class OAuthModuleConfig{}class OAuthResourceServerConfig{}class OAuthResourceServerErrorHandler{}class OAuthNoopResourceServerErrorHandler{handleError(ce){return(0,rxjs__WEBPACK_IMPORTED_MODULE_16__._)(ce)}}let DefaultOAuthInterceptor=(()=>{class ne{constructor(A,F,$){this.oAuthService=A,this.errorHandler=F,this.moduleConfig=$}checkUrl(A){return this.moduleConfig.resourceServer.customUrlValidation?this.moduleConfig.resourceServer.customUrlValidation(A):!this.moduleConfig.resourceServer.allowedUrls||!!this.moduleConfig.resourceServer.allowedUrls.find(F=>A.toLowerCase().startsWith(F.toLowerCase()))}intercept(A,F){const $=A.url.toLowerCase();return this.moduleConfig&&this.moduleConfig.resourceServer&&this.checkUrl($)?this.moduleConfig.resourceServer.sendAccessToken?(0,rxjs__WEBPACK_IMPORTED_MODULE_19__.T)((0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(this.oAuthService.getAccessToken()).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(se=>!!se)),this.oAuthService.events.pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_4__.h)(se=>"token_received"===se.type),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_20__.V)(this.oAuthService.waitForTokenInMsec||0),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.K)(se=>(0,rxjs__WEBPACK_IMPORTED_MODULE_7__.of)(null)),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_12__.U)(se=>this.oAuthService.getAccessToken()))).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_21__.q)(1),(0,rxjs_operators__WEBPACK_IMPORTED_MODULE_22__.zg)(se=>{if(se){const ae=A.headers.set("Authorization","Bearer "+se);A=A.clone({headers:ae})}return F.handle(A).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.K)(X=>this.errorHandler.handleError(X)))})):F.handle(A).pipe((0,rxjs_operators__WEBPACK_IMPORTED_MODULE_15__.K)(se=>this.errorHandler.handleError(se))):F.handle(A)}}return ne.\u0275fac=function(A){return new(A||ne)(_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(OAuthService),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(OAuthResourceServerErrorHandler),_angular_core__WEBPACK_IMPORTED_MODULE_1__.LFG(OAuthModuleConfig,8))},ne.\u0275prov=_angular_core__WEBPACK_IMPORTED_MODULE_1__.Yz7({token:ne,factory:ne.\u0275fac}),ne})();class NullValidationHandler{validateSignature(ce){return Promise.resolve(null)}validateAtHash(ce){return Promise.resolve(!0)}}function createDefaultLogger(){return console}function createDefaultStorage(){return typeof sessionStorage<"u"?sessionStorage:new MemoryStorage}let OAuthModule=(()=>{class ne{static forRoot(A=null,F=NullValidationHandler){return{ngModule:ne,providers:[OAuthService,UrlHelperService,{provide:OAuthLogger,useFactory:createDefaultLogger},{provide:OAuthStorage,useFactory:createDefaultStorage},{provide:ValidationHandler,useClass:F},{provide:HashHandler,useClass:DefaultHashHandler},{provide:OAuthResourceServerErrorHandler,useClass:OAuthNoopResourceServerErrorHandler},{provide:OAuthModuleConfig,useValue:A},{provide:_angular_common_http__WEBPACK_IMPORTED_MODULE_9__.TP,useClass:DefaultOAuthInterceptor,multi:!0},{provide:DateTimeProvider,useClass:SystemDateTimeProvider}]}}}return ne.\u0275fac=function(A){return new(A||ne)},ne.\u0275mod=_angular_core__WEBPACK_IMPORTED_MODULE_1__.oAB({type:ne}),ne.\u0275inj=_angular_core__WEBPACK_IMPORTED_MODULE_1__.cJS({imports:[[_angular_common__WEBPACK_IMPORTED_MODULE_18__.ez]]}),ne})();const err="PLEASE READ THIS CAREFULLY:\n\nBeginning with angular-oauth2-oidc version 9, the JwksValidationHandler\nhas been moved to an library of its own. If you need it for implementing\nOAuth2/OIDC **implicit flow**, please install it using npm:\n\n  npm i angular-oauth2-oidc-jwks --save\n\nAfter that, you can import it into your application:\n\n  import { JwksValidationHandler } from 'angular-oauth2-oidc-jwks';\n\nPlease note, that this dependency is not needed for the **code flow**,\nwhich is nowadays the **recommented** one for single page applications.\nThis also results in smaller bundle sizes.\n";class JwksValidationHandler extends NullValidationHandler{constructor(){super(),console.error(err)}}const AUTH_CONFIG=new _angular_core__WEBPACK_IMPORTED_MODULE_1__.OlP("AUTH_CONFIG")},5861:(ne,ce,A)=>{"use strict";function F(Z,se,X,ae,be,pe,ee){try{var te=Z[pe](ee),ie=te.value}catch(ve){return void X(ve)}te.done?se(ie):Promise.resolve(ie).then(ae,be)}function $(Z){return function(){var se=this,X=arguments;return new Promise(function(ae,be){var pe=Z.apply(se,X);function ee(ie){F(pe,ae,be,ee,te,"next",ie)}function te(ie){F(pe,ae,be,ee,te,"throw",ie)}ee(void 0)})}}A.d(ce,{Z:()=>$})}},ne=>{ne(ne.s=1569)}]);