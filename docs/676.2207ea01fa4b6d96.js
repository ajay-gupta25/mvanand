"use strict";(self.webpackChunkSpeechtoText=self.webpackChunkSpeechtoText||[]).push([[676],{7676:(I,y,c)=>{c.d(y,{A:()=>Ie});var f=c(5861),e=c(5879),U=c(1880),v=c(2888),u=c(2425),b=c(6079),d=c(9862),m=c(6478),p=c(3788),_=c(3395),h=c(6814),l=c(6223),T=c(8948),k=c(7504),q=c(2253),N=c(7586);const E=function(){return{exact:!0}};function M(n,a){1&n&&(e.TgZ(0,"a",5),e._uU(1,"User Management"),e.qZA()),2&n&&e.Q6J("routerLinkActiveOptions",e.DdM(1,E))}function D(n,a){if(1&n&&(e.TgZ(0,"div",1)(1,"div",2)(2,"h4"),e._uU(3,"Settings"),e.qZA(),e.TgZ(4,"ul",3)(5,"li"),e.YNc(6,M,2,2,"a",4),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(6),e.Q6J("ngIf",t.hasPermission("User Management","view"))}}let w=(()=>{class n{constructor(t){this.permissionService=t,this.show_setting=!0}hasPermission(t,s){return this.permissionService.hasPermission(t,s)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(_.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-settings"]],inputs:{show_setting:"show_setting"},decls:1,vars:1,consts:[["class","settingstabs_header",4,"ngIf"],[1,"settingstabs_header"],[1,"page_title"],[1,"tabs_menu"],["routerLink","/home/userManagement","routerLinkActive","active-link",3,"routerLinkActiveOptions",4,"ngIf"],["routerLink","/home/userManagement","routerLinkActive","active-link",3,"routerLinkActiveOptions"]],template:function(t,s){1&t&&e.YNc(0,D,7,1,"div",0),2&t&&e.Q6J("ngIf",s.show_setting)},dependencies:[h.O5,N.rH,N.Od]}),n})();var L=c(6472),S=c(363),A=c(8645),C=c(9773),B=c(4775),Q=c(4053),F=c(5341);let O=(()=>{class n{constructor(t,s){this.http=t,this.appService=s,this.apiUrl=Q.N.apiBaseUrlRole+"/role"}getRolesList(t){const s=this.appService.createHeaders(t);return this.http.get(`${this.apiUrl}/get-roles-list`,{headers:s})}getRolesByCompany(t,s){const o=this.appService.createHeaders(s);return this.http.get(`${this.apiUrl}/get-roles-by-company/${t}`,{headers:o})}getRoles(t,s,o){const r=this.appService.createHeaders(o);let i="";return void 0!==t&&void 0!==s&&(i=`?page=${t}&limit=${s}`),this.http.get(`${this.apiUrl}/roles${i}`,{headers:r})}createRole(t,s){const o=this.appService.createHeaders(s);return this.http.post(`${this.apiUrl}/create-role`,t,{headers:o})}deleteRole(t,s){const o=this.appService.createHeaders(s);return this.http.delete(`${this.apiUrl}/delete-role/${t}`,{headers:o})}updateRole(t,s,o){const r=this.appService.createHeaders(o);return this.http.put(`${this.apiUrl}/update-role/${t}`,s,{headers:r})}getPermissionsByRoleId(t,s){const o=this.appService.createHeaders(s);return this.http.get(`${this.apiUrl}/roles/${t}`,{headers:o})}updatePermission(t,s,o){const r=this.appService.createHeaders(o);return this.http.put(`${this.apiUrl}/update-permission/${t}`,s,{headers:r})}filterRoles(t,s){const o=this.appService.createHeaders(s);return this.http.get(`${this.apiUrl}/roles?search=${t}`,{headers:o})}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(d.eN),e.LFG(F.z))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var G=c(5480),R=c(3999);const j=["userImage"],P=["fileInput"];function V(n,a){if(1&n&&e._UZ(0,"img",46,47),2&n){const t=e.oxw();e.Q6J("src",t.imageUrl,e.LSH)}}function Y(n,a){1&n&&e._UZ(0,"img",48,47)}function z(n,a){1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIELD_REQUIRED")," "))}function $(n,a){1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIRSTNAME_MESSAGE")," "))}function K(n,a){if(1&n&&(e.TgZ(0,"div",49),e.YNc(1,z,3,3,"ng-container",50),e.YNc(2,$,3,3,"ng-container",50),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.Userform.controls.firstName.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.Userform.controls.firstName.hasError("maxlength"))}}function H(n,a){1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIELD_REQUIRED")," "))}function W(n,a){1&n&&(e.ynx(0),e._uU(1),e.ALo(2,"translate"),e.BQk()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LASTNAME_MESSAGE")," "))}function X(n,a){if(1&n&&(e.TgZ(0,"div",49),e.YNc(1,H,3,3,"ng-container",50),e.YNc(2,W,3,3,"ng-container",50),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngIf",t.Userform.controls.lastName.hasError("required")),e.xp6(1),e.Q6J("ngIf",t.Userform.controls.lastName.hasError("maxlength"))}}function ee(n,a){1&n&&(e.TgZ(0,"div",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIELD_REQUIRED")," "))}function te(n,a){1&n&&(e.TgZ(0,"div",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIELD_EMAIL")," "))}function se(n,a){1&n&&(e.TgZ(0,"div",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"EMP_ID_MESSAGE")," "))}function ne(n,a){1&n&&(e.TgZ(0,"div",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"LOCATION_MESSAGE")," "))}function oe(n,a){1&n&&(e.TgZ(0,"div",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIELD_REQUIRED")," "))}function ie(n,a){1&n&&(e.TgZ(0,"div",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIELD_REQUIRED")," "))}function ae(n,a){1&n&&(e.TgZ(0,"div",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIELD_REQUIRED")," "))}function re(n,a){1&n&&(e.TgZ(0,"div",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIELD_REQUIRED")," "))}function le(n,a){1&n&&(e.TgZ(0,"div",49),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"FIELD_REQUIRED")," "))}function ce(n,a){if(1&n&&(e.TgZ(0,"div",18)(1,"label",51),e._uU(2,"Status"),e.qZA(),e._UZ(3,"ng-select",52),e.YNc(4,le,3,3,"div",21),e.qZA()),2&n){const t=e.oxw();e.xp6(3),e.Q6J("items",t.statusArray),e.xp6(1),e.Q6J("ngIf",t.Userform.controls.status.hasError("required"))}}const Z=function(n){return{"is-invalid":n}};let x=(()=>{class n{constructor(t,s,o,r,i,g){this.userService=t,this.companyService=s,this.organizationService=o,this.roleService=r,this.toastr=i,this.storeService=g,this.isCreateButtonClicked=!1,this.isEditButtonClicked=!1,this.Userform=new l.cw({firstName:new l.NI("",[l.kI.required,l.kI.maxLength(15)]),lastName:new l.NI("",[l.kI.required,l.kI.maxLength(15)]),email:new l.NI("",[l.kI.required,n=>/[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}/.test(n.value)?null:{invalidEmail:{value:n.value}}]),mobile_no:new l.NI("",[l.kI.maxLength(10),l.kI.pattern(/^\d*$/)]),code:new l.NI("+91"),emp_id:new l.NI(null,[l.kI.maxLength(15)]),location:new l.NI("",[l.kI.maxLength(30)]),company_id:new l.NI(null,[l.kI.required]),org_id:new l.NI(null,[l.kI.required]),role_id:new l.NI(null,[l.kI.required]),dep_id:new l.NI(null),image:new l.NI(null),status:new l.NI}),this.IsCreatestatus=!0,this.companies=[],this.userArray=[],this.organizations=[],this.departments=[],this.isLoading=!0,this.emp_id=null,this.roles=[],this.id=null,this.imageUrl=null,this.statusArray=[{key:"Active"},{key:"InActive"}],this.countryCode="",this.onModalClose=new e.vpe,this.userId=null,this.companyId=null,this.countries=[{name:"Afghanistan",code:"+93"},{name:"Albania",code:"+355"},{name:"Algeria",code:"+213"},{name:"American Samoa",code:"+1-684"},{name:"Andorra",code:"+376"},{name:"Angola",code:"+244"},{name:"Anguilla",code:"+1-264"},{name:"Antarctica",code:"+672"},{name:"Antigua and Barbuda",code:"+1-268"},{name:"Argentina",code:"+54"},{name:"Armenia",code:"+374"},{name:"Aruba",code:"+297"},{name:"Australia",code:"+61"},{name:"Austria",code:"+43"},{name:"Azerbaijan",code:"+994"},{name:"Bahamas",code:"+1-242"},{name:"Bahrain",code:"+973"},{name:"Bangladesh",code:"+880"},{name:"Barbados",code:"+1-246"},{name:"Belarus",code:"+375"},{name:"Belgium",code:"+32"},{name:"Belize",code:"+501"},{name:"Benin",code:"+229"},{name:"Bermuda",code:"+1-441"},{name:"Bhutan",code:"+975"},{name:"Bolivia",code:"+591"},{name:"Bosnia and Herzegovina",code:"+387"},{name:"Botswana",code:"+267"},{name:"Brazil",code:"+55"},{name:"British Indian Ocean Territory",code:"+246"},{name:"Brunei",code:"+673"},{name:"Bulgaria",code:"+359"},{name:"Burkina Faso",code:"+226"},{name:"Burundi",code:"+257"},{name:"Cambodia",code:"+855"},{name:"Cameroon",code:"+237"},{name:"Canada",code:"+1"},{name:"Cape Verde",code:"+238"},{name:"Cayman Islands",code:"+1-345"},{name:"Central African Republic",code:"+236"},{name:"Chad",code:"+235"},{name:"Chile",code:"+56"},{name:"China",code:"+86"},{name:"Christmas Island",code:"+61"},{name:"Cocos Islands",code:"+61"},{name:"Colombia",code:"+57"},{name:"Comoros",code:"+269"},{name:"Cook Islands",code:"+682"},{name:"Costa Rica",code:"+506"},{name:"Croatia",code:"+385"},{name:"Cuba",code:"+53"},{name:"Curacao",code:"+599"},{name:"Cyprus",code:"+357"},{name:"Czech Republic",code:"+420"},{name:"Democratic Republic of the Congo",code:"+243"},{name:"Denmark",code:"+45"},{name:"Djibouti",code:"+253"},{name:"Dominica",code:"+1-767"},{name:"East Timor",code:"+670"},{name:"Ecuador",code:"+593"},{name:"Egypt",code:"+20"},{name:"El Salvador",code:"+503"},{name:"Equatorial Guinea",code:"+240"},{name:"Eritrea",code:"+291"},{name:"Estonia",code:"+372"},{name:"Ethiopia",code:"+251"},{name:"Falkland Islands",code:"+500"},{name:"Faroe Islands",code:"+298"},{name:"Fiji",code:"+679"},{name:"Finland",code:"+358"},{name:"France",code:"+33"},{name:"French Polynesia",code:"+689"},{name:"Gabon",code:"+241"},{name:"Gambia",code:"+220"},{name:"Georgia",code:"+995"},{name:"Germany",code:"+49"},{name:"Ghana",code:"+233"},{name:"Gibraltar",code:"+350"},{name:"Greece",code:"+30"},{name:"Greenland",code:"+299"},{name:"Grenada",code:"+1-473"},{name:"Guam",code:"+1-671"},{name:"Guatemala",code:"+502"},{name:"Guinea",code:"+224"},{name:"Guinea-Bissau",code:"+245"},{name:"Guyana",code:"+592"},{name:"Haiti",code:"+509"},{name:"Honduras",code:"+504"},{name:"Hong Kong",code:"+852"},{name:"Hungary",code:"+36"},{name:"Iceland",code:"+354"},{name:"India",code:"+91"},{name:"Indonesia",code:"+62"},{name:"Iran",code:"+98"},{name:"Iraq",code:"+964"},{name:"Ireland",code:"+353"},{name:"Israel",code:"+972"},{name:"Italy",code:"+39"}],this.imgUrl=null,this.selectedCountry="+91",this.selectedCountryDialCode="+91",this.defaultImageUrl="../../../assets/img/user-default-img.png"}ngOnInit(){this.userId&&(this.Userform.get("status")?.setValidators([l.kI.required]),this.IsCreatestatus=!1),this.countries.sort((t,s)=>t.code.localeCompare(s.code)),this.Userform.get("company_id").valueChanges.subscribe(t=>{this.Userform.get("org_id").setValue(null),this.organizations=[],this.Userform.get("role_id").setValue(null),this.roles=[]})}closeModal(){this.onModalClose.emit()}edituser(t,s){this.Userform.get("firstName")?.setValue(t.firstName),this.Userform.get("lastName")?.setValue(t.lastName),this.Userform.get("email")?.setValue(t.email),this.Userform.get("code")?.setValue(t.code),this.Userform.get("mobile_no")?.setValue(t.mobile_no),this.Userform.get("status")?.setValue(t.status),this.Userform.get("location")?.setValue(t.location),this.Userform.get("company_id")?.setValue(t.company_id),this.Userform.get("org_id")?.setValue(t.org_id),this.Userform.get("role_id")?.setValue(t.role_id),this.Userform.get("dep_id")?.setValue(t.dep_id),this.imageUrl=t.image;let o=t.emp_id?t.emp_id:null;this.id=t._id?t._id:null,this.Userform.get("emp_id")?.setValue(o),this.emp_id=t.emp_id,this.companyName=t.company_id,s&&this.storeService.setItem("profileimage",t.image,!0)}getUserDetail(t){let s=new A.x;this.userService.getUserDetail(this.userId).pipe((0,C.R)(s)).subscribe({next:o=>{this.edituser(o.data,t),s.next()},error:o=>{},complete:()=>{s.complete()}})}getCompanies(){let t=new A.x;this.companyService.getCompanyList().pipe((0,C.R)(t)).subscribe({next:s=>{this.companies=s.data||[],t.next()},error:s=>{this.toastr.error(s.error.error)},complete:()=>{t.complete()}})}getRolesByCompany(t){let s=new A.x;this.roleService.getRolesByCompany(t).pipe((0,C.R)(s)).subscribe({next:o=>{1===o.success&&(this.roles=o.data||[])},error:o=>{this.toastr.error(o.error.message)},complete:()=>{s.complete()}})}getDepartments(){let t=new A.x;this.userService.getdepartments().pipe((0,C.R)(t)).subscribe({next:s=>{this.departments=s.data,t.next()},error:s=>{this.toastr.error(s.error.error)},complete:()=>{t.complete()}})}addUpdate(t){let s=new A.x;if(this.Userform.valid){const o=new FormData,r=Object.keys(this.Userform.value).filter(i=>null!==this.Userform.value[i]&&""!==this.Userform.value[i]&&void 0!==this.Userform.value[i]).reduce((i,g)=>(i[g]=this.Userform.value[g],i),{});Object.keys(r).forEach(i=>{o.append(i,r[i])}),t?(this.isEditButtonClicked=!0,this.userService.updateUsers(this.userId,o).pipe((0,C.R)(s)).subscribe({next:i=>{const g=this.storeService.getItem("loggedUserId");this.toastr.success(i.message,"Success"),g==t&&this.getUserDetail(!0),this.closeModal(),s.next(),this.isEditButtonClicked=!1},error:i=>{this.toastr.error(i.error.error||i.error?.message),this.isEditButtonClicked=!1},complete:()=>{s.complete(),this.isEditButtonClicked=!1}})):(o.delete("status"),this.isCreateButtonClicked=!0,this.userService.addUsers(o).pipe((0,C.R)(s)).subscribe({next:i=>{this.toastr.success(i.message,"Success"),this.closeModal(),s.next(),this.isCreateButtonClicked=!1},error:i=>{this.toastr.error(i.error.error||i.error?.message),this.isCreateButtonClicked=!1},complete:()=>{s.complete()}}))}else this.toastr.error("Please fill required* fields"),this.isCreateButtonClicked=!1,this.isEditButtonClicked=!1}openFileInput(){this.fileInput.nativeElement.click()}deleteImage(){fetch("../../../assets/img/user-default-img.png").then(s=>s.blob()).then(s=>{const o=new File([s],"user-default-img.png",{type:"image/png"}),r=new FileReader;r.onload=()=>{this.userImage.nativeElement.src=r.result,this.Userform.get("image").setValue(o)},r.readAsDataURL(o)}).catch(s=>{console.error("Error fetching the default image:",s)})}onFileSelected(t){const s=t.target,o=s.files[0];if(o){if(!["image/jpeg","image/png"].includes(o.type))return this.toastr.error("Only PNG and JPG files are allowed."),void(s.value="");if(o.size>5242880)return this.toastr.error("The file size must be less than 5 MB."),void(s.value="");const g=new FileReader;g.onload=()=>{this.userImage.nativeElement.src=g.result,this.Userform.get("image").setValue(o)},g.readAsDataURL(o),s.value=""}}onCountryChange(){const t=this.countries.find(s=>s.code===this.selectedCountry);this.selectedCountryDialCode=t?t.code:"+91"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.K),e.Y36(b.J),e.Y36(B.M),e.Y36(O),e.Y36(u._W),e.Y36(G.d))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-add-users"]],viewQuery:function(t,s){if(1&t&&(e.Gf(j,5),e.Gf(P,5)),2&t){let o;e.iGM(o=e.CRH())&&(s.userImage=o.first),e.iGM(o=e.CRH())&&(s.fileInput=o.first)}},inputs:{userId:"userId",companyId:"companyId"},outputs:{onModalClose:"onModalClose"},decls:88,vars:40,consts:[[1,"modal_box","modal_lg"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"fa-solid","fa-xmark"],[1,"modal-body"],[3,"formGroup","ngSubmit"],[1,"adduser_image","mb-4"],["alt","",3,"src",4,"ngIf"],["src","../../../assets/img/user-default-img.png","alt","Default Image",4,"ngIf"],["type","file",2,"display","none",3,"change"],["fileInput",""],["type","button","ngbTooltip","Edit Image","placement","top",1,"edit_user",3,"click"],["icon-name","edit-1",1,"iconsax"],["type","button","ngbTooltip","Delete Image","placement","top",1,"delete_user",3,"click"],["icon-name","trash",1,"iconsax"],[1,"col-md-12"],[1,"row"],[1,"col-md-6","col-lg-4","form-group"],["for","firstName",1,"form-label"],["type","text","placeholder","Enter first name","id","firstName","formControlName","firstName",1,"form-control",3,"ngClass"],["class","invalid-feedback",4,"ngIf"],["for","lastName",1,"form-label"],["type","text","placeholder","Enter Last name","id","lastName","formControlName","lastName",1,"form-control",3,"ngClass"],["for","email",1,"form-label"],["type","text","placeholder","Enter email address","id","email","formControlName","email",1,"form-control",3,"ngClass"],["for","mobile_no",1,"form-label"],[1,"input_number_wrap"],[1,"input_number_field"],["formControlName","code","placeholder","Code","bindLabel","code","bindValue","code",3,"items","change"],["type","text","placeholder","Enter Mobile number","id","mobile_no","formControlName","mobile_no","maxlength","10",1,"form-control",3,"ngClass"],["for","emp_id",1,"form-label"],["type","text","placeholder","Enter employee id","id","emp_id","formControlName","emp_id",1,"form-control",3,"ngClass"],["for","location",1,"form-label"],["type","text","placeholder","Enter location","id","location","formControlName","location",1,"form-control",3,"ngClass"],["for","company_id",1,"form-label"],["formControlName","company_id","placeholder","Select Company","bindLabel","company_name","bindValue","_id",3,"items"],["for","org_id",1,"form-label"],["formControlName","org_id","placeholder","Select Organization","bindLabel","org_name","bindValue","_id",3,"items"],["for","role_id",1,"form-label"],["placeholder","Select Role","bindLabel","name","bindValue","_id","formControlName","role_id",3,"items"],["for","dep_id",1,"form-label"],["placeholder","Select Department","bindLabel","name","bindValue","_id","formControlName","dep_id",3,"items"],["class","col-md-6 col-lg-4 form-group",4,"ngIf"],[1,"modal-footer","justify-content-start"],["type","submit",1,"btn","btn-primary",3,"disabled"],["alt","",3,"src"],["userImage",""],["src","../../../assets/img/user-default-img.png","alt","Default Image"],[1,"invalid-feedback"],[4,"ngIf"],["for","status",1,"form-label"],["placeholder","Select Status","bindLabel","key","bindValue","key","formControlName","status",3,"items"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return s.closeModal()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"div",5)(7,"form",6),e.NdJ("ngSubmit",function(){return s.addUpdate(s.userId)}),e.TgZ(8,"div",7),e.YNc(9,V,2,1,"img",8),e.YNc(10,Y,2,0,"img",9),e.TgZ(11,"input",10,11),e.NdJ("change",function(r){return s.onFileSelected(r)}),e.qZA(),e.TgZ(13,"button",12),e.NdJ("click",function(){return s.openFileInput()}),e._UZ(14,"i",13),e.qZA(),e.TgZ(15,"button",14),e.NdJ("click",function(){return s.deleteImage()}),e._UZ(16,"i",15),e.qZA()(),e.TgZ(17,"div",16)(18,"div",17)(19,"div",18)(20,"label",19),e._uU(21,"First name"),e.TgZ(22,"span"),e._uU(23,"*"),e.qZA()(),e._UZ(24,"input",20),e.YNc(25,K,3,2,"div",21),e.qZA(),e.TgZ(26,"div",18)(27,"label",22),e._uU(28,"Last name"),e.TgZ(29,"span"),e._uU(30,"*"),e.qZA()(),e._UZ(31,"input",23),e.YNc(32,X,3,2,"div",21),e.qZA(),e.TgZ(33,"div",18)(34,"label",24),e._uU(35,"Email "),e.TgZ(36,"span"),e._uU(37,"*"),e.qZA()(),e._UZ(38,"input",25),e.YNc(39,ee,3,3,"div",21),e.YNc(40,te,3,3,"div",21),e.qZA(),e.TgZ(41,"div",18)(42,"label",26),e._uU(43,"Mobile number"),e.qZA(),e.TgZ(44,"div",27)(45,"div",28)(46,"ng-select",29),e.NdJ("change",function(){return s.onCountryChange()}),e.qZA()(),e._UZ(47,"input",30),e.qZA()(),e.TgZ(48,"div",18)(49,"label",31),e._uU(50,"Employee ID"),e.qZA(),e._UZ(51,"input",32),e.YNc(52,se,3,3,"div",21),e.qZA(),e.TgZ(53,"div",18)(54,"label",33),e._uU(55,"Location"),e.qZA(),e._UZ(56,"input",34),e.YNc(57,ne,3,3,"div",21),e.qZA(),e.TgZ(58,"div",18)(59,"label",35),e._uU(60,"Company "),e.TgZ(61,"span"),e._uU(62,"*"),e.qZA()(),e._UZ(63,"ng-select",36),e.YNc(64,oe,3,3,"div",21),e.qZA(),e.TgZ(65,"div",18)(66,"label",37),e._uU(67,"Organization"),e.TgZ(68,"span"),e._uU(69,"*"),e.qZA()(),e._UZ(70,"ng-select",38),e.YNc(71,ie,3,3,"div",21),e.qZA(),e.TgZ(72,"div",18)(73,"label",39),e._uU(74,"User role "),e.TgZ(75,"span"),e._uU(76,"*"),e.qZA()(),e._UZ(77,"ng-select",40),e.YNc(78,ae,3,3,"div",21),e.qZA(),e.TgZ(79,"div",18)(80,"label",41),e._uU(81,"Department"),e.qZA(),e._UZ(82,"ng-select",42),e.YNc(83,re,3,3,"div",21),e.qZA(),e.YNc(84,ce,5,2,"div",43),e.qZA()(),e.TgZ(85,"div",44)(86,"button",45),e._uU(87),e.qZA()()()()()),2&t&&(e.xp6(3),e.Oqu(s.userId?"Update User":"Add User"),e.xp6(4),e.Q6J("formGroup",s.Userform),e.xp6(2),e.Q6J("ngIf",s.imageUrl),e.xp6(1),e.Q6J("ngIf",!s.imageUrl),e.xp6(14),e.Q6J("ngClass",e.VKq(28,Z,s.Userform.controls.firstName.errors&&s.Userform.controls.firstName.touched)),e.xp6(1),e.Q6J("ngIf",s.Userform.controls.firstName.invalid&&s.Userform.controls.firstName.touched),e.xp6(6),e.Q6J("ngClass",e.VKq(30,Z,s.Userform.controls.lastName.errors&&s.Userform.controls.lastName.touched)),e.xp6(1),e.Q6J("ngIf",s.Userform.controls.lastName.invalid&&s.Userform.controls.lastName.touched),e.xp6(6),e.Q6J("ngClass",e.VKq(32,Z,s.Userform.controls.email.errors&&s.Userform.controls.email.touched)),e.xp6(1),e.Q6J("ngIf",s.Userform.controls.email.hasError("required")),e.xp6(1),e.Q6J("ngIf",s.Userform.controls.email.hasError("email")),e.xp6(6),e.Q6J("items",s.countries),e.xp6(1),e.Q6J("ngClass",e.VKq(34,Z,s.Userform.controls.mobile_no.errors&&s.Userform.controls.mobile_no.touched)),e.xp6(4),e.Q6J("ngClass",e.VKq(36,Z,s.Userform.controls.emp_id.errors&&s.Userform.controls.emp_id.touched)),e.xp6(1),e.Q6J("ngIf",s.Userform.controls.emp_id.hasError("maxlength")),e.xp6(4),e.Q6J("ngClass",e.VKq(38,Z,s.Userform.controls.location.errors&&s.Userform.controls.location.touched)),e.xp6(1),e.Q6J("ngIf",s.Userform.controls.location.hasError("maxlength")),e.xp6(6),e.Q6J("items",s.companies),e.xp6(1),e.Q6J("ngIf",s.Userform.controls.company_id.hasError("required")),e.xp6(6),e.Q6J("items",s.organizations),e.xp6(1),e.Q6J("ngIf",s.Userform.controls.org_id.hasError("required")),e.xp6(6),e.Q6J("items",s.roles),e.xp6(1),e.Q6J("ngIf",s.Userform.controls.role_id.hasError("required")),e.xp6(4),e.Q6J("items",s.departments),e.xp6(1),e.Q6J("ngIf",s.Userform.controls.dep_id.hasError("required")),e.xp6(1),e.Q6J("ngIf",null!=s.id),e.xp6(2),e.Q6J("disabled",!s.Userform.valid||s.isCreateButtonClicked||s.isEditButtonClicked),e.xp6(1),e.hij(" ",s.IsCreatestatus?"Create":"Update"," "))},dependencies:[h.mk,h.O5,l._Y,l.Fj,l.JJ,l.JL,l.nD,l.sg,l.u,v._L,S.w9,R.X$]}),n})();function de(n,a){if(1&n&&e._UZ(0,"img",20),2&n){const t=e.oxw();e.Q6J("src",t.imageUrl,e.LSH)}}function me(n,a){1&n&&e._UZ(0,"img",21)}function ue(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-add-users",22),e.NdJ("onModalClose",function(){const r=e.CHM(t).$implicit;return e.KtG(r.dismiss("Cross click"))}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("userId",t.edituserId)("companyId",t.companyId)}}let pe=(()=>{class n{constructor(t,s){this.modalService=t,this.userService=s,this.imageUrl=null,this.isLoading=!0,this.onModalClose=new e.vpe,this.userId=null}ngOnInit(){setTimeout(t=>{this.isLoading=!1},2e3),this.getUserDetail()}openVerticallyCentered(t){this.modelRef=this.modalService.open(t,{centered:!0})}closeModal(){this.onModalClose.emit()}edituser(t,s){this.edituserId=t._id,this.companyId=t.company_id,this.openVerticallyCentered(s)}getUserDetail(){let t=new A.x;this.userService.getUserDetail(this.userId).pipe((0,C.R)(t)).subscribe({next:s=>{this.userdetails=s.data,this.imageUrl=this.userdetails?.image,t.next()},error:s=>{},complete:()=>{t.complete()}})}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(v.FF),e.Y36(U.K))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-view-users"]],inputs:{userId:"userId"},outputs:{onModalClose:"onModalClose"},decls:63,vars:13,consts:[[1,"modal_box"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"fa-solid","fa-xmark"],[1,"modal-body"],[1,"user_detail_wrap"],[1,"user_detail_img"],[1,"adduser_image","mb-4"],["alt","",3,"src",4,"ngIf"],["src","../../../assets/img/user-image.png","alt","Default Image",4,"ngIf"],[1,"primary-color","my-3"],[1,"success-color"],[1,"user_detail_desc"],[1,"p-0","m-0"],[1,"user_detail_label"],[1,"user_detail_value"],[1,"modal-footer","btn_group","justify-content-start","pt-3"],["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-primary",3,"click"],["create_user",""],["alt","",3,"src"],["src","../../../assets/img/user-image.png","alt","Default Image"],[3,"userId","companyId","onModalClose"]],template:function(t,s){if(1&t){const o=e.EpF();e.TgZ(0,"div",0)(1,"div",1)(2,"h4",2),e._uU(3,"User Detail"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return s.closeModal()}),e._UZ(5,"i",4),e.qZA()(),e.TgZ(6,"div",5)(7,"div",6)(8,"div",7)(9,"div",8),e.YNc(10,de,1,1,"img",9),e.YNc(11,me,1,0,"img",10),e.qZA(),e.TgZ(12,"p",11),e._uU(13),e.qZA(),e.TgZ(14,"p",12),e._uU(15),e.qZA()(),e.TgZ(16,"div",13)(17,"ul",14)(18,"li")(19,"span",15),e._uU(20,"Name"),e.qZA(),e.TgZ(21,"span",16),e._uU(22),e.qZA()(),e.TgZ(23,"li")(24,"span",15),e._uU(25,"Email"),e.qZA(),e.TgZ(26,"span",16),e._uU(27),e.qZA()(),e.TgZ(28,"li")(29,"span",15),e._uU(30,"Mobile number"),e.qZA(),e.TgZ(31,"span",16),e._uU(32),e.qZA()(),e.TgZ(33,"li")(34,"span",15),e._uU(35,"Location"),e.qZA(),e.TgZ(36,"span",16),e._uU(37),e.qZA()(),e.TgZ(38,"li")(39,"span",15),e._uU(40,"Company "),e.qZA(),e.TgZ(41,"span",16),e._uU(42),e.qZA()(),e.TgZ(43,"li")(44,"span",15),e._uU(45,"Organization"),e.qZA(),e.TgZ(46,"span",16),e._uU(47),e.qZA()(),e.TgZ(48,"li")(49,"span",15),e._uU(50,"User role"),e.qZA(),e.TgZ(51,"span",16),e._uU(52),e.qZA()(),e.TgZ(53,"li")(54,"span",15),e._uU(55,"Department"),e.qZA(),e.TgZ(56,"span",16),e._uU(57),e.qZA()()()()()(),e.TgZ(58,"div",17)(59,"button",18),e.NdJ("click",function(){e.CHM(o);const i=e.MAs(62);return e.KtG(s.edituser(s.userdetails,i))}),e._uU(60,"Edit user"),e.qZA()()(),e.YNc(61,ue,1,2,"ng-template",null,19,e.W1O)}2&t&&(e.xp6(10),e.Q6J("ngIf",s.imageUrl),e.xp6(1),e.Q6J("ngIf",!s.imageUrl),e.xp6(2),e.hij("Employee ID:",(null==s.userdetails?null:s.userdetails.emp_id)||"N/A",""),e.xp6(2),e.hij("Status:",(null==s.userdetails?null:s.userdetails.status)||"N/A",""),e.xp6(7),e.AsE("",(null==s.userdetails?null:s.userdetails.firstName)||"N/A"," ",(null==s.userdetails?null:s.userdetails.lastName)||"N/A",""),e.xp6(5),e.Oqu((null==s.userdetails?null:s.userdetails.email)||"N/A"),e.xp6(5),e.Oqu((null==s.userdetails?null:s.userdetails.mobile_no)||"N/A"),e.xp6(5),e.Oqu((null==s.userdetails?null:s.userdetails.location)||"N/A"),e.xp6(5),e.Oqu((null==s.userdetails?null:s.userdetails.company)||"N/A"),e.xp6(5),e.Oqu((null==s.userdetails?null:s.userdetails.organization)||"N/A"),e.xp6(5),e.Oqu((null==s.userdetails?null:s.userdetails.rolepermission)||"N/A"),e.xp6(5),e.Oqu((null==s.userdetails?null:s.userdetails.department)||"N/A"))},dependencies:[h.O5,x]}),n})();function ge(n,a){1&n&&e._UZ(0,"app-progress-bar")}function _e(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"th",37),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.onsort())}),e.TgZ(1,"label"),e._uU(2,"ID"),e.qZA()()}if(2&n){const t=e.oxw();e.Q6J("ngClass","asc"===t.sortDirection?"sorting":"sorting_desc")}}const he=function(n,a){return{status_active:n,status_inactive:a}};function fe(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"tr")(1,"td")(2,"label")(3,"button",39),e.NdJ("click",function(){const r=e.CHM(t).$implicit,i=e.oxw(2),g=e.MAs(85);return e.KtG(i.openVerticallyCentered1(r._id,g))}),e._uU(4),e.qZA()()(),e.TgZ(5,"td"),e._uU(6),e.qZA(),e.TgZ(7,"td"),e._uU(8),e.qZA(),e.TgZ(9,"td"),e._uU(10),e.qZA(),e.TgZ(11,"td"),e._uU(12),e.qZA(),e.TgZ(13,"td"),e._uU(14),e.qZA(),e.TgZ(15,"td")(16,"span",40),e._uU(17),e.qZA()(),e._UZ(18,"td"),e.qZA()}if(2&n){const t=a.$implicit;e.xp6(4),e.hij(" ",(null==t?null:t.emp_id)||"N/A",""),e.xp6(2),e.Oqu((null==t?null:t.firstName)+" "+(null==t?null:t.lastName)||"N/A"),e.xp6(2),e.Oqu((null==t?null:t.email)||"N/A"),e.xp6(2),e.Oqu((null==t?null:t.company)||"N/A"),e.xp6(2),e.Oqu((null==t?null:t.location)||"N/A"),e.xp6(2),e.Oqu(((null==t?null:t.code)||"")+(null!=t&&t.code?"-":"")+((null==t?null:t.mobile_no)||"")||"N/A"),e.xp6(2),e.Q6J("ngClass",e.WLB(8,he,"Active"===(null==t?null:t.status),"InActive"===(null==t?null:t.status))),e.xp6(1),e.hij(" ",(null==t?null:t.status)||"N/A"," ")}}function Ue(n,a){if(1&n&&(e.TgZ(0,"tbody"),e.YNc(1,fe,19,11,"tr",38),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.Q6J("ngForOf",t.userArray)}}function ve(n,a){1&n&&(e.TgZ(0,"tbody")(1,"tr")(2,"td",41),e._uU(3,"No data available"),e.qZA()()())}function Ce(n,a){1&n&&(e.TgZ(0,"div"),e._UZ(1,"img",56),e.TgZ(2,"p"),e._uU(3,"Please import the CSV file from device"),e.qZA()())}function be(n,a){if(1&n&&(e.TgZ(0,"div",57),e._UZ(1,"i",58),e.TgZ(2,"p"),e._uU(3),e.qZA()()),2&n){const t=e.oxw(2);e.xp6(3),e.Oqu(t.fileName)}}function Ae(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",42)(1,"div",43)(2,"h4",44),e._uU(3,"Import bulk users to onboard in the platform"),e.qZA(),e.TgZ(4,"p"),e._uU(5,"All the fields should be matched as per the template*"),e.qZA(),e.TgZ(6,"button",45),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.closeModal())}),e._UZ(7,"i",46),e.qZA()(),e.TgZ(8,"div",47)(9,"div",48)(10,"input",49),e.NdJ("change",function(o){e.CHM(t);const r=e.oxw();return e.KtG(r.onFileSelected(o))}),e.qZA(),e.TgZ(11,"label",50),e.YNc(12,Ce,4,0,"div",1),e.YNc(13,be,4,1,"div",51),e.qZA()(),e.TgZ(14,"div",52)(15,"label",5),e._uU(16,"Don't have the template?"),e.qZA(),e.TgZ(17,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.downloadFile())}),e._uU(18,"Download template"),e.qZA()()(),e.TgZ(19,"div",54)(20,"button",53),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.ontryagain())}),e._uU(21,"Try Again"),e.qZA(),e.TgZ(22,"button",55),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.exportUser())}),e._uU(23,"Import Users"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(12),e.Q6J("ngIf",!t.imageUploadstatus),e.xp6(1),e.Q6J("ngIf",t.imageUploadstatus),e.xp6(9),e.Q6J("disabled",!t.activeuploadbutton||t.isImportButtonClicked)}}function Ze(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-add-users",59),e.NdJ("onModalClose",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.closeModal())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("userId",t.edituserId)("companyId",t.companyId)}}function ye(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"app-view-users",60),e.NdJ("onModalClose",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.closeModal())}),e.qZA()}if(2&n){const t=e.oxw();e.Q6J("userId",t.edituserId)}}function Te(n,a){if(1&n){const t=e.EpF();e.TgZ(0,"div",61)(1,"div",43)(2,"h4",44),e._uU(3,"Confirm Delete"),e.qZA(),e.TgZ(4,"button",45),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.dismiss("Cross click"))}),e._UZ(5,"i",46),e.qZA()(),e.TgZ(6,"div",47)(7,"div",62)(8,"p"),e._uU(9,"Are you sure want to delete selected user?"),e.qZA(),e.TgZ(10,"span"),e._uU(11,"This action is permanent and cannot be undone"),e.qZA()()(),e.TgZ(12,"div",54)(13,"button",63),e.NdJ("click",function(){const r=e.CHM(t).$implicit;return e.KtG(r.dismiss("Cross click"))}),e._uU(14,"No, Go Back"),e.qZA(),e.TgZ(15,"button",64),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteUser(o.deletedUserId))}),e._uU(16,"Delete"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(15),e.Q6J("disabled",t.isDeleteButtonClicked)}}let Ie=(()=>{class n{constructor(t,s,o,r,i,g,Ne,Se){this.userService=t,this.modalService=s,this.toastr=o,this.companyService=r,this.http=i,this.sheetsService=g,this.gAuthService=Ne,this.permissionService=Se,this.isDeleteButtonClicked=!1,this.isImportButtonClicked=!1,this.userArray=[],this.statusArray=[{key:"Active"},{key:"InActive"}],this.search="",this.companyNamesObj=[],this.isLoading=!0,this.locations=[],this.selectedFile=null,this.meals=[],this.imageUploadstatus=!1,this.currentPage=1,this.itemsPerPage=10,this.totalpages=1,this.TotalCount=0,this.Objectfilter={},this.sortField="emp_id",this.sortDirection="asc",this.selectedCompany=null,this.selectedLocation=null,this.selectedStatus=null,this.activeuploadbutton=!1}config(){console.log("in config"),this.gAuthService.configure()}login(){console.log("dfhdfvdhfhfhgjfdjfdgjf"),this.gAuthService.login1()}ngOnInit(){console.log("google auth:",this.gAuthService.getToken),console.log("google auth:",this.gAuthService.identityClaims),this.isLoading=!1,this.userArray=[{_id:"673b23d591ef95fee3f1960a",firstName:"Geek",lastName:"Geek",email:"geektest@mail.com",status:"Active",company:"GB Company",company_id:"6622492c7a07155ad9b1ec22",department:"Software Development",rolepermission:"QA Test",organization:"Etech Global Services"},{_id:"6736fbd305da037fe35da2cf",firstName:"Geeta",lastName:"Kumari",email:"gkumari112465@etechtexas.com",status:"Active",company:"GB Company",company_id:"6622492c7a07155ad9b1ec22",department:"Software Development",rolepermission:"QA Test",organization:"Etech Global Services"},{_id:"6728be18ac61cbeafa8a4419",firstName:"testing5",lastName:"testing67",email:"testing5656@gmail.com",status:"Active",company:"GB Company",company_id:"6622492c7a07155ad9b1ec22",department:"Software Development",rolepermission:"QA Manager",organization:"demo"},{_id:"671f7c2bfe9acffb1f9d78ca",emp_id:"1117155",firstName:"QAForam",lastName:"T",email:"etechtest24@gmail.com",location:"Ahmedabad",status:"InActive",company:"GB Company",company_id:"6622492c7a07155ad9b1ec22",department:"Software Development",rolepermission:"QA Manager",organization:"QA organization"},{_id:"671b3e6c9337f21342bf9570",emp_id:"1110",firstName:"DriftHaven",lastName:"Skyler",email:"skyler.west@email.com",code:"91",mobile_no:"8896289988",location:"Mumbai",status:"Active",company:"GB Company",company_id:"6622492c7a07155ad9b1ec22",department:"Software Development",rolepermission:"QA Test",organization:"Testing"},{_id:"671b3e6c9337f21342bf956a",emp_id:"999",firstName:"VelvetStorm",lastName:"Jamie",email:"jamie.hayes@email.com",code:"91",mobile_no:"8896689988",location:"Nagpur",status:"Active",company:"GB Company",company_id:"6622492c7a07155ad9b1ec22",department:"Software Development",rolepermission:"QA Test",organization:"GB Testing organization"},{_id:"671b3e6c9337f21342bf9564",emp_id:"888",firstName:"MysticFlux",lastName:"Morgan",email:"morgan.reed@email.com",code:"91",mobile_no:"8897089988",location:"Mumbai",status:"Active",company:"GB Company",company_id:"6622492c7a07155ad9b1ec22",department:"Software Development",rolepermission:"QA Test",organization:"GB Testing organization"},{_id:"671b3e6c9337f21342bf955e",emp_id:"777",firstName:"BlazeWanderer",lastName:"Casey",email:"casey.sky@email.com",code:"91",mobile_no:"8897489988",location:"Nagpur",status:"Active",company:"GB Company",company_id:"6622492c7a07155ad9b1ec22",department:"Software Development",rolepermission:"QA Test",organization:"GB Testing organization"},{_id:"671b3e6b9337f21342bf9558",emp_id:"666",firstName:"ZephyrMancer",lastName:"Taylor",email:"taylor.frost@email.com",code:"91",mobile_no:"8897889988",location:"Mumbai",status:"Active",company:"GB Company",company_id:"6622492c7a07155ad9b1ec22",department:"Software Development",rolepermission:"QA Test",organization:"GB Testing organization"},{_id:"671b3e6b9337f21342bf9552",emp_id:"555",firstName:"EchoPulse",lastName:"Avery",email:"avery.lane@email.com",code:"91",mobile_no:"8898289988",location:"Nagpur",status:"Active",company:"GB Company",company_id:"6622492c7a07155ad9b1ec22",department:"Software Development",rolepermission:"QA Test",organization:"GB Testing organization"}]||[]}fetchSheetData(t){this.sheetsService.getSheetData(t).subscribe({next:s=>{1===s&&console.log("Fetched Data:",s)},error:s=>{this.toastr.error("Error fetching sheet data:",s)}})}hasPermission(t,s){return this.permissionService.hasPermission(t,s)}onTableDataChange(t){this.currentPage=t,this.isLoading=!0,this.filterUsers()}onTableSizeChange(t){this.isLoading=!0,this.itemsPerPage=t.target.value,this.currentPage=1,this.filterUsers()}getUsers(t,s){this.userService.getUsers(t,s).subscribe({next:o=>{1===o.success&&(this.userArray=o.data.users||[],this.TotalCount=o.data.totalCount)},error:o=>{this.toastr.error(o.error.message)}})}getLocations(){this.userService.getLocations().subscribe({next:t=>{1===t.success?this.locations=(t.data||[]).filter(s=>null!=s):this.toastr.error(t.error.message)},error:t=>{this.toastr.error(t.error.message)}})}getCompanyList(){this.companyService.getCompanyList().subscribe({next:t=>{1===t.success?this.companyNamesObj=t.data||[]:this.toastr.error(t.error.message)},error:t=>{this.toastr.error(t.error.error)}})}edituser(t,s){this.edituserId=t._id,this.companyId=t.company_id,this.openVerticallyCentered(s)}closeModal(){this.edituserId=void 0,this.modelRef.dismiss(),this.imageUploadstatus=!1,this.selectedFile=null,this.filterUsers()}ontryagain(){this.imageUploadstatus=!1,this.selectedFile=null}openVerticallyCentered(t){this.modelRef=this.modalService.open(t,{centered:!0})}openVerticallyCentered1(t,s){this.edituserId=t,this.isLoading=!0,setTimeout(()=>{this.modelRef=this.modalService.open(s,{centered:!0}),this.isLoading=!1},2e3)}openVerticallyCentered2(t,s){this.deletedUserId=t,this.modelRef=this.modalService.open(s,{centered:!0})}deleteUser(t){this.isDeleteButtonClicked=!0,this.userService.deleteUser(t).subscribe({next:s=>{1===s.success?(this.toastr.success(s.message,"Success"),setTimeout(()=>{this.isLoading=!1},1e3),this.filterUsers(),this.modelRef.dismiss()):this.toastr.error(s.error.message),this.isDeleteButtonClicked=!1},error:s=>{this.isDeleteButtonClicked=!1,this.toastr.error(s.error.error)}})}filterUsers(){this.Objectfilter.page=this.currentPage,this.Objectfilter.limit=this.itemsPerPage,this.Objectfilter.search=this.search}filterUserBySearch(){this.currentPage=1,this.filterUsers()}onLocationChange(t){this.Objectfilter.location=t,this.Objectfilter.page=1,this.currentPage=1,this.filterUsers()}onCompanyChange(t){this.Objectfilter.company_id=t?t._id:null,this.Objectfilter.page=1,this.currentPage=1,this.filterUsers()}onFileSelected(t){if(this.selectedFile=t.target.files[0],this.selectedFile){if(!["text/csv","application/vnd.ms-excel"].includes(this.selectedFile.type))return this.toastr.error("Only CSV files are allowed."),t.target.value="",this.activeuploadbutton=!1,void(this.fileName="");this.activeuploadbutton=!0,this.imageUploadstatus=!0,this.fileName=this.selectedFile.name}}exportUser(){var t=this;return(0,f.Z)(function*(){if(!t.selectedFile)return console.error("No file selected."),void t.toastr.error("Please select a CSV file.");t.isImportButtonClicked=!0,t.userService.importUsers(t.selectedFile).subscribe({next:s=>{1===s.success?(t.toastr.success(s.message,"Success"),t.getUsers(t.currentPage,t.itemsPerPage),t.closeModal(),t.isImportButtonClicked=!1):(t.toastr.error(s.error.message),t.isImportButtonClicked=!1)},error:s=>{t.toastr.error(s.error.error),t.isImportButtonClicked=!1}})})()}onstatuschange(t){this.Objectfilter.status=t?t.key:null,this.Objectfilter.page=1,this.currentPage=1,this.filterUsers()}onsort(){this.sortDirection="asc"===this.sortDirection?"asc":"desc",this.Objectfilter.sort=this.sortDirection,this.sortDirection="asc"===this.sortDirection?"desc":"asc",this.userArray.reverse()}calculateIndex(t){return(this.currentPage-1)*this.itemsPerPage+t+1}downloadFile(){this.http.get("../../../assets/empfffcsv.csv",{responseType:"blob"}).subscribe(s=>{const o=new Blob([s],{type:"application/octet-stream"}),r=document.createElement("a");r.href=window.URL.createObjectURL(o),r.download="demo.csv",r.click()})}clearFilters(){this.search="",this.selectedCompany=null,this.selectedLocation=null,this.selectedStatus=null,this.Objectfilter={},this.currentPage=1,this.itemsPerPage=10,this.getUsers(this.currentPage,this.itemsPerPage)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(U.K),e.Y36(v.FF),e.Y36(u._W),e.Y36(b.J),e.Y36(d.eN),e.Y36(m.P),e.Y36(p.M),e.Y36(_.$))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-user"]],inputs:{meals:["data","meals"]},decls:88,vars:13,consts:[[1,"main_content"],[4,"ngIf"],[1,"datatable_header"],[1,"page_header_left"],[1,"datatable_search"],["for",""],["type","search","placeholder","Search By Name & Email ",1,"search_field","form-control",3,"ngModel","ngModelChange","input"],[1,"datatable_filter"],["bindLabel","company_name","placeholder","Select Company",3,"items","ngModel","ngModelChange","change"],["placeholder","Select Location","bindLabel","location",1,"col-md-3",3,"items","ngModel","ngModelChange","change"],["placeholder","Select Status","bindLabel","key",3,"items","ngModel","change","ngModelChange"],["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-secondary","px-4",3,"click"],[1,"page_header_right","btn_group"],["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-secondary",3,"click"],["icon-name","download-1",1,"iconsax"],["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",1,"btn","btn-primary",3,"click"],["icon-name","add",1,"iconsax"],[1,"main_datatable"],[1,"data_table"],["id","user_management_datatable","aria-label"," user Management Table",1,"table"],["class","sorting",3,"ngClass","click",4,"ngIf"],[4,"ngIf","ngIfElse"],["noData",""],[1,"datatable_footer","d-flex","align-content-center","justify-content-between"],[1,"view_records_by","inline_label_field"],[1,"form-control","w-auto",3,"ngModel","ngModelChange","change"],["value","10"],["value","25"],["value","50"],["value","100"],[1,"datatable_pagination"],[1,"pagination_nav","m-0"],[3,"pageChange","pageSizeChange"],["import_popup",""],["create_user",""],["user_detail",""],["delete_user",""],[1,"sorting",3,"ngClass","click"],[4,"ngFor","ngForOf"],["type","button","data-bs-toggle","modal","data-bs-target","#staticBackdrop",3,"click"],[1,"status_label",3,"ngClass"],["colspan","8",2,"text-align","center"],[1,"modal_box"],[1,"modal-header"],[1,"modal-title"],["type","button","aria-label","Close",1,"btn-close",3,"click"],[1,"fa-solid","fa-xmark"],[1,"modal-body"],[1,"import_file","mb-4"],["type","file","id","import_csv_file",3,"change"],["for","import_csv_file"],["class","uploaded_filename",4,"ngIf"],[1,"inline_label_field"],[1,"btn","btn-secondary",3,"click"],[1,"modal-footer","btn_group","justify-content-start"],[1,"btn","btn-primary",3,"disabled","click"],["src","../../../assets/img/import-icon.png","alt",""],[1,"uploaded_filename"],[1,"fa-solid","fa-file-csv"],[3,"userId","companyId","onModalClose"],[3,"userId","onModalClose"],[1,"modal_box","modal_sm"],[1,"delete_modal_msg"],["type","button",1,"btn","btn-secondary",3,"click"],["type","submit",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,s){if(1&t){const o=e.EpF();e._UZ(0,"app-layout-header"),e.TgZ(1,"app-page-layout")(2,"div",0),e.YNc(3,ge,1,0,"app-progress-bar",1),e.ynx(4),e._UZ(5,"app-settings"),e.TgZ(6,"div",2)(7,"div",3)(8,"div",4)(9,"label",5),e._uU(10,"Search: "),e.qZA(),e.TgZ(11,"input",6),e.NdJ("ngModelChange",function(i){return s.search=i})("input",function(){return s.filterUserBySearch()}),e.qZA()(),e.TgZ(12,"div",7)(13,"label",5),e._uU(14,"Company: "),e.qZA(),e.TgZ(15,"ng-select",8),e.NdJ("ngModelChange",function(i){return s.selectedCompany=i})("change",function(i){return s.onCompanyChange(i)}),e.qZA()(),e.TgZ(16,"div",7)(17,"label",5),e._uU(18,"Location: "),e.qZA(),e.TgZ(19,"ng-select",9),e.NdJ("ngModelChange",function(i){return s.selectedLocation=i})("change",function(i){return s.onLocationChange(i)}),e.qZA()(),e.TgZ(20,"div",7)(21,"label",5),e._uU(22,"Status: "),e.qZA(),e.TgZ(23,"ng-select",10),e.NdJ("change",function(i){return s.onstatuschange(i)})("ngModelChange",function(i){return s.selectedStatus=i}),e.qZA()(),e.TgZ(24,"button",11),e.NdJ("click",function(){return s.clearFilters()}),e._uU(25,"Clear"),e.qZA()(),e.TgZ(26,"div",12)(27,"button",13),e.NdJ("click",function(){e.CHM(o);const i=e.MAs(81);return e.KtG(s.openVerticallyCentered(i))}),e._UZ(28,"i",14),e._uU(29,"Import"),e.qZA(),e.TgZ(30,"button",15),e.NdJ("click",function(){e.CHM(o);const i=e.MAs(83);return e.KtG(s.openVerticallyCentered(i))}),e._UZ(31,"i",16),e._uU(32,"Create User"),e.qZA(),e.TgZ(33,"button",15),e.NdJ("click",function(){return s.login()}),e._UZ(34,"i",16),e._uU(35,"Login User"),e.qZA(),e.TgZ(36,"button",15),e.NdJ("click",function(){return s.config()}),e._UZ(37,"i",16),e._uU(38,"config"),e.qZA()()(),e.TgZ(39,"div"),e._uU(40),e.qZA(),e.TgZ(41,"div",17)(42,"div",18)(43,"table",19)(44,"thead")(45,"tr"),e.YNc(46,_e,3,1,"th",20),e.TgZ(47,"th"),e._uU(48,"Name"),e.qZA(),e.TgZ(49,"th"),e._uU(50,"Email"),e.qZA(),e.TgZ(51,"th"),e._uU(52,"Company"),e.qZA(),e.TgZ(53,"th"),e._uU(54,"Location"),e.qZA(),e.TgZ(55,"th"),e._uU(56,"Phone Number"),e.qZA(),e.TgZ(57,"th"),e._uU(58,"Status"),e.qZA(),e.TgZ(59,"th"),e._uU(60,"Action"),e.qZA()()(),e.YNc(61,Ue,2,1,"tbody",21),e.YNc(62,ve,4,0,"ng-template",null,22,e.W1O),e.qZA()(),e.TgZ(64,"div",23)(65,"div",24)(66,"label",5),e._uU(67,"View records by:"),e.qZA(),e.TgZ(68,"select",25),e.NdJ("ngModelChange",function(i){return s.itemsPerPage=i})("change",function(i){return s.onTableSizeChange(i)}),e.TgZ(69,"option",26),e._uU(70,"10"),e.qZA(),e.TgZ(71,"option",27),e._uU(72,"25"),e.qZA(),e.TgZ(73,"option",28),e._uU(74,"50"),e.qZA(),e.TgZ(75,"option",29),e._uU(76,"100"),e.qZA()()(),e.TgZ(77,"div",30),e._UZ(78,"ul",31),e.TgZ(79,"pagination-controls",32),e.NdJ("pageChange",function(i){return s.onTableDataChange(i)})("pageSizeChange",function(i){return s.onTableSizeChange(i)}),e.qZA()()()(),e.BQk(),e.qZA()(),e.YNc(80,Ae,24,3,"ng-template",null,33,e.W1O),e.YNc(82,Ze,1,2,"ng-template",null,34,e.W1O),e.YNc(84,ye,1,1,"ng-template",null,35,e.W1O),e.YNc(86,Te,17,1,"ng-template",null,36,e.W1O)}if(2&t){const o=e.MAs(63);e.xp6(3),e.Q6J("ngIf",s.isLoading),e.xp6(8),e.Q6J("ngModel",s.search),e.xp6(4),e.Q6J("items",s.companyNamesObj)("ngModel",s.selectedCompany),e.xp6(4),e.Q6J("items",s.locations)("ngModel",s.selectedLocation),e.xp6(4),e.Q6J("items",s.statusArray)("ngModel",s.selectedStatus),e.xp6(17),e.hij(" ",-s.userArray.length," "),e.xp6(6),e.Q6J("ngIf","emp_id"===s.sortField),e.xp6(15),e.Q6J("ngIf",s.userArray.length)("ngIfElse",o),e.xp6(7),e.Q6J("ngModel",s.itemsPerPage)}},dependencies:[h.mk,h.sg,h.O5,l.YN,l.Kr,l.Fj,l.EJ,l.JJ,l.On,T.R,k.n,q.w,w,L.LS,S.w9,x,pe],encapsulation:2}),n})()},3788:(I,y,c)=>{c.d(y,{M:()=>v});var f=c(5592),e=c(5879),U=c(5512);let v=(()=>{class u{constructor(d){this.oauthService=d,this.clientId="494395922809-oa4h19stvej6gt8bvmjnv7ofoni7ap5i.apps.googleusercontent.com",this.apiKey="AIzaSyA2mrYyZestnVjIjt4xHKTDrbfQjmPn0bU",this.scopes="https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/spreadsheets",this.authConfig={issuer:"https://accounts.google.com",strictDiscoveryDocumentValidation:!1,clientId:"494395922809-oa4h19stvej6gt8bvmjnv7ofoni7ap5i.apps.googleusercontent.com",responseType:"token id_token",scope:"openid profile email",showDebugInformation:!0,redirectUri:"https://ajay-gupta25.github.io/mvanand/"},this.configure()}configure(){this.oauthService.configure(this.authConfig),this.oauthService.loadDiscoveryDocumentAndTryLogin().then(()=>{this.oauthService.hasValidAccessToken()?console.log("User is logged in"):console.log("User is ----not---- logged in")})}login1(){this.oauthService.initLoginFlow()}login(){return new Promise((d,m)=>{try{this.oauthService.initLoginFlow(),setTimeout(()=>{console.log("gettoken: ",this.getToken)},3e3),d()}catch(p){m(p)}})}logout(){this.oauthService.logOut()}get identityClaims(){return this.oauthService.getIdentityClaims()}get getToken(){return this.oauthService.getAccessToken()}initClient(){gapi.load("client:auth2",()=>{gapi.client.init({apiKey:this.apiKey,clientId:this.clientId,scope:this.scopes,discoveryDocs:["https://sheets.googleapis.com/$discovery/rest?version=v4"]})})}signIn(){return new f.y(d=>{gapi.auth2.getAuthInstance().signIn().then(p=>{d.next(p),d.complete()},p=>d.error(p))})}signOut(){gapi.auth2.getAuthInstance().signOut()}getAccessToken(){return gapi.auth2.getAuthInstance().currentUser.get().getAuthResponse().access_token}}return u.\u0275fac=function(d){return new(d||u)(e.LFG(U.Ct))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},6478:(I,y,c)=>{c.d(y,{P:()=>v});var f=c(9862),e=c(5879),U=c(3788);let v=(()=>{class u{constructor(d,m){this.http=d,this.authService=m,this.apiKey="AIzaSyA2mrYyZestnVjIjt4xHKTDrbfQjmPn0bU",this.sheetId="1Eb_LL_JDmW2k6lj0CNkNSOKGVQmgXpjXRqvffFpvi0I",this.baseUrl=`https://sheets.googleapis.com/v4/spreadsheets/${this.sheetId}/values`}getSheetData(d){const m=this.authService.getToken;if(console.log(m),!m)throw new Error("User not authenticated");const p=`https://sheets.googleapis.com/v4/spreadsheets/${this.sheetId}/values/${d}`,_=new f.WM({Authorization:`Bearer ${m}`});return this.http.get(p,{headers:_})}getSheetData1(d){return this.http.get(`${this.baseUrl}/${d}?key=${this.apiKey}`)}appendData1(d,m){return this.http.post(`${this.baseUrl}/${d}:append?valueInputOption=RAW&key=${this.apiKey}`,{values:m})}updateSheetData(d,m,p){const _=this.authService.getToken;if(!_)throw new Error("User not authenticated");const h=`https://sheets.googleapis.com/v4/spreadsheets/${this.sheetId}/values/${d}!${m}?valueInputOption=RAW`,l=new f.WM({Authorization:`Bearer ${_}`,"Content-Type":"application/json"});return this.http.put(h,{values:p},{headers:l})}appendSheetData(d,m){const p=this.authService.getToken;if(!p)throw new Error("User not authenticated");const _=`https://sheets.googleapis.com/v4/spreadsheets/${this.sheetId}/values/${d}:append?valueInputOption=RAW`,h=new f.WM({Authorization:`Bearer ${p}`,"Content-Type":"application/json"});return this.http.post(_,{values:m},{headers:h})}}return u.\u0275fac=function(d){return new(d||u)(e.LFG(f.eN),e.LFG(U.M))},u.\u0275prov=e.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()}}]);